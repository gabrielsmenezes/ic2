framework,Id,PostTypeId,AcceptedAnswerId,positionOfAnswer,answerCreationDate,delayBetweenQuestionCreationAndAnswerCreation,ParentId,CreationDate,DeletionDate,Score,ViewCount,Body,OwnerUserId,OwnerDisplayName,LastEditorUserId,LastEditorDisplayName,LastEditDate,LastActivityDate,Title,Tags,AnswerCount,CommentCount,FavoriteCount,ClosedDate,CommunityOwnedDate
Android,28734594,1,28737314,33,2/26/2015 8:11:36,0,,2/26/2015 4:39:39,,6,8693,"<p>I've implemented <a href=""https://github.com/googlesamples/android-Camera2Basic/blob/master/Application/src/main/java/com/example/android/camera2basic/Camera2BasicFragment.java"" rel=""noreferrer"">this</a> offical Google <code>Camera2</code> example with minor changes into my app to take pictures in a custom camera. I need to also provide the option for video recording, but I can't find an example- maybe because the <code>Camera2</code> API is relatively new. </p>

<p>Does anyone have examples/tutorials on how to either A) modify the above code to also allow video recording, or B) implement video recording in a new fragment, while using the <code>Camera2</code> API?</p>

<p>Thank you in advance!</p>
",3558874,,,,,2015-02-26 8:11:36,Camera2 video recording,<android><android-camera>,1,1,2,,
Android,29848140,1,29861971,46,4/25/2015 6:45:12,1,,4/24/2015 12:57:04,,1,1138,"<p>I' ve downloaded the google's sample project in the subject from this link:
<a href=""https://github.com/googlesamples/android-XYZTouristAttractions"" rel=""nofollow"">https://github.com/googlesamples/android-XYZTouristAttractions</a></p>

<p>When trying to build this project i get this error (sorry for long trace):</p>

<pre><code>Information:Gradle tasks [:Application:assembleDebug]
:Application:preBuild UP-TO-DATE
:Application:preDebugBuild UP-TO-DATE
:Application:compileDebugNdk UP-TO-DATE
:Application:checkDebugManifest
:Application:preReleaseBuild UP-TO-DATE
:Shared:compileLint
:Shared:copyReleaseLint UP-TO-DATE
:Shared:preBuild UP-TO-DATE
:Shared:preReleaseBuild UP-TO-DATE
:Shared:checkReleaseManifest
:Shared:preDebugAndroidTestBuild UP-TO-DATE
:Shared:preDebugBuild UP-TO-DATE
:Shared:prepareComAndroidSupportSupportV42100Library UP-TO-DATE
:Shared:prepareComGoogleAndroidGmsPlayServicesBase6587Library UP-TO-DATE
:Shared:prepareComGoogleAndroidGmsPlayServicesLocation6587Library UP-TO-DATE
:Shared:prepareComGoogleAndroidGmsPlayServicesMaps6587Library UP-TO-DATE
:Shared:prepareComGoogleAndroidGmsPlayServicesWearable6587Library UP-TO-DATE
:Shared:prepareComGoogleMapsAndroidAndroidMapsUtils032Library UP-TO-DATE
:Shared:prepareReleaseDependencies
:Shared:compileReleaseAidl UP-TO-DATE
:Shared:compileReleaseRenderscript UP-TO-DATE
:Shared:generateReleaseBuildConfig UP-TO-DATE
:Shared:generateReleaseAssets UP-TO-DATE
:Shared:mergeReleaseAssets UP-TO-DATE
:Shared:generateReleaseResValues UP-TO-DATE
:Shared:generateReleaseResources UP-TO-DATE
:Shared:mergeReleaseResources UP-TO-DATE
:Shared:processReleaseManifest UP-TO-DATE
:Shared:processReleaseResources UP-TO-DATE
:Shared:generateReleaseSources UP-TO-DATE
:Shared:compileReleaseJava UP-TO-DATE
:Shared:extractReleaseAnnotations UP-TO-DATE
:Shared:mergeReleaseProguardFiles UP-TO-DATE
:Shared:processReleaseJavaRes UP-TO-DATE
:Shared:packageReleaseJar UP-TO-DATE
:Shared:compileReleaseNdk UP-TO-DATE
:Shared:packageReleaseJniLibs UP-TO-DATE
:Shared:packageReleaseLocalJar UP-TO-DATE
:Shared:packageReleaseRenderscript UP-TO-DATE
:Shared:packageReleaseResources UP-TO-DATE
:Shared:bundleRelease UP-TO-DATE
:Application:prepareAndroidXYZTouristAttractionsMasterSharedUnspecifiedLibrary UP-TO-DATE
:Application:prepareComAndroidSupportAppcompatV72200Library UP-TO-DATE
:Application:prepareComAndroidSupportRecyclerviewV72100Library UP-TO-DATE
:Application:prepareComAndroidSupportSupportV132100Library UP-TO-DATE
:Application:prepareComAndroidSupportSupportV42200Library UP-TO-DATE
:Application:prepareComGoogleAndroidGmsPlayServicesBase700Library UP-TO-DATE
:Application:prepareComGoogleAndroidGmsPlayServicesLocation700Library UP-TO-DATE
:Application:prepareComGoogleAndroidGmsPlayServicesMaps700Library UP-TO-DATE
:Application:prepareComGoogleAndroidGmsPlayServicesWearable700Library UP-TO-DATE
:Application:prepareComGoogleMapsAndroidAndroidMapsUtils032Library UP-TO-DATE
:Application:prepareDebugDependencies
:Application:compileDebugAidl UP-TO-DATE
:Application:compileDebugRenderscript UP-TO-DATE
:Application:generateDebugBuildConfig UP-TO-DATE
:Application:generateDebugAssets UP-TO-DATE
:Application:mergeDebugAssets UP-TO-DATE
:Application:generateDebugResValues UP-TO-DATE
:Wearable:preBuild UP-TO-DATE
:Wearable:preReleaseBuild UP-TO-DATE
:Wearable:compileReleaseNdk UP-TO-DATE
:Wearable:checkReleaseManifest
:Wearable:preDebugBuild UP-TO-DATE
:Wearable:prepareAndroidXYZTouristAttractionsMasterSharedUnspecifiedLibrary UP-TO-DATE
:Wearable:prepareComAndroidSupportRecyclerviewV72100Library UP-TO-DATE
:Wearable:prepareComAndroidSupportSupportV132103Library UP-TO-DATE
:Wearable:prepareComAndroidSupportSupportV42103Library UP-TO-DATE
:Wearable:prepareComGoogleAndroidGmsPlayServicesBase6587Library UP-TO-DATE
:Wearable:prepareComGoogleAndroidGmsPlayServicesLocation6587Library UP-TO-DATE
:Wearable:prepareComGoogleAndroidGmsPlayServicesMaps6587Library UP-TO-DATE
:Wearable:prepareComGoogleAndroidGmsPlayServicesWearable6587Library UP-TO-DATE
:Wearable:prepareComGoogleAndroidSupportWearable110Library UP-TO-DATE
:Wearable:prepareComGoogleMapsAndroidAndroidMapsUtils032Library UP-TO-DATE
:Wearable:prepareReleaseDependencies
:Wearable:compileReleaseAidl UP-TO-DATE
:Wearable:compileReleaseRenderscript UP-TO-DATE
:Wearable:generateReleaseBuildConfig UP-TO-DATE
:Wearable:generateReleaseAssets UP-TO-DATE
:Wearable:mergeReleaseAssets UP-TO-DATE
:Wearable:generateReleaseResValues UP-TO-DATE
:Wearable:generateReleaseResources UP-TO-DATE
:Wearable:mergeReleaseResources
AAPT out(1092500865) : No Delegate set : lost message:Done
AAPT out(1092500865) : No Delegate set : lost message:Done
AAPT out(682745170) : No Delegate set : lost message:Done
AAPT out(682745170) : No Delegate set : lost message:Done
AAPT out(1867061693) : No Delegate set : lost message:Done
AAPT out(1867061693) : No Delegate set : lost message:Done
AAPT out(682745170) : No Delegate set : lost message:Done
AAPT out(682745170) : No Delegate set : lost message:Crunching C:\Users\FedericoPonzi\Dropbox\Federico Ponzi\Programmazione\Java\Android\AndroidStudio\android-XYZTouristAttractions-master\Wearable\build\intermediates\exploded-aar\com.google.android.support\wearable\1.1.0\res\drawable-xhdpi-v4\generic_confirmation_00189.png
AAPT out(682745170) : No Delegate set : lost message:Done
AAPT out(1867061693) : No Delegate set : lost message:Done
AAPT out(682745170) : No Delegate set : lost message:Crunching C:\Users\FedericoPonzi\Dropbox\Federico Ponzi\Programmazione\Java\Android\AndroidStudio\android-XYZTouristAttractions-master\Wearable\build\intermediates\exploded-aar\com.google.android.support\wearable\1.1.0\res\drawable-xhdpi-v4\generic_confirmation_00170.png
AAPT out(1867061693) : No Delegate set : lost message:Crunching C:\Users\FedericoPonzi\Dropbox\Federico Ponzi\Programmazione\Java\Android\AndroidStudio\android-XYZTouristAttractions-master\Wearable\build\intermediates\exploded-aar\com.google.android.support\wearable\1.1.0\res\drawable-xhdpi-v4\generic_confirmation_00173.png
AAPT out(1867061693) : No Delegate set : lost message:Done
AAPT out(1867061693) : No Delegate set : lost message:Crunching C:\Users\FedericoPonzi\Dropbox\Federico Ponzi\Programmazione\Java\Android\AndroidStudio\android-XYZTouristAttractions-master\Wearable\build\intermediates\exploded-aar\com.google.android.support\wearable\1.1.0\res\drawable-xhdpi-v4\generic_confirmation_00166.png
AAPT out(1867061693) : No Delegate set : lost message:Done
AAPT out(1867061693) : No Delegate set : lost message:Crunching C:\Users\FedericoPonzi\Dropbox\Federico Ponzi\Programmazione\Java\Android\AndroidStudio\android-XYZTouristAttractions-master\Wearable\build\intermediates\exploded-aar\com.google.android.support\wearable\1.1.0\res\drawable-xhdpi-v4\generic_confirmation_00167.png
AAPT out(1867061693) : No Delegate set : lost message:Crunching single PNG file: C:\Users\FedericoPonzi\Dropbox\Federico Ponzi\Programmazione\Java\Android\AndroidStudio\android-XYZTouristAttractions-master\Wearable\build\intermediates\exploded-aar\com.google.android.support\wearable\1.1.0\res\drawable-xhdpi-v4\generic_confirmation_00167.pnghdpi\common_signin_btn_icon_disabled_dark.9.png ERROR: Unable to open PNG file
AAPT err(682745170): C:\Users\FedericoPonzi\Dropbox\Federico Ponzi\Programmazione\Java\Android\AndroidStudio\android-XYZTouristAttractions-master\Wearable\build\intermediates\exploded-aar\com.google.android.gms\play-services-base\6.5.87\res\drawable-xhdpi\ic_plusone_standard_off_client.png ERROR: Unable to open PNG file
AAPT err(50760915): C:\Users\FedericoPonzi\Dropbox\Federico Ponzi\Programmazione\Java\Android\AndroidStudio\android-XYZTouristAttractions-master\Wearable\build\intermediates\exploded-aar\com.google.android.support\wearable\1.1.0\res\drawable-hdpi-v4\generic_confirmation_00167.png ERROR: Unable to open PNG file
AAPT err(50760915): C:\Users\FedericoPonzi\Dropbox\Federico Ponzi\Programmazione\Java\Android\AndroidStudio\android-XYZTouristAttractions-master\Wearable\build\intermediates\exploded-aar\com.google.android.support\wearable\1.1.0\res\drawable-hdpi-v4\generic_confirmation_00165.png ERROR: Unable to open PNG file
AAPT err(50760915): C:\Users\FedericoPonzi\Dropbox\Federico Ponzi\Programmazione\Java\Android\AndroidStudio\android-XYZTouristAttractions-master\Wearable\build\intermediates\exploded-aar\com.google.android.gms\play-services-base\6.5.87\res\drawable-xhdpi\common_signin_btn_text_disabled_light.9.png ERROR: Unable to open PNG file
AAPT err(50760915): C:\Users\FedericoPonzi\Dropbox\Federico Ponzi\Programmazione\Java\Android\AndroidStudio\android-XYZTouristAttractions-master\Wearable\build\intermediates\exploded-aar\com.google.android.gms\play-services-base\6.5.87\res\drawable-mdpi\common_signin_btn_text_normal_dark.9.png ERROR: Unable to open PNG file
AAPT err(1144179795): C:\Users\FedericoPonzi\Dropbox\Federico Ponzi\Programmazione\Java\Android\AndroidStudio\android-XYZTouristAttractions-master\Wearable\build\intermediates\exploded-aar\com.google.android.support\wearable\1.1.0\res\drawable-mdpi-v4\generic_confirmation_00164.png ERROR: Unable to open PNG file
AAPT err(1144179795): C:\Users\FedericoPonzi\Dropbox\Federico Ponzi\Programmazione\Java\Android\AndroidStudio\android-XYZTouristAttractions-master\Wearable\build\intermediates\exploded-aar\com.google.android.support\wearable\1.1.0\res\drawable-mdpi-v4\generic_confirmation_00166.png ERROR: Unable to open PNG file
AAPT err(1144179795): C:\Users\FedericoPonzi\Dropbox\Federico Ponzi\Programmazione\Java\Android\AndroidStudio\android-XYZTouristAttractions-master\Wearable\build\intermediates\exploded-aar\com.google.android.gms\play-services-base\6.5.87\res\drawable-mdpi\common_signin_btn_text_focus_dark.9.png ERROR: Unable to open PNG file
AAPT err(1144179795): C:\Users\FedericoPonzi\Dropbox\Federico Ponzi\Programmazione\Java\Android\AndroidStudio\android-XYZTouristAttractions-master\Wearable\build\intermediates\exploded-aar\com.google.android.support\wearable\1.1.0\res\drawable-mdpi-v4\generic_confirmation_00189.png ERROR: Unable to open PNG file
AAPT err(682745170): C:\Users\FedericoPonzi\Dropbox\Federico Ponzi\Programmazione\Java\Android\AndroidStudio\android-XYZTouristAttractions-master\Wearable\build\intermediates\exploded-aar\com.google.android.gms\play-services-base\6.5.87\res\drawable-mdpi\common_signin_btn_text_pressed_light.9.png ERROR: Unable to open PNG file
AAPT err(1092500865): C:\Users\FedericoPonzi\Dropbox\Federico Ponzi\Programmazione\Java\Android\AndroidStudio\android-XYZTouristAttractions-master\Wearable\build\intermediates\exploded-aar\com.google.maps.android\android-maps-utils\0.3.2\res\drawable-xhdpi-v4\bubble_mask.9.png: libpng warning: iCCP: Not recognizing known sRGB profile that has been edited
AAPT err(682745170): C:\Users\FedericoPonzi\Dropbox\Federico Ponzi\Programmazione\Java\Android\AndroidStudio\android-XYZTouristAttractions-master\Wearable\build\intermediates\exploded-aar\com.google.android.gms\play-services-base\6.5.87\res\drawable-xhdpi\common_signin_btn_text_normal_light.9.png ERROR: Unable to open PNG file
AAPT err(682745170): C:\Users\FedericoPonzi\Dropbox\Federico Ponzi\Programmazione\Java\Android\AndroidStudio\android-XYZTouristAttractions-master\Wearable\build\intermediates\exploded-aar\com.google.android.gms\play-services-base\6.5.87\res\drawable-hdpi\common_signin_btn_text_focus_dark.9.png ERROR: Unable to open PNG file
AAPT err(682745170): C:\Users\FedericoPonzi\Dropbox\Federico Ponzi\Programmazione\Java\Android\AndroidStudio\android-XYZTouristAttractions-master\Wearable\build\intermediates\exploded-aar\com.google.android.gms\play-services-base\6.5.87\res\drawable-xxhdpi\ic_plusone_standard_off_client.png ERROR: Unable to open PNG file
AAPT err(682745170): C:\Users\FedericoPonzi\Dropbox\Federico Ponzi\Programmazione\Java\Android\AndroidStudio\android-XYZTouristAttractions-master\Wearable\build\intermediates\exploded-aar\com.google.android.gms\play-services-base\6.5.87\res\drawable-mdpi\ic_plusone_standard_off_client.png ERROR: Unable to open PNG file
AAPT err(682745170): C:\Users\FedericoPonzi\Dropbox\Federico Ponzi\Programmazione\Java\Android\AndroidStudio\android-XYZTouristAttractions-master\Wearable\build\intermediates\exploded-aar\com.google.android.gms\play-services-base\6.5.87\res\drawable-xxhdpi\ic_plusone_tall_off_client.png ERROR: Unable to open PNG file
AAPT err(682745170): C:\Users\FedericoPonzi\Dropbox\Federico Ponzi\Programmazione\Java\Android\AndroidStudio\android-XYZTouristAttractions-master\Wearable\build\intermediates\exploded-aar\com.google.android.gms\play-services-base\6.5.87\res\drawable-xhdpi\common_signin_btn_icon_focus_dark.9.png ERROR: Unable to open PNG file
:Wearable:mergeReleaseResources FAILED
Error:Execution failed for task ':Wearable:mergeReleaseResources'.

Crunching Cruncher common_signin_btn_text_disabled_focus_light.9.png failed, see logs
Information:BUILD FAILED
Information:Total time: 17.486 secs
Information:1 error
Information:0 warnings
Information:See complete output in console
</code></pre>

<p>Note: i had to cut the trace, due to space problems, the complete trace can be found here: <a href=""https://github.com/googlesamples/android-XYZTouristAttractions/issues/1"" rel=""nofollow"">https://github.com/googlesamples/android-XYZTouristAttractions/issues/1</a></p>

<p>I have windows 8 with AS 1.2 and:</p>

<pre><code>SDK build tools 22.0.1
SDK platform 22 and 4.4.W2 (api 20)
</code></pre>

<p>I've tried to redownload the whole project, and install build tools 21.1.2 and now the error is the same but with another file in that directory.</p>
",2280212,,,,,2015-04-25 6:45:12,android-XYZTouristAttractions google's example: error while trying to compile,<android>,1,1,,,
Android,31188849,1,31191045,71,7/2/2015 17:31:31,0,,7/2/2015 15:33:40,,3,3785,"<p>No matter what projects I import they never work - Android Studio is always flagging <code>this is not a Gradle build project</code>.</p>

<p>I select <code>VCS -&gt; GIT</code> and clone the repo without any problem. I then go through the wizard with no issues (I select <code>create project from existing sources</code>), creating my code base with a warning, below.  When i try to run throws all sorts of errors.</p>

<blockquote>
  <p>Migrate Project to Gradle? This project does not use the Gradle build
  system. We recommend that you migrate to using the Gradle build
  system. More Information about migrating to Gradle.</p>
  
  <p>Don't show this message again.</p>
</blockquote>

<p>When I go to the link it makes no sense whatever to me, it says to create an arbitrary Gradle file and populate it with my references (I think), which is out of my understanding. I shouldnt have to do this as it says in the repository instructions that it is in fact a Gradle-based project.</p>

<p>The project I am trying to clone is
<a href=""https://github.com/googlesamples/android-play-location.git"" rel=""nofollow"">https://github.com/googlesamples/android-play-location.git</a></p>

<p>Can anybody tell me specifically how to import and run the following git repo in Android studio for example?</p>
",510981,,130659,,2015-07-03 10:04:20,2018-09-20 3:42:17,Android Studio not recognising Gradle projects,<android><android-studio><gradle>,5,0,2,,
Android,30444150,1,31858505,86,8/6/2015 14:31:27,73,,5/25/2015 18:31:37,,1,705,"<p>The sample code in google place picker uses cardstream lib. Is this a open source lib and if so where do i find the documentation/guide for using it ?</p>

<p>github URL: <a href=""https://github.com/googlesamples/android-play-places/tree/master/PlacePicker"" rel=""nofollow"">https://github.com/googlesamples/android-play-places/tree/master/PlacePicker</a></p>
",2080970,,,,,2015-08-06 14:31:27,Use of cardstream in google place picker sample code,<google-places-api>,1,0,,,
Android,32021193,1,32029162,93,8/15/2015 20:43:58,0,,8/15/2015 3:22:56,,27,25619,"<p>I've been playing with the sample code from the new Google Barcode API.  It overlays a box and the barcode value over the live camera feed of a barcode.  (Also faces)</p>

<p>I can't tell how to return a barcode value to my app.  A) How to tell when a detection event has occurred and B) how to access the ravValue for use in other parts of my app.  Can anyone help with this?</p>

<p><a href=""https://developers.google.com/vision/multi-tracker-tutorial"">https://developers.google.com/vision/multi-tracker-tutorial</a></p>

<p><a href=""https://github.com/googlesamples/android-vision"">https://github.com/googlesamples/android-vision</a></p>

<p><strong>UPDATE:</strong>
Building on @pm0733464's answer, I added a callback interface (called onFound) to the Tracker class that I could access in the Activity. Adapting the Google multi-tracker sample:</p>

<p><strong>GraphicTracker</strong>:</p>

<pre><code>class GraphicTracker&lt;T&gt; extends Tracker&lt;T&gt; {
    private GraphicOverlay mOverlay;
    private TrackedGraphic&lt;T&gt; mGraphic;
    private Callback mCallback;

    GraphicTracker(GraphicOverlay overlay, TrackedGraphic&lt;T&gt; graphic, Callback callback) {
        mOverlay = overlay;
        mGraphic = graphic;
        mCallback = callback;
    }

    public interface Callback {
        void onFound(String barcodeValue);
    }

    @Override
    public void onUpdate(Detector.Detections&lt;T&gt; detectionResults, T item) {
        mCallback.onFound(((Barcode) item).rawValue);
        mOverlay.add(mGraphic);
        mGraphic.updateItem(item);
    }
</code></pre>

<p><strong>BarcodeTrackerFactory</strong> :</p>

<pre><code>class BarcodeTrackerFactory implements MultiProcessor.Factory&lt;Barcode&gt; {
    private GraphicOverlay mGraphicOverlay;
    private GraphicTracker.Callback mCallback;

    BarcodeTrackerFactory(GraphicOverlay graphicOverlay, GraphicTracker.Callback callback) {
        mGraphicOverlay = graphicOverlay;
        mCallback = callback;
    }

    @Override
    public Tracker&lt;Barcode&gt; create(Barcode barcode) {
        BarcodeGraphic graphic = new BarcodeGraphic(mGraphicOverlay);
        return new GraphicTracker&lt;&gt;(mGraphicOverlay, graphic, mCallback);
    }
}
</code></pre>

<p><strong>Main Activity:</strong></p>

<pre><code>BarcodeDetector barcodeDetector = new BarcodeDetector.Builder(context).build();
BarcodeTrackerFactory barcodeFactory = new BarcodeTrackerFactory(mGraphicOverlay, new GraphicTracker.Callback() {
    @Override
    public void onFound(String barcodeValue) {
        Log.d(TAG, ""Barcode in Multitracker = "" + barcodeValue);
    }
});
MultiProcessor&lt;Barcode&gt; barcodeMultiProcessor = new MultiProcessor.Builder&lt;&gt;(barcodeFactory).build();
barcodeDetector.setProcessor(barcodeMultiProcessor);
</code></pre>
",3576831,,3576831,,2015-08-16 4:35:36,2015-10-01 3:17:58,How to capture barcode values using the new Barcode API in Google Play Services?,<android><google-play-services><google-vision>,1,7,15,,
Android,32051973,1,32051974,95,8/17/2015 13:41:50,0,,8/17/2015 13:41:50,,12,16099,"<p>I have checkout out the latest Google Vision APIs from here:</p>

<p><a href=""https://github.com/googlesamples/android-vision"" rel=""noreferrer"">https://github.com/googlesamples/android-vision</a></p>

<p>And I am running it on a LG G2 device with KitKat. The only change I have made is to the minSdkVerion in the Gradle file:</p>

<pre><code>...
defaultConfig {
    applicationId ""com.google.android.gms.samples.vision.face.multitracker""
    minSdkVersion 19
...
</code></pre>

<p>However it does not focus. How do I make it focus?</p>
",932052,,379726,,2015-09-28 9:31:22,2018-06-08 9:57:34,Google Vision API Samples: Get the CameraSource to Focus,<android><camera><google-play-services><google-vision><android-vision>,3,0,2,,
Android,32258675,1,32300841,111,8/30/2015 20:30:01,3,,8/27/2015 20:17:43,,5,2913,"<p>I've been working on a project and got to make face detection working, with focus, <a href=""https://stackoverflow.com/questions/32051973/google-vision-api-samples-get-the-camerasource-to-focus"">thanks to SO</a>.</p>

<p>I am now taking pictures, but using the front camera on my Nexus 5 and a preview size of 1280x960, the play services seem to set the picture size to 320x240.</p>

<p>I checked, 1280x960 is supported on both preview and picture.</p>

<p>I tried changing the parameters using reflection (same as for the focus), but nothing changed.
Seems to be necessary to change that before starting the preview...</p>

<p>I've been trying to read and debug the obfuscated code, but I can't get why the library decides to go for this low resolution :-(</p>

<p>The code used is close to what's included in the sample, just added the possibility to take a picture using CameraSource.takePicture(...)</p>

<p>You can find the code in <a href=""https://github.com/googlesamples/android-vision/tree/master/visionSamples/FaceTracker"" rel=""nofollow noreferrer"">the samples repo</a></p>

<p>Code to reproduce the issue => <a href=""https://github.com/saiimons/android-vision/tree/take_picture_issue/visionSamples/FaceTracker"" rel=""nofollow noreferrer"">here</a></p>

<p>I changed the camera init with :</p>

<pre><code>mCameraSource = new CameraSource.Builder(context, detector)
    .setRequestedPreviewSize(1280, 960)
            .setFacing(CameraSource.CAMERA_FACING_FRONT)
            .setRequestedFps(30.0f)
            .build();
</code></pre>

<p>Added a button and connected a clik listener :</p>

<pre><code>findViewById(R.id.snap).setOnClickListener(new View.OnClickListener() {
        @Override
        public void onClick(View v) {
            mCameraSource.takePicture(null, new CameraSource.PictureCallback() {
                @Override
                public void onPictureTaken(byte[] bytes) {
                    Bitmap bmp = BitmapFactory.decodeByteArray(bytes, 0, bytes.length);
                    Log.d(""BITMAP"", bmp.getWidth() + ""x"" + bmp.getHeight());
                }
            });
        }
    });
</code></pre>

<p>Log output :</p>

<pre><code>BITMAPï¹• 320x240
</code></pre>

<p>Thanks for the help !</p>
",5274454,,-1,,2017-05-23 11:59:44,2015-12-22 18:05:32,New vision API - Picture size,<android><camera><google-play-services><google-vision><android-vision>,1,3,2,,
Android,34638651,1,34650699,203,1/7/2016 8:45:41,1,,1/6/2016 17:05:05,,10,3202,"<p>My question is very simple:</p>

<blockquote>
  <p>How to get an Android <code>android.hardware.Camera2</code> with 1:1 ratio and without deformation like Instagram?</p>
</blockquote>

<p>I tested with the GoogeSamples project <a href=""https://github.com/googlesamples/android-Camera2Basic"" rel=""noreferrer"">android-Camera2Basic</a>. But when I change the preview with a ratio of 1:1 image is deformed. Does anyone have an idea on this?</p>

<p><a href=""https://i.stack.imgur.com/wGC9Y.png"" rel=""noreferrer""><img src=""https://i.stack.imgur.com/wGC9Y.png"" alt=""enter image description here""></a></p>
",1832221,,2370483,,2019-01-16 22:53:19,2019-01-16 22:53:19,How to get an Android Camera2 with 1:1 ratio like Instagram?,<android><android-camera2>,3,4,3,,
Android,37206416,1,37388669,278,5/23/2016 10:33:00,10,,5/13/2016 9:35:24,,3,952,"<p>While running the sample NDK program <a href=""https://github.com/googlesamples/android-ndk/tree/master/native-audio"" rel=""nofollow"">Native Audio</a> in Android studio in Arch Linux I get the following error:  </p>

<blockquote>
  <p>Error:Execution failed for task ':app:compileNative-audio-jniArmeabi-v7aDebugSharedLibraryNative-audio-jniMainC'.<br>
  No tool chain is available to build for platform 'armeabi-v7a':
      - Tool chain 'ndk-clang' (Clang): Could not determine Clang version: failed to execute clang -dM -E -.</p>
</blockquote>

<p>How can I correct this error? Do I need to make a tool chain so that i can run the sample ndk program?</p>
",4180271,,,,,2017-05-08 19:21:49,No tool chain is available to build for platform 'armeabi-v7a',<android><android-studio><android-ndk>,2,2,,,
Android,39044494,1,39054918,326,8/20/2016 13:56:07,1,,8/19/2016 17:11:34,,8,7231,"<p>I'm building a custom camera using the new camera2 API. My code is based on the code sample provided by Google <a href=""https://github.com/googlesamples/android-Camera2Video"" rel=""noreferrer"">here</a>. </p>

<p>I can't find a way to get the camera preview in full screen. In the code sample, they use ratio optimization to adapt to all screens but it's only taking around 3/4 of the screen's height.</p>

<p>Here is my code of <code>AutoFitTextureView</code> :</p>

<pre><code>public class AutoFitTextureView extends TextureView {

private int mRatioWidth = 0;
private int mRatioHeight = 0;

public AutoFitTextureView(Context context) {
    this(context, null);
}

public AutoFitTextureView(Context context, AttributeSet attrs) {
    this(context, attrs, 0);
}

public AutoFitTextureView(Context context, AttributeSet attrs, int defStyle) {
    super(context, attrs, defStyle);
}

/**
 * Sets the aspect ratio for this view. The size of the view will be measured based on the ratio
 * calculated from the parameters. Note that the actual sizes of parameters don't matter, that
 * is, calling setAspectRatio(2, 3) and setAspectRatio(4, 6) make the same result.
 *
 * @param width  Relative horizontal size
 * @param height Relative vertical size
 */
public void setAspectRatio(int width, int height) {
    if (width &lt; 0 || height &lt; 0) {
        throw new IllegalArgumentException(""Size cannot be negative."");
    }
    mRatioWidth = width;
    mRatioHeight = height;
    requestLayout();
}

@Override
protected void onMeasure(int widthMeasureSpec, int heightMeasureSpec) {
    super.onMeasure(widthMeasureSpec, heightMeasureSpec);
    int width = MeasureSpec.getSize(widthMeasureSpec);
    int height = MeasureSpec.getSize(heightMeasureSpec);

    if (0 == mRatioWidth || 0 == mRatioHeight) {
        setMeasuredDimension(width, height);
    } else {
        if (width &lt; height * mRatioWidth / mRatioHeight) {
            setMeasuredDimension(width, width * mRatioHeight / mRatioWidth);
        } else {
            setMeasuredDimension(height * mRatioWidth / mRatioHeight, height);
        }
    }
}
</code></pre>

<p>}</p>

<p>Thank you very much for your help.</p>
",5175297,,,,,2018-04-03 12:23:20,Get full screen preview with Android camera2,<android><camera><camera2><android-camera2>,2,0,3,,
Android,39022845,1,39064930,327,8/21/2016 13:50:03,3,,8/18/2016 16:04:05,,6,8702,"<p>I'm creating a custom camera capturing videos with the new camera2 API.</p>

<p>My code is strongly inspired from the code provided by Google <a href=""https://github.com/googlesamples/android-Camera2Video"" rel=""noreferrer"">here</a>. My camera preview has a button to switch from back to front camera and then from front to back camera.
The ""camera preview"" activity is launched with the back camera by default.</p>

<p>For some reason, when I click on the ""switch/swap camera"" button <strong>for the first time</strong>, it brings be to the front camera as it should, BUT everytime I click again, the switch/swap doesn't work anymore: the preview (on the front camera) fades a little bit, like if something is happening, but it remains on the currently selected (front) camera. </p>

<p>Here is my code :</p>

<p>In a <code>RecordVideoFragment</code>, in the <code>onViewCreated</code>:</p>

<pre><code>//  Switch camera button
        switchCameraButton = (ImageButton) view.findViewById(R.id.button_switch_camera);
        // Listener for Switch cameras button
        switchCameraButton.setOnClickListener(new View.OnClickListener() {
            @Override
            public void onClick(View v) {
                switchCameras();
            }
        });
</code></pre>

<p>And here is the <code>switchCameras()</code> function: </p>

<pre><code>private void  switchCameras() {
        mCameraOpenCloseLock.release();
        mCameraDevice.close();

        CameraManager mCameraManager = (CameraManager) getActivity().getSystemService(Context.CAMERA_SERVICE);
        try {
            String mCameraId = mCameraManager.getCameraIdList()[0];
            if (mCameraId.equals(""0"")) {   // If currently on FRONT camera (0 = CameraCharacteristics.LENS_FACING_FRONT)
                mCameraId = ""1"";           // switch to BACK camera (1 = CameraCharacteristics.LENS_FACING_BACK)
                switchCameraButton.setImageResource(R.drawable.ic_camera_front);
            } else {  // If currently on BACK camera
                mCameraId = ""0""; // switch to front camera
                switchCameraButton.setImageResource(R.drawable.ic_camera_back);
            }
            try {
                if (ActivityCompat.checkSelfPermission(getActivity(), Manifest.permission.CAMERA)
                        == PackageManager.PERMISSION_GRANTED) {
                    mCameraManager.openCamera(mCameraId, mStateCallback, null);
                } else {
                    requestVideoPermissions();
                }
            } catch (CameraAccessException e) {
                e.printStackTrace();
            }
        } catch (CameraAccessException e) {
            Toast.makeText(getActivity(), ""Cannot access the camera."", Toast.LENGTH_SHORT).show();
            getActivity().finish();
        }
    }
</code></pre>

<p>If you have any idea on what's happening that would save me. I have been bugging on this for days. Thank you very much</p>
",5175297,,,,,2018-02-08 8:39:38,Android Camera2 API switch back - front cameras,<android><camera><camera2><android-camera2>,2,1,3,,
Android,40849143,1,40849410,375,11/28/2016 16:45:53,0,,11/28/2016 16:29:55,,1,212,"<p>I want to clone next project:
<a href=""https://github.com/googlesamples/android-architecture"" rel=""nofollow noreferrer"">android-architecture</a></p>

<p>In github I got the <a href=""https://github.com/googlesamples/android-architecture.git"" rel=""nofollow noreferrer"">HTTPS link</a> to clone project.<br>
In Android Studio: File - New - Project from Version Control - Github.<br>
But when I cloned the project, I see next in Project window:</p>

<p><a href=""https://i.stack.imgur.com/ETfnZ.png"" rel=""nofollow noreferrer""><img src=""https://i.stack.imgur.com/ETfnZ.png"" alt=""enter image description here""></a></p>

<p>And no project files.<br></p>

<p>Moreover - files are not present in Explorer:<br><br>
<a href=""https://i.stack.imgur.com/j64KQ.png"" rel=""nofollow noreferrer""><img src=""https://i.stack.imgur.com/j64KQ.png"" alt=""enter image description here""></a></p>

<p><strong>What am I doing wrong?</strong></p>

<p>PS. When I press ""Download ZIP"" in github - everything is ok.<br>
PPS. Tried to clone via terminal (not Studio) - result is the same.</p>
",4342778,,4342778,,2016-11-28 16:46:00,2016-11-28 16:46:00,Cannot clone project from github,<git><android-studio><github>,1,0,,,
Android,41032145,1,41032503,378,12/8/2016 5:40:18,0,,12/8/2016 5:07:19,,1,1240,"<p>{Novice Android Dev.}</p>

<p>I'm currently using Google's Open Source Media App found on <a href=""https://github.com/googlesamples/android-UniversalMusicPlayer"" rel=""nofollow noreferrer"">Github</a> to try and create my own media player for one of my own projects. However, one issue that I keep running into is that when I change the JSON file in RemoteJSON from </p>

<pre><code>protected static final String CATALOG_URL =
    ""http://storage.googleapis.com/automotive-media/music.json"";
</code></pre>

<p>to</p>

<pre><code>protected static final String CATALOG_URL =
    ""https://api.myjson.com/bins/2ir4d"";
</code></pre>

<p>(using myjson.com to store the file)</p>

<p>it populates the information within the app but when one item is selected, it produces a MediaPlayer error 1 (-2147483648). (All I did was copy the JSON code from original Google URL and uploaded it to myjson)</p>

<p>My goal is to create my own JSON file with my own media content but I can't even get this one to work outside of the provided URL.</p>

<p>Any ideas?
Much obliged</p>
",2518783,,,,,2016-12-08 14:51:51,JSON with Android Universal Media Player Application (MediaPlayer Error 1),<android><json>,2,0,1,,
Android,26479618,1,26480019,849,10/21/2014 6:13:22,0,,10/21/2014 5:42:16,,1,1950,"<p>I am trying out Android L's new profile manager. <a href=""https://github.com/googlesamples/android-BasicManagedProfile"" rel=""nofollow"">https://github.com/googlesamples/android-BasicManagedProfile</a></p>

<p>When I deploy the apk, the package manager is not able to resolve the intent for device provisioning hence, I am getting ""Device provisioning is not enabled. Stopping.""</p>

<p>I have the latest Android L device image, that I got from <a href=""http://developer.android.com/preview/index.html#download"" rel=""nofollow"">http://developer.android.com/preview/index.html#download</a></p>

<p>How can I enable device provisioning so that I can run the sample code.</p>
",710802,,,,,2014-10-21 6:13:22,"Android L ""Device provisioning is not enabled""?",<android><android-5.0-lollipop>,1,2,1,,
Android,26310908,1,27478710,850,12/15/2014 6:48:26,65,,10/11/2014 3:57:59,,1,1108,"<p>I have an experiment with Android Manage Profile <a href=""https://github.com/googlesamples/android-BasicManagedProfile"" rel=""nofollow"">https://github.com/googlesamples/android-BasicManagedProfile</a> for Android L Platform.
Android L successfully installed on my Nexus 7 and sample application of basic manage profile successfully compiled and run on the device. </p>

<p>The sample app correctly send intent to start the Provisioning.</p>

<pre><code>Intent intent = new Intent(ACTION_PROVISION_MANAGED_PROFILE);
    intent.putExtra(EXTRA_PROVISIONING_DEVICE_ADMIN_PACKAGE_NAME,
                    activity.getApplicationContext().getPackageName());
    intent.putExtra(EXTRA_PROVISIONING_DEFAULT_MANAGED_PROFILE_NAME,
                    ""Sample Managed Profile"");
    intent.putExtra(EXTRA_DEVICE_ADMIN, BasicDeviceAdminReceiver.getComponentName(activity));
    if (intent.resolveActivity(activity.getPackageManager()) != null) {
        startActivity(intent);
        activity.finish();
    } else {
        Toast.makeText(activity, ""Device provisioning is not enabled. Stopping."",
                       Toast.LENGTH_SHORT).show();
    }
</code></pre>

<p>The provisioning activity shown and display a message that require restart to encrypt the device.
After device restarted there is a notification ""Continue provisioning"", when I click the notification, the provisioning activity ask to restart the device again and again.</p>

<p>I already tried also in emulator and got the same behaviour. </p>

<p>Is anyone have a clue on this? </p>
",1024806,,,,,2014-12-15 6:48:26,Android L Manage Profile,<android><android-5.0-lollipop>,1,0,1,,
Android,28004653,1,28005607,851,1/17/2015 23:44:49,0,,1/17/2015 21:42:34,,2,6708,"<p>I am new to using recyclerview and adapters.  I have the RecyclerView and an Onclick working (thanks to Google: <a href=""https://github.com/googlesamples/android-RecyclerView"" rel=""nofollow noreferrer"">https://github.com/googlesamples/android-RecyclerView</a>).  It does have an setOnClickListener which writes to the Log.  But I'm trying to figure out how to remove an item from the list when it is clicked - I can't figure out how to get to the ArrayList which the adapter is using and run notifyItemInserted to update the display. </p>

<p>In reviewing another post (Android RecyclerView addition &amp; removal of items - <a href=""https://stackoverflow.com/questions/26076965/android-recyclerview-addition-removal-of-items"">Android RecyclerView addition &amp; removal of items</a>) it looks like paradite/Jared Burrows were able to get it running.  But some of the code appears to be missing and I was hoping that someone could fill in the holes for me.  (I couldn't comment on this other post to ask the question there).  </p>

<p>For example, I don't see that mItemClickListener is defined anywhere.  I'm also not sure of the connection between the class which extends the RecyclerView.Adapter and the class which extends the RecyclerView.ViewHolder.</p>

<p>Here is my RecyclerView.Adapter:</p>

<pre><code>public class RVAdapter1 extends RecyclerView.Adapter&lt;RVAdapter1.ViewHolder&gt; {
private static final String TAG = ""debug"";
private int itemCounter = 0;

private List&lt;String&gt; feedItemList;

public static class ViewHolder extends RecyclerView.ViewHolder {
    private final TextView textView;

    public ViewHolder(View v) {
        super(v);
        v.setOnClickListener(new View.OnClickListener() {
            @Override
            public void onClick(View v) {
                Log.d(TAG, ""Element "" + getPosition() + "" clicked."");
                //feedItemList.remove(getPosition());
               //notifyItemRemoved(getPosition());
            }
        });
        textView = (TextView) v.findViewById(R.id.textView);
    }

    public TextView getTextView() {
        return textView;
    }
}

public RVAdapter1(List&lt;String&gt; dataSet) {
    feedItemList = dataSet;
}

@Override
public ViewHolder onCreateViewHolder(ViewGroup viewGroup, int viewType) {
    View v = LayoutInflater.from(viewGroup.getContext())
            .inflate(R.layout.text_row_item, viewGroup, false);
    return new ViewHolder(v);
}

@Override
public void onBindViewHolder(ViewHolder viewHolder, final int position) {
    Log.d(TAG, ""Element "" + position + "" set."");
    viewHolder.getTextView().setText(String.valueOf(feedItemList.get(position)));
}

@Override
public int getItemCount() {
    return feedItemList.size();
}

public void addItem(int position, String data) {
    feedItemList.add(position, data);
    notifyItemInserted(position);
    Log.d(TAG,""adapter list length="" + feedItemList.size());
}
}    
</code></pre>

<p>I am trying to use the adapter from the other StackOverflow question, but I am unsure of how to connect (or combine?) the two adapters and where the mItemClickListener comes from).</p>

<pre><code>public class ViewHolder extends RecyclerView.ViewHolder implements View.OnClickListener{
public CardView mCardView;
public TextView mTextViewTitle;
public TextView mTextViewContent;
public ImageView mImageViewContentPic;
//......
public ImageView imgViewRemoveIcon;
public ViewHolder(View v) {
    super(v);
    mCardView = (CardView) v.findViewById(R.id.card_view);
    mTextViewTitle = (TextView) v.findViewById(R.id.item_title);
    mTextViewContent = (TextView) v.findViewById(R.id.item_content);
    mImageViewContentPic = (ImageView) v.findViewById(R.id.item_content_pic);
    //......
    imgViewRemoveIcon = (ImageView) v.findViewById(R.id.remove_icon);

    mTextViewContent.setOnClickListener(this);
    imgViewRemoveIcon.setOnClickListener(this);
    v.setOnClickListener(this);
    mTextViewContent.setOnLongClickListener(new View.OnLongClickListener() {
        @Override
        public boolean onLongClick(View view) {
            if (mItemClickListener != null) {
                mItemClickListener.onItemClick(view, getPosition());
            }
            return false;
        }
    });
}

@Override
public void onClick(View v) {
    //Log.d(""View: "", v.toString());
    //Toast.makeText(v.getContext(), mTextViewTitle.getText() + "" position = "" + getPosition(), Toast.LENGTH_SHORT).show();
    if(v.equals(imgViewRemoveIcon)){
        removeAt(getPosition());
    }else if (mItemClickListener != null) {
        mItemClickListener.onItemClick(v, getPosition());
        }
    }
}

public void setOnItemClickListener(final OnItemClickListener mItemClickListener) {
    this.mItemClickListener = mItemClickListener;
}

public void removeAt(int position) {
    mDataset.remove(position);
    notifyItemRemoved(position);
    notifyItemRangeChanged(getPosition, mDataSet.size());
}    
</code></pre>

<p>This may be a trivial question but I certainly would appreciate any help that anyone is willing to offer...  Thanks!</p>
",4465348,,-1,,2017-05-23 12:32:21,2015-01-17 23:44:49,Problems with OnClick to remove item from within Adapter,<android><adapter><android-recyclerview>,2,0,,,
Android,28003186,1,28019789,852,1/19/2015 7:29:36,2,,1/17/2015 19:07:27,,16,31689,"<p>What I want to achieve is capturing a picture without showing the preview, sending directly the output to an <code>ImageReader</code>. 
I have used the <a href=""https://github.com/googlesamples/android-Camera2Basic/blob/master/Application/src/main/java/com/example/android/camera2basic/Camera2BasicFragment.java"" rel=""noreferrer"">Camera2Basic example</a> as a starting point. 
However, the callback of my <code>ImageReader</code> is never called, hence no image is sent to its <code>Surface</code>.
Do I really need to display a preview first?</p>

<p>This is the camera code, which is ordered following the flow of the asynchronous callbacks:</p>

<pre><code>private ImageReader imageReader;
private Handler backgroundHandler;
private HandlerThread backgroundThread;
private String cameraId;
private CameraDevice cameraDevice;
private CameraCaptureSession cameraCaptureSession;
    @Override
    public void onCreate() {
        setupCamera2();
    }

    private void setupCamera2() {
        CameraManager manager = (CameraManager) getSystemService(Context.CAMERA_SERVICE);

        try {

            for (String cameraId : manager.getCameraIdList()) {
            CameraCharacteristics characteristics = manager.getCameraCharacteristics(cameraId);

            if (characteristics.get(CameraCharacteristics.LENS_FACING) != CameraCharacteristics.LENS_FACING_FRONT) {
                continue;
            }

            this.cameraId = cameraId;

            int[] picSize = Settings.getPictureSize();
            int picWidth = picSize[0];
            int picHeight = picSize[1];

            imageReader = ImageReader.newInstance(picWidth, picHeight, ImageFormat.JPEG, 2);
            imageReader.setOnImageAvailableListener(onImageAvailableListener, backgroundHandler);
            }

        } catch (CameraAccessException | NullPointerException e) {
            e.printStackTrace();
        }
    }


    private void openCamera2() {
        CameraManager manager = (CameraManager) getSystemService(Context.CAMERA_SERVICE);
        try {

            manager.openCamera(cameraId, cameraStateCallback, backgroundHandler);

        } catch (CameraAccessException e) {
            e.printStackTrace();
        }
    }



    private final CameraDevice.StateCallback cameraStateCallback = new CameraDevice.StateCallback() {
        @Override
        public void onOpened(CameraDevice device) {
            cameraDevice = device;
            createCameraCaptureSession();
        }

        @Override
        public void onDisconnected(CameraDevice cameraDevice) {}

        @Override
        public void onError(CameraDevice cameraDevice, int error) {}
    };



    private void createCaptureSession() {
        List&lt;Surface&gt; outputSurfaces = new LinkedList&lt;&gt;();
        outputSurfaces.add(imageReader.getSurface());

        try {

            cameraDevice.createCaptureSession(outputSurfaces, new CameraCaptureSession.StateCallback() {
                @Override
                public void onConfigured(CameraCaptureSession session) {
                    cameraCaptureSession = session;
                }

                @Override
                public void onConfigureFailed(CameraCaptureSession session) {}
            }, null);

        } catch (CameraAccessException e) {
            e.printStackTrace();
        }
    }


    private final ImageReader.OnImageAvailableListener onImageAvailableListener = new ImageReader.OnImageAvailableListener() {
        @Override
        public void onImageAvailable(ImageReader reader) {
            createCaptureRequest();
        }
    };


    private void createCaptureRequest() {
        try {

            CaptureRequest.Builder requestBuilder = cameraDevice.createCaptureRequest(CameraDevice.TEMPLATE_STILL_CAPTURE);
            requestBuilder.addTarget(imageReader.getSurface());

            // Focus
            requestBuilder.set(CaptureRequest.CONTROL_AF_MODE, CaptureRequest.CONTROL_AF_MODE_CONTINUOUS_PICTURE);

            // Orientation
            int rotation = windowManager.getDefaultDisplay().getRotation();
            requestBuilder.set(CaptureRequest.JPEG_ORIENTATION, ORIENTATIONS.get(rotation));

            cameraCaptureSession.capture(requestBuilder.build(), camera2Callback, null);

        } catch (CameraAccessException e) {
            e.printStackTrace();
        }
    }
</code></pre>
",2639515,,3192021,,2016-12-22 11:51:54,2018-03-20 16:37:04,Capture picture without preview using camera2 API,<android><camera>,3,4,18,,
Android,28116521,1,28158985,853,1/26/2015 21:21:54,3,,1/23/2015 18:37:26,,1,932,"<p><a href=""https://github.com/googlesamples/android-play-location/tree/master/Geofencing"" rel=""nofollow"">Creating and Monitoring Geofences example app</a> on github does not work as expected, Geofences in Google Play Services don't seem to work properly.</p>

<p>I have read elsewhere at Stack Overflow, that Reto Meier mentioned at Google IO that the GPS will turn on only if the phone approaches the geofence to conserve battery.
Seems that it does not turn on at all.</p>

<p>Here is the situation:</p>

<ul>
<li>I have an Emulator with Google APIs (same happens with real phone).</li>
<li>I have the above mentioned app out of the box installed and Geofence added.</li>
<li>I have a KML file that drives me in and out of the Geofence.</li>
</ul>

<p>Gofence ENTER is <strong>not</strong> triggered.</p>

<p>Now, just to be sure that KML actually works, I open Google maps. I play KML and I can see the blue ""You Are Here"" dot nicely moving in and out of Geofence, and the geofences <strong>do</strong> get triggered.</p>

<p>While Google Maps is up and running, I see GPS indicator in status bar.</p>

<p>So, it seems to me that Goefence only gets triggered if the GPS is explicitly on.</p>

<p>Can somebody explain this please? There is a lot of questions here on Stack Overflow that deal with the same problem.</p>

<p>Thanks.</p>

<p><strong>EDIT</strong>:
Did the field test with real phone. While <a href=""https://github.com/googlesamples/android-play-location/tree/master/LocationUpdates"" rel=""nofollow"">Location Updates</a> app was running and tracking me <a href=""https://github.com/googlesamples/android-play-location/tree/master/Geofencing"" rel=""nofollow"">Creating and Monitoring Geofences example app</a> was getting ENTER/EXIT events. As soon as I killed Location Updates app, the Geofences app stopped getting ENTER/EXIT events.</p>

<p>Seems to me like Google has optimized the power consumption for Geofences to the point of uselessness.</p>
",2407357,,2407357,,2015-01-23 22:34:46,2015-01-26 21:41:01,Geofences do not work as expected,<google-play-services><geofencing>,1,0,1,,
Android,28355353,1,28532785,854,2/16/2015 0:06:39,11,,2/5/2015 22:32:40,,4,2995,"<p>My main requirement would be to have a service having its own process and trigger its own geofencing event. I'd like the user to be notified from the notification center when he enters a geofence, even if the app is killed.</p>

<p>I read about services and this seems pretty clear to me, the Android documentation is dense so I managed to understand how to start a service with its own process, and also how it is able to communicate with the app using Messenger.</p>

<p>Then there is this code sample from Google showing how to use geofencing with google play services:
<a href=""https://github.com/googlesamples/android-Geofencing"" rel=""nofollow"">Google samples geofencing</a></p>

<p>What I found so far is that we have to use an IntentService to trigger geofencing events, and from the docs I've read it states that an IntentService terminates itself when its work is done. And I tested a bit also, it looks like the Intentservice gets killed when the app gets killed, which doesn't surprise me regarding the documentation.</p>

<p>So my question is, how could we perform a geofencing service having its own process? Is that possible to avoid using IntentService for this matter?</p>

<p><strong>EDIT:</strong></p>

<p>The reason I wanna do this, is that the user can set geofence ""reminders"", it is based on a daily usage. For instance imagine each day you arrive at your workplace, we should be able to fire an alarm (or a notification) when we enter this geofence regarding the app is running or not. We don't want the user to worry about having the app running in background.</p>
",1763767,,1763767,,2015-02-06 9:19:41,2015-04-17 14:37:35,Android geofencing when app is killed,<android><service><android-service><geofencing><android-geofence>,3,3,2,,
Android,27139281,1,28645831,855,2/21/2015 12:31:56,87,,11/26/2014 0:22:25,,7,3866,"<p>I am playing around with the <a href=""https://github.com/googlesamples/android-BasicManagedProfile"" rel=""noreferrer"">BasicManagedProfile</a> sample and want to install a custom app to only the managed profile.  I can easily go to the play store, download, and install an app and it will only appear in the apps of the work profile.</p>

<p>However, using the standard Intent way to install an apk from the device does not seem to work.</p>

<pre><code>    final Intent intent = new Intent(Intent.ACTION_INSTALL_PACKAGE);
    intent.setDataAndType(Uri.fromFile(new File(APK_LOC)), ""application/vnd.android.package-archive"");
    intent.putExtra(Intent.EXTRA_NOT_UNKNOWN_SOURCE, true);
    intent.putExtra(Intent.EXTRA_INSTALLER_PACKAGE_NAME, getPackageName());
    startActivityForResult(intent, REQUEST_INSTALL, null);
</code></pre>

<p>Like normal, if the ""Install from unknown sources"" security setting isn't enabled, a dialog will pop up that sends you to the Settings app to enable it.  However, in a managed profile app, this dialog <em>always pops up</em> regardless of whether or not that security setting is checked.  It seems the settings are not reflected in a managed profile (which makes sense because it's an entirely separate settings database).</p>

<p>I have tried opening the Settings app directly, but it's still the same.  It just goes to the standards Settings app and not a Managed Profile settings app.</p>

<p>Is there a way to change this security setting for a managed profile or install an app from the profile owner app? Since my app is the profile owner it seems this should be allowed.  It's easily possible for system applications, but third party apps will not work with the <code>DevicePolicyManager#enableSystemApp()</code> method.</p>

<p>EDIT:</p>

<p>I have also tried installing from a Manage Profile Gmail app.  Same thing.  It does not seem possible to install apps outside the Google Play store in a managed profile.</p>
",786718,,660921,,2015-01-07 13:17:33,2016-03-01 7:08:44,Installing app to managed profile,<android><android-5.0-lollipop><android-managed-profile>,1,0,5,,
Android,28685027,1,28789178,856,3/1/2015 1:46:05,6,,2/23/2015 22:45:34,,2,4714,"<p>Still not understanding if this is possible without root or not.I think that if it is possible to record the screen on video, this is also possible, have anyone done it yet?</p>

<p><a href=""https://github.com/googlesamples/android-ScreenCapture"" rel=""nofollow"">Been learning some code from this project, but still nothing</a></p>
",2129008,,,,,2015-03-01 1:46:05,Can Media Projection api take a screenshot from my home screen on lollipop?,<android><screenshot><android-5.0-lollipop>,1,0,1,,
Android,28966466,1,28989409,857,3/11/2015 14:33:10,1,,3/10/2015 14:33:32,,1,651,"<p>The code implemented in my application once worked, the data was inserted/displayed in Google Fit correctly, but now it doesn't work.</p>

<p>I have also tested the <code>BasicHistoryApi</code> but it doesn't work.(<a href=""https://github.com/googlesamples/android-fit"" rel=""nofollow noreferrer"">https://github.com/googlesamples/android-fit</a>)
Screenshot where this test app returns no error:
<img src=""https://i.stack.imgur.com/YS9D2.png"" alt=""enter image description here""></p>

<p>Please tell me if you use this method <code>Fitness.HistoryApi.insertData()</code> and it works correctly, because I can't find any solution to make it work.</p>

<p>This code snippet returns ""success"", but no changes in my Google Fit:</p>

<p><div class=""snippet"" data-lang=""js"" data-hide=""false"" data-console=""false"" data-babel=""false"">
<div class=""snippet-code"">
<pre class=""snippet-code-html lang-html prettyprint-override""><code>		DataSet runningDataSet = DataSet.create(runningDataSource);
		runningDataSet.add(runningDataSet.createDataPoint().setTimeInterval(
				startTime, endTime, TimeUnit.MILLISECONDS));

		Session session = new Session.Builder().setName(""TEST "" + startTime)
				.setDescription(""Test description"")
				.setIdentifier(""TEST "" + "" - "" + startTime)
				.setActivity(FitnessActivities.RUNNING_JOGGING)
				.setStartTime(startTime, TimeUnit.MILLISECONDS)
				.setEndTime(endTime, TimeUnit.MILLISECONDS).build();

		SessionInsertRequest insertRequest = new SessionInsertRequest.Builder()
				.setSession(session).addDataSet(runningDataSet).build();

		Log.i(TAG, ""Inserting the session in the History API"");
		com.google.android.gms.common.api.Status insertStatus = Fitness.SessionsApi
				.insertSession(MainActivity.getFitnessClient(), insertRequest)
				.await(1, TimeUnit.MINUTES);

		if (!insertStatus.isSuccess()) {
			Log.i(TAG, ""There was a problem inserting the session: ""
					+ insertStatus.getStatusMessage());</code></pre>
</div>
</div>
</p>
",4427983,,4427983,,2015-03-11 8:21:07,2015-03-11 14:33:10,"Google Fit stopped working, ""Fitness.HistoryApi.insertData"" returns success but doesn't shows up in Google Fit application",<android><google-fit>,2,1,,,
Android,28954421,1,29069944,858,3/16/2015 5:08:32,6,,3/10/2015 0:52:38,,15,32893,"<p>I'm attempting to follow the Android <a href=""https://developer.android.com/training/location/receive-location-updates.html"">Receiving Location Updates</a> tutorial. The example code is <a href=""https://github.com/googlesamples/android-play-location/blob/master/LocationUpdates/app/src/main/java/com/google/android/gms/location/sample/locationupdates/MainActivity.java"">here on Github</a>.</p>

<p>Everything is working except for this line:
        <code>LocationServices.FusedLocationApi.requestLocationUpdates(mGoogleApiClient, mLocationRequest, this);</code></p>

<p>It's throwing a <code>cannot resolve method requestLocationUpdates</code> error. I don't see anything in the <a href=""https://developer.android.com/reference/com/google/android/gms/location/FusedLocationProviderApi.html#requestLocationUpdates(com.google.android.gms.common.api.GoogleApiClient,%20com.google.android.gms.location.LocationRequest,%20com.google.android.gms.location.LocationListener)"">documentation</a>, but I'm pretty new to Android so might be missing something :).</p>

<p>Here's the full code. Any ideas where I'm going wrong? Thanks!</p>

<pre><code>package location.test.example.com;

import android.app.Fragment;
import android.content.Intent;
import android.location.Location;
import android.location.LocationListener;
import android.os.Bundle;
import android.support.v4.app.NavUtils;
import android.text.format.DateFormat;
import android.util.Log;
import android.view.ActionMode;
import android.view.LayoutInflater;
import android.view.Menu;
import android.view.MenuInflater;
import android.view.View;
import android.view.ViewGroup;
import android.widget.Button;
import android.widget.TextView;
import android.widget.Toast;

import com.google.android.gms.common.ConnectionResult;
import com.google.android.gms.common.api.GoogleApiClient;
import com.google.android.gms.location.LocationRequest;
import com.google.android.gms.location.LocationServices;

import java.util.ArrayList;
import java.util.Date;

public class LocationFragment extends Fragment implements
        GoogleApiClient.ConnectionCallbacks, GoogleApiClient.OnConnectionFailedListener, LocationListener {

    protected GoogleApiClient mGoogleApiClient;
    protected Location mCurrentLocation;
    protected LocationRequest mLocationRequest;
    protected String mLastUpdateTime;

    public static final long UPDATE_INTERVAL_IN_MILLISECONDS = 5000;

    public static final long FASTEST_UPDATE_INTERVAL_IN_MILLISECONDS = UPDATE_INTERVAL_IN_MILLISECONDS / 5;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        mLastUpdateTime = """";

        buildGoogleApiClient();

        if (NavUtils.getParentActivityName(getActivity()) != null) {
            getActivity().getActionBar().setDisplayHomeAsUpEnabled(true);
        }
        setHasOptionsMenu(true);

    }

    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {
        View v = inflater.inflate(R.layout.fragment_location, container, false);    

        return v;
    }

    protected synchronized void buildGoogleApiClient() {
        mGoogleApiClient = new GoogleApiClient.Builder(getActivity())
                .addConnectionCallbacks(this)
                .addOnConnectionFailedListener(this)
                .addApi(LocationServices.API)
                .build();
        createLocationRequest();
    }

    protected void createLocationRequest() {
        mLocationRequest = new LocationRequest();

        mLocationRequest.setInterval(UPDATE_INTERVAL_IN_MILLISECONDS);

        mLocationRequest.setFastestInterval(FASTEST_UPDATE_INTERVAL_IN_MILLISECONDS);

        mLocationRequest.setPriority(LocationRequest.PRIORITY_HIGH_ACCURACY);
        startLocationUpdates();
    }

    protected void startLocationUpdates() {
        LocationServices.FusedLocationApi.requestLocationUpdates(mGoogleApiClient, mLocationRequest, this);
    }

    @Override
    public void onStatusChanged(String provider, int status, Bundle extras) {

    }

    @Override
    public void onProviderEnabled(String provider) {

    }

    @Override
    public void onProviderDisabled(String provider) {

    }

    @Override
    public void onLocationChanged(Location location) {
        mCurrentLocation = location;
        mLastUpdateTime = DateFormat.getDateFormat(getActivity()).format(new Date());
        Toast.makeText(getActivity(), location.toString() + """", Toast.LENGTH_SHORT).show();
    }

    @Override
    public void onConnected(Bundle connectionHint) {

    }

    @Override
    public void onConnectionFailed(ConnectionResult result) {
        Log.i(""LocationFragment"", ""Connection failed: ConnectionResult.getErrorCode() "" + result.getErrorCode());
    }

    @Override
    public void onConnectionSuspended(int cause) {
        Log.i(""LocationFragment"", ""Connection suspended"");
        mGoogleApiClient.connect();
    }

}
</code></pre>
",2650407,,,,,2018-08-07 9:16:15,Android cannot resolve method requestLocationUpdates FusedLocationProviderAPI,<android><fusedlocationproviderapi>,6,0,3,,
Android,29190072,1,29196883,859,3/22/2015 16:29:22,0,,3/22/2015 1:47:11,,6,4110,"<p>I'm attempting to follow Google's <a href=""https://github.com/googlesamples/android-play-location/tree/master/ActivityRecognition/app/src/main/java/com/google/android/gms/location/sample/activityrecognition"" rel=""noreferrer"">Activity Recognition</a> example.</p>

<p>In the example they start the activity recognition when you click a button, however I'd like to just start it up when the app starts - so I tried putting it in the <code>onConnected</code> method. However, it ends up throwing a null pointer exception.</p>

<p>Here's how I'm calling it:</p>

<pre><code>@Override
public void onConnected(Bundle connectionHint) {
    Log.d(TAG, ""onConnected"");
    try {
        ActivityRecognition.ActivityRecognitionApi.requestActivityUpdates(
                mGoogleApiClient,
                UPDATE_INTERVAL_IN_MILLISECONDS,
                getActivityDetectionPendingIntent()
        ).setResultCallback(this);

    } catch (SecurityException securityException) {
        logSecurityException(securityException);
    }
}
</code></pre>

<p>And the error:</p>

<pre><code>03-21 20:28:57.939    2340-2340/getrewards.example.com.getrewards E/AndroidRuntimeï¹• FATAL EXCEPTION: main
    Process: getrewards.example.com.getrewards, PID: 2340
    java.lang.NullPointerException: Appropriate Api was not requested.
            at com.google.android.gms.internal.jx.b(Unknown Source)
            at com.google.android.gms.common.api.c.a(Unknown Source)
            at com.google.android.gms.common.api.c.a(Unknown Source)
            at com.google.android.gms.common.api.c.b(Unknown Source)
            at com.google.android.gms.internal.nb.requestActivityUpdates(Unknown Source)
            at getrewards.example.com.getrewards.RewardsFragment.onConnected(RewardsFragment.java:274)
            at com.google.android.gms.internal.jm.f(Unknown Source)
            at com.google.android.gms.common.api.c.gJ(Unknown Source)
            at com.google.android.gms.common.api.c.d(Unknown Source)
            at com.google.android.gms.common.api.c$2.onConnected(Unknown Source)
            at com.google.android.gms.internal.jm.f(Unknown Source)
            at com.google.android.gms.internal.jm.dU(Unknown Source)
            at com.google.android.gms.internal.jl$h.b(Unknown Source)
            at com.google.android.gms.internal.jl$h.g(Unknown Source)
            at com.google.android.gms.internal.jl$b.hy(Unknown Source)
            at com.google.android.gms.internal.jl$a.handleMessage(Unknown Source)
            at android.os.Handler.dispatchMessage(Handler.java:102)
            at android.os.Looper.loop(Looper.java:135)
            at android.app.ActivityThread.main(ActivityThread.java:5221)
            at java.lang.reflect.Method.invoke(Native Method)
            at java.lang.reflect.Method.invoke(Method.java:372)
            at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:899)
            at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:694)
03-21 20:28:58.343    1235-1594/system_process E/ActivityManagerï¹• Invalid thumbnail dimensions: 288x288
03-21 20:29:02.543    1235-1267/system_process E/InputDispatcherï¹• channel '39825fb6 getrewards.example.com.getrewards/getrewards.example.com.getrewards.RewardsActivity (server)' ~ Channel is unrecoverably broken and will be disposed!
03-21 20:33:31.053    2374-2374/? E/memtrackï¹• Couldn't load memtrack module (No such file or directory)
03-21 20:33:31.053    2374-2374/? E/android.os.Debugï¹• failed to load memtrack module: -2
03-21 20:33:44.213    2403-2403/? E/memtrackï¹• Couldn't load memtrack module (No such file or directory)
03-21 20:33:44.213    2403-2403/? E/android.os.Debugï¹• failed to load memtrack module: -2
03-21 20:34:56.658    2479-2479/? E/memtrackï¹• Couldn't load memtrack module (No such file or directory)
03-21 20:34:56.659    2479-2479/? E/android.os.Debugï¹• failed to load memtrack module: -2
03-21 20:35:09.756    2501-2501/? E/memtrackï¹• Couldn't load memtrack module (No such file or directory)
03-21 20:35:09.756    2501-2501/? E/android.os.Debugï¹• failed to load memtrack module: -2
03-21 20:35:52.821    2563-2563/? E/memtrackï¹• Couldn't load memtrack module (No such file or directory)
03-21 20:35:52.821    2563-2563/? E/android.os.Debugï¹• failed to load memtrack module: -2
03-21 20:35:53.299    1235-1267/system_process E/InputDispatcherï¹• channel '21589154 getrewards.example.com.getrewards/getrewards.example.com.getrewards.RewardsActivity (server)' ~ Channel is unrecoverably broken and will be disposed!
03-21 20:36:06.753    2586-2586/? E/memtrackï¹• Couldn't load memtrack module (No such file or directory)
03-21 20:36:06.753    2586-2586/? E/android.os.Debugï¹• failed to load memtrack module: -2
03-21 20:36:29.956    2634-2634/? E/memtrackï¹• Couldn't load memtrack module (No such file or directory)
03-21 20:36:29.956    2634-2634/? E/android.os.Debugï¹• failed to load memtrack module: -2
03-21 20:36:43.621    2657-2657/? E/memtrackï¹• Couldn't load memtrack module (No such file or directory)
03-21 20:36:43.621    2657-2657/? E/android.os.Debugï¹• failed to load memtrack module: -2
</code></pre>

<p>Any ideas what I need to do differently to avoid this error? Other location services work just fine - like geofencing or requesting activity updates.</p>
",2650407,,2650407,,2015-06-08 23:21:11,2015-06-08 23:21:11,Android ActivityRecognition java.lang.NullPointerException: Appropriate Api was not requested,<android><activity-recognition>,1,0,,,
Android,29724923,1,29724962,860,4/19/2015 1:58:59,0,,4/19/2015 1:52:06,,5,3486,"<p>I just tried <a href=""https://github.com/googlesamples/android-play-places/tree/master/PlaceComplete"" rel=""nofollow"">this demo</a>, but I can't find how to limit result in country.
I also checked getAutocompletePredictions in com.google.android.gms.location.places.GeoDataApi, but I can't found any document to implement limiting country.</p>

<p>I also searched some questions in SO; apparently it's JavaScript and needs to add some ""optional param"". So how to add optional param in this request?</p>
",3205503,,4099598,,2015-04-19 2:17:08,2015-07-09 8:54:41,Limiting result in country with Google Place autocomplete?,<android><google-places-api>,2,0,,,
Android,29744045,1,29750984,861,4/20/2015 14:40:56,0,,4/20/2015 9:30:40,,1,1712,"<p>I'm using the Google Places API for Android and I can't seem to get a <code>resultCallback</code> from a <code>PendingResult</code> to fire. Here's my code (essentially identical to the sample code to <a href=""https://github.com/googlesamples/android-play-places/tree/master/PlaceComplete"" rel=""nofollow"">https://github.com/googlesamples/android-play-places/tree/master/PlaceComplete</a> except in a Dialog)</p>

<pre><code>adapter = ((MainActivity) getActivity()).getAdapter();
googleApiClient = ((MainActivity) getActivity()).getGoogleApiClient();

final AutoCompleteTextView tvCity = new AutoCompleteTextView(getActivity());
tvCity.setAdapter(adapter);

tvCity.setOnItemClickListener(new AdapterView.OnItemClickListener() {
    @Override
    public void onItemClick(AdapterView&lt;?&gt; parent, View view, int position, long id) {
        final PlacesAutoCompleteAdapter.PlaceAutocomplete item = adapter.getItem(position);
        final String placeId = String.valueOf(item.placeId);

        PendingResult&lt;PlaceBuffer&gt; placeResult = Places.GeoDataApi
                .getPlaceById(googleApiClient, placeId);
        placeResult.setResultCallback(new ResultCallback&lt;PlaceBuffer&gt;() {
            @Override
            public void onResult(PlaceBuffer places) {

            if (places.getStatus().isSuccess()) {
                    final Place place = places.get(0);
                    cityCoordinates = place.getLatLng();

                } else {
                    dialog.dismiss();
                    Toast.makeText(getActivity(), ""There was an error, please try again"", Toast.LENGTH_SHORT).show();
                    return;

                }
                dialog.getButton(AlertDialog.BUTTON_POSITIVE).setEnabled(true);
                places.release();
            }
        });
    }
});
</code></pre>
",1596679,,,,,2015-04-22 20:42:42,Google Places API Android resultCallback not firing,<android><google-play-services><google-places-api>,2,2,,,
Android,29861580,1,29875013,862,4/26/2015 7:38:18,1,,4/25/2015 5:58:01,,12,4281,"<p>Updating to Google Play Services v7.0+, and based in <a href=""https://github.com/googlesamples/android-play-location/blob/master/LocationSettings/app/src/main/java/com/google/android/gms/location/sample/locationsettings/MainActivity.java"">this sample</a> for LocationUpdates in Android, I have the following code to connect to the <code>LocationServices.SettingsApi</code> and check if user has everything OK for the Application receive the location updates.</p>

<pre><code>    LocationSettingsRequest.Builder builder = new LocationSettingsRequest.Builder();
    builder.addLocationRequest(mLocationRequest);
    mLocationSettingsRequest = builder.build();

    PendingResult&lt;LocationSettingsResult&gt; result =
            LocationServices.SettingsApi.checkLocationSettings(
                    mLocationClient,
                    mLocationSettingsRequest
            );
    result.setResultCallback(this);
</code></pre>

<p>Where <code>this</code> is the following callback:</p>

<pre><code>    @Override
    public void onResult(LocationSettingsResult locationSettingsResult) {

        final Status status = locationSettingsResult.getStatus();
        Intent resolutionIntent;
        switch (status.getStatusCode()) {
            case LocationSettingsStatusCodes.SUCCESS:
                // Everything is OK, starting request location updates
                break;
            case LocationSettingsStatusCodes.RESOLUTION_REQUIRED:
                // Seems the user need to change setting to enable locations updates, call startResolutionForResult(Activity, REQUEST_CODE)
                break;
            case LocationSettingsStatusCodes.SETTINGS_CHANGE_UNAVAILABLE:
                // Error, cannot retrieve location updates.
                break;
        }
    }
</code></pre>

<p>The <code>SUCCESS</code> it OK to reproduce, just keep GPS enabled.</p>

<p>The <code>RESOLUTION_REQUIRED</code> is also OK to reproduce, only disable GPS.</p>

<p>The <code>SETTINGS_CHANGE_UNAVAILABLE</code> is the deal: If user select ""NEVER"" when the step <code>RESOLUTION_REQUIRED</code> is executed, the result will come with this status always.</p>

<p>Did the Google Play Services has a option to reset <strong>programmatically</strong> the flag when user select the ""NEVER"" option? </p>

<p>I know that ""NEVER"" seems to be ""<strong><em>Really, don't ask me again!!!</em></strong>"", but I thinking to create a option in case the user change his mind, of course, if this can be possible.</p>

<p>In this case I'll be able to receive the status <code>RESOLUTION_REQUIRED</code> again and ask to user to accept the LocationUpdates when the app is executed next time.</p>
",1481408,,,,,2016-03-23 11:52:13,LocationServices.SettingsApi Reset SETTINGS_CHANGE_UNAVAILABLE flag,<android><google-play-services>,1,0,5,,
Android,30047918,1,30105684,863,5/7/2015 15:35:44,2,,5/5/2015 8:33:50,,2,861,"<p>We have three BuildVariants: <code>release</code>, <code>debug</code> and <code>develop</code>. The first are the defaults from <code>AndroidStudio</code>. The last is for our internal testing. Here are the configs: (There is nothing different than <code>Signing Config</code>)
<img src=""https://i.stack.imgur.com/8Ow73.png"" alt=""enter image description here"">
<img src=""https://i.stack.imgur.com/NEir6.png"" alt=""enter image description here""></p>

<p>We have imports the following in our <code>build.gradle</code>:</p>

<pre><code>dependencies {
    // App dependencies
    compile 'com.android.support:support-annotations:22.0.0'
    compile 'com.google.guava:guava:18.0'
    // Testing-only dependencies
    androidTestCompile 'com.android.support.test:runner:0.2'
    androidTestCompile 'com.android.support.test:rules:0.2'
    androidTestCompile 'com.android.support.test.espresso:espresso-core:2.1'
}
</code></pre>

<p>Now we've created the <code>androidTest/</code> folder (where the Espresso-Tests are located). I've looked at the example from the <a href=""https://github.com/googlesamples/android-testing/tree/master/espresso/BasicSample"" rel=""nofollow noreferrer"">Android-Testing Samples in GitHub.</a> </p>

<p>But AndoridStudio says always ""Cannot find Symbole"" for AndroidJUnit4.class:
<img src=""https://i.stack.imgur.com/MuY8Y.png"" alt=""enter image description here""></p>

<p>(And now, after a lot of explanation - sorry for that :D)
I found the issue. Our Build Variants was set on <code>Android Instrumented Tests</code> (which is ok) but the App-Module was on the <code>develop</code> <code>BuildVariant</code>. When we have changed it to <code>debug</code> all was fine.</p>

<p>Now I'm not sure if this a bug or is this normal?! Because we have no different - instead of the Singing Config (but I've tested it, it isn't the problem) - on the BuildVariants. And when it's normal, why?!</p>

<p><strong>Edit:</strong></p>

<p>I've created a AOSP-Ticket too: <a href=""https://code.google.com/p/android/issues/detail?id=172029"" rel=""nofollow noreferrer"">https://code.google.com/p/android/issues/detail?id=172029</a></p>
",1231245,,1231245,,2015-05-05 11:22:27,2015-05-07 15:35:44,Android Testing Support Library not found with Espresso and different BuildVariants,<android><android-testing><android-espresso>,1,0,,,
Android,30106336,1,30107908,864,5/7/2015 17:25:46,0,,5/7/2015 16:06:20,,2,1236,"<p>The <a href=""http://developer.android.com/reference/android/media/projection/package-summary.html"" rel=""nofollow noreferrer"">Media Projection</a> package is new Lollipop, and allows an app to capture the device's screen in realtime for streaming to video. I was hoping this could also be used to capture a single still screenshot, but so far I have not been successful. Of course, the first frame of a captured video could work, but I'm aiming for a perfect, lossless screenshot matching the pixel resolution of the device. A still from a captured video cannot provide that.</p>

<p>I've tried a lot of things, but the closest I came to a solution was to first launch an <a href=""https://stackoverflow.com/questions/2176922/how-to-create-transparent-activity-in-android/2700683#2700683"">invisible activity</a>. This activity then follows the <a href=""https://github.com/googlesamples/android-ScreenCapture"" rel=""nofollow noreferrer"">API example</a> for starting screen capture, which can include asking the user's permission. Once screen capture is enabled, the screen image is live in a SurfaceView. However, I cannot find a way to capture a bitmap from the SurfaceView. There are lots of <a href=""https://stackoverflow.com/questions/12724237/taking-screen-shot-of-a-surfaceview-in-android"">questions</a> and <a href=""https://stackoverflow.com/questions/25091703/how-to-create-and-save-a-screenshot-from-a-surfaceview"">discussions</a> about this, but no solutions seem to work, and there is some evidence that it is <a href=""https://groups.google.com/d/msg/android-platform/xHIActZZ9PA/Ur4E0BuEKvEJ"" rel=""nofollow noreferrer"">impossible</a>.</p>

<p>Any ideas?</p>
",369833,,-1,,2017-05-23 12:02:11,2015-05-07 17:28:19,How to capture a screenshot programmatically with Lollipop,<android><android-mediaprojection>,1,6,3,,
Android,30195940,1,30197939,865,5/12/2015 17:42:00,0,,5/12/2015 15:57:08,,13,9302,"<p>I am trying to get the camera frame in preview mode. I am running the sample project from github <a href=""https://github.com/googlesamples/android-Camera2Basic"">https://github.com/googlesamples/android-Camera2Basic</a></p>

<p>The issue I am having is getting the frame in preview mode.</p>

<p>Here is the code:</p>

<pre><code>private CameraCaptureSession.CaptureCallback mCaptureCallback = new CameraCaptureSession.CaptureCallback() {

    private void process(CaptureResult result) {
        switch (mState) {
            case STATE_PREVIEW: {

                //HERE, HOW CAN I RETRIEVE THE CURRENT FRAME?

                break;
            }
            case STATE_WAITING_LOCK: {
               ...
                break;
            }
            case STATE_WAITING_PRECAPTURE: {
             ...
                break;
            }
            case STATE_WAITING_NON_PRECAPTURE: {
             ...
                break;
            }
        }
    }
</code></pre>

<p>Another thing I tried to get the frame is setting the  mImageReader.setOnImageAvailableListener.
I was expecting to be able to get the frame onImageAvailable callback, but onImageAvailable is never called. onPreviewFrame is my own method, I need to pass it the current frame.</p>

<pre><code>  mImageReader = ImageReader.newInstance(largest.getWidth(), largest.getHeight(), ImageFormat.JPEG, /*maxImages*/2);
  mImageReader.setOnImageAvailableListener(mOnImageAvailableListener, mBackgroundHandler);

  private final ImageReader.OnImageAvailableListener mOnImageAvailableListener  = new ImageReader.OnImageAvailableListener() {

    @Override
    public void onImageAvailable(ImageReader reader) {
        mTextureView.onPreviewFrame(reader.acquireNextImage().getPlanes([0].getBuffer().array());
    }

};
</code></pre>

<p>What I am doing wrong?
Thanks.</p>
",1520263,,,,,2016-03-13 18:20:45,Android Camera2 getPreviewFrame,<android><android-camera><android-5.0-lollipop>,1,0,8,,
Android,30582324,1,30582361,866,6/1/2015 20:10:21,0,,6/1/2015 20:08:05,,1,665,"<p>I got build error like this after i download and imported the example
<a href=""https://github.com/googlesamples/android-UniversalMusicPlayer"" rel=""nofollow"">https://github.com/googlesamples/android-UniversalMusicPlayer</a></p>

<pre><code>Error:A problem occurred configuring project ':mobile'.
Could not resolve all dependencies for configuration ':mobile:_debugCompile'.
Could not find com.google.android.support:wearable:1.2.0.
     Searched in the following locations:

https ://jcenter.bintray.com/com/google/android/support/wearable/1.2.0/wearable-1.2.0.pom  
https ://jcenter.bintray.com/com/google/android/support/wearable/1.2.0/wearable-1.2.0.jar
         file:/Users/Jieyi/Downloads/android-UniversalMusicPlayer-master/mobile/libs/wearable-1.2.0.jar
         file:/Users/Jieyi/Downloads/android-UniversalMusicPlayer-master/mobile/libs/wearable.jar
         file:/Users/Jieyi/Library/Android/sdk/extras/android/m2repository/com/google/android/support/wearable/1.2.0/wearable-1.2.0.pom
         file:/Users/Jieyi/Library/Android/sdk/extras/android/m2repository/com/google/android/support/wearable/1.2.0/wearable-1.2.0.jar
         file:/Users/Jieyi/Library/Android/sdk/extras/google/m2repository/com/google/android/support/wearable/1.2.0/wearable-1.2.0.pom
         file:/Users/Jieyi/Library/Android/sdk/extras/google/m2repository/com/google/android/support/wearable/1.2.0/wearable-1.2.0.jar
     Required by:
         android-UniversalMusicPlayer-master:mobile:unspecified
</code></pre>
",3512832,,1064310,,2015-06-01 20:54:26,2015-06-01 20:54:26,Google example universal music player build error,<java><android><android-studio><wear-os>,1,0,,,
Android,30838231,1,30838770,867,6/15/2015 6:41:30,0,,6/15/2015 5:55:33,,1,565,"<p>I am using Google Fit APIs for the first time. I have modified the <a href=""https://github.com/googlesamples/android-fit/tree/master/BasicSensorsApi"" rel=""nofollow"">BasicSensorsApi sample</a> code to calculate steps count. It is working fine, but the problem is when I call <code>GoogleApiClient.disconnect()</code> in <code>onStop()</code> function and then again call <code>GoogleApiClient.connect()</code> in <code>onStart()</code> function, <code>OnDataPointListener</code> stops getting callbacks. I am not unregistering this  listener any where.</p>

<p>When I don't call <code>GoogleApiClient.disconnect()</code> it is working fine and I get callbacks event after activity's <code>onStop()</code> function is called.</p>

<p>I am not sure whether I should disconnect <code>GoogleApiClient</code> in <code>onStop()</code> function or not. If yes then how can I solve above problem?</p>

<p>Here is the relavent code:</p>

<pre><code>private void buildFitnessClient() {
    // Create the Google API Client
    mClient = new GoogleApiClient.Builder(this)
            .addApi(Fitness.SENSORS_API)
            .addScope(new Scope(Scopes.FITNESS_LOCATION_READ))
            .addScope(new Scope((Scopes.FITNESS_ACTIVITY_READ)))
            .addScope(new Scope((Scopes.FITNESS_BODY_READ)))
            .addConnectionCallbacks(
                    new GoogleApiClient.ConnectionCallbacks() {

                        @Override
                        public void onConnected(Bundle bundle) {
                            Log.i(TAG, ""Connected!!!"");
                            // Now you can make calls to the Fitness APIs.
                            // Put application specific code here.
                            findFitnessDataSources();
                        }

                        @Override
                        public void onConnectionSuspended(int i) {
                            // If your connection to the sensor gets lost at some point,
                            // you'll be able to determine the reason and react to it here.
                            if (i == GoogleApiClient.ConnectionCallbacks.CAUSE_NETWORK_LOST) {
                                Log.i(TAG, ""Connection lost.  Cause: Network Lost."");
                            } else if (i == GoogleApiClient.ConnectionCallbacks.CAUSE_SERVICE_DISCONNECTED) {
                                Log.i(TAG, ""Connection lost.  Reason: Service Disconnected"");
                            }
                        }
                    }
            )
            .addOnConnectionFailedListener(
                    new GoogleApiClient.OnConnectionFailedListener() {
                        // Called whenever the API client fails to connect.
                        @Override
                        public void onConnectionFailed(ConnectionResult result) {
                            Log.i(TAG, ""Connection failed. Cause: "" + result.toString());
                            if (!result.hasResolution()) {
                                // Show the localized error dialog
                                GooglePlayServicesUtil.getErrorDialog(result.getErrorCode(), MainActivity.this, 0).show();
                                return;
                            }
                            // The failure has a resolution. Resolve it.
                            // Called typically when the app is not yet authorized, and an
                            // authorization dialog is displayed to the user.
                            if (!authInProgress) {
                                try {
                                    Log.i(TAG, ""Attempting to resolve failed connection"");
                                    authInProgress = true;
                                    result.startResolutionForResult(MainActivity.this, REQUEST_OAUTH);
                                } catch (IntentSender.SendIntentException e) {
                                    Log.e(TAG, ""Exception while starting resolution activity"", e);
                                }
                            }
                        }
                    }
            )
            .build();
}

@Override
protected void onStart() {
    super.onStart();
    // Connect to the Fitness API
    Log.i(TAG, ""Connecting..."");
    mClient.connect();
}

@Override
protected void onStop() {
    super.onStop();
    if (mClient.isConnected()) {
        //mClient.disconnect();
    }
}

@Override
protected void onActivityResult(int requestCode, int resultCode, Intent data) {
    if (requestCode == REQUEST_OAUTH) {
        authInProgress = false;
        if (resultCode == RESULT_OK) {
            // Make sure the app is not already connected or attempting to connect
            if (!mClient.isConnecting() &amp;&amp; !mClient.isConnected()) {
                mClient.connect();
            }
        }
    }
}

@Override
protected void onSaveInstanceState(Bundle outState) {
    super.onSaveInstanceState(outState);
    outState.putBoolean(AUTH_PENDING, authInProgress);
}

// [END auth_connection_flow_in_activity_lifecycle_methods]

/**
 * Find available data sources and attempt to register on a specific {@link DataType}.
 * If the application cares about a data type but doesn't care about the source of the data,
 * this can be skipped entirely, instead calling
 * {@link com.google.android.gms.fitness.SensorsApi
 * #register(GoogleApiClient, SensorRequest, DataSourceListener)},
 * where the {@link SensorRequest} contains the desired data type.
 */
private void findFitnessDataSources() {
    // [START find_data_sources]
    Fitness.SensorsApi.findDataSources(mClient, new DataSourcesRequest.Builder()
            // At least one datatype must be specified.
            .setDataTypes(DataType.TYPE_STEP_COUNT_CADENCE)
            .setDataTypes(DataType.TYPE_STEP_COUNT_CUMULATIVE)
            .setDataTypes(DataType.TYPE_STEP_COUNT_DELTA)
                    // Can specify whether data type is raw or derived.
            .setDataSourceTypes(DataSource.TYPE_DERIVED)
            .build())
            .setResultCallback(new ResultCallback&lt;DataSourcesResult&gt;() {
                @Override
                public void onResult(DataSourcesResult dataSourcesResult) {
                    Log.i(TAG, ""Result: "" + dataSourcesResult.getStatus().toString());
                    for (DataSource dataSource : dataSourcesResult.getDataSources()) {
                        Log.i(TAG, ""Data source found: "" + dataSource.toString());
                        Log.i(TAG, ""Data Source type: "" + dataSource.getDataType().getName());

                        //Let's register a listener to receive Activity data!
                        if (dataSource.getDataType().equals(DataType.TYPE_STEP_COUNT_CADENCE) &amp;&amp; mListener == null) {
                            Log.i(TAG, ""Data source for TYPE_STEP_COUNT_CADENCE found!  Registering."");
                            registerFitnessDataListener(dataSource, DataType.TYPE_STEP_COUNT_CADENCE);
                        } else if (dataSource.getDataType().equals(DataType.TYPE_STEP_COUNT_CUMULATIVE) &amp;&amp; mListener == null) {
                            Log.i(TAG, ""Data source for TYPE_STEP_COUNT_CUMULATIVE found!  Registering."");
                            registerFitnessDataListener(dataSource, DataType.TYPE_STEP_COUNT_CUMULATIVE);
                        } else if (dataSource.getDataType().equals(DataType.TYPE_STEP_COUNT_DELTA) &amp;&amp; mListener == null) {
                            Log.i(TAG, ""Data source for TYPE_STEP_COUNT_DELTA found!  Registering."");
                            registerFitnessDataListener(dataSource, DataType.TYPE_STEP_COUNT_DELTA);
                        }
                    }
                }
            });
    // [END find_data_sources]
}

/**
 * Register a listener with the Sensors API for the provided {@link DataSource} and
 * {@link DataType} combo.
 */
private void registerFitnessDataListener(DataSource dataSource, DataType dataType) {
    // [START register_data_listener]
    mListener = new OnDataPointListener() {
        @Override
        public void onDataPoint(DataPoint dataPoint) {
            for (Field field : dataPoint.getDataType().getFields()) {
                Value val = dataPoint.getValue(field);
                Log.i(TAG, ""Detected DataPoint field: "" + field.getName());
                Log.i(TAG, ""Detected DataPoint value: "" + val);
            }
        }
    };

    Fitness.SensorsApi.add(
            mClient,
            new SensorRequest.Builder()
                    .setDataSource(dataSource) // Optional but recommended for custom data sets.
                    .setDataType(dataType) // Can't be omitted.
                    .setSamplingRate(10, TimeUnit.SECONDS)
                    .build(),
            mListener)
            .setResultCallback(new ResultCallback&lt;Status&gt;() {
                @Override
                public void onResult(Status status) {
                    if (status.isSuccess()) {
                        Log.i(TAG, ""Listener registered!"");
                    } else {
                        Log.i(TAG, ""Listener not registered."");
                    }
                }
            });
    // [END register_data_listener]
}
</code></pre>
",4575744,,3024519,,2015-06-15 6:08:55,2015-11-22 19:08:45,OnDataPointListener does not get callback if GoogleApiClient is disconnected,<android><google-fit>,2,0,,,
Android,30163964,1,30875643,868,6/16/2015 18:41:09,36,,5/11/2015 9:26:46,,3,1164,"<p>I have been trying to get device owner, inspired by <a href=""https://github.com/googlesamples/android-DeviceOwner"" rel=""nofollow noreferrer"">google sample code</a></p>

<p>Using adb, I am able to get device owner on nexus 4,5,7,9 and micromax. However in LG G Pad (LG-V400) and LG G3 (LG G3 855) I get an error.</p>

<pre><code>java.lang.SecurityException: Neither user 2000 nor current process has android.permission.BIND_DEVICE_ADMIN.
</code></pre>

<p>I noticed that the device admin is enabled on these devices, but not the device owner. I was able to capture the bug report from the device found <a href=""https://drive.google.com/file/d/0B6pcRab4JKQJZ3pNc29vTjN1cFk/view?usp=sharing"" rel=""nofollow noreferrer"">here</a>.<img src=""https://i.stack.imgur.com/mRyFH.png"" alt=""enter image description here""></p>

<p>I have tried contacting LG but havent heard back anything.</p>

<p>Any help is greatly appreciated.</p>
",3916830,,,,,2015-07-13 14:47:22,Device owner issue using adb method with LG devices only,<android><adb><android-5.0-lollipop><device-owner>,1,0,1,,
Android,30952459,1,30956693,869,6/20/2015 17:02:55,0,,6/20/2015 9:34:59,,2,3526,"<p>I try reuse <a href=""https://github.com/googlesamples/android-MediaEffects/"" rel=""nofollow noreferrer"">Android Media Effects samples</a> and want to be able to change texture data with new bitmap from camera or gallery pick. No solution so far </p>

<p>This is the initial load texture from the sample : <a href=""https://github.com/googlesamples/android-MediaEffects/blob/master/Application/src/main/java/com/example/android/mediaeffects/MediaEffectsFragment.java"" rel=""nofollow noreferrer"">https://github.com/googlesamples/android-MediaEffects/blob/master/Application/src/main/java/com/example/android/mediaeffects/MediaEffectsFragment.java</a></p>

<pre><code>    private void loadTextures() {
        // Generate textures
        GLES20.glGenTextures(2, mTextures, 0);

        // Load input bitmap
        Bitmap bitmap = BitmapFactory.decodeResource(getResources(), R.drawable.puppy);
        mImageWidth = bitmap.getWidth();
        mImageHeight = bitmap.getHeight();
        mTexRenderer.updateTextureSize(mImageWidth, mImageHeight);

        // Upload to texture
        GLES20.glBindTexture(GLES20.GL_TEXTURE_2D, mTextures[0]);
        GLUtils.texImage2D(GLES20.GL_TEXTURE_2D, 0, bitmap, 0);

        // Set texture parameters
        GLToolbox.initTexParams();
    }
</code></pre>

<p>and this is my trouble function :</p>

<pre><code>public void changeBackground(Uri bitmapUri) {

  Log.d(TAG, ""changeBackground : "" + bitmapUri.getPath());

  Bitmap bitmap = BitmapFactory.decodeFile(bitmapUri.getPath());
  mImageWidth = bitmap.getWidth();
  mImageHeight = bitmap.getHeight();
  mTexRenderer.updateTextureSize(mImageWidth, mImageHeight);

  GLUtils.texSubImage2D(GLES20.GL_TEXTURE_2D, 0, 0, 0, bitmap);

  theBackground.requestRender(); //my GLSurfaceView
  bitmap.recycle();
}
</code></pre>

<p>I tried several ways :</p>

<ul>
<li><p>using texSubImage2D only -> texture not updated</p></li>
<li><p>delete and recreate textures with new bitmap -> black texture</p></li>
</ul>

<p>note: the bitmap dimension is fixed, at 1080 x 1080</p>

<p>How to change/modify/replace texture data with new bitmap ?</p>

<p><strong>UPDATE:</strong></p>

<p>I think the problem more relate to this question : <a href=""https://stackoverflow.com/questions/18584232/setting-texture-on-3d-object-using-image-from-photo-gallery-opengl-es-2-0"">Setting texture on 3D object using image from photo gallery</a>. i call changeBackground() after grabbing the image from gallery intent and then crop it (another intent). </p>

<p>Now, how to effectively change texture data with bitmap from gallery intent? anyone have a clue?</p>

<p><strong>SOLVED</strong></p>

<p>I solved the problem by defering texture load process to onSurfaceChange() function. Simply use a flag to indicate the file to load and onSurfaceChange check the flag again.</p>

<p><div class=""snippet"" data-lang=""js"" data-hide=""false"" data-console=""false"" data-babel=""false"">
<div class=""snippet-code"">
<pre class=""snippet-code-html lang-html prettyprint-override""><code>private Uri mFileToLoad = null;

public void changeBackground(Uri bitmapUri) {
   Log.d(TAG, ""changeBackground : "" + bitmapUri.getPath());
   mFileToLoad = bitmapUri;
   theBackground.requestRender();
}</code></pre>
</div>
</div>
</p>

<p>and my onSurfaceChange()</p>

<p><div class=""snippet"" data-lang=""js"" data-hide=""false"" data-console=""false"" data-babel=""false"">
<div class=""snippet-code"">
<pre class=""snippet-code-html lang-html prettyprint-override""><code>    public void onSurfaceChanged(GL10 gl, int width, int height) {
        Log.d(TAG, ""onSurfaceChanged w:"" + width + "" h:"" + height);
        if (mFileToLoad!=null) {
            GLES20.glDeleteTextures(mTextures.length, mTextures, 0);
            GLES20.glGenTextures(mTextures.length, mTextures, 0);

            Bitmap bitmap = BitmapFactory.decodeFile(mFileToLoad.getPath());
            mImageWidth = bitmap.getWidth();
            mImageHeight = bitmap.getHeight();
            mTexRenderer.updateTextureSize(mImageWidth, mImageHeight);

            // Upload to texture
            GLES20.glBindTexture(GLES20.GL_TEXTURE_2D, mTextures[0]);
            GLUtils.texImage2D(GLES20.GL_TEXTURE_2D, 0, bitmap, 0);

            // Set texture parameters
            GLToolbox.initTexParams();

            mFileToLoad = null;
            bitmap.recycle();
        }

        if (mTexRenderer != null) {
            mTexRenderer.updateViewSize(width, height);
        }
    }</code></pre>
</div>
</div>
</p>

<p>So far it works. </p>
",4772917,,-1,,2017-05-23 12:22:56,2016-03-17 9:53:03,Android: How to change OpenGLES texture data / bitmap from gallery / camera,<java><android><opengl-es><effects>,1,2,,,
Android,31064433,1,31064496,870,6/26/2015 3:39:38,0,,6/26/2015 3:32:27,,1,535,"<p>I've forked a version of this</p>

<p><a href=""https://github.com/googlesamples/android-topeka"" rel=""nofollow"">https://github.com/googlesamples/android-topeka</a></p>

<p>a few days ago. </p>

<p>I'm making changes to it in Android Studio. Now changes have been committed to the original project at</p>

<p><a href=""https://github.com/googlesamples/android-topeka"" rel=""nofollow"">https://github.com/googlesamples/android-topeka</a></p>

<p>I want to merge my changes I've been making locally with that version. But at the same time I want to keep my version private? </p>

<p>How can I COMPARE  my changes locally with the master? </p>
",1334828,,1334828,,2015-06-26 3:37:22,2015-06-26 3:39:38,How to keep forked version of github sycned,<github><android-studio><version-control><fork>,1,2,,,
Android,31120662,1,31120777,871,6/29/2015 16:23:35,0,,6/29/2015 16:17:53,,1,4428,"<p>Is it possible to run <a href=""https://github.com/googlesamples/android-RuntimePermissionsBasic"" rel=""nofollow"">Google Sample - RuntimePermissionsBasic</a> </p>

<p>On devices with OS less than MNC (Android M)?</p>

<p>This project comes with:</p>

<pre><code>compileSdkVersion ""android-MNC""
targetSdkVersion ""MNC""
</code></pre>

<p>So far so good, running it on less than M OS will get:</p>

<p><code>INSTALL_FAILED_OLDER_SDK</code></p>

<p>But when I changed it to:</p>

<pre><code>compileSdkVersion 22
targetSdkVersion ""MNC""
</code></pre>

<p>The Android Studio isn't recognizing the <code>checkSelfPermission (...)</code> method </p>
",1038702,,,,,2015-10-23 11:06:26,Android Studio isn't recognizing the checkSelfPermission,<android><permissions><android-6.0-marshmallow>,2,0,1,,
Android,31323889,1,31327836,872,7/9/2015 20:43:28,0,,7/9/2015 17:00:28,,1,107,"<p>I'm using this project <a href=""https://github.com/googlesamples/android-RecyclerView"" rel=""nofollow noreferrer"">https://github.com/googlesamples/android-RecyclerView</a> as a starting point to learn about RecyclerView, and implementing the answer by MLProgrammer-Cim <a href=""https://stackoverflow.com/questions/24885223/why-doesnt-recyclerview-have-onitemclicklistener-and-how-recyclerview-is-dif"">here</a></p>

<p>I'm trying to set the value of 2 strings when a button is pressed. 
I'm also trying to change the value of the strings depending on the position of the button clicked.</p>

<p>On first click the position is read, but the strings values are not set. On second click, the position is read and strings values are set, according to the position of the button clicked as intended.</p>

<p>What am I doing wrong which is not allowing the values of the string to be set on the first click? Thanks</p>

<pre><code>public class CustomAdapter extends     RecyclerView.Adapter&lt;CustomAdapter.ViewHolder&gt; {
private static final String TAG = ""CustomAdapter"";
...
// String textBoton1;
// String textBoton2;



public static class ViewHolder extends RecyclerView.ViewHolder implements View.OnClickListener {
    private final TextView textView;
    private final TextView textView1;
    private final ImageView imageOne;
    private final Button imageIcon;
    public MyViewHolderClicks mListener;
    private Context context;
    String textBoton1;
    String textBoton2;

    public ViewHolder(View myv, MyViewHolderClicks listener) {
        super(myv);
        mListener = listener;
        textView = (TextView) myv.findViewById(R.id.textView);
        textView1 = (TextView) myv.findViewById(R.id.textView1);
        imageOne = (ImageView) myv.findViewById(R.id.image1);
        imageIcon = (Button) myv.findViewById(R.id.button_for_cardview);
        imageIcon.setOnClickListener(this);
        myv.setOnClickListener(this);


    }
    @Override
    public void onClick(View v) {
       int position = getLayoutPosition();
        if (v instanceof Button){
            mListener.onTomato((Button) v, getLayoutPosition());
            Log.d(TAG, ""Tomato Button onClick position Clicked"" + getLayoutPosition()+ ""  ""+ textBoton1+ textBoton2);
            switch (v.getId()) {

               case R.id.button_for_cardview:
                    if (position == 0) {

                        GlobalVariables.getInstance().setRightAnswer1(""this is right "");///outanother global in here
                        textBoton1 = ""String text boton one position "" + getLayoutPosition();
                        textBoton2 = "" String text boton two position "" + getLayoutPosition();

                    }if (position == 1) {

                        GlobalVariables.getInstance().setRightAnswer2(""this is wrong "");
                        textBoton1 = ""String text boton one position ""+ getLayoutPosition();
                        textBoton2 = ""String text boton two position ""+ getLayoutPosition();

               }


           }


        } else {
            mListener.onPotato(v, getLayoutPosition());
            Log.d(TAG, ""Potato View onClick position Clicked"" + getLayoutPosition() + ""  "" + positionClicked + textBoton1 + textBoton2);
        }
    }

    public interface MyViewHolderClicks {
        public void onPotato(View v, int position);

        public void onTomato(Button v, int position);

        public void onTomato(Button v);


    }


    public TextView getTextView() {
        return textView;
    }
    public TextView getTextView1() {
        return textView1;
    }
    public ImageView getImageView() {
        return imageOne;
    }

    public Button getImageView1() {
        return imageIcon;
    }
}

List&lt;Question&gt; questions;
CustomAdapter(List&lt;Question&gt; questions) {
    this.questions = questions;

}


public CustomAdapter(String[] dataSet) {
    mDataSet = dataSet;

}


@Override
public void onBindViewHolder(ViewHolder viewHolder, final int position) {
    Log.d(TAG, ""Element "" + position + "" set."");


    viewHolder.getTextView().setText(questions.get(position).english);
    viewHolder.getTextView1().setText(questions.get(position).spanish);
    viewHolder.getImageView().setImageResource(questions.get(position).drawableId);
    viewHolder.getImageView1().setBackgroundResource(questions.get(position).iconId);




}

@Override
public int getItemCount() {

    return GlobalVariables.getInstance().getPreguntasCorrectas();

}
@Override
public CustomAdapter.ViewHolder onCreateViewHolder(ViewGroup viewGroup, int viewType) {
    //int positionClicked =0;//set this to something like position = getLayoutPosition();

    View v = LayoutInflater.from(viewGroup.getContext())
            .inflate(R.layout.text_row_item, viewGroup, false);
    CustomAdapter.ViewHolder vh = new ViewHolder(v, new CustomAdapter.ViewHolder.MyViewHolderClicks(){
        String textBoton1;
        String textBoton2;
        public void onPotato(View myv, int position) {
            Log.d(TAG,""Potato View""+ "" position"" + position + textBoton1 +textBoton2); 
           // switch (position) {

              //  case 0:
                    if (position == 0) {

                        GlobalVariables.getInstance().setRightAnswer1(""this is right ONCREATE VIEWHOLDER"");///outanother global in here
                        textBoton1 = ""String text boton one from OnCreateViewHolder position ""+ position;
                        textBoton2 = ""String text boton two from OnCreateViewHolder position ""+ position;

                    }
              //  case 1:

                    if (position == 1) {
                        GlobalVariables.getInstance().setRightAnswer2(""this is wrong ONCREATE VIEWHOLDER"");
                        textBoton1 = ""String text boton one from OnCreateViewHolder position ""+ position;
                        textBoton2 = ""String text boton two from OnCreateViewHolder position ""+ position;

                    }

            }

      //  }


         public void onTomato(Button imageIcon,int position) {
             Log.d(TAG, ""Tomato Button OnCreateViewHolder"" + "" position "" + position + textBoton1 + textBoton2);
             switch (imageIcon.getId()) {

                 case R.id.button_for_cardview:

                     if (position == 0) {

                         GlobalVariables.getInstance().setRightAnswer1(""this is right"");                             textBoton1 = ""String text boton one from OnCreateViewHolder position "" + position;
                         textBoton2 = ""String text boton one from OnCreateViewHolder position "" + position;

                     }

                     if (position == 1) {
                         GlobalVariables.getInstance().setRightAnswer2(""this is wrong"");
                         textBoton1 = ""String text boton two from OnCreateViewHolder position "" + position;
                         textBoton2 = ""String text boton two from OnCreateViewHolder position "" + position;

                     }

             }
         }

        @Override
        public void onTomato(Button v) {

        }
    });

    return vh;
}

}
</code></pre>

<p>text_row_item.xml</p>

<pre><code>&lt;?xml version=""1.0"" encoding=""utf-8""?&gt;
&lt;FrameLayout xmlns:android=""http://schemas.android.com/apk/res/android""
android:layout_width=""match_parent""
android:layout_height=""wrap_content""
android:layout_marginLeft=""@dimen/margin_medium""
android:layout_marginRight=""@dimen/margin_medium""
android:gravity=""center_vertical""

&gt;
&lt;!--android:clickable=""true""--&gt;
&lt;!--android:focusable=""true""--&gt;
&lt;!--android:focusableInTouchMode=""true""--&gt;
&lt;android.support.v7.widget.CardView
    xmlns:card_view=""http://schemas.android.com/apk/res-auto""
    android:layout_width=""match_parent""
    android:layout_height=""wrap_content""
    android:id=""@+id/cv""
    card_view:cardCornerRadius=""8dp""
    card_view:cardElevation=""3dp""&gt;
    &lt;!--android:focusableInTouchMode=""false""--&gt;
    &lt;!--android:focusable=""false""--&gt;
    &lt;RelativeLayout
        android:layout_width=""wrap_content""
        android:layout_height=""match_parent""
        android:padding=""16dp""
        android:focusable=""false""
    android:focusableInTouchMode=""false"" &gt;

            &lt;ImageView
                android:layout_width=""wrap_content""
                android:layout_height=""wrap_content""
                android:id=""@+id/image1""
                android:layout_alignParentTop=""true""
                android:background=""@drawable/as18_boy_point_that_chair""
                /&gt;

            &lt;TextView
                android:layout_width=""wrap_content""
                android:layout_height=""wrap_content""
                android:id=""@+id/textView""
                android:text=""Sample text for align""
                android:layout_toRightOf=""@+id/image1""
                android:textSize=""30sp""
                /&gt;

            &lt;TextView
                android:layout_width=""wrap_content""
                android:layout_height=""wrap_content""
                android:id=""@+id/textView1""
                android:text=""Sample text for align""
                android:layout_below=""@+id/textView""
                /&gt;

            &lt;com.MyApp.app.ButtonPlus
            android:id=""@+id/button_for_cardview""
            style=""@style/fafont""
            android:layout_width=""60dp""
            android:layout_height=""60dp""
            android:textColor=""#ffffff""
            android:text=""@string/icon_mic""
            android:textSize=""25dp""
            android:layout_toRightOf=""@+id/textView""
            android:background=""@drawable/speaker_circle""
            android:visibility=""visible""
            /&gt;

        &lt;/RelativeLayout&gt;
        &lt;!--android:onClick=""speechClicked""--&gt;
&lt;/android.support.v7.widget.CardView&gt;
&lt;ListView
    android:id=""@+id/lvVoiceReturn""
    android:layout_width=""wrap_content""
    android:layout_height=""50dp""
    android:layout_marginLeft=""80dp""
    android:textColor=""#ff33b5e5""
    android:layout_marginTop=""20dp""
    android:visibility=""invisible""
    android:ems=""10"" &gt;
&lt;/ListView&gt;
</code></pre>

<p></p>

<p>logcat output 1st click</p>

<pre><code>07-10 00:26:06.803  29652-29652/? D/CustomAdapterï¹• Tomato Button OnCreateViewHolder position 0nullnull
07-10 00:26:06.803  29652-29652/? D/CustomAdapterï¹• Tomato Button onClick position Clicked0  nullnull
</code></pre>

<p>logcat output 2nd click</p>

<pre><code>07-10 00:26:24.353  29652-29652/? D/CustomAdapterï¹• Tomato Button OnCreateViewHolder position 0String text boton one from OnCreateViewHolder position 0String text boton one from OnCreateViewHolder position 0
07-10 00:26:24.353  29652-29652/? D/CustomAdapterï¹• Tomato Button onClick position Clicked0  String text boton one position 0 String text boton two position 0
</code></pre>
",3246849,,-1,,2017-05-23 12:21:46,2015-07-09 20:43:28,Android RecyclerView requires 2 clicks to set strings,<android><android-recyclerview><recycler-adapter>,1,1,,,
Android,31371440,1,31385161,873,7/13/2015 13:47:47,1,,7/12/2015 19:00:05,,5,2657,"<p>I build sample project MoreTeapots from <a href=""https://github.com/googlesamples/android-ndk"" rel=""nofollow"">https://github.com/googlesamples/android-ndk</a> and get errors </p>

<blockquote>
  <p>Information:Gradle tasks [:app:assembleAllDebug]
  :app:copyArm64-v8aDebugAllMoreTeapotsNativeActivitySharedLibraryGdbServer
  :app:createArm64-v8aDebugAllMoreTeapotsNativeActivitySharedLibraryGdbsetup
  :app:compileArm64-v8aDebugAllMoreTeapotsNativeActivitySharedLibraryMoreTeapotsNativeActivityMainC
  :app:compileArm64-v8aDebugAllMoreTeapotsNativeActivitySharedLibraryMoreTeapotsNativeActivityMainCpp
  :app:linkArm64-v8aDebugAllMoreTeapotsNativeActivitySharedLibrary
  :app:stripSymbolsArm64-v8aDebugAllMoreTeapotsNativeActivitySharedLibrary
  :app:arm64-v8aDebugAllMoreTeapotsNativeActivitySharedLibrary
  :app:copyArmeabi-v7aDebugAllMoreTeapotsNativeActivitySharedLibraryGdbServer
  :app:createArmeabi-v7aDebugAllMoreTeapotsNativeActivitySharedLibraryGdbsetup
  :app:compileArmeabi-v7aDebugAllMoreTeapotsNativeActivitySharedLibraryMoreTeapotsNativeActivityMainC
  :app:compileArmeabi-v7aDebugAllMoreTeapotsNativeActivitySharedLibraryMoreTeapotsNativeActivityMainCpp
  :app:linkArmeabi-v7aDebugAllMoreTeapotsNativeActivitySharedLibrary
  :app:stripSymbolsArmeabi-v7aDebugAllMoreTeapotsNativeActivitySharedLibrary
  :app:armeabi-v7aDebugAllMoreTeapotsNativeActivitySharedLibrary
  :app:copyArmeabiDebugAllMoreTeapotsNativeActivitySharedLibraryGdbServer
  :app:createArmeabiDebugAllMoreTeapotsNativeActivitySharedLibraryGdbsetup
  :app:compileArmeabiDebugAllMoreTeapotsNativeActivitySharedLibraryMoreTeapotsNativeActivityMainC
  :app:compileArmeabiDebugAllMoreTeapotsNativeActivitySharedLibraryMoreTeapotsNativeActivityMainCpp
  :app:linkArmeabiDebugAllMoreTeapotsNativeActivitySharedLibrary
  :app:stripSymbolsArmeabiDebugAllMoreTeapotsNativeActivitySharedLibrary
  :app:armeabiDebugAllMoreTeapotsNativeActivitySharedLibrary
  :app:preBuild UP-TO-DATE
  :app:preAllDebugBuild UP-TO-DATE
  :app:checkAllDebugManifest
  :app:prepareAllDebugDependencies
  :app:compileAllDebugAidl UP-TO-DATE
  :app:compileAllDebugRenderscript UP-TO-DATE
  :app:generateAllDebugBuildConfig UP-TO-DATE
  :app:generateAllDebugAssets UP-TO-DATE
  :app:mergeAllDebugAssets UP-TO-DATE
  :app:generateAllDebugResValues UP-TO-DATE
  :app:generateAllDebugResources UP-TO-DATE
  :app:mergeAllDebugResources UP-TO-DATE
  :app:processAllDebugManifest UP-TO-DATE
  :app:processAllDebugResources UP-TO-DATE
  :app:generateAllDebugSources UP-TO-DATE
  :app:processAllDebugJavaRes UP-TO-DATE
  :app:compileAllDebugJavaWithJavac
  Note: C:\Users\Cuong\Downloads\MoreTeapots\app\src\main\java\com\sample\moreteapots\MoreTeapotsNativeActivity.java uses or overrides a deprecated API.
  Note: Recompile with -Xlint:deprecation for details.
  :app:copyMips64DebugAllMoreTeapotsNativeActivitySharedLibraryGdbServer
  :app:createMips64DebugAllMoreTeapotsNativeActivitySharedLibraryGdbsetup
  :app:compileMips64DebugAllMoreTeapotsNativeActivitySharedLibraryMoreTeapotsNativeActivityMainC
  :app:compileMips64DebugAllMoreTeapotsNativeActivitySharedLibraryMoreTeapotsNativeActivityMainCpp
  :app:linkMips64DebugAllMoreTeapotsNativeActivitySharedLibrary
  :app:stripSymbolsMips64DebugAllMoreTeapotsNativeActivitySharedLibrary
  :app:mips64DebugAllMoreTeapotsNativeActivitySharedLibrary
  :app:copyMipsDebugAllMoreTeapotsNativeActivitySharedLibraryGdbServer
  :app:createMipsDebugAllMoreTeapotsNativeActivitySharedLibraryGdbsetup
  :app:compileMipsDebugAllMoreTeapotsNativeActivitySharedLibraryMoreTeapotsNativeActivityMainC
  :app:compileMipsDebugAllMoreTeapotsNativeActivitySharedLibraryMoreTeapotsNativeActivityMainCpp
  :app:linkMipsDebugAllMoreTeapotsNativeActivitySharedLibrary
  :app:stripSymbolsMipsDebugAllMoreTeapotsNativeActivitySharedLibrary
  :app:mipsDebugAllMoreTeapotsNativeActivitySharedLibrary
  :app:copyX86DebugAllMoreTeapotsNativeActivitySharedLibraryGdbServer
  :app:createX86DebugAllMoreTeapotsNativeActivitySharedLibraryGdbsetup
  :app:compileX86DebugAllMoreTeapotsNativeActivitySharedLibraryMoreTeapotsNativeActivityMainC
  :app:compileX86DebugAllMoreTeapotsNativeActivitySharedLibraryMoreTeapotsNativeActivityMainCpp
  :app:linkX86DebugAllMoreTeapotsNativeActivitySharedLibrary
  :app:stripSymbolsX86DebugAllMoreTeapotsNativeActivitySharedLibrary
  :app:x86DebugAllMoreTeapotsNativeActivitySharedLibrary
  :app:copyX86_64DebugAllMoreTeapotsNativeActivitySharedLibraryGdbServer
  :app:createX86_64DebugAllMoreTeapotsNativeActivitySharedLibraryGdbsetup
  :app:compileX86_64DebugAllMoreTeapotsNativeActivitySharedLibraryMoreTeapotsNativeActivityMainC
  :app:compileX86_64DebugAllMoreTeapotsNativeActivitySharedLibraryMoreTeapotsNativeActivityMainCpp
  :app:linkX86_64DebugAllMoreTeapotsNativeActivitySharedLibrary
  :app:stripSymbolsX86_64DebugAllMoreTeapotsNativeActivitySharedLibrary
  :app:x86_64DebugAllMoreTeapotsNativeActivitySharedLibrary
  :app:compileAllDebugSources
  :app:preDexAllDebug
  :app:dexAllDebug
  UNEXPECTED TOP-LEVEL EXCEPTION:
  ...while parsing com/sample/helper/NDKHelper.class
  UNEXPECTED TOP-LEVEL EXCEPTION:
  ...while parsing com/sample/moreteapots/BuildConfig.class
  UNEXPECTED TOP-LEVEL EXCEPTION:
  ...while parsing com/sample/moreteapots/MoreTeapotsApplication.class
  UNEXPECTED TOP-LEVEL EXCEPTION:
  ...while parsing com/sample/moreteapots/MoreTeapotsNativeActivity$1.class
  UNEXPECTED TOP-LEVEL EXCEPTION:
  ...while parsing com/sample/moreteapots/MoreTeapotsNativeActivity$2.class
  UNEXPECTED TOP-LEVEL EXCEPTION:
  ...while parsing com/sample/moreteapots/MoreTeapotsNativeActivity$3.class
  UNEXPECTED TOP-LEVEL EXCEPTION:
  ...while parsing com/sample/moreteapots/MoreTeapotsNativeActivity.class
  UNEXPECTED TOP-LEVEL EXCEPTION:
  ...while parsing com/sample/moreteapots/R$attr.class
  UNEXPECTED TOP-LEVEL EXCEPTION:
  ...while parsing com/sample/moreteapots/R$drawable.class
  UNEXPECTED TOP-LEVEL EXCEPTION:
  ...while parsing com/sample/moreteapots/R$id.class
  UNEXPECTED TOP-LEVEL EXCEPTION:
  ...while parsing com/sample/moreteapots/R$layout.class
  UNEXPECTED TOP-LEVEL EXCEPTION:
  ...while parsing com/sample/moreteapots/R$string.class
  UNEXPECTED TOP-LEVEL EXCEPTION:
  ...while parsing com/sample/moreteapots/R$style.class
  UNEXPECTED TOP-LEVEL EXCEPTION:
  ...while parsing com/sample/moreteapots/R.class
  14 errors; aborting
  Error:Execution failed for task ':app:dexAllDebug'.
  com.android.ide.common.process.ProcessException: org.gradle.process.internal.ExecException: Process 'command 'C:\Program Files\Java\jdk1.8.0_45\bin\java.exe'' finished with non-zero exit value 1
  Information:BUILD FAILED
  Information:Total time: 4 mins 1.033 secs
  Information:1 error
  Information:0 warnings
  Information:See complete output in console</p>
</blockquote>

<p>This is guide <a href=""http://tools.android.com/tech-docs/new-build-system/gradle-experimental"" rel=""nofollow"">http://tools.android.com/tech-docs/new-build-system/gradle-experimental</a>.
Its app build.gradle</p>

<pre><code>apply plugin: 'com.android.model.application'

model {
android {
    compileSdkVersion    = 22
    buildToolsVersion    =""22.0.1""

    defaultConfig.with {
        applicationId    = ""com.sample.moreteapots""
        minSdkVersion.apiLevel    = 11
        targetSdkVersion.apiLevel = 22

    }
}
android.ndk {
    moduleName =""MoreTeapotsNativeActivity""
    cppFlags   += ""-I${file(""src/main/jni/cpufeatures"")}"".toString()
    cppFlags   += ""-I${file(""src/main/jni/native_app_glue"")}"".toString()
    cppFlags   += ""-I${file(""src/main/jni/ndk_helper"")}"".toString()

    // CFlags is configured in similiar way as cppFlags
    // CFlags    += ""-I${file(""src/main/jni/native_app_glue"")}"".toString()

    ldLibs     += [""android"", ""EGL"", ""GLESv2"",""log""]
    stl         = ""stlport_static""
}

android.sources {
    main {
        jni {
            source {
                srcDirs 'src/main/jni'
            }
        }
    }
}

android.productFlavors {
    create (""arm7"") {
        ndk.abiFilters += ""armeabi-v7a""
    }
    create (""arm8"") {
        ndk.abiFilters += ""arm64-v8a""
    }
    create (""x86-32"") {
        ndk.abiFilters += ""x86""
    }
    // for detailed abiFilter descriptions, refer to ""Supported ABIs"" @
    // https://developer.android.com/ndk/guides/abis.html#sa
    // build one including all productFlavors
    create(""all"")
}
</code></pre>

<p>}</p>

<p>Its project build.gradle</p>

<pre><code>// Top-level build file where you can add configuration options common to      all sub-projects/modules.
buildscript {
repositories {
   maven {
     url  ""http://dl.bintray.com/android/android-tools""
   }
   jcenter()
}
dependencies {
    classpath 'com.android.tools.build:gradle-experimental:0.1.0'
}
}

allprojects {
repositories {
    jcenter()
}
</code></pre>

<p>}</p>

<p>Its gradle-wrapper.properties</p>

<pre><code>#Wed Apr 10 15:27:10 PDT 2013
distributionBase=GRADLE_USER_HOME
distributionPath=wrapper/dists
zipStoreBase=GRADLE_USER_HOME
zipStorePath=wrapper/dists
distributionUrl=https\://services.gradle.org/distributions/gradle-2.5-rc-1-bin.zip
</code></pre>

<p>How can I solve? Thanks.</p>

<p>UPDATE: Solved.  I add </p>

<pre><code>    compileOptions.with {
    sourceCompatibility = JavaVersion.VERSION_1_7
    targetCompatibility = JavaVersion.VERSION_1_7
}
</code></pre>

<p>to app build.gradle like</p>

<pre><code>apply plugin: 'com.android.model.application'
model {
android {
    compileSdkVersion    = 22
    buildToolsVersion    =""22.0.1""

    defaultConfig.with {
        applicationId    = ""com.sample.moreteapots""
        minSdkVersion.apiLevel    = 10
        targetSdkVersion.apiLevel = 22

    }
}
android.ndk {
    moduleName =""MoreTeapotsNativeActivity""
    cppFlags   += ""-I${file(""src/main/jni/cpufeatures"")}"".toString()
    cppFlags   += ""-I${file(""src/main/jni/native_app_glue"")}"".toString()
    cppFlags   += ""-I${file(""src/main/jni/ndk_helper"")}"".toString()

    // CFlags is configured in similiar way as cppFlags
    // CFlags    += ""-I${file(""src/main/jni/native_app_glue"")}"".toString()

    ldLibs     += [""android"", ""EGL"", ""GLESv2"",""log""]
    stl         = ""stlport_static""
}

android.sources {
    main {
        jni {
            source {
                srcDirs 'src/main/jni'
            }
        }
    }
}

android.productFlavors {
    create (""arm7"") {
        ndk.abiFilters += ""armeabi-v7a""
    }
    create (""arm8"") {
        ndk.abiFilters += ""arm64-v8a""
    }
    create (""x86-32"") {
        ndk.abiFilters += ""x86""
    }
    // for detailed abiFilter descriptions, refer to ""Supported ABIs"" @
    // https://developer.android.com/ndk/guides/abis.html#sa
    // build one including all productFlavors
    create(""all"")
}
compileOptions.with {
    sourceCompatibility = JavaVersion.VERSION_1_7
    targetCompatibility = JavaVersion.VERSION_1_7
}
</code></pre>

<p>}</p>
",4108002,,4108002,,2015-07-14 13:23:41,2015-07-25 3:12:13,Android Studio: New gradle build NDK sample app error,<android><android-ndk>,2,0,,,
Android,31345049,1,31388760,874,7/13/2015 16:35:25,3,,7/10/2015 15:46:35,,2,1698,"<p>I'm trying to get the basic autocomplete functionality from <a href=""https://developers.google.com/places/android/autocomplete"" rel=""nofollow"">Google's Places Api</a> working with Xamarin Android.</p>

<p>I'm using version 25.0.0.0 of Xamarin's <a href=""http://components.xamarin.com/view/googleplayservices"" rel=""nofollow"">Google Play Services - Location</a>  lib.</p>

<p>I've managed to get to the point of returning results of a query while following <a href=""https://github.com/googlesamples/android-play-places/blob/master/PlaceComplete/Application/src/main/java/com/example/google/playservices/placecomplete/PlaceAutocompleteAdapter.java"" rel=""nofollow"">this example code</a></p>

<p>This is the Fragment I'm using to test the code</p>

<pre><code>public class PlaceAutocomplete: BaseFragment, IGoogleApiClientOnConnectionFailedListener {
    IGoogleApiClient client;
    public override void OnCreate( Bundle savedInstanceState ) {
        base.OnCreate( savedInstanceState );
        client = new GoogleApiClientBuilder( Activity )
                                            .EnableAutoManage( Activity as BaseFragmentActivity, 0, this )
                                            .AddOnConnectionFailedListener( OnConnectionFailed )
                                            .AddApi( Places.GEO_DATA_API )
                                            .Build();
    }

    public override View OnCreateView( LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState ) {
        Places.GeoDataApi.GetAutocompletePredictions( client, ""cul"",
        new LatLngBounds( new LatLng( 33.515071, -118.796427 ), new LatLng( 34.435985, -117.127371 ) ), null )
        .SetResultCallback&lt;AutocompletePredictionBuffer&gt;( AutocompleteResult );

        return base.OnCreateView( inflater, container, savedInstanceState );
    }

    public void AutocompleteResult( AutocompletePredictionBuffer buffer ) {

        if( !buffer.Status.IsSuccess ) {
            Toast.MakeText( Activity, buffer.Status.StatusMessage, ToastLength.Long ).Show();
            return;
        }

        var a = new List&lt;IAutocompletePrediction&gt;();
        for( var i = 0; i &lt; buffer.Count; i++ ) {
            var item = buffer.Get( i );
            if( item is IAutocompletePrediction ) {
                a.Add( (IAutocompletePrediction) item );
            } else {
                 //all the results go in here
            }
        }

        Toast.MakeText( Activity, a.Count.ToString(), ToastLength.Long ).Show();
    }

    public void OnConnectionFailed( ConnectionResult result ) {

    }
}
</code></pre>

<p>There are 5 returned results from <em>GetAutocompletePredictions</em> method but all of them of type named <strong>com.google.android.gms.location.places.internal.zzb</strong>, cannot be cast to IAutocompletePrediction and I did not find any way to use them.</p>

<p>Did I do something wrong or this part of Xamarin's Google Play library is not fully implemented?</p>
",1014690,,1014690,,2015-07-13 7:40:21,2016-01-21 2:21:49,Xamarin Android Google Places Api AutoComplete broken,<xamarin><xamarin.android><google-places-api>,2,1,,,
Android,31290783,1,31409016,875,7/14/2015 14:06:31,6,,7/8/2015 11:03:35,,7,548,"<p>I implemented a sync task the same way as the <a href=""https://github.com/googlesamples/android-BasicSyncAdapter"" rel=""nofollow noreferrer"">BasicSyncAdapter example</a> except with a Google account like in this answer:</p>

<p><a href=""https://stackoverflow.com/a/2972918/2072569"">https://stackoverflow.com/a/2972918/2072569</a></p>

<p>It works on allmost all devices except for the Samsung SM-P600 (Galaxy Note 2014) with Android 4.4.2 and some other Samsung tablets.</p>

<p>My ContentProvider in the Manifest file has a label. This is the cause of this bug according to <a href=""https://stackoverflow.com/a/26264980/2072569"">this post</a> at some Android version of some Samsung tablets.</p>

<p><strong>Has Samsung blocked adding sync tasks to a Google account for some reason?</strong></p>

<p>The sync is added like this:</p>

<pre><code>removeAllSyncTasks();
ContentResolver.setIsSyncable(mAccount, CONTENT_AUTHORITY, 1);
ContentResolver.setSyncAutomatically(mAccount, CONTENT_AUTHORITY, true);
ContentResolver.addPeriodicSync(mAccount, CONTENT_AUTHORITY, Bundle.EMPTY, SYNC_FREQUENCY);
</code></pre>

<p>Manifest part:</p>

<pre><code>        &lt;service
            android:name="".data.sync.SyncService""
            android:exported=""true""
            android:process="":sync""&gt;
            &lt;intent-filter&gt;
                &lt;action android:name=""android.content.SyncAdapter""/&gt;
            &lt;/intent-filter&gt;
            &lt;meta-data android:name=""android.content.SyncAdapter""
                android:resource=""@xml/syncadapter"" /&gt;
        &lt;/service&gt;


        &lt;provider
            android:name="".data.provider.LevensContentProvider""
            android:authorities=""@string/authority""
            android:label=""@string/app_name_sync""
            android:exported=""false""
            android:syncable=""true"" /&gt;
</code></pre>

<p>Syncadapter xml:</p>

<pre><code>&lt;?xml version=""1.0"" encoding=""utf-8""?&gt;
&lt;sync-adapter
    xmlns:android=""http://schemas.android.com/apk/res/android""
    android:contentAuthority=""@string/authority""
    android:accountType=""com.google""
    android:userVisible=""true""
    android:supportsUploading=""true""
    android:allowParallelSyncs=""false""
    android:isAlwaysSyncable=""true""/&gt; 
</code></pre>

<p>When I manually start the sync. The Syncservice is also not starting at the Samsung tablets (it works on all other devices).</p>
",199252,,-1,,2017-05-23 11:51:44,2015-07-16 7:20:23,Custom sync not working with Google Account (com.google) on some Samsung devices,<android><sync><samsung-mobile><android-syncadapter>,1,1,,,
Android,31506508,1,31506657,876,7/19/2015 22:36:10,0,,7/19/2015 22:17:46,,1,299,"<p>I just cloned the project at <a href=""https://github.com/googlesamples/android-ndk"" rel=""nofollow"">GoogleSamples</a> then cd to the native-activity dir. I typed:</p>

<pre><code>&gt; gradle clean build 
</code></pre>

<p>And I am getting this:</p>

<pre><code>Starting process 'command '/Library/Java/JavaVirtualMachines/jdk1.8.0_31.jdk/Contents/Home/bin/java''. Working directory: /Users/johndifool/Develop/android/native-activity/app Command: /Library/Java/JavaVirtualMachines/jdk1.8.0_31.jdk/Contents/Home/bin/java -Xmx1024M -Dfile.encoding=UTF-8 -Duser.country=US -Duser.language=en -Duser.variant -cp /Users/johndifool/Develop/android/sdk/build-tools/22.0.1/lib/dx.jar com.android.dx.command.Main --dex --verbose --output /Users/johndifool/Develop/android/native-activity/app/build/intermediates/dex/arm7/debug /Users/johndifool/Develop/android/native-activity/app/build/intermediates/classes/arm7/debug
Successfully started process 'command '/Library/Java/JavaVirtualMachines/jdk1.8.0_31.jdk/Contents/Home/bin/java''
processing /Users/johndifool/Develop/android/native-activity/app/build/intermediates/classes/arm7/debug/./com/example/native_activity/BuildConfig.class...
processing /Users/johndifool/Develop/android/native-activity/app/build/intermediates/classes/arm7/debug/./com/example/native_activity/R$attr.class...
processing /Users/johndifool/Develop/android/native-activity/app/build/intermediates/classes/arm7/debug/./com/example/native_activity/R$string.class...
processing /Users/johndifool/Develop/android/native-activity/app/build/intermediates/classes/arm7/debug/./com/example/native_activity/R.class...


UNEXPECTED TOP-LEVEL EXCEPTION:
com.android.dx.cf.iface.ParseException: bad class file magic (cafebabe) or version (0034.0000)
  at com.android.dx.cf.direct.DirectClassFile.parse0(DirectClassFile.java:472)
  at com.android.dx.cf.direct.DirectClassFile.parse(DirectClassFile.java:406)
  at com.android.dx.cf.direct.DirectClassFile.parseToInterfacesIfNecessary(DirectClassFile.java:388)
  at com.android.dx.cf.direct.DirectClassFile.getMagic(DirectClassFile.java:251)
  at com.android.dx.command.dexer.Main.processClass(Main.java:704)
  at com.android.dx.command.dexer.Main.processFileBytes(Main.java:673)
  at com.android.dx.command.dexer.Main.access$300(Main.java:83)
  at com.android.dx.command.dexer.Main$1.processFileBytes(Main.java:602)
  at com.android.dx.cf.direct.ClassPathOpener.processOne(ClassPathOpener.java:170)
  at com.android.dx.cf.direct.ClassPathOpener.processDirectory(ClassPathOpener.java:229)
  at com.android.dx.cf.direct.ClassPathOpener.processOne(ClassPathOpener.java:158)
  at com.android.dx.cf.direct.ClassPathOpener.processDirectory(ClassPathOpener.java:229)
  at com.android.dx.cf.direct.ClassPathOpener.processOne(ClassPathOpener.java:158)
  at com.android.dx.cf.direct.ClassPathOpener.processDirectory(ClassPathOpener.java:229)
  at com.android.dx.cf.direct.ClassPathOpener.processOne(ClassPathOpener.java:158)
  at com.android.dx.cf.direct.ClassPathOpener.processDirectory(ClassPathOpener.java:229)
  at com.android.dx.cf.direct.ClassPathOpener.processOne(ClassPathOpener.java:158)
  at com.android.dx.cf.direct.ClassPathOpener.process(ClassPathOpener.java:144)
  at com.android.dx.command.dexer.Main.processOne(Main.java:632)
  at com.android.dx.command.dexer.Main.processAllFiles(Main.java:510)
  at com.android.dx.command.dexer.Main.runMonoDex(Main.java:280)
  at com.android.dx.command.dexer.Main.run(Main.java:246)
  at com.android.dx.command.dexer.Main.main(Main.java:215)
  at com.android.dx.command.Main.main(Main.java:106)
...while parsing com/example/native_activity/BuildConfig.class


UNEXPECTED TOP-LEVEL EXCEPTION:
com.android.dx.cf.iface.ParseException: bad class file magic (cafebabe) or version (0034.0000)
  at com.android.dx.cf.direct.DirectClassFile.parse0(DirectClassFile.java:472)
  at com.android.dx.cf.direct.DirectClassFile.parse(DirectClassFile.java:406)
  at com.android.dx.cf.direct.DirectClassFile.parseToInterfacesIfNecessary(DirectClassFile.java:388)
  at com.android.dx.cf.direct.DirectClassFile.getMagic(DirectClassFile.java:251)
  at com.android.dx.command.dexer.Main.processClass(Main.java:704)
  at com.android.dx.command.dexer.Main.processFileBytes(Main.java:673)
  at com.android.dx.command.dexer.Main.access$300(Main.java:83)
  at com.android.dx.command.dexer.Main$1.processFileBytes(Main.java:602)
  at com.android.dx.cf.direct.ClassPathOpener.processOne(ClassPathOpener.java:170)
  at com.android.dx.cf.direct.ClassPathOpener.processDirectory(ClassPathOpener.java:229)
  at com.android.dx.cf.direct.ClassPathOpener.processOne(ClassPathOpener.java:158)
  at com.android.dx.cf.direct.ClassPathOpener.processDirectory(ClassPathOpener.java:229)
  at com.android.dx.cf.direct.ClassPathOpener.processOne(ClassPathOpener.java:158)
  at com.android.dx.cf.direct.ClassPathOpener.processDirectory(ClassPathOpener.java:229)
  at com.android.dx.cf.direct.ClassPathOpener.processOne(ClassPathOpener.java:158)
  at com.android.dx.cf.direct.ClassPathOpener.processDirectory(ClassPathOpener.java:229)
  at com.android.dx.cf.direct.ClassPathOpener.processOne(ClassPathOpener.java:158)
  at com.android.dx.cf.direct.ClassPathOpener.process(ClassPathOpener.java:144)
  at com.android.dx.command.dexer.Main.processOne(Main.java:632)
  at com.android.dx.command.dexer.Main.processAllFiles(Main.java:510)
  at com.android.dx.command.dexer.Main.runMonoDex(Main.java:280)
  at com.android.dx.command.dexer.Main.run(Main.java:246)
  at com.android.dx.command.dexer.Main.main(Main.java:215)
  at com.android.dx.command.Main.main(Main.java:106)
...while parsing com/example/native_activity/R$attr.class


UNEXPECTED TOP-LEVEL EXCEPTION:
com.android.dx.cf.iface.ParseException: bad class file magic (cafebabe) or version (0034.0000)
  at com.android.dx.cf.direct.DirectClassFile.parse0(DirectClassFile.java:472)
  at com.android.dx.cf.direct.DirectClassFile.parse(DirectClassFile.java:406)
  at com.android.dx.cf.direct.DirectClassFile.parseToInterfacesIfNecessary(DirectClassFile.java:388)
  at com.android.dx.cf.direct.DirectClassFile.getMagic(DirectClassFile.java:251)
  at com.android.dx.command.dexer.Main.processClass(Main.java:704)
  at com.android.dx.command.dexer.Main.processFileBytes(Main.java:673)
  at com.android.dx.command.dexer.Main.access$300(Main.java:83)
  at com.android.dx.command.dexer.Main$1.processFileBytes(Main.java:602)
  at com.android.dx.cf.direct.ClassPathOpener.processOne(ClassPathOpener.java:170)
  at com.android.dx.cf.direct.ClassPathOpener.processDirectory(ClassPathOpener.java:229)
  at com.android.dx.cf.direct.ClassPathOpener.processOne(ClassPathOpener.java:158)
  at com.android.dx.cf.direct.ClassPathOpener.processDirectory(ClassPathOpener.java:229)
  at com.android.dx.cf.direct.ClassPathOpener.processOne(ClassPathOpener.java:158)
  at com.android.dx.cf.direct.ClassPathOpener.processDirectory(ClassPathOpener.java:229)
  at com.android.dx.cf.direct.ClassPathOpener.processOne(ClassPathOpener.java:158)
  at com.android.dx.cf.direct.ClassPathOpener.processDirectory(ClassPathOpener.java:229)
  at com.android.dx.cf.direct.ClassPathOpener.processOne(ClassPathOpener.java:158)
  at com.android.dx.cf.direct.ClassPathOpener.process(ClassPathOpener.java:144)
  at com.android.dx.command.dexer.Main.processOne(Main.java:632)
  at com.android.dx.command.dexer.Main.processAllFiles(Main.java:510)
  at com.android.dx.command.dexer.Main.runMonoDex(Main.java:280)
  at com.android.dx.command.dexer.Main.run(Main.java:246)
  at com.android.dx.command.dexer.Main.main(Main.java:215)
  at com.android.dx.command.Main.main(Main.java:106)
...while parsing com/example/native_activity/R$string.class


UNEXPECTED TOP-LEVEL EXCEPTION:
com.android.dx.cf.iface.ParseException: bad class file magic (cafebabe) or version (0034.0000)
  at com.android.dx.cf.direct.DirectClassFile.parse0(DirectClassFile.java:472)
  at com.android.dx.cf.direct.DirectClassFile.parse(DirectClassFile.java:406)
  at com.android.dx.cf.direct.DirectClassFile.parseToInterfacesIfNecessary(DirectClassFile.java:388)
  at com.android.dx.cf.direct.DirectClassFile.getMagic(DirectClassFile.java:251)
  at com.android.dx.command.dexer.Main.processClass(Main.java:704)
  at com.android.dx.command.dexer.Main.processFileBytes(Main.java:673)
  at com.android.dx.command.dexer.Main.access$300(Main.java:83)
  at com.android.dx.command.dexer.Main$1.processFileBytes(Main.java:602)
  at com.android.dx.cf.direct.ClassPathOpener.processOne(ClassPathOpener.java:170)
  at com.android.dx.cf.direct.ClassPathOpener.processDirectory(ClassPathOpener.java:229)
  at com.android.dx.cf.direct.ClassPathOpener.processOne(ClassPathOpener.java:158)
  at com.android.dx.cf.direct.ClassPathOpener.processDirectory(ClassPathOpener.java:229)
  at com.android.dx.cf.direct.ClassPathOpener.processOne(ClassPathOpener.java:158)
  at com.android.dx.cf.direct.ClassPathOpener.processDirectory(ClassPathOpener.java:229)
  at com.android.dx.cf.direct.ClassPathOpener.processOne(ClassPathOpener.java:158)
  at com.android.dx.cf.direct.ClassPathOpener.processDirectory(ClassPathOpener.java:229)
  at com.android.dx.cf.direct.ClassPathOpener.processOne(ClassPathOpener.java:158)
  at com.android.dx.cf.direct.ClassPathOpener.process(ClassPathOpener.java:144)
  at com.android.dx.command.dexer.Main.processOne(Main.java:632)
  at com.android.dx.command.dexer.Main.processAllFiles(Main.java:510)
  at com.android.dx.command.dexer.Main.runMonoDex(Main.java:280)
  at com.android.dx.command.dexer.Main.run(Main.java:246)
  at com.android.dx.command.dexer.Main.main(Main.java:215)
  at com.android.dx.command.Main.main(Main.java:106)
...while parsing com/example/native_activity/R.class

4 errors; aborting

:app:dexArm7Debug FAILED
:app:dexArm7Debug (Thread[main,5,main]) completed. Took 0.219 secs.

FAILURE: Build failed with an exception.

* What went wrong:
Execution failed for task ':app:dexArm7Debug'.
&gt; com.android.ide.common.process.ProcessException: org.gradle.process.internal.ExecException: Process 'command '/Library/Java/JavaVirtualMachines/jdk1.8.0_31.jdk/Contents/Home/bin/java'' finished with non-zero exit value 1

* Try:
Run with --stacktrace option to get the stack trace. Run with --debug option to get more log output.

BUILD FAILED

Total time: 22.245 secs
Stopped 0 compiler daemon(s).
</code></pre>

<p>I have no idea what's going on here. I updated to latest gradle 2.5 which supports 'model' in app script per the project requires.</p>
",666818,,,,,2015-07-19 22:36:10,UNEXPECTED TOP-LEVEL EXCEPTION when building NDK Samples,<android><android-ndk>,1,0,,,
Android,31579686,1,31678438,877,7/28/2015 13:56:28,5,,7/23/2015 6:28:52,,2,532,"<p>Application : FingerPrint Scanner Support</p>

<p>Source : GIT HUB : <a href=""https://github.com/googlesamples/android-FingerprintDialog/"" rel=""nofollow"">Android FingerPrint Dialog</a></p>

<p>Issue : Nullpointer exception</p>

<p>File Name : <strong>MainAcitivty.java</strong></p>

<p>PATH:  <a href=""https://github.com/googlesamples/android-FingerprintDialog/blob/master/Application/src/main/java/com/example/android/fingerprintdialog/MainActivity.java"" rel=""nofollow"">https://github.com/googlesamples/android-FingerprintDialog/blob/master/Application/src/main/java/com/example/android/fingerprintdialog/MainActivity.java</a></p>

<p>Method : </p>

<pre><code>   private boolean initCipher() {
        try {
            mKeyStore.load(null);
            SecretKey key = (SecretKey) mKeyStore.getKey(KEY_NAME, null);  
            mCipher.init(Cipher.ENCRYPT_MODE, key);
            return true;
        } catch (KeyPermanentlyInvalidatedException e) {
            return false;
        } catch (KeyStoreException | CertificateException | UnrecoverableKeyException | IOException
                | NoSuchAlgorithmException | InvalidKeyException e) {
            throw new RuntimeException(""Failed to init Cipher"", e);
        }
    }
</code></pre>

<p>Getting <code>Nullpointer Exception</code> in this method.</p>

<p>Is it due to <code>keystore</code> or <code>Cipher</code> initialization ? </p>
",966347,,1426891,,2015-07-23 6:33:37,2015-07-28 13:56:28,Android M fingerprint Scanner Support example getting Nullpointer exception,<android><nullpointerexception><keystore><secret-key>,1,0,,,
Android,31751885,1,31754445,878,7/31/2015 20:12:09,0,,7/31/2015 17:28:09,,1,2239,"<p>I am trying to use the <a href=""https://github.com/googlesamples/android-ndk"" rel=""nofollow"">android ndk samples</a> (such as Teapot or san-angeles) with Android Studio 1.3 preview and the new <a href=""http://tools.android.com/tech-docs/new-build-system/gradle-experimental"" rel=""nofollow"">experimental NDK plugin</a>.  When I run, I get the following errors:</p>

<pre><code>E:\code\android-ndk-samples-preview\Teapot\app\src\main\jni\cpufeatures\cpu-features.h
sys/cdefs.h: No such file or directory

E:\code\android-ndk-samples-preview\Teapot\app\src\main\jni\native_app_glue\android_native_app_glue.c
jni.h: No such file or directory

E:\code\android-ndk-samples-preview\Teapot\app\src\main\jni\ndk_helper\gl3stub.c
EGL/egl.h: No such file or directory

Error:Execution failed for task ':app:compileArmeabi-v7aDebugArm7TeapotNativeActivitySharedLibraryTeapotNativeActivityMainC'.
 Multiple build operations failed.
      C compiler failed while compiling cpu-features.c.
      C compiler failed while compiling android_native_app_glue.c.
      C compiler failed while compiling gl3stub.c.
</code></pre>

<p>I was able to run fine yesterday, before I upgraded Android Studio from AI-141.1962279 (I think) to AI-141.2117773.  How can I get this working?  Could these errors stem from the backslash preceding cdefs.h and egl.h?</p>

<p>My local.settings contains:</p>

<pre><code>sdk.dir=E\:\\Android\\sdk
ndk.dir=E\:\\Android\\ndk
</code></pre>

<p>My system:</p>

<pre><code>Windows 8.1 64 bit
Android Studio 1.3
Build tools 22.0.1
Gradle 2.5
NDK r10e extracted to E:\Android\sdk\ndk-bundle
Device: Project Tango Tablet with Schur core
</code></pre>
",3549440,,3549440,,2015-07-31 19:41:07,2015-07-31 20:12:09,NDK samples with Android Studio 1.3 preview: can't find headers,<android><android-ndk>,1,2,,,
Android,31797821,1,31839641,879,8/5/2015 18:00:34,2,,8/3/2015 22:32:17,,1,718,"<p>I'm having difficulties with the Camera2 API's in regards to autofocus.  I am trying to snap pictures of objects at about 6-8"" range, specifically, a bank check, however, until the object is at approximately 12"" range, the text on the check is very blurry and it doesn't seem that the device's autofocus is working properly.  When I use the device's built-in Camera application, I don't have this issue at all.</p>

<p>The blurriness is present in both the preview and captured still image.</p>

<p>I'm using code from <a href=""https://github.com/googlesamples/android-Camera2Basic"" rel=""nofollow"">https://github.com/googlesamples/android-Camera2Basic</a> , and have been playing with all of the autofocus settings I can think to try, and so far none have worked.</p>

<p>This is on a Samsung Galaxy S5.  Unfortunately I don't have any other Android 5 devices to try it out on right now.</p>

<p>How can I achieve smooth focus on such items similar to the native Camera app?</p>
",1580268,,,,,2015-08-05 18:00:34,Unable to focus on nearby objects,<android><android-camera>,2,1,,,
Android,31786559,1,31875851,880,8/7/2015 10:46:31,4,,8/3/2015 11:53:18,,1,258,"<p>Following the <a href=""http://tools.android.com/tech-docs/android-ndk-preview"" rel=""nofollow"">Android NDK Preview</a> document, I install android-ndk-10e and experimental gradle plugin ,import the <a href=""https://github.com/googlesamples/android-ndk/tree/master/Teapot"" rel=""nofollow"">Teapot</a> sample project then set the ""Android Native"".</p>

<p>Things seem works fine except that the breakpoints in native code can not be triggered. Have tested on OS X Yosemite and Windows 7, both failed.</p>

<p>Here is a <a href=""https://groups.google.com/forum/#!topic/android-ndk/r4q67-JKBPM"" rel=""nofollow"">post</a> says doing some changes to gradle file, but not working for me.</p>
",853569,,,,,2015-08-07 10:46:31,Breakpoints in native code can not be triggered in Android Studio 13,<android-studio><gradle><android-ndk>,1,0,1,,
Android,31884355,1,31918816,881,8/10/2015 11:51:40,3,,8/7/2015 18:25:49,,3,4220,"<p>This is darn strange. I have an <code>Activity</code> with a <code>ViewPager</code> that hosts a couple of of <code>Fragment</code>s, the first one has a <code>RadioButton</code> with the id  <code>android:id=""@+id/backjudgeRadionButton""</code>. </p>

<p>I have an Espresso test that looks like this: </p>

<pre><code>import android.test.ActivityInstrumentationTestCase2;

import model.GameSetup;
import ui.SetupActivity;
import weigl.fm.refwatch.R;

import static android.support.test.espresso.Espresso.onView;
import static android.support.test.espresso.action.ViewActions.click;
import static android.support.test.espresso.matcher.ViewMatchers.withText;

/**
 * Created by asco on 8/7/15.
 */
public class SetupActivityEspressoTest extends ActivityInstrumentationTestCase2&lt;SetupActivity&gt; {


    public SetupActivityEspressoTest() {
        super(SetupActivity.class);
    }


    @Override
    protected void setUp() throws Exception {
        super.setUp();
        getActivity();
    }

    public void testUserRoleIsSet() {


        onView(withId(R.id.backjudgeRadionButton)).perform(click());

        assertEquals(GameSetup.UserRole.backjudge, getActivity().getGameSetup().getUserRole());

    }

}
</code></pre>

<p><strong>When Espresso is imported in my <code>build.gradle</code> via</strong></p>

<pre><code>compile('com.android.support.test.espresso:espresso-core:2.2') {
    exclude module: 'support-annotations'
}

compile('com.android.support.test:runner:0.3') {
    exclude module: 'support-annotations'
}
compile('com.android.support.test.espresso:espresso-contrib:2.2') {
    exclude module: 'support-annotations'
}
</code></pre>

<p><strong>The test works fine.</strong> </p>

<p><strong>When I use the intended variant of importing dependencies for instrumentation tests:</strong> </p>

<pre><code>androidTestCompile('com.android.support.test.espresso:espresso-core:2.2') {
    exclude module: 'support-annotations'
}

androidTestCompile('com.android.support.test:runner:0.3') {
    exclude module: 'support-annotations'
}
androidTestCompile('com.android.support.test.espresso:espresso-contrib:2.2') {
    exclude module: 'support-annotations'
}
</code></pre>

<p><strong>with <code>androidTestCompile</code> instead of <code>compile</code> the test fails because the View with the provided id is not found:</strong> </p>

<pre><code>Running tests
Test running started
android.support.test.espresso.NoMatchingViewException: No views in hierarchy found matching: with string from resource id: &lt;2131230756&gt;

View Hierarchy:
+&gt;DecorView{id=-1, visibility=VISIBLE, width=280, height=280, has-focus=true, has-focusable=true, has-window-focus=true, is-clickable=false, is-enabled=true, is-focused=false, is-focusable=false, is-layout-requested=false, is-selected=false, root-is-layout-requested=false, has-input-connection=false, x=0.0, y=0.0, child-count=1}
|
+-&gt;LinearLayout{id=-1, visibility=VISIBLE, width=280, height=280, has-focus=true, has-focusable=true, has-window-focus=true, is-clickable=false, is-enabled=true, is-focused=false, is-focusable=false, is-layout-requested=false, is-selected=false, root-is-layout-requested=false, has-input-connection=false, x=0.0, y=0.0, child-count=2}
|
+--&gt;ViewStub{id=16909171, visibility=GONE, width=0, height=0, has-focus=false, has-focusable=false, has-window-focus=true, is-clickable=false, is-enabled=true, is-focused=false, is-focusable=false, is-layout-requested=true, is-selected=false, root-is-layout-requested=false, has-input-connection=false, x=0.0, y=0.0}
|
+--&gt;FrameLayout{id=16908290, res-name=content, visibility=VISIBLE, width=280, height=280, has-focus=true, has-focusable=true, has-window-focus=true, is-clickable=false, is-enabled=true, is-focused=false, is-focusable=false, is-layout-requested=false, is-selected=false, root-is-layout-requested=false, has-input-connection=false, x=0.0, y=0.0, child-count=1}
|
+---&gt;LinearLayout{id=-1, visibility=VISIBLE, width=280, height=280, has-focus=true, has-focusable=true, has-window-focus=true, is-clickable=false, is-enabled=true, is-focused=false, is-focusable=false, is-layout-requested=false, is-selected=false, root-is-layout-requested=false, has-input-connection=false, x=0.0, y=0.0, child-count=1}
|
+----&gt;ViewPager{id=2131558442, res-name=viewPager, visibility=VISIBLE, width=280, height=280, has-focus=true, has-focusable=true, has-window-focus=true, is-clickable=false, is-enabled=true, is-focused=true, is-focusable=true, is-layout-requested=false, is-selected=false, root-is-layout-requested=false, has-input-connection=false, x=0.0, y=0.0, child-count=0}
|
at dalvik.system.VMStack.getThreadStackTrace(Native Method)
at java.lang.Thread.getStackTrace(Thread.java:580)
at android.support.test.espresso.base.DefaultFailureHandler.getUserFriendlyError(DefaultFailureHandler.java:82)
at android.support.test.espresso.base.DefaultFailureHandler.handle(DefaultFailureHandler.java:53)
at android.support.test.espresso.ViewInteraction.runSynchronouslyOnUiThread(ViewInteraction.java:184)
at android.support.test.espresso.ViewInteraction.doPerform(ViewInteraction.java:115)
at android.support.test.espresso.ViewInteraction.perform(ViewInteraction.java:87)
at SetupActivityEspressoTest.testUserRoleIsSet(SetupActivityEspressoTest.java:30)
at java.lang.reflect.Method.invoke(Native Method)
at java.lang.reflect.Method.invoke(Method.java:372)
</code></pre>

<p>It seems like Espresso only checks the Views in the Activity's layout, not the ones provided by the ViewPager. </p>

<p>a. How comes my test works when using <code>compile</code> instead of <code>androidTestCompile</code>?</p>

<p>b. Is Espresso even supposed to find <code>View</code>s within <code>Fragments</code> inside a <code>ViewPager</code>?</p>

<p><strong>EDIT:</strong> 
This is the second variant of the espresso test that I tried, taken from <a href=""https://github.com/googlesamples/android-testing-templates"" rel=""nofollow"">the new Android testing template</a>: </p>

<pre><code>@RunWith(AndroidJUnit4.class)
@LargeTest
public class SetupActivityTest {


    @Rule
    public ActivityTestRule&lt;SetupActivity&gt; mActivityRule =
            new ActivityTestRule&lt;&gt;(SetupActivity.class);

    @Test
    public void findViewPerformActionAndCheckAssertion() {
        // Find Button and Click on it
        onView(withId(R.id.backjudgeRadionButton)).perform(click());

    }

}
</code></pre>

<p>It shows the same effect. </p>

<p>This is all happening inside a <code>wear</code> module if that matters. </p>

<p><strong>EDIT2:</strong> You can have a look at the whole project <a href=""https://github.com/asco33/RefWatch/tree/espresso2"" rel=""nofollow"">on GitHub</a>. </p>
",804967,,804967,,2015-08-10 7:35:25,2015-08-10 11:51:40,Espresso won't find View when included with androidTestCompile,<android><android-gradle><android-espresso>,1,8,,,
Android,31984622,1,31993813,882,8/13/2015 16:34:57,0,,8/13/2015 9:39:15,,3,7190,"<p>I built my own camera app with the camera2 API. I started with the sample ""<a href=""https://github.com/googlesamples/android-Camera2Raw"" rel=""nofollow"">camera2Raw</a>"" and I added YUV_420_888 support instead of JPEG. But now I am wondering how I save the images in the ImageSaver!?</p>

<p>Here is my code of the run method:</p>

<pre><code>@Override
    public void run() {
        boolean success = false;
        int format = mImage.getFormat();
        switch(format) {
            case ImageFormat.RAW_SENSOR:{
                DngCreator dngCreator = new DngCreator(mCharacteristics, mCaptureResult);
                FileOutputStream output = null;
                try {
                    output = new FileOutputStream(mFile);
                    dngCreator.writeImage(output, mImage);
                    success = true;
                } catch (IOException e) {
                    e.printStackTrace();
                } finally {
                    mImage.close();
                    closeOutput(output);
                }
                break;
            }
            case ImageFormat.YUV_420_888:{
                ByteBuffer buffer = mImage.getPlanes()[0].getBuffer();
                byte[] bytes = new byte[buffer.remaining()];
                buffer.get(bytes);
                FileOutputStream output = null;
                try {
                    output = new FileOutputStream(mFile);
                    output.write(bytes);
                    success = true;
                } catch (IOException e) {
                    e.printStackTrace();
                } finally {
                    mImage.close();
                    closeOutput(output);
                }
                break;
            }
            default:
                Log.e(TAG, ""Cannot save image, unexpected image format:"" + format);

        }
        // Decrement reference count to allow ImageReader to be closed to free up resources.
        mReader.close();

        // If saving the file succeeded, update MediaStore.
        if (success) {
            MediaScannerConnection.scanFile(mContext, new String[] { mFile.getPath()},
            /*mimeTypes*/ null, new MediaScannerConnection.MediaScannerConnectionClient() {
                @Override
                public void onMediaScannerConnected() {
                    // Do nothing
                }

                @Override
                public void onScanCompleted(String path, Uri uri) {
                    Log.i(TAG, ""Scanned "" + path + "":"");
                    Log.i(TAG, ""-&gt; uri="" + uri);
                }
            });
        }
    }
</code></pre>

<p>I tried to save the YUV images like a JPEG, but that way I only get one plane and the saved data don't make any sense to me...</p>

<p>What is the correct way to save a YUV image? Convert it to RGB (what is the sense of YUV then?)? Or with YuvImage class?</p>
",5084931,,5084931,,2015-08-13 9:46:53,2015-08-14 15:51:11,How to save a YUV_420_888 image?,<android><android-camera>,2,0,,,
Android,31756883,1,32000958,883,8/14/2015 1:24:58,13,,8/1/2015 0:03:00,,2,687,"<p>Not sure how many people here are familiar with the <a href=""https://github.com/googlesamples/android-UniversalMusicPlayer"" rel=""nofollow noreferrer"">Android Universal Music Player</a> but I am having issue with displaying an album in the <a href=""https://github.com/googlesamples/android-UniversalMusicPlayer/blob/b729def3679cac2d66136e8fdc9237d01bfb485c/mobile/src/main/java/com/example/android/uamp/ui/MediaItemViewHolder.java#L75"" rel=""nofollow noreferrer"">MediaItemViewHolder.java</a> file.</p>

<p>So here is a basic structure after my modifications: </p>

<pre><code>// image view for the album cover
holder.mImageView = (ImageView) convertView.findViewById(R.id.play_eq);

// get the album art url
String artUrl = description.getIconUri().toString();
Bitmap art;
AlbumArtCache cache = AlbumArtCache.getInstance();
art = cache.getIconImage(artUrl);
....
if (cachedState == null || cachedState != state) {
    switch (state) {
    case STATE_PLAYABLE:
         // display the album cover
         holder.mImageView.setImageBitmap(art);
         break;
....
</code></pre>

<p>This correctly displays the album cover. However, <strong>it is initially blank</strong>. Once the user clicks on an item, the image is displayed. </p>

<p><strong>Screenshot #1</strong> : Once the app is loaded and user did not click on any item: </p>

<p><a href=""https://i.stack.imgur.com/9oObH.png"" rel=""nofollow noreferrer""><img src=""https://i.stack.imgur.com/9oObH.png"" alt=""enter image description here""></a></p>

<p><strong>Screenshot #2</strong> : Once the user click on the item to play the song</p>

<p><a href=""https://i.stack.imgur.com/6ZtlI.png"" rel=""nofollow noreferrer""><img src=""https://i.stack.imgur.com/6ZtlI.png"" alt=""enter image description here""></a></p>

<p>I am not really sure what is causing the album to be initially blank. Looking at the <a href=""https://github.com/googlesamples/android-UniversalMusicPlayer/blob/b729def3679cac2d66136e8fdc9237d01bfb485c/mobile/src/main/java/com/example/android/uamp/AlbumArtCache.java#L75"" rel=""nofollow noreferrer"">AlbumArtCache.java</a> I can't see any restrictions about OnClickListener that can cause this. </p>

<p>Any suggestions how to resolve this issue?</p>
",4576720,,,,,2015-08-14 1:24:58,Android universal music player add album cover in the MediaItemViewHolder,<java><android><android-imageview><android-bitmap>,1,0,2,,
Android,32108318,1,32110832,884,8/20/2015 6:17:46,0,,8/20/2015 1:50:49,,5,1934,"<p>I am reading the code about Android Camera2 APIs from here:
<a href=""https://github.com/googlesamples/android-Camera2Basic"" rel=""noreferrer"">https://github.com/googlesamples/android-Camera2Basic</a></p>

<p>And it is confusing in this lines:
<a href=""https://github.com/googlesamples/android-Camera2Basic/blob/master/Application/src/main/java/com/example/android/camera2basic/Camera2BasicFragment.java#L570-L574"" rel=""noreferrer"">https://github.com/googlesamples/android-Camera2Basic/blob/master/Application/src/main/java/com/example/android/camera2basic/Camera2BasicFragment.java#L570-L574</a></p>

<p>that the previewRequest builder only add surface, which is the TextureView to show, as target. But the following line actually add both as the targets. As I understand, this should not fire the ""OnImageAvailable"" Lisenter during preview, no? So why this add the imagereader's surface here?</p>

<p>I tried to removed this imagereader's surface here but got error when I really want to capture an image.....</p>

<p>SOOO CONFUSING!!!</p>
",969986,,,,,2015-08-21 7:13:11,Android Camera2 Basics API,<android><android-camera>,1,1,1,,
Android,32153945,1,32169591,885,8/23/2015 17:44:25,1,,8/22/2015 8:16:50,,1,614,"<p>I get the android example <code>android-NetworkConnect</code>, and I can build it within <code>Android-Studio-1.3</code>.</p>

<p>Then I want to build it with <strong>gradle</strong> command line, however I got a failed result.</p>

<pre><code>/// get the example code
https://github.com/googlesamples/android-NetworkConnect

/// setting gradle
export GRADLE_HOME=/opt/gradle/gradle-2.2.1
export PATH=${PATH}:$GRADLE_HOME/bin

/// building failed
android-NetworkConnect-master $ gradle build

FAILURE: Build failed with an exception.

* What went wrong:
A problem occurred configuring project ':Application'.
&gt; Could not resolve all dependencies for configuration ':Application:classpath'.
   &gt; Could not resolve com.android.tools.build:gradle:1.2.3.
     Required by:
         android-NetworkConnect-master:Application:unspecified
      &gt; Could not GET 'https://jcenter.bintray.com/com/android/tools/build/gradle/1.2.3/gradle-1.2.3.pom'.
         &gt; jcenter.bintray.com

* Try:
Run with --stacktrace option to get the stack trace. Run with --info or --debug option to get more log output.

BUILD FAILED

Total time: 3.771 secs

/// build.gradle
android-NetworkConnect-master $ cat build.gradle 
allprojects {
    repositories {
        jcenter()
    }
 }
</code></pre>
",1570557,,4601170,,2015-08-25 13:23:46,2015-08-25 13:23:46,I failed to use gradle command line to build the android example code,<android-studio><command-line><gradle>,2,3,,,
Android,32142463,1,32273525,886,8/28/2015 14:34:59,7,,8/21/2015 14:08:34,,10,4336,"<p>This is first time I am using espresso intents, I followed <a href=""https://github.com/googlesamples/android-testing/tree/master/ui/espresso/IntentsBasicSample"" rel=""noreferrer"">IntentsBasicSamle</a> provided in the android-testing project but no solved.</p>

<p>In my app I have a activity where user selects multiple images and then returned images are shown in the gridview, Now by using the espresso intents I want to mock this without going to actual image picker and return some specified images everytime.</p>

<p>No error but still opens the image chooser window when I run the test. I feel I am doing it wrong but I am not getting how it works. </p>

<p>I am testing using apk.</p>

<p>This is how photo picker is called</p>

<p><strong>App code</strong></p>

<p>This is how I am calling select images Intent and result is handled in onActivityResult.</p>

<pre><code>if (ApiUtils.checkApiLevel(18)) {
        //API18+
        intent.putExtra(Intent.EXTRA_ALLOW_MULTIPLE, true);
    }
    intent.setAction(Intent.ACTION_GET_CONTENT);
    startActivityForResult(Intent.createChooser(intent,      getActivity().getString(R.string.fragment_image_selection_select_picture)), 1);
</code></pre>

<p><strong>Testing Code</strong></p>

<pre><code>@RunWith(AndroidJUnit4.class)
@LargeTest
public class ImagesTests {

private static final String LAUNCHER_ACTIVITY_FULL_CLASSNAME = ""com.company.recorder.RecorderActivity"";
private static Class&lt;? extends Activity&gt; activityClass;
private ServiceValidatorIdlingResource serviceValidatorIdlingResource;

static {
    try {
        activityClass = (Class&lt;? extends Activity&gt;) Class.forName(LAUNCHER_ACTIVITY_FULL_CLASSNAME);
    } catch (ClassNotFoundException e) {
        throw new RuntimeException(e);
    }
}

/**
 * Change espresso default view idling time
 * so that test can wait for long time
 */
@Before
public void registerWaitService() {
    EspressoSolo.setIdlingResourceTimeout(30);

    Instrumentation.ActivityResult result = createImageCaptureActivityResultStub();

    // Stub the Intent.
    intending(hasAction(Intent.ACTION_GET_CONTENT)).respondWith(result);

   //For API 18 and above
    intending(hasAction(Intent.EXTRA_ALLOW_MULTIPLE)).respondWith(result);

    //intending(not(isInternal())).respondWith(result);
}

private Instrumentation.ActivityResult createImageCaptureActivityResultStub() {
    // Put the drawable in a bundle.
    Bundle bundle = new Bundle();
    Uri imageUri = Uri.parse(ContentResolver.SCHEME_ANDROID_RESOURCE + ""://"" +
            InstrumentationRegistry.getTargetContext().getPackageName()+ '/' +
            InstrumentationRegistry.getTargetContext().getResources().getResourceTypeName(R.drawable.abc_ic_menu_copy_mtrl_am_alpha) + '/' +
            InstrumentationRegistry.getTargetContext().getResources().getResourceEntryName(R.drawable.abc_ic_menu_copy_mtrl_am_alpha) );

    Parcelable parcelable = (Parcelable)imageUri;

    ArrayList&lt;Parcelable&gt; parcels = new ArrayList&lt;&gt;();
    parcels.add(parcelable);

    bundle.putParcelableArrayList(Intent.EXTRA_STREAM, parcels);

    // Create the Intent that will include the bundle.
    Intent resultData = new Intent();
    resultData.putExtras(bundle);

    // Create the ActivityResult with the Intent.
    return new Instrumentation.ActivityResult(Activity.RESULT_OK, resultData);
}

@Rule
public IntentsTestRule&lt;?&gt; mIntentsRule = new IntentsTestRule&lt;&gt;(
        activityClass);


/**
 * In this test images are taken during the recording
 * add the images taken during the recording through add photos card
 * displayed after recording is stopped.
 *
 * @throws Exception
 */
@Test
public void testAddImagesFromPhotosCard() throws Exception {

    onView(withId(Recorder.getId(""recorderpage_record""))).perform(click());

    Log.d(""called"", ""other package"");
    IdlingResource idlingResource0 = new RecordingWaitIdlingResource(5000);
    Espresso.registerIdlingResources(idlingResource0);

    Log.d(""called"", ""other package"");
    onView(withId(Recorder.getId(""card_topText""))).perform(click());
    Espresso.unregisterIdlingResources(idlingResource0);
    onView(withId(Recorder.getId(""recorderpage_stop""))).perform(click());
    //Log.d(""called"", ""other package"");
    IdlingResource idlingResource2 = new RecordingWaitIdlingResource(2000);
    Espresso.registerIdlingResources(idlingResource2);
    onView(withId(Recorder.getId(""recorderpage_statustext"")))
            .perform(click());
    Espresso.unregisterIdlingResources(idlingResource2);

    onView(withId(Recorder.getId(""pager""))).perform(swipeLeft());

    onData(allOf()).onChildView(withId(Recorder.getId(""recordsOverflow""))).
            atPosition(0).perform(click());

    IdlingResource idlingResource3 = new RecordingWaitIdlingResource(2000);
    Espresso.registerIdlingResources(idlingResource3);
    onData(allOf()).onChildView(withId(Recorder.getId(""recordsOverflow""))).
            atPosition(0).perform(click());
    Espresso.unregisterIdlingResources(idlingResource3);
    onView(withText(""Add an image"")).perform(click());

    Instrumentation.ActivityResult result = createImageCaptureActivityResultStub();
    intending(toPackage(""com.android.documentsui"")).respondWith(result);

     /* I actually dont know which preinstalled app is opened by intent, I saw this com.android.documentsui, also tried with photos and gallery package names */

    intending(toPackage(""com.android.documentsui.DocumentsActivity"")).respondWith(result);

    intending(hasAction(Intent.ACTION_GET_CONTENT)).respondWith(result);

    //Now click on add images
    onView(withId(Recorder.getId(""menu_fragment_imagewizard_selection_add""))).perform(click());

    //Just waits for 2seconds
    IdlingResource idlingResource4 = new RecordingWaitIdlingResource(2000);
    Espresso.registerIdlingResources(idlingResource4);
    onView(withText(""Add images"")).perform(click());
    Espresso.unregisterIdlingResources(idlingResource4);

}
}
</code></pre>
",2765160,,2765160,,2015-08-24 10:00:43,2017-03-10 11:30:40,How to stub select images intent using Espresso intents?,<java><android><android-intent><android-testing><android-espresso>,2,0,2,,
Android,32295158,1,32299031,887,8/30/2015 17:00:02,0,,8/30/2015 9:38:24,,4,2634,"<p>As Android Studio 1.3 coming with NDK support, I tried to convert my Gradle scripts (build.gradle app/build.gradle and gradle-wrapper.properties) following this link <a href=""http://tools.android.com/tech-docs/new-build-system/gradle-experimental"" rel=""nofollow"">http://tools.android.com/tech-docs/new-build-system/gradle-experimental</a>.</p>

<p>However, I cannot find any guidance about <strong>lintOptions</strong> from both the tutorial as well as ndk example repository <a href=""https://github.com/googlesamples/android-ndk"" rel=""nofollow"">https://github.com/googlesamples/android-ndk</a></p>

<p>My app/build.gradle</p>

<pre><code>apply plugin: 'com.android.model.application'

model {
    android {
        compileSdkVersion = 21
        buildToolsVersion = ""21.1.2""

        defaultConfig.with {
            applicationId = ""com.abc.xyz""
            minSdkVersion.apiLevel = 9
            targetSdkVersion.apiLevel = 21
        }

        compileOptions.with {
            sourceCompatibility=JavaVersion.VERSION_1_7
            targetCompatibility=JavaVersion.VERSION_1_7
        }

        lintOptions {       // &lt;-- this block
            checkReleaseBuilds false
        }
    }

        android.buildTypes {
        release {
            minifyEnabled = true
        }
    }
}
</code></pre>

<p>The sync failed with log: Error:Cause: com.android.build.gradle.managed.AndroidConfig_Impl</p>

<p>If I remove the <strong>lintOptions</strong> block, it seems to sync OK but build fails later.</p>
",3850054,,2016562,,2015-10-05 20:50:31,2015-12-08 16:24:00,lintOptions for experimental Gradle build tool in Android Studio 1.3,<android><android-studio><android-gradle><build.gradle><gradle-experimental>,2,0,2,,
Android,32310523,1,32312074,888,8/31/2015 13:08:49,0,,8/31/2015 11:47:18,,3,4462,"<p>I have just updated my Android Studio setup to 1.3 (latest stable as of 31st of August 2015) and I need to use the latest NDK integration. My previous Android Studio version was 1.2.1 (stable as well).</p>

<p>Following <a href=""http://tools.android.com/tech-docs/new-build-system/gradle-experimental"" rel=""nofollow"">Google Migration to Gradle Experimental Guide</a> I managed to easily adapt my various gradle scripts.</p>

<p>However, Gradle Sync fails with the following error :</p>

<pre><code>Error:No such property: android for class: com.android.build.gradle.managed.ProductFlavor
</code></pre>

<p><strong>[Update 1 -> see below, error updated]</strong></p>

<p>When I attempt to <code>Make</code> the project, I obtain a little more detailed error :</p>

<pre><code>Error:(17, 1) A problem occurred configuring project ':app'.
&gt; Exception thrown while executing model rule: model.android
   &gt; No such property: android for class: com.android.build.gradle.managed.ProductFlavor
</code></pre>

<p>App refers to the main application code (with activities and other).</p>

<p>Using the feature <code>F4 &gt; Jumping to Source</code>, it opens my <code>build.gradle</code> script from my <code>app</code> project.</p>

<p>This is the content of the aforementioned script :</p>

<pre><code>apply plugin: 'com.android.model.application' // experimental

model {
    android {
        compileSdkVersion = 21
        buildToolsVersion = '22.0.1'

        defaultConfig.with {
            applicationId = ""company.com.myapplication""
            minSdkVersion.apiLevel = 10
            targetSdkVersion.apiLevel = 21
            versionCode = 1
            versionName = ""1.0""

            // NDK
            android.ndk {
                moduleName = ""MyAwesomeJNILib""
                cFlags ""-std=c99""
            }
        }
        android.buildTypes {
            release {
                minifyEnabled = false
                proguardFiles += file('proguard-rules.pro')
            }
        }
        android.productFlavors {
            // for detailed abiFilter descriptions, refer to ""Supported ABIs"" @
            // https://developer.android.com/ndk/guides/abis.html#sa
            create(""arm"") {
                ndk.abiFilters += ""armeabi""
            }
            create(""arm7"") {
                ndk.abiFilters += ""armeabi-v7a""
            }
            create(""arm8"") {
                ndk.abiFilters += ""arm64-v8a""
            }
            create(""x86"") {
                ndk.abiFilters += ""x86""
            }
            create(""x86-64"") {
                ndk.abiFilters += ""x86_64""
            }
            create(""mips"") {
                ndk.abiFilters += ""mips""
            }
            create(""mips-64"") {
                ndk.abiFilters += ""mips64""
            }
            // To include all cpu architectures, leaves abiFilters empty
            create(""all"")
        }

        packagingOptions {
            exclude 'LICENSE.txt'
        }
    }
}

dependencies {
    compile fileTree(include: ['*.jar'], dir: 'libs')
    compile 'com.android.support:appcompat-v7:22.2.0'
    compile 'com.google.code.gson:gson:2.3.1'
    compile 'com.squareup.okhttp:okhttp-android-support:2.4.0'
    compile project(':bluetoothmanager')
    compile 'joda-time:joda-time:2.8.1'
    // Units Testing
    //androidTestCompile 'junit:junit:4.12'
    compile 'junit:junit:4.12' // experimental
}
</code></pre>

<p>As you can see, there is nothing very fancy here.
But you might notice there is some unit testing setup : </p>

<pre><code>// Units Testing
//androidTestCompile 'junit:junit:4.12'
compile 'junit:junit:4.12' // experimental
</code></pre>

<p><code>androidTestCompile</code> could not be resolved while migrating to <strong>GradleExperimental</strong> so I modified following a solution I can no longer find (sorry) where I would simple put <code>compile</code> in stead of <code>androidTestCompile</code>.
This was the error : </p>

<pre><code>Error:(71, 0) Gradle DSL method not found: 'androidTestCompile()'
</code></pre>

<p>I tried to compare one of Google's NDK sample (<code>hello-jini</code> for example) as provided in the aforemention guide and <a href=""https://github.com/googlesamples/android-ndk"" rel=""nofollow"">available here</a>.</p>

<p>Except the <code>packagingOptions</code> I could not find any differences that would be responsible for my awry. I tried to remove <code>packagingOptions</code> but that did not make a single change at all.</p>

<p><strong>[UPDATE 1]</strong></p>

<p>You will notice that the more detailed error message states that it's in line #17 which is where I declare my <strong>native build settings</strong>.
I fixed the error which was <code>cFlags</code> must be changed to <code>CFlags</code> and I added the <code>=</code> as required by the new version of Gradle.
This did help, the error does not appear anymore but changed for : </p>

<pre><code>Error:No such property: android for class: com.android.build.gradle.managed.AndroidConfig
</code></pre>
",3535408,,2016562,,2015-10-05 20:52:23,2016-08-19 11:13:45,Issue when migrating to Gradle Experimental 2.5 : no such method AndroidConfig,<android><android-studio><gradle><android-ndk><gradle-experimental>,1,0,1,,
Android,32603382,1,32618529,889,9/16/2015 20:56:44,0,,9/16/2015 8:28:59,,3,1556,"<p>I am trying to run <a href=""https://code.google.com/p/android-test-kit/"" rel=""nofollow"">Espresso</a> tests for an Android app. It works fine on a hardware device. When I run it on a freshly created <strong>AVD emulator</strong> it <strong>fails</strong> as shown here:</p>

<pre><code>:ExampleApp:connectedDebugAndroidTest

com.example.MainFragmentTest &gt; initializationError[Nexus_5_API_19(AVD) - 4.4.2] 
FAILED 
    java.lang.NoClassDefFoundError: com/example/MainActivity
    at java.lang.Class.getDeclaredFields(Native Method)
:ExampleApp:connectedDebugAndroidTest FAILED

FAILURE: Build failed with an exception.

* What went wrong:
Execution failed for task ':ExampleApp:connectedDebugAndroidTest'.
&gt; There were failing tests. See the report at: 
file:///home/user/work/ExampleApp/build/reports/androidTests/connected/index.html
</code></pre>

<p>The HTML report contains the following stacktrace:</p>

<pre><code>java.lang.NoClassDefFoundError: com/example/MainActivity
at java.lang.Class.getDeclaredFields(Native Method)
at java.lang.Class.getDeclaredFields(Class.java:610)
at org.junit.runners.model.TestClass.getSortedDeclaredFields(TestClass.java:77)
at org.junit.runners.model.TestClass.scanAnnotatedMembers(TestClass.java:70)
at org.junit.runners.model.TestClass.&lt;init&gt;(TestClass.java:57)
at org.junit.runners.ParentRunner.createTestClass(ParentRunner.java:88)
at org.junit.runners.ParentRunner.&lt;init&gt;(ParentRunner.java:83)
at org.junit.runners.BlockJUnit4ClassRunner.&lt;init&gt;(BlockJUnit4ClassRunner.java:65)
at android.support.test.internal.runner.junit4.AndroidJUnit4ClassRunner.&lt;init&gt;(AndroidJUnit4ClassRunner.java:38)
at android.support.test.runner.AndroidJUnit4.&lt;init&gt;(AndroidJUnit4.java:36)
at java.lang.reflect.Constructor.constructNative(Native Method)
at java.lang.reflect.Constructor.newInstance(Constructor.java:423)
at android.support.test.internal.runner.junit4.AndroidAnnotatedBuilder.buildAndroidRunner(AndroidAnnotatedBuilder.java:57)
at android.support.test.internal.runner.junit4.AndroidAnnotatedBuilder.runnerForClass(AndroidAnnotatedBuilder.java:45)
at org.junit.runners.model.RunnerBuilder.safeRunnerForClass(RunnerBuilder.java:59)
at org.junit.internal.builders.AllDefaultPossibilitiesBuilder.runnerForClass(AllDefaultPossibilitiesBuilder.java:26)
at org.junit.runner.Computer.getRunner(Computer.java:40)
at org.junit.runner.Computer$1.runnerForClass(Computer.java:31)
at org.junit.runners.model.RunnerBuilder.safeRunnerForClass(RunnerBuilder.java:59)
at org.junit.runners.model.RunnerBuilder.runners(RunnerBuilder.java:101)
at org.junit.runners.model.RunnerBuilder.runners(RunnerBuilder.java:87)
at org.junit.runners.Suite.&lt;init&gt;(Suite.java:81)
at org.junit.runner.Computer.getSuite(Computer.java:28)
at android.support.test.internal.runner.TestRequestBuilder.classes(TestRequestBuilder.java:701)
at android.support.test.internal.runner.TestRequestBuilder.build(TestRequestBuilder.java:664)
at android.support.test.runner.AndroidJUnitRunner.buildRequest(AndroidJUnitRunner.java:329)
at android.support.test.runner.AndroidJUnitRunner.onStart(AndroidJUnitRunner.java:226)
at android.app.Instrumentation$InstrumentationThread.run(Instrumentation.java:1701)

Caused by: java.lang.ClassNotFoundException: Didn't find class 
  ""com.example.MainActivity"" on path: DexPathList[[zip file 
  ""/system/framework/android.test.runner.jar"", zip file 
  ""/data/app/com.example.debug.test-1.apk"", zip file 
  ""/data/app/com.example.debug-1.apk""],
  nativeLibraryDirectories=[/data/app-lib/com.example.debug.test-1, 
  /data/app-lib/com.example.debug-1, /vendor/lib, /system/lib]]
at dalvik.system.BaseDexClassLoader.findClass(BaseDexClassLoader.java:56)
at java.lang.ClassLoader.loadClass(ClassLoader.java:497)
at java.lang.ClassLoader.loadClass(ClassLoader.java:457)
... 28 more
</code></pre>

<p>I am basically following the structure in <a href=""https://github.com/googlesamples/android-testing/blob/master/ui/espresso/BasicSample/app/src/androidTest/java/com/example/android/testing/espresso/BasicSample/ChangeTextBehaviorTest.java"" rel=""nofollow"">espresso/BasicSample/ChangeTextBehaviorTest.java</a>. This test <strong>works</strong> on the emulator!</p>

<p>For my test I could boil it down that running the test already <strong>fails</strong> when I just use the following code:</p>

<pre><code>@RunWith(AndroidJUnit4.class)
public class MainFragmentTest {

    @Rule
    public ActivityTestRule&lt;MainActivity&gt; mActivityRule = 
        new ActivityTestRule&lt;&gt;(MainActivity.class);    
}
</code></pre>

<p>Here is the complete test class:</p>

<pre><code>import org.junit.Before;
import org.junit.Rule;
import org.junit.Test;
import org.junit.runner.RunWith;

import android.support.test.rule.ActivityTestRule;
import android.support.test.runner.AndroidJUnit4;

import com.example.R;

import static android.support.test.espresso.Espresso.onView;
import static android.support.test.espresso.assertion.ViewAssertions.matches;
import static android.support.test.espresso.matcher.ViewMatchers.withId;
import static android.support.test.espresso.matcher.ViewMatchers.withText;

@RunWith(AndroidJUnit4.class)
public class MainFragmentTest {

    @Rule
    public ActivityTestRule&lt;MainActivity&gt; mActivityRule = 
        new ActivityTestRule&lt;&gt;(MainActivity.class);

    MainActivity mMainActivity;

    MainFragment mMainFragment;

    @Before
    public void setUp() {
        mMainActivity = mActivityRule.getActivity();
        mMainFragment = (MainFragment) mMainActivity
                .getSupportFragmentManager()
                .findFragmentByTag(MainFragment.FRAGMENT_TAG);
    }

    @Test
    public void testHeadline() {
        onView(withId(R.id.headline)).check(matches(withText(R.string.headline)));
    }
}
</code></pre>

<p>I am currently using the following tool chain:</p>

<ul>
<li>com.android.tools.build:gradle:1.4.0-beta2</li>
<li>buildToolsVersion ""23.0.1""</li>
<li>compileSdkVersion 22</li>
<li>targetSdkVersion 22</li>
<li>Gradle wrapper 2.5</li>
<li>java version ""1.7.0_79"" OpenJDK</li>
</ul>
",356895,,356895,,2015-09-16 9:14:31,2015-11-27 8:36:58,NoClassDefFoundError when running Gradle connectedCheck on AVD emulator,<android><android-emulator><android-testing><android-espresso><avd>,3,0,2,,
Android,31987928,1,32661407,890,9/18/2015 21:36:25,36,,8/13/2015 12:13:20,,1,262,"<p>I am converting the starter Android sample Camera2Video example: <a href=""https://github.com/googlesamples/android-Camera2Video"" rel=""nofollow"">https://github.com/googlesamples/android-Camera2Video</a></p>

<p>When running the example by itself the rotation works well, and the controls are always visible. However when I embed the same code inside a Cordova plugin, the controls dissapear when rotated.</p>

<p>Here is the layout xml:</p>

<pre><code>&lt;RelativeLayout xmlns:android=""http://schemas.android.com/apk/res/android""
    android:layout_width=""match_parent""
    android:layout_height=""match_parent""&gt;

    &lt;com.example.android.camera2video.AutoFitTextureView
        android:id=""@+id/texture""
        android:layout_width=""wrap_content""
        android:layout_height=""wrap_content""
        android:layout_alignParentStart=""true""
        android:layout_alignParentTop=""true"" /&gt;

    &lt;FrameLayout
        android:layout_width=""match_parent""
        android:layout_height=""wrap_content""
        android:layout_alignParentBottom=""true""
        android:layout_alignParentStart=""true""
        android:layout_below=""@id/texture""
        android:background=""#4285f4""&gt;

        &lt;ImageButton
            android:id=""@+id/video""
            style=""@android:style/Widget.Material.Light.Button.Borderless""
            android:layout_width=""wrap_content""
            android:layout_height=""wrap_content""
            android:layout_gravity=""center""
            android:contentDescription=""Record""
            android:padding=""20dp""
            android:src=""@drawable/record"" /&gt;

        &lt;ImageButton
            android:id=""@+id/info""
            android:contentDescription=""Info""
            style=""@android:style/Widget.Material.Light.Button.Borderless""
            android:layout_width=""wrap_content""
            android:layout_height=""wrap_content""
            android:layout_gravity=""center_vertical|right""
            android:padding=""20dp""
            android:src=""@drawable/gallery"" /&gt;

    &lt;/FrameLayout&gt;

&lt;/RelativeLayout&gt;
</code></pre>

<p>And here is the layout-land xml file</p>

<pre><code>&lt;RelativeLayout xmlns:android=""http://schemas.android.com/apk/res/android""
    android:layout_width=""match_parent""
    android:layout_height=""match_parent""&gt;

    &lt;com.example.android.camera2video.AutoFitTextureView
        android:id=""@+id/texture""
        android:layout_width=""wrap_content""
        android:layout_height=""wrap_content""
        android:layout_alignParentBottom=""true""
        android:layout_alignParentStart=""true""
        android:layout_alignParentTop=""true"" /&gt;

    &lt;FrameLayout
        android:layout_width=""match_parent""
        android:layout_height=""wrap_content""
        android:layout_alignParentBottom=""true""
        android:layout_alignParentEnd=""true""
        android:layout_alignParentTop=""true""
        android:layout_below=""@id/texture""
        android:layout_toRightOf=""@id/texture""
        android:background=""#4285f4""
        android:orientation=""horizontal""&gt;

        &lt;ImageButton
            android:id=""@+id/video""
            style=""@android:style/Widget.Material.Light.Button.Borderless""
            android:layout_width=""wrap_content""
            android:layout_height=""wrap_content""
            android:layout_gravity=""center""
            android:contentDescription=""Record""
            android:padding=""20dp""
            android:src=""@drawable/record"" /&gt;

        &lt;ImageButton
            android:id=""@+id/info""
            style=""@android:style/Widget.Material.Light.Button.Borderless""
            android:layout_width=""wrap_content""
            android:layout_height=""wrap_content""
            android:layout_gravity=""center_horizontal|bottom""
            android:contentDescription=""Info""
            android:padding=""20dp""
            android:src=""@drawable/gallery"" /&gt;

    &lt;/FrameLayout&gt;

&lt;/RelativeLayout&gt;
</code></pre>

<p>Also there is code to detect the rotation.</p>

<p>I'm sure it's a simple fix, I just can't figure it out!</p>

<p>My full plugin code: <a href=""https://github.com/kmturley/cordova-plugin-media-custom"" rel=""nofollow"">https://github.com/kmturley/cordova-plugin-media-custom</a></p>
",2068766,,,,,2015-09-18 21:36:25,Android layout xml rotation orientation,<java><android><xml><cordova><layout>,1,0,,,
Android,33149700,1,33150597,891,10/15/2015 14:01:33,0,,10/15/2015 13:20:21,,5,2077,"<p>I'm trying to implement activity recognition so it will support api 23.
I've followed the running permissions guide from  here : </p>

<p><a href=""https://developer.android.com/guide/topics/security/permissions.html#normal-dangerous"" rel=""nofollow"">https://developer.android.com/guide/topics/security/permissions.html#normal-dangerous</a></p>

<p>And i cant find if activity recognition is classified as dangerous permission or normal?</p>

<p>Even in google's activity recognition sample they dont target api 23 : <a href=""https://github.com/googlesamples/android-play-location/tree/master/ActivityRecognition"" rel=""nofollow"">https://github.com/googlesamples/android-play-location/tree/master/ActivityRecognition</a></p>

<p>is it possible that activity recoognition is not supported in android 6.0?</p>
",4227647,,2401535,,2015-10-22 10:20:43,2015-10-22 10:20:43,Activity Recognition Running permissions in android 6.0,<android><android-permissions><android-6.0-marshmallow><activity-recognition>,2,6,,,
Android,33220233,1,33220286,892,10/19/2015 17:19:04,0,,10/19/2015 17:16:05,,17,12352,"<p>I've just pasted this <a href=""https://github.com/googlesamples/android-Camera2Basic/blob/master/Application/src/main/java/com/example/android/camera2basic/Camera2BasicFragment.java"">file</a> in a new project, but I'm getting:</p>

<blockquote>
  <p>Cannot resolve symbol FragmentCompat;</p>
</blockquote>

<p>any help?</p>
",248959,,,,,2018-04-27 14:04:32,Cannot resolve symbol FragmentCompat,<android>,2,0,4,,
Android,33039188,1,33253587,893,10/21/2015 7:40:55,12,,10/9/2015 13:11:21,,18,7040,"<p>I'm studying the new permission model of Android Marshmallow but I'm facing an issue I find odd.</p>

<p>An app with <code>targetSdkVersion</code> 22 (so not yet using the new permission model of Android Marshmallow) declares the <code>READ_CONTACTS</code> permission in the manifest:</p>

<pre><code>&lt;uses-permission android:name=""android.permission.READ_CONTACTS"" /&gt;
</code></pre>

<p>and tries to read the phone number of a contact via <code>Intent.ACTION_PICK</code>:</p>

<pre><code>Intent intent = new Intent(Intent.ACTION_PICK);
intent.setType(ContactsContract.CommonDataKinds.Phone.CONTENT_TYPE);
startActivityForResult(intent, PICK_CONTACT_REQUEST);
</code></pre>

<p>When running on a device with Marshmallow MRA58K, after I revoke the permission after installing the app via ADB, the <code>ContextCompat.checkSelfPermission()</code> method still returns <code>PERMISSION_GRANTED</code>, but the operation fails later when accessing the contacts because a cursor with no records is returned. As I understood, this is the default ""retrocompatibility"" strategy to avoid legacy app to crash.</p>

<pre><code>@Override
protected void onActivityResult(int requestCode, int resultCode, Intent data) {
    if (requestCode == PICK_CONTACT_REQUEST &amp;&amp; resultCode == Activity.RESULT_OK) {
        Log.i("""", ""Permission granted: "" + (ContextCompat.checkSelfPermission(this, Manifest.permission.READ_CONTACTS) == PackageManager.PERMISSION_GRANTED));
        Uri contactUri = data.getData();
        Cursor c = null;
        try {
            c = getContentResolver().query(contactUri, new String[]{ContactsContract.CommonDataKinds.Phone.NUMBER}, null, null, null);
            if (c != null &amp;&amp; c.moveToFirst()) {
                Log.i("""", ""got phone number: "" + c.getString(0));
            } else {
                Log.w("""", ""No data received"");
            }
        } catch (Exception e) {
            e.printStackTrace();
        } finally {
            if (c != null) {
                c.close();
            }
        }
    } else {
        super.onActivityResult(requestCode, resultCode, data);
    }
}
</code></pre>

<p>How can I safely detect if the user explicitly before the permission before attempting the operation?</p>

<p>I also tried the official Google sample at <a href=""https://github.com/googlesamples/android-RuntimePermissions"" rel=""noreferrer"">https://github.com/googlesamples/android-RuntimePermissions</a> setting the <code>targetSdkVersion</code> to 22 with the same result: it logs that the permission is granted even if the user revoked it, ant then the operation fails.</p>

<p>Thanks ;)</p>
",247095,,,,,2017-07-17 10:16:34,checkSelfPermission returning PERMISSION_GRANTED for revoked permission with targetSdkVersion <= 22,<android><android-6.0-marshmallow>,2,5,5,,
Android,33379534,1,33386364,894,10/28/2015 8:42:54,1,,10/27/2015 22:23:41,,27,8839,"<p><strong>Summary</strong></p>

<p>Finally, I found the related issue, <code>setForeground()</code> incorrectly flagged as requiring API 23 on ViewGroups extending <code>FrameLayout</code>.</p>

<p><a href=""https://code.google.com/p/android/issues/detail?id=189041"" rel=""noreferrer"">Issue 189041:  setForeground() incorrectly flagged as requiring API 23 (NewApi) for ViewGroups extending FrameLayout</a></p>

<p>If you are not extending <code>FrameLayout</code>, the documentation is wrong and API 23 is required.</p>

<p><a href=""https://code.google.com/p/android/issues/detail?id=186273"" rel=""noreferrer"">Issue 186273:  View.setForeground wrong API level</a></p>

<p><strong>Updated question</strong></p>

<p>Marked as <a href=""https://stackoverflow.com/a/33201753/1009132"">duplicated of Can't use <code>setForeground</code> method on ImageView</a> by Commonsware and answered by him:</p>

<blockquote>
  <p>That is a documentation bug. setForeground() existed on FrameLayout
  from API Level 1; it is only on View as of API Level 23.</p>
</blockquote>

<p>In my case the documentation bug is not detected by the inspection in the fork but does it in an integration project, I don't understand it, anyway, this answers my initial question.</p>

<p>But It's not the same case, this code is already extending a <code>Framelayout</code> and using this method, it's not an <code>ImageView</code>, so I suppose the method has been removed in API 23. It doesn't appear in the reference now.</p>

<p><strong>Update:</strong> I add a <a href=""https://developer.android.com/sdk/api_diff/23/changes.html"" rel=""noreferrer"">diff report</a> for FrameLayout:</p>

<p><a href=""https://i.stack.imgur.com/cRCUa.png"" rel=""noreferrer""><img src=""https://i.stack.imgur.com/cRCUa.png"" alt=""enter image description here""></a></p>

<p><strong>New question</strong></p>

<p>So my question changes to how to use the method in previous versions, and, why does appear the inspection error selectively?</p>

<p>If I add a redundant cast, the error message disappears:</p>

<pre><code>((FrameLayout) layout).getForeground()
</code></pre>

<p>But it's accessing the <code>View</code> method that is not supported now.</p>

<p>So I suppose targeting a previous API would remove the error message but I would appreciate a solution to use this Framelayout method or a clue to fix the issue in my case:</p>

<pre><code>ANDROID_COMPILE_SDK_VERSION=23
ANDROID_BUILD_TOOLS_VERSION=23.0.1
ANDROID_DEFAULT_MIN_SDK_VERSION=19
ANDROID_DEFAULT_TARGET_SDK_VERSION=23
</code></pre>

<p><strong>Workaround</strong> </p>

<p>In short, as a workaround, I changed the type to <code>FrameLayout</code> directly, so warnings about API and casting are gone, and I tested it works on Android 4.4.4 device and debugging, I thought it would crash, anyway it's only used in one animation, and I will fix/replace it in the future.</p>

<p><strong>Initial question</strong></p>

<p>I forked and customised the Google sample <a href=""https://github.com/googlesamples/android-topeka/blob/master/app/src/main/java/com/google/samples/apps/topeka/widget/quiz/AbsQuizView.java#L89"" rel=""noreferrer"">android-topeka</a>, and android-studio shows an error that I don't understand about the API level required to use the method <code>getForeground()</code> of the class <code>View</code> in <code>android.view</code> package:</p>

<blockquote>
  <p>Call requires API level 23 (current min is 19):
  android.view.View#getForeground</p>
</blockquote>

<p>The <a href=""http://developer.android.com/reference/android/view/View.html#getForeground()"" rel=""noreferrer"">reference</a> marks the method as added in API level 1, and the documentation (<code>Control+Q</code>) shows the same:</p>

<p><a href=""https://i.stack.imgur.com/YTaVn.png"" rel=""noreferrer""><img src=""https://i.stack.imgur.com/YTaVn.png"" alt=""Doc showing API level 1 method""></a></p>

<p>But the <code>Calling new methods on older versions inspection</code> shows an error that API level 23 is required:</p>

<p><a href=""https://i.stack.imgur.com/xrVqr.png"" rel=""noreferrer""><img src=""https://i.stack.imgur.com/xrVqr.png"" alt=""Error message about API 23 required""></a></p>

<p>I found a <a href=""https://stackoverflow.com/questions/16591672/android-studio-call-requires-api-level-16-error"">similar question</a>,  a bug in that case, but I think this is not a bug due to the original fork doesn't show this error message.</p>

<p>I'll try to detect the first time the message appears, but I did a lot of changes so any clue would be appreciated, thanks.</p>
",1009132,,1009132,,2018-01-09 17:27:45,2018-09-19 4:48:56,"Call requires API level 23' error, but getForeground() exists on FrameLayout from API 1",<java><android><android-studio><android-framelayout><android-api-levels>,1,0,2,,
Android,33391042,1,33391235,895,10/28/2015 12:34:38,0,,10/28/2015 12:26:26,,1,940,"<p>I have to give the user an option to capture video in my app but I not want the preview appear (or take a space) when the video is not recording.</p>

<p>Therefore I build a floating preview using <code>FragmentTransaction</code> based on <a href=""https://github.com/googlesamples/android-Camera2Video"" rel=""nofollow"">camera2video</a> google example.</p>

<p>my class variables are:</p>

<pre><code>FragmentTransaction fm = null;
Camera2VideoFragment camera2VideoFragment;
</code></pre>

<p>And I create an instance and initialize the camera in <code>OnCreate</code> method:</p>

<pre><code>camera2VideoFragment = Camera2VideoFragment.newInstance();
if (null == savedInstanceState) {
    fm = getFragmentManager().beginTransaction()
            .replace(R.id.container, camera2VideoFragment);
}
</code></pre>

<p>I want to visibile and hide the preview(fragment) using the menu methods (onOptionsItemSelected):</p>

<pre><code>case R.id.action_captureScreen:
    item.setChecked(!item.isChecked());
    if (item.isChecked())
    {
        fm.commit(); // show the preview - working
        // camera2VideoFragment.captureVideo();  // start capture video
    }
    else
    {
        //camera2VideoFragment.captureVideo();  // stop the video and save to file
        fm.detach(camera2VideoFragment);        // hide the preview - NOT WORKING
    }
</code></pre>

<p>I also tried <code>fm.hide(camera2VideoFragment)</code> but it's not works too.</p>

<p>So, the question is how can I hide\show the preview ?
Thanks!</p>
",1281081,,,,,2015-10-28 12:34:38,How to cancel FragmentTransaction commit,<android><fragment><fragmenttransaction>,1,0,,,
Android,33371331,1,33450716,896,10/31/2015 10:51:26,4,,10/27/2015 14:58:12,,5,6020,"<p>I have tried new Google Play Services feature - Barcode/QR scanner. In <a href=""https://github.com/googlesamples/android-vision"" rel=""noreferrer"">sample</a> application is scanning started by taping on button and result is returned also on tap.</p>

<p>Is there a way to change its behavior to return first detected barcode/QR immediately?</p>

<p>I am not the first one curious about <a href=""https://github.com/googlesamples/android-vision/issues/37"" rel=""noreferrer"">this</a>.</p>

<p>Thank you in advance.</p>
",1317571,,,,,2017-11-21 10:01:03,How to get detected barcode/QR automatically,<android><android-vision>,2,0,3,,
Android,33617074,1,33621066,897,11/10/2015 0:53:02,1,,11/9/2015 19:49:58,,1,1196,"<p>Does anyone know the syntax for defining flavor dimensions and variant filters using the experimental Gradle plugin? (This would include the syntax for assigning a flavor to a particular dimension inside each flavor's <code>create()</code> block.)</p>

<p>The <a href=""http://tools.android.com/tech-docs/new-build-system/gradle-experimental"" rel=""nofollow"">experimental plugin user guide</a> doesn't address any of this and I couldn't find any examples in the <a href=""https://github.com/googlesamples/android-ndk"" rel=""nofollow"">code samples</a>. I'm using plugin version 0.2.1 (<code>com.android.tools.build:gradle-experimental:0.2.1</code>). The syntax for the regular plugin clearly doesn't work at all.</p>

<p>Here's the original script, which defines product flavors for Google Play and for Amazon AppStore:</p>

<pre><code>apply plugin: 'com.android.model.application'

model {
    android {
        compileSdkVersion = 23
        buildToolsVersion = '23.0.1'

        defaultConfig.with {
            ... // normal stuff
        }
    }
    android.aaptOptions {
        noCompress = 'dict'
    }
    android.ndk {
        ... // normal stuff
    }
    android.compileOptions {
        sourceCompatibility = JavaVersion.VERSION_1_7
        targetCompatibility = JavaVersion.VERSION_1_7
    }
    android.buildTypes {
        release {
            minifyEnabled = true
            proguardFiles += file('proguard-rules.pro')
        }
    }
    android.productFlavors {
        create(""google"") {
        }
        create(""amazon"") {
        }
    }
}

dependencies {
    compile fileTree(include: ['*.jar'], dir: 'libs')
    compile 'com.android.support:support-v4:23.1.0'
    compile 'com.android.support:support-annotations:23.1.0'
}
</code></pre>

<p>Since this app uses native code, I want to add a dimension for different hardware platforms. Also, since the Amazon AppStore and Google Play have different models for supporting different hardware, I want to use variant filters to treat hardware platforms differently for the different markets.</p>

<p>I've <strike>stumbled about blindly in the dark</strike> tried a number of things to define flavor dimensions; <strong>these all generate errors</strong> when compiling the Gradle script.</p>

<p>I haven't tried creating variant filters yet, since I'm stuck at step 1, but absent guidance from someone ""in the know"", I expect equal (lack of) success.</p>

<p><strong>Attempt 1:</strong></p>

<pre><code>apply plugin: 'com.android.model.application'

model {
    android {
        ...

        defaultConfig.with {
            ...
            flavorDimensions = [""abi"", ""market""]
        }
    }
    ...
}
...
</code></pre>

<p>Error:</p>

<blockquote>
  <p>No such property: flavorDimensions for class: com.android.build.gradle.managed.ProductFlavor</p>
</blockquote>

<p><strong>Attempt 2:</strong></p>

<pre><code>apply plugin: 'com.android.model.application'

model {
    android {
        ...

        defaultConfig.with {
            ...
        }
        flavorDimensions = [""abi"", ""market""]
    }
    ...
}
...
</code></pre>

<p>Error:</p>

<blockquote>
  <p>No such property: flavorDimensions for class: com.android.build.gradle.managed.AndroidConfig</p>
</blockquote>

<p><strong>Attempt 3:</strong></p>

<pre><code>apply plugin: 'com.android.model.application'

model {
    android {
        ... // as in original script
    }
    android.flavorDimensions {
        create(""abi"") {}
        create(""market"") {}
    }
}
...
</code></pre>

<p>Error:</p>

<blockquote>
  <p>A problem occurred configuring project ':app'.  </p>
  
  <blockquote>
    <p>The following model rules are unbound: 
        model.android.flavorDimensions<br>
          Mutable:<br>
            - android.flavorDimensions (java.lang.Object)</p>
  </blockquote>
</blockquote>

<p><strong>Attempt 4:</strong></p>

<pre><code>apply plugin: 'com.android.model.application'

model {
    android {
        ...
    }
    android.flavorDimensions = [""abi"", ""market""]
}
</code></pre>

<p>Error:</p>

<blockquote>
  <p>No such property: flavorDimensions for class: org.gradle.model.dsl.internal.NonTransformedModelDslBacking</p>
</blockquote>
",535871,,,,,2015-11-10 19:25:13,Flavor dimensions and variant filters for experimental plugin?,<android><android-ndk><android-gradle><android-productflavors><gradle-experimental>,1,0,,,
Android,33654287,1,33702425,898,11/13/2015 21:56:58,2,,11/11/2015 15:45:13,,2,1241,"<p>Was looking through the camera2 video <a href=""https://github.com/googlesamples/android-Camera2Video"" rel=""nofollow"">sample app</a> published by Google and one of the methods goes as following:</p>

<pre><code>/**
 * In this sample, we choose a video size with 3x4 aspect ratio. Also, we don't use sizes
 * larger than 1080p, since MediaRecorder cannot handle such a high-resolution video.
 *
 * @param choices The list of available sizes
 * @return The video size
 */
private static Size chooseVideoSize(Size[] choices) {
    for (Size size : choices) {
        if (size.getWidth() == size.getHeight() * 4 / 3 &amp;&amp; size.getWidth() &lt;= 1080) {
            return size;
        }
    }
    Log.e(TAG, ""Couldn't find any suitable video size"");
    return choices[choices.length - 1];
}
</code></pre>

<p>I've fiddled with my own implementation of camera2 and attempted to record a 4K video with media recorder which worked fine - the recorded file reported dimensions of 3840â€†Ã—â€†2160. </p>

<p>So, is the comment in the sample incorrect or MediaRecorder was not capable of handling larger resolutions on Lollipop but is capable on Marshmallow or something else?</p>
",3361863,,294248,,2015-11-11 16:51:57,2017-10-24 7:36:44,Recording 4K with MediaRecorder,<android><android-camera><android-mediarecorder>,2,3,1,,
Android,33851794,1,33851850,899,11/22/2015 5:13:45,0,,11/22/2015 5:04:52,,12,1394,"<p>In Google's in-app billing Trivial Drive sample, a <code>BroadcastReceiver</code> is registered to listen for messages about updated purchases, after the IabHelper setup has successfully completed.  </p>

<p>The author however has included the following note:</p>

<blockquote>
  <p>Note: registering this listener in an Activity is a bad idea, but is done here 
  because this is a SAMPLE.</p>
</blockquote>

<p>Why is this a bad idea for this listener?</p>

<p>This comment can be found in the <code>OnIabSetupFinishedListener</code> definition in the <code>onCreate</code> method of <a href=""https://github.com/googlesamples/android-play-billing/blob/master/TrivialDrive/app/src/main/java/com/example/android/trivialdrivesample/MainActivity.java""><code>MainActivity</code></a> in the <a href=""https://github.com/googlesamples/android-play-billing/tree/master/TrivialDrive"">source code for the Trivial Drive sample</a></p>
",2598349,,,,,2016-07-21 6:02:09,Why is registering IabBroadcastReceiver in Activity a bad idea?,<android>,3,1,2,,
Android,33907279,1,33907417,900,11/25/2015 2:13:33,0,,11/25/2015 1:59:13,,2,1067,"<p>When I run the quick-start sample from: <a href=""https://github.com/googlesamples/android-credentials/"" rel=""nofollow"">https://github.com/googlesamples/android-credentials/</a></p>

<p>On a Nexus 6 running Marshmallow, the credentials are saved successfully.</p>

<p>However, on a Samsung Note 5 with Lollipop (5.1.1) I get:</p>

<pre><code>11-25 14:45:27.581 11428-11428/com.google.example.credentialsbasic D/MainActivity: Save Failed:Status{statusCode=No eligible accounts on this device for the credentials API., resolution=null}
</code></pre>

<p>According to Google Smart Lock for Password is on by default, and I cannot find the setting for it in Samsung settings. Does this mean that Samsung phones don't support Smart Lock for Passwords? Is this a feature that will really only work on Nexuses?</p>

<p>I cannot find any documentation on this in terms of device support or the error message I provided.</p>
",1481500,,5001016,,2016-01-16 22:47:47,2016-01-16 22:47:47,"Smart Lock for Passwords not working on certain phones, error message ""No eligible accounts on this device""",<android><google-play-services><google-smartlockpasswords>,1,0,,,
Android,33763874,1,33923113,901,11/25/2015 17:41:51,8,,11/17/2015 17:59:35,,8,1677,"<p>I'm testing Nearby connection API with the sample application available here: <a href=""https://github.com/googlesamples/android-nearby"">https://github.com/googlesamples/android-nearby</a>
It seems that this is not working for some devices. I successfully connected Samsung Galaxy S3 with Nexus 7, in both directions (S3 as host, N7 as slave and vice versa). However, when I try to connect Samusung Galaxy S3 to Nexus 5, the connection ALWAYS fails, with status code 8005. </p>

<p>Below you can see the method invoked by slave (discovering device) in order to connect to host (advertising device).</p>

<pre><code>private void connectTo(String endpointId, final String endpointName) {
    debugLog(""connectTo:"" + endpointId + "":"" + endpointName);

    // Send a connection request to a remote endpoint. By passing 'null' for the name,
    // the Nearby Connections API will construct a default name based on device model
    // such as 'LGE Nexus 5'.
    String myName = null;
    byte[] myPayload = null;
    Nearby.Connections.sendConnectionRequest(mGoogleApiClient, myName, endpointId, myPayload,
            new Connections.ConnectionResponseCallback() {
                @Override
                public void onConnectionResponse(String endpointId, Status status,
                                                 byte[] bytes) {
                    Log.d(TAG, ""onConnectionResponse:"" + endpointId + "":"" + status);
                    if (status.isSuccess()) {
                        debugLog(""onConnectionResponse: "" + endpointName + "" SUCCESS"");
                        Toast.makeText(MainActivity.this, ""Connected to "" + endpointName,
                                Toast.LENGTH_SHORT).show();

                        mOtherEndpointId = endpointId;
                        updateViewVisibility(STATE_CONNECTED);
                    } else {
                        debugLog(""onConnectionResponse: "" + endpointName + "" FAILURE. ResponseCode="" + status.getStatusCode() + "" statusMessage="" + status.getStatusMessage() );
                    }
                }
            }, this);
}
</code></pre>

<p>The result I always get is :<br>
11-17 18:48:50.678 11133-11133/com.google.example.connectionsquickstart D/MainActivity: onConnectionResponse: Samsung GT-I9300 FAILURE. ResponseCode=8005 statusMessage=null</p>

<p>Any clue what is going on?</p>
",229697,,,,,2015-11-25 17:55:35,Nearby connection API for Android - not working for some devices,<android><google-nearby>,2,0,2,,
Android,34017544,1,34018457,902,12/1/2015 10:46:38,0,,12/1/2015 10:01:14,,1,3741,"<p>I have problems to get the example apps for Google Fit running provided by Google. </p>

<p>I figured out so far, that the <code>resultCode</code> I get in <code>onActivityResult</code> is <code>0</code> after I selected an <code>Account</code>.</p>

<p>The example app I use at the moment is <code>BasicRecordingApi</code>, which can be found <a href=""https://github.com/googlesamples/android-fit/tree/master/BasicRecordingApi"" rel=""nofollow"">here</a>.
But I've tried the others too.</p>

<p>I created an API key for the app and I enabled Google Fit API already.</p>

<p>Nothing helps.</p>

<p>Any ideas?</p>
",4548007,,2396432,,2015-12-01 10:20:18,2016-12-09 4:51:11,Android Google Fit example is not working,<android><google-fit><google-fit-sdk>,1,0,1,,
Android,34169251,1,34169844,903,12/9/2015 2:38:46,0,,12/9/2015 1:32:26,,1,749,"<p>Why hardcode instead of doing something like in this <a href=""https://stackoverflow.com/questions/5088474/how-can-i-get-the-uuid-of-my-android-phone-in-an-application"">SO post</a>? And what is supposed to be the difference between the secure and insecure uuid?
<br> Heres a <a href=""https://github.com/googlesamples/android-BluetoothChat/blob/master/Application/src/main/java/com/example/android/bluetoothchat/BluetoothChatService.java#L49-L53"" rel=""nofollow noreferrer"">link</a> to the BluetoothService class in which the code below resides.</p>

<pre><code>// Unique UUID for this application
    private static final UUID MY_UUID_SECURE =
            UUID.fromString(""fa87c0d0-afac-11de-8a39-0800200c9a66"");
    private static final UUID MY_UUID_INSECURE =
            UUID.fromString(""8ce255c0-200a-11e0-ac64-0800200c9a66"");
</code></pre>
",4885784,,-1,,2017-05-23 12:07:33,2017-11-13 8:57:33,Why is a hardcoded UUID used in the Android Sample BluetoothChat application?,<android><bluetooth><uuid>,1,0,,,
Android,34170159,1,34170187,904,12/9/2015 3:19:44,0,,12/9/2015 3:16:25,,1,731,"<p>Im learning from Android's <a href=""https://github.com/googlesamples/android-BluetoothChat/"" rel=""nofollow"">BluetoothChat sample app</a> and noticed that they are using a Handler to send updates to the UI as seen <a href=""https://github.com/googlesamples/android-BluetoothChat/blob/master/Application/src/main/java/com/example/android/bluetoothchat/BluetoothChatService.java#L470-L492"" rel=""nofollow"">here</a> . I was wondering why they wouldn't prefer to use a callback/listener to send updates to UI?</p>
",4885784,,,,,2015-12-09 4:55:57,Using a callback vs using Handler in Android?,<java><android><callback><listener><handler>,2,0,,,
Android,34476043,1,34503320,905,12/29/2015 1:47:35,3,,12/26/2015 22:58:02,,14,1132,"<p>I am trying to implement the Google's Fingerprint API in my app (in my Fragment specifically). Google has given an example but it's implemented inside an Activity <a href=""https://github.com/googlesamples/android-FingerprintDialog/blob/master/Application/src/main/java/com/example/android/fingerprintdialog/MainActivity.java"" rel=""noreferrer""><strong>here</strong></a>.</p>

<p>My specific question is that the code below to check if there are enrolled fingerprints already, it is giving me an error (screenshot below):</p>

<p><strong>Question</strong> --> What change do I need to do to make it work in my Fragment (as opposed to an activity like Google has)?</p>

<pre><code>if (!mFingerprintManager.hasEnrolledFingerprints()) {
        purchaseButton.setEnabled(false);
        // This happens when no fingerprints are registered.
        Toast.makeText(getActivity(),
                ""Go to 'Settings -&gt; Security -&gt; Fingerprint' and register at least one fingerprint"",
                Toast.LENGTH_LONG).show();
        return;
    }
</code></pre>

<p><a href=""https://i.stack.imgur.com/5k9s2.png"" rel=""noreferrer""><img src=""https://i.stack.imgur.com/5k9s2.png"" alt=""enter image description here""></a></p>
",1406716,,,,,2015-12-29 2:08:30,Why is `hasEnrolledFingerprints` giving error that it requires a permission only in my Fragment but not in the Activity in Google's Example?,<android><android-fragments><android-6.0-marshmallow><android-fingerprint-api>,1,0,,,
Android,34545676,1,34579698,906,1/3/2016 17:58:01,3,,12/31/2015 11:19:16,,3,1065,"<p>I've been busy updating the <a href=""https://github.com/googlesamples/android-UniversalMusicPlayer"" rel=""nofollow noreferrer"">universal Android Mediaplayer</a> to use the Compat libraries to get it working on Android versions lower than lollipop. </p>

<p>This was a process of replacing most classes by the compat variants of them. You can see the commit with all my changes <a href=""https://github.com/Marc1510/android-UniversalMusicPlayer/commit/3626d74a3013f17d779940a2235e9130b36ec637"" rel=""nofollow noreferrer"">here</a>.</p>

<p>The thing I don't like right now is that the 'browse' function has dissapeard on the Wear device. This function can be seen in the images below.</p>

<p><a href=""https://i.stack.imgur.com/SGwQO.png"" rel=""nofollow noreferrer""><img src=""https://i.stack.imgur.com/SGwQO.png"" alt=""enter image description here""></a> <a href=""https://i.stack.imgur.com/KseZi.png"" rel=""nofollow noreferrer""><img src=""https://i.stack.imgur.com/KseZi.png"" alt=""enter image description here""></a></p>

<p>I just made screenshots of this function with the latest version of the Universal Music Player. When I updated the most classes to their compat variants this function dissapeard. </p>

<p>I don't know if I forgot to update something, if the function should be activated somehow or any other reason why it doesn't work.</p>

<p>Is there any reason for this?</p>
",1887795,,,,,2016-03-03 22:49:19,Updating MediaBrowserService to MediaBrowserServiceCompat removes 'browse' function,<android><android-mediaplayer><android-support-library><appcompat><android-wear-notification>,1,0,1,,
Android,34627394,1,34646908,907,1/7/2016 3:29:34,1,,1/6/2016 7:00:42,,1,1750,"<p>I'm currently using Android Studio 2.0 preview 4. I have followed the guide from <a href=""http://tools.android.com/tech-docs/new-build-system/gradle-experimental"" rel=""nofollow noreferrer"">tools.android.com</a> and tested <a href=""https://github.com/googlesamples/android-ndk"" rel=""nofollow noreferrer"">NDK samples</a> from github. The samples worked without a hitch, but when I implemented it on the SIPdroid project, it throws this error when I rebuild the project: </p>

<blockquote>
  <p>Error:(78, 1) A problem occurred configuring project ':app'.
  Exception thrown while executing model rule: model.android
  Cannot set readonly property: minSdkVersion for class: com.android.build.gradle.managed.ProductFlavor_Impl</p>
</blockquote>

<p>when I try to use gradle project sync it gives this error:</p>

<blockquote>
  <p>Error:Unable to load class 'com.android.build.gradle.managed.ProductFlavor_Impl'.
  Possible causes for this unexpected error include:<ul><li>You are using JDK version 'java version ""1.7.0_79""'. Some versions of JDK 1.7 (e.g. 1.7.0_10) may cause class loading errors in Gradle.
  Please update to a newer version (e.g. 1.7.0_67).
  Open JDK Settings</li><li>Gradle's dependency cache may be corrupt (this sometimes occurs after a network connection timeout.)
  Re-download dependencies and sync project (requires network)</li><li>The state of a Gradle build process (daemon) may be corrupt. Stopping all Gradle daemons may solve this problem.
  Stop Gradle build processes (requires restart)</li><li>Your project may be using a third-party plugin which is not compatible with the other plugins in the project or the version of Gradle requested by the project.</li></ul>In the case of corrupt Gradle processes, you can also try closing the IDE and then killing all Java processes.</p>
</blockquote>

<p>Android project structure now looks like this. previously the jni folder is separated from the java folder. 
<a href=""https://i.stack.imgur.com/D0fYx.png"" rel=""nofollow noreferrer""><img src=""https://i.stack.imgur.com/D0fYx.png"" alt=""enter image description here""></a></p>

<p>Here's my config:</p>

<p>SIPdroid/app/build.gradle</p>

<pre><code>apply plugin: 'com.android.model.application'

model {
    android {
        compileSdkVersion = 23
        buildToolsVersion = ""23.0.2""

        defaultConfig.with {
            applicationId = ""com.test.sipdroid""
            minSdkVersion = 15
            targetSdkVersion = 23
            versionCode = 1
            versionName = ""1.0""
        }
    }

    compileOptions.with {
        sourceCompatibility = JavaVersion.VERSION_1_7
        targetCompatibility = JavaVersion.VERSION_1_7
    }

    /*
     * native build settings
     */
    android.ndk {
        moduleName = ""SIPdroid""
        /*
         * Other ndk flags configurable here are
         * cppFlags.add(""-fno-rtti"")
         * cppFlags.add(""-fno-exceptions"")
         * ldLibs.addAll([""android"", ""log""])
         * stl       = ""system""
         */
    }

    android.sources {
        main.java {
            source {
                srcDir 'src'
            }
        }
        main.jni {
            source {
                srcDirs = []
            }
        }
        main.jniLibs {
            source {
                srcDirs = ['src/main/libs']
            }
        }
    }

    android.buildTypes {
        release {
            minifyEnabled = false
            proguardFiles.add(file('proguard-rules.txt'))
        }
    }

    android.productFlavors {
        // for detailed abiFilter descriptions, refer to ""Supported ABIs"" @
        // https://developer.android.com/ndk/guides/abis.html#sa
        create(""arm"") {
            ndk.abiFilters.add(""armeabi"")
        }
        create(""arm7"") {
            ndk.abiFilters.add(""armeabi-v7a"")
        }
        create(""arm8"") {
            ndk.abiFilters.add(""arm64-v8a"")
        }
        create(""x86"") {
            ndk.abiFilters.add(""x86"")
        }
        create(""x86-64"") {
            ndk.abiFilters.add(""x86_64"")
        }
        create(""mips"") {
            ndk.abiFilters.add(""mips"")
        }
        create(""mips-64"") {
            ndk.abiFilters.add(""mips64"")
        }
        // To include all cpu architectures, leaves abiFilters empty
        create(""all"")
    }
}

dependencies {
    compile fileTree(dir: 'libs', include: ['*.jar'])
    testCompile 'junit:junit:4.12'
    compile 'com.android.support:appcompat-v7:23.1.1'
    compile 'com.android.support:design:23.1.1'
}
</code></pre>

<p>SIPdroid/build.gradle</p>

<pre><code>// Top-level build file where you can add configuration options common to all sub-projects/modules.

buildscript {
    repositories {
        jcenter()
    }
    dependencies {
        classpath 'com.android.tools.build:gradle-experimental:0.4.0'
//        classpath 'com.android.tools.build:gradle:1.3.1'

        // NOTE: Do not place your application dependencies here; they belong
        // in the individual module build.gradle files
    }
}

allprojects {
    repositories {
        jcenter()
    }
}
</code></pre>

<p>SIPdroid/gradle-wrapper.properties</p>

<pre><code>#Mon Jan 04 16:06:26 PHT 2016
distributionBase=GRADLE_USER_HOME
distributionPath=wrapper/dists
zipStoreBase=GRADLE_USER_HOME
zipStorePath=wrapper/dists
distributionUrl=https\://services.gradle.org/distributions/gradle-2.8-all.zip
</code></pre>

<p>SIPdroid/local.properties</p>

<pre><code>ndk.dir=/path/Android/sdk/ndk-bundle
sdk.dir=/path/Android/sdk
</code></pre>
",2497859,,2497859,,2016-01-06 7:38:20,2016-01-07 4:11:56,SIPdroid Android Studio ndk integration error,<android><android-studio><gradle><android-ndk><sipdroid>,1,0,,,
Android,34387574,1,34859599,908,1/18/2016 16:31:25,28,,12/21/2015 0:46:46,,1,2116,"<p>I am trying to get Instant Run to work in Android Studio.  I have A.S. 2.0 Preview 4 installed, and my Instant Run is enabled like this:
<a href=""https://i.stack.imgur.com/rXg32.png"" rel=""nofollow noreferrer""><img src=""https://i.stack.imgur.com/rXg32.png"" alt=""enter image description here""></a></p>

<p>Now, I am experimenting with this in the Topeka sample app from Google (<a href=""https://github.com/googlesamples/android-topeka"" rel=""nofollow noreferrer"">https://github.com/googlesamples/android-topeka</a>).  So, I am placing a bunch of Toasts in CategorySelectionActivity and CategorySelectionFragment, hoping that they can be instantaneously changed with Instant Run.  But every time I hit the Instant Run button in A.S., it completely shuts down the app and re-installs it.  It does not resume from the same activity I was on previously (as expected), NOR is it displaying the toast message like </p>

<blockquote>
  <p>Applied code changes without Activity restart</p>
</blockquote>

<p>Does anyone know how to get Instant Run to work properly?</p>

<p>Thanks,
Igor</p>
",6998684,,,,,2016-01-29 17:44:54,Android Studio Instant Run not working,<android-studio><instant-run>,2,0,1,,
Android,35105545,1,35106120,909,1/30/2016 19:30:07,0,,1/30/2016 18:39:09,,19,15782,"<p>I have just read about Unit Instrumented Testing in Android and I wonder how I can mock a SharedPreferences without any SharedPreferencesHelper class on it like <a href=""https://github.com/googlesamples/android-testing/blob/master/unit/BasicSample/app/src/test/java/com/example/android/testing/unittesting/BasicSample/SharedPreferencesHelperTest.java"" rel=""noreferrer"">here</a></p>

<p>My code is:</p>

<pre><code>public class Auth {
private static SharedPreferences loggedUserData = null;
public static String getValidToken(Context context)
{
    initLoggedUserPreferences(context);
    String token = loggedUserData.getString(Constants.USER_TOKEN,null);
    return token;
}
public static String getLoggedUser(Context context)
{
    initLoggedUserPreferences(context);
    String user = loggedUserData.getString(Constants.LOGGED_USERNAME,null);
    return user;
}
public static void setUserCredentials(Context context, String username, String token)
{
    initLoggedUserPreferences(context);
    loggedUserData.edit().putString(Constants.LOGGED_USERNAME, username).commit();
    loggedUserData.edit().putString(Constants.USER_TOKEN,token).commit();
}

public static HashMap&lt;String, String&gt; setHeaders(String username, String password)
{
    HashMap&lt;String, String&gt; headers = new HashMap&lt;String, String&gt;();
    String auth = username + "":"" + password;
    String encoding = Base64.encodeToString(auth.getBytes(), Base64.DEFAULT);
    headers.put(""Authorization"", ""Basic "" + encoding);
    return headers;
}

public static void deleteToken(Context context)
{
    initLoggedUserPreferences(context);
    loggedUserData.edit().remove(Constants.LOGGED_USERNAME).commit();
    loggedUserData.edit().remove(Constants.USER_TOKEN).commit();
}

public static HashMap&lt;String, String&gt; setHeadersWithToken(String token) {
    HashMap&lt;String, String&gt; headers = new HashMap&lt;String, String&gt;();
    headers.put(""Authorization"",""Token ""+token);
    return headers;
}
private static SharedPreferences initLoggedUserPreferences(Context context)
{
    if(loggedUserData == null)
        loggedUserData = context.getSharedPreferences(Constants.LOGGED_USER_PREFERENCES,0);
    return loggedUserData;
}}
</code></pre>

<p>Is is possible to mock SharedPreferences without creating other class on it?</p>
",3127984,,,,,2016-10-31 9:39:51,How to mock a SharedPreferences using Mockito,<android><sharedpreferences><mockito>,1,0,2,,
Android,35211950,1,35214915,910,2/5/2016 1:39:32,1,,2/4/2016 21:27:10,,1,2187,"<p>I want to test the Intent I'm sending from Activity A to Activity B.
There are samples for that, <a href=""https://github.com/googlesamples/android-testing/blob/master/ui/espresso/IntentsBasicSample/app/src/androidTest/java/com/example/android/testing/espresso/BasicSample/DialerActivityTest.java"" rel=""nofollow"">android-testing</a> and <a href=""http://developer.android.com/reference/android/support/test/espresso/intent/Intents.html"" rel=""nofollow"">espresso.intent.Intents</a>.</p>

<p>Unfortunately, I couldn't get it into work :(
I want to test following method in my first Activity.</p>

<pre><code>private void searchForDropOff()
    {
        this.startActivityForResult(PoiActivity.newIntent(this, PlacesAPIRequest.PARAM_SEARCH_TYPE_DESTINATION,
                        this.mBooking.getPickUp() != null ? this.getPickUp().getSafeLatLng() : this.mReferenceLatLng),
                        PlacesAPIRequest.PARAM_SEARCH_TYPE_DESTINATION);
    }
</code></pre>

<p>So, according to my references this is my test code:</p>

<pre><code>@RunWith(AndroidJUnit4.class)
public class FirstActivityTest
{
    @Rule
    public final IntentsTestRule&lt;FirstActivityTest&gt; mRule = new IntentsTestRule&lt;&gt;(FirstActivityTest.class);

    @Before
    public void stubAllExternalIntents()
    {
        // By default Espresso Intents does not stub any Intents. Stubbing needs to be setup before
        // every test run. In this case all external Intents will be blocked.
        intending(not(isInternal())).respondWith(new Instrumentation.ActivityResult(Activity.RESULT_OK, null));
    }

    @Test
    public void click_drop_off_box()
    {
        // Click drop-off box, POI activity displays
        onView(withId(R.id.booking_drop_off_layout)).perform(click());

        // Verify that an intent to the dialer was sent with the package.
        // Think of Intents intended API as the equivalent to Mockito's verify.
        intended(allOf(
                hasExtra(PoiActivity.EXTRA_SEARCH_TYPE, PlacesAPIRequest.PARAM_SEARCH_TYPE_DESTINATION),
                toPackage(""com.XXX.passenger.poi.PoiActivity"")));
    }
}
</code></pre>

<p>What I'm getting in Log:</p>

<pre><code>android.support.test.espresso.base.DefaultFailureHandler$AssertionFailedWithCauseError: Wanted to match 1 intents. Actually matched 0 intents.

IntentMatcher: (has extras: has bundle with: key: is ""addressType"" value: is &lt;2&gt; and resolvesTo: com.xxx.passenger.poi.PoiActivity)

Matched intents:[]

Recorded intents:
-Intent { cmp=com.xxx.passenger/com.xxx.passenger.poi.PoiActivity (has extras) } handling packages:[[com.xxx.passenger]], extras:[Bundle[{referencePoint=lat/lng: (1.3650683,103.8313499), addressType=2}]])
</code></pre>

<p>I'm confused a lot :( any idea would be appreciated. Thanks.</p>
",513413,,,,,2016-02-05 1:39:32,How to test Intent based on Espresso in Android?,<android><android-intent><android-espresso>,1,0,1,,
Android,32990275,1,35264164,911,2/8/2016 7:16:16,124,,10/7/2015 10:49:24,,4,3851,"<p>there is no response after I typed adb -s emulator-5554 emu finger touch 1. 
this is reference link 
<a href=""https://github.com/googlesamples/android-FingerprintDialog/issues/2"" rel=""nofollow"">https://github.com/googlesamples/android-FingerprintDialog/issues/2</a></p>
",5417969,,,,,2017-09-06 15:19:02,how to register Fingerprint for Authentication on Nexus emulator,<emulation><nexus-5>,2,0,2,,
Android,35354363,1,35404097,912,2/15/2016 7:55:01,3,,2/12/2016 3:32:35,,10,1899,"<p>I made a video capture app with Camera2 API by following <a href=""https://github.com/googlesamples/android-Camera2Video"">this</a> guide, </p>

<p>Is there a provision to change brightness/contrast/exposure settings of the video programatically? I'm trying to capture some low-lit video footage, and I wish to increase the exposure.</p>

<p>The documentation <a href=""http://developer.android.com/reference/android/hardware/Camera.Parameters.html"">here</a> seems to apply only for still pictures.</p>

<p>Any such way for video capture, using <strong>Camera2</strong> API?</p>
",2499724,,,,,2016-02-15 7:55:01,Set brightness/contrast in video capture using Android Camera2,<android><video><video-capture><android-camera2>,1,0,4,,
Android,35287835,1,35469813,913,2/17/2016 23:26:01,8,,2/9/2016 9:06:11,,2,6762,"<p>I used this <a href=""https://github.com/googlesamples/android-vision"" rel=""nofollow"">android-vision project</a> to scan a barcode. When the camera detects the barcode, I am currently required to manually tap to capture it. But, I want to change the code a little bit so that it is captured automatically when the barcode is detected. How can I do this? This is my <code>BarcodeCaptureActivity</code> class: </p>

<pre><code>package com.example.fs.barcodescanner;

import android.Manifest;
import android.annotation.SuppressLint;
import android.app.Activity;
import android.app.AlertDialog;
import android.app.Dialog;
import android.content.Context;
import android.content.DialogInterface;
import android.content.Intent;
import android.content.IntentFilter;
import android.content.pm.PackageManager;
import android.hardware.Camera;
import android.os.Build;
import android.os.Bundle;
import android.support.annotation.NonNull;
import android.support.design.widget.Snackbar;
import android.support.v4.app.ActivityCompat;
import android.support.v7.app.AppCompatActivity;
import android.util.Log;
import android.view.GestureDetector;
import android.view.MotionEvent;
import android.view.ScaleGestureDetector;
import android.view.View;
import android.view.WindowId;
import android.widget.Toast;

import com.example.fs.barcodescanner.ui.camera.CameraSource;
import com.example.fs.barcodescanner.ui.camera.CameraSourcePreview;
import com.example.fs.barcodescanner.ui.camera.GraphicOverlay;
import com.google.android.gms.common.ConnectionResult;
import com.google.android.gms.common.GoogleApiAvailability;
import com.google.android.gms.common.api.CommonStatusCodes;
import com.google.android.gms.vision.MultiProcessor;
import com.google.android.gms.vision.barcode.Barcode;
import com.google.android.gms.vision.barcode.BarcodeDetector;

import java.io.IOException;

public final class BarcodeCaptureActivity extends AppCompatActivity {
    private static final String TAG = ""Barcode-reader"";

    // intent request code to handle updating play services if needed.
    private static final int RC_HANDLE_GMS = 9001;

    // permission request codes need to be &lt; 256
    private static final int RC_HANDLE_CAMERA_PERM = 2;

    // constants used to pass extra data in the intent
    public static final String AutoFocus = ""AutoFocus"";
    public static final String UseFlash = ""UseFlash"";
    public static final String BarcodeObject = ""Barcode"";

    private CameraSource mCameraSource;
    private CameraSourcePreview mPreview;
    private GraphicOverlay&lt;BarcodeGraphic&gt; mGraphicOverlay;

    // helper objects for detecting taps and pinches.
    private ScaleGestureDetector scaleGestureDetector;
    private GestureDetector gestureDetector;
    private WindowId.FocusObserver fo;

    /**
     * Initializes the UI and creates the detector pipeline.
     */
    @Override
    public void onCreate(Bundle icicle) {
        super.onCreate(icicle);
        setContentView(R.layout.activity_barcode_capture);

        mPreview = (CameraSourcePreview) findViewById(R.id.preview);
        mGraphicOverlay = (GraphicOverlay&lt;BarcodeGraphic&gt;) findViewById(R.id.graphicOverlay);

        // read parameters from the intent used to launch the activity.
        boolean autoFocus = getIntent().getBooleanExtra(AutoFocus, false);
        boolean useFlash = getIntent().getBooleanExtra(UseFlash, false);

        // Check for the camera permission before accessing the camera.  If the
        // permission is not granted yet, request permission.
        int rc = ActivityCompat.checkSelfPermission(this, Manifest.permission.CAMERA);
        if (rc == PackageManager.PERMISSION_GRANTED) {
            createCameraSource(autoFocus, useFlash);
        } else {
            requestCameraPermission();
        }

        gestureDetector = new GestureDetector(this, new CaptureGestureListener());
        scaleGestureDetector = new ScaleGestureDetector(this, new ScaleListener());

        Snackbar.make(mGraphicOverlay, ""Tap to capture. Pinch/Stretch to zoom"",
                Snackbar.LENGTH_LONG)
                .show();
    }

    /**
     * Handles the requesting of the camera permission.  This includes
     * showing a ""Snackbar"" message of why the permission is needed then
     * sending the request.
     */
    private void requestCameraPermission() {
        Log.w(TAG, ""Camera permission is not granted. Requesting permission"");

        final String[] permissions = new String[]{Manifest.permission.CAMERA};

        if (!ActivityCompat.shouldShowRequestPermissionRationale(this,
                Manifest.permission.CAMERA)) {
            ActivityCompat.requestPermissions(this, permissions, RC_HANDLE_CAMERA_PERM);
            return;
        }

        final Activity thisActivity = this;

        View.OnClickListener listener = new View.OnClickListener() {
            @Override
            public void onClick(View view) {
                ActivityCompat.requestPermissions(thisActivity, permissions,
                        RC_HANDLE_CAMERA_PERM);
            }
        };

        Snackbar.make(mGraphicOverlay, R.string.permission_camera_rationale,
                Snackbar.LENGTH_INDEFINITE)
                .setAction(R.string.ok, listener)
                .show();
    }

    @Override
    public boolean onTouchEvent(MotionEvent e) {
        boolean b = scaleGestureDetector.onTouchEvent(e);
        System.out.println(""scale gesture""+b);
        boolean c = gestureDetector.onTouchEvent(e);
        System.out.println(""tap gesture""+c);
        return b || c || super.onTouchEvent(e);
    }


    /**
     * Creates and starts the camera.  Note that this uses a higher resolution in comparison
     * to other detection examples to enable the barcode detector to detect small barcodes
     * at long distances.
     *
     * Suppressing InlinedApi since there is a check that the minimum version is met before using
     * the constant.
     */
    @SuppressLint(""InlinedApi"")
    private void createCameraSource(boolean autoFocus, boolean useFlash) {
        Context context = getApplicationContext();

        // A barcode detector is created to track barcodes.  An associated multi-processor instance
        // is set to receive the barcode detection results, track the barcodes, and maintain
        // graphics for each barcode on screen.  The factory is used by the multi-processor to
        // create a separate tracker instance for each barcode.
        BarcodeDetector barcodeDetector = new BarcodeDetector.Builder(context).build();
        BarcodeTrackerFactory barcodeFactory = new BarcodeTrackerFactory(mGraphicOverlay);
        barcodeDetector.setProcessor(
                new MultiProcessor.Builder&lt;&gt;(barcodeFactory).build());

        if (!barcodeDetector.isOperational()) {
            // Note: The first time that an app using the barcode or face API is installed on a
            // device, GMS will download a native libraries to the device in order to do detection.
            // Usually this completes before the app is run for the first time.  But if that
            // download has not yet completed, then the above call will not detect any barcodes
            // and/or faces.
            //
            // isOperational() can be used to check if the required native libraries are currently
            // available.  The detectors will automatically become operational once the library
            // downloads complete on device.
            Log.w(TAG, ""Detector dependencies are not yet available."");

            // Check for low storage.  If there is low storage, the native library will not be
            // downloaded, so detection will not become operational.
            IntentFilter lowstorageFilter = new IntentFilter(Intent.ACTION_DEVICE_STORAGE_LOW);
            boolean hasLowStorage = registerReceiver(null, lowstorageFilter) != null;

            if (hasLowStorage) {
                Toast.makeText(this, R.string.low_storage_error, Toast.LENGTH_LONG).show();
                Log.w(TAG, getString(R.string.low_storage_error));
            }
        }

        // Creates and starts the camera.  Note that this uses a higher resolution in comparison
        // to other detection examples to enable the barcode detector to detect small barcodes
        // at long distances.
        CameraSource.Builder builder = new CameraSource.Builder(getApplicationContext(), barcodeDetector)
                .setFacing(CameraSource.CAMERA_FACING_BACK)
                .setRequestedPreviewSize(1600, 1024)
                .setRequestedFps(15.0f);

        // make sure that auto focus is an available option
        if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.ICE_CREAM_SANDWICH) {
            builder = builder.setFocusMode(
                    autoFocus ? Camera.Parameters.FOCUS_MODE_CONTINUOUS_PICTURE : null);
        }

        mCameraSource = builder
                .setFlashMode(useFlash ? Camera.Parameters.FLASH_MODE_TORCH : null)
                .build();
    }

    /**
     * Restarts the camera.
     */
    @Override
    protected void onResume() {
        super.onResume();
        startCameraSource();
    }

    /**
     * Stops the camera.
     */
    @Override
    protected void onPause() {
        super.onPause();
        if (mPreview != null) {
            mPreview.stop();
        }
    }

    /**
     * Releases the resources associated with the camera source, the associated detectors, and the
     * rest of the processing pipeline.
     */
    @Override
    protected void onDestroy() {
        super.onDestroy();
        if (mPreview != null) {
            mPreview.release();
        }
    }

    /**
     * Callback for the result from requesting permissions. This method
     * is invoked for every call on {@link #requestPermissions(String[], int)}.
     * &lt;p&gt;
     * &lt;strong&gt;Note:&lt;/strong&gt; It is possible that the permissions request interaction
     * with the user is interrupted. In this case you will receive empty permissions
     * and results arrays which should be treated as a cancellation.
     * &lt;/p&gt;
     *
     * @param requestCode  The request code passed in {@link #requestPermissions(String[], int)}.
     * @param permissions  The requested permissions. Never null.
     * @param grantResults The grant results for the corresponding permissions
     *                     which is either {@link PackageManager#PERMISSION_GRANTED}
     *                     or {@link PackageManager#PERMISSION_DENIED}. Never null.
     * @see #requestPermissions(String[], int)
     */
    @Override
    public void onRequestPermissionsResult(int requestCode,
                                           @NonNull String[] permissions,
                                           @NonNull int[] grantResults) {
        if (requestCode != RC_HANDLE_CAMERA_PERM) {
            Log.d(TAG, ""Got unexpected permission result: "" + requestCode);
            super.onRequestPermissionsResult(requestCode, permissions, grantResults);
            return;
        }

        if (grantResults.length != 0 &amp;&amp; grantResults[0] == PackageManager.PERMISSION_GRANTED) {
            Log.d(TAG, ""Camera permission granted - initialize the camera source"");
            // we have permission, so create the camerasource
            boolean autoFocus = getIntent().getBooleanExtra(AutoFocus,false);
            boolean useFlash = getIntent().getBooleanExtra(UseFlash, false);
            createCameraSource(autoFocus, useFlash);
            return;
        }

        Log.e(TAG, ""Permission not granted: results len = "" + grantResults.length +
                "" Result code = "" + (grantResults.length &gt; 0 ? grantResults[0] : ""(empty)""));

        DialogInterface.OnClickListener listener = new DialogInterface.OnClickListener() {
            public void onClick(DialogInterface dialog, int id) {
                finish();
            }
        };

        AlertDialog.Builder builder = new AlertDialog.Builder(this);
        builder.setTitle(""Multitracker sample"")
                .setMessage(R.string.no_camera_permission)
                .setPositiveButton(R.string.ok, listener)
                .show();
    }

    /**
     * Starts or restarts the camera source, if it exists.  If the camera source doesn't exist yet
     * (e.g., because onResume was called before the camera source was created), this will be called
     * again when the camera source is created.
     */
    private void startCameraSource() throws SecurityException {
        // check that the device has play services available.
        int code = GoogleApiAvailability.getInstance().isGooglePlayServicesAvailable(
                getApplicationContext());
        if (code != ConnectionResult.SUCCESS) {
            Dialog dlg =
                    GoogleApiAvailability.getInstance().getErrorDialog(this, code, RC_HANDLE_GMS);
            dlg.show();
        }

        if (mCameraSource != null) {
            try {
                mPreview.start(mCameraSource, mGraphicOverlay);
            } catch (IOException e) {
                Log.e(TAG, ""Unable to start camera source."", e);
                mCameraSource.release();
                mCameraSource = null;
            }
        }
    }

    /**
     * onTap is called to capture the oldest barcode currently detected and
     * return it to the caller.
     *
     * @param rawX - the raw position of the tap
     * @param rawY - the raw position of the tap.
     * @return true if the activity is ending.
     */
    private boolean onTap(float rawX, float rawY) {

        //TODO: use the tap position to select the barcode.
        BarcodeGraphic graphic = mGraphicOverlay.getFirstGraphic();
        Barcode barcode = null;
        if (graphic != null) {
            barcode = graphic.getBarcode();
            if (barcode != null) {
                Intent data = new Intent();
                data.putExtra(BarcodeObject, barcode);
                setResult(CommonStatusCodes.SUCCESS, data);
                finish();
            }
            else {
                Log.d(TAG, ""barcode data is null"");
            }
        }
        else {
            Log.d(TAG,""no barcode detected"");
        }
        return barcode != null;
    }

    private class CaptureGestureListener extends GestureDetector.SimpleOnGestureListener {

        @Override
        public boolean onSingleTapConfirmed(MotionEvent e) {
            System.out.println(e.getRawX());
            System.out.println(e.getRawY());
            return onTap(e.getRawX(), e.getRawY()) || super.onSingleTapConfirmed(e);
        }
    }

    private class ScaleListener implements ScaleGestureDetector.OnScaleGestureListener {

        /**
         * Responds to scaling events for a gesture in progress.
         * Reported by pointer motion.
         *
         * @param detector The detector reporting the event - use this to
         *                 retrieve extended info about event state.
         * @return Whether or not the detector should consider this event
         * as handled. If an event was not handled, the detector
         * will continue to accumulate movement until an event is
         * handled. This can be useful if an application, for example,
         * only wants to update scaling factors if the change is
         * greater than 0.01.
         */
        @Override
        public boolean onScale(ScaleGestureDetector detector) {
            return false;
        }

        /**
         * Responds to the beginning of a scaling gesture. Reported by
         * new pointers going down.
         *
         * @param detector The detector reporting the event - use this to
         *                 retrieve extended info about event state.
         * @return Whether or not the detector should continue recognizing
         * this gesture. For example, if a gesture is beginning
         * with a focal point outside of a region where it makes
         * sense, onScaleBegin() may return false to ignore the
         * rest of the gesture.
         */
        @Override
        public boolean onScaleBegin(ScaleGestureDetector detector) {
            return true;
        }

        /**
         * Responds to the end of a scale gesture. Reported by existing
         * pointers going up.
         * &lt;p/&gt;
         * Once a scale has ended, {@link ScaleGestureDetector#getFocusX()}
         * and {@link ScaleGestureDetector#getFocusY()} will return focal point
         * of the pointers remaining on the screen.
         *
         * @param detector The detector reporting the event - use this to
         *                 retrieve extended info about event state.
         */
        @Override
        public void onScaleEnd(ScaleGestureDetector detector) {
            mCameraSource.doZoom(detector.getScaleFactor());
        }
    }
}
</code></pre>
",4697260,,5350328,,2016-02-09 9:38:12,2017-03-21 16:10:49,Detect and capture barcode automatically when it is read by camera,<android>,3,2,2,,
Android,35489632,1,35509532,914,2/19/2016 16:00:46,1,,2/18/2016 18:31:45,,11,6424,"<p>It seems I've found myself in the deep weeds of the Google Vision API for barcode scanning. Perhaps my mind is a bit fried after looking at all sorts of alternative libraries (ZBar, ZXing, and even some for-cost third party implementations), but I'm having some difficulty finding any information on where I can implement some sort of scan region limiting.</p>

<p>The use case is a pretty simple one: if I'm a user pointing my phone at a box with multiple barcodes of the same type (think shipping labels here), I want to explicitly point some little viewfinder or alignment straight-edge on the screen at exactly the thing I'm trying to capture, without having to worry about anything outside that area of interest giving me some scan results I don't want.</p>

<p>The above case is handled in most other Android libraries I've seen, taking in either a Rect with relative or absolute coordinates, and this is also a part of iOS' AVCapture metadata results system (it uses a relative CGRect, but really the same concept).</p>

<p>I've dug pretty deep into the sample app for the barcode-reader
<a href=""https://github.com/googlesamples/android-vision/tree/master/visionSamples/barcode-reader"" rel=""noreferrer"">here</a>, but the implementation is a tad opaque to get anything but the high level implementation details down.</p>

<p>It seems an ugly patch to, on successful detection of a barcode anywhere within the camera's preview frame, to simple no-op on barcodes outside of an area of interest, since the device is still working hard to compute those frames.</p>

<p>Am I missing something very simple and obvious on this one? Any ideas on a way to implement this cleanly, otherwise?</p>

<p>Many thanks for your time in reading through this!</p>
",3543729,,,,,2016-02-19 16:00:46,Limit Detection Area in Vision API,<android><google-vision><android-vision>,1,0,5,,
Android,35048208,1,35603674,915,2/24/2016 13:34:05,28,,1/27/2016 21:18:21,,4,3256,"<p>I'm having some issues setting up a capture request for high speed video. I intend to capture at 120 FPS on Nexus 6P. I set the minimum API to 23, since I don't plan to deploy this app to any other phone. </p>

<p>Where I'm not quite understanding is how to get my capture request to work. Right now, I'm doing my best to change up the code within Camera2Video sample in google's samples. <a href=""https://github.com/googlesamples/android-Camera2Video"" rel=""nofollow"">Link to sample from Google</a></p>

<p>Here is all of the relevant code:</p>

<pre><code>private void startPreview() {
    if (null == mCameraDevice || !mTextureView.isAvailable() || null == mPreviewSize) {
        return;
    }
    try {
        setUpMediaRecorder();
        SurfaceTexture texture = mTextureView.getSurfaceTexture();
        assert texture != null;
        texture.setDefaultBufferSize(mPreviewSize.getWidth(), mPreviewSize.getHeight());
        mPreviewBuilder = mCameraDevice.createCaptureRequest(CameraDevice.TEMPLATE_RECORD);
        List&lt;Surface&gt; surfaces = new ArrayList&lt;Surface&gt;();

        Surface previewSurface = new Surface(texture);
        surfaces.add(previewSurface);
        mPreviewBuilder.addTarget(previewSurface);

        Surface recorderSurface = mMediaRecorder.getSurface();
        surfaces.add(recorderSurface);
        mPreviewBuilder.addTarget(recorderSurface);

        mCameraDevice.createConstrainedHighSpeedCaptureSession(surfaces, new CameraCaptureSession.StateCallback() {
        //mCameraDevice.createCaptureSession(surfaces, new CameraCaptureSession.StateCallback() {

            @Override
            public void onConfigured(CameraCaptureSession cameraCaptureSession) {
                //mPreviewSession = cameraCaptureSession;
                mPreviewSession2 = cameraCaptureSession;
                updatePreview();
            }

            @Override
            public void onConfigureFailed(CameraCaptureSession cameraCaptureSession) {
                Activity activity = getActivity();
                if (null != activity) {
                    Toast.makeText(activity, ""Failed"", Toast.LENGTH_SHORT).show();
                }
            }
        }, mBackgroundHandler);
    } catch (CameraAccessException e) {
        e.printStackTrace();
    } catch (IllegalArgumentException e) {
        e.printStackTrace();
    } catch (IOException e) {
        e.printStackTrace();
    }
}


/**
 * Update the camera preview. {@link #startPreview()} needs to be called in advance.
 */
private void updatePreview() {
    if (null == mCameraDevice) {
        return;
    }
    try {
        setUpCaptureRequestBuilder(mPreviewBuilder);
        HandlerThread thread = new HandlerThread(""CameraPreview"");
        thread.start();
        mPreviewBuilder2 =  mPreviewSession2.createHighSpeedRequestList(mPreviewBuilder.build());
        //mPreviewBuilder2 =


        //mPreviewSession.setRepeatingRequest(mPreviewBuilder.build(), null, mBackgroundHandler);
        mPreviewSession.setRepeatingBurst(mPreviewBuilder2, null, mBackgroundHandler);
    } catch (CameraAccessException e) {
        e.printStackTrace();
    } catch (IllegalArgumentException e) {
        e.printStackTrace();
    } catch(Exception e){
        e.printStackTrace();
    }
}

private void setUpCaptureRequestBuilder(CaptureRequest.Builder builder) {
    builder.set(CaptureRequest.CONTROL_MODE, CameraMetadata.CONTROL_MODE_AUTO);
    Range&lt;Integer&gt; fpsRange = Range.create(120, 120);
    builder.set(CaptureRequest.CONTROL_AE_TARGET_FPS_RANGE, fpsRange);

}
</code></pre>

<p>I have no problem getting the code to updatepreview. Unfortunately, from there I've hit a roadblock on how to give setRepeatingBurst my capture requests. I know the constructor is different from the sample's setRepeatingRequest. Therefore, I need to find a way to give setRepeatingBurst my surfaces, my CONTROL_MODE request and my TARGET_FPS_RANGE request. </p>

<pre><code>/**
 * Camera preview.
 */
private CaptureRequest.Builder mPreviewBuilder;
List&lt;CaptureRequest&gt; mPreviewBuilder2;

/**
 * A reference to the current {@link android.hardware.camera2.CameraCaptureSession} for
 * preview.
 */
private CameraCaptureSession mPreviewSession;
private CameraConstrainedHighSpeedCaptureSession mPreviewSession2;
</code></pre>

<p>Any help figuring out how to make this work correctly would be very helpful. I haven't found much on the net in order to help and there isn't any article in StackOverflow mentioning any of the highspeed capture functions. My largest issue here is trying to understand how createConstrainedHighSpeedCaptureSession gives a CameraConstrainedHighSpeedCaptureSession session. So that I can use the createHighSpeedRequestList.</p>
",1120115,,1120115,,2016-01-28 0:11:29,2016-12-15 5:57:49,High speed Capture request Android Marshmallow,<android><android-camera>,1,0,1,,
Android,35604954,1,35606877,916,2/24/2016 15:57:09,0,,2/24/2016 14:32:12,,1,424,"<p>I am trying to capture a photo and after that, allow to the user to add some effects, draw, drag other assets to the image, add text, etc. Like snapchat camera.</p>

<p>I have followed the <a href=""https://github.com/googlesamples/android-Camera2Basic"" rel=""nofollow noreferrer"">Camera 2 API sample</a>. The major part of the code is at
<a href=""https://github.com/googlesamples/android-Camera2Basic/blob/master/Application/src/main/java/com/example/android/camera2basic/Camera2BasicFragment.java"" rel=""nofollow noreferrer"">Camera2BasicFragment.java</a></p>

<p>I have achieved the capture and preview image, but the example set the image in a <code>TextureView</code>, but I do not have idea how to continue to manipulate the image.</p>

<p>I dont know if I should use a <code>TextureView</code> or a <code>Canvas</code> or a <code>SurfaceView</code>.</p>

<p>An example of the final image result that I want:</p>

<p><a href=""https://i.stack.imgur.com/4aLG4.jpg"" rel=""nofollow noreferrer""><img src=""https://i.stack.imgur.com/4aLG4.jpg"" alt=""example""></a></p>

<p>Thanks in advance.</p>
",3796083,,4848308,,2016-02-24 16:15:18,2016-02-24 16:15:18,"Capture photo and apply effects (scale, rotate, grey, draw with finger)",<android><android-camera2>,1,11,2,,
Android,34298780,1,35621793,917,2/25/2016 8:17:26,72,,12/15/2015 20:28:39,,5,2062,"<p>I'm trying to implement <a href=""https://github.com/googlesamples/android-ndk/tree/master/hello-jni"" rel=""nofollow noreferrer""><code>hello-jni</code> sample</a>
into my project. I have <code>Gradle</code> 2.8 and <code>'com.android.tools.build:gradle-experimental:0.4.0'</code> and using <code>Android Studio 2.0 Preview 3b</code>.</p>

<p>This is my <code>build.gradle</code>:</p>

<pre><code>apply plugin: 'com.android.model.application'
model {
    android {
        compileSdkVersion = 23
        buildToolsVersion = ""23.0.2""
        defaultConfig.with {
            applicationId = ""lala.lala""
            minSdkVersion.apiLevel = 16
            targetSdkVersion.apiLevel = 23
            versionCode = 1
            versionName = ""1.0""
        }
    }
    /*
    * native build settings
    */
    android.ndk {
        moduleName = ""hello-jni""


        //  cppFlags.add(""-fno-rtti"")
     //    cppFlags.add(""-fno-exceptions"")
     //   ldLibs.addAll([""android"", ""log""])
      //  stl       = ""system""

    }

    android.productFlavors {
        // for detailed abiFilter descriptions, refer to ""Supported ABIs"" @
        // https://developer.android.com/ndk/guides/abis.html#sa
        create(""arm"") {
            ndk.abiFilters.add(""armeabi"")
        }
        create(""arm7"") {
            ndk.abiFilters.add(""armeabi-v7a"")
        }
        create(""arm8"") {
            ndk.abiFilters.add(""arm64-v8a"")
        }
        create(""x86"") {
            ndk.abiFilters.add(""x86"")
        }
        create(""x86-64"") {
            ndk.abiFilters.add(""x86_64"")
        }
        create(""mips"") {
            ndk.abiFilters.add(""mips"")
        }
        create(""mips-64"") {
            ndk.abiFilters.add(""mips64"")
        }
        // To include all cpu architectures, leaves abiFilters empty
        create(""all"")
    }
    android.buildTypes {
        release {
            minifyEnabled = false
            //proguardFiles.add(file('proguard-rules.txt'))
        }
    }

}

dependencies {
    compile fileTree(dir: 'libs', include: ['*.jar'])
    testCompile 'junit:junit:4.12'
    compile 'com.android.support:appcompat-v7:23.1.1'
    compile 'com.android.support:design:23.1.1'
    compile 'com.android.support:cardview-v7:23.1.1'
    compile 'com.android.support:recyclerview-v7:23.1.1'
    compile 'com.google.android.gms:play-services-ads:8.3.0'
    compile 'com.google.android.gms:play-services-analytics:8.3.0'
    compile 'com.google.android.gms:play-services-appindexing:8.3.0'
}
</code></pre>

<p>I have created in <code>JNI</code> folder <code>hello-jni.h</code>:</p>

<p><a href=""https://i.stack.imgur.com/iYBwU.png"" rel=""nofollow noreferrer""><img src=""https://i.stack.imgur.com/iYBwU.png"" alt=""enter image description here""></a></p>

<p>In some part of my code I import this:</p>

<pre><code>static {
    System.loadLibrary(""hello-jni"");
}
public static native int testMethod();
</code></pre>

<p>And by auto completion created <code>hello-jni.c</code>:</p>

<pre><code>#include ""hello-jni.h""

JNIEXPORT jintJNICALL
Java_lala_lala_HomeScreen_testMethod(JNIEnv
*env,
jclass type
)
{
// TODO
}
</code></pre>

<p>Header file <code>hello-jni.h</code>:</p>

<pre><code>//
// Created by Filip on 15.12.2015..
//

#ifndef PHOTO_HELLO_JNI_H
#define PHOTO_HELLO_JNI_H

#endif //PHOTO_HELLO_JNI_H
</code></pre>

<p>But it doesn't work. It is full red:</p>

<p><a href=""https://i.stack.imgur.com/dtACE.png"" rel=""nofollow noreferrer""><img src=""https://i.stack.imgur.com/dtACE.png"" alt=""enter image description here""></a></p>

<p>What is problem? How to solve it?</p>
",5665386,,3290339,,2015-12-17 21:08:08,2016-03-03 18:47:21,Hello-jni sample doesn't work in Android Studio 2.0 Preview,<android><android-studio><android-ndk><java-native-interface>,2,0,1,,
Android,35634085,1,35666374,918,2/27/2016 6:07:32,2,,2/25/2016 17:22:52,,6,3225,"<p><strong>Problem</strong>: I've been using <a href=""https://github.com/googlesamples/android-play-publisher-api"" rel=""noreferrer"">Python Script Samples by Google</a> to upload the apk to Play Store and to get list of apps published via my account (<a href=""https://github.com/googlesamples/android-play-publisher-api/blob/master/v2/python/basic_list_apks_service_account.py"" rel=""noreferrer"">list_apks.py</a> and <code>upload_apk.py</code>). However recently it started breaking. I've tried to update the packages like <code>google-api-python-client</code>, <code>oath2client</code> etc by doing <code>pip install --update packagename</code> but it didn't help. </p>

<p><strong>Logs</strong>:</p>

<p>This if while listing apk's:</p>

<pre><code>Determining latest version for my.package.name...
error   25-Feb-2016 06:30:52    Traceback (most recent call last):
error   25-Feb-2016 06:30:52      File ""list_apks.py"", line 80, in &lt;module&gt;
error   25-Feb-2016 06:30:52        main()
error   25-Feb-2016 06:30:52      File ""list_apks.py"", line 46, in main
error   25-Feb-2016 06:30:52        credentials = client.SignedJwtAssertionCredentials(
error   25-Feb-2016 06:30:52    AttributeError: 'module' object has no attribute 'SignedJwtAssertionCredentials'
build   25-Feb-2016 06:30:52    Found latest APK version: 
build   25-Feb-2016 06:30:52    Generated new APK version: 1
</code></pre>

<p>This is when uploading apk:</p>

<pre><code>25-Feb-2016 06:33:30    Uploading APK...
25-Feb-2016 06:33:30    Traceback (most recent call last):
25-Feb-2016 06:33:30      File ""upload_apk.py"", line 115, in &lt;module&gt;
25-Feb-2016 06:33:30        main(sys.argv)
25-Feb-2016 06:33:30      File ""upload_apk.py"", line 62, in main
25-Feb-2016 06:33:30        credentials = client.SignedJwtAssertionCredentials(
25-Feb-2016 06:33:30    AttributeError: 'module' object has no attribute 'SignedJwtAssertionCredentials'
</code></pre>

<p><strong>Code sniplet</strong>:</p>

<pre><code>import argparse

from apiclient.discovery import build
import httplib2
from oauth2client import client


SERVICE_ACCOUNT_EMAIL = (
    'myaccountemail.com')

# Declare command-line flags.
argparser = argparse.ArgumentParser(add_help=False)
argparser.add_argument('package_name',
                       help='The package name. Example: com.android.sample')


def main():
  # Load the key in PKCS 12 format that you downloaded from the Google APIs
  # Console when you created your Service account.
  f = file('mykeyname.p12', 'rb')
  key = f.read()
  f.close()

  # HERE IS THE EXCEPTION 
  credentials = client.SignedJwtAssertionCredentials(
      SERVICE_ACCOUNT_EMAIL,
      key,
      scope='https://www.googleapis.com/auth/androidpublisher')
  http = httplib2.Http()
  http = credentials.authorize(http)
  ...
</code></pre>

<p>What else I can try? I would appreciate your help.</p>
",1306419,,1306419,,2016-02-29 1:22:35,2016-02-29 1:22:35,AttributeError: 'module' object has no attribute 'SignedJwtAssertionCredentials',<android><python><attributeerror><oauth2client><google-play-developer-api>,1,0,2,,
Android,35664198,1,35708297,919,2/29/2016 19:47:26,2,,2/27/2016 0:33:25,,1,1337,"<p>I am new to Instrumentation Testing on Android and was learning from the sample at <a href=""https://github.com/googlesamples/android-testing/tree/master/runner/AndroidJunitRunnerSample"" rel=""nofollow"">https://github.com/googlesamples/android-testing/tree/master/runner/AndroidJunitRunnerSample</a> to use AndroidJUnit4.</p>

<p>That code works perfectly.</p>

<p>Trying to implement the same login on my project, however, I get the following exception:</p>

<pre><code>Running tests
Test running started
java.lang.Exception: No runnable methods
at org.junit.runners.BlockJUnit4ClassRunner.validateInstanceMethods(BlockJUnit4ClassRunner.java:191)
at org.junit.runners.BlockJUnit4ClassRunner.collectInitializationErrors(BlockJUnit4ClassRunner.java:128)
at org.junit.runners.ParentRunner.validate(ParentRunner.java:416)
at org.junit.runners.ParentRunner.&lt;init&gt;(ParentRunner.java:84)
at org.junit.runners.BlockJUnit4ClassRunner.&lt;init&gt;(BlockJUnit4ClassRunner.java:65)
at android.support.test.internal.runner.junit4.AndroidJUnit4ClassRunner.&lt;init&gt;(AndroidJUnit4ClassRunner.java:38)
at android.support.test.runner.AndroidJUnit4.&lt;init&gt;(AndroidJUnit4.java:36)
at java.lang.reflect.Constructor.newInstance(Native Method)
at java.lang.reflect.Constructor.newInstance(Constructor.java:288)
at android.support.test.internal.runner.junit4.AndroidAnnotatedBuilder.buildAndroidRunner(AndroidAnnotatedBuilder.java:57)
at android.support.test.internal.runner.junit4.AndroidAnnotatedBuilder.runnerForClass(AndroidAnnotatedBuilder.java:45)
at org.junit.runners.model.RunnerBuilder.safeRunnerForClass(RunnerBuilder.java:59)
at org.junit.internal.builders.AllDefaultPossibilitiesBuilder.runnerForClass(AllDefaultPossibilitiesBuilder.java:26)
at org.junit.runner.Computer.getRunner(Computer.java:40)
at org.junit.runner.Computer$1.runnerForClass(Computer.java:31)
at org.junit.runners.model.RunnerBuilder.safeRunnerForClass(RunnerBuilder.java:59)
at org.junit.runners.model.RunnerBuilder.runners(RunnerBuilder.java:101)
at org.junit.runners.model.RunnerBuilder.runners(RunnerBuilder.java:87)
at org.junit.runners.Suite.&lt;init&gt;(Suite.java:81)
at org.junit.runner.Computer.getSuite(Computer.java:28)
at android.support.test.internal.runner.TestRequestBuilder.classes(TestRequestBuilder.java:791)
at android.support.test.internal.runner.TestRequestBuilder.build(TestRequestBuilder.java:754)
at android.support.test.runner.AndroidJUnitRunner.buildRequest(AndroidJUnitRunner.java:341)
at android.support.test.runner.AndroidJUnitRunner.onStart(AndroidJUnitRunner.java:238)
at android.app.Instrumentation$InstrumentationThread.run(Instrumentation.java:1853)
</code></pre>

<p>My AndroidTestSuite looks like:</p>

<pre><code>import org.junit.runner.RunWith;
import org.junit.runners.Suite;

@RunWith(Suite.class)
@Suite.SuiteClasses({InstrumentationTestSuite.class})
public class AndroidTestSuite {}
</code></pre>

<p>And my InstrumentationTestSuite looks like:</p>

<pre><code>import org.junit.runner.RunWith;
import org.junit.runners.Suite;

@RunWith(Suite.class)
@Suite.SuiteClasses({LoginInstrumentationTest.class})
public class InstrumentationTestSuite {}
</code></pre>

<p>My LoginInstrumentationTest is </p>

<pre><code>@RunWith(AndroidJUnit4.class)
@LargeTest
public class LoginInstrumentationTest {

    @Rule
    public ActivityTestRule&lt;LoginActivity&gt; mActivityRule = new ActivityTestRule&lt;&gt;(
        LoginActivity.class);

    @Test
    public void attemptToLogin() {
        login(""filipebarretto@xxxxxxxxxx.com"", ""12345678"");
    }

    private void login(String email, String password) {

        // Enter user email
        onView(withId(R.id.email)).perform(typeText(email),
            closeSoftKeyboard());

        // Enter user password
        onView(withId(R.id.password)).perform(typeText(password),
            closeSoftKeyboard());

        // Click on the login button
        onView(withId(R.id.email_sign_in_button)).perform(click());

        // Testing
        onView(withId(R.id.email)).check(matches(withText(email)));

    }
}
</code></pre>

<p>From what I search, usually the error I'm getting is due to a missing <code>@Test</code> before my method.</p>

<p>The difference I noticed between my code and the one I'm learning from is the gradle version, which I use 1.5.0 and they use 2.0.0-beta2.</p>

<p>I also found that my Instrumentation.java that is called during the test has several ""Cannot resolve symbol"" error with I can't find the reason, since I use the same dependencies as the sample code.</p>

<p>Any one know what could be the reason of the <code>No runnable methods</code> exception and how to solve it?</p>
",3071350,,,,,2016-02-29 19:47:26,No runnable methods on Android JUnit4 Instrumentation Tests,<java><android><testing><junit4><android-instrumentation>,1,2,,,
Android,35711493,1,35728605,920,3/1/2016 16:47:06,1,,2/29/2016 23:01:47,,2,2233,"<p>At the end of <a href=""http://developer.android.com/guide/components/fragments.html"" rel=""nofollow"">http://developer.android.com/guide/components/fragments.html</a> is stated ""For more samples using fragments (<strong>and complete source files for this example</strong>), <strong>see the API Demos sample app available in ApiDemos</strong> (available for download from the Samples SDK component).""</p>

<p>However, <strong>ApiDemos</strong> is <em>not</em> listed anywhere among the hundreds of items when I try to <code>Import sample...</code> in AS 1.5.1. ADVANCED ApiDemos is listed, but the description says this is NOT what I seek.</p>

<p>It sure would be nice to accomplish this task in one step as advertised instead of having to download each individual file (and worry if the app will work because of some omission) from <a href=""https://github.com/googlesamples/android-ads/tree/master/APIDemo"" rel=""nofollow"">https://github.com/googlesamples/android-ads/tree/master/APIDemo</a>.</p>

<p>Is there a way to <code>Import sample...</code> ApiDemos somehow?</p>
",2737933,,,,,2016-08-06 18:03:20,How to Import Sample ApiDemos into Android Studio 1.5.1,<android><android-studio><github>,3,5,,,
Android,35709241,1,35728962,921,3/1/2016 17:04:21,1,,2/29/2016 20:43:01,,7,6500,"<p>I do not have a background in imaging or graphics, so please bear with me :)</p>

<p>I am using <a href=""https://github.com/bytedeco/javacv"" rel=""nofollow noreferrer"">JavaCV</a> in one of my projects. In the <a href=""https://github.com/bytedeco/javacv/blob/master/samples/RecordActivity.java"" rel=""nofollow noreferrer"">examples</a>, a <code>Frame</code> is constructed which has a buffer of a <a href=""https://github.com/bytedeco/javacv/blob/master/src/main/java/org/bytedeco/javacv/Frame.java#L108"" rel=""nofollow noreferrer"">certain size</a>. </p>

<p>When using the <code>public void onPreviewFrame(byte[] data, Camera camera)</code> function in Android, copying this <code>data</code> byte array is no problem if you declare the <code>Frame</code> as <code>new Frame(frameWidth, frameHeight, Frame.DEPTH_UBYTE, 2);</code> where <code>frameWidth</code> and <code>frameHeight</code> are declared as </p>

<pre><code>Camera.Size previewSize = cameraParam.getPreviewSize();
int frameWidth = previewSize.width;
int frameHeight = previewSize.height;
</code></pre>

<p>Recently, Android added a method to capture your screen. Naturally, I wanted to grab those images and also covert them to <code>Frame</code>s. I modified <a href=""https://github.com/googlesamples/android-ScreenCapture"" rel=""nofollow noreferrer"">the example code from Google</a> to use the <a href=""https://developer.android.com/reference/android/media/ImageReader.html"" rel=""nofollow noreferrer"">ImageReader</a>. </p>

<p>This <code>ImageReader</code> is constructed as <code>ImageReader.newInstance(DISPLAY_WIDTH, DISPLAY_HEIGHT, PixelFormat.RGBA_8888, 2);</code>. So currently it uses the RGBA_8888 pixel format. I use the following code to copy the bytes to the <code>Frame</code>, which is instantiated as <code>new Frame(DISPLAY_WIDTH, DISPLAY_HEIGHT, Frame.DEPTH_UBYTE, 2);</code>:</p>

<pre><code>ByteBuffer buffer = mImage.getPlanes()[0].getBuffer();
byte[] bytes = new byte[buffer.remaining()];
buffer.get(bytes);
mImage.close();
((ByteBuffer) frame.image[0].position(0)).put(bytes);
</code></pre>

<p>But this gives me a <code>java.nio.BufferOverflowException</code>. I printed the sizes of both buffers and the Frame's buffer size is 691200 whereas the <code>bytes</code> array above is of size <code>1413056</code>. Figuring out how this latter number is constructed failed because <a href=""https://android.googlesource.com/platform/frameworks/base.git/+/master/media/java/android/media/ImageReader.java#847"" rel=""nofollow noreferrer"">I ran into this native call</a>. So clearly, this won't work out.</p>

<p>After quite a bit of digging I found out that the <a href=""http://developer.android.com/reference/android/graphics/ImageFormat.html#NV21"" rel=""nofollow noreferrer"">NV21 image format</a> is ""the default format for Camera preview images, when not otherwise set with setPreviewFormat(int)"", but the <a href=""http://developer.android.com/reference/android/media/ImageReader.html#newInstance%28int,%20int,%20int,%20int%29"" rel=""nofollow noreferrer"">ImageReader class does not support the NV21 format</a> (see the format parameter). So that's tough luck. In the documentation it also reads that 
""For the android.hardware.camera2 API, the YUV_420_888 format is recommended for YUV output instead.""</p>

<p>So I tried creating an ImageReader like this <code>ImageReader.newInstance(DISPLAY_WIDTH, DISPLAY_HEIGHT, ImageFormat.YUV_420_888, 2);</code>, but this gives me <code>java.lang.UnsupportedOperationException: The producer output buffer format 0x1 doesn't match the ImageReader's configured buffer format 0x23.</code> so that won't work either.</p>

<p>As a last resort, I tried to convert RGBA_8888 to YUV myself using e.g. <a href=""https://stackoverflow.com/questions/5960247/convert-bitmap-array-to-yuv-ycbcr-nv21"">this post</a>, but I fail to understand how I can obtain an <code>int[] rgba</code> as per the answer.</p>

<p>So, TL;DR <strong>how can I obtain  NV21 image data like you get in Android's <code>public void onPreviewFrame(byte[] data, Camera camera)</code> camera function to instantiate my <code>Frame</code> and work with it using Android's ImageReader (and Media Projection)?</strong> </p>

<h2>Edit (25-10-2016)</h2>

<p>I have created the following conversion runnable to go from RGBA to NV21 format:</p>

<pre><code>private class updateImage implements Runnable {

    private final Image mImage;

    public updateImage(Image image) {
        mImage = image;
    }

    @Override
    public void run() {

        int mWidth = mImage.getWidth();
        int mHeight = mImage.getHeight();

        // Four bytes per pixel: width * height * 4.
        byte[] rgbaBytes = new byte[mWidth * mHeight * 4];
        // put the data into the rgbaBytes array.
        mImage.getPlanes()[0].getBuffer().get(rgbaBytes);

        mImage.close(); // Access to the image is no longer needed, release it.

        // Create a yuv byte array: width * height * 1.5 ().
        byte[] yuv = new byte[mWidth * mHeight * 3 / 2];
        RGBtoNV21(yuv, rgbaBytes, mWidth, mHeight);
        ((ByteBuffer) yuvImage.image[0].position(0)).put(yuv);
    }

    void RGBtoNV21(byte[] yuv420sp, byte[] argb, int width, int height) {
        final int frameSize = width * height;

        int yIndex = 0;
        int uvIndex = frameSize;

        int A, R, G, B, Y, U, V;
        int index = 0;
        int rgbIndex = 0;

        for (int i = 0; i &lt; height; i++) {
            for (int j = 0; j &lt; width; j++) {

                R = argb[rgbIndex++];
                G = argb[rgbIndex++];
                B = argb[rgbIndex++];
                A = argb[rgbIndex++]; // Ignored right now.

                // RGB to YUV conversion according to
                // https://en.wikipedia.org/wiki/YUV#Y.E2.80.B2UV444_to_RGB888_conversion
                Y = ((66 * R + 129 * G + 25 * B + 128) &gt;&gt; 8) + 16;
                U = ((-38 * R - 74 * G + 112 * B + 128) &gt;&gt; 8) + 128;
                V = ((112 * R - 94 * G - 18 * B + 128) &gt;&gt; 8) + 128;

                // NV21 has a plane of Y and interleaved planes of VU each sampled by a factor
                // of 2 meaning for every 4 Y pixels there are 1 V and 1 U.
                // Note the sampling is every other pixel AND every other scanline.
                yuv420sp[yIndex++] = (byte) ((Y &lt; 0) ? 0 : ((Y &gt; 255) ? 255 : Y));
                if (i % 2 == 0 &amp;&amp; index % 2 == 0) {
                    yuv420sp[uvIndex++] = (byte) ((V &lt; 0) ? 0 : ((V &gt; 255) ? 255 : V));
                    yuv420sp[uvIndex++] = (byte) ((U &lt; 0) ? 0 : ((U &gt; 255) ? 255 : U));
                }
                index++;
            }
        }
    }
}
</code></pre>

<p>The <code>yuvImage</code> object is initialized as <code>yuvImage = new Frame(DISPLAY_WIDTH, DISPLAY_HEIGHT, Frame.DEPTH_UBYTE, 2);</code>, the <code>DISPLAY_WIDTH</code> and <code>DISPLAY_HEIGHT</code> are just two integers specifying the display size. 
This is the code where a background handler handles the onImageReady:</p>

<pre><code>private final ImageReader.OnImageAvailableListener mOnImageAvailableListener
            = new ImageReader.OnImageAvailableListener() {

        @Override
        public void onImageAvailable(ImageReader reader) {
            mBackgroundHandler.post(new updateImage(reader.acquireNextImage()));
        }

    };

...

mImageReader = ImageReader.newInstance(DISPLAY_WIDTH, DISPLAY_HEIGHT, PixelFormat.RGBA_8888, 2);
mImageReader.setOnImageAvailableListener(mOnImageAvailableListener, mBackgroundHandler);
</code></pre>

<p>The methods work and I at least don't get any errors, but the output image is malformed. What is going wrong in my conversion? An example image that is being created:</p>

<p><img src=""https://gyazo.com/5095490f2f461b2d6334da1c68c611e4.png"" alt=""example of malformed image""></p>

<h2>Edit (15-11-2016)</h2>

<p>I have modified the <code>RGBtoNV21</code> function to be the following:</p>

<pre><code>void RGBtoNV21(byte[] yuv420sp, int width, int height) {
    try {
        final int frameSize = width * height;

        int yIndex = 0;
        int uvIndex = frameSize;
        int pixelStride = mImage.getPlanes()[0].getPixelStride();
        int rowStride = mImage.getPlanes()[0].getRowStride();
        int rowPadding = rowStride - pixelStride * width;
        ByteBuffer buffer = mImage.getPlanes()[0].getBuffer();

        Bitmap bitmap = Bitmap.createBitmap(getResources().getDisplayMetrics(), width, height, Bitmap.Config.ARGB_8888);

        int A, R, G, B, Y, U, V;
        int offset = 0;

        for (int i = 0; i &lt; height; i++) {
            for (int j = 0; j &lt; width; j++) {

                // Useful link: https://stackoverflow.com/questions/26673127/android-imagereader-acquirelatestimage-returns-invalid-jpg

                R = (buffer.get(offset) &amp; 0xff) &lt;&lt; 16;     // R
                G = (buffer.get(offset + 1) &amp; 0xff) &lt;&lt; 8;  // G
                B = (buffer.get(offset + 2) &amp; 0xff);       // B
                A = (buffer.get(offset + 3) &amp; 0xff) &lt;&lt; 24; // A
                offset += pixelStride;

                int pixel = 0;
                pixel |= R;     // R
                pixel |= G;  // G
                pixel |= B;       // B
                pixel |= A; // A
                bitmap.setPixel(j, i, pixel);

                // RGB to YUV conversion according to
                // https://en.wikipedia.org/wiki/YUV#Y.E2.80.B2UV444_to_RGB888_conversion
//                        Y = ((66 * R + 129 * G + 25 * B + 128) &gt;&gt; 8) + 16;
//                        U = ((-38 * R - 74 * G + 112 * B + 128) &gt;&gt; 8) + 128;
//                        V = ((112 * R - 94 * G - 18 * B + 128) &gt;&gt; 8) + 128;

                Y = (int) Math.round(R *  .299000 + G *  .587000 + B *  .114000);
                U = (int) Math.round(R * -.168736 + G * -.331264 + B *  .500000 + 128);
                V = (int) Math.round(R *  .500000 + G * -.418688 + B * -.081312 + 128);

                // NV21 has a plane of Y and interleaved planes of VU each sampled by a factor
                // of 2 meaning for every 4 Y pixels there are 1 V and 1 U.
                // Note the sampling is every other pixel AND every other scanline.
                yuv420sp[yIndex++] = (byte) ((Y &lt; 0) ? 0 : ((Y &gt; 255) ? 255 : Y));
                if (i % 2 == 0 &amp;&amp; j % 2 == 0) {
                    yuv420sp[uvIndex++] = (byte) ((V &lt; 0) ? 0 : ((V &gt; 255) ? 255 : V));
                    yuv420sp[uvIndex++] = (byte) ((U &lt; 0) ? 0 : ((U &gt; 255) ? 255 : U));
                }
            }
            offset += rowPadding;
        }

        File file = new File(Environment.getExternalStoragePublicDirectory(Environment.DIRECTORY_PICTURES).getAbsolutePath(), ""/Awesomebitmap.png"");
        FileOutputStream fos = new FileOutputStream(file);
        bitmap.compress(Bitmap.CompressFormat.PNG, 100, fos);
    } catch (Exception e) {
        Timber.e(e, ""Converting image to NV21 went wrong."");
    }
}
</code></pre>

<p>Now the image is no longer malformed, but the chroma is off. </p>

<p><img src=""https://gyazo.com/0d9947a036c0924f4e09d55ea730e4b8.png"" alt=""Wrong color chroma""></p>

<p>The right side is the bitmap that is being created in that loop, the left side is the NV21 saved to an image. So the RGB pixels are processed correctly. Clearly the chroma is off, but the RGB to YUV conversion should be the same one as depicted by wikipedia. What could be wrong here?</p>
",1360853,,-1,,2017-05-23 12:10:04,2016-11-15 14:48:17,Android ImageReader get NV21 format?,<android><image><imaging><android-mediaprojection>,1,4,3,,
Android,35757052,1,35757934,922,3/2/2016 21:00:36,0,,3/2/2016 20:06:06,,2,3762,"<p>I'm using Google Vision API's sample to make barcode reader in a webview of existing project.
<a href=""https://github.com/googlesamples/android-vision/tree/master/visionSamples/barcode-reader"" rel=""nofollow"">https://github.com/googlesamples/android-vision/tree/master/visionSamples/barcode-reader</a></p>

<p>this is my error message:</p>

<blockquote>
  <p>Error:(36, 13) Failed to resolve: com.google.android.support:design:23.0.1</p>
</blockquote>

<p>This is build.gradle file:
<div class=""snippet"" data-lang=""js"" data-hide=""false"">
<div class=""snippet-code"">
<pre class=""snippet-code-html lang-html prettyprint-override""><code>apply plugin: 'com.android.application'

android {
    compileSdkVersion 23
    buildToolsVersion ""21.1.2""

    defaultConfig {
        applicationId ""com.example.harry""
        minSdkVersion 15
        targetSdkVersion 23
        versionCode 1
        versionName ""1.0""
    }
    buildTypes {
        release {
            minifyEnabled false
            proguardFiles getDefaultProguardFile('proguard-android.txt'), 'proguard-rules.pro'
        }
    }

    packagingOptions {
        exclude 'META-INF/DEPENDENCIES'
        exclude 'META-INF/LICENSE'
        exclude 'META-INF/LICENSE.txt'
        exclude 'META-INF/license.txt'
        exclude 'META-INF/NOTICE'
        exclude 'META-INF/NOTICE.txt'
        exclude 'META-INF/notice.txt'
        exclude 'META-INF/ASL2.0'
    }
}

dependencies {
    compile fileTree(include: ['*.jar'], dir: 'libs')
    compile 'com.android.support:support-v4:23.0.1'
    compile 'com.google.android.gms:play-services:8.1.0'
    compile 'com.google.android.support:design:23.0.1'
    compile files('libs/android-support-v4.jar')
    compile files('libs/httpclient-4.3.6.jar')
    compile files('libs/commons-codec-1.3.jar')
    compile files('libs/httpclient-4.1-beta1.jar')
    compile files('libs/apache-mime4j-0.6.jar')
    compile files('libs/httpclient-4.1.jar')
    compile files('libs/httpcore-4.1.jar')
    compile project(':..:ExpandableButtonMenu:library')

}</code></pre>
</div>
</div>
</p>

<p>when I created BarcodeCaptureActivity.java,
I get tons of errors...
BarcodeCaptureActivity.java:
<div class=""snippet"" data-lang=""js"" data-hide=""false"">
<div class=""snippet-code"">
<pre class=""snippet-code-html lang-html prettyprint-override""><code>package com.example.harry;

import android.Manifest;
import android.annotation.SuppressLint;
import android.app.Activity;
import android.app.AlertDialog;
import android.app.Dialog;
import android.content.Context;
import android.content.DialogInterface;
import android.content.Intent;
import android.content.IntentFilter;
import android.content.pm.PackageManager;
import android.hardware.Camera;
import android.os.Build;
import android.os.Bundle;
import android.support.annotation.NonNull;
import android.support.v4.app.ActivityCompat;
import android.support.v7.app.ActionBarActivity;
import android.util.Log;
import android.view.GestureDetector;
import android.view.MotionEvent;
import android.view.ScaleGestureDetector;
import android.view.View;
import android.widget.Toast;


import com.google.android.gms.common.ConnectionResult;
import com.google.android.gms.common.GoogleApiAvailability;
import com.google.android.gms.common.api.CommonStatusCodes;
import com.google.android.gms.samples.vision.barcodereader.ui.camera.CameraSource;
import com.google.android.gms.samples.vision.barcodereader.ui.camera.CameraSourcePreview;

import com.google.android.gms.samples.vision.barcodereader.ui.camera.GraphicOverlay;
import com.google.android.gms.vision.MultiProcessor;
import com.google.android.gms.vision.barcode.Barcode;
import com.google.android.gms.vision.barcode.BarcodeDetector;

import java.io.IOException;

public class BarcodeCaptureActivity extends ActionBarActivity {

    private static final String TAG = ""Barcode-reader"";

    // intent request code to handle updating play services if needed.
    private static final int RC_HANDLE_GMS = 9001;

    // permission request codes need to be &lt; 256
    private static final int RC_HANDLE_CAMERA_PERM = 2;

    // constants used to pass extra data in the intent
    public static final String AutoFocus = ""AutoFocus"";
    public static final String UseFlash = ""UseFlash"";
    public static final String BarcodeObject = ""Barcode"";

    private CameraSource mCameraSource;
    private CameraSourcePreview mPreview;
    private GraphicOverlay&lt;BarcodeGraphic&gt; mGraphicOverlay;

    // helper objects for detecting taps and pinches.
    private ScaleGestureDetector scaleGestureDetector;
    private GestureDetector gestureDetector;

    /**
     * Initializes the UI and creates the detector pipeline.
     */
    @Override
    public void onCreate(Bundle icicle) {
        super.onCreate(icicle);
        setContentView(R.layout.barcode_capture);

        mPreview = (CameraSourcePreview) findViewById(R.id.preview);
        mGraphicOverlay = (GraphicOverlay&lt;BarcodeGraphic&gt;) findViewById(R.id.graphicOverlay);

        // read parameters from the intent used to launch the activity.
        boolean autoFocus = getIntent().getBooleanExtra(AutoFocus, false);
        boolean useFlash = getIntent().getBooleanExtra(UseFlash, false);

        // Check for the camera permission before accessing the camera.  If the
        // permission is not granted yet, request permission.
        int rc = ActivityCompat.checkSelfPermission(this, Manifest.permission.CAMERA);
        if (rc == PackageManager.PERMISSION_GRANTED) {
            createCameraSource(autoFocus, useFlash);
        } else {
            requestCameraPermission();
        }

        gestureDetector = new GestureDetector(this, new CaptureGestureListener());
        scaleGestureDetector = new ScaleGestureDetector(this, new ScaleListener());

        Snackbar.make(mGraphicOverlay, ""Tap to capture. Pinch/Stretch to zoom"",
                Snackbar.LENGTH_LONG)
                .show();
    }

    /**
     * Handles the requesting of the camera permission.  This includes
     * showing a ""Snackbar"" message of why the permission is needed then
     * sending the request.
     */
    private void requestCameraPermission() {
        Log.w(TAG, ""Camera permission is not granted. Requesting permission"");

        final String[] permissions = new String[]{Manifest.permission.CAMERA};

        if (!ActivityCompat.shouldShowRequestPermissionRationale(this,
                Manifest.permission.CAMERA)) {
            ActivityCompat.requestPermissions(this, permissions, RC_HANDLE_CAMERA_PERM);
            return;
        }

        final Activity thisActivity = this;

        View.OnClickListener listener = new View.OnClickListener() {
            @Override
            public void onClick(View view) {
                ActivityCompat.requestPermissions(thisActivity, permissions,
                        RC_HANDLE_CAMERA_PERM);
            }
        };

        Snackbar.make(mGraphicOverlay, R.string.permission_camera_rationale,
                Snackbar.LENGTH_INDEFINITE)
                .setAction(R.string.ok, listener)
                .show();
    }

    @Override
    public boolean onTouchEvent(MotionEvent e) {
        boolean b = scaleGestureDetector.onTouchEvent(e);

        boolean c = gestureDetector.onTouchEvent(e);

        return b || c || super.onTouchEvent(e);
    }

    /**
     * Creates and starts the camera.  Note that this uses a higher resolution in comparison
     * to other detection examples to enable the barcode detector to detect small barcodes
     * at long distances.
     *
     * Suppressing InlinedApi since there is a check that the minimum version is met before using
     * the constant.
     */
    @SuppressLint(""InlinedApi"")
    private void createCameraSource(boolean autoFocus, boolean useFlash) {
        Context context = getApplicationContext();

        // A barcode detector is created to track barcodes.  An associated multi-processor instance
        // is set to receive the barcode detection results, track the barcodes, and maintain
        // graphics for each barcode on screen.  The factory is used by the multi-processor to
        // create a separate tracker instance for each barcode.
        BarcodeDetector barcodeDetector = new BarcodeDetector.Builder(context).build();
        BarcodeTrackerFactory barcodeFactory = new BarcodeTrackerFactory(mGraphicOverlay);
        barcodeDetector.setProcessor(
                new MultiProcessor.Builder&lt;&gt;(barcodeFactory).build());

        if (!barcodeDetector.isOperational()) {
            // Note: The first time that an app using the barcode or face API is installed on a
            // device, GMS will download a native libraries to the device in order to do detection.
            // Usually this completes before the app is run for the first time.  But if that
            // download has not yet completed, then the above call will not detect any barcodes
            // and/or faces.
            //
            // isOperational() can be used to check if the required native libraries are currently
            // available.  The detectors will automatically become operational once the library
            // downloads complete on device.
            Log.w(TAG, ""Detector dependencies are not yet available."");

            // Check for low storage.  If there is low storage, the native library will not be
            // downloaded, so detection will not become operational.
            IntentFilter lowstorageFilter = new IntentFilter(Intent.ACTION_DEVICE_STORAGE_LOW);
            boolean hasLowStorage = registerReceiver(null, lowstorageFilter) != null;

            if (hasLowStorage) {
                Toast.makeText(this, R.string.low_storage_error, Toast.LENGTH_LONG).show();
                Log.w(TAG, getString(R.string.low_storage_error));
            }
        }

        // Creates and starts the camera.  Note that this uses a higher resolution in comparison
        // to other detection examples to enable the barcode detector to detect small barcodes
        // at long distances.
        CameraSource.Builder builder = new CameraSource.Builder(getApplicationContext(), barcodeDetector)
                .setFacing(CameraSource.CAMERA_FACING_BACK)
                .setRequestedPreviewSize(1600, 1024)
                .setRequestedFps(15.0f);

        // make sure that auto focus is an available option
        if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.ICE_CREAM_SANDWICH) {
            builder = builder.setFocusMode(
                    autoFocus ? Camera.Parameters.FOCUS_MODE_CONTINUOUS_PICTURE : null);
        }

        mCameraSource = builder
                .setFlashMode(useFlash ? Camera.Parameters.FLASH_MODE_TORCH : null)
                .build();
    }

    /**
     * Restarts the camera.
     */
    @Override
    protected void onResume() {
        super.onResume();
        startCameraSource();
    }

    /**
     * Stops the camera.
     */
    @Override
    protected void onPause() {
        super.onPause();
        if (mPreview != null) {
            mPreview.stop();
        }
    }

    /**
     * Releases the resources associated with the camera source, the associated detectors, and the
     * rest of the processing pipeline.
     */
    @Override
    protected void onDestroy() {
        super.onDestroy();
        if (mPreview != null) {
            mPreview.release();
        }
    }

    /**
     * Callback for the result from requesting permissions. This method
     * is invoked for every call on {@link #requestPermissions(String[], int)}.
     * &lt;p&gt;
     * &lt;strong&gt;Note:&lt;/strong&gt; It is possible that the permissions request interaction
     * with the user is interrupted. In this case you will receive empty permissions
     * and results arrays which should be treated as a cancellation.
     * &lt;/p&gt;
     *
     * @param requestCode  The request code passed in {@link #requestPermissions(String[], int)}.
     * @param permissions  The requested permissions. Never null.
     * @param grantResults The grant results for the corresponding permissions
     *                     which is either {@link PackageManager#PERMISSION_GRANTED}
     *                     or {@link PackageManager#PERMISSION_DENIED}. Never null.
     * @see #requestPermissions(String[], int)
     */
    @Override
    public void onRequestPermissionsResult(int requestCode,
                                           @NonNull String[] permissions,
                                           @NonNull int[] grantResults) {
        if (requestCode != RC_HANDLE_CAMERA_PERM) {
            Log.d(TAG, ""Got unexpected permission result: "" + requestCode);
            super.onRequestPermissionsResult(requestCode, permissions, grantResults);
            return;
        }

        if (grantResults.length != 0 &amp;&amp; grantResults[0] == PackageManager.PERMISSION_GRANTED) {
            Log.d(TAG, ""Camera permission granted - initialize the camera source"");
            // we have permission, so create the camerasource
            boolean autoFocus = getIntent().getBooleanExtra(AutoFocus,false);
            boolean useFlash = getIntent().getBooleanExtra(UseFlash, false);
            createCameraSource(autoFocus, useFlash);
            return;
        }

        Log.e(TAG, ""Permission not granted: results len = "" + grantResults.length +
                "" Result code = "" + (grantResults.length &gt; 0 ? grantResults[0] : ""(empty)""));

        DialogInterface.OnClickListener listener = new DialogInterface.OnClickListener() {
            public void onClick(DialogInterface dialog, int id) {
                finish();
            }
        };

        AlertDialog.Builder builder = new AlertDialog.Builder(this);
        builder.setTitle(""Multitracker sample"")
                .setMessage(R.string.no_camera_permission)
                .setPositiveButton(R.string.ok, listener)
                .show();
    }

    /**
     * Starts or restarts the camera source, if it exists.  If the camera source doesn't exist yet
     * (e.g., because onResume was called before the camera source was created), this will be called
     * again when the camera source is created.
     */
    private void startCameraSource() throws SecurityException {
        // check that the device has play services available.
        int code = GoogleApiAvailability.getInstance().isGooglePlayServicesAvailable(
                getApplicationContext());
        if (code != ConnectionResult.SUCCESS) {
            Dialog dlg =
                    GoogleApiAvailability.getInstance().getErrorDialog(this, code, RC_HANDLE_GMS);
            dlg.show();
        }

        if (mCameraSource != null) {
            try {
                mPreview.start(mCameraSource, mGraphicOverlay);
            } catch (IOException e) {
                Log.e(TAG, ""Unable to start camera source."", e);
                mCameraSource.release();
                mCameraSource = null;
            }
        }
    }

    /**
     * onTap is called to capture the oldest barcode currently detected and
     * return it to the caller.
     *
     * @param rawX - the raw position of the tap
     * @param rawY - the raw position of the tap.
     * @return true if the activity is ending.
     */
    private boolean onTap(float rawX, float rawY) {

        //TODO: use the tap position to select the barcode.
        BarcodeGraphic graphic = mGraphicOverlay.getFirstGraphic();
        Barcode barcode = null;
        if (graphic != null) {
            barcode = graphic.getBarcode();
            if (barcode != null) {
                Intent data = new Intent();
                data.putExtra(BarcodeObject, barcode);
                setResult(CommonStatusCodes.SUCCESS, data);
                finish();
            }
            else {
                Log.d(TAG, ""barcode data is null"");
            }
        }
        else {
            Log.d(TAG,""no barcode detected"");
        }
        return barcode != null;
    }

    private class CaptureGestureListener extends GestureDetector.SimpleOnGestureListener {

        @Override
        public boolean onSingleTapConfirmed(MotionEvent e) {

            return onTap(e.getRawX(), e.getRawY()) || super.onSingleTapConfirmed(e);
        }
    }

    private class ScaleListener implements ScaleGestureDetector.OnScaleGestureListener {

        /**
         * Responds to scaling events for a gesture in progress.
         * Reported by pointer motion.
         *
         * @param detector The detector reporting the event - use this to
         *                 retrieve extended info about event state.
         * @return Whether or not the detector should consider this event
         * as handled. If an event was not handled, the detector
         * will continue to accumulate movement until an event is
         * handled. This can be useful if an application, for example,
         * only wants to update scaling factors if the change is
         * greater than 0.01.
         */
        @Override
        public boolean onScale(ScaleGestureDetector detector) {
            return false;
        }

        /**
         * Responds to the beginning of a scaling gesture. Reported by
         * new pointers going down.
         *
         * @param detector The detector reporting the event - use this to
         *                 retrieve extended info about event state.
         * @return Whether or not the detector should continue recognizing
         * this gesture. For example, if a gesture is beginning
         * with a focal point outside of a region where it makes
         * sense, onScaleBegin() may return false to ignore the
         * rest of the gesture.
         */
        @Override
        public boolean onScaleBegin(ScaleGestureDetector detector) {
            return true;
        }

        /**
         * Responds to the end of a scale gesture. Reported by existing
         * pointers going up.
         * &lt;p/&gt;
         * Once a scale has ended, {@link ScaleGestureDetector#getFocusX()}
         * and {@link ScaleGestureDetector#getFocusY()} will return focal point
         * of the pointers remaining on the screen.
         *
         * @param detector The detector reporting the event - use this to
         *                 retrieve extended info about event state.
         */
        @Override
        public void onScaleEnd(ScaleGestureDetector detector) {
            mCameraSource.doZoom(detector.getScaleFactor());
        }
    }
}
}</code></pre>
</div>
</div>
</p>

<p>why can't android studio recognize import in java?</p>

<p>I'm stuck here for 2 days...
please help me!!!!</p>
",6009679,,6009679,,2016-03-02 20:39:29,2016-03-03 20:47:32,Gradle error when using Google's latest API,<java><android><android-studio><android-gradle><google-vision>,1,4,,,
Android,35793657,1,35797305,923,3/4/2016 13:28:15,0,,3/4/2016 10:28:01,,3,755,"<p>I am using Camera2 API with help of the two examples that you can find here:</p>

<ul>
<li><a href=""https://github.com/googlesamples/android-Camera2Video/"" rel=""nofollow"">GitHub - Camera2Video</a></li>
<li><a href=""https://github.com/googlesamples/android-Camera2Basic"" rel=""nofollow"">GitHub - Camera2Basic</a></li>
</ul>

<p>I am using identical source code like in the above links, so I wont copy my Source here (unless you require some parts, I will edit my question and post it).</p>

<p><strong>EDIT:</strong> </p>

<p>Ran some tests. When I try to play the video through my phone, it only displays the first frame and I can hear Audio (voices) that were actually in the recording. Once the video goes until end, the video somehow restarts automatically and displays the video as it should.</p>

<p>However, when I try to play the video on my PC (copying it from Phone to Desktop), I only get black screen until the last frame. Last frame is shown, but the video does not play at all. I can hear Audio (voices) tho.</p>

<p>I am thinking of maybe there's issue with some Video encoding / decoding?</p>

<p><strong>ISSUE:</strong></p>

<blockquote>
  <p>In my case the Video recording won't work. I
  can see both files in the directory that they should be on my Phone,
  but when I play the video
  (5 second video) <strong>first 4 seconds are black</strong>, then last second is like
  one Frame of what I recorded and that's it, yet file size seems big (160MB).</p>
</blockquote>

<p><strong>SCREENS:</strong></p>

<ul>
<li><em>Will post video once uploaded</em></li>
</ul>

<p>I do not know what is wrong, can someone please help?</p>
",4090338,,4090338,,2016-03-04 13:14:16,2017-11-11 9:12:23,Android Camera2 picture is black and video records only 1sec,<android><video><android-camera><android-image><android-camera2>,4,2,,,
Android,35636078,1,35846721,924,3/7/2016 14:50:52,11,,2/25/2016 19:04:10,,1,664,"<p>I am attempting to use the Google Credentials API to store credentials for my app.  I have downloaded and installed both sample apps from here (<a href=""https://github.com/googlesamples/android-credentials"" rel=""nofollow"">https://github.com/googlesamples/android-credentials</a>) as well as tried the code in my own app.  When attempting to save any credentials I get the following error - Status{statusCode=No eligible accounts can be found, resolution=null}.</p>

<p>I am testing on a Nexus 5x with a single Gmail account configured.</p>

<p>Any help would be greatly appreciated.</p>
",2051363,,,,,2016-10-31 16:56:40,Android Credentials API - No eligible accounts,<android><google-api-client>,2,0,,,
Android,33472447,1,36019839,925,3/15/2016 18:59:08,134,,11/2/2015 7:15:07,,3,2584,"<p>I am trying to implement fingerprint introduced in Android-6.0-marshmallow, but face an issue.<br>
The issue being that when I am try to run the sample code provided here </p>

<p><a href=""https://github.com/googlesamples/android-FingerprintDialog"" rel=""nofollow"">android-FingerprintDialog</a></p>

<p>it shows a ""Too many attempts"" error more than once.<br>
To reproduce the issue, the steps are</p>

<p>1 - Click on purchase button<br>
2 - Provide wrong touch id until the ""too many attempts"" error occur<br>
3 - Provide password<br>
4 - Again click on purchase button.  </p>

<p>Now it again shows the ""Too many attempts"" error and asks for a password (which is not the supposed behaviour)</p>

<p>Please tell me how to fix this issue. </p>
",2938319,,2649012,,2015-11-02 7:54:37,2016-03-15 18:59:08,Fingerprint: too many attempts issue,<android><fingerprint><android-6.0-marshmallow>,1,0,,,
Android,35968315,1,36030703,926,3/16/2016 8:51:43,3,,3/13/2016 8:48:17,,8,6675,"<p>I'm new in Android Camera2 API.
I just move my all project to the new Camera2 API. I have used the <a href=""https://github.com/googlesamples/android-Camera2Basic/blob/master/Application/src/main/java/com/example/android/camera2basic/Camera2BasicFragment.java"" rel=""nofollow noreferrer"">Camera2Basic example</a> as a starting point.</p>

<p>I'm now trying handle zoom by adding this:</p>

<pre><code>public boolean onTouchEvent(MotionEvent event) {
    try {
        CameraManager manager = (CameraManager) getSystemService(Context.CAMERA_SERVICE);
        CameraCharacteristics characteristics = manager.getCameraCharacteristics(mCameraId);
        float maxZoom = (characteristics.get(CameraCharacteristics.SCALER_AVAILABLE_MAX_DIGITAL_ZOOM))*10;

        Rect m = characteristics.get(CameraCharacteristics.SENSOR_INFO_ACTIVE_ARRAY_SIZE);
        int action = event.getAction();
        float current_finger_spacing;

        if (event.getPointerCount() &gt; 1) {
            // Multi touch logic
            current_finger_spacing = getFingerSpacing(event);

            if(finger_spacing != 0){
                if(current_finger_spacing &gt; finger_spacing &amp;&amp; maxZoom &gt; zoom_level){
                    zoom_level++;

                }
                else if (current_finger_spacing &lt; finger_spacing &amp;&amp; zoom_level &gt; 1){
                    zoom_level--;

                }
                int minW = (int) (m.width() / maxZoom);
                int minH = (int) (m.height() / maxZoom);
                int difW = m.width() - minW;
                int difH = m.height() - minH;
                int cropW = difW /100 *(int)zoom_level;
                int cropH = difH /100 *(int)zoom_level;
                cropW -= cropW &amp; 3;
                cropH -= cropH &amp; 3;
                Rect zoom = new Rect(cropW, cropH, m.width() - cropW, m.height() - cropH);
                mPreviewRequestBuilder.set(CaptureRequest.SCALER_CROP_REGION, zoom);
            }
            finger_spacing = current_finger_spacing;
        }
        else{
            if (action == MotionEvent.ACTION_UP) {
                //single touch logic
            }
        }

        try {
            mCaptureSession.setRepeatingRequest(mPreviewRequestBuilder.build(), mCaptureCallback,
                    null);
        }
        catch (CameraAccessException e) {
            e.printStackTrace();
        }
        catch (NullPointerException ex)
        {
            ex.printStackTrace();
        }
    }
    catch (CameraAccessException e)
    {
        throw new RuntimeException(""can not access camera."", e);
    }

    return true;
}
</code></pre>

<p>And this:</p>

<pre><code>private float getFingerSpacing(MotionEvent event) {
    float x = event.getX(0) - event.getX(1);
    float y = event.getY(0) - event.getY(1);
    return FloatMath.sqrt(x * x + y * y);
}
</code></pre>

<p>But after I captured, the picture result is without the zoom.
How can I make it happen?
Thanks all.</p>

<p><strong>Update</strong>
Need to add <code>captureBuilder.set(CaptureRequest.SCALER_CROP_REGION, zoom);</code> to <code>captureStillPicture()</code> method.</p>
",5904387,,1363438,,2018-10-10 20:41:19,2018-10-10 20:41:19,android camera2 handle zoom,<android><zoom><capture><android-camera2>,4,4,5,,
Android,36034766,1,36062362,927,3/17/2016 13:43:56,1,,3/16/2016 11:45:21,,8,2523,"<p>I am trying to generate an Android application to use some extra *.so libraries (specifically 'libinterface.so'). Those libraries are generated externally, and included as a dependency inside a wrapper class called from Java side. The library is stored into 'src/main/jniLibs/armeabi-v7a'. The system includes all the .so file into the generated app.</p>

<p>Previously, I was using Eclipse for this purpose and I was able to use this library, but I have problems to do this with Android Studio.</p>

<p>The generated error is: </p>

<pre><code>/home/******/Libraries/android-sdk-linux/ndk-bundle/toolchains/aarch64-linux-android-4.9/prebuilt/linux-x86_64/bin/../lib/gcc/aarch64-linux-android/4.9/../../../../aarch64-linux-android/bin/ld: cannot find -linterface
</code></pre>

<p>As the error is thrown by the linker, it looks related with the library inclusion step. On Eclipse, I was using an 'Android.mk' file to include the new library, but I can't find the way to do this using Gradle.</p>

<pre><code>#Android.mk
LOCAL_PATH := $(call my-dir)
include $(CLEAR_VARS)
LOCAL_MODULE := libinterface-prebuilt
LOCAL_SRC_FILES := prebuilt/libinterface.so
include $(PREBUILT_SHARED_LIBRARY)
</code></pre>

<p>I am trying to include the libraries with this gradle definition (Note: I have included the last JNI support and gradle-experimental <a href=""https://codelabs.developers.google.com/codelabs/android-studio-jni/index.html?index=..%2F..%2Findex#0"" rel=""nofollow"">using this tutorial</a>):</p>

<pre><code>...
android.buildTypes {
    release {
        minifyEnabled = false
        proguardFiles.add(file('proguard-android.txt'))
    }
}

android.ndk {
    moduleName = ""custom_wrapper_jni""
    cppFlags.add(""-I"" + file(""src/main/jni"").absolutePath)
    cppFlags.add(""-I"" + file(""../Integration/include"").absolutePath)  // &lt;- New library header include path 
    cppFlags.add(""-L"" + file(""src/main/jniLibs/armeabi-v7a"").absolutePath)  // &lt;- Path where the library is stored
    cppFlags.add(""-std=c++11"")
    stl = ""stlport_static"" // Which STL library to use: gnustl or stlport
    ldLibs.add(""log"")

    ldLibs.add(""interface"")    //&lt;- Library to be included
}
...
</code></pre>

<p>The library is compiled externally using CMake and makefile tools, and it is cross-compiled 'correctly' for Android platform (tested with Eclipse and ADT).</p>

<p>I have implemented the wrapper like this:</p>

<pre><code>// custom_wrapper_jni.h
#ifndef ANDROID_JNI_H
#define ANDROID_JNI_H

#include &lt;jni.h&gt;

extern ""C""
{
    JNIEXPORT jint JNICALL
    Java_com_example_goe_android_JniInterface_testFunction(JNIEnv *env,
                                                           jobject instance);
}
#endif
</code></pre>

<p>and</p>

<pre><code>// custom_wrapper_jni.cpp
#include &lt;custom_wrapper_jni.h&gt;

#include ""Interface.h""   // Header of the included library

Interface* mInterface = Interface::create();  // Generate the library class instance

JNIEXPORT jint JNICALL
Java_com_example_goe_android_JniInterface_testFunction(JNIEnv *env,
                                                    jobject instance)
{
    LOGI(""Test function called in wrapper!"");
    return mInterface-&gt;test();    // Use the instance
}
</code></pre>

<p>The header of the library looks like this:</p>

<pre><code>#ifndef INTERFACE_H__
#define INTERFACE_H__

#include &lt;string&gt;

class Interface
{
public:
    static Interface* create();
    virtual ~Interface(){}


    // Testing function
    virtual int test() = 0;

protected:
    Interface();
};
#endif // INTERFACE_H__
</code></pre>

<p>Thanks in advance.</p>

<h1>UPDATE:</h1>

<p>Following <a href=""https://github.com/googlesamples/android-ndk/tree/master/hello-thirdparty"" rel=""nofollow"">this example</a>, I have included some blocks into gradle script:</p>

<pre><code>def lib_path = file(""src/main/jniLibs"").absolutePath

model {

    repositories {
        libs(PrebuiltLibraries) {
            newlibs {
                headers.srcDir file(""../Integration/include"").absolutePath
                binaries.withType(SharedLibraryBinary) {
                    sharedLibraryFile = file(""${lib_path}/${targetPlatform.getName()}/libinterface.so"")
                    println ""Included libraries: "" + file(""${lib_path}/${targetPlatform.getName()}/libinterface.so"")
                }
            }
        }
    }

    android {
     ...
    }

    android.sources {
        main {
            jni {
                dependencies {
                    library ""newlibs"" linkage ""shared""
                }
            }
        }
    }
}
</code></pre>

<p>but is not working:</p>

<pre><code>Error: org.gradle.nativeplatform.toolchain.internal.CommandLineToolInvocationFailure: Linker failed while linking libcustom_wrapper_jni.so.
</code></pre>
",1407528,,1407528,,2016-03-17 7:29:10,2016-03-17 13:43:56,How to use extra *.so libraries on Android Studio and NDK,<android><android-studio><java-native-interface><shared-libraries><gradle-experimental>,1,7,2,,
Android,34832098,1,36071166,928,3/17/2016 20:34:25,61,,1/16/2016 21:02:33,,1,1123,"<p>I'm facing the problem with recording video by new camera2 api. I'm playing with project from 
<a href=""https://github.com/googlesamples/android-Camera2Video"" rel=""nofollow"">https://github.com/googlesamples/android-Camera2Video</a>
which demonstrates video recording using new camera2 api. Recording works well but rotation of recorded mp4 video is different because of different devices.</p>

<p>Nexus 9 result video is fine but Nexus 5X not.</p>

<p><strong>I've heard that Nexus 5X has camera rotated upside down</strong>. In this case I would set MediaRecorder flags to record properly but...</p>

<p><strong>My question is, how to recognize programmatically whether device has or doesn't have camera rotated upside down?</strong></p>

<p>Thanks for any help!</p>
",3846287,,3846287,,2016-03-17 20:34:41,2016-06-30 12:06:29,Nexus 5X records video rotated upside down using MediaRecorder and camera2,<android><video-capture><android-mediarecorder><android-camera2>,2,0,,,
Android,36204550,1,36206257,929,3/24/2016 17:20:56,0,,3/24/2016 15:55:14,,1,3726,"<p>I am trying to understand how to use Api.camera2
and I am following google sample from this link 
<a href=""https://github.com/googlesamples/android-Camera2Basic"" rel=""nofollow"">https://github.com/googlesamples/android-Camera2Basic</a></p>

<p>when I open the project it works but when I try it to rebuild the app to see  the effect of each part of the code I got the following error
cannotresolve method newinstance()
 it is the main java class</p>

<p><div class=""snippet"" data-lang=""js"" data-hide=""false"">
<div class=""snippet-code"">
<pre class=""snippet-code-js lang-js prettyprint-override""><code>package com.example.jimy.camera_app_learn;




import android.app.Activity;
        import android.os.Bundle;

public class CameraActivity extends Activity {

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_camera);
        if (null == savedInstanceState) {
            getFragmentManager().beginTransaction()
                    .replace(R.id.container,  Camera2BasicFragment.newInstance())
                    .commit();
        }
    }

}</code></pre>
</div>
</div>
</p>

<p>i tried exporting project setting from the original project but it did not work  </p>
",5939975,,,,,2016-07-14 14:02:43,cannot resolve method newinstance(),<android><android-fragments><fragment><android-fragmentactivity><android-camera2>,2,4,,,
Android,36180407,1,36235440,930,3/26/2016 12:45:13,3,,3/23/2016 14:03:39,,5,4592,"<p>I'm doing some simple scanning + advertising testing on bluetooth LE feature for Android using this <a href=""https://github.com/googlesamples/android-BluetoothAdvertisements"" rel=""noreferrer"">sample-code</a></p>

<p>I'm testing it using a Samsung 6 and a Nexus 9, and for some reason if I leave the app running on the Samsung and restart the app on the Nexus, the next time the Samsung devices finds the other device, it has a different address.</p>

<p>In code:</p>

<p><a href=""https://i.stack.imgur.com/D3b8F.png"" rel=""noreferrer""><img src=""https://i.stack.imgur.com/D3b8F.png"" alt=""enter image description here""></a></p>

<p>On the device:</p>

<p><a href=""https://i.stack.imgur.com/aFxw2.png"" rel=""noreferrer""><img src=""https://i.stack.imgur.com/aFxw2.png"" alt=""enter image description here""></a></p>

<p>The funny thing it doesn't happen the other way around. (Samsung always has the same address when discovered from the Nexus 9)</p>

<ul>
<li>Is this a common behavior between devices?</li>
<li>Is there another way to identify a specific device besides it's mac address?</li>
</ul>
",219777,,,,,2016-03-26 12:45:13,Why the address of my BluetoothDevice changes every time I relaunch the app?,<android><bluetooth-lowenergy>,1,1,1,,
Android,36368371,1,36389005,931,4/3/2016 17:56:26,1,,4/2/2016 2:02:43,,2,1294,"<p>I want to write a java program using the Google Fit <a href=""https://developers.google.com/fit/rest/"" rel=""nofollow"">REST API</a>. (It's not an Android app, so I can't use the Android API.)</p>

<p>It seems like there is a <a href=""https://developers.google.com/api-client-library/java/apis/fitness/v1"" rel=""nofollow"">Java Client library for the REST API</a> - so I was thinking this would be easy.</p>

<p>However, I can't find any samples/examples that explain how to use the client library (just the <a href=""https://developers.google.com/resources/api-libraries/documentation/fitness/v1/java/latest/"" rel=""nofollow"">javadoc</a>).</p>

<p>I found examples about how to use the Android API - e.g. <a href=""https://github.com/googlesamples/android-fit/blob/master/BasicHistorySessions/app/src/main/java/com/google/android/gms/fit/samples/basichistorysessions/MainActivity.java"" rel=""nofollow"">this</a>. But it's completely different, so no use.</p>

<p>For other Google APIs that I have used, the Client Library comes with examples... not so in this case. </p>

<p>Any ideas please? Thanks.</p>
",2509368,,2509368,,2016-04-02 3:35:59,2016-12-09 13:41:02,Examples for Java Client Library for Google Fit REST API (not Android API!),<java><google-fit>,3,0,,,
Android,36472561,1,36482728,932,4/7/2016 17:00:56,0,,4/7/2016 9:51:48,,5,721,"<p>I'm using NDK with the experimental gradle plugin, and initially I was able to debug my native code.</p>

<p>Then I saw this issue <a href=""https://github.com/googlesamples/android-ndk/issues/119"">https://github.com/googlesamples/android-ndk/issues/119</a> and this blog post <a href=""http://frogermcs.github.io/json-parsing-with-flatbuffers-in-android/"">http://frogermcs.github.io/json-parsing-with-flatbuffers-in-android/</a>.
This approach would be great, because I could use the stable gradle plugin for android specific code, and the experimental gradle plugin for the native code, witch would be great to use use databinding for example.
I was able to use this structure, but I lost the ability to debug native code.</p>

<p>I have created a sample project that illustrate my problem.
<a href=""https://github.com/4brunu/AndroidNDKDebug"">https://github.com/4brunu/AndroidNDKDebug</a></p>

<p>In there you can find two projects.
The first one ""hello-jni-one-gradle-plugin"", only use the experimental gradle plugin, and I'm able to debug the native code.
The second one ""hello-jni-two-gradle-plugins"", I use the stable gradle plugin for android specific code, and the experimental gradle plugin for the native code, and I'm unable to debug the native code.</p>

<p>Am I doing something wrong?
Could you help me enable native code debug in the second project please?</p>

<p>Thanks</p>
",976628,,,,,2016-04-07 17:00:56,Android NDK unable to debug native code with two gradle plugins,<android><debugging><android-ndk><java-native-interface><native>,1,0,2,,
Android,36004651,1,36487904,933,4/7/2016 21:53:50,23,,3/15/2016 7:06:47,,10,802,"<p>OK, perhaps it is very simple, but I just can not figure it out right now.</p>

<p>I have imported google sample project <a href=""https://github.com/googlesamples/android-CardReader.git"" rel=""nofollow"">Card Reader</a> in Android Studio 1.5.1, it compiles at compileSdkVerison 23, it works on my Mobile.</p>

<p>Then I walked through the SDK while came to source code to <code>android.nfc.tech.BasicTagTechnology</code>, I found <code>TransceiveResult</code> inside <code>android.nfc.tech.BasicTagTechnology#transceive</code> couldn't not be resolved then I found the class <code>TransceiveResult</code> is missing in my <code>D:\Android\sdk\platforms\android-23\android.jar</code>, but presents in Android source code here <code>D:\Android\sdk\sources\android-23\android\nfc\TransceiveResult.java</code> then I realized it could be hidden from public, not exported, actually it is</p>

<pre><code>/**
 * Class used to pipe transceive result from the NFC service.
 *
 * @hide
 */

public final class TransceiveResult implements Parcelable
</code></pre>

<p>Then I have done some random things, after I have sync the project, clean and rebuild, invalidate caches / restarted, still not able to resolve <code>TransceiveResult</code> by the way, I am wondering since the symbol has been lost in SDK, how can the project compile smoothly?</p>

<p><strong>EDIT for I finally Aha</strong></p>

<p>We call <code>android.nfc.tech.BasicTagTechnology#transceive</code> in our code rather than <code>TransceiveResult</code>, in the compile-time we no need to resolve <code>TransceiveResult</code>, we only need to resolve <code>android.nfc.tech.BasicTagTechnology#transceive</code> which is referenced in our code, I was lost at that moment.</p>
",1356874,,1356874,,2016-04-11 11:28:21,2016-04-11 11:35:03,How can Android project compile when imported class is missing in SDK?,<android><android-studio><android-sdk-tools><android-build><android-studio-import>,1,7,1,,
Android,36530342,1,36530652,934,4/10/2016 13:53:33,0,,4/10/2016 13:24:06,,1,807,"<p>I trying to do some ndk developing using Android Studio 2.0 with Gradle, I downloaded SDK and NDK, and set the paths in settings. But when I trying to play with google's NDK examples, the editor can't find ndk c/c++ header files(like ""jni.h"" etc.). Although I can compile the project.</p>

<p>I'm on Windows 10 platform, using Android Studio 2.0, I'm using the example from ""<a href=""https://github.com/googlesamples/android-ndk"" rel=""nofollow"">https://github.com/googlesamples/android-ndk</a>""</p>

<p>I have done NDK development using Android Studio before on Mac, and things work fine.</p>

<p>Anyone know what's happening?</p>
",4185853,,,,,2016-04-10 13:53:33,"android studio ndk develop, editor can't find ndk headers",<c++><android-studio><gradle><android-ndk><header>,1,0,,,
Android,35133519,1,36597669,935,4/13/2016 11:58:46,72,,2/1/2016 14:51:57,,4,355,"<p>I'm trying to setup a test project like is described in the <a href=""https://github.com/googlesamples/android-testing-templates/tree/master/AndroidTestingBlueprint"" rel=""nofollow"">Android Testing Blueprint</a> but I receive the following NoClassDefFoundError:</p>

<pre><code>java.lang.NoClassDefFoundError: android.test.mock.MockContentResolver
</code></pre>

<p>Android Studio resolves this correctly but when running I receive this error.</p>

<p>It's worth to note that I do not have an androidTest configuration on the app project, instead I only have a separate <code>tests</code> module with:</p>

<pre><code>apply plugin: 'com.android.test'
</code></pre>

<p>I'm running tests like this:</p>

<pre><code> ./gradlew :tests:connectedAndroidTest
</code></pre>

<p>Test project to reproduce this issue can be found here:
<a href=""https://github.com/vexdev/android-testing-templates/tree/master/AndroidTestingBlueprint"" rel=""nofollow"">https://github.com/vexdev/android-testing-templates/tree/master/AndroidTestingBlueprint</a></p>

<p>EDIT: Also asked on <a href=""https://plus.google.com/106636663923951797914/posts/PTvUTCP39Gm"" rel=""nofollow"">Android Development community</a></p>

<p>EDIT: Also created following android issue:
<a href=""https://code.google.com/p/android/issues/detail?id=200182&amp;thanks=200182&amp;ts=1454489567"" rel=""nofollow"">https://code.google.com/p/android/issues/detail?id=200182&amp;thanks=200182&amp;ts=1454489567</a></p>
",1634147,,1634147,,2016-02-03 8:53:59,2016-04-13 11:58:46,MockContentResolver is not found in an Android Test project with separate module,<android><android-testing>,3,2,1,,
Android,35620400,1,36716795,936,4/19/2016 11:16:49,54,,2/25/2016 6:56:21,,5,4069,"<p>Basically, what I am trying to do is change the CONTROL_AE_MODE by button click in the app. The user can use AUTO flash(ON_AUTO_FLASH), turn if ON(ON_ALWAYS_FLASH), or OFF(CONTROL_AE_MODE_OFF).</p>

<p>In this example: <a href=""https://github.com/googlesamples/android-Camera2Basic/blob/master/Application/src/main/java/com/example/android/camera2basic/Camera2BasicFragment.java"" rel=""noreferrer"">https://github.com/googlesamples/android-Camera2Basic/blob/master/Application/src/main/java/com/example/android/camera2basic/Camera2BasicFragment.java</a></p>

<p>Line 818, they set the flash once:</p>

<pre><code>// Use the same AE and AF modes as the preview.
            captureBuilder.set(CaptureRequest.CONTROL_AF_MODE,
                    CaptureRequest.CONTROL_AF_MODE_CONTINUOUS_PICTURE);
            setAutoFlash(captureBuilder);

            // Orientation
            int rotation = activity.getWindowManager().getDefaultDisplay().getRotation();
            captureBuilder.set(CaptureRequest.JPEG_ORIENTATION, ORIENTATIONS.get(rotation));

            CameraCaptureSession.CaptureCallback CaptureCallback
                    = new CameraCaptureSession.CaptureCallback() {

                @Override
                public void onCaptureCompleted(@NonNull CameraCaptureSession session,
                                               @NonNull CaptureRequest request,
                                               @NonNull TotalCaptureResult result) {
                    showToast(""Saved: "" + mFile);
                    Log.d(TAG, mFile.toString());
                    unlockFocus();
                }
            };

            mCaptureSession.stopRepeating();
            mCaptureSession.capture(captureBuilder.build(), CaptureCallback, null);
</code></pre>

<p>And then builds the CaptureSession at line 840.</p>

<p>Is there a way to change the CONTROL_AE_MODE after the preview is made?</p>

<p>I have tried remaking the session, which kinda worked:</p>

<pre><code>if(flashMode == CameraView.CAMERA_FLASH_ON){
            Log.e(""CAMERA 2"", ""FLASH ON"");
            mPreviewCaptureRequestBuilder.set(CaptureRequest.CONTROL_AE_MODE, CaptureRequest.CONTROL_AE_MODE_ON_ALWAYS_FLASH);
        }else if(flashMode == CameraView.CAMERA_FLASH_OFF){
            Log.e(""CAMERA 2"", ""FLASH OFF"");
            mPreviewCaptureRequestBuilder.set(CaptureRequest.CONTROL_AE_MODE, CaptureRequest.CONTROL_AE_MODE_OFF);
        }else if(flashMode == CameraView.CAMERA_FLASH_AUTO){
            Log.e(""CAMERA 2"", ""FLASH AUTO"");
            mPreviewCaptureRequestBuilder.set(CaptureRequest.CONTROL_AE_MODE, CaptureRequest.CONTROL_AE_MODE_ON_AUTO_FLASH);
        }
        mFlashMode = flashMode;
        if (mCameraCaptureSession != null) {
            mCameraCaptureSession.close();
            mCameraCaptureSession = null;
       }
  createCameraPreviewSession();
</code></pre>

<p>For some reason, CONTROL_AE_MODE_OFF would turn the whole preview black.
I tried looking in the docs for methods to update but haven't found anything. </p>

<p>Any tutorials or docs is much appreciated.</p>
",1601974,,,,,2019-01-15 10:01:57,Changing Flash setting of Android Camera 2 at runtime,<java><android><mobile><android-camera2>,3,2,,,
Android,37124544,1,37147778,937,5/10/2016 19:54:29,1,,5/9/2016 20:06:31,,2,208,"<p>I have a few tests that have multiple annotations:</p>

<pre><code>@Test
@LargeTest
@FlakyTest
</code></pre>

<p>I found a way to run only @LargeTest from <a href=""https://github.com/googlesamples/android-testing-templates/tree/master/AndroidTestingBlueprint"" rel=""nofollow"">here</a>.</p>

<blockquote>
  <p>./gradlew app:connectedAndroidTest
  -Pandroid.testInstrumentationRunnerArguments.size=large</p>
</blockquote>

<p>Is there a way to run all Instrumentation Tests except those annotated as @FlakyTest?</p>
",4731895,,,,,2016-05-10 19:54:29,Gradle JUnit android run all but @FlakyTest,<android><gradle><junit><android-espresso>,1,0,,,
Android,37144657,1,37149446,938,5/10/2016 21:41:20,0,,5/10/2016 16:56:34,,3,2561,"<p>My problem is when I switch between different flashmodes and then want to capture an image, my captureBuilder won't set the chosen flashmode. It only works when i close and reopen the camera.</p>

<p>I took the <a href=""https://github.com/googlesamples/android-Camera2Basic"" rel=""nofollow"">https://github.com/googlesamples/android-Camera2Basic</a> as a starting point.</p>

<p>my method:</p>

<pre><code>   private void captureStillPicture() {
  try {
     final Activity activity = (Activity) context;
     if (null == activity || null == mCameraDevice) {
        return;
     }
     // This is the CaptureRequest.Builder that we use to take a picture.
     CaptureRequest.Builder captureBuilder =
           mCameraDevice.createCaptureRequest(CameraDevice.TEMPLATE_STILL_CAPTURE);
     captureBuilder.addTarget(mImageReader.getSurface());

     // Use the same AE and AF modes as the preview.
     captureBuilder.set(CaptureRequest.CONTROL_AF_MODE,
           CaptureRequest.CONTROL_AF_MODE_CONTINUOUS_PICTURE);
     setCurrentFlash(captureBuilder);

     // Orientation
     int rotation = activity.getWindowManager()
           .getDefaultDisplay()
           .getRotation();
     captureBuilder.set(CaptureRequest.JPEG_ORIENTATION, getOrientation(rotation));

     CameraCaptureSession.CaptureCallback captureCallback =
           new CameraCaptureSession.CaptureCallback() {

              @Override
              public void onCaptureCompleted(@NonNull CameraCaptureSession session,
                    @NonNull CaptureRequest request, @NonNull TotalCaptureResult result) {
                 super.onCaptureCompleted(session, request, result);
                 Toast.makeText(context, ""image captured"", Toast.LENGTH_SHORT)
                       .show();
                 unlockFocus();
              }
           };

              mCaptureSession.stopRepeating();
     mCaptureSession.capture(captureBuilder.build(), captureCallback, null);
  } catch (CameraAccessException e) {
     Log.e(this.getClass()
           .getSimpleName(), e.getMessage(), e);
  }
</code></pre>

<p>This is the setCurrentFlash method:</p>

<pre><code>   private void setCurrentFlash(CaptureRequest.Builder requestBuilder) {
  if (mFlashSupported) {
     switch (flashMode.name()) {
        case FLASH_AUTO:
           requestBuilder.set(CaptureRequest.CONTROL_AE_MODE,
                 CaptureRequest.CONTROL_AE_MODE_ON_AUTO_FLASH);
           break;
        case FLASH_ON:
           requestBuilder.set(CaptureRequest.CONTROL_AE_MODE,
                 CaptureRequest.CONTROL_AE_MODE_ON_ALWAYS_FLASH);
           break;
        case FLASH_OFF:
           requestBuilder.set(CaptureRequest.FLASH_MODE, CaptureRequest.FLASH_MODE_OFF);
           break;
        default:
           requestBuilder.set(CaptureRequest.CONTROL_AE_MODE,
                 CaptureRequest.CONTROL_AE_MODE_ON_AUTO_FLASH);
           break;
     }
  }
</code></pre>

<p>Any ideas why the builder is not setting the flash correctly before capturing?</p>

<p>***** <strong>EDIT</strong> *****</p>

<p>Solved issue by setting the flash to previewRequestBuilder when calling runPrecaptureSequence() like Eddy Talvala suggested</p>

<pre><code>   private void runPrecaptureSequence() {
  try {
     // This is how to tell the camera to trigger.
     setCurrentFlash(previewRequestBuilder);
     previewRequestBuilder.set(CaptureRequest.CONTROL_AE_PRECAPTURE_TRIGGER,
           CaptureRequest.CONTROL_AE_PRECAPTURE_TRIGGER_START);
     // Tell #mCaptureCallback to wait for the precapture sequence to be set.
     state = STATE_WAITING_PRECAPTURE;
     captureSession.capture(previewRequestBuilder.build(), mCaptureCallback, backgroundHandler);
  } catch (CameraAccessException e) {
     e.printStackTrace();
  }
</code></pre>
",1679732,,1679732,,2016-05-13 7:37:59,2016-05-13 7:37:59,Switch flash in Camera2 API,<android><android-camera><android-camera2><camera-flash>,1,0,,,
Android,37300874,1,37310467,939,5/18/2016 21:34:06,0,,5/18/2016 13:18:46,,4,2265,"<h2>Background</h2>

<p>Google has released a few months ago a new API to detect faces on bitmaps:</p>

<ul>
<li><a href=""http://android-developers.blogspot.co.il/2015/08/face-detection-in-google-play-services.html"" rel=""nofollow"">http://android-developers.blogspot.co.il/2015/08/face-detection-in-google-play-services.html</a></li>
<li><a href=""https://developers.google.com/vision/introduction#apis"" rel=""nofollow"">https://developers.google.com/vision/introduction#apis</a></li>
<li><a href=""https://developers.google.com/vision/face-detection-concepts#face_orientation"" rel=""nofollow"">https://developers.google.com/vision/face-detection-concepts#face_orientation</a></li>
<li><a href=""https://search-codelabs.appspot.com/codelabs/face-detection#1"" rel=""nofollow"">https://search-codelabs.appspot.com/codelabs/face-detection#1</a></li>
<li><a href=""https://github.com/googlesamples/android-vision"" rel=""nofollow"">https://github.com/googlesamples/android-vision</a></li>
</ul>

<p>It's supposed to be faster and better than the <a href=""https://developer.android.com/reference/android/media/FaceDetector.html"" rel=""nofollow""><strong>built-in FaceDetector class</strong></a>, and it has no restrictions/limitations compared to it (like the need that the input bitmap will be with config 565 , bitmap width that's even, and have a max faces to detect).</p>

<p>The code is pretty simple, too:</p>

<p>manifest:</p>

<pre><code>&lt;meta-data
     android:name=""com.google.android.gms.vision.DEPENDENCIES""
     android:value=""face"" /&gt;
</code></pre>

<p>java:</p>

<pre><code>FaceDetector faceDetector = new
       FaceDetector.Builder(getApplicationContext()).setTrackingEnabled(false)
.build();
if(!faceDetector.isOperational()){
   //show error
  return;
  }
Frame frame = new Frame.Builder().setBitmap(myBitmap).build();
SparseArray&lt;Face&gt; faces = faceDetector.detect(frame);
</code></pre>

<h2>The problem</h2>

<p>It seems that the API isn't available on some devices, returning ""false"" when calling ""isOperational()"".</p>

<ul>
<li>On Nexus 4 (Android 4.4.4) and Nexus 5 (Android 6.0.1) it doesn't work at all</li>
<li>On Nexus 5x (Android 6.0.1) and Galaxy S4 (Android 5.0) it works fine</li>
<li>On LG G2 (Android 4.2.2) it worked only from the second run of the sample.</li>
</ul>

<h2>What I've found</h2>

<p>I've found some clues:</p>

<ol>
<li><p>On Github (<a href=""https://github.com/googlesamples/android-vision/issues/39"" rel=""nofollow""><strong>here</strong></a>), other people also found this issue.</p></li>
<li><p>The sample <a href=""https://github.com/googlesamples/android-vision/blob/master/visionSamples/photo-demo/app/src/main/java/com/google/android/gms/samples/vision/face/photo/PhotoViewerActivity.java"" rel=""nofollow""><strong>says</strong></a> (in ""photo-demo"", inside ""PhotoViewerActivity.java"" file) the library might not be available, yet that if it's not, it will be downloaded :</p>

<pre><code>if (!safeDetector.isOperational()) {
    // Note: The first time that an app using face API is installed on a device, GMS will
    // download a native library to the device in order to do detection.  Usually this
    // completes before the app is run for the first time.  But if that download has not yet
    // completed, then the above call will not detect any faces.
    //
    // isOperational() can be used to check if the required native library is currently
    // available.  The detector will automatically become operational once the library
    // download completes on device.
    Log.w(TAG, ""Face detector dependencies are not yet available."");

    // Check for low storage.  If there is low storage, the native library will not be
    // downloaded, so detection will not become operational.
    IntentFilter lowstorageFilter = new IntentFilter(Intent.ACTION_DEVICE_STORAGE_LOW);
    boolean hasLowStorage = registerReceiver(null, lowstorageFilter) != null;

    if (hasLowStorage) {
        Toast.makeText(this, R.string.low_storage_error, Toast.LENGTH_LONG).show();
        Log.w(TAG, getString(R.string.low_storage_error));
    }
}
</code></pre></li>
</ol>

<p>I tried to reset the play-services app (so that maybe the library will be forced to be re-downloaded), but it didn't seem to work (tried on Nexus 5).</p>

<h2>The question</h2>

<ol>
<li><p>Is there a way to force the library to be downloaded, and then start using the API? Is there a listener to this operation? </p></li>
<li><p>Would using ""isOperational"" trigger this download? </p></li>
<li><p>How come it's not available on some Nexus devices? Am I missing here something that I should have known about using this library?</p></li>
<li><p>Is it really without limitations/restrictions on the input, as I've found? I've noticed someone reported about memory issues (<a href=""https://github.com/googlesamples/android-vision/issues/53"" rel=""nofollow""><strong>here</strong></a>). Would using try-catch (of OutOfMemoryError) help handling OOM ? </p></li>
</ol>
",878126,,878126,,2016-05-18 13:26:21,2017-02-03 3:31:15,Why isn't the new Play-Services FaceDetector available on some devices?,<android><google-play-services><face-detection>,2,2,,,
Android,37441252,1,37606353,940,6/3/2016 5:10:33,9,,5/25/2016 15:14:08,,5,636,"<p>I'm using google official <a href=""https://github.com/googlesamples/android-Camera2Video/blob/master/Application/src/main/java/com/example/android/camera2video/Camera2VideoFragment.java"" rel=""nofollow noreferrer"">sample</a> to work around video recording by using Camera API 2 . but the problem is I'm not able to make it full screen as I limited the screen orientation only to portrait.Here the xml I edited and the <a href=""https://github.com/googlesamples/android-Camera2Video/blob/master/Application/src/main/res/layout/fragment_camera2_video.xml"" rel=""nofollow noreferrer"">official xml</a>.  </p>

<pre><code>&lt;?xml version=""1.0"" encoding=""utf-8""?&gt;
&lt;RelativeLayout xmlns:android=""http://schemas.android.com/apk/res/android""
    android:layout_width=""match_parent""
    android:layout_height=""match_parent""&gt;

    &lt;AutoFitTextureView
        android:id=""@+id/texture""
        android:layout_width=""wrap_content""
        android:layout_height=""wrap_content""
        android:layout_alignParentLeft=""true""
        android:layout_alignParentStart=""true""
        android:layout_alignParentTop=""true"" /&gt;

    &lt;FrameLayout
        android:layout_width=""match_parent""
        android:layout_height=""wrap_content""
        android:layout_alignParentBottom=""true""
        android:layout_alignParentLeft=""true""
        android:layout_alignParentStart=""true""&gt;

        &lt;Button
            android:id=""@+id/video""
            android:layout_width=""wrap_content""
            android:layout_height=""wrap_content""
            android:layout_gravity=""center""
            android:text=""@string/label_record"" /&gt;

        &lt;ImageView
            android:id=""@+id/info""
            android:layout_width=""wrap_content""
            android:layout_height=""wrap_content""
            android:layout_gravity=""center_vertical|right""
            android:contentDescription=""Description""
            android:padding=""20dp""
            android:src=""@drawable/ic_more"" /&gt;

    &lt;/FrameLayout&gt;

&lt;/RelativeLayout&gt;
</code></pre>

<p>I think here is setting the video screen size by aspect ration to the <code>TextureView</code> but I couldn't make it to full screen. Any help is greatly appreciated.</p>

<pre><code>mVideoSize = chooseVideoSize(map.getOutputSizes(MediaRecorder.class));
mPreviewSize = chooseOptimalSize(map.getOutputSizes(SurfaceTexture.class), width, height, mVideoSize);
int orientation = getResources().getConfiguration().orientation;
if (orientation == Configuration.ORIENTATION_LANDSCAPE) {
    mTextureView.setAspectRatio(mPreviewSize.getWidth(), mPreviewSize.getHeight());
} else {
    mTextureView.setAspectRatio(mPreviewSize.getHeight(), mPreviewSize.getWidth());
}
</code></pre>

<p><a href=""https://i.stack.imgur.com/ckyue.png"" rel=""nofollow noreferrer""><img src=""https://i.stack.imgur.com/ckyue.png"" alt=""enter image description here""></a></p>
",4817630,,3919009,,2016-06-01 18:29:27,2016-06-03 5:10:33,Camera 2 : Unable to record video in full screen?,<android><camera-api>,2,0,,,
Android,37816319,1,37858843,941,6/16/2016 12:10:59,2,,6/14/2016 15:31:08,,2,54,"<p>I try to receive Text via Bluetooth (BT) using Android. I can view the Text using a pre-existing Bluetooth logger from the Google Play store, but with my own code it does not work correct.</p>

<p>In general I use the default BT code from the Android documentation and <a href=""https://github.com/googlesamples/android-BluetoothChat"" rel=""nofollow"">samples</a>. I log the received Text. I expect my text to be something like:
<code>-0.01, -0.03, 1.04</code>, but I only receive parts of it. Here is a part of the logs:</p>

<pre><code>06-14 17:25:01.925 28217-28412/[...]: I read the following: 0.01, -0.
06-14 17:25:01.977 28217-28412/[...]: I read the following: 
06-14 17:25:02.039 28217-28412/[...]: I read the following: -
06-14 17:25:02.051 28217-28412/[...]: I read the following: 0.01, -0.
06-14 17:25:02.101 28217-28412/[...]: I read the following: 
06-14 17:25:02.174 28217-28412/[...]: I read the following: -
</code></pre>

<p>This is the code I use to read from BT:</p>

<pre><code>    public void run() {
        byte[] buffer = new byte[1024];  // buffer store for the stream
        int bytes; // bytes returned from read()

        // Keep listening to the InputStream until an exception occurs
        while (true) {
            try {
                // Read from the InputStream
                bytes = mmInStream.read(buffer);
                String readMessage = new String(buffer, 0, bytes);
                Log.e(Constants.TAG, ""I read the following: ""+readMessage);
            } catch (IOException e) {
                break;
            }
        }
    }
</code></pre>

<p>Not sure if it's relevant, but I am using an HC-06 BT module connected to an Arduino sending data with <code>9600</code> Baud. I can give you the code for this as well.</p>

<p>I tried two different Android phones with the same result. Wiko Fever and Moto G2.</p>
",1548788,,3956566,,2016-06-14 15:41:27,2016-06-16 12:10:59,Android ReceiveReceive Text via Bluetooth,<android><logging><arduino><android-bluetooth>,1,0,1,,
Android,38403559,1,38409251,942,7/16/2016 8:20:06,1,,7/15/2016 19:13:16,,1,257,"<p>I would like to know how to automate creating a new app for Google Play Store. I know that it's possible to generate screenshots, create the <code>apk</code>, upload listing information etc. But how can I <strong>create</strong> the app initially? I want to create with a new package and all. Is there a way to automate this? </p>

<p>I read the fastlane documentation as well as the code here:</p>

<p><a href=""https://github.com/googlesamples/android-play-publisher-api/tree/master/v2/python"" rel=""nofollow"">https://github.com/googlesamples/android-play-publisher-api/tree/master/v2/python</a></p>

<p>I also read the documentation here:</p>

<p><a href=""https://developers.google.com/android-publisher/#publishing"" rel=""nofollow"">https://developers.google.com/android-publisher/#publishing</a></p>

<p>So far i'm not finding anything for <em>creating</em> a new package name.</p>
",1233366,,,,,2016-07-16 8:20:06,Google Play Dev Console automation of creating a new app,<android><fastlane>,1,0,2,,
Android,38601271,1,38646673,943,7/28/2016 21:01:27,2,,7/26/2016 23:07:16,,6,656,"<p>I'm developing an audio streaming application for Android and integrating Android Auto. I've been following these two tutorials.</p>

<p><a href=""https://developer.android.com/training/auto/start/index.html"" rel=""noreferrer"">Android Developer Training</a></p>

<p><a href=""http://ptrprograms.blogspot.com/2015/02/using-android-auto-media-browser.html"" rel=""noreferrer"">PTR Android Blog</a></p>

<p>Using the Desktop Head Unit, I'm able to select my media app from the media app list, but from there a <code>ProgressBar</code> stays instead of giving way to the ""To play something, open the menu at the top left."" message seen in the <a href=""https://github.com/googlesamples/android-UniversalMusicPlayer"" rel=""noreferrer"">Universal Music Player</a>.</p>

<p>On inspection, it seems that the <code>MediaBrowserServiceCompat</code>'s <code>onGetRoot()</code>is never invoked and thus never populating my <code>MediaItemCompat</code> into the Auto app's list.</p>

<p>My manifest contains the following.</p>

<pre><code>&lt;manifest package=""com.app.audio""
      xmlns:android=""http://schemas.android.com/apk/res/android""&gt;

&lt;uses-permission android:name=""android.permission.ACCESS_NETWORK_STATE""/&gt;
&lt;uses-permission android:name=""android.permission.INTERNET""/&gt;
&lt;uses-permission android:name=""android.permission.WAKE_LOCK""/&gt;
&lt;uses-permission android:name=""android.permission.RECORD_AUDIO""/&gt;
&lt;uses-permission android:name=""android.permission.ACCESS_FINE_LOCATION""/&gt;
&lt;uses-permission android:name=""android.permission.MEDIA_CONTENT_CONTROL""/&gt;
&lt;uses-permission android:name=""android.permission.RECEIVE_BOOT_COMPLETED""/&gt;

&lt;application
    android:name=""com.app.audio.AudioApp""
    android:allowBackup=""true""
    android:icon=""@drawable/ic_launcher""
    android:label=""@string/app_name""
    android:theme=""@style/AppTheme""&gt;


    &lt;activity
        android:name=""com.app.audio.presentation.home.HomeActivity""
        android:label=""@string/app_name""
        android:launchMode=""singleTop""&gt;
        &lt;intent-filter&gt;
            &lt;action android:name=""android.intent.action.MAIN""/&gt;

            &lt;category android:name=""android.intent.category.LAUNCHER""/&gt;
        &lt;/intent-filter&gt;
    &lt;/activity&gt;

    &lt;activity
        android:name=""com.app.audio.presentation.weather.WeatherActivity""
        android:screenOrientation=""userPortrait""/&gt;

    &lt;activity android:name=""com.app.audio.presentation.settings.SettingsActivity""/&gt;

    &lt;activity android:name=""com.app.audio.presentation.alarm.AlarmActivity""/&gt;

    &lt;activity android:name=""com.app.audio.presentation.sleep.SleepActivity""/&gt;

    &lt;receiver android:name=""com.app.audio.audio.AudioIntentReceiver""&gt;
        &lt;intent-filter&gt;
            &lt;action android:name=""android.intent.action.MEDIA_BUTTON""/&gt;
            &lt;action android:name=""android.media.AUDIO_BECOMING_NOISY""/&gt;
        &lt;/intent-filter&gt;
    &lt;/receiver&gt;

    &lt;receiver android:name=""com.app.audio.presentation.alarm.AlarmReceiver""&gt;&lt;/receiver&gt;

    &lt;receiver android:name=""com.app.audio.presentation.sleep.SleepReceiver""&gt;&lt;/receiver&gt;

    &lt;service
        android:name=""com.app.audio.data.service.media.MediaService""
        android:exported=""true""&gt;
        &lt;intent-filter&gt;
            &lt;action android:name=""android.media.browse.MediaBrowserService""/&gt;
        &lt;/intent-filter&gt;
    &lt;/service&gt;

    &lt;meta-data
        android:name=""com.google.android.gms.version""
        android:value=""@integer/google_play_services_version""/&gt;

    &lt;meta-data
        android:name=""com.google.android.gms.car.application""
        android:resource=""@xml/automotive_app_desc""/&gt;

    &lt;meta-data
        android:name=""com.google.android.gms.car.notification.SmallIcon""
        android:resource=""@drawable/ic_launcher""/&gt;
&lt;/application&gt;
</code></pre>

<p></p>

<p>My <code>automotive_app_desc.xml</code> is very simple, only declaring Media.</p>

<pre><code>&lt;?xml version=""1.0"" encoding=""utf-8""?&gt;
&lt;automotiveApp&gt;
    &lt;uses name=""media""/&gt;
&lt;/automotiveApp&gt;
</code></pre>

<p>My <code>MediaService</code> extends <code>MediaBrowserServiceCompat</code>. In the <code>onCreate()</code> I create and set my <code>MediaSessionCompat</code>.</p>

<pre><code>@Override
public void onCreate() {
    super.onCreate();
    //...
    mediaSession = new MediaSessionCompat(
            this,
            SESSION_TAG,
            mediaIntentReceiver,
            null
    );

    mediaSession.setFlags(
            MediaSessionCompat.FLAG_HANDLES_MEDIA_BUTTONS |
                    MediaSessionCompat.FLAG_HANDLES_TRANSPORT_CONTROLS);

    mediaSession.setCallback(new MediaSessionCompat.Callback() {
        @Override
        public void onPlay() {
            super.onPlay();
            play(selectedStream);
        }

        @Override
        public void onPause() {
            super.onPause();
            pause();
        }

        @Override
        public void onStop() {
            super.onStop();
            stop();
        }

        @Override
        public void onSkipToNext() {
            super.onSkipToNext();
            playNextStation();
        }

        @Override
        public void onSkipToPrevious() {
            super.onSkipToPrevious();
            playPreviousStation();
        }
    });

    mediaSession.setActive(true);
    setSessionToken(mediaSession.getSessionToken());
    updatePlaybackState(ACTION_STOP);
}
</code></pre>

<p>Finally, the two overridden methods from <code>MediaBrowserServiceCompat</code>, of which neither is ever called.</p>

<pre><code>@Nullable
@Override
public BrowserRoot onGetRoot(@NonNull String clientPackageName, int clientUid, @Nullable Bundle rootHints) {
    return new BrowserRoot(ROOT_ID, null);
}

@Override
public void onLoadChildren(@NonNull String parentId, @NonNull Result&lt;List&lt;MediaBrowserCompat.MediaItem&gt;&gt; result) {
    List&lt;MediaBrowserCompat.MediaItem&gt; items = getMediaItemsById(parentId);
    if (items != null) {
        result.sendResult(items);
    }
}
</code></pre>

<p>As far as I can tell, that's everything required to get an Android Auto started, yet when I open the app on my desktop head unit, there is only a <code>ProgressBar</code> greeting me, and when I open the off-screen nav drawer, there's another one. I haven't heard of that state in any material I've read. Is there something I missed?</p>
",1880711,,,,,2017-01-31 2:01:30,Android Auto app never calls onGetRoot,<android><android-auto>,2,0,,,
Android,38274943,1,38798556,944,8/5/2016 22:29:34,28,,7/8/2016 20:31:35,,2,7468,"<p>I am currently trying to build a static library of some source c++ files requiring boost. I have been following the <a href=""https://github.com/googlesamples/android-ndk/tree/master/hello-libs"" rel=""nofollow"">hello-libs</a> example and have successfully linked the boost static file dependencies as is done in the sample example.Now said that, during while building the module I get these erros :</p>

<blockquote>
  <p>Error:error: undefined reference to 'std::basic_string, std::allocator >::basic_string(char const*, std::allocator const&amp;)'</p>
  
  <p>Error:error: undefined reference to 'std::runtime_error::runtime_error(std::string const&amp;)'</p>
  
  <p>Error:error: undefined reference to 'std::_Rb_tree_decrement(std::_Rb_tree_node_base*)'</p>
  
  <p>Error:error: undefined reference to 'std::string::_Rep::_S_empty_rep_storage'</p>
  
  <p>Error:error: undefined reference to 'std::basic_string, std::allocator >::~basic_string()'</p>
  
  <p>Error:error: undefined reference to 'std::string::_Rep::_M_dispose(std::allocator const&amp;)'</p>
  
  <p>Error:error: undefined reference to 'std::runtime_error::runtime_error(std::string const&amp;)'</p>
  
  <p>Error:error: undefined reference to 'std::string::_Rep::_M_destroy(std::allocator const&amp;)'</p>
  
  <p>Error:error: undefined reference to 'std::basic_string, std::allocator >::basic_string(std::string const&amp;)'</p>
  
  <p>Error:error: undefined reference to 'std::_Rb_tree_increment(std::_Rb_tree_node_base*)'</p>
  
  <p>Error:error: undefined reference to 'std::string::_Rep::_S_empty_rep_storage'</p>
  
  <p>Error:error: undefined reference to 'std::string::_Rep::_M_destroy(std::allocator const&amp;)'</p>
  
  <p>Error:error: undefined reference to 'std::basic_string, std::allocator >::basic_string(std::string const&amp;)'</p>
  
  <p>Error:error: undefined reference to 'std::string::_Rep::_M_destroy(std::allocator const&amp;)'</p>
  
  <p>Error:error: undefined reference to 'std::_Rb_tree_increment(std::_Rb_tree_node_base const*)'</p>
  
  <p>Error:error: undefined reference to 'std::_Rb_tree_rebalance_for_erase(std::_Rb_tree_node_base*, std::_Rb_tree_node_base&amp;)'</p>
  
  <p>Error:error: undefined reference to 'std::string::_Rep::_S_empty_rep_storage'</p>
  
  <p>Error:error: undefined reference to 'std::string::_Rep::_S_empty_rep_storage'</p>
  
  <p>Error:error: undefined reference to 'std::basic_string, std::allocator >::basic_string(char const*, std::allocator const&amp;)'</p>
  
  <p>Error:error: undefined reference to 'std::basic_string, std::allocator >::basic_string(std::string const&amp;)'</p>
  
  <p>Error:error: linker command failed with exit code 1 (use -v to see invocation)</p>
  
  <p>Error:error: undefined reference to 'std::basic_string, std::allocator >::basic_string(char const*, std::allocator const&amp;)'</p>
  
  <p>Error:error: undefined reference to 'std::string::_Rep::_M_destroy(std::allocator const&amp;)'</p>
  
  <p>Error:error: undefined reference to 'std::_Rb_tree_rebalance_for_erase(std::_Rb_tree_node_base*, std::_Rb_tree_node_base&amp;)'</p>
  
  <p>Error:error: undefined reference to 'std::string::_Rep::_M_dispose(std::allocator const&amp;)'</p>
  
  <p>Error:error: undefined reference to 'std::basic_string, std::allocator >::basic_string(char const*, std::allocator const&amp;)'</p>
  
  <p>Error:error: undefined reference to 'std::_Rb_tree_insert_and_rebalance(bool, std::_Rb_tree_node_base*, std::_Rb_tree_node_base*, std::_Rb_tree_node_base&amp;)'</p>
  
  <p>Error:Execution failed for task ':dummy:linkDummyArmeabiDebugSharedLibrary'.</p>
  
  <p>A build operation failed.
        Linker failed while linking libdummy.so.
    See the complete log at: file:///home/cran-cg/Downloads/Hello-libs-boost/name/build/tmp/linkDummyArmeabiDebugSharedLibrary/output.txt</p>
</blockquote>

<p>I had been trying to resolve this and had come upon many solutions on stackoverflow itself, suggesting that I should amend my linker path and include libc++.so library </p>

<pre><code>ndk{
        moduleName = 'p2psp'
        stl = ""c++_shared""
       // ldLibs.addAll('-L'+ file(""/home/cran-cg/Android/Sdk/ndk-bundle/sources/cxx-stl/llvm-libc++/libs/armeabi"").absolutePath)
        ldLibs.addAll(['android', 'log','atomic'])/*""${NDK_ROOT}/sources/cxx-stl/gnu-libstdc++/4.9/libs/armeabi"",'gnustl_static'*/
        toolchain = ""clang""
        cppFlags.add(""-std=c++11"")
        cppFlags.add('-frtti')
        cppFlags.add('-fexceptions')
        cppFlags.addAll('-I' + file(""/home/cran-cg/Android/Sdk/ndk-bundle/sources/cxx-stl/llvm-libc++/libcxx/include"").absolutePath ,'-DANDROID', ' -DANDROID_NDK', '-DAWS_CUSTOM_MEMORY_MANAGEMENT', '-fPIC', '-fexceptions')
        //cppFlags.add(""-I${lib_distribution_root}/boost/include"".toString())
        //cppFlags.add(""-I${file(""src/main/jni/inc"")}"".toString())

        abiFilters.addAll(['armeabi'])//, 'armeabi-v7a', 'x86'])
    }
</code></pre>

<p>And I am confused of what should be done. Please suggest me ways as to how can I resolve this issue. Thanks :))</p>
",3254749,,3254749,,2016-07-08 22:07:41,2016-08-05 22:29:34,Android NDK linker Error:error: undefined reference to std::basic_string,<c++11><android-ndk><android-gradle><build.gradle><ndk-build>,1,0,1,,
Android,39034348,1,39045922,945,8/19/2016 18:48:53,0,,8/19/2016 8:22:29,,2,563,"<p>I'm trying to code a proof of concept, with <strong>Xamarin android</strong>.
A sort of EMM tool, i.e. an application which will be on charge to install other application and manage the device.
So <strong>Android Marshmallow</strong> is a good start with android for work features.</p>

<p>My app is <strong>Device Owner</strong> therefore it should have no problem to <strong>silently install</strong> other applications. It can download an apk from a website without a problem. But when I try to install it, it throws an ""<strong>Files still open</strong>"" exception despite of calling all <code>Close()</code> methods.</p>

<p>I have taken my code from the example of the excellent android-testdpc sample on github  <a href=""https://github.com/googlesamples/android-testdpc/tree/master/app/src/main/java/com/afwsamples/testdpc/cosu"" rel=""nofollow"">here</a></p>

<p>I have changed it for it work in c# with Xamarin.</p>

<p>Here is my code :</p>

<pre><code>    public static bool InstallPackage(Context context, Handler handler, InputStream input, String packageName)
    {
        try
        {
            PackageInstaller packageInstaller = context.PackageManager.PackageInstaller;
            PackageInstaller.SessionParams param = new PackageInstaller.SessionParams(PackageInstallMode.FullInstall);
            param.SetAppPackageName(packageName);
            // set params
            int sessionId = packageInstaller.CreateSession(param);
            PackageInstaller.Session session = packageInstaller.OpenSession(sessionId);
            using (System.IO.Stream output = session.OpenWrite(""COSU"", 0, -1))
            {
                byte[] buffer = new byte[65536];
                int c;
                while ((c = input.Read(buffer)) != -1)
                {
                    output.Write(buffer, 0, c);
                }
                session.Fsync(output);
                input.Close();
                output.Close();
            }
            session.Commit(createIntentSender(context, sessionId)); // this line throws exception 'Files stil open'
            return true;
        }
        catch (Exception ex)
        {
            Log.Error(TAG, ""Error installing package: "" + packageName, ex);
            handler.SendMessage(handler.ObtainMessage(Common.MSG_INSTALL_FAIL,
                    packageName));
            return false;
        }
    }
</code></pre>

<p>I'm stuck with this for the moment. if I have the time I will try to install android studio and test my code in java to see if the problem come from Xamarin.</p>

<p>If someone got any clue for my problem I will really appreciate the help</p>
",6733826,,,,,2016-08-19 18:48:53,"Xamarin.Android PackageInstaller Session.commit ""Files still open"" Exception on apk silent install",<c#><android><xamarin><xamarin.android><android-install-apk>,1,0,2,,
Android,38832797,1,39107586,946,8/23/2016 17:39:58,15,,8/8/2016 15:12:08,,1,1839,"<p>I'm making a jni Function in android to generate file checkSum using BoringSSL.</p>

<p>So I built boringssl to shared Library for use Prebuilt Library in Android studio.</p>

<p>The build output like this.
<a href=""https://i.stack.imgur.com/x8UZ8.png"" rel=""nofollow noreferrer""><img src=""https://i.stack.imgur.com/x8UZ8.png"" alt=""enter image description here""></a></p>

<p>I copied the *.so file to my project src/main/jniLibs/lib 
and BoringSSL include folder to src/main/jni</p>

<p>I referenced this project and apply to my projects.</p>

<p><a href=""https://github.com/googlesamples/android-ndk/tree/master/hello-libs"" rel=""nofollow noreferrer"">https://github.com/googlesamples/android-ndk/tree/master/hello-libs</a></p>

<p>My <strong>build.gradle</strong> file like this.
I'm using gradle-experimental:0.7.0( and Window10, Android Studio 2.1.2 )</p>

<pre><code>apply plugin: 'com.android.model.application'

model {
    repositories {
        libs(PrebuiltLibraries) {
            boringssl {
                headers.srcDir ""src/main/jni/include/openssl""

                binaries.withType(SharedLibraryBinary) {
                    sharedLibraryFile = file(""src/main/jniLibs/lib/libcrypto.so"")
                    sharedLibraryFile = file(""src/main/jniLibs/lib/libssl.so"")
                }
            }
        }
    }
    android {
        compileSdkVersion = 24
        buildToolsVersion = '24.0.1'

        defaultConfig {
            applicationId = 'yein.a'
            minSdkVersion.apiLevel = 19
            targetSdkVersion.apiLevel = 24
            versionCode = 1
            versionName = '1.0'
        }
        ndk {
            moduleName = 'hello-libs'
            ldLibs.addAll(['android', 'log'])
        }
        sources {
            main {
                jni {
                    dependencies {
                        library 'boringssl' linkage 'shared'
                    }
                }
                jniLibs{
                    source{
                        srcDir ""src/main/jniLibs/lib""
                    }
                }
            }
        }
        productFlavors{
            create(""arm""){
                ndk.abiFilters.add(""armeabi-v7a"")
            }
        }
        buildTypes {
            release {
                minifyEnabled false
                proguardFiles.add(file('proguard-android.txt'))
            }
        }
    }
}

dependencies {
    compile fileTree(dir: 'libs', include: ['*.jar'])
    compile 'com.android.support:appcompat-v7:24.1.1'
}
</code></pre>

<p>This is my project structure.</p>

<p><a href=""https://i.stack.imgur.com/jJvLo.png"" rel=""nofollow noreferrer""><img src=""https://i.stack.imgur.com/jJvLo.png"" alt=""enter image description here""></a></p>

<p>I think I properly apply the example projects, because it is not occurred gradle sync error. </p>

<p>And when I use MD5 function Android Studio auto complete function name like this.
<a href=""https://i.stack.imgur.com/RZfUb.png"" rel=""nofollow noreferrer""><img src=""https://i.stack.imgur.com/RZfUb.png"" alt=""enter image description here""></a></p>

<p>But I click run it occurred error like this...
<a href=""https://i.stack.imgur.com/lAmH7.png"" rel=""nofollow noreferrer""><img src=""https://i.stack.imgur.com/lAmH7.png"" alt=""enter image description here""></a></p>

<p>I searched a lot project in google,github, and of course stackoverflow previous answers but I still not solve my problem.</p>

<p>I tried change gradle version but other gradle version occurred error in auto generated jni function except gradle-experimental:0.7.0.</p>

<p>Could anyone point me in the right direction or even a solution?</p>

<p>Thanks for read my Question.</p>
",6059256,,,,,2016-08-24 14:28:50,Using Prebuilt library in Android Studio,<android><gradle><android-ndk><java-native-interface><boringssl>,1,7,,,
Android,39327480,1,39333694,947,9/5/2016 15:26:32,0,,9/5/2016 9:23:10,,2,3873,"<p>I want to fetch user's current lat long on click of a button. I know that you can get the last known location using FusedLocationApi. But what I am not able to understand is, gps or location services needs to be turned on for this? If yes, how to check that the user has turned on location and get the current location. Also, how to include marshmallow permission checks in getting the location. </p>

<p>I have already referred:
1) <a href=""https://github.com/googlesamples/android-play-location/blob/master/LocationSettings/app/src/main/java/com/google/android/gms/location/sample/locationsettings/MainActivity.java"" rel=""nofollow"">googlesamples/android-play-location</a>
2) <a href=""https://github.com/googlesamples/android-XYZTouristAttractions/blob/master/Application/src/main/java/com/example/android/xyztouristattractions/service/UtilityService.java"" rel=""nofollow"">googlesamples/android-XYZTouristAttractions</a> 
and many other links but unable to make a complete flow.</p>

<p>Code</p>

<pre><code>public class AccessLocationFragment extends BaseFragment implements View.OnClickListener, LocationListener,
    GoogleApiClient.ConnectionCallbacks, GoogleApiClient.OnConnectionFailedListener, GeneralDialogFragment.GeneralDialogClickListener {

private static final int MY_PERMISSIONS_REQUEST_LOCATION = 101;
private static final String TAG = AccessLocationFragment.class.getSimpleName();
private static final int REQUEST_CHECK_SETTINGS = 102;
private Button mAccessLocation;
private EditText mZipCode;
private Dialog progressDialog;
private GoogleApiClient mGoogleApiClient;
private Location mLastLocation;

public static AccessLocationFragment newInstance() {
    return new AccessLocationFragment();
}

@Nullable
@Override
public View onCreateView(LayoutInflater inflater, @Nullable ViewGroup container, @Nullable Bundle savedInstanceState) {
    return inflater.inflate(R.layout.fragment_access_location, container, false);
}

@Override
public void onViewCreated(View view, @Nullable Bundle savedInstanceState) {
    super.onViewCreated(view, savedInstanceState);
    RecycleApplication.getEventBus().register(this);
    mAccessLocation = (Button) view.findViewById(R.id.access_location);
    mZipCode = (EditText) view.findViewById(R.id.zip_code);
    mAccessLocation.setOnClickListener(this);

    mZipCode.setOnEditorActionListener(new TextView.OnEditorActionListener() {
        @Override
        public boolean onEditorAction(TextView v, int actionId, KeyEvent event) {
            if (actionId == EditorInfo.IME_ACTION_DONE) {
                String zipCode = mZipCode.getText().toString().trim();
                if (TextUtils.isEmpty(zipCode)) {
                    Toast.makeText(mActivity, ""Please enter zip code"", Toast.LENGTH_SHORT).show();
                } else {
                    Call&lt;Address&gt; response = mRecycleService.getAddress(zipCode);
                    response.enqueue(new GetLocationCallback(AccessLocationFragment.this));
                }
            }
            return false;
        }
    });
    // Create an instance of GoogleAPIClient.
    if (mGoogleApiClient == null) {
        mGoogleApiClient = new GoogleApiClient.Builder(mActivity)
                .addConnectionCallbacks(this)
                .addOnConnectionFailedListener(this)
                .addApi(LocationServices.API)
                .build();
    }
    if (!LocationUtils.checkFineLocationPermission(mActivity)) {
        // See if user has denied permission in the past
        if (shouldShowRequestPermissionRationale(android.Manifest.permission.ACCESS_FINE_LOCATION)) {
            // Show a simple snackbar explaining the request instead
            showPermissionSnackbar();
        } else {
            requestFineLocationPermission();
        }
    } else {
        displayLocationSettingsRequest();
    }
}

private void startHomeActivity(Address address) {
    RecyclePreferences.getInstance().setCity(address.getCity());
    RecyclePreferences.getInstance().setState(address.getState());
    RecyclePreferences.getInstance().setLatitude(address.getLatitude());
    RecyclePreferences.getInstance().setLongitude(address.getLongitude());
    RecyclePreferences.getInstance().setZipCode(address.getZipCode());
    startActivity(new Intent(mActivity, HomeActivity.class));
    mActivity.finish();
}

@Override
public void onSuccess(Call&lt;Address&gt; call, Response&lt;Address&gt; response) {
    mActivity.hideProgressDialog(progressDialog);
    if (response.isSuccessful()) {
        Address address = response.body();
        startHomeActivity(address);
    }
}

@Override
public void onFailure(Call&lt;Address&gt; call, Throwable t) {
    mActivity.hideProgressDialog(progressDialog);
}

@Override
public void onClick(View view) {
    if (view.getId() == R.id.access_location) {
        fetchAddress(mLastLocation);
    }
}

@Override
public void onRequestPermissionsResult(int requestCode, String permissions[], int[] grantResults) {
    switch (requestCode) {
        case MY_PERMISSIONS_REQUEST_LOCATION: {
            if (grantResults[0] == PackageManager.PERMISSION_GRANTED) {
               displayLocationSettingsRequest();
            }
        }
    }
}

private void fetchAddress(Location location) {
    mRecycleService = new RecycleRetrofitBuilder(mActivity).getService();
    Call&lt;Address&gt; response = mRecycleService.getAddress(String.valueOf(location.getLatitude()), String.valueOf(location.getLongitude()));
    progressDialog = mActivity.showProgressDialog(mActivity);
    response.enqueue(new GetLocationCallback(AccessLocationFragment.this));
}

private void requestFineLocationPermission() {
    requestPermissions(new String[]{Manifest.permission.ACCESS_FINE_LOCATION}, MY_PERMISSIONS_REQUEST_LOCATION);
}

private void showPermissionSnackbar() {
    GeneralDialogFragment generalDialogFragment = GeneralDialogFragment.
            newInstance(""Permissions"", ""Allow Recycle the World to use your location."", ""Allow"", ""Go Back"", this);
    mActivity.showDialogFragment(generalDialogFragment);
    displayLocationSettingsRequest();
}

private void displayLocationSettingsRequest() {
    LocationRequest locationRequest = LocationRequest.create();
    locationRequest.setPriority(LocationRequest.PRIORITY_HIGH_ACCURACY);
    locationRequest.setInterval(10000);
    locationRequest.setFastestInterval(10000 / 2);

    LocationSettingsRequest.Builder builder = new LocationSettingsRequest.Builder().addLocationRequest(locationRequest);
    builder.setAlwaysShow(true);

    PendingResult&lt;LocationSettingsResult&gt; result = LocationServices.SettingsApi.checkLocationSettings(mGoogleApiClient, builder.build());
    result.setResultCallback(new ResultCallback&lt;LocationSettingsResult&gt;() {
        @Override
        public void onResult(LocationSettingsResult result) {
            final Status status = result.getStatus();
            switch (status.getStatusCode()) {
                case LocationSettingsStatusCodes.SUCCESS:
                    getLocation();
                    break;
                case LocationSettingsStatusCodes.RESOLUTION_REQUIRED:
                    Log.i(TAG, ""Location settings are not satisfied. Show the user a dialog to upgrade location settings "");
                    try {
                        status.startResolutionForResult(mActivity, REQUEST_CHECK_SETTINGS);
                    } catch (IntentSender.SendIntentException e) {
                        Log.i(TAG, ""PendingIntent unable to execute request."");
                    }
                    break;
                case LocationSettingsStatusCodes.SETTINGS_CHANGE_UNAVAILABLE:
                    Log.i(TAG, ""Location settings are inadequate, and cannot be fixed here. Dialog not created."");
                    break;
            }
        }
    });
}

private void getLocation() {
    if (ActivityCompat.checkSelfPermission(mActivity, Manifest.permission.ACCESS_FINE_LOCATION) != PackageManager.PERMISSION_GRANTED
            &amp;&amp; ActivityCompat.checkSelfPermission(mActivity, Manifest.permission.ACCESS_COARSE_LOCATION) != PackageManager.PERMISSION_GRANTED) {
        return;
    }
    mLastLocation = LocationServices.FusedLocationApi.getLastLocation(mGoogleApiClient);
}

@Override
public void onActivityResult(int requestCode, int resultCode, Intent data) {
    super.onActivityResult(requestCode, resultCode, data);
    if (requestCode == REQUEST_CHECK_SETTINGS) {
        getLocation();
    }
}

@Override
public void onStart() {
    mGoogleApiClient.connect();
    super.onStart();
}

@Override
public void onStop() {
    mGoogleApiClient.disconnect();
    super.onStop();
}

@Override
public void onConnected(@Nullable Bundle bundle) {
    getLocation();
}

@Override
public void onDestroy() {
    super.onDestroy();
    RecycleApplication.getEventBus().unregister(this);
}


@Override
public void onConnectionSuspended(int i) {

}

@Override
public void onConnectionFailed(@NonNull ConnectionResult connectionResult) {

}

@Override
public void onOk(DialogFragment dialogFragment) {
    dialogFragment.dismiss();
    requestFineLocationPermission();
}

@Override
public void onCancel(DialogFragment dialogFragment) {
    dialogFragment.dismiss();

}
</code></pre>

<p>}</p>
",1081355,,1081355,,2016-09-05 11:14:02,2017-04-03 12:16:25,How to get user's current location in Android,<android><location><google-play-services>,2,2,1,,
Android,39281557,1,39352506,948,9/6/2016 15:15:27,5,,9/1/2016 22:03:01,,2,1355,"<p>I am detecting text using a pipeline just like the <a href=""https://github.com/googlesamples/android-vision/tree/master/visionSamples/ocr-reader"" rel=""nofollow"">Google CodeLabs sample code</a>.  How do I get the preview Frame that the CameraSource sends to the TextRecognizer?</p>
",3561610,,,,,2016-09-06 15:15:27,Get Frame when detecting text using a pipeline in Android Mobile Vision,<android><android-vision>,1,0,1,,
Android,39464909,1,39471016,949,9/13/2016 13:12:14,0,,9/13/2016 7:57:13,,1,1065,"<p>I am using directory selection as described in this <a href=""https://github.com/googlesamples/android-DirectorySelection"" rel=""nofollow"">Google Sample</a>. It does provide file name and mime type of the children of the selected directory. I can get Document ID of the file too, if I use <code>COLUMN_DOCUMENT_ID</code> on the Cursor Query. 
I am interested in the file URI of the children instead. When I use <code>ACTION_OPEN_DOCUMENT</code> instead of <code>ACTION_OPEN_DOCUMENT_TREE</code>, I get the child uri easily which is just obtained from adding a <code>%2Fchildfile.extention</code> (%2F is just a forward slash). So I tried to get child file uri using the following code - </p>

<pre><code>uri = Uri.parse(docUri.toString()+""%2F""+fileName);
</code></pre>

<p>I got the file name, however when I run exists() method on it (By converting it into DocumentFile), it returns false. That means, either I don't have the permission of the file or it's not the correct way to get children uri.  </p>

<p>Am I missing something here or is there any other way I can select a folder and get file uri of all of it's children easily.</p>

<p>PS: I am currently checking it in Marshamallow.</p>
",1079901,,,,,2016-09-13 13:12:14,Get File Uri from Document Id in Storage Access Framework,<android><android-5.0-lollipop><android-6.0-marshmallow><android-file><storage-access-framework>,1,0,,,
Android,39954501,1,39954735,950,10/10/2016 9:02:01,0,,10/10/2016 8:48:07,,1,281,"<p>I follow this <a href=""https://github.com/googlesamples/android-play-places/tree/master/PlaceCompleteAdapter"" rel=""nofollow"">example</a> to make places aotu complete adapter. In example whole place-services library is imported and its seems to be excessive.
I imported</p>

<pre><code>  compile 'com.google.android.gms:play-services-location:9.6.1'
  compile 'com.google.android.gms:play-services-maps:9.6.1'
</code></pre>

<p>However <code>com.google.android.gms.location.places.AutocompleteFilter</code> is not present in any of the above.</p>
",1551603,,,,,2016-10-10 9:02:01,What is minimal dependency import for location.places?,<android><google-play-services>,1,0,,,
Android,40419605,1,40419946,951,11/4/2016 10:08:16,0,,11/4/2016 9:52:31,,1,903,"<p>I am trying to get access to <code>""/""</code> (root) directory using <code>Storage Access Framework</code> on Android 7.0 and above, after looking to the Google sample on <a href=""https://github.com/googlesamples/android-ScopedDirectoryAccess"" rel=""nofollow noreferrer"">GitHub</a>, i can see that there are only predefined directories are passed in while creating accessIntent using StorageVolume class, but how to get access to any other directory than those predefined directories?</p>

<p>Here is my code, which i tried:</p>

<pre><code>    StorageManager storageManager = (StorageManager) getSystemService(Context.STORAGE_SERVICE);
    File root = new File(""/"");
    StorageVolume storageVolume = storageManager.getStorageVolume(root);

    Intent intent = storageVolume.createAccessIntent(""/"");
    startActivityForResult(intent, REQUEST_CODE);
</code></pre>

<p>i am getting null as storageVolume and unable to get access to ""/"" directory using StorageVolume framework.</p>

<blockquote>
  <p>How to get <a href=""https://developer.android.com/training/articles/scoped-directory-access.html"" rel=""nofollow noreferrer"">Scoped Directory Access</a> to <code>""/""</code> directory
  using <a href=""https://developer.android.com/guide/topics/providers/document-provider.html"" rel=""nofollow noreferrer"">Storage Access Framework</a> on Android 7.0 and above?</p>
</blockquote>
",1791546,,1791546,,2016-11-07 11:14:48,2016-11-07 11:14:48,"How to get access to ""/"" (root) directory using Storage Access framework",<android><android-7.0-nougat><android-7.1-nougat>,1,1,1,,
Android,40832882,1,40848379,952,11/28/2016 15:51:43,1,,11/27/2016 19:18:28,,10,4121,"<p>Does the Google Mobile Vision (<a href=""https://developers.google.com/vision/"" rel=""noreferrer"">https://developers.google.com/vision/</a>) API work offline? Or does it need Internet connectivity? The <a href=""https://github.com/googlesamples/android-vision/blob/master/visionSamples/ocr-reader/app/src/main/AndroidManifest.xml"" rel=""noreferrer"">sample app</a> does not require any Internet permission. Which means the API works entirely offline. I am looking for a positive confirmation of this.</p>

<p>PS. Also I am looking for more information on this API. For example, does it use neural networks? If so what algorithms were used? I can not find any detail discussion anywhere. </p>
",1036017,,,,,2018-01-31 2:34:31,Does Machine Vision API work offline?,<android-vision>,2,0,1,,
Android,41096332,1,41112022,953,12/13/2016 0:45:07,1,,12/12/2016 7:53:47,,1,822,"<p>UPDATE:
My initial question may be misleading so I want to rephrase it:
I want to traverse through the hierarchy tree from an MTP connected device through Android's Storage Access Framework.  I can't seem to achieve this because I get a <code>SecurityException</code> stating that a subnode is not a descendant of its parent node.  Is there a way to workaround this issue?  Or is this a known issue?  Thanks.</p>

<p>I'm writing an Android application that attempts to traverse and access documents through the hierarchy tree using Android's Storage Access Framework (SAF) via the <code>MtpDocumentsProvider</code>. I am more or less following the code example described in <a href=""https://github.com/googlesamples/android-DirectorySelection"" rel=""nofollow noreferrer"">https://github.com/googlesamples/android-DirectorySelection</a> on how to launch the SAF Picker from my app, select the MTP data source, and then, in <code>onActivityResult</code>, use the returned <code>Uri</code> to traverse through the hierarchy.  Unfortunately, this doesn't seem to work because as soon as I access a sub-folder and try to traverse that, I always get a <code>SecurityException</code> stating that <code>document xx is not a descendant of yy</code></p>

<p>So my question is, using the <code>MtpDocumentProvider</code>, how can I successfully traverse through the hierarchy tree from my app and avoid this exception?</p>

<p>To be specific, in my app, first, I call the following method to launch the SAF Picker:</p>

<pre><code>private void launchStoragePicker() {
    Intent browseIntent = new Intent(Intent.ACTION_OPEN_DOCUMENT_TREE);
    browseIntent.addFlags(
        Intent.FLAG_GRANT_PERSISTABLE_URI_PERMISSION
            | Intent.FLAG_GRANT_PREFIX_URI_PERMISSION
            | Intent.FLAG_GRANT_READ_URI_PERMISSION
            | Intent.FLAG_GRANT_WRITE_URI_PERMISSION
    );
    startActivityForResult(browseIntent, REQUEST_CODE_OPEN_DIRECTORY);
}
</code></pre>

<p>The Android SAF picker then launches, and I see my connected device recognized as the MTP data source.  I select said data source and I get the <code>Uri</code> from my <code>onActivityResult</code>:</p>

<pre><code>@Override
public void onActivityResult(int requestCode, int resultCode, Intent data) {
    super.onActivityResult(requestCode, resultCode, data);
    if (requestCode == REQUEST_CODE_OPEN_DIRECTORY &amp;&amp; resultCode == Activity.RESULT_OK) {
        traverseDirectoryEntries(data.getData()); // getData() returns the root uri node
    }
}
</code></pre>

<p>Then, using the returned <code>Uri</code>, I call <code>DocumentsContract.buildChildDocumentsUriUsingTree</code> to get a <code>Uri</code> which I can then use to query and access the tree hierarchy:</p>

<pre><code>void traverseDirectoryEntries(Uri rootUri) {
    ContentResolver contentResolver = getActivity().getContentResolver();
    Uri childrenUri = DocumentsContract.buildChildDocumentsUriUsingTree(rootUri, DocumentsContract.getTreeDocumentId(rootUri));

    // Keep track of our directory hierarchy
    List&lt;Uri&gt; dirNodes = new LinkedList&lt;&gt;();
    dirNodes.add(childrenUri);

    while(!dirNodes.isEmpty()) {
        childrenUri = dirNodes.remove(0); // get the item from top
        Log.d(TAG, ""node uri: "", childrenUri);
        Cursor c = contentResolver.query(childrenUri, new String[]{Document.COLUMN_DOCUMENT_ID, Document.COLUMN_DISPLAY_NAME, Document.COLUMN_MIME_TYPE}, null, null, null);
        try {
            while (c.moveToNext()) {
                final String docId = c.getString(0);
                final String name = c.getString(1);
                final String mime = c.getString(2);
                Log.d(TAG, ""docId: "" + id + "", name: "" + name + "", mime: "" + mime);
                if(isDirectory(mime)) {
                    final Uri newNode = DocumentsContract.buildChildDocumentsUriUsingTree(rootUri, docId);
                    dirNodes.add(newNode);
                }
            }
        } finally {
            closeQuietly(c);
        }
    }
}

// Util method to check if the mime type is a directory
private static boolean isDirectory(String mimeType) {
    return DocumentsContract.Document.MIME_TYPE_DIR.equals(mimeType);
}

// Util method to close a closeable
private static void closeQuietly(Closeable closeable) {
    if (closeable != null) {
        try {
            closeable.close();
        } catch (RuntimeException re) {
            throw re;
        } catch (Exception ignore) {
            // ignore exception
        }
    }
}
</code></pre>

<p>The first iteration on the outer while loop succeeds: the call to <code>query</code> returned a valid <code>Cursor</code> for me to traverse.  The problem is the second iteration: when I try to query for the <code>Uri</code>, which happens to be a subnode of <code>rootUri</code>, I get a <code>SecurityException</code> stating the document xx is not a descendent of yy.</p>

<blockquote>
  <p>D/MyApp(19241): node uri: content://com.android.mtp.documents/tree/2/document/2/children
  D/MyApp(19241): docId: 4, name: DCIM, mime: vnd.android.document/directory
  D/MyApp(19241): node uri: content://com.android.mtp.documents/tree/2/document/4/children
  E/DatabaseUtils(20944): Writing exception to parcel
  E/DatabaseUtils(20944): java.lang.SecurityException: Document 4 is not a descendant of 2</p>
</blockquote>

<p>Can anyone provide some insight as to what I'm doing wrong? If I use a different data source provider, for example, one that is from external storage (i.e. an SD Card attached via a standard USB OTG reader), everything works fine.</p>

<p>Additional information:
I'm running this on a Nexus 6P, Android 7.1.1, and my app <code>minSdkVersion</code> is 19.</p>
",3221524,,3221524,,2016-12-12 23:46:06,2018-03-15 13:12:57,Issues traversing through directory hierarchy with Android Storage Access Framework / DocumentProvider using MTP,<android><android-external-storage><mtp><storage-access-framework><document-provider>,3,11,,,
Android,41251543,1,41258348,954,12/21/2016 8:32:46,1,,12/20/2016 21:28:26,,4,2424,"<p>Im using MVP and RxJava similar to <a href=""https://github.com/googlesamples/android-architecture/tree/todo-mvp-rxjava/"" rel=""nofollow noreferrer"">google-samples</a> repo.</p>

<p>And I would like to ask how to correctly handle screen orientation change.</p>
",5140726,,5140726,,2016-12-20 21:39:24,2016-12-21 8:32:46,MVP and RxJava - Handling Orientation Changes on Android,<android><rx-java><screen-orientation><rx-android>,2,0,5,,
Android,41363429,1,41363521,955,12/28/2016 13:53:37,0,,12/28/2016 13:47:17,,1,481,"<p>I'm learning Android MVP architecture given <a href=""https://github.com/googlesamples/android-architecture/tree/todo-mvp/"" rel=""nofollow noreferrer"">here</a>. Based on the example I created my own simple app that just displays list with <code>recyclerview</code> with pull to refresh functionality.  </p>

<p>When list is pulled I want first to clear the recyclerview and then reload the data again from the repository (with fake latency delay). But, when I clear the data inside RecyclerViewAdpater, all data inside repository are also being cleared and there is nothing to show. I just can't understand the reason. </p>

<p>Here's my activity that creates both Presenter and View (that is Fragment):</p>

<pre><code>    protected void onCreate(Bundle savedInstanceState) {

            mainFragment = MainFragment.newInstance();

            FragmentTransaction transaction = getSupportFragmentManager().beginTransaction();
            transaction.add(R.id.contentFrame, mainFragment);
            transaction.commit();

            new MainPresenter(new MainDataRepository(), mainFragment);
    }
</code></pre>

<p>Here's my Fragment (MainFragment) - <strong>ATTENTION:</strong> updateList(null) - This is where it clears all data, including inside Repository:</p>

<pre><code>    public MainFragment() {
    }

    public static MainFragment newInstance() {
        return new MainFragment();
    }

    @Nullable
    @Override
    public View onCreateView(LayoutInflater inflater, @Nullable ViewGroup container, @Nullable Bundle savedInstanceState) {
        //....

        swipeRefreshLayout.setOnRefreshListener(new SwipeRefreshLayout.OnRefreshListener() {
            @Override
            public void onRefresh() {
                recyclerAdapter.updateList(null); // **This is where it clears all data, including inside Repository**

                Handler handler = new Handler();
                handler.postDelayed(new Runnable() {
                    @Override
                    public void run() {
                        mPresenter.loadList(); // to reload the list
                    }
                }, 1500);
            }
        });

        //...
    }

    @Override
    public void onResume() {
        super.onResume();

        Handler handler = new Handler();
        handler.postDelayed(new Runnable() {
            @Override
            public void run() {
                mPresenter.loadList();
            }
        }, 3000);
    }

    @Override
    public void setPresenter(MainContractor.Presenter presenter) {
        mPresenter = presenter;
    }

    @Override
    public void showList(List&lt;String&gt; mainDataList) {
        if(recyclerAdapter == null) {
            recyclerAdapter = new RecyclerAdapter(mainDataList);
            recyclerView.setLayoutManager(new LinearLayoutManager(getActivity()));
            recyclerView.setAdapter(recyclerAdapter);
        }else{
            recyclerAdapter.updateList(mainDataList);
        }
    }
</code></pre>

<p>Here's my presenter (MainPresenter):</p>

<pre><code>    public MainPresenter(MainDataRepository mainDataRepository, MainContractor.View view){
        mMainDataRepository = mainDataRepository;
        mMainContractorView = view;

        view.setPresenter(this);
    }

    @Override
    public void loadList() {
        ArrayList&lt;String&gt; strings = mMainDataRepository.getList();

        mMainContractorView.showList(strings);
    }
</code></pre>

<p>Here's my repository (MainDataRepository):</p>

<pre><code>private ArrayList&lt;String&gt; repositoryList;

    public MainDataRepository() {
        createList();
    }

    private void createList() {
        if(repositoryList == null){
            repositoryList = new ArrayList&lt;&gt;();
        }

        for (int i = 1; i &lt;= 10; i++) {
            repositoryList.add(""Item "" + i);
        }
    }

    public ArrayList&lt;String&gt; getList(){
        return repositoryList;
    }
</code></pre>

<p>And the last one, This is how I am updating recyclerview inside RecyclerAdapter:</p>

<pre><code>public class RecyclerAdapter extends RecyclerView.Adapter&lt;RecyclerAdapter.MyViewHolder&gt; {

    private List&lt;String&gt; stringsList;

    public RecyclerAdapter(List&lt;String&gt; stringsList) {
        this.stringsList = stringsList;
    }

    public void updateList(List&lt;String&gt; newStrings){
            if(newStrings != null){
                stringsList = newStrings;
            }else{
                stringsList.clear();
            }
            notifyDataSetChanged();
        }

       //....
}
</code></pre>

<p>Why updateList mehod inside RecyclerAdapter also clears the data inside repository that is <code>ArrayList&lt;String&gt; repositoryList</code>?</p>
",5985958,,5985958,,2016-12-28 13:57:17,2016-12-28 14:04:05,Android MVP architecture - communication between repository and view,<android><design-patterns><mvp>,1,1,,,
Android,40766673,1,41383912,956,12/29/2016 16:51:38,36,,11/23/2016 14:08:20,,3,7855,"<p>I want to run <a href=""https://github.com/googlesamples/android-ndk/tree/master/sensor-graph"" rel=""nofollow noreferrer"">sensor-graph</a> sample project</p>

<p>After the following:</p>

<ol>
<li>Download Android Studio 2.2+ with NDK bundle.</li>
<li>Launch Android Studio.</li>
<li>Open android-ndk/sensor-graph sample.</li>
<li>Open File/Project Structure...</li>
<li>Click Download or Select NDK location.</li>
<li>Click Tools/Android/Sync Project with Gradle Files.</li>
<li>Click Run/Run 'app'.</li>
</ol>

<p>i get follow error:</p>

<blockquote>
  <p>Failed to find CMake.</p>
  
  <p>Gradle sync failed: Failed to find CMake.
             Install from Android Studio under File/Settings/Appearance &amp; Behavior/System Settings/Android SDK/SDK Tools/CMake.
             Expected CMake executable at /Users/myUser/Library/Android/sdk/cmake/bin/cmake.
             Consult IDE log for more details (Help | Show Log)</p>
</blockquote>
",2715054,,,,,2017-11-18 15:22:57,Android - Failed to find CMake,<android><c++><android-ndk>,3,0,,,
Android,41393423,1,41435642,957,1/3/2017 2:33:55,4,,12/30/2016 9:01:03,,1,896,"<h2>Configuration</h2>

<p><strong>Operating system</strong>: Ubuntu 16.04</p>

<p><strong>Android Studio Version</strong>: 2.2.3</p>

<h2>Key code</h2>

<p><code>~/project/build.gradle</code>:</p>

<pre><code>buildscript {
      repositories {
          jcenter()
      }
      dependencies {
          classpath 'com.android.tools.build:gradle:2.2.3'
      }
  }
  ...
</code></pre>

<p><code>~/project/library/build.gradle</code>:</p>

<pre><code>apply plugin: 'com.android.library'

android {
    ...

    defaultConfig {
        ...

        externalNativeBuild {
            cmake {
                arguments '-DANDROID_TOOLCHAIN=clang',
                        '-DANDROID_STL=gnustl_static'
                     // I also tried '-DANDROID_STL=gnustl_shared', result is same
            }
        }
    }

    externalNativeBuild {
        cmake {
            path ""src/main/cpp/CMakeLists.txt""
        }
    }

    ...
}
</code></pre>

<p><code>~/project/app/build.gradle</code>:</p>

<pre><code>apply plugin: 'com.android.application'

android {
    ...
}

dependencies {
    ...
    compile project(':library')
    ...
}
</code></pre>

<p><code>~/project/settings.gradle</code></p>

<pre><code>include ':app', ':library'
</code></pre>

<p><code>~/project/library/src/main/cpp/test.h</code>:</p>

<pre><code>#include &lt;vector&gt;   // vector is red, says ""cannot find vector""
#include &lt;stdint.h&gt;

class test {

private:
    std::vector&lt;int32_t&gt; array;  // std is red, says ""can't resolve container std""
};
</code></pre>

<h3>Description of problem</h3>

<p>In file <code>~/project/library/src/main/cpp/test.h</code>, <code>vector</code> in <code>#include &lt;vector&gt;</code> is red. 
Move mouse over it will popup a window which says <code>Cannot find 'vector'</code>.
<code>std</code> in <code>std::vector&lt;int32_t&gt;</code> is also red. Move mouse over it says <code>Can't resolve container 'std'</code>.</p>

<p>This project has no compile error. It can be compiled successfully and installed on my phone. Problem is it has syntax error. I don't have code completion on some variables, like <code>array</code> in <code>test.h</code>.</p>

<h3>Some information I find</h3>

<p>I imported project <a href=""https://github.com/googlesamples/android-ndk/tree/master/teapots"" rel=""nofollow noreferrer"">teapots</a> which contains <code>#include &lt;vector&gt;</code>.
Android studio did resolve <code>vector</code> and <code>std</code> symbol for this project.</p>

<h3>My question</h3>

<p>What I did wrong? Why project <a href=""https://github.com/googlesamples/android-ndk/tree/master/teapots"" rel=""nofollow noreferrer"">teapots</a> don't have this problem?
What's the key difference between my project and <code>teapots</code> that makes the latter one can resolve <code>vector</code> and <code>std</code> but mine not?</p>

<hr>

<h2>Update</h2>

<p>I created a new project in android studio. In step 1 of new project wizard, I checked <code>include C++ Support</code>. In last step, I kept default <code>Toolchain Default</code> for <code>C++ Standard</code> option. After I clicked <code>finish</code> button, android studio automatically created file <code>native-lib.cpp</code> for me. I added code <code>#include &lt;vector&gt;</code> in line 3 in this file. This time android studio resolved symbol <code>vector</code> correctly. Then I created a new module library <code>mylibrary</code> for this project, in there I added <code>cpp</code> folder and <code>test.h</code> and it also resolved symbol <code>vector</code>(<code>mylibrary</code> module's <code>build.gradle</code> had been correctly added cmake stuff by me). But my problem is I need add <code>vector</code> to my existed project, and my existed project can't resolve symbol <code>vector</code>.</p>
",7011251,,7011251,,2017-01-01 11:16:02,2017-01-03 2:33:55,Android Studio 2.2.3 cannot find <vector>,<android><android-ndk><cmake><ndk-build>,2,2,,,
Android,41500348,1,41500488,958,1/6/2017 6:51:42,0,,1/6/2017 6:42:06,,2,629,"<p>I have requirement in which I would like to have the receipt of my purchase which is already consumed. So using of method getPurchases is ruled out because it only provides info of purchases which are owned and not consumed.
I can see documentation of getPurchaseHistory which can give all purchase history of all the purchases in 
<a href=""https://developer.android.com/google/play/billing/billing_reference.html#getPurchaseHistory"" rel=""nofollow noreferrer"">https://developer.android.com/google/play/billing/billing_reference.html#getPurchaseHistory</a></p>

<p>But its api is not present in IInAppBillingService.aidl</p>

<p><a href=""https://github.com/googlesamples/android-play-billing/blob/551a178e52baf60cc6e1f9cb6f40767b8453655a/TrivialDrive/app/src/main/aidl/com/android/vending/billing/IInAppBillingService.aidl"" rel=""nofollow noreferrer"">https://github.com/googlesamples/android-play-billing/blob/551a178e52baf60cc6e1f9cb6f40767b8453655a/TrivialDrive/app/src/main/aidl/com/android/vending/billing/IInAppBillingService.aidl</a></p>
",6339618,,,,,2017-07-06 22:08:26,Why getPurchaseHistory method is not present in IInAppBillingService.aidl even if it is documented?,<android><google-play><google-play-services>,2,0,,,
Android,41646040,1,41649595,959,1/14/2017 11:44:00,0,,1/14/2017 1:58:17,,4,659,"<p>I am developing an Android application with MVP and RxJava. Well, I have a doubt: </p>

<p>When I am creating my presenter and interactor I can put me Schedulers in the presenter, like this:</p>

<p><strong>Schedulers in the Presenter</strong></p>

<p>Presenter: </p>

<pre><code> override fun tryLogin(username: String, password: String) {
                mLoginInteractor.login(username, password)
                        .subscribeOn(Schedulers.newThread())
                        .observeOn(AndroidSchedulers.mainThread())
                        .subscribe(object : Subscriber&lt;User&gt;(){
        [...]
        }
</code></pre>

<p>Login Interactor:</p>

<pre><code>override fun login(username: String, password: String) =
 mRetrofit.create(ApiClient::class.java).login()
</code></pre>

<p>Or I can set the Schedulers in the Interactor, like this:</p>

<p><strong>Schedulers in the Interactor</strong></p>

<p>Presenter: </p>

<pre><code> override fun tryLogin(username: String, password: String) {
                mLoginInteractor.login(username, password)
                        .subscribe(object : Subscriber&lt;User&gt;(){
        [...]
        }
</code></pre>

<p>Login Interactor:</p>

<pre><code>    override fun login(username: String, password: String) =
     mRetrofit.create(ApiClient::class.java).login()
.subscribeOn(Schedulers.newThread())
.observeOn(AndroidSchedulers.mainThread())
</code></pre>

<p>I see that Google advices to set Schedulers in the Interactor. You can see this in this link:</p>

<p><a href=""https://github.com/googlesamples/android-architecture/tree/todo-mvp-rxjava/"" rel=""nofollow noreferrer"">https://github.com/googlesamples/android-architecture/tree/todo-mvp-rxjava/</a></p>

<p>But many people put the code in the Presenter, like this example:</p>

<p><a href=""https://github.com/BoydHogerheijde/Android-MVP-example/blob/master/app/src/main/java/nl/bhogerheijde/example/rxmvp/interactor/Interactor.java"" rel=""nofollow noreferrer"">https://github.com/BoydHogerheijde/Android-MVP-example/blob/master/app/src/main/java/nl/bhogerheijde/example/rxmvp/interactor/Interactor.java</a></p>

<p>So, <strong>Do I set Schedulers in the Presenter or in the Interactor</strong>?</p>

<p>(I think it's a better idea to put in the Presenter as the Intractor job is only to get the Data, but maybe I am wrong...)</p>
",7101554,,,,,2017-04-05 6:24:38,MVP + RxJava - Put the Schedulers in the Presenter or in the Interactor?,<android><architecture><rx-java><kotlin><mvp>,2,0,,,
Android,41652621,1,41653733,960,1/14/2017 18:54:08,0,,1/14/2017 17:01:50,,2,753,"<p>I took the android native activity sample from Android Studio and replaced the app glue implementation by my own implementation of native activity.</p>

<p>So here is my Cmake file which almost the same as in the sample:</p>

<pre><code>cmake_minimum_required(VERSION 3.4.1)

#my implementation
add_library(android-impl STATIC
            C:/android_libs/native-impl/Activity.cpp
            )

# now build app's shared lib
set(CMAKE_CXX_FLAGS ""${CMAKE_CXX_FLAGS} -std=gnu++11"")

add_library(my-app SHARED
            main.cpp
            )

#add include directories

target_include_directories(my-app PRIVATE
                           C:/android_libs/native-impl/)

# add lib dependencies
target_link_libraries(my-app
                      android
                      android-impl
                      EGL
                      GLESv1_CM
                      log)
</code></pre>

<p>And I also specified in the Android manifest file the name of my shared lib like this:</p>

<pre><code>    &lt;!-- Tell NativeActivity the name of our .so --&gt;
    &lt;meta-data android:name=""android.app.lib_name""
        android:value=""my-app"" /&gt;
</code></pre>

<p>It all compiles, but when I run on my device it instantly throws an error:</p>

<pre><code>Caused by: java.lang.IllegalArgumentException: Unable to load native library: /data/app/com.nativetest.myapp-1/lib/arm/libmy-app.so

java.lang.RuntimeException: Unable to start activity ComponentInfo{com.nativetest.myapp/android.app.NativeActivity}: java.lang.IllegalArgumentException: Unable to load native library: /data/app/com.nativetest.myapp-2/lib/arm/libmy-app.so
</code></pre>

<p>I don't understand because I have copied the same Cmake file from the sample provided for native activity and just replaced app glue with my implementation, and used different name for my shared library.</p>

<p>Here are the files from the sample that I used:
<a href=""https://github.com/googlesamples/android-ndk/blob/master/native-activity/app/src/main/cpp/CMakeLists.txt"" rel=""nofollow noreferrer"">Cmakelist.txt</a>
<a href=""https://github.com/googlesamples/android-ndk/blob/master/native-activity/app/src/main/AndroidManifest.xml"" rel=""nofollow noreferrer"">AndroidManifest.xml</a></p>

<p>Is there something else that I need to modify ?</p>
",3134405,,3134405,,2017-01-14 17:34:19,2017-01-14 18:54:08,Trouble building shared lib with CMake using Android NDK,<android><android-studio><android-ndk><cmake>,1,6,,,
Android,41732005,1,41732163,961,1/19/2017 1:13:56,0,,1/19/2017 0:52:45,,1,818,"<p>I'm trying to modify Google's <a href=""https://github.com/googlesamples/android-Camera2Basic"" rel=""nofollow noreferrer"">camera2Basic</a> example code. I removed the <code>&lt;FrameLayout/&gt;</code> containing the ""Picture"" and ""Info"" button in an attempt to make the <code>&lt;TextureView/&gt;</code> full screen. However, the preview does not fill the entire screen, there remains a black bar below it. I believe this has something to do with the <code>AutoFitTextureView</code> that it ships with but since they haven't provided any documentation on how it works I am unable to make modifications to it.</p>
",896112,,,,,2017-01-19 1:13:56,Full screen preview camera2Basic Example Project,<android><android-layout><android-camera2>,1,0,,,
Android,41705194,1,41781171,962,1/21/2017 15:35:32,4,,1/17/2017 19:15:54,,5,1352,"<h1>My Guidelines</h1>

<p>If followed <a href=""https://developers.google.com/identity/sign-in/android/backend-auth"" rel=""noreferrer"">this</a> Google documentation about verifying Google-Account-Tokens on the server side, but I am kinda confused.</p>

<h1>My Problem</h1>

<pre><code>GoogleIdTokenVerifier googleIdTokenVerifier = new GoogleIdTokenVerifier.Builder(new NetHttpTransport(), new JacksonFactory())
                                .setAudience(Collections.singletonList(CLIENT_ID))
                                .build();
</code></pre>

<p>In this piece of code I figured out that the <code>transport</code> and <code>jsonFactory</code> arguments can be filled as <code>new NetHttpTransport()</code> and <code>new JacksonFactory()</code> <a href=""https://github.com/googlesamples/android-credentials/blob/master/credentials-quickstart/app/src/main/java/com/google/example/credentialsbasic/MockServer.java"" rel=""noreferrer"">here</a>. It also describes how to get <code>AudienceString</code>, but I couldn't figure out what it is for. I couldn't test it, but my question is if I can use it without <code>.setAudience()</code> or if I need it and what it is for.</p>
",6509751,,,,,2017-01-21 15:35:32,How to instantiate GoogleIdTokenVerifier properly / what does .setAudience() do?,<java><android><google-signin><google-authentication>,1,2,,,
Android,41790052,1,41790239,963,1/22/2017 11:19:49,0,,1/22/2017 10:59:10,,2,780,"<p>I am using the Camera2Basic example from Google Samples (<a href=""https://github.com/googlesamples/android-Camera2Basic"" rel=""nofollow noreferrer"">https://github.com/googlesamples/android-Camera2Basic</a>) to display a camera preview inside a fragment.
This fragment contains a RelativeLayout and a custom AutoFitTextureView. The latter can be found on the link above. I have adjusted the layout to center the preview and remove control buttons:</p>

<pre><code>&lt;RelativeLayout xmlns:android=""http://schemas.android.com/apk/res/android""
    android:layout_width=""match_parent""
    android:layout_height=""match_parent""
    android:id=""@+id/camera_rel""&gt;

    &lt;uk.co.deluxe_digital.messngr.AutoFitTextureView
    android:id=""@+id/texture""
    android:layout_width=""wrap_content""
    android:layout_height=""wrap_content""
    android:layout_centerInParent=""true""
    android:layout_centerHorizontal=""true""
    android:layout_centerVertical=""true"" /&gt;

&lt;/RelativeLayout&gt;
</code></pre>

<p>I have three total fragments that are displayed within a ViewPager. I did make some small changes to the Camera2BasicFragment to make it an android.support.v4.app.Fragment to work with my ViewPager and remove the buttons.</p>

<p>What I would like is to make the camera preview fill the entire screen. This is possible by stretching the preview image. That is not what I want. Does anyone know a way of scaling up the preview or TextureView so that the height of the preview matches the container even if the sides are cropped off. I would like it to fill the view and maintain aspect ratio. This would mean that some of the preview at either side is lost, but that is okay.</p>

<p>This is what I currently have:
<a href=""https://i.stack.imgur.com/lPZXH.jpg"" rel=""nofollow noreferrer""><img src=""https://i.stack.imgur.com/lPZXH.jpg"" alt=""current incorrect display of camera preview""></a></p>

<p>The FloatingActionButton takes care of capturing the image. That is on the main parent activity.</p>

<p>Even if you can point me in the right direction to working this out, that would be a huge help!</p>
",2216919,,2216919,,2017-01-22 11:38:02,2018-01-23 1:59:34,Camera2 API Make Preview Fill Entire View,<java><android><android-layout><android-fragments><android-camera2>,2,0,1,,
Android,36055167,1,41862649,964,1/25/2017 22:14:05,314,,3/17/2016 8:30:21,,1,2741,"<p>I have a camera project and im using <code>camera2 API</code> especially from this link
<a href=""https://github.com/googlesamples/android-Camera2Basic"" rel=""nofollow"">https://github.com/googlesamples/android-Camera2Basic</a></p>

<p>I can save the picture taken to my file manager located at <code>DCIM/camera</code> for example, but when I open my gallery, it wont show my last picture.</p>

<p>Can anyone help me?</p>

<p>One more question, I want to make my camera can be a list:
for example, when I open ""LINE"" and I want take picture with camera, I want my camera appears and can be chosen.</p>

<p>This is the sample code I tried for saving picture to the custom path:</p>

<pre><code>@Override
public void onActivityCreated(Bundle savedInstanceState) {
    super.onActivityCreated(savedInstanceState);
    mFile = new File(""/storage/emulated/0/DCIM/Camera"", ""pic.jpg"");
    int counter=1;
    while (mFile.exists()) {
        mFile = new File(""/storage/emulated/0/DCIM/Camera"", ""pic"" + String.format(""%02d"", counter) + "".jpg"");
        counter++;
    }

}
</code></pre>
",5225911,,4370109,,2016-03-19 9:57:51,2017-01-25 22:14:05,Camera2 API picture taken wont show at gallery apps,<android><android-studio><android-camera2>,3,5,1,,
Android,41892544,1,41893129,965,1/27/2017 11:38:25,0,,1/27/2017 11:08:02,,5,3196,"<p>In converting a library project build from <code>Android.mk</code> to <code>CMakeLists.txt</code> following the Google <a href=""https://github.com/googlesamples/android-ndk/blob/master/hello-libs/app/src/main/cpp/CMakeLists.txt"" rel=""noreferrer"">hello-libs example</a> and I have encountered problems avoiding undefined references. I'm using an open source project called <a href=""http://dcmtk.org"" rel=""noreferrer"">DCMTK</a> and compiling DCMTK and <a href=""https://www.gnu.org/software/libiconv/"" rel=""noreferrer"">ICONV</a> to static libraries that I then link in. Building using the <code>Android.mk</code> works via <code>ndk-build</code> and building them with <code>gradle</code> and the following <code>CMakeLists.txt</code> works when I add each static library to the <code>target_link_libraries</code>. However, I wanted to use <code>add_library</code> to do the job and tried</p>

<pre><code>add_library( lib_dcmdata STATIC IMPORTED )
set_target_properties( lib_dcmdata
                           PROPERTIES
                           IMPORTED_LOCATION ${CMAKE_SOURCE_DIR}/prebuilt_libs/dcmtk/${ANDROID_ABI}/lib/libdcmdata.a )
</code></pre>

<p>for each library and then adding them to target_link_libraries. This resulted in a ton of undefined references. I also tried set_target_properties by grouping the static libraries into one target, but this didn't work either.</p>

<p>Is the order of dependency linking different in some way or the way CMake handles these libraries different using the <code>add_library</code> <code>set_target_properties</code> method?</p>

<h3>CMakeLists.txt</h3>

<pre><code>cmake_minimum_required( VERSION 3.6 )
project( dicom-jni )

set( SOURCE_FILES
         dicom.cpp
         dicom.hpp )

add_library( lib_dcmtk STATIC IMPORTED )
set_target_properties( lib_dcmtk
                           PROPERTIES
                           IMPORTED_LOCATION ${CMAKE_SOURCE_DIR}/prebuilt_libs/dcmtk/${ANDROID_ABI}/lib/libdcmrt.a
                           IMPORTED_LOCATION ${CMAKE_SOURCE_DIR}/prebuilt_libs/dcmtk/${ANDROID_ABI}/lib/libdcmpstat.a
                           IMPORTED_LOCATION ${CMAKE_SOURCE_DIR}/prebuilt_libs/dcmtk/${ANDROID_ABI}/lib/libdcmqrdb.a
                           IMPORTED_LOCATION ${CMAKE_SOURCE_DIR}/prebuilt_libs/dcmtk/${ANDROID_ABI}/lib/libdcmwlm.a
                           IMPORTED_LOCATION ${CMAKE_SOURCE_DIR}/prebuilt_libs/dcmtk/${ANDROID_ABI}/lib/libdcmdsig.a
                           IMPORTED_LOCATION ${CMAKE_SOURCE_DIR}/prebuilt_libs/dcmtk/${ANDROID_ABI}/lib/libdcmnet.a
                           IMPORTED_LOCATION ${CMAKE_SOURCE_DIR}/prebuilt_libs/dcmtk/${ANDROID_ABI}/lib/libdcmjpeg.a
                           IMPORTED_LOCATION ${CMAKE_SOURCE_DIR}/prebuilt_libs/dcmtk/${ANDROID_ABI}/lib/libdcmjpls.a
                           IMPORTED_LOCATION ${CMAKE_SOURCE_DIR}/prebuilt_libs/dcmtk/${ANDROID_ABI}/lib/libcharls.a
                           IMPORTED_LOCATION ${CMAKE_SOURCE_DIR}/prebuilt_libs/dcmtk/${ANDROID_ABI}/lib/libijg16.a
                           IMPORTED_LOCATION ${CMAKE_SOURCE_DIR}/prebuilt_libs/dcmtk/${ANDROID_ABI}/lib/libijg12.a
                           IMPORTED_LOCATION ${CMAKE_SOURCE_DIR}/prebuilt_libs/dcmtk/${ANDROID_ABI}/lib/libijg8.a
                           IMPORTED_LOCATION ${CMAKE_SOURCE_DIR}/prebuilt_libs/dcmtk/${ANDROID_ABI}/lib/libdcmimage.a
                           IMPORTED_LOCATION ${CMAKE_SOURCE_DIR}/prebuilt_libs/dcmtk/${ANDROID_ABI}/lib/libdcmimgle.a
                           IMPORTED_LOCATION ${CMAKE_SOURCE_DIR}/prebuilt_libs/dcmtk/${ANDROID_ABI}/lib/libi2d.a
                           IMPORTED_LOCATION ${CMAKE_SOURCE_DIR}/prebuilt_libs/dcmtk/${ANDROID_ABI}/lib/libdcmdata.a
                           IMPORTED_LOCATION ${CMAKE_SOURCE_DIR}/prebuilt_libs/dcmtk/${ANDROID_ABI}/lib/liboflog.a
                           IMPORTED_LOCATION ${CMAKE_SOURCE_DIR}/prebuilt_libs/dcmtk/${ANDROID_ABI}/lib/libofstd.a )

add_library( lib_iconv STATIC IMPORTED )
set_target_properties( lib_iconv
                           PROPERTIES
                           IMPORTED_LOCATION ${CMAKE_SOURCE_DIR}/prebuilt_libs/iconv/${ANDROID_ABI}/lib/libiconv.a
                           IMPORTED_LOCATION ${CMAKE_SOURCE_DIR}/prebuilt_libs/iconv/${ANDROID_ABI}/lib/libcharset.a )

find_library( lib_jnigraphics jnigraphics )
find_library( lib_android-log log )

add_library( dicom-jni SHARED ${SOURCE_FILES} )

target_include_directories( dicom-jni PRIVATE
                                prebuilt_libs/dcmtk/${ANDROID_ABI}/include
                                prebuilt_libs/iconv/${ANDROID_ABI}/include
                                logger )

target_link_libraries( dicom-jni
                           ${CMAKE_SOURCE_DIR}/prebuilt_libs/dcmtk/${ANDROID_ABI}/lib/libdcmrt.a
                           ${CMAKE_SOURCE_DIR}/prebuilt_libs/dcmtk/${ANDROID_ABI}/lib/libdcmpstat.a
                           ${CMAKE_SOURCE_DIR}/prebuilt_libs/dcmtk/${ANDROID_ABI}/lib/libdcmqrdb.a
                           ${CMAKE_SOURCE_DIR}/prebuilt_libs/dcmtk/${ANDROID_ABI}/lib/libdcmwlm.a
                           ${CMAKE_SOURCE_DIR}/prebuilt_libs/dcmtk/${ANDROID_ABI}/lib/libdcmdsig.a
                           ${CMAKE_SOURCE_DIR}/prebuilt_libs/dcmtk/${ANDROID_ABI}/lib/libdcmnet.a
                           ${CMAKE_SOURCE_DIR}/prebuilt_libs/dcmtk/${ANDROID_ABI}/lib/libdcmjpeg.a
                           ${CMAKE_SOURCE_DIR}/prebuilt_libs/dcmtk/${ANDROID_ABI}/lib/libdcmjpls.a
                           ${CMAKE_SOURCE_DIR}/prebuilt_libs/dcmtk/${ANDROID_ABI}/lib/libcharls.a
                           ${CMAKE_SOURCE_DIR}/prebuilt_libs/dcmtk/${ANDROID_ABI}/lib/libijg16.a
                           ${CMAKE_SOURCE_DIR}/prebuilt_libs/dcmtk/${ANDROID_ABI}/lib/libijg12.a
                           ${CMAKE_SOURCE_DIR}/prebuilt_libs/dcmtk/${ANDROID_ABI}/lib/libijg8.a
                           ${CMAKE_SOURCE_DIR}/prebuilt_libs/dcmtk/${ANDROID_ABI}/lib/libdcmimage.a
                           ${CMAKE_SOURCE_DIR}/prebuilt_libs/dcmtk/${ANDROID_ABI}/lib/libdcmimgle.a
                           ${CMAKE_SOURCE_DIR}/prebuilt_libs/dcmtk/${ANDROID_ABI}/lib/libi2d.a
                           ${CMAKE_SOURCE_DIR}/prebuilt_libs/dcmtk/${ANDROID_ABI}/lib/libdcmdata.a
                           ${CMAKE_SOURCE_DIR}/prebuilt_libs/dcmtk/${ANDROID_ABI}/lib/liboflog.a
                           ${CMAKE_SOURCE_DIR}/prebuilt_libs/dcmtk/${ANDROID_ABI}/lib/libofstd.a
                           ${CMAKE_SOURCE_DIR}/prebuilt_libs/iconv/${ANDROID_ABI}/lib/libiconv.a
                           ${CMAKE_SOURCE_DIR}/prebuilt_libs/iconv/${ANDROID_ABI}/lib/libcharset.a
                           z
                           dl
                           stdc++
                           ${lib_jnigraphics}
                           ${lib_android-log} )
</code></pre>
",410867,,,,,2017-01-27 11:38:25,"Android, CMake and Static Linking",<android-ndk><cmake>,1,0,2,,
Android,41982214,1,41982309,966,2/1/2017 14:33:57,0,,2/1/2017 14:29:05,,1,587,"<p>I'm currently working with <a href=""https://github.com/googlesamples/android-Camera2Basic"" rel=""nofollow noreferrer"">android-Camera2Basic</a>, this sample is designed to take pictures with back camera, and it work's fine but when I changed this <a href=""https://github.com/googlesamples/android-Camera2Basic/blob/master/Application/src/main/java/com/example/android/camera2basic/Camera2BasicFragment.java#L501"" rel=""nofollow noreferrer"">line</a> to this : </p>

<pre><code>if (facing != null &amp;&amp; facing != CameraCharacteristics.LENS_FACING_FRONT)
</code></pre>

<p>the preview is showing the facing camera as expected but it does't take pictures when I click picture button.</p>

<p>Why is this happening did I need to change something else ?  </p>
",6325994,,,,,2017-02-01 14:33:57,Android Camera2 : can't take picture with front camera,<android><android-camera>,1,0,,,
Android,42009948,1,42010274,967,2/2/2017 19:02:04,0,,2/2/2017 18:43:33,,1,1064,"<p>I am working with Android API 25 and need to make permissions requests in the app. </p>

<p>There are a ton of code samples on how to make a request as well as how to show the rationale. <a href=""https://github.com/googlesamples/android-RuntimePermissions/blob/master/Application/src/main/java/com/example/android/system/runtimepermissions/MainActivity.java"" rel=""nofollow noreferrer"">This link here</a> shows a simple methodology as do these: <a href=""https://stackoverflow.com/questions/36385161/android-m-request-multiple-permission-at-a-single-time"">Android M Request Multiple permission at a single time</a> , <a href=""https://stackoverflow.com/questions/31502650/android-m-request-permission-non-activity"">Android M request permission non activity</a> </p>

<p>The problem I am having is I am requesting multiple permissions at once (Location, Write storage access, and Contacts) and the ActivityCompatApi23.shouldShowRequestPermissionRationale source code only takes in a String for a single permission and not an array for multiple permissions. (source: android.support.v4.app.ActivityCompat)</p>

<p>So in my code, I can do this:</p>

<pre><code>     ActivityCompat.requestPermissions(activity, permissionsStringArray, 123);
</code></pre>

<p>And try to request multiple at once, but I can't then show the explanation for the ones needed if they return true from:</p>

<pre><code>     ActivityCompat.shouldShowRequestPermissionRationale(activity,
                    currentPerm.getPermissionManifestName()
</code></pre>

<p>Does anyone have any recommendations on how I can show a dialog that includes multiple rationales in it as opposed to one at a time? </p>
",7507065,,-1,,2017-05-23 12:32:08,2017-02-02 19:02:04,How do I show permissions rationale for multiple permissions request?,<android><android-alertdialog><android-permissions><android-dialog>,1,1,,,
Android,39407587,1,42025718,968,2/3/2017 13:44:12,147,,9/9/2016 8:53:29,,1,2258,"<p>I want to debug native code in Android Studio (version 2.2) in following examples: <a href=""https://github.com/googlesamples/android-ndk/tree/master-ndkbuild"" rel=""nofollow"">https://github.com/googlesamples/android-ndk/tree/master-ndkbuild</a>.</p>

<p>I have tried to edit app Run/Debug configuration and change debugger type to native or hybrid without success. Also tried to attach debuger selecting hybrid or native, but app doesn't stop on breakpoint in C++ code, when debugger is connected to process.</p>

<p>I have bigger project which is built simillary to linked examples. Currently rebuilding makefiles is not possible, therefore I want to run debugging with this kind or project setup. This kind of project setup means; using externalNativeBuild with ndk-build.</p>

<p>Does anyone know how to debug these examples?</p>
",1512518,,1512518,,2016-09-15 12:42:00,2017-02-03 13:44:12,Android native debug compiled with externalNativeBuild.ndkBuild,<android><c++><debugging><android-ndk>,2,4,,,
Android,42068877,1,42069068,969,2/6/2017 13:31:52,0,,2/6/2017 13:22:49,,1,821,"<p>Android 6.0 (M) offers new features Fingerprint Authentication. I tried this example <a href=""https://github.com/googlesamples/android-FingerprintDialog"" rel=""nofollow noreferrer"">android-FingerprintDialog</a> it's good google sample.</p>

<p>A Problem is i am creating app like once user successfully authenticated by Fingerprint load that user data from <code>SQlite Database</code> but <code>FingerprintManager</code> can't provide any unique identity of fingerprint. If anyone have idea about this then please share it.</p>
",4395114,,4395114,,2017-02-06 13:27:51,2017-12-21 8:04:21,Is Android Fingerprint provide fingerprint name or Any unique identity of fingerprint?,<android><android-6.0-marshmallow><android-fingerprint-api>,2,9,2,,
Android,37462464,1,42082187,970,2/7/2017 5:11:12,257,,5/26/2016 13:35:55,,1,235,"<p>Fingerprint API preview for Android N is found <a href=""https://developer.android.com/preview/api-overview.html"" rel=""nofollow"">here</a> with Sample App <a href=""https://github.com/googlesamples/android-FingerprintDialog/"" rel=""nofollow"">Sample App</a> .As of this writing, createKey() in this method specify key_name,i don't know about key_name,Please anyone tell about key_name</p>

<pre><code>    /** Alias for our key in the Android Key Store */
    private static final String KEY_NAME = ""my_key"";


     public void createKey() {
    // The enrolling flow for fingerprint. This is where you ask the user to set up fingerprint
    // for your flow. Use of keys is necessary if you need to know if the set of
    // enrolled fingerprints has changed.

     try {
        mKeyStore.load(null);
        // Set the alias of the entry in Android KeyStore where the key will appear
        // and the constrains (purposes) in the constructor of the Builder

        mKeyGenerator.init(new KeyGenParameterSpec.Builder(KEY_NAME,
                KeyProperties.PURPOSE_ENCRYPT |
                        KeyProperties.PURPOSE_DECRYPT)
                .setBlockModes(KeyProperties.BLOCK_MODE_CBC)
                        // Require the user to authenticate with a fingerprint to authorize every use
                        // of the key
                .setUserAuthenticationRequired(true)
                .setEncryptionPaddings(KeyProperties.ENCRYPTION_PADDING_PKCS7)
                .build());
        mKeyGenerator.generateKey();
    } catch (NoSuchAlgorithmException | InvalidAlgorithmParameterException
            | CertificateException | IOException e) {
        throw new RuntimeException(e);
    }
}
</code></pre>

<p>this my part of code,here  what is KEY_NAME and key_name get from where</p>
",6285198,,,,,2017-02-07 5:11:12,how to get Key_name for fingerprint scanner?,<android>,1,0,,,
Android,42119670,1,42138738,971,2/9/2017 14:03:04,1,,2/8/2017 17:21:15,,1,259,"<p>I've implemented an OpenSLES buffered queue following the example here: <a href=""https://github.com/googlesamples/android-ndk/blob/master/native-audio/app/src/main/cpp/native-audio-jni.c"" rel=""nofollow noreferrer"">https://github.com/googlesamples/android-ndk/blob/master/native-audio/app/src/main/cpp/native-audio-jni.c</a></p>

<p>However when I enqueue my sound and it's (implicitly) played, I can hear a glitch at the beginning of the sound:</p>

<pre><code>(*bqPlayerBufferQueue)-&gt;Enqueue(bqPlayerBufferQueue, nextBuffer, nextSize);
</code></pre>

<p>This glitch is not present on the (file) sample. </p>

<p>If I enqueue twice the sample, I can hear twice this glitch.</p>

<p>The sample was encoded using Audacity into a mono .wav of 44kHz</p>
",1902536,,,,,2017-02-09 14:03:04,Sound glitch on Android OpenSLES buffered queue,<android-ndk><opensl>,1,0,,,
Android,42054221,1,42152545,972,2/10/2017 6:05:04,5,,2/5/2017 16:06:56,,27,1174,"<p>I have an android application that performs image analysis, which is managed with an <code>IntentService</code> - the process takes a couple of seconds each time and works accurately and quickly. </p>

<p>But when the process is repeated in the app around 50 times (as illustrated) it begins to get very slow until the point in which the app and device becomes unusable. When the device is restarted and app opens again it runs as usual.</p>

<p>Inspecting with Android Studio I can see that each time I run the analysis that the memory allocation for the app goes up and up every time by around <em>1MB</em>. So it is clearly running out of memory when it crashes.</p>

<p>I have used this flag on finishing the analysis and going to the result to try fix background activities;</p>

<pre><code>intent.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK | Intent.FLAG_ACTIVITY_CLEAR_TASK);
</code></pre>

<p>which has had minimal effect, and I understand the IntentService manages itself shutting down. So not sure what else I can do to try and reduce the memory allocation or at least clear down allocation and stop adding to it?</p>

<p><a href=""https://i.stack.imgur.com/S12aw.png""><img src=""https://i.stack.imgur.com/S12aw.png"" alt=""Image Analysis Workflow""></a></p>

<p>Further details:</p>

<ul>
<li>The application is using the camera implementation based on <a href=""https://github.com/googlesamples/android-Camera2Basic"">Google Camera2</a></li>
<li>The analysis is done with a C++ library through the IntentService</li>
</ul>
",1887939,,,,,2017-02-14 22:10:20,Memory allocation problems with android application,<java><android><android-camera2>,4,7,2,,
Android,42112519,1,42176567,973,2/11/2017 13:45:16,3,,2/8/2017 11:58:57,,8,3263,"<p>I'm trying to disable multiple <code>Barcode</code> detection at time.
How to disable <code>MultiProcessor</code> using <code>Google Vision API</code>, I couldn't find any solution from official site <a href=""https://developers.google.com/vision/android/multi-tracker-tutorial"" rel=""noreferrer"">here</a></p>

<p>I have downloaded sample from <a href=""https://github.com/googlesamples/android-vision"" rel=""noreferrer"">here</a></p>

<p><strong>Code</strong>    </p>

<pre><code>BarcodeDetector barcodeDetector = new BarcodeDetector.Builder(context).build();
    BarcodeTrackerFactory barcodeFactory = new BarcodeTrackerFactory(mGraphicOverlay);
    barcodeDetector.setProcessor(
            new MultiProcessor.Builder&lt;&gt;(barcodeFactory).build());
</code></pre>

<p>Even if remove below line, I cannot detect at all.</p>

<pre><code> barcodeDetector.setProcessor(
        new MultiProcessor.Builder&lt;&gt;(barcodeFactory).build());
</code></pre>
",3251783,,3251783,,2017-02-08 12:33:16,2017-02-11 13:45:16,How to Disable multiple barcode detection android Vision API,<android><barcode-scanner><android-vision>,2,2,2,,
Android,42258489,1,42289088,974,2/17/2017 3:56:05,2,,2/15/2017 19:34:00,,1,755,"<p>I am implementing SafetyNet API based on <a href=""https://github.com/googlesamples/android-play-safetynet"" rel=""nofollow noreferrer"">Google SafetyNet sample</a> and <a href=""https://github.com/scottyab/safetynethelper"" rel=""nofollow noreferrer"">SafetyNet Helper</a></p>

<p>Here is my working code. First part is processing code I used at <a href=""https://github.com/googlesamples/android-play-safetynet/blob/master/android/SafetyNetSample/Application/src/main/java/com/example/android/safetynetsample/SafetyNetSampleFragment.java"" rel=""nofollow noreferrer"">SafetyNetSampleFragment</a>:</p>

<pre><code>import android.support.annotation.NonNull;
import android.support.annotation.Nullable;
import android.support.v4.app.FragmentActivity;
import android.util.Base64;
import android.util.Log;

import com.google.android.gms.common.ConnectionResult;
import com.google.android.gms.common.api.GoogleApiClient;
import com.google.android.gms.common.api.ResultCallback;
import com.google.android.gms.common.api.Status;
import com.google.android.gms.safetynet.SafetyNet;
import com.google.android.gms.safetynet.SafetyNetApi;

import java.io.ByteArrayOutputStream;
import java.io.IOException;
import java.security.SecureRandom;
import java.util.Random;


public class SafetyNetVerifier implements GoogleApiClient.OnConnectionFailedListener {

    private final Random mRandom = new SecureRandom();
    private String mResult;
    private GoogleApiClient mGoogleApiClient;

    private FragmentActivity activity;

    public SafetyNetVerifier(FragmentActivity activity) {
        this.activity = activity;
        buildGoogleApiClient();
        sendSafetyNetRequest();
    }

    private byte[] getRequestNonce(String data) {
        ByteArrayOutputStream byteStream = new ByteArrayOutputStream();
        byte[] bytes = new byte[24];
        mRandom.nextBytes(bytes);
        try {
            byteStream.write(bytes);
            byteStream.write(data.getBytes());
        } catch (IOException e) {
            return null;
        }

        return byteStream.toByteArray();
    }

    protected synchronized void buildGoogleApiClient() {
        mGoogleApiClient = new GoogleApiClient.Builder(activity)
                .addApi(SafetyNet.API)
                .enableAutoManage(activity, this)
                .build();
    }

    private void sendSafetyNetRequest() {
        Log.e(""hqthao"", ""Sending SafetyNet API request."");

        String nonceData = ""Safety Net Sample: "" + System.currentTimeMillis();
        byte[] nonce = getRequestNonce(nonceData);

        SafetyNet.SafetyNetApi.attest(mGoogleApiClient, nonce)
                .setResultCallback(new ResultCallback&lt;SafetyNetApi.AttestationResult&gt;() {

                    @Override
                    public void onResult(SafetyNetApi.AttestationResult result) {
                        Status status = result.getStatus();
                        if (status.isSuccess()) {
                            mResult = result.getJwsResult();
                            Log.e(""hqthao"", ""Success! SafetyNet result:\n"" + mResult + ""\n"");
                            SafetyNetResponse response = parseJsonWebSignature(mResult);
                            Log.e(""hqthao"", response.toString());
                        }
                    }
                });
    }

    @Nullable
    private SafetyNetResponse parseJsonWebSignature(String jwsResult) {
        if (jwsResult == null) {
            return null;
        }
        //the JWT (JSON WEB TOKEN) is just a 3 base64 encoded parts concatenated by a . character
        final String[] jwtParts = jwsResult.split(""\\."");

        if (jwtParts.length == 3) {
            //we're only really interested in the body/payload
            String decodedPayload = new String(Base64.decode(jwtParts[1], Base64.DEFAULT));

            return SafetyNetResponse.parse(decodedPayload);
        } else {
            return null;
        }
    }

    @Override
    public void onConnectionFailed(@NonNull ConnectionResult connectionResult) {
        Log.e(""hqthao"", ""Error connecting to Google Play Services."" + connectionResult.getErrorMessage());
    }

}
</code></pre>

<p>Here is the model <code>SafetyNetResponse</code> I copied from <a href=""https://github.com/scottyab/safetynethelper/blob/master/safetynetlib/src/main/java/com/scottyab/safetynet/SafetyNetResponse.java"" rel=""nofollow noreferrer"">SafetyNetResponse</a>:</p>

<pre><code>import android.support.annotation.NonNull;
import android.support.annotation.Nullable;
import android.util.Log;

import org.json.JSONArray;
import org.json.JSONException;
import org.json.JSONObject;

import java.util.Arrays;

public class SafetyNetResponse {

    private static final String TAG = SafetyNetResponse.class.getSimpleName();
    private String nonce;
    private long timestampMs;
    private String apkPackageName;
    private String[] apkCertificateDigestSha256;
    private String apkDigestSha256;
    private boolean ctsProfileMatch;
    private boolean basicIntegrity;

    //forces the parse()
    private SafetyNetResponse() {
    }

    /**
     * @return BASE64 encoded
     */
    public String getNonce() {
        return nonce;
    }

    public long getTimestampMs() {
        return timestampMs;
    }

    /**
     * @return com.package.name.of.requesting.app
     */
    public String getApkPackageName() {
        return apkPackageName;
    }

    /**
     * SHA-256 hash of the certificate used to sign requesting app
     *
     * @return BASE64 encoded
     */
    public String[] getApkCertificateDigestSha256() {
        return apkCertificateDigestSha256;
    }

    /**
     * SHA-256 hash of the app's APK
     *
     * @return BASE64 encoded
     */
    public String getApkDigestSha256() {
        return apkDigestSha256;
    }


    /**
     * If the value of ""ctsProfileMatch"" is true, then the profile of the device running your app matches the profile of a device that has passed Android compatibility testing.
     *
     * @return
     */
    public boolean isCtsProfileMatch() {
        return ctsProfileMatch;
    }

    /**
     * If the value of ""basicIntegrity"" is true, then the device running your app likely wasn't tampered with, but the device has not necessarily passed Android compatibility testing.
     *
     * @return
     */
    public boolean isBasicIntegrity() {
        return basicIntegrity;
    }

    /**
     * Parse the JSON string into populated SafetyNetResponse object
     *
     * @param decodedJWTPayload JSON String (always a json string according to JWT spec)
     * @return populated SafetyNetResponse
     */
    @Nullable
    public static SafetyNetResponse parse(@NonNull String decodedJWTPayload) {

        Log.d(TAG, ""decodedJWTPayload json:"" + decodedJWTPayload);

        SafetyNetResponse response = new SafetyNetResponse();
        try {
            JSONObject root = new JSONObject(decodedJWTPayload);
            if (root.has(""nonce"")) {
                response.nonce = root.getString(""nonce"");
            }

            if (root.has(""apkCertificateDigestSha256"")) {
                JSONArray jsonArray = root.getJSONArray(""apkCertificateDigestSha256"");
                if (jsonArray != null) {
                    String[] certDigests = new String[jsonArray.length()];
                    for (int i = 0; i &lt; jsonArray.length(); i++) {
                        certDigests[i] = jsonArray.getString(i);
                    }
                    response.apkCertificateDigestSha256 = certDigests;
                }
            }

            if (root.has(""apkDigestSha256"")) {
                response.apkDigestSha256 = root.getString(""apkDigestSha256"");
            }

            if (root.has(""apkPackageName"")) {
                response.apkPackageName = root.getString(""apkPackageName"");
            }

            if (root.has(""basicIntegrity"")) {
                response.basicIntegrity = root.getBoolean(""basicIntegrity"");
            }

            if (root.has(""ctsProfileMatch"")) {
                response.ctsProfileMatch = root.getBoolean(""ctsProfileMatch"");
            }

            if (root.has(""timestampMs"")) {
                response.timestampMs = root.getLong(""timestampMs"");
            }

            return response;
        } catch (JSONException e) {
            Log.e(TAG, ""problem parsing decodedJWTPayload:"" + e.getMessage(), e);
        }
        return null;
    }


    @Override
    public String toString() {
        return ""SafetyNetResponse{"" +
                ""nonce='"" + nonce + '\'' +
                "", timestampMs="" + timestampMs +
                "", apkPackageName='"" + apkPackageName + '\'' +
                "", apkCertificateDigestSha256="" + Arrays.toString(apkCertificateDigestSha256) +
                "", apkDigestSha256='"" + apkDigestSha256 + '\'' +
                "", ctsProfileMatch="" + ctsProfileMatch +
                "", basicIntegrity="" + basicIntegrity +
                '}';
    }
}
</code></pre>

<p>We can easily call above workable code by calling this line of code inside activity:</p>

<pre><code>    new SafetyNetVerifier(this);
</code></pre>

<p>The result is:</p>

<pre><code>SafetyNetResponse{
 nonce='Xc4dSnAjAqf9KWDZokwK2TdBw9Td+ZILU2FmZXR5IE5ldCBTYW1wbGU6IDE0ODcxODQyMjYwNjc=', 
timestampMs=1487184225994, 
apkPackageName='null', 
apkCertificateDigestSha256=[], 
apkDigestSha256='null', 
ctsProfileMatch=false, 
basicIntegrity=false
}
</code></pre>

<p>As timestamp parsed correctly. I think I have get successfully safetynet response. But I don't know why <code>apkPackageName</code> always null and other fields as I have shown are empty. Please help me.</p>
",1493868,,296427,,2017-03-29 13:37:28,2017-03-29 13:37:28,SafetyNet: package name always return null,<android><google-play-services><safetynet>,1,1,,,
Android,42366276,1,42366771,411,2/21/2017 12:01:27,0,,2/21/2017 11:38:59,,2,2979,"<p>I want to make video recording using <code>android.hardware.camera2</code>. I have googled but not get any proper tutorial regarding this. There are some tutorial available for <code>camera preview</code> base on <a href=""https://developer.android.com/reference/android/hardware/Camera.html"" rel=""nofollow noreferrer"">Camera</a> which is now deprecated. Can anyone help me with latest sample code just for <code>recording video</code> with its <code>preview</code> which can be saved into <code>sd card</code>. I have just check <a href=""https://github.com/googlesamples/android-Camera2Video"" rel=""nofollow noreferrer"">GitHub</a> and <a href=""https://developer.android.com/samples/Camera2Video/index.html"" rel=""nofollow noreferrer""> Google camera2Video example</a> also but I need any simple solution which I can integrated into my project.</p>
",5302251,,1033581,,2019-01-15 17:54:01,2019-01-15 17:54:01,Android: How to record video using android.hardware.camera2 and MediaRecorder,<android><camera><android-camera><android-camera2>,2,0,1,,
Android,42358194,1,42402203,976,2/22/2017 21:00:35,1,,2/21/2017 3:36:24,,2,1028,"<p>I was using Visual Studio and it's Debug mechanism is really useful to me. With many header and C files in 1 project, just a simple F10 it could take me a tour around from the beginning of the main() function so that I could see the sequence of the code being executed.</p>

<p>Now I'm jumping into Android Studio and start with a project using NDK, JNI (this project for example: <a href=""https://github.com/googlesamples/android-ndk/tree/master/gles3jni"" rel=""nofollow noreferrer"">https://github.com/googlesamples/android-ndk/tree/master/gles3jni</a>), it makes me confused because there're many .java files and others C++ (native code) files and I don't know which code from which file is executed first and how it goes on.</p>

<p>My Question is: I'm looking for a way to debug in Android Studio line by line from the beginning <strong>to see its workflow</strong> likes how Visual Studio did but all I got from searching is how to start from a breakpoint when debugging.</p>

<p>I have tried putting the break point in the <code>onCreate()</code> method of the launcher activity and use <code>F8</code> to <code>Step Over</code> and <code>F7</code> to <code>Step Into</code> but it doesn't work as i expect. It keeps taking me to the super class <code>Activity.java</code> and <code>GLSurafaceView.java</code> instead of taking me to the C++ code. Is there any way to do so in Android Studio and how to do it? </p>

<p>I have tried with others project but the problem still remain the same. Hope someone could help.</p>
",7408814,,4409409,,2017-07-13 19:00:30,2017-07-13 19:00:30,How to debug Android Studio Project (using NDK and JNI) line by line to see the workflow?,<android-studio><debugging><android-ndk><java-native-interface>,2,2,,,
Android,42403890,1,42426052,977,2/23/2017 20:58:32,1,,2/22/2017 22:58:20,,3,1782,"<p>Google just launch <a href=""https://developers.google.com/android-publisher/voided-purchases"" rel=""nofollow noreferrer"">Voided Purchases API</a> </p>

<blockquote>
  <p>The Google Play Voided Purchases API allows you to revoke access to in-app products that are associated with purchases that a user has voided. The user can void a purchase in the following ways:</p>
  
  <ul>
  <li>The user requests a refund for their order.</li>
  <li>The user cancels their order.</li>
  <li>An order is charged back.</li>
  </ul>
</blockquote>

<p>But, I am confused with the use case.</p>

<p>Currently, I have an app with non consumable in-app purchase item (One-time purchase).</p>

<p>Whenever my app starts, I will check whether user has purchased the item, by using the following code.</p>

<p><a href=""https://github.com/googlesamples/android-play-billing/blob/master/TrivialDrive/app/src/main/java/com/example/android/trivialdrivesample/MainActivity.java#L243"" rel=""nofollow noreferrer"">https://github.com/googlesamples/android-play-billing/blob/master/TrivialDrive/app/src/main/java/com/example/android/trivialdrivesample/MainActivity.java#L243</a></p>

<p>I expect <code>inventory.getPurchase</code> will return null during next app startup, if user has decided to cancel their purchase order.</p>

<p>So, how does <code>Voided Purchases API</code> fit in ""user has decided to cancel their purchase order"" case? </p>

<p>I thought by using <code>onQueryInventoryFinished</code>, we can determine what item is currently owned by user?</p>
",72437,,62576,,2017-02-22 23:01:13,2017-02-23 20:58:32,What is the use case of new Voided Purchases API,<android>,2,0,1,,
Android,42420540,1,42448872,413,2/24/2017 21:48:10,1,,2/23/2017 15:57:20,,4,546,"<p>I'm using the BarcodeDetector from the Mobile Vision API on the Google Play Services (Version 10.2.0) for my app. I pretty much took the code from the smaple app they provide:
<a href=""https://github.com/googlesamples/android-vision"" rel=""nofollow noreferrer"">https://github.com/googlesamples/android-vision</a></p>

<p>And the barcodes are only detected if they are in the middle/centre of the screen. Is there any way of increasing this to extend the whole screen/camera preview? Its a bit misleading for the user unless you add a rectangle in the centre leading them to place the barcode inside.</p>

<p>Any help on how to accomplish this is welcome!</p>
",1652657,,8511554,,2018-04-04 17:25:01,2018-04-04 17:25:01,Mobile Vision API BarcodeDetector only detects in centre of the screen,<android><barcode><android-vision><vision-api>,1,2,2,,
Android,42820003,1,42820930,418,3/15/2017 21:23:37,0,,3/15/2017 20:25:29,,12,9104,"<p>I've been following MVP design pattern provided by <a href=""https://github.com/googlesamples/android-architecture/tree/todo-mvp/"" rel=""noreferrer"">Google</a>  to refactor my application. I have one MainActivity and many Fragments and it's seems little be messy for me to create activity for every fragment , so i've been thinking to register presenter in fragment. What i'm seeing is that every fragment register it's own presenter, but i'm not sure how much wrong it is... :)</p>

<p>So here is my Presenter:</p>

<pre><code>public class FirstPresenter implements FirstContract.Presenter {
    private final FirstContract.View mView;

    public FirstPresenter(FirstContract.View view) {
        mView = view;
    }

    @Override
    public void start() {
        Log.e(TAG, ""Start"");
    }
}
</code></pre>

<p>And here is my Fragment:</p>

<pre><code>public class FirstFragment extends Fragment implements FirstContract.View {
    private FirstContract.Presenter mPresenter;

@Nullable
    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container
            , Bundle savedInstanceState) {
...
// I register firstFragment's presenter here.
mPresenter = new FirstPresenter(this);
...
</code></pre>

<p>So my question is, is this right way? Can i register Presenter into Fragment instead in Activity? And if it is not right way, is there some good example to handle MVP with one activity and multiple fragments?</p>

<p>Thank you guys,
BR!</p>
",2922851,,2922851,,2017-03-15 20:38:22,2018-09-11 11:54:13,Can i register MVP Presenter inside Fragment,<android><android-fragments><android-activity><mvp><android-mvp>,1,1,5,,
Android,42583759,1,42868218,980,3/17/2017 22:44:44,14,,3/3/2017 16:20:15,,17,7806,"<p>DataBinding worked very well in my project,  But after upgrade Android Studio 2.3 today . <strong>Run 'app'</strong> failed because following error : </p>

<pre><code>Error:(15, 40) Error: package com.javan.myrecorder.databinding not exist.
import com.javan.myrecorder.databinding.FragmentEventsBinding;
:app:compileMockDebugJavaWithJavac FAILED
</code></pre>

<p>I just upgrade android studio and didn't change anything. all plugin is latest! Now my question is, why occurs this error and how could I solve it? any help is welcome!</p>

<p>English is not my mother tongue; please excuse any errors on my part.</p>

<hr>

<p>EDIT1</p>

<p>Like android project <a href=""https://github.com/googlesamples/android-architecture"" rel=""nofollow noreferrer"">googlesamples/android-architecture</a></p>

<ul>
<li><code>git checkout todo-databinding</code> </li>
<li>and then run <code>./gradlew assembleDebug</code> to build, build failed because of following error:</li>
</ul>

<p><a href=""https://i.stack.imgur.com/cwMyA.png"" rel=""nofollow noreferrer"">complete log of build</a></p>

<hr>

<p>EDIT2 <strong>I have fixed this problem by following <a href=""https://stackoverflow.com/questions/42570707/data-binding-broke-after-upgrade-to-gradle-2-3/42590471#42590471"">Data Binding broke after upgrade to Gradle 2.3</a></strong>.</p>

<p>in <code>build.gradle(app)</code> add </p>

<pre><code>apply plugin: 'com.android.application'
apply plugin: 'com.neenbedankt.android-apt'

..balabala

dependencies {
    apt 'com.android.databinding:compiler:2.3.0'
}
</code></pre>

<p>some file in my project:</p>

<p><code>gradle-wrapper.properties</code></p>

<pre><code>#Mon Mar 06 10:59:04 CST 2017
distributionBase=GRADLE_USER_HOME
distributionPath=wrapper/dists
zipStoreBase=GRADLE_USER_HOME
zipStorePath=wrapper/dists
distributionUrl=https\://services.gradle.org/distributions/gradle-3.3-all.zip
</code></pre>

<p>@petrnohejl @George Mount @Sa-Zad Prasla, Thanks!</p>
",7638509,,-1,,2017-05-23 10:31:31,2018-03-16 17:03:30,DataBinding not working after Upgrade Android Studio 2.3,<android><android-studio><data-binding><android-databinding><android-studio-2.3>,7,5,5,,
Android,39454127,1,42908291,981,3/20/2017 15:57:52,189,,9/12/2016 15:43:25,,1,1502,"<p>Our app contains a <code>MediaBrowserService</code> and uses a whitelist to restrict who can can query the service. It is typically used to permit Android Auto and Android Wear to query our app for audio content.  As far as I know, this is still a recommended approach.  For example, as shown in this Google sample app: <a href=""https://github.com/googlesamples/android-MediaBrowserService/blob/master/Application/src/main/res/xml/allowed_media_browser_callers.xml"" rel=""nofollow"">MediaBrowserService sample app</a></p>

<p>Our app reports the package names that try to query our <code>MediaBrowserService</code> but are NOT on the whitelist.   We fairly regularly receive reports that ""com.android.bluetooth"" tried to call our service and was denied.</p>

<p>I'm perplexed by these reports. We've never seen such calls from this package on our own test devices. My previous attempts to ask the user if they have a Bluetooth device that might be displaying audio information has been met with confusion...so it seems perhaps Android itself is making these calls?  </p>

<p>Has anyone else encountered this? This whitelist approach requires validating specific signing certificates.  Does com.android.bluetooth have a consistent signing certificate that can be used to add this package to the whitelist?</p>

<p><strong>UPDATE 1:</strong></p>

<p>Looking at the reports we have received from users, this appears to be exclusively a Samsung Android 6.0.1 phenomenon. The first report of it showed up on 3/13/2016 and there has been a steady trickle all summer. </p>

<p>Here's a partial list of the models that have reported this issue. All of them have had Android 6.0.1.  Could this be related to their Tizen-based Galaxy Gear watches?</p>

<ul>
<li>Galaxy Note 4 (SM-N910R4)  </li>
<li>Galaxy Note 4 (SAMSUNG-SM-N910A)  </li>
<li>Galaxy Note 5 (SM-N920V)</li>
<li>Galaxy S5 (SM-G900V)  </li>
<li>Galaxy S5 Active (SAMSUNG-SM-G870A)  </li>
<li>Galaxy S6 (SM-G920R7)  </li>
<li>Galaxy S6 (SAMSUNG-SM-G890A)</li>
<li>Galaxy S7 Edge (SM-G935V)</li>
<li>Galaxy S7 Edge (SAMSUNG-SM-G935A)</li>
<li>Galaxy J7    (SM-J700T1)</li>
</ul>

<p><strong>UPDATE 2:</strong></p>

<p>I have finally reproduced the situation on a Galaxy S6 Edge with 6.0.1.  Bluetooth on the device simply has to be turned on.  If turned on, with nothing even paired or connected, when I start playing audio in our app ""com.android.bluetooth"" (UID 1002) calls <code>onGetRoot</code> and <code>onLoadChildren</code> on our <code>MediaBrowserService</code>.  WHY!?  If I allow it, nothing visible changes on the device.  I thought I might see some Samsung widget presenting the media info from our app...but I don't.</p>
",262119,,262119,,2016-09-13 19:51:01,2017-03-20 16:03:34,"Why is package ""com.android.bluetooth"" querying our MediaBrowserService on Samsung devices?",<android><wear-os><samsung-mobile><android-auto>,2,3,1,,
Android,42901334,1,42912408,982,3/20/2017 19:31:12,0,,3/20/2017 10:34:21,,4,6003,"<p>I want to develop an Android Camera App for myself (can share it if there are interested people) that has a manual focus while video recording.</p>

<p>I've added a SeekBar to the google sample <a href=""https://github.com/googlesamples/android-Camera2Video"" rel=""nofollow noreferrer"">Camera2 app</a> but I can't find the way to implement the manual focus.</p>

<p>I found <a href=""https://stackoverflow.com/questions/28170491/manual-focus-in-camera2-android"">Manual focus in camera2, android</a> but it doesn't work on my LG G4.
The stock camera app is almost perfect since it doesn't allow the manual focus in video mode.</p>

<p>Does anyone of you have an idea ?</p>

<p>EDIT: here's the code of the SeekBar listener:</p>

<pre><code>@Override
public void onStopTrackingTouch(SeekBar seekBar) {}

@Override
public void onStartTrackingTouch(SeekBar seekBar) {
    mPreviewBuilder.set(CaptureRequest.CONTROL_AF_MODE, CameraMetadata.CONTROL_AF_MODE_OFF);
}

@Override
public void onProgressChanged(SeekBar seekBar, int progress, boolean fromUser) {
    float minimumLens = characteristics.get(CameraCharacteristics.LENS_INFO_MINIMUM_FOCUS_DISTANCE);
    float num = (((float)progress) * minimumLens / 100);
    mPreviewBuilder.set(CaptureRequest.LENS_FOCUS_DISTANCE, num);
}
</code></pre>
",7230462,,7230462,,2017-03-21 14:26:06,2017-08-08 15:35:36,Manual Focus using android camera2 API,<android><api><focus><android-camera2><lg>,2,0,2,,
Android,43052236,1,43080639,983,3/28/2017 21:55:02,1,,3/27/2017 16:54:17,,1,212,"<p>I need to show camera preview in live wallpaper. 
I've already made for android &lt; M versions. But can't understand how it working with new API. Oldest Camera is deprecated now </p>

<p>In google example they put it in xml and in TextureView but how I can change that for my needs, I can't understand.</p>

<p>Anyway Thanks! </p>

<p>Google example
<a href=""https://github.com/googlesamples/android-Camera2Basic"" rel=""nofollow noreferrer"">https://github.com/googlesamples/android-Camera2Basic</a></p>

<p>Below my code.</p>

<p>Start wallpaper</p>

<pre><code>Intent intent = new Intent(WallpaperManager.ACTION_CHANGE_LIVE_WALLPAPER);
intent.putExtra(WallpaperManager.EXTRA_LIVE_WALLPAPER_COMPONENT, new ComponentName(this, TransparentWallpaperService.class));
startActivity(intent);
</code></pre>

<p>TransparentWallpaperService</p>

<pre><code>public class TransparentWallpaperService extends WallpaperService {

@Override
public Engine onCreateEngine() {
    return new GlowEngine();
}

private class GlowEngine extends Engine {

    private final Handler handler = new Handler();

    private final Runnable viewRunner = new Runnable() {

        @Override
        public void run() {

            drawView();

        }

    };

    private boolean visible = true;
    private CameraView view;

    public GlowEngine() {
        super();
        view = new CameraView(getBaseContext(), getSurfaceHolder());
        handler.post(viewRunner);
    }

    @Override
    public void onVisibilityChanged(boolean visible) {
        this.visible = visible;
        if (visible) {
            handler.post(viewRunner);
        }
        else {
            handler.removeCallbacks(viewRunner);
        }
    }

    @Override
    public void onSurfaceDestroyed(SurfaceHolder holder) {
        super.onSurfaceDestroyed(holder);
        this.visible = false;
        handler.removeCallbacks(viewRunner);
    }

    private void drawView() {
        view.surfaceChanged(getSurfaceHolder(), OPAQUE, view.getWidth(), view.getHeight());
        handler.removeCallbacks(viewRunner);
        if (visible) {
            handler.postDelayed(viewRunner, 4000);
        }
    }
}
}
</code></pre>

<p>CameraView class</p>

<pre><code>public class CameraView extends SurfaceView implements SurfaceHolder.Callback {

private SurfaceHolder holder;

private Camera camera;

public CameraView(Context context) {

    super(context);

    camera = getCameraInstance();

}

public CameraView(Context context, SurfaceHolder holder) {

    this(context);
    this.holder = holder;

    holder.addCallback(this);
    if (Build.VERSION.SDK_INT &lt;= Build.VERSION_CODES.GINGERBREAD_MR1) {
        holder.setType(SurfaceHolder.SURFACE_TYPE_PUSH_BUFFERS);
    }

}

@Override
public void surfaceCreated(SurfaceHolder surfaceHolder) {

    if(camera == null) {
        camera = getCameraInstance();
    }

    if(camera != null) {
        // The Surface has been created, now tell the camera where to draw the preview.
        try {
            camera.setPreviewDisplay(surfaceHolder);
            camera.startPreview();
        }
        catch (IOException e) {
            Log.e(""CameraView"", ""Error setting camera preview: "" + e.getMessage());
        }
    }

}

@Override
public void surfaceChanged(SurfaceHolder surfaceHolder, int format, int width, int height) {

    boolean portrait = true;

    if (width &gt; 0 &amp;&amp; height &gt;0 &amp;&amp; width &lt; height){
        portrait =true;
    } else if (width &gt; 0 &amp;&amp; height &gt;0 &amp;&amp; width &gt; height){
        portrait = false;
    }

    Camera.Parameters parameters;
    if (camera == null) {
        camera = getCameraInstance();
    }
    if (camera != null){
        parameters = camera.getParameters();
        Camera.Size size = parameters.getPictureSize();
        size = parameters.getPreviewSize();
        parameters.setPreviewSize(size.width, size.height);
        if (portrait) {
            camera.setDisplayOrientation(90);
        } else {
            camera.setDisplayOrientation(180);
        }
        try {
            camera.setParameters(parameters);
            camera.setPreviewDisplay(holder);
            camera.startPreview();
        } catch (IOException e) {
            e.printStackTrace();
        }
    }
}

@Override
public void surfaceDestroyed(SurfaceHolder surfaceHolder) {
    if(camera != null) {
        try {
            camera.stopPreview();
            camera.release();
        }
        catch (Exception e) {
            Log.e(""CameraView"", ""Error stopping camera preview: "" + e.getMessage());
        }
    }

}

private Camera getCameraInstance() {

    Context context = getContext();
    Camera camera = null;
    if (context.getPackageManager().hasSystemFeature(PackageManager.FEATURE_CAMERA)) {
        try {
            camera = Camera.open();
        }
        catch (Exception e) {
            Log.e(""CameraView"", ""Error getting camera instance: "" + e.getMessage());
        }
    }
    else {
        Log.i(""CameraView"", ""No camera found!"");
    }
    return camera;
}
}
</code></pre>
",5339746,,,,,2017-03-28 21:55:02,Show camera2 preview in wallpaperservice,<java><android><android-studio><camera><camera2>,1,0,,,
Android,43134675,1,43134808,984,3/31/2017 7:21:16,0,,3/31/2017 7:14:31,,1,527,"<p>I'm trying to follow the same example as in <a href=""https://github.com/googlesamples/android-architecture/tree/todo-mvp-dagger"" rel=""nofollow noreferrer"">here</a> by creating a Repository pattern with DI.
The problem is that I get the following error:</p>

<blockquote>
  <p>""Error:(16, 20) error: @mvp.model.di.scope.Local
  mvp.model.repository.local.GameLocalDataSource cannot be provided
  without an @Provides-annotated method. @mvp.model.di.scope.Local
  mvp.model.repository.local.GameLocalDataSource is injected at
  mvp.model.repository.GameRepository.(gameLocalDataSource, â€¦)
  mvp.model.repository.GameRepository is provided at
  mvp.model.di.component.RepositoryComponent.getGameRepository()""</p>
</blockquote>

<p>Here's the code related to the app:</p>

<pre><code>public class GameApplication extends Application {
private RepositoryComponent repositoryComponent;

@Override
public void onCreate() {
    super.onCreate();
    if (LeakCanary.isInAnalyzerProcess(this)) {
        // This process is dedicated to LeakCanary for heap analysis.
        // You should not init your app in this process.
        return;
    }
    LeakCanary.install(this);
    // Normal app init code...
    repositoryComponent = DaggerRepositoryComponent.builder()
            .applicationModule(new ApplicationModule((getApplicationContext())))
            .build();
}

public RepositoryComponent getRepositoryComponent() {
    return repositoryComponent;
}
}
</code></pre>

<p>This is my <code>RepositoryComponent</code>:</p>

<pre><code>@Singleton
@Component(modules = {RepositoryModule.class, ApplicationModule.class})
public interface RepositoryComponent {
    GameRepository getGameRepository();
}
</code></pre>

<p>Here's the <code>RepositoryModule</code>:</p>

<pre><code>    @Module
public class RepositoryModule {
    @Singleton
    @Provides
    @Local
    GameDataSource provideLocalDataSource(Context context) {
        return new GameLocalDataSource(context);
    }

    @Singleton
    @Provides
    @Remote
    GameDataSource provideRemoteDataSource() {
        return new GameRemoteDataSource();
    }
}
</code></pre>

<p>And finally, the <code>ApplicationModule</code>:</p>

<pre><code>    @Module
public final class ApplicationModule {
    private Context context;

    public ApplicationModule(Context context) {
        this.context = context;
    }

    @Provides
    Context providesContext() {
        return context;
    }
}
</code></pre>

<p>Here's most of my <code>GameRepository</code> class:</p>

<pre><code>@Singleton
public class GameRepository implements GameDataSource {
    private GameDataSource remoteDataSource;
    private GameDataSource localDataSource;

    @Inject
    public GameRepository(@Local GameLocalDataSource gameLocalDataSource, @Remote GameRemoteDataSource gameRemoteDataSource) {
        remoteDataSource = gameRemoteDataSource;
        localDataSource = gameLocalDataSource;
    }
</code></pre>

<p>Also, as in the mentioned example, I created a couple of scopes, <code>@Local</code> and <code>@Remote</code> since my two data sources have the same type and Dagger needs to differentiate them.</p>

<pre><code>@Qualifier
@Documented
@Retention(RetentionPolicy.RUNTIME)
public @interface Local {

}
</code></pre>

<p>The rest of the code I have related to dagger, is just the <code>@Inject</code> in the constructors where I want to inject my dependencies.
Also, the <code>DaggerRepositoryComponent</code> is never generated in the <code>GameApplication</code> class.</p>

<p>Thanks a lot for the help in advance!</p>
",257948,,1083957,,2017-10-24 1:08:47,2017-10-24 1:08:47,Dagger 2 LocalDataSource cannot be provided without @Provides annotated method,<java><android><dependency-injection><dagger-2><dagger>,1,1,,,
Android,43098757,1,43180267,985,4/3/2017 8:51:53,5,,3/29/2017 16:07:27,,3,977,"<p>I am trying to get location update in background with the batched version of Fused Location Provider Api. </p>

<p>I am doing this by following Google guidelines by requesting a location updates with a callback on a broadcast <a href=""https://developers.google.com/android/reference/com/google/android/gms/location/FusedLocationProviderApi.html#requestLocationUpdates(com.google.android.gms.common.api.GoogleApiClient,%20com.google.android.gms.location.LocationRequest,%20android.app.PendingIntent)"" rel=""nofollow noreferrer"">PendingIntent</a>.</p>

<p>For the location request I used <a href=""https://developers.google.com/android/reference/com/google/android/gms/location/LocationRequest.html#setMaxWaitTime(long)"" rel=""nofollow noreferrer"">setMaxWaitTime</a> to get the location update results in batched as specific by Google API documentation.</p>

<p>My problem is that my broadcast receiver didnâ€™t get the location in batch and still get one location at a time from location service.</p>

<p>I also tried a new <a href=""https://github.com/googlesamples/android-play-location/tree/master/LocationUpdatesPendingIntent"" rel=""nofollow noreferrer"">PendingIntent location update sample project</a> from google but the location update still return only one location at a time.</p>

<p>For information I tested on a Nexus 5X device as it has a <a href=""https://source.android.com/devices/sensors/batching.html"" rel=""nofollow noreferrer"">batching sensor hardware</a>.</p>

<p>Am I missing something ?</p>

<p>Here is an example of the code :</p>

<p>Build and connected Google Api Client</p>

<pre><code>private static final long UPDATE_INTERVAL = 60000; // Every 60 seconds.
private static final long FASTEST_UPDATE_INTERVAL = 30000; // Every 30 seconds
private static final long MAX_WAIT_TIME = 60000 * 5; // Batch every 5 minutes.

public void buildGoogleApiClient() {
    mGoogleApiClient = new GoogleApiClient.Builder(context)
            .addConnectionCallbacks(this)
            .addOnConnectionFailedListener(this)
            .addApi(LocationServices.API)
            .build();

    mLocationRequest = new LocationRequest();
    mLocationRequest.setInterval(UPDATE_INTERVAL);
    mLocationRequest.setFastestInterval(FASTEST_UPDATE_INTERVAL);
    mLocationRequest.setPriority(LocationRequest.PRIORITY_BALANCED_POWER_ACCURACY);
    mLocationRequest.setMaxWaitTime(MAX_WAIT_TIME);

    mGoogleApiClient.connect();
}

@Override
public void onConnected(Bundle connectionHint) {
    try {
        // Create a pending intent to listening on location service when the update become available
        Intent mIntent = new Intent(context, LocationReceiver.class);
        mPendingIntent = PendingIntent.getBroadcast(context, 42, mIntent, PendingIntent.FLAG_CANCEL_CURRENT);
        // Permission check before launching location services
        if (ContextCompat.checkSelfPermission(context,
                Manifest.permission.ACCESS_FINE_LOCATION) != PackageManager.PERMISSION_GRANTED) {
            return;
        }
        LocationServices.FusedLocationApi.requestLocationUpdates(mGoogleApiClient, mLocationRequest, mPendingIntent);
    } catch (Exception e) {
        e.printStackTrace();
    }
}
</code></pre>

<p>BroadcastReceiver class</p>

<pre><code>public class LocationReceiver extends BroadcastReceiver {

@Override
public void onReceive(final Context context, Intent intent) {
    try {

        // Check if intent has location result
        if (LocationResult.hasResult(intent)) {
            // Get our location from the LocationResult
            LocationResult locationResult = LocationResult.extractResult(intent);
            if (locationResult != null) {

                List&lt;Location&gt; locations = locationResult.getLocations();

                for (Location location : locations) {
                    SimpleDateFormat formatter = new SimpleDateFormat(""dd/MM/yyyy HH:mm:ss"", Locale.FRANCE);
                    String dateString = formatter.format(new java.util.Date(location.getTime()));

                    Log.d(TAG, ""LOCATION: lat:"" + location.getLatitude() + "" long:"" + location.getLongitude() +
                            "" radius:"" + location.getAccuracy() + "" date:"" + dateString);
                }

            } else {
                Log.d(TAG, ""Location is null"");
            }
        }
    } catch (Exception e) {
        e.printStackTrace();
    }
}
</code></pre>

<p>}</p>

<p>Thanks for any help.</p>
",3041015,,3041015,,2017-03-30 11:43:33,2017-04-03 8:51:53,Android how to get location update in batch,<android><geolocation><location><google-play-services><fusedlocationproviderapi>,1,0,2,,
Android,43362896,1,43397458,986,4/13/2017 16:33:32,1,,4/12/2017 7:20:13,,1,423,"<p>I'm quite new to Android Things and Bluetooth LE Gatt. I have tried the <a href=""https://github.com/androidthings/sample-bluetooth-le-gattserver"" rel=""nofollow noreferrer"">Bluetooth LE GATT server sample</a> provided by Google. I run the Bluetooth LE GATT server sample on Raspberry Pi 3 and the <a href=""https://github.com/googlesamples/android-BluetoothLeGatt"" rel=""nofollow noreferrer"">Android BluetoothLeGatt client sample</a> on my phone. I have edit some codes in SampleGattAttributes.java and 
BluetoothLeService.java. </p>

<p>SampleGattAttributes.java</p>

<pre><code>public class SampleGattAttributes {
    private static HashMap&lt;String, String&gt; attributes = new HashMap();
    public static String CURRENT_TIME = ""00002a2b-0000-1000-8000-00805f9b34fb"";
    public static String CLIENT_CONFIG = ""00002902-0000-1000-8000-00805f9b34fb"";

    static {
        // Sample Services.
        attributes.put(""00001805-0000-1000-8000-00805f9b34fb"", ""TIME SERVICE"");

        // Sample Characteristics.
        attributes.put(CURRENT_TIME, ""CURRENT TIME"");}
</code></pre>

<p>BluetoothLeService.java</p>

<pre><code>/*
 * Copyright (C) 2013 The Android Open Source Project
 *
 * Licensed under the Apache License, Version 2.0 (the ""License"");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *      http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an ""AS IS"" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */

package com.example.android.bluetoothlegatt;

import android.app.Service;
import android.bluetooth.BluetoothAdapter;
import android.bluetooth.BluetoothDevice;
import android.bluetooth.BluetoothGatt;
import android.bluetooth.BluetoothGattCallback;
import android.bluetooth.BluetoothGattCharacteristic;
import android.bluetooth.BluetoothGattDescriptor;
import android.bluetooth.BluetoothGattService;
import android.bluetooth.BluetoothManager;
import android.bluetooth.BluetoothProfile;
import android.content.Context;
import android.content.Intent;
import android.os.Binder;
import android.os.IBinder;
import android.util.Log;

import java.util.List;
import java.util.UUID;

/**
 * Service for managing connection and data communication with a GATT server hosted on a
 * given Bluetooth LE device.
 */
public class BluetoothLeService extends Service {
    private final static String TAG = BluetoothLeService.class.getSimpleName();

    private BluetoothManager mBluetoothManager;
    private BluetoothAdapter mBluetoothAdapter;
    private String mBluetoothDeviceAddress;
    private BluetoothGatt mBluetoothGatt;
    private int mConnectionState = STATE_DISCONNECTED;

    private static final int STATE_DISCONNECTED = 0;
    private static final int STATE_CONNECTING = 1;
    private static final int STATE_CONNECTED = 2;

    public final static String ACTION_GATT_CONNECTED = ""com.example.bluetooth.le.ACTION_GATT_CONNECTED"";
    public final static String ACTION_GATT_DISCONNECTED = ""com.example.bluetooth.le.ACTION_GATT_DISCONNECTED"";
    public final static String ACTION_GATT_SERVICES_DISCOVERED = ""com.example.bluetooth.le.ACTION_GATT_SERVICES_DISCOVERED"";
    public final static String ACTION_DATA_AVAILABLE = ""com.example.bluetooth.le.ACTION_DATA_AVAILABLE"";
    public final static String EXTRA_DATA = ""com.example.bluetooth.le.EXTRA_DATA"";

    public final static UUID UUID_CURRENT_TIME = UUID.fromString(SampleGattAttributes.CURRENT_TIME);

    // Implements callback methods for GATT events that the app cares about.  For example,
    // connection change and services discovered.
    private final BluetoothGattCallback mGattCallback = new BluetoothGattCallback() {
        @Override
        public void onConnectionStateChange(BluetoothGatt gatt, int status, int newState) {
            String intentAction;
            if (newState == BluetoothProfile.STATE_CONNECTED) {
                intentAction = ACTION_GATT_CONNECTED;
                mConnectionState = STATE_CONNECTED;
                broadcastUpdate(intentAction);
                Log.i(TAG, ""Connected to GATT server."");
                // Attempts to discover services after successful connection.
                Log.i(TAG, ""Attempting to start service discovery:"" +
                        mBluetoothGatt.discoverServices());

            } else if (newState == BluetoothProfile.STATE_DISCONNECTED) {
                intentAction = ACTION_GATT_DISCONNECTED;
                mConnectionState = STATE_DISCONNECTED;
                Log.i(TAG, ""Disconnected from GATT server."");
                broadcastUpdate(intentAction);
            }
        }

        @Override
        public void onServicesDiscovered(BluetoothGatt gatt, int status) {
            if (status == BluetoothGatt.GATT_SUCCESS) {
                broadcastUpdate(ACTION_GATT_SERVICES_DISCOVERED);
            } else {
                Log.w(TAG, ""onServicesDiscovered received: "" + status);
            }
        }

        @Override
        public void onCharacteristicRead(BluetoothGatt gatt, BluetoothGattCharacteristic characteristic, int status) {
            if (status == BluetoothGatt.GATT_SUCCESS) {
                broadcastUpdate(ACTION_DATA_AVAILABLE, characteristic);
            }
        }

        @Override
        public void onCharacteristicChanged(BluetoothGatt gatt, BluetoothGattCharacteristic characteristic) {
            broadcastUpdate(ACTION_DATA_AVAILABLE, characteristic);
        }
    };

    private void broadcastUpdate(final String action) {
        final Intent intent = new Intent(action);
        sendBroadcast(intent);
    }

    private void broadcastUpdate(final String action, final BluetoothGattCharacteristic characteristic) {
        final Intent intent = new Intent(action);

        // This is special handling for the Heart Rate Measurement profile.  Data parsing is
        // carried out as per profile specifications:
        // http://developer.bluetooth.org/gatt/characteristics/Pages/CharacteristicViewer.aspx?u=org.bluetooth.characteristic.heart_rate_measurement.xml
        if (UUID_CURRENT_TIME.equals(characteristic.getUuid())) {
            int flag = characteristic.getProperties();
            int format = -1;
            if ((flag &amp; 0x01) != 0) {
                format = BluetoothGattCharacteristic.FORMAT_UINT16;
                Log.d(TAG, ""Heart rate format UINT16."");
            } else {
                format = BluetoothGattCharacteristic.FORMAT_UINT8;
                Log.d(TAG, ""Heart rate format UINT8."");
            }
            final int heartRate = characteristic.getIntValue(format, 1);
            Log.d(TAG, String.format(""Received heart rate: %d"", heartRate));
            intent.putExtra(EXTRA_DATA, String.valueOf(heartRate));
        } else {
            // For all other profiles, writes the data formatted in HEX.
            final byte[] data = characteristic.getValue();
            if (data != null &amp;&amp; data.length &gt; 0) {
                final StringBuilder stringBuilder = new StringBuilder(data.length);
                for(byte byteChar : data)
                    stringBuilder.append(String.format(""%02X "", byteChar));
                intent.putExtra(EXTRA_DATA, new String(data) + ""\n"" + stringBuilder.toString());
            }
        }
        sendBroadcast(intent);
    }

    public class LocalBinder extends Binder {
        BluetoothLeService getService() {
            return BluetoothLeService.this;
        }
    }

    @Override
    public IBinder onBind(Intent intent) {
        return mBinder;
    }

    @Override
    public boolean onUnbind(Intent intent) {
        // After using a given device, you should make sure that BluetoothGatt.close() is called
        // such that resources are cleaned up properly.  In this particular example, close() is
        // invoked when the UI is disconnected from the Service.
        close();
        return super.onUnbind(intent);
    }

    private final IBinder mBinder = new LocalBinder();

    /**
     * Initializes a reference to the local Bluetooth adapter.
     *
     * @return Return true if the initialization is successful.
     */
    public boolean initialize() {
        // For API level 18 and above, get a reference to BluetoothAdapter through
        // BluetoothManager.
        if (mBluetoothManager == null) {
            mBluetoothManager = (BluetoothManager) getSystemService(Context.BLUETOOTH_SERVICE);
            if (mBluetoothManager == null) {
                Log.e(TAG, ""Unable to initialize BluetoothManager."");
                return false;
            }
        }

        mBluetoothAdapter = mBluetoothManager.getAdapter();
        if (mBluetoothAdapter == null) {
            Log.e(TAG, ""Unable to obtain a BluetoothAdapter."");
            return false;
        }

        return true;
    }

    /**
     * Connects to the GATT server hosted on the Bluetooth LE device.
     *
     * @param address The device address of the destination device.
     *
     * @return Return true if the connection is initiated successfully. The connection result
     *         is reported asynchronously through the
     *         {@code BluetoothGattCallback#onConnectionStateChange(android.bluetooth.BluetoothGatt, int, int)}
     *         callback.
     */
    public boolean connect(final String address) {
        if (mBluetoothAdapter == null || address == null) {
            Log.w(TAG, ""BluetoothAdapter not initialized or unspecified address."");
            return false;
        }

        // Previously connected device.  Try to reconnect.
        if (mBluetoothDeviceAddress != null &amp;&amp; address.equals(mBluetoothDeviceAddress) &amp;&amp; mBluetoothGatt != null) {
            Log.d(TAG, ""Trying to use an existing mBluetoothGatt for connection."");
            if (mBluetoothGatt.connect()) {
                mConnectionState = STATE_CONNECTING;
                return true;
            } else {
                return false;
            }
        }

        final BluetoothDevice device = mBluetoothAdapter.getRemoteDevice(address);
        if (device == null) {
            Log.w(TAG, ""Device not found.  Unable to connect."");
            return false;
        }

        // We want to directly connect to the device, so we are setting the autoConnect parameter to false.
        mBluetoothGatt = device.connectGatt(this, false, mGattCallback);
        Log.d(TAG, ""Trying to create a new connection."");
        mBluetoothDeviceAddress = address;
        mConnectionState = STATE_CONNECTING;
        return true;
    }

    /**
     * Disconnects an existing connection or cancel a pending connection. The disconnection result
     * is reported asynchronously through the
     * {@code BluetoothGattCallback#onConnectionStateChange(android.bluetooth.BluetoothGatt, int, int)}
     * callback.
     */
    public void disconnect() {
        if (mBluetoothAdapter == null || mBluetoothGatt == null) {
            Log.w(TAG, ""BluetoothAdapter not initialized"");
            return;
        }
        mBluetoothGatt.disconnect();
    }

    /**
     * After using a given BLE device, the app must call this method to ensure resources are
     * released properly.
     */
    public void close() {
        if (mBluetoothGatt == null) {
            return;
        }
        mBluetoothGatt.close();
        mBluetoothGatt = null;
    }

    /**
     * Request a read on a given {@code BluetoothGattCharacteristic}. The read result is reported
     * asynchronously through the {@code BluetoothGattCallback#onCharacteristicRead(android.bluetooth.BluetoothGatt, android.bluetooth.BluetoothGattCharacteristic, int)}
     * callback.
     *
     * @param characteristic The characteristic to read from.
     */
    public void readCharacteristic(BluetoothGattCharacteristic characteristic) {
        if (mBluetoothAdapter == null || mBluetoothGatt == null) {
            Log.w(TAG, ""BluetoothAdapter not initialized"");
            return;
        }
        mBluetoothGatt.readCharacteristic(characteristic);
    }

    /**
     * Enables or disables notification on a give characteristic.
     *
     * @param characteristic Characteristic to act on.
     * @param enabled If true, enable notification.  False otherwise.
     */
    public void setCharacteristicNotification(BluetoothGattCharacteristic characteristic,
                                              boolean enabled) {
        if (mBluetoothAdapter == null || mBluetoothGatt == null) {
            Log.w(TAG, ""BluetoothAdapter not initialized"");
            return;
        }
        mBluetoothGatt.setCharacteristicNotification(characteristic, enabled);

        // This is specific to Heart Rate Measurement.
        if (UUID_CURRENT_TIME.equals(characteristic.getUuid())) {
            BluetoothGattDescriptor descriptor = characteristic.getDescriptor(UUID.fromString(SampleGattAttributes.CLIENT_CONFIG));
            descriptor.setValue(BluetoothGattDescriptor.ENABLE_NOTIFICATION_VALUE);
            mBluetoothGatt.writeDescriptor(descriptor);
        }
    }

    /**
     * Retrieves a list of supported GATT services on the connected device. This should be
     * invoked only after {@code BluetoothGatt#discoverServices()} completes successfully.
     *
     * @return A {@code List} of supported services.
     */
    public List&lt;BluetoothGattService&gt; getSupportedGattServices() {
        if (mBluetoothGatt == null) return null;

        return mBluetoothGatt.getServices();
    }
}
</code></pre>

<p>When I click the Current Time, it shows 7 at data field. May I know where the number 7 comes from and why there is no notification when I change the time. </p>
",5551028,,656408,,2017-04-13 0:42:03,2017-04-13 16:33:32,Bluetooth LE GATT issue,<android><bluetooth><android-things>,1,5,,,
Android,43371389,1,43460146,987,4/17/2017 21:46:31,5,,4/12/2017 13:45:51,,1,439,"<p>According to <a href=""https://developer.android.com/google/play/billing/billing_reference.html"" rel=""nofollow noreferrer"" title=""documentation"">in-app billing reference</a> and <a href=""https://github.com/googlesamples/android-play-billing/blob/master/TrivialDrive/app/src/main/aidl/com/android/vending/billing/IInAppBillingService.aidl"" rel=""nofollow noreferrer"">the next aidl definition</a>, there is method <code>getPurchaseHistory()</code>. The code is as simple as:</p>

<pre><code>Bundle purchaseHistoryBundle = service.getPurchaseHistory(6, BuildConfig.APPLICATION_ID, ""subs"", null, new Bundle());
</code></pre>

<p>Response I get is <code>6 (BILLING_RESPONSE_RESULT_ERROR)</code>. That means ""Fatal error during the API action""</p>

<p>What's wrong with the code? And if it is a bug in the service, where is the right place to report it?</p>
",1732338,,,,,2017-04-21 19:40:35,Android In-app billing getPurchaseHistory() doesn't work,<android><google-play-services><in-app-billing>,1,4,1,,
Android,41627671,1,43554730,988,4/22/2017 2:56:34,99,,1/13/2017 5:00:37,,2,701,"<p>I am using <a href=""https://github.com/googlesamples/android-Camera2Basic"" rel=""nofollow noreferrer"">camera2Basic example</a> and I fixed exposure time, iso, white balance and etc. </p>

<pre><code>mPreviewBuilder.set(CaptureRequest.CONTROL_AF_MODE,CaptureRequest.CONTROL_AF_MODE_CONTINUOUS_PICTURE);

//mPreviewBuilder.set(CaptureRequest.LENS_FOCUS_DISTANCE, DEFAULT_FOCUS_DISTANCE);

mPreviewBuilder.set(CaptureRequest.CONTROL_AE_MODE, CameraMetadata.CONTROL_AE_MODE_OFF);

mPreviewBuilder.set(CaptureRequest.NOISE_REDUCTION_MODE, CameraMetadata.NOISE_REDUCTION_MODE_FAST);
mPreviewBuilder.set(CaptureRequest.EDGE_MODE, CameraMetadata.EDGE_MODE_FAST);
mPreviewBuilder.set(CaptureRequest.CONTROL_AE_PRECAPTURE_TRIGGER, CaptureRequest.CONTROL_AE_PRECAPTURE_TRIGGER_CANCEL);

mPreviewBuilder.set(CaptureRequest.CONTROL_AWB_MODE, wbMode);
mPreviewBuilder.set(CaptureRequest.CONTROL_AWB_LOCK, wbLock);

mPreviewBuilder.set(CaptureRequest.SENSOR_SENSITIVITY, isoValue);
mPreviewBuilder.set(CaptureRequest.SENSOR_EXPOSURE_TIME, exposureValue);
</code></pre>

<p>I am taking several <code>photos</code> by rotating my phone for stitching.
While taking photos the <code>preview looks</code> fine, but captured results are totally different in terms of brightness</p>

<p>When I checked the images exif data, they have same exposure time and iso (not on Nexus)</p>

<p>I don't know what I am missing.
Any suggestion why it is happening? Thank you</p>
",5344661,,5344661,,2017-01-13 5:45:50,2017-04-22 2:56:34,Camera2 api preview is not same with capture,<android><android-camera2>,1,2,,,
Android,43258773,1,43646354,989,4/26/2017 23:47:14,20,,4/6/2017 14:57:20,,35,2613,"<p><a href=""https://msdn.microsoft.com/en-us/library/ff649690.aspx"" rel=""noreferrer"">Repository Pattern</a> is defined by <a href=""https://martinfowler.com/eaaCatalog/repository.html"" rel=""noreferrer"">Hieatt and Rob Mee</a> as design pattern that <em>mediates between the domain and data mapping layers using a collection-like interface for accessing domain objects</em>.</p>

<p><a href=""https://i.stack.imgur.com/CMJFn.png"" rel=""noreferrer""><img src=""https://i.stack.imgur.com/CMJFn.png"" alt=""MSDN Repository Pattern""></a></p>

<p>Basically it abstracts one or more I/O devices (cloud, disk, data base, etc) into a common collection-like interface where you can <a href=""http://blog.cleancoder.com/uncle-bob/2016/01/04/ALittleArchitecture.html"" rel=""noreferrer""><em>read, write, seek and delete data</em></a>.</p>

<p>On <a href=""https://fernandocejas.com/2014/09/03/architecting-android-the-clean-way/"" rel=""noreferrer"">Fernando Cejas's Android Clean Architecture</a>, all data needed for the application comes from this layer through a repository implementation (the interface is in the domain layer) that uses a Repository Pattern with a strategy that, through a factory, picks different data sources depending on certain conditions.</p>

<p><a href=""https://fernandocejas.com/assets/migrated/clean_architecture_data.png"" rel=""noreferrer""><img src=""https://fernandocejas.com/assets/migrated/clean_architecture_data.png"" alt=""Content Provider""></a></p>

<p>However, as pointed out by professor <a href=""https://www.youtube.com/watch?v=b3m9UIeSpBY&amp;t=246s"" rel=""noreferrer"">Douglas Schmidt</a> at <a href=""http://www.dre.vanderbilt.edu/~schmidt/Coursera/"" rel=""noreferrer"">Coursera course</a>, content provider <a href=""https://developer.android.com/guide/topics/providers/content-provider-basics.html"" rel=""noreferrer""><em>manages and mediates access to a central repository of data to one or more applications</em></a></p>

<p><a href=""https://i.stack.imgur.com/9ELkt.png"" rel=""noreferrer""><img src=""https://i.stack.imgur.com/9ELkt.png"" alt=""Content Provider""></a></p>

<p>In the book <a href=""https://rads.stackoverflow.com/amzn/click/com/1449316646"" rel=""noreferrer"" rel=""nofollow noreferrer"">Programming Android</a>, content providers are used <a href=""https://www.safaribooksonline.com/library/view/programming-android-2nd/9781449332921/ch13.html"" rel=""noreferrer"">as a Facade for a RESTful Web Service</a>. This approach was initially presented by <a href=""https://www.youtube.com/watch?v=xHXn3Kg2IQE"" rel=""noreferrer"">
Virgil Dobjanschi during Google I/O 2010</a>.</p>

<p>Thus, instead of using content providers to <a href=""https://github.com/googlesamples/android-architecture/tree/todo-mvp-contentproviders/todoapp/app/src/main/java/com/example/android/architecture/blueprints/todoapp/data/source"" rel=""noreferrer"">access the local SQLite database</a>, why not using it as the repository pattern itself?</p>

<p><a href=""https://i.stack.imgur.com/H21Oc.png"" rel=""noreferrer""><img src=""https://i.stack.imgur.com/H21Oc.png"" alt=""enter image description here""></a></p>
",2886392,,2886392,,2017-04-26 11:54:06,2017-04-28 10:03:58,Is Content Provider an implementation of Repository Pattern?,<android><design-patterns><android-mvp>,8,0,8,,
Android,43632752,1,43661005,990,4/27/2017 14:44:02,1,,4/26/2017 11:21:34,,5,1548,"<p>I am implementing the example given in <a href=""https://github.com/googlesamples/android-vision/tree/master/visionSamples/FaceTracker"" rel=""noreferrer"">google-vision face tracker</a>.
<code>MyFaceDetector</code> class:</p>

<pre><code>public class MyFaceDetector extends Detector&lt;Face&gt; {
    private Detector&lt;Face&gt; mDelegate;

    MyFaceDetector(Detector&lt;Face&gt; delegate) {
        mDelegate = delegate;
    }

    public SparseArray&lt;Face&gt; detect(Frame frame) {
        return mDelegate.detect(frame);
    }

    public boolean isOperational() {
        return mDelegate.isOperational();
    }

    public boolean setFocus(int id) {
        return mDelegate.setFocus(id);
    }

}
</code></pre>

<p><code>FaceTrackerActivity</code> class:</p>

<pre><code>private void createCameraSource() {

    imageView = (ImageView) findViewById(R.id.face);

    FaceDetector faceDetector = new FaceDetector.Builder(this).build();
    myFaceDetector = new MyFaceDetector(faceDetector);
    myFaceDetector.setProcessor(new MultiProcessor.Builder&lt;&gt;(new GraphicFaceTrackerFactory())
            .build());
    mCameraSource = new CameraSource.Builder(this, myFaceDetector)
            .setRequestedPreviewSize(640, 480)
            .setFacing(CameraSource.CAMERA_FACING_FRONT)
            .setRequestedFps(60.0f)
            .build();

    if (!myFaceDetector.isOperational()) {
        Log.w(TAG, ""Face detector dependencies are not yet available."");
    }
}
</code></pre>

<p>I need to crop the face and set it on <code>ImageView</code>. I am not able to implement my custom <code>Frame</code> here. <code>frame.getBitmap()</code> always returns <code>null</code> in <code>detect(Frame frame)</code>. How do I achieve this?</p>
",1785200,,,,,2017-12-15 21:57:53,Crop face from the CameraSource,<android><android-camera><android-vision>,2,1,1,,
Android,43765499,1,43766165,453,5/3/2017 17:08:10,0,,5/3/2017 16:29:56,,2,645,"<p>Anybody knows how can I handle exceptions coming from native method calls?</p>

<p>I'm running the <a href=""https://github.com/googlesamples/android-vision/tree/master/visionSamples/barcode-reader"" rel=""nofollow noreferrer"">Barcode Reader example from Google Vision API</a>, it works very well reading some 2d - pdf417 codes, but in some cases it crashes with a native exception attempting to use <code>NewStringUTF</code> like this:</p>

<pre><code>    art/runtime/java_vm_ext.cc:410] JNI DETECTED ERROR IN APPLICATION: input is not valid Modified UTF-8: illegal start byte 0x90
    art/runtime/java_vm_ext.cc:410]     in call to NewStringUTF
    art/runtime/java_vm_ext.cc:410]     from com.google.android.gms.vision.barcode.internal.NativeBarcode[] com.google.android.gms.vision.barcode.internal.NativeBarcodeDetector.recognizeNative(int, int, byte[], com.google.android.gms.vision.barcode.internal.NativeOptions)
    art/runtime/java_vm_ext.cc:410] ""Thread-4533"" prio=5 tid=19 Runnable
    art/runtime/java_vm_ext.cc:410]   | group=""main"" sCount=0 dsCount=0 obj=0x12c8e0a0 self=0x7f849f4200
    art/runtime/java_vm_ext.cc:410]   | sysTid=9051 nice=0 cgrp=default sched=0/0 handle=0x7f7b7bf440
    art/runtime/java_vm_ext.cc:410]   | state=R schedstat=( 1663092757 5060164 94 ) utm=165 stm=1 core=2 HZ=100
    art/runtime/java_vm_ext.cc:410]   | stack=0x7f7b6bd000-0x7f7b6bf000 stackSize=1037KB
    art/runtime/java_vm_ext.cc:410]   | held mutexes= ""mutator lock""(shared held)
    art/runtime/java_vm_ext.cc:410]   native: #00 pc 00000000004897a8  /system/lib64/libart.so (_ZN3art15DumpNativeStackERNSt3__113basic_ostreamIcNS0_11char_traitsIcEEEEiP12BacktraceMapPKcPNS_9ArtMethodEPv+200)
    art/runtime/java_vm_ext.cc:410]   native: #01 pc 0000000000458644  /system/lib64/libart.so (_ZNK3art6Thread4DumpERNSt3__113basic_ostreamIcNS1_11char_traitsIcEEEEP12BacktraceMap+224)
    art/runtime/java_vm_ext.cc:410]   native: #02 pc 000000000030c9e4  /system/lib64/libart.so (_ZN3art9JavaVMExt8JniAbortEPKcS2_+1004)
    art/runtime/java_vm_ext.cc:410]   native: #03 pc 000000000030d29c  /system/lib64/libart.so (_ZN3art9JavaVMExt9JniAbortVEPKcS2_St9__va_list+116)
    art/runtime/java_vm_ext.cc:410]   native: #04 pc 0000000000141f9c  /system/lib64/libart.so (_ZN3art11ScopedCheck6AbortFEPKcz+144)
    art/runtime/java_vm_ext.cc:410]   native: #05 pc 000000000014a1d0  /system/lib64/libart.so (_ZN3art11ScopedCheck5CheckERNS_18ScopedObjectAccessEbPKcPNS_12JniValueTypeE.constprop.116+11084)
    art/runtime/java_vm_ext.cc:410]   native: #06 pc 0000000000153418  /system/lib64/libart.so (_ZN3art8CheckJNI12NewStringUTFEP7_JNIEnvPKc+468)
    art/runtime/java_vm_ext.cc:410]   native: #07 pc 0000000000005774  /data/data/com.google.android.gms/files/com.google.android.gms.vision/barcode/libs/arm64-v8a/libbarhopper.so (_ZN9barhopper9JniObject14SetStringFieldEPKcRKNSt3__112basic_stringIcNS3_11char_traitsIcEENS3_9allocatorIcEEEE+168)
    art/runtime/java_vm_ext.cc:410]   native: #08 pc 00000000000036f8  /data/data/com.google.android.gms/files/com.google.android.gms.vision/barcode/libs/arm64-v8a/libbarhopper.so (???)
    art/runtime/java_vm_ext.cc:410]   native: #09 pc 0000000000004c8c  /data/data/com.google.android.gms/files/com.google.android.gms.vision/barcode/libs/arm64-v8a/libbarhopper.so (Java_com_google_android_gms_vision_barcode_internal_NativeBarcodeDetector_recognizeNative+84)
</code></pre>

<p>I would like to handle the crash in order to catch it and give some feedback to the user.</p>
",1623501,,,,,2017-05-03 17:08:10,Google Vision API: Handle native crash,<android><google-play-services><google-vision><android-vision>,1,0,1,,
Android,43774620,1,43774743,992,5/4/2017 5:44:03,0,,5/4/2017 5:36:45,,5,2995,"<p>I am building an Android app and am fairly new to both MVVM and data binding concepts on Android.</p>

<p>I have read at a few places ( like <a href=""https://www.codevate.com/blog/13-better-android-software-development-mvvm-with-rxjava"" rel=""noreferrer"">here</a>) that both RxJava and Google's <a href=""https://developer.android.com/topic/libraries/data-binding/index.html"" rel=""noreferrer"">DataBinding library</a> can be used for implementing MVVM pattern.</p>

<p>I went through the official Android documentation for DataBinding and am going through <a href=""https://github.com/googlesamples/android-architecture/tree/todo-mvvm-databinding"" rel=""noreferrer"">a project</a> referenced by Google on Mvvm using DataBinding. However, I have no idea how RxJava works as of yet, which might be obvious from the question.</p>

<p>My question is, keeping in mind the long term goals of extending my app, is it worth investing effort in learning RxJava? Or does DataBinding suffice as a complete substitute for it? I don't know RxJava at all but by reading about it online gives me the impression that it can solve a wide range of problems. </p>

<p>I do not mind investing time in learning RxJava but is it worth the effort than simply using Google's DataBinding (which I have some sort of grasp on)?</p>
",974766,,,,,2017-09-23 17:16:27,MVVM on Android with DataBinding or RxJava?,<android><mvvm><data-binding><rx-java><android-databinding>,1,0,,,
Android,38034005,1,44012305,993,5/16/2017 21:59:00,325,,6/25/2016 23:59:41,,3,445,"<p>I'm currently developing an app and have the following issue.</p>

<p>While using NFC for device owner provisioning, I would like to send a string, which would be used by the new device owner app.</p>

<p>I'm aware of the standard MIME properties for device owner provisioning, found <a href=""http://Properties%20properties%20=%20new%20Properties();%20%20%20%20%20%20%20%20%20%20%20%20%20properties.put(%22name%22,%20deviceName);%20%20%20%20%20%20%20%20%20%20%20%20%20//put%20token%20%20%20%20%20%20%20%20%20%20%20%20%20properties.put(DevicePolicyManager.EXTRA_PROVISIONING_LOCAL_TIME,%20localTime);%20%20%20%20%20%20%20%20%20%20%20%20%20try%20%7B%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20properties.store(stream,%20%22Staffbravo%20NFC%20Provisioning%22);%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20ndefMessage%20=%20new%20NdefMessage(new%20NdefRecord[]%7BNdefRecord.createMime(DevicePolicyManager.MIME_TYPE_PROVISIONING_NFC,%20stream.toByteArray())%7D);%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%20catch%20(IOException%20e)%20%7B%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20Log.e(getTag(),%20e.getMessage());%20%20%20%20%20%20%20%20%20%20%20%20%20%7D"" rel=""nofollow noreferrer"">here</a></p>

<p>Here's a snippet that can give you a better visual of my issue. Notice the ""myCustomValue"" property.</p>

<pre><code>Properties properties = new Properties();
properties.put(""myCustomValue"", value);
properties.put(DevicePolicyManager.EXTRA_PROVISIONING_DEVICE_ADMIN_PACKAGE_NAME, ""com.example.some.app"");
try {                    
    properties.store(stream, ""NFC Provisioning"");            
    ndefMessage = new NdefMessage(new NdefRecord[{NdefRecord.createMime(DevicePolicyManager.MIME_TYPE_PROVISIONING_NFC, stream.toByteArray())});
} catch (IOException e) {                         

}
</code></pre>

<p>This snippet lies inside</p>

<pre><code>public NdefMessage createNdefMessage(NfcEvent event)
</code></pre>

<p>and you can find a template <a href=""https://github.com/googlesamples/android-NfcProvisioning/blob/master/Application/src/main/java/com/example/android/nfcprovisioning/NfcProvisioningFragment.java"" rel=""nofollow noreferrer"">here</a></p>

<p>In case this is possible, I also would like to know how to retrieve that string value as soon as the provisioned app has started.</p>
",6513648,,1841194,,2018-06-02 5:25:00,2018-06-02 5:25:00,Android NFC device owner provisioning: send custom properties. Is it possible?,<java><android><provisioning><nfs>,2,0,,,
Android,44208122,1,44285588,994,5/31/2017 13:02:26,5,,5/26/2017 18:33:03,,4,5103,"<p>So, I need to overlay the camera2 preview and draw a rectangle on the preview video image by layering a transparent overlay on top.  I started with a basic Camera2 code here: <a href=""https://github.com/googlesamples/android-Camera2Basic"" rel=""nofollow noreferrer"">https://github.com/googlesamples/android-Camera2Basic</a></p>

<p>the above use TextureView for camera preview.</p>

<p>Next, I added the following class to project</p>

<pre><code>private class CustomView extends SurfaceView {

    private final Paint paint;
    private final SurfaceHolder mHolder;
    private final Context context;

    public CustomView(Camera2BasicFragment context) {
        super(context.getActivity().getBaseContext());
        mHolder = getHolder();
        mHolder.setFormat(PixelFormat.TRANSPARENT);
        this.context = context.getActivity().getBaseContext();
        paint = new Paint(Paint.ANTI_ALIAS_FLAG);
        paint.setColor(Color.WHITE);
        paint.setStyle(Paint.Style.STROKE);
    }

    @Override
    protected void onDraw(Canvas canvas) {
        super.onDraw(canvas);
    }

    @Override
    public boolean onTouchEvent(MotionEvent event) {
        if (event.getAction() == MotionEvent.ACTION_DOWN) {
            invalidate();
            if (mHolder.getSurface().isValid()) {
                final Canvas canvas = mHolder.lockCanvas();
                Log.d(""touch"", ""touchRecieved by camera"");
                if (canvas != null) {
                    Log.d(""touch"", ""touchRecieved CANVAS STILL Not Null"");
                    canvas.drawColor(Color.TRANSPARENT, PorterDuff.Mode.CLEAR);
                    canvas.drawColor(Color.TRANSPARENT);
                    canvas.drawCircle(event.getX(), event.getY(), 100, paint);
                    mHolder.unlockCanvasAndPost(canvas);
                    new Handler().postDelayed(new Runnable() {
                        @Override
                        public void run() {
                            Canvas canvas1 = mHolder.lockCanvas();
                            if(canvas1 !=null){
                                canvas1.drawColor(0, PorterDuff.Mode.CLEAR);
                                mHolder.unlockCanvasAndPost(canvas1);
                            }

                        }
                    }, 1000);

                }
                mHolder.unlockCanvasAndPost(canvas);


            }
        }


        return false;
    }
}
</code></pre>

<p>I need some help in making this work.. Obviously the new class is not used yet. I also  need to update the overlay xml to add a second transparent TextureView on top of the camera preview one. Here is my original layout:
Would be very appreciated if anyone can tell me how to make the new class work, and tell me what to add to the layout. </p>

<p>here is  fragment_camera2_basic.xml </p>

<pre><code>&lt;?xml version=""1.0"" encoding=""utf-8""?&gt;
&lt;RelativeLayout xmlns:android=""http://schemas.android.com/apk/res/android""
    android:layout_width=""match_parent""
    android:layout_height=""match_parent""&gt;

    &lt;com.example.android.camera2basic.AutoFitTextureView
        android:id=""@+id/texture""
        android:layout_width=""wrap_content""
        android:layout_height=""wrap_content""
        android:layout_alignParentStart=""true""
        android:layout_alignParentTop=""true"" /&gt;

    &lt;FrameLayout
        android:id=""@+id/control""
        android:layout_width=""match_parent""
        android:layout_height=""112dp""
        android:layout_alignParentBottom=""true""
        android:layout_alignParentStart=""true""
        android:background=""@color/control_background""&gt;

        &lt;Button
            android:id=""@+id/picture""
            android:layout_width=""wrap_content""
            android:layout_height=""wrap_content""
            android:layout_gravity=""center""
            android:text=""@string/picture"" /&gt;

        &lt;ImageButton
            android:id=""@+id/info""
            android:contentDescription=""@string/description_info""
            style=""@android:style/Widget.Material.Light.Button.Borderless""
            android:layout_width=""wrap_content""
            android:layout_height=""wrap_content""
            android:layout_gravity=""center_vertical|right""
            android:padding=""20dp""
            android:src=""@drawable/ic_action_info"" /&gt;

    &lt;/FrameLayout&gt;

&lt;/RelativeLayout&gt;
</code></pre>

<p>and activity_camera.xml</p>

<pre><code>&lt;?xml version=""1.0"" encoding=""utf-8""?&gt;&lt;!--

--&gt;
&lt;FrameLayout xmlns:android=""http://schemas.android.com/apk/res/android""
    xmlns:tools=""http://schemas.android.com/tools""
    android:id=""@+id/container""
    android:layout_width=""match_parent""
    android:layout_height=""match_parent""
    android:background=""#000""
    tools:context=""com.example.android.camera2basic.CameraActivity"" /&gt;
</code></pre>
",2970357,,2308683,,2017-06-25 19:00:38,2017-06-25 19:00:38,android Camera2 API + TextureView overlay for drawing on camera preview,<android><overlay><preview><camera2>,1,0,,,
Android,44447767,1,44470910,995,6/10/2017 7:48:33,1,,6/9/2017 1:06:38,,1,111,"<p>If we look at Google's Android Architecture example for Model-View-Presenter (MVP), particularly these two lines:</p>

<p><a href=""https://github.com/googlesamples/android-architecture/blob/todo-mvp/todoapp/app/src/main/java/com/example/android/architecture/blueprints/todoapp/tasks/TasksFragment.java#L357"" rel=""nofollow noreferrer"">https://github.com/googlesamples/android-architecture/blob/todo-mvp/todoapp/app/src/main/java/com/example/android/architecture/blueprints/todoapp/tasks/TasksFragment.java#L357</a></p>

<p><a href=""https://github.com/googlesamples/android-architecture/blob/todo-mvp/todoapp/app/src/main/java/com/example/android/architecture/blueprints/todoapp/data/source/TasksRepository.java#L50"" rel=""nofollow noreferrer"">https://github.com/googlesamples/android-architecture/blob/todo-mvp/todoapp/app/src/main/java/com/example/android/architecture/blueprints/todoapp/data/source/TasksRepository.java#L50</a></p>

<p>We see the collection of Tasks is redundant - one is stored in the model in a Map, and one is stored in the View's Adapter as a List.</p>

<p>Is this a necessity?  Is it possible for the list to be stored once, or must we always be duplicating the list between the Model and the View's Adapter?  If it only had to be stored in one place, obviously that would be in the Model/repository portion.</p>

<p>Most importantly, if it is not a necessity to duplicate the objects list, how would the implementation work to not duplicate it?</p>
",470542,,,,,2017-09-01 14:47:27,Redundancy in Android Model-View-Presenter between Model and View Adapter,<android>,2,0,,,
Android,44487347,1,44487594,996,6/11/2017 18:58:18,0,,6/11/2017 18:35:43,,1,36,"<p>I have created a bluetooth chat,I want to make changes as such that I want to perform an action if the </p>

<p><code>if(messageRecieved.equals(""message required""){
 //Action
}</code>
I do not know which statement is the above mentioned messageRecieved
ref-:<a href=""https://github.com/googlesamples/android-BluetoothChat/tree/master/Application/src/main/java/com/example/android/bluetoothchat"" rel=""nofollow noreferrer"">https://github.com/googlesamples/android-BluetoothChat/tree/master/Application/src/main/java/com/example/android/bluetoothchat</a></p>
",,user7320356,,user7320356,2017-06-11 19:07:06,2017-06-11 19:07:06,Start an if statement according to the message RECEIVED-Bluetooth,<android><bluetooth><android-bluetooth>,1,4,,,
Android,44560981,1,44646030,997,6/20/2017 7:02:25,5,,6/15/2017 7:12:54,,3,320,"<p>Looking at the following method in Google <a href=""https://github.com/googlesamples/android-testing/blob/master/ui/espresso/IntentsBasicSample/app/src/androidTest/java/com/example/android/testing/espresso/BasicSample/DialerActivityTest.java"" rel=""nofollow noreferrer"">sample for intents</a>:</p>

<pre><code>@Before
public void stubAllExternalIntents() {
    // By default Espresso Intents does not stub any Intents. Stubbing needs to be setup before
    // every test run. In this case all external Intents will be blocked.
    intending(not(isInternal())).respondWith(new ActivityResult(Activity.RESULT_OK, null));
}
</code></pre>

<p>I see that all external intents will be blocked but I was wondering what purpose does this method serve?</p>
",5907514,,1083957,,2017-06-20 7:03:59,2017-06-20 7:03:59,Purpose of stubAllExternalIntents() in Espresso intents testing,<android><testing><android-intent><android-espresso><android-testing>,2,0,1,,
Android,44753069,1,44753178,998,6/26/2017 4:35:04,0,,6/26/2017 4:20:38,,1,1518,"<p>I have read <a href=""https://developer.android.com/topic/libraries/architecture/room.html#db-migration"" rel=""nofollow noreferrer"">Room Persistence Library</a>. I also clone <a href=""https://github.com/googlesamples/android-architecture-components/tree/master/GithubBrowserSample"" rel=""nofollow noreferrer"">android-architecture-components</a> then I try to add Mirgration test. However, I cannot import </p>

<pre><code>import android.arch.persistence.room.testing.MigrationTestHelper;
</code></pre>

<p>I also use latest lib version which is.</p>

<pre><code>android.arch.core:core-testing:1.0.0-alpha3
</code></pre>

<p>Here is the code for MigrationTest</p>

<pre><code>import android.arch.persistence.db.SupportSQLiteDatabase;
import android.arch.persistence.db.framework.FrameworkSQLiteOpenHelperFactory;
import android.support.test.InstrumentationRegistry;
import android.support.test.runner.AndroidJUnit4;

import org.junit.Rule;
import org.junit.Test;
import org.junit.runner.RunWith;

import java.io.IOException;
import android.arch.persistence.room.testing.MigrationTestHelper;

@RunWith(AndroidJUnit4.class)
public class MigrationTest {
    private static final String TEST_DB = ""migration-test"";

    @Rule
    public MigrationTestHelper helper;

    public MigrationTest() {
        helper = new MigrationTestHelper(InstrumentationRegistry.getInstrumentation(),
                MigrationDb.class.getCanonicalName(),
                new FrameworkSQLiteOpenHelperFactory());
    }

    @Test
    public void migrate1To2() throws IOException {
        SupportSQLiteDatabase db = helper.createDatabase(TEST_DB, 1);

        // db has schema version 1. insert some data using SQL queries.
        // You cannot use DAO classes because they expect the latest schema.
        //db.execSQL(...);

        // Prepare for the next version.
        db.close();

        // Re-open the database with version 2 and provide
        // MIGRATION_1_2 as the migration process.
        db = helper.runMigrationsAndValidate(TEST_DB, 2, true, MIGRATION_1_2);

        // MigrationTestHelper automatically verifies the schema changes,
        // but you need to validate that the data was migrated properly.
    }
}
</code></pre>
",1025935,,,,,2017-06-28 10:51:12,Cannot import android.arch.persistence.room.testing.MigrationTestHelper,<android><database-migration><android-room><android-architecture-components>,2,0,1,,
Android,44749473,1,44769286,999,6/26/2017 21:57:46,1,,6/25/2017 18:48:08,,2,1126,"<p>I'm trying to draw a rectangle  on a camera2 preview using the basic Camera2 from this link : 
<a href=""https://github.com/googlesamples/android-Camera2Basic"" rel=""nofollow noreferrer"">https://github.com/googlesamples/android-Camera2Basic</a></p>

<p>and i followed the answer from this question on the forum :</p>

<p><a href=""https://stackoverflow.com/questions/44208122/android-camera2-api-textureview-overlay-for-drawing-on-camera-preview"">android Camera2 API + TextureView overlay for drawing on camera preview</a></p>

<p>but i can't get it to work. I'll be very grateful if you can help me figure out how to solve my problem. Here is the class used to draw the rectangle : <strong>Rectangle.java</strong></p>

<pre><code>package com.example.android.camera2basic;

import android.content.Context;
import android.graphics.Canvas;
import android.graphics.Color;
import android.graphics.Paint;
import android.graphics.Rect;
import android.view.View;

public class Rectangle extends View {
Paint paint = new Paint();

public Rectangle(Context context) {
    super(context);
}


@Override
public void onDraw(Canvas canvas) {
    paint.setColor(Color.GREEN);
    paint.setStyle(Paint.Style.FILL);
    Rect rect = new Rect(20, 56, 200, 112);
    canvas.drawRect(rect, paint );
}
}
</code></pre>

<p>xml file of the camera <strong>activity_camera.xml</strong> :</p>

<pre><code>&lt;?xml version=""1.0"" encoding=""utf-8""?&gt;

&lt;FrameLayout xmlns:android=""http://schemas.android.com/apk/res/android""
xmlns:tools=""http://schemas.android.com/tools""
android:id=""@+id/container""
android:layout_width=""match_parent""
android:layout_height=""match_parent""
android:background=""#000""
tools:context=""com.example.android.camera2basic.CameraActivity""&gt;

&lt;LinearLayout
android:id=""@+id/surface""
android:layout_width=""match_parent""
android:layout_height=""match_parent""
android:orientation=""vertical"" /&gt;

&lt;/FrameLayout&gt;
</code></pre>

<p>and this is the method used in  the class where i added the rectangle to camera preview <strong>Camera2BasicFragment.java</strong> :</p>

<pre><code>  @Override
  public View onCreateView(LayoutInflater inflater, ViewGroup container,
                         Bundle savedInstanceState) {

    View view = inflater.inflate(R.layout.fragment_camera2_basic, container, 
    false);
    LinearLayout linearLayout = (LinearLayout) 
    view.findViewById(R.id.surface);
    linearLayout.addView(new Rectangle(getActivity()));
    return view;
    }
</code></pre>

<p>and finaly the error appeared after the application crushed at launching :</p>

<pre><code>java.lang.RuntimeException: Unable to start activity ComponentInfo{com.example.android.camera2basic/com.example.android.camera2basic.CameraActivity}: java.lang.NullPointerException: Attempt to invoke virtual method 'void android.widget.LinearLayout.addView(android.view.View)' on a null object reference
                                                                                  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2793)
                                                                                  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2864)
                                                                                  at android.app.ActivityThread.-wrap12(ActivityThread.java)
                                                                                  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1567)
                                                                                  at android.os.Handler.dispatchMessage(Handler.java:105)
                                                                                  at android.os.Looper.loop(Looper.java:156)
                                                                                  at android.app.ActivityThread.main(ActivityThread.java:6523)
                                                                                  at java.lang.reflect.Method.invoke(Native Method)
                                                                                  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:941)
                                                                                  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:831)
                                                                               Caused by: java.lang.NullPointerException: Attempt to invoke virtual method 'void android.widget.LinearLayout.addView(android.view.View)' on a null object reference
                                                                                  at com.example.android.camera2basic.Camera2BasicFragment.onCreateView(Camera2BasicFragment.java:431)
                                                                                  at android.app.Fragment.performCreateView(Fragment.java:2361)
                                                                                  at android.app.FragmentManagerImpl.moveToState(FragmentManager.java:1000)
                                                                                  at android.app.FragmentManagerImpl.moveToState(FragmentManager.java:1178)
                                                                                  at android.app.BackStackRecord.run(BackStackRecord.java:815)
                                                                                  at android.app.FragmentManagerImpl.execPendingActions(FragmentManager.java:1585)
                                                                                  at android.app.FragmentController.execPendingActions(FragmentController.java:371)
                                                                                  at android.app.Activity.performStart(Activity.java:6929)
                                                                                  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2756)
                                                                                  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2864)Â 
                                                                                  at android.app.ActivityThread.-wrap12(ActivityThread.java)Â 
                                                                                  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1567)Â 
                                                                                  at android.os.Handler.dispatchMessage(Handler.java:105)Â 
                                                                                  at android.os.Looper.loop(Looper.java:156)Â 
                                                                                  at android.app.ActivityThread.main(ActivityThread.java:6523)Â 
                                                                                  at java.lang.reflect.Method.invoke(Native Method)Â 
</code></pre>
",3816569,,2308683,,2017-06-26 23:48:04,2017-06-26 23:48:39,Draw rectangle over camera2 preview android,<android><nullpointerexception><android-camera>,1,2,,,
Android,44863661,1,44863853,1000,7/1/2017 17:48:58,0,,7/1/2017 17:26:38,,2,979,"<p>I have made an app which takes pictures (portrait, landscape or selfie) using the <a href=""https://github.com/googlesamples/android-Camera2Basic"" rel=""nofollow noreferrer"">Google Camera2 sample</a>. Everything works, I can take the pictures, they are saved, etc. </p>

<p>But when I open my phone's (Samsung S7) gallery then all the selfies and portrait pictures are rotated 90 degrees. The landscape pictures are fine though. I have seen a lot of post about how to <strong>read</strong> images in the correct orientation, but what about saving them properly? </p>

<p>I have my own gallery in my app and there the pictures are loaded correctly (using Glide) without any special rotation fixing, so I am not sure what I did wrong and most importantly, how do I fix this?</p>
",8021836,,3908170,,2018-09-17 23:45:55,2018-09-17 23:45:55,Android Camera2 pictures appear rotated in gallery,<android><android-camera2>,2,4,1,,
Android,44910631,1,44911261,494,7/4/2017 17:12:58,0,,7/4/2017 16:28:10,,7,1426,"<p>Why are there two versions of TrivialDrive?</p>

<p><a href=""https://github.com/googlesamples/android-play-billing"" rel=""nofollow noreferrer"">https://github.com/googlesamples/android-play-billing</a></p>

<p>Which version should be the main reference project for learning in-app billing? What's the difference between the versions?</p>
",8251758,,1390874,,2017-09-28 22:38:27,2017-09-28 22:44:21,TrivialDrive vs TrivialDrive V2?,<android><github><in-app-purchase><play-billing-library>,3,0,1,,
Android,44948245,1,44949641,1002,7/6/2017 12:59:38,0,,7/6/2017 11:58:20,,2,3809,"<p>I try to use new simplified Location APIs on Android (introduced in GPS 11.0). I wrote a Service that implements location APIs. But it only triggers and send location for a few seconds (only 2 times).</p>

<pre><code>public class LocationService extends Service {
public static final String TAG = makeLogTag(""LocationService"");

private static final float LOCATION_TRACKING_MIN_DISTANCE = 15f;
private static final float ACCEPTED_ACCURACY = 50f;

private final IBinder mBinder = new LocalBinder();

// fused location api
private FusedLocationProviderClient mFusedLocationClient;
private LocationRequest mLocationRequest;
private LocationCallback mLocationCallback;

@Override
public void onCreate() {
    super.onCreate();
    Log.i(TAG, ""onCreate"");
    mFusedLocationClient = LocationServices.getFusedLocationProviderClient(this);
    createLocationCallback();
    createLocationRequest();
}

@Override
public int onStartCommand(Intent intent, int flags, int startId) {
    Log.i(TAG, ""onStartCommand"");
    if (ActivityCompat.checkSelfPermission(this, Manifest.permission.ACCESS_FINE_LOCATION) != PackageManager.PERMISSION_GRANTED) {
        stopSelf();
        return START_NOT_STICKY;
    }

    getLastKnownLocation();
    startPeriodicLocationUpdate();

    return START_STICKY;
}

@Override
public void onDestroy() {
    super.onDestroy();
    stopPeriodicLocationUpdate();
    Log.i(TAG, ""onDestroy - Estou sendo destruido "");
}

@Nullable
@Override
public IBinder onBind(Intent intent) {
    return mBinder;
}

private void getLastKnownLocation() {
    if (ActivityCompat.checkSelfPermission(this, Manifest.permission.ACCESS_FINE_LOCATION) != PackageManager.PERMISSION_GRANTED) {
        return;
    }
    mFusedLocationClient.getLastLocation()
            .addOnCompleteListener(task -&gt; {
                if (task.isSuccessful() &amp;&amp; task.getResult() != null) {
                    Location lastLocation = task.getResult();
                    storeLocation(lastLocation);
                }
            });
}

private void createLocationRequest() {
    mLocationRequest = new LocationRequest()
            .setInterval(TimeUnit.SECONDS.toMillis(Params.getAgentLocationTrackingUpdateInterval()))
            .setFastestInterval(TimeUnit.SECONDS.toMillis(Params.getAgentLocationTrackingUpdateInterval()))
            .setExpirationDuration(TimeUnit.SECONDS.toMillis(10))
            .setPriority(LocationRequest.PRIORITY_HIGH_ACCURACY);
}

private void createLocationCallback() {
    mLocationCallback = new LocationCallback() {
        @Override
        public void onLocationResult(LocationResult locationResult) {
            super.onLocationResult(locationResult);
            Location location = locationResult.getLastLocation();
            if (location != null) {
                storeLocation(location);
            }

            Log.i(TAG, ""locationResult start"");
            for (Location location1 : locationResult.getLocations()) {
                Log.i(TAG, ""locationResult location "" + location1.getLatitude() + "" "" + location1.getLongitude() + "" "" + location1.getAccuracy() + "" "" + location1.getProvider());
            }
            Log.i(TAG, ""locationResult stop"");
        }
    };
}

private void startPeriodicLocationUpdate() {
    if (ActivityCompat.checkSelfPermission(this, Manifest.permission.ACCESS_FINE_LOCATION) != PackageManager.PERMISSION_GRANTED) {
        return;
    }

    Log.i(TAG, ""periodic update"");
    mFusedLocationClient.requestLocationUpdates(mLocationRequest, mLocationCallback, Looper.myLooper());
}

private void stopPeriodicLocationUpdate() {
    mFusedLocationClient.removeLocationUpdates(mLocationCallback)
            .addOnCompleteListener(task -&gt; LOGI(TAG, ""removed location updates!""));
}

private void storeLocation(Location location) {
    Log.i(TAG, ""periodic location "" + location.getLatitude() + "" "" + location.getLongitude() + "" "" + location.getAccuracy() + "" "" + location.getProvider());
    if (location.getAccuracy() &lt;= ACCEPTED_ACCURACY) {
        Log.i(TAG, ""storeLocation: "" + ""saved!"");
        AgentLocationVo agentLocation = new AgentLocationVo();
        agentLocation.setDate(DateHelper.getDate(location.getTime()));
        agentLocation.setLatitude(location.getLatitude());
        agentLocation.setLongitude(location.getLongitude());
        agentLocation.setAccuracy(location.getAccuracy());
        agentLocation.setSyncState(SyncState.NOTUPLOADED);
        if (!AgentLocationDao.isAgentLocationExist(agentLocation))
            AgentLocationDao.insert(agentLocation);
    }
}

@Override
public void onTaskRemoved(Intent rootIntent) {
    Log.i(TAG, ""onTaskRemoved: "");
    stopSelf();
    JobDispatcher.stopSendLocationJob(getApplicationContext()); // TODO: 04/07/17 not the best place for it
}

public static void start(Context context) {
    context.startService(new Intent(context, LocationService.class));
}

public static void stop(Context context) {
    context.stopService(new Intent(context, LocationService.class));
}

/**
 * Class used for the client Binder.  Because we know this service always
 * runs in the same process as its clients, we don't need to deal with IPC.
 */
public class LocalBinder extends Binder {
    public LocationService getService() {
        // Return this instance of LocationService so clients can call public methods
        return LocationService.this;
    }
}
</code></pre>

<p>}</p>

<p>Here are the resource that I used to create the service:
<a href=""https://android-developers.googleblog.com/2017/06/reduce-friction-with-new-location-apis.html"" rel=""nofollow noreferrer"">https://android-developers.googleblog.com/2017/06/reduce-friction-with-new-location-apis.html</a></p>

<p><a href=""https://github.com/googlesamples/android-play-location/blob/master/LocationUpdates/app/src/main/java/com/google/android/gms/location/sample/locationupdates/MainActivity.java"" rel=""nofollow noreferrer"">https://github.com/googlesamples/android-play-location/blob/master/LocationUpdates/app/src/main/java/com/google/android/gms/location/sample/locationupdates/MainActivity.java</a></p>

<p><a href=""https://blog.stylingandroid.com/locationservices/"" rel=""nofollow noreferrer"">https://blog.stylingandroid.com/locationservices/</a></p>

<p>I have even tried using version of method with Pending intent, but get the same result. Even when app is in foreground.</p>
",1635488,,,,,2017-07-06 12:59:38,FusedLocationProviderClient not sending location updates,<android><service><location><google-play-services>,1,2,,,
Android,45051996,1,45059954,1003,7/12/2017 14:05:08,0,,7/12/2017 8:11:17,,1,779,"<p>I'm trying to use a <a href=""https://developer.android.com/reference/java/security/Signature.html"" rel=""nofollow noreferrer"">Signature</a> object for signing AND verifying data using fingerprint authentication. It works fine for signing, but when it comes to verifying I get this error : </p>

<blockquote>
  <p>java.lang.IllegalArgumentException: Crypto primitive not backed by
  AndroidKeyStore provider: Signature object:
  SHA256withECDSA, spi:
  com.android.org.conscrypt.OpenSSLSignature$SHA256ECDSA@cf4a416</p>
</blockquote>

<p>The exception is thrown not while generating the key (this part is fine) but when calling <code>fingerprintManager.authenticate(cryptoObject, ...)</code></p>

<p>Basically this is how I generate a <code>CryptoObject</code> instance : </p>

<pre><code>KeyPairGenerator signatureKeyGenerator = KeyPairGenerator.getInstance(KeyProperties.KEY_ALGORITHM_EC, ""AndroidKeyStore"");
signatureKeyGenerator.initialize(new KeyGenParameterSpec.Builder(keyName, KeyProperties.PURPOSE_SIGN)
        .setDigests(KeyProperties.DIGEST_SHA256)
        .setAlgorithmParameterSpec(new ECGenParameterSpec(""secp256r1""))
        .setUserAuthenticationRequired(true)
        .build());

KeyPair signatureKey = signatureKeyGenerator.generateKeyPair();

Signature signature = Signature.getInstance(""SHA256withECDSA"");

switch (MODE) {
    case KeyProperties.PURPOSE_SIGN:
        signature.initSign(signatureKey.getPrivate());
        break;
    case KeyProperties.PURPOSE_VERIFY:
        KeyFactory factory = KeyFactory.getInstance(signatureKey.getPublic().getAlgorithm());
        X509EncodedKeySpec spec = new X509EncodedKeySpec(signatureKey.getPublic().getEncoded());
        PublicKey unrestrictedPublicKey = factory.generatePublic(spec);
        signature.initVerify(unrestrictedPublicKey);
        break;
}

CryptoObject cryptoObject new CryptoObject(signature);
</code></pre>

<p>I tried to add <code>| KeyProperties.PURPOSE_VERIFY</code> to <code>KeyGenParameterSpec.Builder</code> but it didn't work either and anyway that's how they do it in the official Google repo : <a href=""https://github.com/googlesamples/android-AsymmetricFingerprintDialog"" rel=""nofollow noreferrer"">https://github.com/googlesamples/android-AsymmetricFingerprintDialog</a> (weird...)</p>

<p>Finally I tried to look into Android source code to see why the exception is thrown : <strong><a href=""https://android.googlesource.com/platform/frameworks/base/+/ae6cb7a/keystore/java/android/security/keystore/AndroidKeyStoreProvider.java"" rel=""nofollow noreferrer"">AndroidKeyStoreProvider.java</a></strong></p>

<pre><code>Object spi = ((Signature) cryptoPrimitive).getCurrentSpi();
if (spi == null) {
    throw new IllegalStateException(""Crypto primitive not initialized"");
} else if (!(spi instanceof KeyStoreCryptoOperation)) {
    throw new IllegalArgumentException(
            ""Crypto primitive not backed by AndroidKeyStore provider: "" + cryptoPrimitive
            + "", spi: "" + spi);
}
</code></pre>

<p>But I can't even find the <code>getCurrentSpi()</code> method...</p>

<p>Any help would be greatly appreciated !</p>
",5552022,,,,,2017-07-12 14:27:56,Android Fingerprint Authentication with Signature,<android><authentication><keystore><signature><fingerprint>,1,0,,,
Android,45139577,1,45148366,1004,7/17/2017 15:41:37,0,,7/17/2017 8:42:43,,1,642,"<p>My project structure contains a base feature module, an installed app module (with free and paid flavors) and an instant app module(only one flavor - free). It seems like the package name for the instant app is coming from the base feature module's manifest.</p>

<p>Why does not the applicationId field in build.gradle of instant app overwrite the package field in the manifest as it does for the installed app?</p>

<p>The same behaviour is also observed in the <a href=""https://github.com/googlesamples/android-instant-apps/tree/master/hello"" rel=""nofollow noreferrer"">hello instant app sample.</a></p>
",1262089,,,,,2017-07-17 18:07:19,How to set the package/applicationId for android instant app?,<android><android-instant-apps>,1,0,,,
Android,45201324,1,45204178,1005,7/20/2017 2:40:42,1,,7/19/2017 21:27:22,,1,2129,"<p>I have a MVVM project where I have ViewModel classes extending BaseObservable. Now if put @Inject class in my ViewModel then compilation fails with many errors like: ""error: package xxx.databinding does not exist""</p>

<p>Can I find the actual error that's causing this using some gradle technique? Also is @Inject really supported with databinding?</p>

<p>Edit:</p>

<p>Code is exactly the same as <a href=""https://github.com/googlesamples/android-architecture/tree/todo-mvvm-databinding/"" rel=""nofollow noreferrer"">https://github.com/googlesamples/android-architecture/tree/todo-mvvm-databinding/</a></p>

<p>In that I have added dagger and I'm trying to @Inject a repository into a view model that extends BaseObservable. As soon as I add @Inject into the view model then I cant compile</p>
",517860,,517860,,2017-07-19 21:39:41,2019-03-12 7:16:32,Dagger and databinding,<android><mvvm><dagger-2><android-databinding><dagger.android>,3,2,,,
Android,45208116,1,45325913,1006,7/26/2017 11:40:54,6,,7/20/2017 7:27:32,,7,1088,"<p>Geocoder was working fine until today. It started to return String with 0 length.
Note: This is not a duplicate of Geocoder threads, i used intent service and AsyncTask to get it before starting the thread(and AsyncTask approach was working fine over 8 months), checked <a href=""http://www.androidauthority.com/get-location-address-android-app-628764/"" rel=""nofollow noreferrer"">this code</a> and new <a href=""https://github.com/googlesamples/android-play-location/tree/master/LocationAddress"" rel=""nofollow noreferrer"">code</a> from Google with FusedLocationProviderClient(this is offical code) it also returns string with zero length.<a href=""https://developer.android.com/training/location/display-address.html"" rel=""nofollow noreferrer"">This link</a> from official Android page shows how to get it with intent service.</p>

<p>I get full address on Android 5.1 but on Android 7.1 it returns an address with length zero.</p>

<p>Code i used to use and worked fine until today.</p>

<pre><code>private void getAddressFromCoordinates() {

    new AsyncTask&lt;Void, String, Void&gt;() {

        @Override
        protected Void doInBackground(Void... params) {

            try {
                addresses.clear();
                addresses.addAll(geocoder.getFromLocation(mCurrentLocation.getLatitude(),
                        mCurrentLocation.getLongitude(), 1));


            } catch (IOException e) {
                e.printStackTrace();
                showToastAsync(getString(R.string.activity_loc_no_location_info));
            } catch (IllegalArgumentException illegalArgumentException) {
                // Catch invalid latitude or longitude values.
                showToastAsync(""Invalid latitude or longitude values"");
            }

            // Handle case where no address was found.
            if (addresses == null || addresses.size() == 0) {
                showToastAsync(getString(R.string.activity_loc_no_address_is_found));
            } else {
                Address address = addresses.get(0);
                ArrayList&lt;String&gt; addressFragments = new ArrayList&lt;String&gt;();
                for (int i = 0; i &lt; address.getMaxAddressLineIndex(); i++) {
                    addressFragments.add(address.getAddressLine(i));
                }

                addressInfo = TextUtils.join(System.getProperty(""line.separator""), addressFragments);
                addressSingleLine = LocationActivity.addressInfo.replaceAll(""[\r\n]+"", "" "");
            }
            return null;
        }

    }.execute();
}
</code></pre>

<p><strong>Answer</strong> is to add <code>=</code> to for loop to not retreive an address with zero length on Android 7. You don't need to do this on some versions. Also code on Google referenced Github pages is missing <strong>=</strong>. That's why i was not able to find the reason why.</p>
",5457853,,5457853,,2017-07-26 19:48:56,2017-07-26 19:48:56,Geocoder returns an address with zero length,<android><android-location>,2,0,1,,
Android,45217815,1,45361818,1007,7/27/2017 22:08:45,7,,7/20/2017 14:36:19,,5,1359,"<p>This sample Repository has a method <code>public LiveData&lt;Resource&lt;List&lt;Repo&gt;&gt;&gt; loadRepos(String owner)</code></p>

<p><a href=""https://github.com/googlesamples/android-architecture-components/blob/master/GithubBrowserSample/app/src/main/java/com/android/example/github/repository/RepoRepository.java"" rel=""noreferrer"">https://github.com/googlesamples/android-architecture-components/blob/master/GithubBrowserSample/app/src/main/java/com/android/example/github/repository/RepoRepository.java</a> </p>

<p>My question is why add Android APIs (i.e. <code>android.arch.lifecycle.LiveData</code>) into a data layer? </p>

<p>Isn't it anti-Clean Architecture to mix framework APIs with your data/entities? </p>

<p>Also wouldn't it now  require using Robolectric to unit test <code>RepoRepository</code>?</p>
",5190902,,1000551,,2017-11-10 8:56:26,2017-11-10 8:56:26,Returning LiveData from repository,<android><android-lifecycle><android-architecture-components><android-livedata>,1,1,,,
Android,45358247,1,45420167,1008,7/31/2017 15:43:57,4,,7/27/2017 18:16:37,,5,664,"<p>I am writing an app which records video from the phone and uploads it to a server. Works fine on any device except Galaxy S7. On the Galaxy S7 recording produces a video file with audio only and either no video or one video frame. This is true in the temporary file created on the phone and not just the one uploaded to the server.
I am using the Camera2 API, and I have tried with the front and back cameras.</p>

<p>I have tried with my code, and these two example applications:
<a href=""https://developer.android.com/samples/Camera2Video/project.html"" rel=""noreferrer"">https://developer.android.com/samples/Camera2Video/project.html</a>
<a href=""https://github.com/googlesamples/android-Camera2Video/blob/master/Application/src/main/java/com/example/android/camera2video/Camera2VideoFragment.java"" rel=""noreferrer"">https://github.com/googlesamples/android-Camera2Video/blob/master/Application/src/main/java/com/example/android/camera2video/Camera2VideoFragment.java</a></p>

<p>The video file produced appears to be ok, here is the codec info:
Stream 0
Type: Video
Codec: H264 - MPEG-4 AVC (part 10) (avc1)
Language: English
Resolution: 960x720
Display resolution: 960x720
Frame rate: 29.055091</p>

<p>Stream 1
Type: Audio
Codec: MPEG AAC Audio (mp4a)
Language: English
Channels: Stereo
Sample rate: 16000 Hz</p>
",3561494,,,,,2017-08-06 16:14:37,Android camera2 api galaxy s7,<java><android><video><android-camera2>,1,1,3,,
Android,45407964,1,45563152,1009,8/8/2017 8:27:39,8,,7/31/2017 5:18:55,,14,2331,"<p><strong>What I am trying?</strong></p>

<p>I am trying to take picture with drawable/paint on face but, i am not able to get both on same picture.</p>

<p><a href=""https://i.stack.imgur.com/2c3rI.png"" rel=""noreferrer""><img src=""https://i.stack.imgur.com/2c3rI.png"" alt=""enter image description here""></a></p>

<p><strong>What I have tried?</strong></p>

<p>I have tried using <code>CameraSource.takePicture</code> but i am just getting face without any drawable/paint on it.</p>

<pre><code>mCameraSource.takePicture(shutterCallback, new CameraSource.PictureCallback() {
            @Override
            public void onPictureTaken(byte[] bytes) {
                try {
                    String mainpath = getExternalStorageDirectory() + separator + ""TestXyz"" + separator + ""images"" + separator;
                    File basePath = new File(mainpath);
                    if (!basePath.exists())
                        Log.d(""CAPTURE_BASE_PATH"", basePath.mkdirs() ? ""Success"": ""Failed"");
                    String path = mainpath + ""photo_"" + getPhotoTime() + "".jpg"";
                    File captureFile = new File(path);
                    captureFile.createNewFile();
                    if (!captureFile.exists())
                        Log.d(""CAPTURE_FILE_PATH"", captureFile.createNewFile() ? ""Success"": ""Failed"");
                    FileOutputStream stream = new FileOutputStream(captureFile);
                    stream.write(bytes);
                    stream.flush();
                    stream.close();
                } catch (IOException e) {
                    e.printStackTrace();
                }
            }
        });
</code></pre>

<p>I also tried using : </p>

<pre><code>mPreview.setDrawingCacheEnabled(true);
        Bitmap drawingCache = mPreview.getDrawingCache();
        try {
            String mainpath = getExternalStorageDirectory() + separator + ""TestXyz"" + separator + ""images"" + separator;
            File basePath = new File(mainpath);
            if (!basePath.exists())
                Log.d(""CAPTURE_BASE_PATH"", basePath.mkdirs() ? ""Success"": ""Failed"");
            String path = mainpath + ""photo_"" + getPhotoTime() + "".jpg"";
            File captureFile = new File(path);
            captureFile.createNewFile();
            if (!captureFile.exists())
                Log.d(""CAPTURE_FILE_PATH"", captureFile.createNewFile() ? ""Success"": ""Failed"");
            FileOutputStream stream = new FileOutputStream(captureFile);
            drawingCache.compress(Bitmap.CompressFormat.PNG, 100, stream);
            stream.flush();
            stream.close();
        } catch (IOException e) {
            e.printStackTrace();
        }
</code></pre>

<p>in this case i am only getting what i draw on face. Here, mPreview is the <a href=""https://github.com/googlesamples/android-vision/blob/master/visionSamples/googly-eyes/app/src/main/java/com/google/android/gms/samples/vision/face/googlyeyes/ui/camera/CameraSourcePreview.java"" rel=""noreferrer"">CameraSourcePreview</a>. </p>

<p>Just added capture button and added above code in <a href=""https://github.com/googlesamples/android-vision/tree/master/visionSamples/googly-eyes"" rel=""noreferrer"">this</a> google example.</p>
",2024527,,7663565,,2017-08-04 4:04:36,2018-05-02 3:59:10,Take picture with drawable/paint on face using vision api,<android><google-vision><vision-api>,3,6,4,,
Android,45586828,1,45586963,1010,8/9/2017 9:37:47,0,,8/9/2017 9:32:39,,1,1842,"<p>I have the following dependencies in my <code>build.gradle</code> file</p>

<pre><code> testCompile 'junit:junit:4.12'
testCompile 'org.mockito:mockito-core:1.9.5'
</code></pre>

<p>And my test class <code>EmailValidatorTest</code> has the following code</p>

<pre><code>  @Test
public void emailValidator_simpleEmail_returnsTrue(){

   assertThat(EmailValidator.isValidEmail(""name@ex.com""),is(true))
}
</code></pre>

<p>But i get the error as <code>Cannot resolve symbol assertThat</code>. I get only <code>assert</code> object .I'm currently working on a sample from <code>Android Developers</code> i,e : <code>https://github.com/googlesamples/android-testing/tree/master/unit/BasicSample</code>.</p>
",7785152,,3395198,,2017-08-09 9:57:29,2017-08-09 11:09:52,Cannot resolve symbol assertThat,<android><android-testing>,1,2,1,,
Android,45630453,1,45631324,1011,8/11/2017 9:14:38,0,,8/11/2017 8:30:51,,1,215,"<p>According to the <a href=""https://developer.android.com/work/managed-configurations.html#define-configuration"" rel=""nofollow noreferrer"">restriction entry types</a>, for defining a list of objects we should use the <code>bundle_array</code> type, and an example follows:</p>

<pre class=""lang-xml prettyprint-override""><code>&lt;?xml version=""1.0"" encoding=""utf-8""?&gt;
&lt;restrictions xmlns:android=""http://schemas.android.com/apk/res/android"" &gt;

  &lt;restriction
    android:key=""vpn_configuration_list""
    android:restrictionType=""bundle_array""&gt;
    &lt;restriction
      android:key=""vpn_configuration""
      android:restrictionType=""bundle""&gt;
      &lt;restriction
        android:key=""vpn_server""
        android:restrictionType=""string""/&gt;
      &lt;restriction
        android:key=""vpn_username""
        android:restrictionType=""string""/&gt;
      &lt;restriction
        android:key=""vpn_password""
        android:restrictionType=""string""/&gt;
    &lt;/restriction&gt;
  &lt;/restriction&gt;

&lt;/restrictions&gt;
</code></pre>

<p>In code that would be similar to a <code>List&lt;VpnConfiguration&gt;</code>, and <code>VpnConfiguration</code> would be a pojo with the three fields <code>vpn_server</code>, <code>vpn_username</code>, and <code>vpn_password</code>.</p>

<p>So far so good, now imagine that a simpler data structure is needed, like a <code>String[]</code>. 
According to <a href=""https://github.com/googlesamples/android-testdpc"" rel=""nofollow noreferrer"">Test DPC</a> this should be possible, because there's an option to insert an array of strings:</p>

<p><a href=""https://i.stack.imgur.com/gKD9f.png"" rel=""nofollow noreferrer""><img src=""https://i.stack.imgur.com/gKD9f.png"" alt=""enter image description here""></a></p>

<p>Once you select it, then you are prompted to enter the list of values. However, the documentation does not have a <code>string_array</code> type, it has only the <code>bundle_array</code>.</p>

<p>With <code>bundle_array</code> you can define a <code>List&lt;String&gt;</code> instead of <code>String[]</code>, but that is overkill:</p>

<pre><code>&lt;restriction
    android:key=""mylist""
    android:restrictionType=""bundle_array""&gt;

    &lt;restriction
        android:key=""item""
        android:restrictionType=""bundle""&gt;

        &lt;restriction
            android:key=""name""
            android:restrictionType=""string"" /&gt;

    &lt;/restriction&gt;
&lt;/restriction&gt;
</code></pre>

<p>So, is there a simpler way one can define a string array?</p>
",1271435,,1271435,,2017-08-11 9:35:00,2017-08-11 9:35:45,Managed Configurations: defining an array of strings,<android><android-for-work>,2,0,,,
Android,45531230,1,45645939,520,8/12/2017 2:26:17,6,,8/6/2017 10:50:01,,19,1797,"<p>I'm currently checking out the following guide: <a href=""https://developer.android.com/topic/libraries/architecture/guide.html"" rel=""noreferrer"">https://developer.android.com/topic/libraries/architecture/guide.html</a></p>

<p>The networkBoundResource class: </p>

<pre><code>// ResultType: Type for the Resource data
// RequestType: Type for the API response
public abstract class NetworkBoundResource&lt;ResultType, RequestType&gt; {
    // Called to save the result of the API response into the database
    @WorkerThread
    protected abstract void saveCallResult(@NonNull RequestType item);

    // Called with the data in the database to decide whether it should be
    // fetched from the network.
    @MainThread
    protected abstract boolean shouldFetch(@Nullable ResultType data);

    // Called to get the cached data from the database
    @NonNull @MainThread
    protected abstract LiveData&lt;ResultType&gt; loadFromDb();

    // Called to create the API call.
    @NonNull @MainThread
    protected abstract LiveData&lt;ApiResponse&lt;RequestType&gt;&gt; createCall();

    // Called when the fetch fails. The child class may want to reset components
    // like rate limiter.
    @MainThread
    protected void onFetchFailed() {
    }

    // returns a LiveData that represents the resource
    public final LiveData&lt;Resource&lt;ResultType&gt;&gt; getAsLiveData() {
        return result;
    }
}
</code></pre>

<p>I'm a bit confused here about the use of threads.<br>
Why is @MainThread applied here for networkIO?<br>
Also, for saving into the db, @WorkerThread is applied, whereas @MainThread for retrieving results.  </p>

<p>Is it bad practise to use a worker thread by default for NetworkIO and local db interaction?  </p>

<p>I'm also checking out the following demo (GithubBrowserSample): <a href=""https://github.com/googlesamples/android-architecture-components"" rel=""noreferrer"">https://github.com/googlesamples/android-architecture-components</a><br>
This confuses me from a threading point of view.<br>
The demo uses executors framework, and defines a fixed pool with 3 threads for networkIO, however in the demo only a worker task is defined for one call, i.e. the <code>FetchNextSearchPageTask</code>. All other network requests seem to be executed on the main thread. </p>

<p>Can someone clarify the rationale? </p>
",917467,,,,,2017-08-12 2:26:17,Android Architecture Components network threads,<java><android><multithreading><architecture>,1,0,3,,
Android,45783523,1,45878920,527,8/25/2017 9:57:56,5,,8/20/2017 15:00:13,,6,2067,"<p>I am using the following google sample project: <a href=""https://github.com/googlesamples/android-architecture-components"" rel=""noreferrer"">https://github.com/googlesamples/android-architecture-components</a> as a reference for my new project and having difficulties trying to add a second activity to the project.</p>

<p>Here is the error I get when compiling</p>

<pre class=""lang-none prettyprint-override""><code>Error:(22, 8) error: [dagger.android.AndroidInjector.inject(T)] com.apps.myapp.ui.common.MainActivity cannot be provided without an @Inject constructor or from an @Provides-annotated method. This type supports members injection but cannot be implicitly provided.
com.apps.myapp.ui.common.MainActivity is injected at
com.apps.myapp.ui.common.NavigationController.&lt;init&gt;(mainActivity)
com.apps.myapp.ui.common.NavigationController is injected at
com.apps.myapp.ui.addContacts.AddContactsFragment.navigationController
com.apps.myapp.ui.addContacts.AddContactsFragment is injected at
dagger.android.AndroidInjector.inject(arg0)
A binding with matching key exists in component: com.apps.myapp.di.ActivityModule_ContributeMainActivity.MainActivitySubcomponent
</code></pre>

<p>Here is my code</p>

<p>ActivityModule</p>



<pre class=""lang-java prettyprint-override""><code>@Module
public abstract class ActivityModule {

    @ContributesAndroidInjector(modules = FragmentBuildersModule.class)
    abstract MainActivity contributeMainActivity();

    @ContributesAndroidInjector(modules = FragmentBuildersModule.class)
    abstract ContactActivity contributeContactActivity();
} 
</code></pre>

<p>AppComponent</p>

<pre class=""lang-java prettyprint-override""><code>@Singleton
@Component(modules = {
        AndroidInjectionModule.class,
        AppModule.class,
        ActivityModule.class})
public interface AppComponent {
    @Component.Builder
    interface Builder {
        @BindsInstance Builder application(Application application);
        AppComponent build();
    }
    void inject(App app);
}
</code></pre>

<p>AppInjector</p>

<pre class=""lang-java prettyprint-override""><code>public class AppInjector {
    private AppInjector() {}
    public static void init(App app) {DaggerAppComponent.builder().application(app).build().inject(app);
                    app.registerActivityLifecycleCallbacks(new Application.ActivityLifecycleCallbacks() {
                    @Override
                    public void onActivityCreated(Activity activity, Bundle savedInstanceState) {
                        handleActivity(activity);
                    }

                    @Override
                    public void onActivityStarted(Activity activity) {

                    }

                    @Override
                    public void onActivityResumed(Activity activity) {

                    }

                    @Override
                    public void onActivityPaused(Activity activity) {

                    }

                    @Override
                    public void onActivityStopped(Activity activity) {

                    }

                    @Override
                    public void onActivitySaveInstanceState(Activity activity, Bundle outState) {

                    }

                    @Override
                    public void onActivityDestroyed(Activity activity) {

                    }
                });
    }

    private static void handleActivity(Activity activity) {
        if (activity instanceof HasSupportFragmentInjector) {
            AndroidInjection.inject(activity);
        }
        if (activity instanceof FragmentActivity) {
            ((FragmentActivity) activity).getSupportFragmentManager()
                    .registerFragmentLifecycleCallbacks(
                            new FragmentManager.FragmentLifecycleCallbacks() {
                                @Override
                                public void onFragmentCreated(FragmentManager fm, Fragment f,
                                        Bundle savedInstanceState) {
                                    if (f instanceof Injectable) {
                                        AndroidSupportInjection.inject(f);
                                    }
                                }
                            }, true);
        }
    }
}
</code></pre>

<p>AppModule</p>

<pre class=""lang-java prettyprint-override""><code>@Module(includes = ViewModelModule.class)
class AppModule {
    @Singleton @Provides
    BnderAPIService provideService() {
        return new Retrofit.Builder()
                .baseUrl(""serverurl"")
                .addConverterFactory(GsonConverterFactory.create())
                .addCallAdapterFactory(new LiveDataCallAdapterFactory())
                .build()
                .create(APIService.class);
    }

    @Singleton @Provides
    Db provideDb(Application app) {
        return Room.databaseBuilder(app, Db.class,""Db.db"").build();
    }

    @Singleton @Provides
    UserDao provideUserDao(Db db) {
        return db.userDao();
    }

    @Singleton @Provides
    ContactDao provideContactDao(Db db) {
        return db.contactDao();
    }
}
</code></pre>

<p>FragmentBuildersModule</p>

<pre class=""lang-java prettyprint-override""><code>@Module
public abstract class FragmentBuildersModule {

    @ContributesAndroidInjector
    abstract AddContactsFragment contributeAddUserFragment();

    @ContributesAndroidInjector
    abstract ContactsFragment contributeContactsFragment();

    @ContributesAndroidInjector
    abstract ChalkboardFragment contributeChalkboardFragment();
}
</code></pre>

<p>Injectable</p>

<pre class=""lang-java prettyprint-override""><code>public interface Injectable {
}
</code></pre>

<p>ViewModelKey</p>

<pre class=""lang-java prettyprint-override""><code>@Documented
@Target({ElementType.METHOD})
@Retention(RetentionPolicy.RUNTIME)
@MapKey
@interface ViewModelKey {
    Class&lt;? extends ViewModel&gt; value();
}
</code></pre>

<p>ViewModelModule</p>

<pre class=""lang-java prettyprint-override""><code>@Module
abstract class ViewModelModule {
    @Binds
    @IntoMap
    @ViewModelKey(AddContactsViewModel.class)
    abstract ViewModel bindAddContactsViewModel(AddContactsViewModel addContactsViewModel);

    @Binds
    @IntoMap
    @ViewModelKey(ContactsViewModel.class)
    abstract ViewModel bindContactsViewModel(ContactsViewModel contactsViewModel);

    @Binds
    @IntoMap
    @ViewModelKey(ChalkboardViewModel.class)
    abstract ViewModel bindChalkboardViewModel(ChalkboardViewModel chalkboardViewModel);

    @Binds
    abstract ViewModelProvider.Factory bindViewModelFactory(ViewModelFactory factory);
}
</code></pre>

<p>Application</p>

<pre class=""lang-java prettyprint-override""><code>public class App extends Application implements HasActivityInjector {

    @Inject
    DispatchingAndroidInjector&lt;Activity&gt; dispatchingAndroidInjector;
    @Override
    protected void attachBaseContext(Context base) {
        super.attachBaseContext(base);
        MultiDex.install(this);
    }
    @Override
    public void onCreate() {
        super.onCreate();
        if (BuildConfig.DEBUG) {

        }
        AppInjector.init(this);
    }

    @Override
    public DispatchingAndroidInjector&lt;Activity&gt; activityInjector() {
        return dispatchingAndroidInjector;
    }
}
</code></pre>

<p>NavigationController</p>

<pre class=""lang-java prettyprint-override""><code>public class NavigationController {
    private final int containerId;
    private final FragmentManager fragmentManager;
    @Inject
    public NavigationController(MainActivity mainActivity) {
        this.containerId = R.id.container;
        this.fragmentManager = mainActivity.getSupportFragmentManager();
    }

    public void navigateToUsers() {
        Log.i(""TAG"", ""Navigate to users"");
        String tag = ""users"";
        AddContactsFragment userFragment = AddContactsFragment.create();
        fragmentManager.beginTransaction()
                .replace(containerId, userFragment, tag)
                .addToBackStack(null)
                .commitAllowingStateLoss();
    }

    public void navigateToContacts() {
        Log.i(""TAG"", ""Navigate to contacts"");
        String tag = ""contacts"";
        ContactsFragment contactsFragment = ContactsFragment.create();
        fragmentManager.beginTransaction()
                .add(contactsFragment, tag)
                .addToBackStack(null)
                .commitAllowingStateLoss();
    }

    public void navigateToChalkboard() {
        Log.i(""TAG"", ""Navigate to chalkboard"");
        String tag = ""chalkboard"";
        ChalkboardFragment chalkboardFragment = ChalkboardFragment.create();
        fragmentManager.beginTransaction()
                .add(chalkboardFragment, tag)
                .addToBackStack(null)
                .commitAllowingStateLoss();
    }
}
</code></pre>

<p>MainActivity</p>

<pre class=""lang-java prettyprint-override""><code>public class MainActivity extends AppCompatActivity implements LifecycleRegistryOwner, HasSupportFragmentInjector {
    private final LifecycleRegistry lifecycleRegistry = new LifecycleRegistry(this);
    @Inject
    DispatchingAndroidInjector&lt;Fragment&gt; dispatchingAndroidInjector;
    @Inject
    NavigationController navigationController;
    private Toolbar toolbar;
    @Override
    public LifecycleRegistry getLifecycle() {
        return lifecycleRegistry;
    }

    @Override
    protected void onCreate(@Nullable Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        ActivityMainBinding binding = DataBindingUtil.setContentView(this, R.layout.activity_main);
        binding.setHandler(this);
        binding.setManager(getSupportFragmentManager());
        toolbar = (Toolbar) findViewById(R.id.toolbar);
        setSupportActionBar(toolbar);
    }

    @Override
    public DispatchingAndroidInjector&lt;Fragment&gt; supportFragmentInjector() {
        return dispatchingAndroidInjector;
    }

    static class ViewPagerAdapter extends FragmentPagerAdapter {
        private final List&lt;Fragment&gt; mFragmentList = new ArrayList&lt;&gt;();
        private final List&lt;String&gt; mFragmentTitleList = new ArrayList&lt;&gt;();

        public ViewPagerAdapter(FragmentManager manager) {
            super(manager);
        }

        @Override
        public Fragment getItem(int position) {
            return mFragmentList.get(position);
        }

        @Override
        public int getCount() {
            return mFragmentList.size();
        }

        public void addFragment(Fragment fragment, String title) {
            mFragmentList.add(fragment);
            mFragmentTitleList.add(title);
        }

        @Override
        public CharSequence getPageTitle(int position) {
            return mFragmentTitleList.get(position);
        }
    }

    @BindingAdapter({""handler""})
    public static void bindViewPagerAdapter(final ViewPager view, final MainActivity activity) {
        final ViewPagerAdapter adapter = new ViewPagerAdapter(activity.getSupportFragmentManager());
        adapter.addFragment(new ChalkboardFragment(), ""Chalkboard"");
        adapter.addFragment(new ContactsFragment(), ""Contacts"");
        view.setAdapter(adapter);
    }

    @BindingAdapter({""pager""})
    public static void bindViewPagerTabs(final TabLayout view, final ViewPager pagerView) {
        view.setupWithViewPager(pagerView, true);
    }
}
</code></pre>

<p>ContactActivity</p>

<pre class=""lang-java prettyprint-override""><code>public class ContactActivity extends AppCompatActivity implements LifecycleRegistryOwner, HasSupportFragmentInjector {
    private final LifecycleRegistry lifecycleRegistry = new LifecycleRegistry(this);
    @Inject
    DispatchingAndroidInjector&lt;Fragment&gt; dispatchingAndroidInjector;
    @Override
    public LifecycleRegistry getLifecycle() {
        return lifecycleRegistry;
    }

    @Override
    protected void onCreate(@Nullable Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_contact);
        if (savedInstanceState == null) {

        }
    }

    @Override
    public DispatchingAndroidInjector&lt;Fragment&gt; supportFragmentInjector() {
        return dispatchingAndroidInjector;
    }
}
</code></pre>
",4433653,,182660,,2017-08-22 23:16:39,2018-10-19 2:51:49,MVVM Dagger2 A Binding With Matching Key Exists in Component,<android><mvvm><dagger-2><android-architecture-components><android-mvvm>,1,6,1,,
Android,37483049,1,46002017,1014,9/1/2017 14:06:04,462,,5/27/2016 12:02:45,,6,4907,"<p>I am trying to use PdfRenderer, and the requirement is to have Zoom and scroll available with it, but in Android PdfRenderer do not provide any support for Zoom and scroll, there is only page navigation support available.</p>

<p>But i guess zoom and scroll support can be implemented as PdfRenderer uses bitmap to show the content using imageview.</p>

<blockquote>
  <p>How to implement Zoom and Scroll support with Google PdfRenderer
  sample?</p>
</blockquote>

<p>PS: I am using this PdfRenderer sample provided by Google, <a href=""https://github.com/googlesamples/android-PdfRendererBasic"" rel=""noreferrer"">https://github.com/googlesamples/android-PdfRendererBasic</a></p>
",1791546,,1791546,,2016-07-01 10:24:51,2018-01-09 15:06:40,How to implement PdfRenderer Zoom and Scroll support?,<java><android><pdfrenderer>,3,0,2,,
Android,46111860,1,46111993,1015,9/8/2017 8:27:50,0,,9/8/2017 8:20:06,,23,18544,"<p>So far, I've adjsuted my code to use <code>ContextCompat.startForegroundService(context, intentService);</code> to start my service. This way, it works on android &lt; 26 and on android 26 (Oreo) as well.</p>

<p>I still see a difference, in android oreo I don't see my custom foreground notification (I only see the ""app is running in the background"" notification). Do I have to adjust anything there as well?</p>

<p>My service looks like this:</p>

<pre><code>public class BaseOverlayService extends Service {
    @Override
    public void onCreate() {
        super.onCreate();
        moveToForeground();
    }

    private void moveToForeground() {
        Notification notification = ...;
        super.startForeground(NOTIFICATION_ID, notification);
    }
}
</code></pre>

<p><strong>Official example</strong></p>

<p>This example (<a href=""https://github.com/googlesamples/android-play-location/blob/master/LocationUpdatesForegroundService/app/src/main/java/com/google/android/gms/location/sample/locationupdatesforegroundservice/LocationUpdatesService.java#L200"" rel=""noreferrer"">https://github.com/googlesamples/android-play-location/blob/master/LocationUpdatesForegroundService/app/src/main/java/com/google/android/gms/location/sample/locationupdatesforegroundservice/LocationUpdatesService.java#L200</a>) shows as comment, that I should use following, but <code>startServiceInForeground</code> does not exist...</p>

<pre><code>if (Build.VERSION.SDK_INT == Build.VERSION_CODES.O) {
    NotificationManager mNotificationManager = ((NotificationManager) getSystemService(NOTIFICATION_SERVICE));
    mNotificationManager.startServiceInForeground(new Intent(this, BaseOverlayService.class), NOTIFICATION_ID, notification);
} else {
    startForeground(NOTIFICATION_ID, notification);
}
</code></pre>

<p><strong>Edit</strong></p>

<p>My notification is created like this, which is working on thousands of android devices with API &lt; 26 until now:</p>

<pre><code>protected Notification foregroundNotification(int notificationId)
{
    boolean paused = MainApp.getPrefs().sidebarServicePaused();
    NotificationCompat.Builder builder = new NotificationCompat.Builder(this);
    builder.setSmallIcon(R.drawable.icon_not);
    builder.setContentIntent(notificationIntent());
    builder.setLargeIcon(BitmapFactory.decodeResource(getResources(), R.drawable.icon));
    builder.setContentTitle(getString(R.string.derived_app_name));
    builder.setContentText(getString(checkStatus() ? (paused ? R.string.service_notification_text_paused : R.string.service_notification_text_running) : R.string.service_notification_text_preparing));
    builder.setColor(Color.parseColor(""#25baa2""));

    if (MainApp.getPrefs().hideNotificationIcon())
        builder.setPriority(NotificationCompat.PRIORITY_MIN);
    else
        builder.setPriority(NotificationCompat.PRIORITY_MAX);

    if (paused)
        builder.addAction(R.drawable.ic_play_arrow_black_24dp, getString(R.string.resume), resumeIntent(this));
    else
        builder.addAction(R.drawable.ic_pause_black_24dp, getString(R.string.pause), pauseIntent(this));

    return builder.build();
}
</code></pre>
",1439522,,7679573,,2017-09-08 8:52:00,2019-01-05 15:58:05,Oreo - Foreground service does not show foreground notification,<android><android-notifications><android-8.0-oreo><foreground-service>,2,0,9,,
Android,45982524,1,46148860,1016,9/11/2017 5:40:05,11,,8/31/2017 13:22:01,,6,363,"<p>I have tried Google's <a href=""https://github.com/googlesamples/android-Camera2Basic"" rel=""nofollow noreferrer"">android-Camera2Basic</a> sample app. For front camera get works, I have changed some code in <a href=""https://github.com/googlesamples/android-Camera2Basic/blob/master/Application/src/main/java/com/example/android/camera2basic/Camera2BasicFragment.java"" rel=""nofollow noreferrer"">Camera2BasicFragment</a>. The changes are as follows.</p>

<p>To switch to front camera I have changed <code>mCameraId = cameraId;</code> to <code>mCameraId = ""1"";</code> in <code>setUpCameraOutputs(int width, int height)</code> method. </p>

<p>And added on if condition at end of <code>setUpCameraOutputs(int width, int height)</code> like,</p>

<pre><code>if(mCameraId == null)
    mCameraId = cameraId;
</code></pre>

<p>This change shows front camera perfectly but doesn't pick the photo. So I replaced</p>

<pre><code>mCaptureSession.capture(mPreviewRequestBuilder.build(), mCaptureCallback,
                        mBackgroundHandler);
</code></pre>

<p>to </p>

<pre><code>captureStillPicture();
</code></pre>

<p>in <code>lockFocus()</code>. Now front camera picks the photo, but it looks upside down. </p>

<p>For ex: </p>

<p><a href=""https://i.stack.imgur.com/xKHzb.jpg"" rel=""nofollow noreferrer""><img src=""https://i.stack.imgur.com/xKHzb.jpg"" alt=""sample image""></a></p>

<p>I don't know what to do now.</p>

<p>My requirement is to capture photo in both cameras using camera2 api. So if I did anything wrong please correct me. </p>

<p>And in some devices this app takes more than one pic on single click.</p>
",1573279,,472495,,2018-07-29 12:23:27,2018-10-17 17:41:49,Camera2Basic app front camera takes pic upside down,<android><camera><android-camera2>,3,0,,,
Android,41615189,1,46238934,1017,9/15/2017 11:52:05,246,,1/12/2017 14:05:37,,4,1827,"<p>I try to fix call recording in my app since lolipop update in my Galaxy S5. As a base I am using google sample project from here: <a href=""https://github.com/googlesamples/android-ndk/tree/master/audio-echo/app/src/main/cpp"" rel=""nofollow noreferrer"">Sample</a>. </p>

<p>And this is the main part of the code:</p>

<h1>AudioRecorder::AudioRecorder(SampleFormat *sampleFormat, SLEngineItf slEngine) :freeQueue_(nullptr), recQueue_(nullptr), devShadowQueue_(nullptr), callback_(nullptr)</h1>

<pre><code>SLresult result;
sampleInfo_ = *sampleFormat;
SLAndroidDataFormat_PCM_EX format_pcm;
ConvertToSLSampleFormat(&amp;format_pcm, &amp;sampleInfo_);

gFp = fopen(""/storage/emulated/0/file.pcm"", ""w"");

// configure audio source
SLDataLocator_IODevice loc_dev = {SL_DATALOCATOR_IODEVICE, SL_IODEVICE_AUDIOINPUT,
                                  SL_DEFAULTDEVICEID_AUDIOINPUT, NULL};
SLDataSource audioSrc = {&amp;loc_dev, NULL};


// configure audio sink
SLDataLocator_AndroidSimpleBufferQueue loc_bq = {
        SL_DATALOCATOR_ANDROIDSIMPLEBUFFERQUEUE,
        DEVICE_SHADOW_BUFFER_QUEUE_LEN};

SLDataSink audioSnk = {&amp;loc_bq, &amp;format_pcm};

// create audio recorder
// (requires the RECORD_AUDIO permission)
const SLInterfaceID id[2] = {SL_IID_ANDROIDSIMPLEBUFFERQUEUE,
                             SL_IID_ANDROIDCONFIGURATION};

const SLboolean req[2] = {SL_BOOLEAN_FALSE, SL_BOOLEAN_FALSE};

result = (*slEngine)-&gt;CreateAudioRecorder(slEngine,
                                          &amp;recObjectItf_,
                                          &amp;audioSrc,
                                          &amp;audioSnk,
                                          2,
                                          id, req);
SLASSERT(result);

// Configure the voice recognition preset which has no
// signal processing for lower latency.
SLAndroidConfigurationItf inputConfig;
result = (*recObjectItf_)-&gt;GetInterface(recObjectItf_,
                                        SL_IID_ANDROIDCONFIGURATION,
                                        &amp;inputConfig);

SLuint32 presetValue = SL_ANDROID_RECORDING_PRESET_VOICE_COMMUNICATION;
result = (*inputConfig)-&gt;SetConfiguration(inputConfig,
                                          SL_ANDROID_KEY_RECORDING_PRESET,
                                          &amp;presetValue,
                                          sizeof(SLint32));
SLASSERT(result);


result = (*recObjectItf_)-&gt;Realize(recObjectItf_, SL_BOOLEAN_FALSE);
SLASSERT(result);

result = (*recObjectItf_)-&gt;GetInterface(recObjectItf_, SL_IID_RECORD, &amp;recItf_);
SLASSERT(result);

result = (*recObjectItf_)-&gt;GetInterface(recObjectItf_, SL_IID_ANDROIDSIMPLEBUFFERQUEUE,
                                        &amp;recBufQueueItf_);
SLASSERT(result);

result = (*recBufQueueItf_)-&gt;RegisterCallback(recBufQueueItf_, bqRecorderCallback, this);
SLASSERT(result);

devShadowQueue_ = new AudioQueue(DEVICE_SHADOW_BUFFER_QUEUE_LEN);
assert(devShadowQueue_);
</code></pre>

<p>And here is my problem this code do not record other side of the call, in output file I can only hear voice from microphone. I tried changing parameters but with same result. Anyone know what I am doing wrong?</p>
",7409905,,,,,2017-10-18 8:38:01,Call recording with OpenSL,<android><android-ndk><audio-recording><voice-recording>,2,5,6,,
Android,46278357,1,46280749,537,9/18/2017 13:37:52,0,,9/18/2017 11:38:11,,17,1782,"<p>One of the most up to date samples covering Android Architecture Components is <a href=""https://github.com/googlesamples/android-architecture-components/tree/master/GithubBrowserSample"" rel=""nofollow noreferrer"">GithubBrowserSample</a> provided by Google. I reviewed the code and a few questions arose:</p>

<ol>
<li><p>I have noticed that <a href=""https://github.com/googlesamples/android-architecture-components/blob/master/GithubBrowserSample/app/src/main/java/com/android/example/github/di/ViewModelModule.kt"" rel=""nofollow noreferrer"">ViewModelModule</a> is included in <a href=""https://github.com/googlesamples/android-architecture-components/blob/master/GithubBrowserSample/app/src/main/java/com/android/example/github/di/AppModule.kt"" rel=""nofollow noreferrer"">AppModule</a>. It means that all the viewmodels are added to the DI graph. Why that is done in that way instead of having separate <code>Module</code> for each Activity/Fragment that would provide only needed <code>ViewModel</code> for specific Activity/Fragment?</p></li>
<li><p>In this specific example, where viewmodels are instantiated using <a href=""https://github.com/googlesamples/android-architecture-components/blob/master/GithubBrowserSample/app/src/main/java/com/android/example/github/viewmodel/GithubViewModelFactory.kt"" rel=""nofollow noreferrer"">GithubViewModelFactory</a> is there any way to pass a parameter to the specific <code>ViewModel</code>? Or the better solution would be to create a setter in <code>ViewModel</code> and set needed param via setter?</p></li>
</ol>
",4260554,,2489403,,2018-04-29 14:05:37,2018-04-29 14:05:37,"Understanding Android Architecture Components example GithubBrowserSample: ViewModelModule, ViewModel parameters",<android><dagger-2><android-architecture-components><dagger.android><android-viewmodel>,1,1,5,,
Android,46367880,1,46367938,1019,9/22/2017 15:11:11,0,,9/22/2017 15:08:13,,4,11434,"<p>There is this repo :</p>

<p><a href=""https://github.com/googlesamples/android-architecture"" rel=""nofollow noreferrer"">https://github.com/googlesamples/android-architecture</a></p>

<p>And there is this branch :</p>

<p><a href=""https://github.com/googlesamples/android-architecture/tree/todo-mvvm-databinding/"" rel=""nofollow noreferrer"">https://github.com/googlesamples/android-architecture/tree/todo-mvvm-databinding/</a></p>

<p>I have clone the project but i have only the master. What can i do to get this branch ?</p>
",2611161,,,,,2017-09-22 15:12:10,How to pull a specific branch from Github,<git><github><branch>,1,0,1,,
Android,46435424,1,46452324,1020,9/27/2017 15:57:31,1,,9/26/2017 20:39:28,,3,1813,"<p>I'm trying to use dagger 2 on my Android application to inject the new ViewModel from arch android library. </p>

<p>From what I see on this sample <a href=""https://github.com/googlesamples/android-architecture-components/tree/e33782ba54ebe87f7e21e03542230695bc893818/GithubBrowserSample"" rel=""nofollow noreferrer"">https://github.com/googlesamples/android-architecture-components/tree/e33782ba54ebe87f7e21e03542230695bc893818/GithubBrowserSample</a> I need to use this: </p>

<pre><code>@MustBeDocumented
@Target(AnnotationTarget.FUNCTION, AnnotationTarget.CONSTRUCTOR, AnnotationTarget.PROPERTY_GETTER, AnnotationTarget.PROPERTY_SETTER)
@Retention(AnnotationRetention.RUNTIME)
@MapKey
internal annotation class ViewModelKey(val value: KClass&lt;out ViewModel&gt;)

@Module
abstract class ViewModelModule {
    @Binds
    @IntoMap
    @ViewModelKey(LoginViewModel::class)
    internal abstract fun bindLoginViewModel(viewModel: LoginViewModel): LoginViewModel

    @Binds
    @IntoMap
    @ViewModelKey(MainMenuViewModel::class)
    internal abstract fun bindSearchViewModel(viewModel: MainMenuViewModel): MainMenuViewModel

    @Binds
    internal abstract fun bindViewModelFactory(factory: ViewModelFactory): ViewModelProvider.Factory
}

@ApplicationScope
@Component(modules = arrayOf(ApplicationModule::class, NetworkModule::class, ViewModelModule::class))
interface ApplicationComponent {
    fun plusActivityComponent(activityModule: ActivityModule): ActivityComponent
    fun inject(application: LISAApplication)

}
</code></pre>

<p>And my factory is: </p>

<pre><code>@ApplicationScope
class ViewModelFactory @Inject constructor(private val creators: Map&lt;Class&lt;out ViewModel&gt;, @JvmSuppressWildcards Provider&lt;ViewModel&gt;&gt;) : ViewModelProvider.Factory {

    @Suppress(""UNCHECKED_CAST"")
    override fun &lt;T : ViewModel&gt; create(modelClass: Class&lt;T&gt;): T {
        var creator: Provider&lt;out ViewModel&gt;? = creators[modelClass]
        if (creator == null) {
            for ((key, value) in creators) {
                if (modelClass.isAssignableFrom(key)) {
                    creator = value
                    break
                }
            }
        }
        if (creator == null) {
            throw IllegalArgumentException(""unknown model class "" + modelClass)
        }
        try {
            return creator.get() as T
        } catch (e: Exception) {
            throw RuntimeException(e)
        }

    }
}
</code></pre>

<p>But the project doesn't compile :( I have this error (Map&lt;...> cannot be provided without an @Provides-annotated method.): </p>

<pre><code>Using Kotlin incremental compilation
:mobile:transformDataBindingWithDataBindingMergeArtifactsForDebug UP-TO-DATE
:mobile:kaptDebugKotlin
e: /Users/jaumard/LISAProjects/LISA/mobile/build/tmp/kapt3/stubs/debug/com/mylisabox/lisa/dagger/components/ApplicationComponent.java:6: error: [com.mylisabox.lisa.dagger.components.ActivityComponent.inject(com.mylisabox.lisa.common.BaseActivity)] java.util.Map&lt;java.lang.Class&lt;? extends android.arch.lifecycle.ViewModel&gt;,javax.inject.Provider&lt;android.arch.lifecycle.ViewModel&gt;&gt; cannot be provided without an @Provides-annotated method.
e: 

e: public abstract interface ApplicationComponent {
e:                 ^
e:       java.util.Map&lt;java.lang.Class&lt;? extends android.arch.lifecycle.ViewModel&gt;,javax.inject.Provider&lt;android.arch.lifecycle.ViewModel&gt;&gt; is injected at
e:           com.mylisabox.lisa.dagger.ViewModelFactory.&lt;init&gt;(creators)
e:       com.mylisabox.lisa.dagger.ViewModelFactory is injected at
e:           com.mylisabox.lisa.common.BaseActivity.factory
e:       com.mylisabox.lisa.common.BaseActivity is injected at
e:           com.mylisabox.lisa.dagger.components.ActivityComponent.inject(activity)
e: /Users/jaumard/LISAProjects/LISA/mobile/build/tmp/kapt3/stubs/debug/com/mylisabox/lisa/dagger/components/ActivityComponent.java:4: error: com.mylisabox.lisa.dagger.components.ActivityComponent scoped with @com.mylisabox.network.dagger.annotations.ActivityScope may not reference bindings with different scopes:
e: 
</code></pre>

<p>Any idea on how fix this ? </p>
",541867,,541867,,2017-09-28 8:29:55,2017-09-28 8:29:55,Kotlin dagger 2 Android ViewModel injection error,<android><kotlin><viewmodel><dagger-2><kotlin-interop>,1,4,3,,
Android,45099484,1,46485018,1021,9/29/2017 8:41:58,77,,7/14/2017 9:31:34,,6,761,"<p>I'm trying to implement an MDM client app for Android, known in the Android For Work world as a Device Policy Controller or DPC. Google's documentation for building a DPC is <a href=""https://developers.google.com/android/work/build-dpc"" rel=""noreferrer"">here</a>.</p>

<p>The documented process <a href=""https://developers.google.com/android/work/build-dpc#download_the_library"" rel=""noreferrer"">begins</a> with downloading the DPC Support Library. Unfortunately, the <a href=""https://connect.googleforwork.com/community/developers/android/emm/technical-integration/profile-owner-and-device-owner-guidance"" rel=""noreferrer"">download link they provide</a> (to the ""EMM Community's Technical Integration"" section) doesn't work: you're prompted to log in with a Google account, but after doing so I see this:</p>

<blockquote>
  <p><strong>Weâ€™re sorry...</strong></p>
  
  <p>...but it looks like you donâ€™t have access to this place or content. If you think you should have access to this space, try logging out and back in again using your account menu accessible by clicking your avatar in the top right corner of this page. If this issue persists, please notify your Support Representative and we will troubleshoot further.</p>
</blockquote>

<p>Others have had the same problem: there's an <a href=""https://connect.googleforwork.com/thread/19771"" rel=""noreferrer"">issue ticket raised here</a> which is only 2 months old, has no answer but for some reason has been marked <em>Assumed Answered</em> and then ignored.</p>

<p>The <a href=""https://developers.google.com/android/work/prov-devices#final_setup_steps_for_all_modes_of_operation"" rel=""noreferrer"">steps documented here</a> make it very clear that the DPC Support Library is a required part of the process, and don't describe any alternatives to using it.</p>

<p>So, <strong>how do I get hold of the DPC Support Library?</strong> Can it be obtained anywhere else? Or failing that, how do I find out what it does so I can reproduce those steps manually in my own code?</p>

<hr/>

<p>Some steps I've already tried:</p>

<ol>
<li>I have successfully <a href=""https://connect.googleforwork.com/docs/DOC-13121"" rel=""noreferrer"">registered for the EMM Community</a> and have access to the <a href=""https://developers.google.com/android/work/play/emm-api/v1/"" rel=""noreferrer"">EMM API</a>. (i.e. I get a valid response now from <a href=""https://developers.google.com/android/work/play/emm-api/v1/enterprises/generateSignupUrl"" rel=""noreferrer"">Enterprises.generateSignupUrl</a>, and no longer the dreaded ""<a href=""https://stackoverflow.com/questions/41094734/google-emm-apis-return-the-caller-is-not-registered-as-an-mdm"">The caller is not registered as an MDM</a>"".) That in itself was a long and frustratingly opaque process.</li>
<li>I have built and run the <a href=""https://github.com/googlesamples/android-testdpc"" rel=""noreferrer"">googlesamples/android-testdpc</a> app and looked through the source code. Unfortunately this is a client-only demo: it doesn't communicate with an EMM server and doesn't use the DPC Support Library. Specifically, it doesn't obtain an authorisation token in order to provision a work profile on the device, as documented <a href=""https://developers.google.com/android/work/prov-devices#final_setup_steps_for_all_modes_of_operation"" rel=""noreferrer"">here</a>.</li>
<li>I have played with the <a href=""https://enterprise.google.com/android/experience/overview"" rel=""noreferrer"">public EMM demo system</a> and its <a href=""https://play.google.com/store/apps/details?id=com.google.android.apps.work.clouddpc"" rel=""noreferrer"">DPC app</a>. That seems to be doing things properly, but as it's closed-source I can't look at the code for either client or server.</li>
</ol>
",440921,,440921,,2017-07-14 10:03:00,2017-10-12 11:12:05,How can I get hold of (or bypass) the Android DPC Support Library?,<android><mdm><android-for-work>,2,5,4,,
Android,47002893,1,47003431,1022,10/29/2017 17:57:51,0,,10/29/2017 17:02:20,,1,56,"<p>Whenever I clone a Google sample repository from Github, the <strong>Android project sidebar is completely empty</strong> (No app folder and an empty Gradle folder). I usually encounter this problem when Android Studio asks me to provide the Gradle Home path when importing. I would highly appreaciate any help regarding solving this problem.</p>

<p><a href=""https://i.stack.imgur.com/Cfe8g.png"" rel=""nofollow noreferrer"">Android studio 3.0 project with an empty Android folder view</a></p>

<p>E.g. cloning <a href=""https://github.com/googlesamples/android-vision"" rel=""nofollow noreferrer"">Android vision API Samples</a></p>
",8852373,,,,,2017-10-29 17:57:51,Empty Android folder when cloning Google samples,<android><android-studio>,1,0,,,
Android,47078005,1,47079964,1023,11/2/2017 16:16:40,0,,11/2/2017 14:40:56,,13,2800,"<p>I'm working on UI tests with Espresso for Android, and following the Google's <a href=""https://github.com/googlesamples/android-testing/blob/master/ui/espresso/IdlingResourceSample/app/src/androidTest/java/com/example/android/testing/espresso/IdlingResourceSample/ChangeTextBehaviorTest.java"" rel=""noreferrer"">code sample</a> it is used, even though it's deprecated. So my questions are:</p>

<ul>
<li>why is it deprecated?</li>
<li>what replaces it?</li>
</ul>
",1769975,,1769975,,2017-11-03 8:45:31,2018-07-03 19:57:40,"Why is Espresso's registerIdlingResources deprecated, and what replaces it?",<java><android><android-espresso>,2,0,3,,
Android,47148619,1,47161584,1024,11/7/2017 15:27:26,0,,11/7/2017 1:36:47,,1,157,"<p>I'm super excited that Realm now supports RxJava 2 which introduces the asFlowable functionality so thank you to anyone that contributed to this.</p>

<p>The problem I'm facing is how to best manage the life cycle of realm instances in my local data source singleton class. My local data source is similar to the Android architecture sample <a href=""https://github.com/googlesamples/android-architecture/blob/todo-mvp-rxjava/todoapp/app/src/main/java/com/example/android/architecture/blueprints/todoapp/data/source/local/TasksLocalDataSource.java"" rel=""nofollow noreferrer"">here</a>. In the Realm examples for RxJava, they instantiate a realm instance in the onCreate and close it in the onDestroy of the activity. However, since my local data source is a singleton, I won't have these lifecycle events to instantiate and close the instance.</p>

<p>The question is: should I instantiate a realm instance every time the singleton is created and close it only when the singleton is destroyed or should I instantiate a realm instance in the activity/fragment, inject it into the local data source, and then close it in the activity/fragment?
Any other suggestions are welcome. Thanks!</p>
",3308320,,,,,2017-11-07 15:27:26,How do you structure a local data source using RxJava and Realm?,<android><realm><mvp><rx-java2>,2,0,1,,
Android,47323883,1,47326971,1025,11/16/2017 10:16:12,0,,11/16/2017 7:27:04,,11,1537,"<p>I have been exploring <a href=""https://developer.android.com/training/data-storage/room/index.html"" rel=""noreferrer"">Room</a> database object mapping library and I figured something weird.</p>

<p>An entity data model cannot have immutable properties, as <a href=""https://stackoverflow.com/a/44213583/4620609"">this</a> answer suggests.</p>

<p>But I checked out <a href=""https://github.com/googlesamples/android-architecture-components/tree/master/BasicRxJavaSampleKotlin"" rel=""noreferrer"">google's persistent example with kotlin</a>, <code>Room</code> works with immutable properties too. Please check <a href=""https://github.com/googlesamples/android-architecture-components/blob/master/BasicRxJavaSampleKotlin/app/src/main/java/com/example/android/observability/persistence/User.kt"" rel=""noreferrer"">this</a> data class from the example.</p>

<p>What could be the reason for this behavior?</p>

<p>This could be a good feature if we could create immutable values (<code>val</code> properties), as this restrict programmers from changing unique identifiers such as ids after an object has been created.</p>
",4620609,,4620609,,2017-11-16 8:37:26,2018-01-16 17:47:04,Why Room entities don't work with immutable properties in Android,<android><sqlite><kotlin><immutability><android-room>,2,2,2,,
Android,37747466,1,47359090,1026,11/17/2017 20:53:05,525,,6/10/2016 11:45:37,,4,570,"<p>I'm looking over the <a href=""https://github.com/googlesamples/android-BluetoothChat"" rel=""nofollow"">Bluetooth Chat sample application</a> from Google and they write to <code>BluetoothSocket</code>'s <code>OutputStream</code> on the UI thread. Is that correct? Normally, streams block until the data is sent out.</p>

<p>In my tests (with that app), as long as the devices were close enough, the communication was prompt. When they got farther, the connection was dropped. Is this correct way to send data over Bluetooth? My message size will by 100-500 bytes.</p>
",952135,,,,,2019-03-03 11:32:54,Writing data to BluetoothSocket on the UI thread,<android><android-bluetooth>,3,4,,,
Android,45203918,1,47489640,1027,11/25/2017 19:13:45,128,,7/20/2017 2:09:13,,2,659,"<p>I'm new to Android NDK, and I was reading <a href=""https://developer.android.com/training/articles/perf-jni.html#native_libraries"" rel=""nofollow noreferrer"">these tips</a> on the Android Developer site. It recommends using <code>JNI_OnLoad</code> to register your native methods, but doesn't give much detail on how to do that. </p>

<p>Searching <a href=""https://github.com/googlesamples/android-ndk"" rel=""nofollow noreferrer"">Google's NDK sample repo on GitHub</a> only turned up one usage of <code>JNI_OnLoad</code>, and it doesn't call <code>RegisterNatives</code>. Searching the web didn't turn up much on how to do this either. </p>

<p>I feel like I'm missing something. This is supposed to be the correct way to do it, according to Google, but their own examples use the ""discovery"" method naming approach instead. </p>

<p>Is this perhaps an old way of doing it, that's not really done anymore?</p>
",1475706,,1475706,,2017-11-28 17:02:36,2017-12-19 23:51:01,Is JNI_OnLoad normally used for Android NDK?,<android><android-ndk><java-native-interface>,1,0,,,
Android,47451783,1,47711258,1028,12/8/2017 9:27:36,15,,11/23/2017 9:24:20,,1,293,"<p>I checkout <a href=""https://github.com/googlesamples/android-Camera2Basic"" rel=""nofollow noreferrer"">Camera2Basic</a> (google sample)</p>

<p>and I just changed this method in the class <a href=""https://github.com/googlesamples/android-Camera2Basic/blob/master/Application/src/main/java/com/example/android/camera2basic/Camera2BasicFragment.java"" rel=""nofollow noreferrer"">Camera2BasicFragment</a> in order to take a photo with front camera :</p>

<pre><code>  private void setUpCameraOutputs(int width, int height) {
        Activity activity = getActivity();
        CameraManager manager = (CameraManager) activity.getSystemService(Context.CAMERA_SERVICE);
        try {
//            for (String cameraId : manager.getCameraIdList()) {

            mCameraId = ""1"";
                CameraCharacteristics characteristics
                        = manager.getCameraCharacteristics(mCameraId);

                // We don't use a front facing camera in this sample.
                Integer facing = characteristics.get(CameraCharacteristics.LENS_FACING);
//                if (facing != null &amp;&amp; facing == CameraCharacteristics.LENS_FACING_FRONT) {
//                    continue;
//                }

                StreamConfigurationMap map = characteristics.get(
                        CameraCharacteristics.SCALER_STREAM_CONFIGURATION_MAP);
//                if (map == null) {
//                    continue;
//                }

                // For still image captures, we use the largest available size.
                Size largest = Collections.max(
                        Arrays.asList(map.getOutputSizes(ImageFormat.JPEG)),
                        new CompareSizesByArea());
                mImageReader = ImageReader.newInstance(largest.getWidth(), largest.getHeight(),
                        ImageFormat.JPEG, /*maxImages*/2);
                mImageReader.setOnImageAvailableListener(
                        mOnImageAvailableListener, mBackgroundHandler);

                // Find out if we need to swap dimension to get the preview size relative to sensor
                // coordinate.
                int displayRotation = activity.getWindowManager().getDefaultDisplay().getRotation();
                //noinspection ConstantConditions
                mSensorOrientation = characteristics.get(CameraCharacteristics.SENSOR_ORIENTATION);
                boolean swappedDimensions = false;
                switch (displayRotation) {
                    case Surface.ROTATION_0:
                    case Surface.ROTATION_180:
                        if (mSensorOrientation == 90 || mSensorOrientation == 270) {
                            swappedDimensions = true;
                        }
                        break;
                    case Surface.ROTATION_90:
                    case Surface.ROTATION_270:
                        if (mSensorOrientation == 0 || mSensorOrientation == 180) {
                            swappedDimensions = true;
                        }
                        break;
                    default:
                        Log.e(TAG, ""Display rotation is invalid: "" + displayRotation);
                }

                Point displaySize = new Point();
                activity.getWindowManager().getDefaultDisplay().getSize(displaySize);
                int rotatedPreviewWidth = width;
                int rotatedPreviewHeight = height;
                int maxPreviewWidth = displaySize.x;
                int maxPreviewHeight = displaySize.y;

                if (swappedDimensions) {
                    rotatedPreviewWidth = height;
                    rotatedPreviewHeight = width;
                    maxPreviewWidth = displaySize.y;
                    maxPreviewHeight = displaySize.x;
                }

                if (maxPreviewWidth &gt; MAX_PREVIEW_WIDTH) {
                    maxPreviewWidth = MAX_PREVIEW_WIDTH;
                }

                if (maxPreviewHeight &gt; MAX_PREVIEW_HEIGHT) {
                    maxPreviewHeight = MAX_PREVIEW_HEIGHT;
                }

                // Danger, W.R.! Attempting to use too large a preview size could  exceed the camera
                // bus' bandwidth limitation, resulting in gorgeous previews but the storage of
                // garbage capture data.
                mPreviewSize = chooseOptimalSize(map.getOutputSizes(SurfaceTexture.class),
                        rotatedPreviewWidth, rotatedPreviewHeight, maxPreviewWidth,
                        maxPreviewHeight, largest);

                // We fit the aspect ratio of TextureView to the size of preview we picked.
                int orientation = getResources().getConfiguration().orientation;
                if (orientation == Configuration.ORIENTATION_LANDSCAPE) {
                    mTextureView.setAspectRatio(
                            mPreviewSize.getWidth(), mPreviewSize.getHeight());
                } else {
                    mTextureView.setAspectRatio(
                            mPreviewSize.getHeight(), mPreviewSize.getWidth());
                }

                // Check if the flash is supported.
                Boolean available = characteristics.get(CameraCharacteristics.FLASH_INFO_AVAILABLE);
                mFlashSupported = available == null ? false : available;

//            }
        } catch (CameraAccessException e) {
            e.printStackTrace();
        } catch (NullPointerException e) {
            // Currently an NPE is thrown when the Camera2API is used but not supported on the
            // device this code runs.
            ErrorDialog.newInstance(getString(R.string.camera_error))
                    .show(getChildFragmentManager(), FRAGMENT_DIALOG);
        }
    }
</code></pre>

<p>The front preview is displayed but I could not take photo. </p>

<p><a href=""https://i.stack.imgur.com/fwJhA.jpg"" rel=""nofollow noreferrer""><img src=""https://i.stack.imgur.com/fwJhA.jpg"" alt=""enter image description here""></a></p>

<p>And each time I trigger the button Picture, this log is displayed : </p>

<blockquote>
  <p>11-23 10:08:44.774 15690-16475/com.example.android.camera2basic
  W/LegacyRequestMapper: convertRequestToMetadata - Ignoring
  android.lens.focusDistance false, only 0.0f is supported 11-23
  10:08:44.829 15690-16475/com.example.android.camera2basic
  W/LegacyRequestMapper: convertRequestMetadata - control.awbRegions
  setting is not supported, ignoring value 11-23 10:08:44.832
  15690-16475/com.example.android.camera2basic W/LegacyRequestMapper:
  Only received metering rectangles with weight 0. 11-23 10:08:44.833
  15690-16475/com.example.android.camera2basic W/LegacyMetadataMapper:
  convertAfModeToLegacy - ignoring unsupported mode 4, defaulting to
  fixed</p>
</blockquote>

<p>Does anyone has an idea how to fix this problem ? </p>
",4792517,,4792517,,2017-11-23 11:03:03,2018-02-16 14:58:42,Could not take photo with front camera 2,<android><android-camera><android-camera2><front-camera>,1,0,,,
Android,47868684,1,47873189,1029,12/18/2017 17:06:54,0,,12/18/2017 12:37:21,,2,903,"<p>I've seen good examples of MVP architecture (<a href=""https://github.com/android10/Android-CleanArchitecture"" rel=""nofollow noreferrer"">here</a> and <a href=""https://github.com/googlesamples/android-architecture/tree/todo-mvp-clean/todoapp"" rel=""nofollow noreferrer"">here</a>). Both present only simple interactors, but I wonder how to deal with more complex use case, consisting of steps, which are repeated in other use cases.</p>

<p>For example, my API requires token to authenticate any call. I've created an interactor to get that token (<code>GetToken</code>). I want to get user's last login date (<code>GetLastLoginDate</code>) and then fetch a list of changes that occured between that date and now (<code>GetVersionChanges</code>).</p>

<p>Where those interactor should be chained? I want to keep them separate, because some of them are reused in other parts of the code. I've came up with two solutions.</p>

<ol>
<li><p>Presenter should chain all interactors. This solution works as long the use case is not complex and doesn't have many preconditions. It seems to me it's not the right place, because it burdens presenter with another responsibility.</p></li>
<li><p>Interactor can use many repositories (no clean architecture rules are broken then). Why not use <code>TokenRepository</code> in other interactors? Because getting token is much more complex than just reaching to repository. Repeating the steps in other interactor does not reuse already existing code.</p></li>
</ol>

<p>Both solutions have their flaws and are against basic principles (DRY, single responsibility principle).</p>
",7123686,,7123686,,2017-12-18 14:05:19,2019-04-12 16:21:44,"In clean MVP, who should handle combining interactors?",<android><mvp><use-case><clean-architecture>,2,0,1,,
Android,47866673,1,47881098,608,12/19/2017 6:21:46,1,,12/18/2017 10:40:23,,1,1912,"<p>i'm studying the <a href=""https://developer.android.com/topic/libraries/architecture/index.html"" rel=""nofollow noreferrer"">Android Architecture Components</a> and i'm a little bit confused. In the <a href=""https://github.com/googlesamples/android-architecture-components/tree/master/BasicSample"" rel=""nofollow noreferrer"">sample</a> they use a repository and state that changes within the datasource of the repository are observed by the ViewModels. I don't understand how the changes within the datasource are pushed to the ViewModels, as i cannot see any code within the ViewModels that subscribes them to the repository. Analogously, the fragments observe the ViewModel's LiveData, but they actually subscribe to the LiveData:</p>

<pre><code> // Observe product data
    model.getObservableProduct().observe(this, new Observer&lt;ProductEntity&gt;() {
        @Override
        public void onChanged(@Nullable ProductEntity productEntity) {
            model.setProduct(productEntity);
        }
    });
</code></pre>

<p>I cannot see any kind of subscribing within the ViewModels to observe the Repository. Am i missing something?</p>
",5268086,,1000551,,2018-03-19 11:24:36,2018-03-19 11:24:36,Android Architecture Components: How is LiveData in the repository observed by a ViewModel,<android><mvvm><viewmodel><android-architecture-components><android-livedata>,1,1,2,,
Android,47727211,1,47930515,1031,12/21/2017 18:12:56,12,,12/9/2017 9:34:21,,20,9731,"<p>With the stabilization of Android Architecture Components I started updating all my basic <code>ViewModel</code>s to the new implementation of<a href=""https://developer.android.com/topic/libraries/architecture/viewmodel.html"" rel=""noreferrer""><code>ViewModel</code></a>. In my understanding, the usage of <a href=""https://developer.android.com/topic/libraries/architecture/livedata.html"" rel=""noreferrer""><code>LiveData</code></a> is recommended to hold the <code>Model</code> class since it handles the lifecycle better.</p>

<p>I like using <code>Data Binding</code> because it makes the code clearer in Java/Kotlin side and it is not needed to ""watch"" the value changes to update the UI. However the layout using <code>Data Binding</code> only watch data changes if the <code>Model</code> (or the ViewModel) extends <a href=""https://developer.android.com/reference/android/databinding/BaseObservable.html"" rel=""noreferrer""><code>BaseObservable</code></a> and <code>LiveData</code> does not. I understand the one of the main objectives of <code>LiveData</code> is to be observed and updates the UI programmatically but for simple updates, <code>Data Binding</code> is very useful.</p>

<p>This issue was already reported (<a href=""https://github.com/googlesamples/android-architecture-components/issues/34#issuecomment-305991529"" rel=""noreferrer"">GitHub</a> and <a href=""https://stackoverflow.com/questions/44077566/how-to-combine-architecture-components-with-data-binding-on-android#comment82259306_44178060"">Stack Overflow</a>) and first was said that the version 1.0 would have it and now is said that this feature is in development.</p>

<p>In order to use both <code>LiveData</code> and <code>Data Binding</code>, I created a very simple implementation of class that extends <code>BaseObservable</code>:</p>

<pre><code>import android.arch.lifecycle.LiveData
import android.arch.lifecycle.MutableLiveData
import android.databinding.BaseObservable

class ObservableMutableLiveData&lt;T&gt;() : BaseObservable() {

    private var data: MutableLiveData&lt;T&gt; = MutableLiveData()

    constructor(data: T) : this() {
        this.data.value = data
    }

    public fun set(value: T) {
        if (value != data.value) {
            data.value = value
            notifyChange()
        }
    }

    public fun get(): T? {
        return data.value
    }

    public fun getObservable(): LiveData&lt;T&gt; {
        return data
    }
}
</code></pre>

<p>So basically my <code>ObservableMutableLiveData</code> is a copy of <a href=""https://android.googlesource.com/platform/frameworks/data-binding/+/c9a5d6f140f732ca0ff279a4b1ee315072e1c422/library/src/main/java/android/databinding/ObservableField.java"" rel=""noreferrer""><code>ObservableField</code></a> using <code>LiveData</code> to store the model and with this implementation, the layout updates after every model update.</p>

<p>The questions are:</p>

<ul>
<li>Is this a bad implementation of <code>LiveData</code>? Does this wrapper ""breaks"" the functionalities of <code>LiveData</code>, such as be lifecycle-aware?</li>
<li>In my understanding, <code>LiveData</code> is the new <code>ObservableField</code>. Is this correct?</li>
</ul>
",6100078,,,,,2019-02-05 20:14:44,Using LiveData with Data Binding,<android><kotlin><android-databinding><android-architecture-components><android-mvvm>,3,0,4,,
Android,48094952,1,48095129,1032,1/4/2018 12:15:44,0,,1/4/2018 12:06:41,,5,2615,"<p>I am trying to implement a camera app. and checking examples. Some examples contain following manifest feature: <code>uses-feature android:name=""android.hardware.camera2.full</code>.
I have checked official documents and google examples and none of them mentioning existing this feature. (or I am missing some).</p>

<p>What is the source of this feature and what is the difference between <code>android.hardware.camera</code>?</p>

<hr>

<p>Edit:
What confuses me was those examples on <code>googlesamples</code>:</p>

<p><a href=""https://github.com/googlesamples/android-Camera2Basic/blob/master/kotlinApp/Application/src/main/AndroidManifest.xml"" rel=""nofollow noreferrer"">https://github.com/googlesamples/android-Camera2Basic/blob/master/kotlinApp/Application/src/main/AndroidManifest.xml</a></p>

<p>and this</p>

<p><a href=""https://github.com/googlesamples/android-Camera2Basic/blob/master/Application/src/main/AndroidManifest.xml"" rel=""nofollow noreferrer"">https://github.com/googlesamples/android-Camera2Basic/blob/master/Application/src/main/AndroidManifest.xml</a></p>

<p>and this</p>

<p><a href=""https://github.com/googlesamples/android-Camera2Raw/blob/master/Application/src/main/AndroidManifest.xml"" rel=""nofollow noreferrer"">https://github.com/googlesamples/android-Camera2Raw/blob/master/Application/src/main/AndroidManifest.xml</a></p>

<p>They are using new <code>Camera2</code> API and old manifest <code>features</code>. I don't know how both fits together.</p>
",1281930,,,user8389458,2018-04-21 22:15:45,2018-04-21 22:15:45,Where does android.hardware.camera2.full come from?,<android><android-camera><android-camera2>,3,3,2,,
Android,48039177,1,48132487,1033,1/6/2018 22:20:16,6,,12/31/2017 1:13:09,,2,599,"<p>I am developing an android app with BLE API from android. My app needs to connect to a BLE device, and remain connected as long as it is in range and turned on. I need to read data from it, and write data to it. </p>

<p>I am trying to follow the MVP architecture pattern, not strictly since activities are the starting point. But anyway, I wanted to know where should I put the interaction with Bluetooth? I am searching for answers for the following questions. I have searched StackOverflow, but couldn't find what I was looking for.</p>

<ol>
<li>Should it be in a service bounded to the UI just like in <a href=""https://github.com/googlesamples/android-BluetoothLeGatt"" rel=""nofollow noreferrer"">googlesample ble app</a> ? But, I think that would break the whole mvp architecture.   </li>
<li>Should it be a bounded service at all ? If no, what would be the best way to implement the service? In my mind, if it's not bounded to the view, and there is a callback from the background service to display something on the UI, there is a possibility of undefined behavior.</li>
<li>Who should initiate the Bluetooth interaction ? The application class or some activity ?</li>
</ol>

<p>I am looking for mainly architectural guidance, and best way to go about developing this app.  </p>
",2736367,,,user9048861,2017-12-31 1:19:37,2018-01-06 22:20:16,Android app architecture with BLE,<android><architecture><bluetooth-lowenergy>,1,5,,,
Android,48127910,1,48169325,1034,1/9/2018 13:31:21,3,,1/6/2018 13:37:47,,1,219,"<p>I'm trying to test the code written in callback function of one of Rxjava operator. Here is the original code that I want to test</p>

<pre><code>@Override
public Observable&lt;List&lt;User&gt;&gt; getUsers() {
    UserDataStore userDataStore = userDataStoreFactory.createCloudDataStore();
    return userDataStore.getUsers().map(userEntityDataMapper::transform);
}
</code></pre>

<p>In above code there is a ""map"" operator and its callback Function will transform the original object to another by calling <code>userEntityDataMapper.transform()</code> method. <strong>Here I want to test that userEntityDataMapper's transform method must be call.</strong> Here is the code which I tried to check if <code>userEntityDataMapper.transform()</code> method calls or not.</p>

<pre><code>@Test
public void testGetUsersHappyCase() {
    List&lt;UserEntity&gt; userEntityList = new ArrayList&lt;&gt;();
    userEntityList.add(new UserEntity());
    given(mockUserDataStore.getUsers()).willReturn(Observable.just(userEntityList));
    List&lt;User&gt; userList = new ArrayList&lt;&gt;();
    given(mockUserEntityDataMapper.transform(userEntityList)).willReturn(userList);
    given(mockUserDataStoreFactory.createCloudDataStore()).willReturn(mockUserDataStore);

    Observable observable = userDataRepository.getUsers();

    verify(mockUserDataStoreFactory).createCloudDataStore();
    verify(mockUserDataStore).getUsers();
    TestObserver&lt;List&lt;UserEntity&gt;&gt; testObserver = new TestObserver&lt;&gt;();
    TestScheduler testScheduler = new TestScheduler();
    observable.subscribeOn(testScheduler).observeOn(testScheduler).subscribeWith(testObserver);
    verify(mockUserEntityDataMapper).transform(any(List.class));
}
</code></pre>

<p>I checked many similar questions on stackoverflow and from forum but not able to find exact solution for my question.</p>

<p><strong>Update:</strong>
Here is the change which I did to fix the problem.</p>

<pre><code>@Test
public void testGetUsersHappyCase() {
    List&lt;UserEntity&gt; userEntityList = new ArrayList&lt;&gt;();
    userEntityList.add(new UserEntity());
    given(mockUserDataStore.getUsers()).willReturn(Observable.just(userEntityList));
    List&lt;User&gt; userList = new ArrayList&lt;&gt;();
    given(mockUserEntityDataMapper.transform(userEntityList)).willReturn(userList);

    userDataRepository.getUsers().test().assertNoErrors();

    verify(mockUserDataStoreFactory).createCloudDataStore();
    verify(mockUserDataStore).getUsers();

    verify(mockUserEntityDataMapper).transform(userEntityList);
}
</code></pre>

<p>Thanks @tynn for the hint of test() method. Also same thing I found in BasicRxJavaSample demo found on <a href=""https://github.com/googlesamples/android-architecture-components"" rel=""nofollow noreferrer"">https://github.com/googlesamples/android-architecture-components</a>.</p>
",630668,,630668,,2018-01-13 6:29:03,2018-01-13 8:21:26,test rxjava callback function,<android><unit-testing><mockito><rx-java2>,2,2,,,
Android,48172376,1,48173636,1035,1/9/2018 17:26:07,0,,1/9/2018 16:14:53,,1,48,"<p>I'm writing a <code>PrinterService</code> to control a proprietary printer and I try to use <code>PDFRenderer</code> to convert the PDF file sent by the <code>PrinterManager</code> to a bitmap to be sent to the printer.</p>

<p>I started from this <a href=""https://github.com/googlesamples/android-PdfRendererBasic"" rel=""nofollow noreferrer"">example</a> to use PDFRenderer.</p>

<p>I'm sure about the PDF file I receive but <code>mCurrentPage.render(bitmap, null, null, PdfRenderer.Page.RENDER_MODE_FOR_PRINT);</code> desesperately fill up an empty bitmap.</p>

<p>So I was wondering if <code>PDFRenderer</code> could need some context not available in a service.</p>
",3004821,,,,,2018-01-09 20:24:01,Can we use PDFRenderer in a service?,<android><pdf>,1,3,,,
Android,48172364,1,48174338,1036,1/9/2018 18:14:28,0,,1/9/2018 16:14:11,,3,3458,"<p>I have several entities that you can see below, the problem is how to select nested lists properly when you have more than one level of nesting. If you take a look at Google repository on <a href=""https://github.com/googlesamples/android-architecture-components/tree/master/BasicRxJavaSample"" rel=""nofollow noreferrer"">github</a>, you can find very simple example, but not something complex. As documentation says <a href=""https://developer.android.com/training/data-storage/room/referencing-data.html#understand-no-object-references"" rel=""nofollow noreferrer"">here</a>, Room doesn't allow object references. How to get <code>ResultObject</code> (and how it should look) including all nested lists?</p>

<p>ResultObject should have this info:</p>

<ol>
<li><code>List&lt;Dialog&gt;</code></li>
<li><code>Dialog</code> entity has <code>List&lt;Message&gt;</code>.  </li>
<li><code>Message</code> has <code>List&lt;ImageContent&gt;</code>.</li>
<li><code>ImageContent</code> has <code>List&lt;ImageContentItem&gt;</code></li>
</ol>

<p>Dialog</p>

<pre><code>@Entity(tableName = ""dialog"")
data class Dialog(@PrimaryKey val id String, val title: String)
</code></pre>

<p>Message</p>

<pre><code>@Entity(tableName = ""message"",
        foreignKeys = [(ForeignKey(entity = Dialog::class, parentColumns [""id""], childColumns = [""dialogId""]))])
data class Message(@PrimaryKey val id: String, val dialogId: String)
</code></pre>

<p>ImageContent</p>

<pre><code>@Entity(tableName = ""image_content"",
        foreignKeys = [(ForeignKey(entity = Message::class, parentColumns = [""id""], childColumns = [""messageId""]))])
data class ImageContent(@PrimaryKey val id: String, val messageId: String)
</code></pre>

<p>ImageContentItem</p>

<pre><code>@Entity(tableName = ""image_content_item"",
        foreignKeys = [(ForeignKey(entity = ImageContent::class, parentColumns = [""id""], childColumns = [""imageContentId""]))])
data class ImageContentItem(val imageContentId: String,
                        @PrimaryKey(autoGenerate = true) val id: Long = 1)
</code></pre>

<p>DAO:</p>

<pre><code>@Dao
interface DialogDao {
    @Query(""SELECT * FROM dialog "" +
            ""INNER JOIN message ON message.dialogId = dialog.id "" +
            ""INNER JOIN image_content ON image_content.messageId = message.id "" +
            ""INNER JOIN image_content_item ON image_content_item.imageContentId = image_content.id"")
    fun getDialogAllInformation(): Flowable&lt;List&lt;**ResultObject**&gt;&gt;
}
</code></pre>
",8052090,,2649012,,2018-01-09 16:32:36,2018-02-07 23:23:55,How to query a complex nested objects in Room?,<android><android-room>,2,0,1,,
Android,47051069,1,48248557,625,1/14/2018 10:13:59,74,,11/1/2017 8:45:10,,3,317,"<p>I am playing with <a href=""https://developer.android.com/guide/topics/ui/look-and-feel/downloadable-fonts.html"" rel=""nofollow noreferrer"">Downloadable fonts api</a>. I downloaded the  <a href=""https://github.com/googlesamples/android-DownloadableFonts"" rel=""nofollow noreferrer"">Google sample application</a> and also incorporated the code into my project. Both run successfully but some fonts consistently fail to download both from my app and from the sample app. </p>

<p>I use <code>FontsContractCompat.requestFont</code> and gets a callback to <code>onTypefaceRequestFailed(int reason)</code> with reason 1. The documentation says it means ""FAIL_REASON_FONT_NOT_FOUND"". 
I assume those fonts should exist because: 1) They appear in an xml file that comes with the sample app, 2) They appear in the <a href=""https://fonts.google.com/"" rel=""nofollow noreferrer"">online list of Google Fonts</a>, and 3) They return from the developer web api (<code>https://www.googleapis.com/webfonts/v1/webfonts?key=</code>)</p>

<p>Here is the list of failed fonts:<code>
 Angkor
 Archivo
 Asap Condensed
 Baloo Bhaijaan
 Baloo Tammudu
 Battambang
 Bayon
 Bellefair
 BioRhyme Expanded
 Bokor
 Cabin Condensed
 Chau Philomene One
 Chenla
 Content
 Dangrek
 Encode Sans
 Encode Sans Condensed
 Encode Sans Expanded
 Encode Sans Semi Condensed
 Encode Sans Semi Expanded
 Fasthand
 Faustina
 Freehand
 Hanuman
 Khmer
 Koulen
 Libre Barcode 128
 Libre Barcode 128 Text
 Libre Barcode 39
 Libre Barcode 39 Extended
 Libre Barcode 39 Extended Text
 Libre Barcode 39 Text
 Mada
 Manuale
 Metal
 Moul
 Moulpali
 Mukta
 Mukta Mahee
 Mukta Malar
 Nokora
 Open Sans Condensed
 Preahvihear
 Roboto Condensed
 Saira
 Saira Condensed
 Saira Extra Condensed
 Saira Semi Condensed
 Sedgwick Ave
 Sedgwick Ave Display
 Siemreap
 Suwannaphum
 Taprom
 Ubuntu Condensed
 Zilla Slab
 Zilla Slab Highlight</code></p>
",5346565,,2649012,,2017-11-01 10:04:47,2018-01-14 10:20:10,downloadable fonts - can't download some google fonts,<android><fonts><google-font-api><google-fonts>,1,3,1,,
Android,46984467,1,48350486,1038,1/19/2018 22:31:36,84,,10/27/2017 22:55:47,,1,164,"<ol>
<li>In the previous library as we were getting Inventory object, how can we get it from billing library version 1.0?</li>
<li>How can we get developer payload, which we are getting in Purchase object?</li>
</ol>

<p>For reference :</p>

<pre><code>public void onQueryInventoryFinished(IabResult result, Inventory inventory) {
            Log.d(TAG, ""Query inventory finished."");
}
</code></pre>

<p>Note : I am referencing from the library code - <a href=""https://github.com/googlesamples/android-play-billing"" rel=""nofollow noreferrer"">https://github.com/googlesamples/android-play-billing</a></p>
",1964609,,,,,2018-01-19 22:31:36,Deprecated Inventory object from google play billing library 1.0?,<android><android-billing><play-billing-library>,1,0,,,
Android,48406497,1,48410303,1039,1/23/2018 20:32:04,0,,1/23/2018 16:25:54,,10,1935,"<p>I bumped into an issue while trying to implement a touch to focus feature using the <a href=""https://developer.android.com/reference/android/hardware/camera2/package-summary.html"" rel=""noreferrer"">Android Camera2</a>. </p>

<p>The theory is easy:</p>

<ul>
<li>obtain the tap position in the preview surface</li>
<li>map it to the dimensions of the sensor or sensor crop area (in case of a zoom) making sure to invert the dimensions if needed</li>
<li>apply a change of basis to end up in the same basis as the sensor</li>
<li>make a <code>MeteringRectangle</code> out of the result and use it in a new <code>CaptureRequest</code></li>
</ul>

<p>There are a number of examples out there that show how to deal with the first and last point, but not a lot that deal with the second and third in an understandable way. The docs and examples are not really clear and it can be really confusing. </p>

<p>Here we go...</p>

<hr>

<p>The <code>CameraCharacteristics.SENSOR_ORIENTATION</code> is describe as</p>

<blockquote>
  <p>Clockwise angle through which the output image needs to be rotated to be upright on the device screen in its native orientation.</p>
</blockquote>

<p>Knowing that the sensor coordinate system is defined with (0,0) being the top-left pixel in the active pixel array, I read this as being the angle needed to rotate the image captured in the sensor coordinate system 
to the position that would make the image look upright in the native orientation. So if the sensor's top is facing the right side of a phone with a portrait native orientation, the <code>SENSOR_ORIENTATION</code> will be 90Â°.
<a href=""https://i.stack.imgur.com/Nq9Wb.png"" rel=""noreferrer""><img src=""https://i.stack.imgur.com/Nq9Wb.png"" alt=""Sensor Orientation""></a></p>

<hr>

<p><strong>The display orientation</strong> obtained via <code>mActivity.getWindowManager().getDefaultDisplay().getRotation();</code> is documented as:</p>

<blockquote>
  <p>Returns the rotation of the screen from its ""natural"" orientation. The returned value may be Surface.ROTATION_0 (no rotation), Surface.ROTATION_90, Surface.ROTATION_180, or Surface.ROTATION_270. For example, if a device has a naturally tall screen, and the user has turned it on its side to go into a landscape orientation, the value returned here may be either Surface.ROTATION_90 or Surface.ROTATION_270 depending on the direction it was turned. The angle is the rotation of the drawn graphics on the screen, which is the opposite direction of the physical rotation of the device. For example, if the device is rotated 90 degrees counter-clockwise, to compensate rendering will be rotated by 90 degrees clockwise and thus the returned value here will be Surface.ROTATION_90.</p>
</blockquote>

<p>I find that this definition is much clearer than the sensor orientation one, there is no place for interpretation. </p>

<hr>

<p>Now where things start to get ugly...</p>

<p>I decided to make use of the method provided in the <a href=""https://github.com/googlesamples/android-Camera2Raw"" rel=""noreferrer"">Camera2Raw</a> example to obtain the rotation from the sensor orientation to the device orientation. </p>

<pre><code>/**
 * Rotation need to transform from the camera sensor orientation to the device's current
 * orientation.
 *
 * @param c                 the {@link CameraCharacteristics} to query for the camera sensor
 *                          orientation.
 * @param deviceOrientation the current device orientation relative to the native device
 *                          orientation.
 * @return the total rotation from the sensor orientation to the current device orientation.
 */
private static int sensorToDeviceRotation(CameraCharacteristics c, int deviceOrientation) {
    int sensorOrientation = c.get(CameraCharacteristics.SENSOR_ORIENTATION);

    // Get device orientation in degrees
    deviceOrientation = ORIENTATIONS.get(deviceOrientation);

    // Reverse device orientation for front-facing cameras
    if (c.get(CameraCharacteristics.LENS_FACING) == CameraCharacteristics.LENS_FACING_FRONT) {
        deviceOrientation = -deviceOrientation;
    }

    // Calculate desired JPEG orientation relative to camera orientation to make
    // the image upright relative to the device orientation
    return (sensorOrientation + deviceOrientation + 360) % 360;
}
</code></pre>

<p>Here is a table of the different outputs for a back and front facing camera on a phone with a portrait native orientation.
<a href=""https://i.stack.imgur.com/7DxTE.png"" rel=""noreferrer""><img src=""https://i.stack.imgur.com/7DxTE.png"" alt=""enter image description here""></a></p>

<p>The first thing I noticed is that if I consider the outputs as described (rotation from the camera sensor orientation to the device's current orientation), 
for it to make sense, I have to consider the output rotation to be <strong>counter-clockwise</strong> (unlike the sensor orientation and device orientation)!! 
For instance if we take the typical 90Â° sensor and 0Â° device orientation, the resut is 90Â° and if I'm not mistaken in my analysis, it can only be counter-clockwise.</p>

<p>Under the hypothesis that my understanding of the sensor and device orientations is correct (not certain about that), then something must be wrong with the results of the above tables, because if you look at the 90Â° sensor and the 90Â° device orientation case, it can't be 180Â° it should be 0Â°. 
The next picture is a visual representation of my understanding of all of this for a 90Â° sensor orientation phone. <a href=""https://i.stack.imgur.com/JqNiQ.png"" rel=""noreferrer""><img src=""https://i.stack.imgur.com/JqNiQ.png"" alt=""enter image description here""></a></p>

<p>I went ahead and implemented my basis changes in R<sup>2</sup> to get my tap point from the screen basis to the sensor basis and added the expected offsets. </p>

<p>I observed that if I switch the 180Â° and 0Â° calculations, then my touch to focus works perfectly. The correct observed values for the rotation from the sensor to the current device orientation actually correspond to the table for the front camera. </p>

<p>So my gut feeling is that the <code>sensorToDeviceRotation</code> is flawed and the return value should be:</p>

<pre><code>// Calculate desired JPEG orientation relative to camera orientation to make
// the image upright relative to the device orientation
return (sensorOrientation - deviceOrientation + 360) % 360;
</code></pre>

<p>It would actually be more logical in terms of what is computed...</p>

<p>Could someone confirm this? or have I misunderstood something somewhere?</p>

<p>Cheers</p>
",2414033,,192373,,2018-02-18 4:55:48,2018-02-18 4:55:48,Camera2 understanding the sensor and device orientations,<android><rotation><android-camera2>,1,0,8,,
Android,48645234,1,48649395,1040,2/6/2018 18:12:33,0,,2/6/2018 14:23:48,,1,452,"<p>I setup a device owner application provisioning app as shown in google sample <a href=""https://github.com/googlesamples/android-NfcProvisioning"" rel=""nofollow noreferrer"">NFC Provisioning</a> , with additional features to setup <code>EXTRA_PROVISIONING_DEVICE_ADMIN_PACKAGE_DOWNLOAD_LOCATION</code> and <code>EXTRA_PROVISIONING_DEVICE_ADMIN_PACKAGE_CHECKSUM</code>. I would like as shown in the video of <a href=""https://youtu.be/Za0OQo8DRM4?t=36m57s"" rel=""nofollow noreferrer"">Google I/O 2016</a>, to provide both device owner app and cosu app. 
How can I achieve this goal?</p>

<p>I should setup a single app which is both cosu and device owner or I have to provide download location automatically via nfc through provisioning app and instruct my device owner to download and install the specific app?</p>
",4875522,,,,,2018-02-06 18:12:33,Provisioning Device Owner and CosuApp,<android><android-for-work><cosu>,1,0,1,,
Android,48781673,1,48817039,1078,2/15/2018 22:02:41,1,,2/14/2018 7:20:28,,3,1174,"<p>As moving from beginner level coding and deeping into Android apps developing, patterns and architecture, to make my code cleaner and better. I met with a question, that I couldn't find a proper answer to.<br>
And the question is: what is the <strong>proper</strong> way of using MVP pattern and Fragment? Should each layout have his own Activity, that will host Presenter and Fragment(as I heard putting Presenter to the Fragment itself is not the best practice), or it's better to have 1 hosting Activity that will host all Fragments and just replace them when needed, but create additional layer to manage Presenters switching? And things seem to become much harder when it comes to Tablet layouts or Tabs.<br>
<a href=""https://github.com/googlesamples/android-architecture"" rel=""nofollow noreferrer"">Google samples</a> contains an example of using 1 Activity -> 1 Fragment, but I'm not sure if this is the best way, 'cause creating new Activity makes app 'blink'.</p>
",9358655,,9358655,,2018-02-14 7:40:58,2018-02-16 11:06:52,Proper way of using Fragments and MVP pattern,<android><android-fragments><mvp><android-mvp>,2,2,,,
Android,48774255,1,48972468,1041,2/25/2018 10:29:15,12,,2/13/2018 19:28:01,,2,353,"<p><a href=""https://github.com/googlesamples/android-architecture/tree/todo-mvp-dagger/todoapp/app/src/main/java/com/example/android/architecture/blueprints/todoapp"" rel=""nofollow noreferrer"">Google Repo Link</a>. All of the boilerplate code is taken from there.</p>

<p>I just can't figure out how to add my own dependencies to this architecture.
I want to do the following things:</p>

<ol>
<li>I need to use one of the presenters in a non-fragment class.</li>
<li>I need to add a network module, which provides a simple OkHttp client.</li>
</ol>

<p>I understand dagger in general, but dagger-android confuses me in many parts..</p>

<p><strong>ToDoApplication:</strong></p>

<pre><code>public class ToDoApplication extends DaggerApplication {
    @Inject
    TasksRepository tasksRepository;

    @Inject
    AsyncTask asyncTask;

    @Override
    protected AndroidInjector&lt;? extends DaggerApplication&gt; applicationInjector() {
        return DaggerAppComponent.builder().application(this).build();
    }
}
</code></pre>

<p><strong>AppComponent:</strong></p>

<pre><code>@Singleton
@Component(modules = {TasksRepositoryModule.class,
        ApplicationModule.class,
        ActivityBindingModule.class,
        AndroidSupportInjectionModule.class})
public interface AppComponent extends AndroidInjector&lt;ToDoApplication&gt; {

    TasksRepository getTasksRepository();
    AsyncTask getAsyncTask();

    @Component.Builder
    interface Builder {

        @BindsInstance
        AppComponent.Builder application(Application application);

        AppComponent build();
    }
}
</code></pre>

<p><strong>ApplicationModule:</strong></p>

<pre><code>@Module
public abstract class ApplicationModule {
    //expose Application as an injectable context
    @Binds
    abstract Context bindContext(Application application);
}
</code></pre>

<p><strong>ActivityBindingModule:</strong></p>

<pre><code>@Module
public abstract class ActivityBindingModule {
    @ActivityScoped
    @ContributesAndroidInjector(modules = TasksModule.class)
    abstract TasksActivity tasksActivity();

    @ActivityScoped
    @ContributesAndroidInjector(modules = AddEditTaskModule.class)
    abstract AddEditTaskActivity addEditTaskActivity();

    @ActivityScoped
    @ContributesAndroidInjector(modules = StatisticsModule.class)
    abstract StatisticsActivity statisticsActivity();

    @ActivityScoped
    @ContributesAndroidInjector(modules = TaskDetailPresenterModule.class)
    abstract TaskDetailActivity taskDetailActivity();
}
</code></pre>

<hr>

<p><strong>ExampleModule:</strong></p>

<pre><code>@Module
public abstract class TasksModule {
    @FragmentScoped
    @ContributesAndroidInjector
    abstract TasksFragment tasksFragment();

    @ActivityScoped
    @Binds abstract TasksContract.Presenter taskPresenter(TasksPresenter presenter);
}
</code></pre>

<p><strong>ExampleActivity:</strong></p>

<pre><code>public class TasksActivity extends DaggerAppCompatActivity {
 @Inject
    TasksPresenter mTasksPresenter;
    @Inject
    Lazy&lt;TasksFragment&gt; taskFragmentProvider;

...
</code></pre>

<p><strong>Example Fragment:</strong></p>

<pre><code>@ActivityScoped
public class TasksFragment extends DaggerFragment implements TasksContract.View {

    @Inject
    TasksContract.Presenter mPresenter;

...
</code></pre>

<p><strong>Example Presenter:</strong></p>

<pre><code>@ActivityScoped
final class TasksPresenter implements TasksContract.Presenter {

    @Inject
    TasksPresenter(TasksRepository tasksRepository) {
        mTasksRepository = tasksRepository;
    }

...
</code></pre>

<hr>

<p>The code above is all correctly working. Now my problem:</p>

<ol>
<li><p>I have an <code>AsyncTask</code>, which needs a presenter to post something in it's <code>onPostExecute</code> method. I injected the presenter, but I get the error that the presenter is not initialized.</p></li>
<li><p>I added the following <code>NetworkModule</code> to the module array in <code>@Component</code> and simply injected it in the <code>AsyncTask</code>, but it's not working (error: ... not initialized). What else would I have to add?</p></li>
</ol>

<p><strong>NetworkModule:</strong></p>

<pre><code>@Module
class NetworkModule {

    @Provides
    @Singleton
    fun provideOkHttp(): OkHttpClient {
        return OkHttpClient()
    }
}
</code></pre>

<p><strong>AsyncTask</strong></p>

<pre><code>private class MyAsyncTask extends AsyncTask&lt;String, Integer, Long&gt; {

     @Inject 
     TasksPresenter presenter;
     @Inject
     OkHttpClient client;

     protected Long doInBackground(String... params) {
         client.doSomething();
         ...
     }


     protected void onPostExecute(Long result) {
         ...
         presenter.doSomething();
     }
 }
</code></pre>

<p>All of my code is correctly working without dagger so you don't have to worry about it. :)</p>

<p>I hope somebody can help me. If you have further questions feel free to ask!</p>
",7295614,,7295614,,2018-02-15 16:22:09,2018-02-25 10:29:15,How to extend the Google android architecture dagger sample?,<java><android><dagger-2><dagger-android>,1,4,1,,
Android,48914977,1,48992369,1042,2/26/2018 16:01:13,5,,2/21/2018 20:34:04,,4,469,"<p>Hi folks I'm trying to learn unit tests with Kotlin using <a href=""https://github.com/googlesamples/android-architecture-components/blob/master/GithubBrowserSample/app/src/test/java/com/android/example/github/ui/user/UserViewModelTest.java"" rel=""nofollow noreferrer"">Google's github browser sample as a base</a>. My code is very similar indeed but I can't get one of their more basic tests to work (and I don't really understand it).</p>

<p>My main question is what preciesly is the <code>sendResultToUI()</code> test doing,</p>

<pre><code>@Test
public void sendResultToUI() {
    MutableLiveData&lt;Resource&lt;User&gt;&gt; foo = new MutableLiveData&lt;&gt;();
    when(userRepository.loadUser(""foo"")).thenReturn(foo);
    Observer&lt;Resource&lt;User&gt;&gt; observer = mock(Observer.class);
    userViewModel.getUser().observeForever(observer);
    userViewModel.setLogin(""foo"");
    verify(observer, never()).onChanged(any(Resource.class));
    User fooUser = TestUtil.createUser(""foo"");
    Resource&lt;User&gt; fooValue = Resource.success(fooUser);

    foo.setValue(fooValue);
    verify(observer).onChanged(fooValue);
    reset(observer);
}
</code></pre>

<p>from what I can tell, it says:</p>

<ul>
<li>a) When <code>loadUser(""foo"")</code> is called, instead of executing the function
just return a new live data guy called foo. </li>
<li>b) Observe the <code>userViewModel.getUser()</code> live data  </li>
<li>c) Call <code>setLogin(""foo"")</code>, which triggers the live data and calls <code>loadUser(""foo"")</code> </li>
<li><strong>d) Verify the observer to <code>getUser()</code> we created earlier has never been fired by any instance of a Resource</strong> </li>
<li>e) Create a successful foo user, verify that setting it's value triggers the <code>getUser()</code> observer</li>
</ul>

<p>So if all of that is roughly correct, my question is on step d). My code is throwing an exception:</p>

<pre><code>java.lang.IllegalStateException: ArgumentMatchers.any(T::class.java) must not be null
</code></pre>

<p>So I guess <code>onChanged</code> is called with a null value. I really don't get what the hell is going on here - calling <code>setLogin()</code> in step c) triggers the user switchMap live data which in turn calls <code>userRepositiory.loadUser()</code>, so that <em>should</em> call the observer to <code>getUser()</code> yet we ask to verify the opposite (that it's never called). After all calling loadUser() returns foo which we specified in a). Maybe if someone can at least explain the test to me I might make sense of my own code!</p>

<p><strong>Edit:</strong> Here is my own current unit test, the classes and models have changed but as far as I can tell the actual code is identical (I'm aware this can probably be more succinct, will worry about that later!)</p>

<pre><code>    @Test
fun `send result to UI`(){
    val foo = MutableLiveData&lt;Resource&lt;Member&gt;&gt;()
    `when`(interactor.callServerLoginRepo(email, password)).thenReturn(foo)
    val observer: Observer&lt;Resource&lt;Member&gt;&gt; = mock()
    loginViewModel.member.observeForever(observer)
    loginViewModel.setLoginCredentials(email, password)
    verify&lt;Observer&lt;Resource&lt;Member&gt;&gt;&gt;(observer, never()).onChanged(any(Resource::class.java) as Resource&lt;Member&gt;)
    val fooUser = TestUtil.createMember(email)
    val fooValue = Resource.success(fooUser)

    foo.setValue(fooValue)
    verify&lt;Observer&lt;Resource&lt;Member&gt;&gt;&gt;(observer).onChanged(fooValue)
    reset&lt;Observer&lt;Resource&lt;Member&gt;&gt;&gt;(observer)
}
</code></pre>

<p>MockitoHelpers.kt</p>

<pre><code>fun &lt;T&gt; any(type: Class&lt;T&gt;): T = Mockito.any&lt;T&gt;(type)
</code></pre>

<p>The error is also subtly different:</p>

<pre><code>kotlin.TypeCastException: null cannot be cast to non-null type app.core.sdk.data.remote.response.Resource&lt;app.core.sdk.data.model.db.Member&gt;

at app.core.sdk.ui.login.LoginViewModelTest.send result to UI(LoginViewModelTest.kt:114)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
at java.lang.reflect.Method.invoke(Method.java:498)
at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:50)
at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:47)
at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
at org.junit.rules.TestWatcher$1.evaluate(TestWatcher.java:55)
</code></pre>

<p><strong>Edit 2, final code:</strong>
So it looks like my main issue here was the confusion over the different <code>any()</code> functions, basically I need a null safe call to <code>any()</code>, ideally one that can specify the matching class. The <a href=""https://github.com/nhaarman/mockito-kotlin"" rel=""nofollow noreferrer"">Mockito-Kotlin</a> library looks like the safest route to go for the moment, because I need an <code>any</code> function which will be fallback to the class I specify and I think his version does so:</p>

<pre><code>inline fun &lt;reified T : Any&gt; any() = Mockito.any(T::class.java) ?: createInstance&lt;T&gt;()
</code></pre>

<p>I am assuming the reason the observer is fired with a null value is just something the <code>Mockito.any()</code> function does, and that's where Kotlin throws the exception.</p>

<pre><code>    val foo = MutableLiveData&lt;Resource&lt;Member&gt;&gt;()
    //When callServerLoginRepo() is called, return foo live data
    `when`(interactor.callServerLoginRepo(email, password)).thenReturn(foo)
    //Observe member live data
    val observer: Observer&lt;Resource&lt;Member&gt;&gt; = mock()
    loginViewModel.member.observeForever(observer)
    //Fire setLoginCredentials, and make sure it didn't touch our observed 'member' live data
    loginViewModel.setLoginCredentials(email, password)
    verify(observer, never()).onChanged(any())
    //Create a successful foo user, and set it's value
    val fooUser = TestUtil.createMember(email)
    val fooValue = Resource.success(fooUser)

    foo.value = fooValue
    //Ensure setting this did indeed trigger our live data
    verify(observer).onChanged(fooValue)
    reset(observer)
</code></pre>
",1866373,,1866373,,2018-03-01 16:00:43,2018-03-01 16:00:43,Android Architecture Components GithubBrowserSample unit test understanding,<android><unit-testing><kotlin><mockito><android-architecture-components>,2,5,,,
Android,49029004,1,49042294,1077,3/1/2018 3:44:52,1,,2/28/2018 11:55:25,,1,158,"<p>I using this code to test google fit : <a href=""https://github.com/googlesamples/android-fit/blob/master/BasicSensorsApi/app/src/main/java/com/google/android/gms/fit/samples/basicsensorsapi/MainActivity.java"" rel=""nofollow noreferrer"">android-fit</a>.
This code is working and not occur any exception    , but it can't call into function [onDataPoint] when it register Fitness Data </p>

<pre><code>    private OnDataPointListener mListener;
    ]
    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);          
        setContentView(R.layout.activity_main);         

        if (hasRuntimePermissions()) {
            findFitnessDataSourcesWrapper();
        } else {
            requestRuntimePermissions();
        }
    }


    private void findFitnessDataSourcesWrapper() {
        if (hasOAuthPermission()) {
            findFitnessDataSources();
        } else {
            requestOAuthPermission();
        }
    }


    private FitnessOptions getFitnessSignInOptions() {
        return FitnessOptions.builder().addDataType(DataType.TYPE_LOCATION_SAMPLE).build();
    }


    private boolean hasOAuthPermission() {
        FitnessOptions fitnessOptions = getFitnessSignInOptions();
        return GoogleSignIn.hasPermissions(GoogleSignIn.getLastSignedInAccount(this), fitnessOptions);
    }


    private void requestOAuthPermission() {
        FitnessOptions fitnessOptions = getFitnessSignInOptions();
        GoogleSignIn.requestPermissions(
                this,
                REQUEST_OAUTH_REQUEST_CODE,
                GoogleSignIn.getLastSignedInAccount(this),
                fitnessOptions);
    }


    @Override
    protected void onResume() {
        super.onResume();


        findFitnessDataSourcesWrapper();
    }

    @Override
    protected void onActivityResult(int requestCode, int resultCode, Intent data) {
        if (resultCode == Activity.RESULT_OK) {
            if (requestCode == REQUEST_OAUTH_REQUEST_CODE) {
                findFitnessDataSources();
            }
        }
    }

    private void findFitnessDataSources() {

        Fitness.getSensorsClient(this, GoogleSignIn.getLastSignedInAccount(this))
                .findDataSources(
                        new DataSourcesRequest.Builder()
                                .setDataTypes(DataType.TYPE_LOCATION_SAMPLE)
                                //.setDataSourceTypes(DataSource.TYPE_RAW)
                                .build())
                .addOnSuccessListener(
                        new OnSuccessListener&lt;List&lt;DataSource&gt;&gt;() {
                            @Override
                            public void onSuccess(List&lt;DataSource&gt; dataSources) {
                                for (DataSource dataSource : dataSources) {
                                    Log.i(TAG, ""Data source found: "" + dataSource.toString());
                                    Log.i(TAG, ""Data Source type: "" + dataSource.getDataType().getName());

                                    if (dataSource.getDataType().equals(DataType.TYPE_LOCATION_SAMPLE)
                                            &amp;&amp; mListener == null) {
                                        Log.i(TAG, ""Data source for LOCATION_SAMPLE found!  Registering."");
                                        registerFitnessDataListener(dataSource, DataType.TYPE_LOCATION_SAMPLE);
                                    }
                                }
                            }
                        })
                .addOnFailureListener(
                        new OnFailureListener() {
                            @Override
                            public void onFailure(@NonNull Exception e) {
                                Log.e(TAG, ""failed"", e);
                            }
                        });

    }


    private void registerFitnessDataListener(DataSource dataSource, DataType dataType) {

        mListener =
                new OnDataPointListener() {
                    @Override
                    public void onDataPoint(DataPoint dataPoint) {
                        Log.i(TAG, ""onDataPoint"");
                        for (Field field : dataPoint.getDataType().getFields()) {
                            Value val = dataPoint.getValue(field);
                            Log.i(TAG, ""Detected DataPoint field: "" + field.getName());
                            Log.i(TAG, ""Detected DataPoint value: "" + val);

                        }
                    }
                };

        Fitness.getSensorsClient(this, GoogleSignIn.getLastSignedInAccount(this))
                .add(
                        new SensorRequest.Builder()
                                .setDataSource(dataSource) 
                                .setDataType(dataType) 
                                .setSamplingRate(10, TimeUnit.SECONDS)
                                .build(),
                        mListener)
                .addOnCompleteListener(
                        new OnCompleteListener&lt;Void&gt;() {
                            @Override
                            public void onComplete(@NonNull Task&lt;Void&gt; task) {
                                if (task.isSuccessful()) {
                                    Log.i(TAG, ""Listener registered!"");
                                } else {
                                    Log.e(TAG, ""Listener not registered."", task.getException());
                                }
                            }
                        });

    }
}
</code></pre>

<p>This is Result of Logcat outputed:</p>

<pre><code>02-28 18:36:41.973 22519-22519/vnit.com.testrealm I/BasicSensorsApi: Data source found: DataSource{raw:Application{com.google.android.gms::null}:Device{SHARP:SH-08E:daa952d0::1:2}:live_location:DataType{com.google.location.sample[latitude(f), longitude(f), accuracy(f), altitude(f)]}}
02-28 18:36:41.973 22519-22519/vnit.com.testrealm I/BasicSensorsApi: Data Source type: com.google.location.sample
02-28 18:36:41.973 22519-22519/vnit.com.testrealm I/BasicSensorsApi: Data source for LOCATION_SAMPLE found!  Registering.
02-28 18:36:42.013 22519-22519/vnit.com.testrealm I/BasicSensorsApi: Data source found: DataSource{raw:Application{com.google.android.gms::null}:Device{SHARP:SH-08E:daa952d0::1:2}:live_location:DataType{com.google.location.sample[latitude(f), longitude(f), accuracy(f), altitude(f)]}}
02-28 18:36:42.013 22519-22519/vnit.com.testrealm I/BasicSensorsApi: Data Source type: com.google.location.sample
02-28 18:36:42.243 22519-22519/vnit.com.testrealm I/BasicSensorsApi: Listener registered!
</code></pre>

<p>Log display message [Listener registered!] but Why [onDataPoint] of google fit not call?</p>

<p>I had try remove <code>.setDataSourceTypes(DataSource.TYPE_RAW)</code>, but it still not go to  [onDataPoint]</p>
",1497597,,1497597,,2018-03-01 3:44:06,2018-05-07 10:58:45,Why [onDataPoint] of google fit not call?,<android><google-fit>,1,2,,,
Android,49212540,1,49213923,1076,3/10/2018 20:52:24,0,,3/10/2018 18:24:33,,1,222,"<p>I have been struggling to correctly render any geometry using OpenGLES 1.0, 2.0, or 3.0 techniques. My testing device is a Samsung Galaxy S7 Edge (running Android 7.0). I have implemented numerous guides for both OpenGLES and EGL such as:</p>

<p><a href=""https://www.khronos.org/registry/EGL/sdk/docs/man/html/"" rel=""nofollow noreferrer"">https://www.khronos.org/registry/EGL/sdk/docs/man/html/</a></p>

<p><a href=""https://www.khronos.org/assets/uploads/books/openglr_es_20_programming_guide_sample.pdf"" rel=""nofollow noreferrer"">https://www.khronos.org/assets/uploads/books/openglr_es_20_programming_guide_sample.pdf</a></p>

<p><a href=""http://www.ikerhurtado.com/egl-use-android-native-opengles-applications"" rel=""nofollow noreferrer"">http://www.ikerhurtado.com/egl-use-android-native-opengles-applications</a></p>

<p>The code was initially adapted from the ""native-activity"" example:</p>

<p><a href=""https://github.com/googlesamples/android-ndk/tree/master/native-activity"" rel=""nofollow noreferrer"">https://github.com/googlesamples/android-ndk/tree/master/native-activity</a></p>

<hr>

<p>Android Manifest: (mostly from native-activity example)</p>

<pre><code>...
&lt;!-- Tell the system this app requires OpenGL ES 3.0. --&gt;
&lt;uses-feature android:glEsVersion=""0x00030000"" android:required=""true"" /&gt;
...
</code></pre>

<p>CMAKE: (mostly from native-activity example)</p>

<pre><code>...

add_library(
    native-activity
    SHARED
    main.cpp)

target_include_directories(
    native-activity
    PRIVATE
    ${ANDROID_NDK}/sources/android/native_app_glue)

# add lib dependencies
target_link_libraries(
    native-activity
    android
    native_app_glue
    EGL
    GLESv3
    log)

...
</code></pre>

<p>main.cpp: (mostly from native-activity example, cropped for relevance)</p>

<pre><code>...

#include &lt;EGL/egl.h&gt;
#include &lt;EGL/eglext.h&gt;
#include &lt;GLES3/gl3.h&gt;
#include &lt;GLES3/gl3ext.h&gt;
#include &lt;android_native_app_glue.h&gt;

...

/*
 *Test GLES 1.0, should draw a white triangle on red background
 */
class TestGLES10 {
public:
    GLuint program;

    void create() {

        char vssource[] =
                ""attribute vec4 vertexPosition; \n""
                ""void main(){                       \n""
                ""   gl_Position = vertexPosition;   \n""
                ""}                                  \n"";

        char fssource[] =
                ""precision mediump float; \n""
                ""void main(){ \n""
                ""   gl_FragColor = vec4(1.0); ""
                ""}                                  \n"";

        auto compile = [](const char *source, GLenum type){
            GLuint shader = glCreateShader(type);
            glShaderSource(shader, 1, &amp;source, nullptr);
            glCompileShader(shader);
            return shader;
        };

        GLuint vs = compile(string(vssource).c_str(), GL_VERTEX_SHADER);
        GLuint fs = compile(string(fssource).c_str(), GL_FRAGMENT_SHADER);

        program = glCreateProgram();
        glAttachShader(program, vs);
        glAttachShader(program, fs);

        glBindAttribLocation(program, 0, ""vertexPosition"");

        glLinkProgram(program);

        glDisable(GL_DEPTH_TEST);
    }

    void update() {

        glClearColor(1,0,0,1);
        glClear(GL_COLOR_BUFFER_BIT);

        glUseProgram(program);

        float positions[]{
                0.0f,  0.1f,
                -0.1f, -0.1f,
                0.1f, -0.1f
        };

        glVertexAttribPointer(0, 3, GL_FLOAT, GL_FALSE, 0, positions);
        glEnableVertexAttribArray(0);

        glDrawArrays(GL_TRIANGLES, 0, 3);
    }
};

/*
 *Test GLES 3.0, should draw a white triangle on blue background
 */
class TestGLES30 {
public:
    GLuint vbo, vao, program;

    void create() {

        char vssource[] =
            ""#version 300 es\n""
            ""layout(location=0) in vec4 vertexPosition; \n""
            ""void main(){                       \n""
            ""   gl_Position = vertexPosition;   \n""
            ""}                                  \n"";

        char fssource[] =
            ""#version 300 es\n""
            ""precision mediump float; \n""
            ""out vec4 fragment; \n""
            ""void main(){ \n""
            ""   fragment = vec4(1.0); ""
            ""}                                  \n"";

        auto compile = [](const char *source, GLenum type){
            GLuint shader = glCreateShader(type);
            glShaderSource(shader, 1, &amp;source, nullptr);
            glCompileShader(shader);
            return shader;
        };

        GLuint vs = compile(string(vssource).c_str(), GL_VERTEX_SHADER);
        GLuint fs = compile(string(fssource).c_str(), GL_FRAGMENT_SHADER);

        program = glCreateProgram();
        glAttachShader(program, vs);
        glAttachShader(program, fs);
        glLinkProgram(program);

        float positions[]{
             0.0f,  0.5f,
            -0.5f, -0.5f,
             0.5f, -0.5f
        };

        glGenBuffers(1, &amp;vbo);
        glBindBuffer(GL_ARRAY_BUFFER, vbo);
        glBufferData(GL_ARRAY_BUFFER, 2*4, positions, GL_STATIC_DRAW);

        glGenVertexArrays(1, &amp;vao);
        glBindVertexArray(vao);

        glEnableVertexAttribArray(0);
        glVertexAttribPointer(0, 2, GL_FLOAT, GL_FALSE, 2*4, 0);

        glBindBuffer(GL_ARRAY_BUFFER, 0);
        glBindVertexArray(0);
    }

    void update() {

        glClearColor(0,0,1,1);
        glClear(GL_COLOR_BUFFER_BIT);

        glUseProgram(program);

        glBindVertexArray(vao);
        glDrawArrays(GL_TRIANGLES, 0, 3);
        glBindVertexArray(0);
    }
};

...

void android_main(android_app* appInterface) {

    appInterface-&gt;onAppCmd = commandRelay;
    appInterface-&gt;onInputEvent = inputRelay;

    while(appInterface-&gt;window == nullptr){
        pollEvents(appInterface);
    }

    EGLDisplay display;
    EGLSurface surface;
    EGLContext context;
    EGLint majorVersion, minorVersion;
    EGLConfig config;
    EGLint width, height;
    EGLint nativeVisualID;
    EGLint configCount;

    display = eglGetDisplay(EGL_DEFAULT_DISPLAY);
    assert(display != EGL_NO_DISPLAY);

    eglInitialize(display, &amp;majorVersion, &amp;minorVersion);

    //https://www.khronos.org/registry/EGL/sdk/docs/man/html/eglChooseConfig.xhtml
    const EGLint displayAttrib[] = {
        EGL_RENDERABLE_TYPE, EGL_OPENGL_ES2_BIT,//egl 1.3 req
        EGL_NATIVE_RENDERABLE, EGL_TRUE,
        EGL_SURFACE_TYPE, EGL_WINDOW_BIT,
        EGL_BLUE_SIZE, 8,
        EGL_GREEN_SIZE, 8,
        EGL_RED_SIZE, 8,
        EGL_NONE
    };

    //retreive configs
    eglChooseConfig(display, displayAttrib, 0, 0, &amp;configCount);
    std::unique_ptr&lt;EGLConfig[]&gt; supported(new EGLConfig[configCount]);
    eglChooseConfig(display, displayAttrib, supported.get(), configCount, &amp;configCount);

    EGLint i = 0, v;
    for (; i &lt; configCount; i++) {

        auto get = [&amp;](EGLint attrib){
            eglGetConfigAttrib(display, supported[i], attrib, &amp;v);
            return v;
        };
        if (Math2::equal(8,
            get(EGL_RED_SIZE),
            get(EGL_GREEN_SIZE),
            get(EGL_BLUE_SIZE),
            get(EGL_DEPTH_SIZE))) {//expands to 8 == get(EGL_RED_SIZE) == ...

            config = supported[i];
            break;
        }
    }
    if (i == configCount) {//default to first
        config = supported[0];
    }

    const EGLint surfaceAttrib[] = {
        EGL_RENDER_BUFFER, EGL_BACK_BUFFER,// render to the back buffer, egl 1.2 req
        EGL_NONE
    };

    eglGetConfigAttrib(display, config, EGL_NATIVE_VISUAL_ID, &amp;nativeVisualID);
    surface = eglCreateWindowSurface(display, config, appInterface-&gt;window, surfaceAttrib);

    const EGLint contextAttrib[] = {
        EGL_CONTEXT_CLIENT_VERSION, 2,// request a context using Open GL ES 2.0
        EGL_NONE
    };

    context = eglCreateContext(display, config, EGL_NO_CONTEXT, contextAttrib);
    assert(context != EGL_NO_CONTEXT);

    //sets initial viewport and scissor dimensions to draw surface size
    eglMakeCurrent(display, surface, surface, context);

    eglQuerySurface(display, surface, EGL_WIDTH, &amp;width);
    eglQuerySurface(display, surface, EGL_HEIGHT, &amp;height);

    //this call was mentioned, but missing from the example (removing has same effect)
    ANativeWindow_setBuffersGeometry(appInterface-&gt;window, width, height, nativeVisualID);


    TestGLES10 test;
    test.create();

    while (true){
        test.update();
        eglSwapBuffers(display, surface);
    }
}
</code></pre>

<hr>

<p>Results:</p>

<p>Logged Info:</p>

<pre><code>Vendor : Qualcomm
Renderer : Adreno (TM) 530
Version : OpenGL ES 3.2 V@145.0 (GIT@I86b60582e4)
EGL version : 1.4
Window dimensions : 1080, 1920
</code></pre>

<p>Additionally, the device has resolution scaling set to 1080x1920.</p>

<p>Test 1.0: <a href=""https://i.imgur.com/dmofGYw.png"" rel=""nofollow noreferrer"">https://i.imgur.com/dmofGYw.png</a>
Test 3.0: <a href=""https://i.imgur.com/uoghOZc.png"" rel=""nofollow noreferrer"">https://i.imgur.com/uoghOZc.png</a></p>

<p>According to:
<a href=""https://www.khronos.org/registry/EGL/sdk/docs/man/html/eglMakeCurrent.xhtml"" rel=""nofollow noreferrer"">https://www.khronos.org/registry/EGL/sdk/docs/man/html/eglMakeCurrent.xhtml</a>
the glViewPort should have been initialized to the surface size (1080x1920), so I am at a loss for how the white rectangle could occur.</p>

<p>The shader code for both tests compile without errors from Adreno.</p>

<hr>

<p><strong>Why wont it render geometry correctly?</strong></p>

<p>According to :
<a href=""https://www.khronos.org/registry/EGL/sdk/docs/man/html/eglCreateContext.xhtml"" rel=""nofollow noreferrer"">https://www.khronos.org/registry/EGL/sdk/docs/man/html/eglCreateContext.xhtml</a>
there is no way to specifically request a 3.0 or higher context, <strong>why does the created context have version 3.2 when I can only request 2.0?</strong></p>
",3537499,,3537499,,2018-03-10 19:39:45,2018-03-10 20:52:24,Android NDK OpenGLES not rendering triangles,<c++><opengl-es><android-ndk>,1,0,,,
Android,49213525,1,49214549,1075,3/10/2018 22:13:16,0,,3/10/2018 20:07:36,,1,238,"<p>I have activity with bottom bar, that switches two fragments <code>galleryFrament</code> and <code>profilefragment</code>, that are injected into <code>MainActivity</code>: </p>

<pre><code>class MainActivity : DaggerAppCompatActivity(), MainContract.View {

@Inject
lateinit var galleryFragment: GalleryFragment

@Inject
lateinit var profileFragment: ProfileFragment
</code></pre>

<p>I switch between them in this way:</p>

<pre><code>val transaction = fragmentManager.beginTransaction()
transaction.replace(frameId, fragment)
transaction.commit()
</code></pre>

<p>Module that provides <code>MainActivity</code>, with Scope <code>@ActivityScoped</code>:</p>

<pre><code>  @Module
  abstract class ActivityBindingModule {

    @ActivityScoped
    @ContributesAndroidInjector(modules = arrayOf(MainModule::class, GalleryModule::class, ProfileModule::class))
    internal abstract fun mainActivity(): MainActivity
</code></pre>

<p>Module that provides <code>GalleryFragment</code>:</p>

<pre><code>  @Module
internal abstract class GalleryModule {

    @FragmentScoped
    @ContributesAndroidInjector
    abstract fun galleryFragment(): GalleryFragment

    @ActivityScoped
    @Binds
    abstract fun galleryPresenter(galleryPresenter: GalleryPresenter): GalleryContract.Presenter


    @Module
    companion object {
        @ActivityScoped
        @Provides
        @JvmStatic
        fun galleryAdapter(context: Context): GalleryAdapter {
            return GalleryAdapter(context);
        }
    }
}
</code></pre>

<p>And, finaly <code>AppComponent</code>:</p>

<pre><code>@Singleton
@Component(modules = arrayOf(ImagesRepositoryModule::class,
        ApplicationModule::class,
        ActivityBindingModule::class,
        AndroidSupportInjectionModule::class,
        EventsModule::class))
interface AppComponent : AndroidInjector&lt;MyApplication&gt; {
</code></pre>

<p><code>GalleryFragment</code> is provided with <code>@FragmentScoped</code> annotation from <code>GaleryModule</code>. I took aproach with annotatins <code>@FragmentScoped</code> and <code>@ActivityScoped</code> from google blueprints samples posted here: <a href=""https://github.com/googlesamples/android-architecture][google-archutecture"" rel=""nofollow noreferrer"">https://github.com/googlesamples/android-architecture][google-archutecture</a></p>

<p><strong>The probem is:</strong> When I switch fragments, the new instance of <code>GalleryFrament</code> is created (<code>onCreate()</code> called every time), but I want to use previously created instance of it. 
As I understand dagger scopes, <code>GalleryFragment</code> should be <code>@ActivityScoped</code>(to keep it alive as long as activity lives), but if I set it, <code>@ContributesAndroidInjector</code> produces Subcomponent with the same scope as its parent, and that is illegal. </p>
",1433537,,,,,2018-03-10 22:30:23,Android Dagger 2 keep fragment alive as long as activity,<android><dagger-2><dagger-android>,1,0,,,
Android,49232559,1,49280941,663,3/14/2018 14:55:50,2,,3/12/2018 10:07:06,,4,1722,"<p>Looks like <code>ConstraintSet</code> is finding hard to cope up with <code>Start/End</code> constrains.<br/></p>

<p>This example is taken from <em>Google samples</em>.
Github: <a href=""https://github.com/googlesamples/android-ConstraintLayoutExamples"" rel=""nofollow noreferrer"">android-ConstraintLayoutExamples</a></p>

<p><br/></p>

<p>When you replace Left &amp; Right constrains with <code>Start</code> &amp; <code>End</code>, ConstraintSet - not working properly, It's working with <code>Left/Right</code> constrains only.
<br/>
For example replace 
layout_constraintStart_toStartOf with layout_constraintLeft_toLeftOf  &amp; replace
layout_constraintEnd_toEndOf with layout_constraintRight_toRightOf </p>

<p>in following files:<br/>
<a href=""https://github.com/googlesamples/android-ConstraintLayoutExamples/blob/master/app/src/main/res/layout/constraintset_example_main.xml"" rel=""nofollow noreferrer"">constraintset_example_main.xml</a><br/>
<a href=""https://github.com/googlesamples/android-ConstraintLayoutExamples/blob/master/app/src/main/res/layout/constraintset_example_big.xml"" rel=""nofollow noreferrer"">constraintset_example_big.xml</a>
<br/></p>

<p>Behaviour:
<a href=""https://i.stack.imgur.com/9MF2j.gif"" rel=""nofollow noreferrer""><img src=""https://i.stack.imgur.com/9MF2j.gif"" alt=""""></a></p>

<p><strong>onClick of image:</strong></p>

<pre><code>private ConstraintSet mConstraintSetNormal = new ConstraintSet();

    private ConstraintSet mConstraintSetBig = new ConstraintSet();

 public void toggleMode(View v) {
        TransitionManager.beginDelayedTransition(mRootLayout);
        mShowBigImage = !mShowBigImage;
        applyConfig();
    }

    private void applyConfig() {
        if (mShowBigImage) {
            mConstraintSetBig.applyTo(mRootLayout);
        } else {
            mConstraintSetNormal.applyTo(mRootLayout);
        }
    }
</code></pre>

<p>By default Android studio uses <code>start</code>/ <code>end</code> constrains hence it's I want to know root cause and possible fix. <br/>
Or Is this a bug with <code>ConstrainSet</code> itself?</p>
",4903889,,4903889,,2018-03-15 4:51:30,2018-03-16 5:49:48,ConstrainLayout ConstraintSet - not working properly with Start/End constrains,<android><android-constraintlayout>,2,2,1,,
Android,49417910,1,49418792,1044,3/22/2018 0:45:50,1,,3/21/2018 23:03:10,,1,41,"<p>I started with Googles <a href=""https://github.com/googlesamples/android-play-location/tree/master/LocationUpdatesPendingIntent"" rel=""nofollow noreferrer"">LocationUpdatesPendingIntent</a> example.
I've moved the location stuff from the Main Activity to the onBoot broadcast receiver as I need location updates to start straight away when the device boots. This works perfectly and provides a notification in the status bar.</p>

<p>But how do I go about turning the location updates on and off from an Activity?</p>

<p>This is for polling vehicle locations.</p>

<p>This is my BroadcastReceiver:</p>

<pre><code>public class StartupComplete1 extends BroadcastReceiver {

private static final long UPDATE_INTERVAL = 10000; // Every 10 seconds.
private static final long FASTEST_UPDATE_INTERVAL = 5000; // Every 5 seconds
private static final long MAX_WAIT_TIME = UPDATE_INTERVAL * 2; // Every 20 seconds.
private LocationRequest mLocationRequest;
private FusedLocationProviderClient mFusedLocationClient;

@Override
public void onReceive(Context context, Intent intent) {

    if (intent.getAction().equalsIgnoreCase(Intent.ACTION_BOOT_COMPLETED)) {

        mFusedLocationClient = LocationServices.getFusedLocationProviderClient(context);
        createLocationRequest();

        try {
            mFusedLocationClient.requestLocationUpdates(mLocationRequest, getPendingIntent(context));
        } catch (SecurityException e) {
            Toast.makeText(context, ""Error - Cant start location updates"", Toast.LENGTH_LONG).show();
            e.printStackTrace();
        }
    }
}

private PendingIntent getPendingIntent(Context context) {
    Intent intent = new Intent(context, LocationUpdatesBroadcastReceiver.class);
    intent.setAction(LocationUpdatesBroadcastReceiver.ACTION_PROCESS_UPDATES);
    return PendingIntent.getBroadcast(context, 0, intent, PendingIntent.FLAG_UPDATE_CURRENT);
}

private void createLocationRequest() {
    mLocationRequest = new LocationRequest();
    mLocationRequest.setInterval(UPDATE_INTERVAL);
    mLocationRequest.setFastestInterval(FASTEST_UPDATE_INTERVAL);
    mLocationRequest.setPriority(LocationRequest.PRIORITY_HIGH_ACCURACY);
    mLocationRequest.setMaxWaitTime(MAX_WAIT_TIME);
}
</code></pre>
",1306140,,,,,2018-03-22 0:45:50,Location Updates on Boot - turn on and off in activity,<android><location>,1,0,,,
Android,49488903,1,49489018,1045,3/26/2018 10:15:09,0,,3/26/2018 10:09:01,,32,7467,"<p>I'm trying to set up location updates in my Android app using <code>com.google.android.gms:play-services-location:12.0.0</code>, but I'm getting the following error:</p>

<blockquote>
  <p>LocationRequest constructor is marked as internal and should not be accessed from apps</p>
</blockquote>

<p>My location updates request looks like this:</p>

<pre><code>locationClient.requestLocationUpdates(
    new LocationRequest()
        .setInterval(5000)
        .setFastestInterval(1000)
        .setPriority(LocationRequest.PRIORITY_HIGH_ACCURACY),
    locationCallback,
    null
);
</code></pre>

<p>I have followed the <a href=""https://developer.android.com/training/location/change-location-settings.html#location-request"" rel=""noreferrer"">docs</a> and the <a href=""https://github.com/googlesamples/android-play-location/blob/432d3b72b8c058f220416958b444274ddd186abd/LocationUpdates/app/src/main/java/com/google/android/gms/location/sample/locationupdates/MainActivity.java#L238"" rel=""noreferrer"">example</a>, which do it the same way. If I'm not supposed to call <code>new LocationRequest()</code>, then what is the proper way to do it?</p>
",4136777,,4136777,,2018-03-28 12:20:29,2018-04-04 14:24:37,LocationRequest constructor is marked as internal,<java><android><location>,2,0,3,,
Android,49590960,1,49592891,1046,3/31/2018 22:07:19,0,,3/31/2018 18:19:08,,3,2004,"<p>I was wondering, what are some common practice, to insert (or delete) single <code>List</code> item from <code>LiveData</code>?</p>

<p>Currently, here's what I plan to do.</p>

<p>I have the following <code>LiveData</code></p>

<pre><code>LiveData&lt;List&lt;Animal&gt;&gt; animalListLiveData;
</code></pre>

<p>This is how I plan to observe it.</p>

<pre><code>animalListLiveData.observe(this, animalList -&gt; {

    if (listView.getAdapter() == null) {
        // First time.

        ArrayAdapter&lt;String&gt; adapter = new ArrayAdapter&lt;&gt;(..., animalList);
        // Assign adapter to ListView
        listView.setAdapter(adapter);

    } else {
        // Update operation.

        DiffUtil.DiffResult diffResult = DiffUtil.calculateDiff(new MyDiffUtilCallback(animalList, oldAnimalList));
        diffResult.dispatchUpdatesTo(listView.getAdapter());
    }

    oldAnimalList.clear(); 
    oldAnimalList.addAll(animalList);
});
</code></pre>

<p>This is how I'm going to insert a single item into <code>LiveData</code></p>

<pre><code>animalListLiveData.getValue().add(newAnimal);
// Inform observer.
animalListLiveData.setValue(animalListLiveData.getValue())
</code></pre>

<p>I feel that my method is overkill for such a simple update operation. If the <code>List</code> is huge, <code>DiffUtil</code> needs to scan through the entire <code>List</code>.</p>

<p>Other developers have the same feeling as I do. <a href=""https://github.com/googlesamples/android-architecture-components/issues/135"" rel=""nofollow noreferrer"">https://github.com/googlesamples/android-architecture-components/issues/135</a></p>

<p>No good solution suggested so far.</p>

<p>I was wondering, do you discover any good practice (pattern), to insert (or delete) single <code>List</code> item from <code>LiveData</code>?</p>
",72437,,,,,2018-03-31 22:07:19,Insert (or delete) single List item from LiveData,<android><android-architecture-components><android-livedata>,1,0,,,
Android,49588393,1,49606378,1047,4/2/2018 6:30:54,2,,3/31/2018 13:40:45,,1,93,"<p>I am using Google Play Developer API v2 to <strong>programmatically upload my beta apks</strong> on the playstore and it's working fine :-)</p>

<p>Now, I would like to <strong>programmatically</strong> 'promote' the beta apks from the 'beta' track to the 'production' track (so I do not need to do it manually on Google Dev Console anymore. My app suite is composed of 10 apps.. this takes time) </p>

<p>I am trying, but I do not clearly understand how I am suppose to do without reuploading the apks.<br>
What I want to achieve is modifying the previously uploaded apks and just change the <a href=""https://developers.google.com/resources/api-libraries/documentation/androidpublisher/v2/java/latest/com/google/api/services/androidpublisher/model/Track.html"" rel=""nofollow noreferrer"">Track</a>, from 'beta' to 'production'.</p>

<p>Below is the code I wrote, which does:</p>

<ul>
<li>Find all tracks</li>
<li>Locate the 'beta' track</li>
<li>find the corresponding apk</li>
<li>Change (<strong><em>but not the right way</em></strong>) the apk track from 'beta' to 'production'</li>
<li>commit changes -> exception below:</li>
</ul>

<blockquote>
<pre><code>SEVERE: Exception was thrown while updating listing
com.google.api.client.googleapis.json.GoogleJsonResponseException: 403 Forbidden
{
  ""code"" : 403,
  ""errors"" : [ {
    ""domain"" : ""androidpublisher"",
    ""message"" : ""Testing-track (alpha/beta) APK with version code 1522428584 appears in another track"",
    ""reason"" : ""testingTrackApkInMultipleTracks""
  } ],
  ""message"" : ""Testing-track (alpha/beta) APK with version code 1522428584 appears in another track""
}
  at com.google.api.client.googleapis.json.GoogleJsonResponseException.from(GoogleJsonResponseException.java:146)
  at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:113)
  at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:40)
  at com.google.api.client.googleapis.services.AbstractGoogleClientRequest$1.interceptResponse(AbstractGoogleClientRequest.java:321)
  at com.google.api.client.http.HttpRequest.execute(HttpRequest.java:1065)
  at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:419)
  at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:352)
  at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.execute(AbstractGoogleClientRequest.java:469)
  at com.elementique.tools.publish.elementique.ElementiquePromoteBetaApkToProduction.main(ElementiquePromoteBetaApkToProduction.java:74)
</code></pre>
</blockquote>

<p>According to the exception, the code I wrote does not modify an existing apk, but, instead, try to create a new one with the very same id as the existing beta track.<br>
I do understand this is wrong, but can't figure out how to do it right..</p>

<p>Here is the code: can someone explain me how to do it the right way?</p>

<p>Thanks.</p>

<pre><code>package com.elementique.tools.publish.elementique;

import com.elementique.tools.publish.AndroidPublisherHelper;
import com.google.api.services.androidpublisher.AndroidPublisher;
import com.google.api.services.androidpublisher.AndroidPublisher.Edits;
import com.google.api.services.androidpublisher.model.*;
import org.apache.commons.logging.Log;
import org.apache.commons.logging.LogFactory;

import java.io.IOException;
import java.security.GeneralSecurityException;
import java.util.ArrayList;
import java.util.List;

public class ElementiquePromoteBetaApkToProduction {

    private static final Log log = LogFactory.getLog(ElementiquePromoteBetaApkToProduction.class);

    private static final String PACKAGE_NAME = ""com.elementique.home"";

    public static final String TRACK_BETA = ""beta"";
    public static final String TRACK_PRODUCTION = ""production"";

    public static void main(String[] args) {
        try {
            // Create the API androidPublisher service.
            final AndroidPublisher androidPublisher = AndroidPublisherHelper.init(""Elementique"", null);
            final Edits edits = androidPublisher.edits();

            // Create a new edit to make changes.
            Edits.Insert insertEdit = edits.insert(PACKAGE_NAME, null);
            AppEdit insertAppEdit = insertEdit.execute();

            // search for 'beta' apk(s) in the 'beta' track..
            // first list all tracks..
            TracksListResponse trackListResponse = edits.tracks().list(PACKAGE_NAME, insertAppEdit.getId()).execute();
            for (Track track : trackListResponse.getTracks()) {
                // filter for beta track..
                if (TRACK_BETA.equals(track.getTrack())) {
                    // beta track found...
                    System.out.println(""Beta Track found!\n"" + track.toPrettyString());
                    // in my case, I am supposed to have exactly one 'beta' apk
                    List&lt;Integer&gt; betaApkVersionCodes = track.getVersionCodes();
                    if (betaApkVersionCodes.size() == 1) {
                        // one apk: OK, that's the 'beta' apk I want to promote to 'production'
                        Integer betaApkVersionCode = betaApkVersionCodes.get(0);

                        // now search for the given apk among all existing apks (is it the good way to proceed..??)
                        ApksListResponse apksListResponse = edits.apks().list(PACKAGE_NAME, insertAppEdit.getId()).execute();
                        for (Apk apk : apksListResponse.getApks()) {
                            // is it our 'beta' apk?
                            if (betaApkVersionCode.equals(apk.getVersionCode())) {
                                System.out.println(""Beta apk found!\n"" + apk.toPrettyString());
                                // OK, we got it.
                                // now trying to change the 'track' of this apk from 'beta' to 'production'
                                // and this is not the way to proceed...
                                List&lt;Integer&gt; apkVersionCodes = new ArrayList&lt;&gt;();
                                apkVersionCodes.add(apk.getVersionCode());
                                Edits.Tracks.Update updateTrackRequest =
                                        edits.tracks().update(
                                                PACKAGE_NAME,
                                                insertAppEdit.getId(),
                                                TRACK_PRODUCTION,
                                                new Track().setVersionCodes(apkVersionCodes));
                                Track updatedTrack = updateTrackRequest.execute();
                                log.info(String.format(""Track %s has been updated."", updatedTrack.getTrack()));

                                // Commit changes for edit.
                                Edits.Commit commitRequest = edits.commit(PACKAGE_NAME, insertAppEdit.getId());
                                AppEdit commitAppEdit = commitRequest.execute();
                                log.info(PACKAGE_NAME + "" beta apk moved to production ("" + commitAppEdit.getId());
                                System.exit(0);
                            }
                        }
                    }
                }
            }
        } catch (IOException | GeneralSecurityException ex) {
            log.error(""Exception was thrown while updating listing"", ex);
        }
    }
}
</code></pre>

<p>(Don't tell me about parenthesis hell, I just wrote this code like that to make a simple test ;-)</p>

<p>Notes:</p>

<ul>
<li>Original Google Smaple project is <a href=""https://github.com/googlesamples/android-play-publisher-api/tree/master/v2/java/src/com/google/play/developerapi/samples"" rel=""nofollow noreferrer"">here</a> and 'Google Play Developer API V2' maven artifact <a href=""https://mvnrepository.com/artifact/com.google.apis/google-api-services-androidpublisher"" rel=""nofollow noreferrer"">here</a></li>
<li>Some additional info: javadoc <a href=""https://developers.google.com/resources/api-libraries/documentation/androidpublisher/v2/java/latest/index.html?com/google/api/services/androidpublisher/AndroidPublisher.html"" rel=""nofollow noreferrer"">here</a> and some additional (non java) info <a href=""https://developers.google.com/android-publisher/api-ref/"" rel=""nofollow noreferrer"">here</a><br></li>
</ul>
",660350,,660350,,2018-04-01 9:26:23,2018-04-02 12:43:07,Promoting 'beta' apk to 'production' programmatically,<android><google-play-developer-api>,1,1,,,
Android,49688616,1,49689440,1048,4/6/2018 9:20:06,0,,4/6/2018 8:33:22,,3,870,"<p>I'm new to android enterprise development world, and I have some misconception of how different pieces in the android enterprise ecosystem relate to one another. Let me explain. </p>

<p>The solution that I'm trying to achieve is being able to lock the device into kiosk mode both remotely, and also based on some business logic do it even when the user is offline. I started investigating EMM and particularly <a href=""https://developers.google.com/android/management/"" rel=""nofollow noreferrer"">Android Management API</a> to solve the problem. I was able to lock the device remotely into kiosk mode using the API. The steps that I take is following</p>

<ol>
<li>Factory reset the android device</li>
<li>Reach the screen where user needs to enter their credentials</li>
<li>Instead of real credentials I enter afw#setup</li>
<li>Device enters into work profile mode and android device policy is being installed</li>
<li>I create an enrollment token in the management API (the steps for that are described in the <a href=""https://developers.google.com/android/management/quickstart"" rel=""nofollow noreferrer"">quick start guide</a></li>
<li>I generate a QR code and scan it using the factory reset device as soon as I'm prompted</li>
<li>The device will be linked to the enterprise, and I'm successfully being able to control it and put the device into kiosk mode by creating special kiosk mode policy and patching the device to comply to that policy using a combination of <a href=""https://developers.google.com/android/management/reference/rest/v1/enterprises.policies/patch"" rel=""nofollow noreferrer"">patch policy</a> (to create a policy) and <a href=""https://developers.google.com/android/management/reference/rest/v1/enterprises.devices/patch"" rel=""nofollow noreferrer"">patch device</a> APIs.</li>
</ol>

<p>The next step was finding out a way to lock the device into kiosk mode even when user is offline. I assume that it's going to happen by creating an android enterprise custom DPC (device policy controller) application. I assumed that by reading the <a href=""https://developer.android.com/work/cosu.html#create-dpc"" rel=""nofollow noreferrer"">following</a> documentation, where one of the 3 ways of provisioning ""single purpose"" devices is creating a custom DPC application. Here's another quote from different <a href=""https://developers.google.com/android/work/dpc/build-dpc"" rel=""nofollow noreferrer"">url</a></p>

<blockquote>
  <p>As an EMM, you develop a DPC app that can be used by your customers in conjunction with your EMM console and server. Your customer deploys the DPC to the user devices that they manage. The DPC acts as the bridge between your EMM console (and server) and the device. An admin uses the EMM console to perform a range of tasks, including configuring device settings and apps.</p>
</blockquote>

<p>And here's where all of my confusions arise. 
First question that naturally arises - <strong>was the author of the previous quote referring to EMM management API when talking about EMM console and server?</strong> </p>

<p>Further, there are more questions that I couldn't find an answer to</p>

<p>In the <a href=""https://developers.google.com/android/work/dpc/build-dpc"" rel=""nofollow noreferrer"">guide</a> for creating a custom DPC there are no mentions about what role EMM API will play in custom DPC, and consequently there's no place I could find that describes <strong>how exactly the custom DPC is a bridge between the EMM console (presumably EMM API) and the device?</strong></p>

<p>Then, let's assume I've developed a custom DPC application and uploaded it to google play alpha channel. <strong>The <a href=""https://developers.google.com/android/work/prov-devices#set_up_device_owner_mode_afw_accts"" rel=""nofollow noreferrer"">documentation</a> states that during the setup process instead of entering afw#setup I should enter afw#DPC_NAME, and I have no idea how to generate that name?</strong> Is it the bundle ID of the DPC app? Or perhaps it's being set somewhere in google settings? For instance, google has developed the <a href=""https://github.com/googlesamples/android-testdpc"" rel=""nofollow noreferrer"">TestDPC</a> application to test enterprise solutions, and I was able to go through the steps I described above and enter afw#testdpc and successfully scanned the QR code in the git readme file and I saw that TestDPC was installed and device was launched into work profile mode. So, I assume somehow I need to register my own ""testdpc"" and enter afw#my_dpc instead.</p>

<p>Basically I have different pieces working stand alone and I want to form a broader picture in my mind to understand how to stitch those pieces together.</p>

<p>Thanks for your answers </p>

<p><strong>UPDATE 1:</strong></p>

<p>Today I found a way of turning custom DPC into device owner without going through NFC or other provisioning process. This is particularly useful for development purposes. Follow <a href=""http://florent-dupont.blogspot.am/2015/01/android-shell-command-dpm-device-policy.html"" rel=""nofollow noreferrer"">this link</a> for instructions.This is both huge time saver, and also, in my case, we still are waiting for google's approval, but finally we can start testing some stuff without the need of custom provisioning process.</p>
",737972,,737972,,2018-04-25 17:05:35,2018-04-25 17:05:35,How does designing custom android DPC app relate to Android management API?,<android><kiosk-mode><cosu><android-enterprise><android-management-api>,1,0,1,,
Android,49762991,1,49778032,1049,4/11/2018 14:41:45,1,,4/10/2018 21:18:19,,1,327,"<p>I'm writing an Android application and although I already have read about MVP and saw some examples in Android, I'm in doubt about how should I structure this part of the app.</p>

<p>NOTE: My app follows a structure very similar to: <a href=""https://github.com/googlesamples/android-architecture/tree/todo-mvp"" rel=""nofollow noreferrer"">https://github.com/googlesamples/android-architecture/tree/todo-mvp</a></p>

<p>In this app, the Model should fetch JSON data from a web service. This data, among other stuff, contains links of images that the app should download asynchronously. And, after downloading, these images should be presented to the user.</p>

<p>How should I approach this?</p>

<p>Right now, my idea is to add the web service request logic on the Model (I'm also using the Repository pattern) and the download logic on the Presenter. Something like this (the code is just an example): </p>

<pre><code>class MyPresenter {
    ....

    void init() {
        myRepositoryInstance.fetchDataAndSaveLocally(new MyCallback() {

            @Override
            public void success(List&lt;Thing&gt; listOfThings) {
                // do some other stuff with listOfThings data
                ...

                List&lt;URL&gt; imagesURL = getImagesURLs(listOfThings);

                // config/use Android DownloadManager to download the images
                ...

                registerReceiver(onImageDownloadComplete, new IntentFilter(DownloadManager.ACTION_DOWNLOAD_COMPLETE));
            }

            @Override
            public void error() {// logging stuff, try again...}
        });
    }

    void onImageDownloadComplete() {
        URL path = getWhereTheImageWasSaved();
        Thing thing = getInstanceOfThingAssociatedWithThisImage();
        myRepositoryInstance.updatePathOfThingImage(thing, path);
        viewInstance.updateTheViewPager(); // I'll probably show these images on a ViewPager
    }

    ....
}
</code></pre>

<p>Does this makes sense? Does the download logic belongs to the Presenter? Am I putting too much logic on the Presenter?</p>

<p>NOTE: I' thinking about putting the download logic in the Presenter because the DownloadManager needs a Context (btw, Glide needs too). Alternatively, I know that I can use an AsyncTask on the Model to download using an HttpURLConnection, but how should I inform the download result back to the Presenter? In the latter, should I use events? </p>

<p>NOTE 2: I would love if I could unit test this part of the app (Mocking the DownloadManager). So, passing the Context to the Model is not an option, as it breaks the MVP (IMHO) and would be much harder to unit test it.</p>

<p>Any informed help would be appreciated!</p>

<h2>Updates</h2>

<p>Thanks for you response @amadeu-cavalcante-filho. Let me address each issue. First, the Context problem: I need a Context, if I use Glade (an image download library) or DownloadManager, to download the images, thus, if I download the images on the Model (repository) Iâ€™ll have to give to the Model a Context instance and this clearly breaks the MVP. </p>

<p>Second, the MVVM, I donâ€™t know much about the MVVM, but it seems to me that the Model in MVP should know how to fetch data (<a href=""https://medium.com/@cervonefrancesco/model-view-presenter-android-guidelines-94970b430ddf"" rel=""nofollow noreferrer"">https://medium.com/@cervonefrancesco/model-view-presenter-android-guidelines-94970b430ddf</a>) using a repository pattern or something like that.</p>

<p>Third, I'm prone to accept that the Presenter can indeed download the images (this is specifically the example that I constructed in my question). But, my problem is: should the Presenter know about Android stuff (the Context in this case)? This is a huge part of my question, where the Android stuff should be in the MVP? The only place that can know about Android stuff  is the view, but the download logic clearly doesnâ€™t belong there.</p>
",3186218,,3186218,,2018-04-11 13:45:49,2018-04-11 14:41:45,"Where should I put the image download logic on Android, according to the MVP pattern?",<android><mvp><android-mvp>,2,4,,,
Android,46689217,1,49928687,1050,4/19/2018 19:20:06,190,,10/11/2017 13:15:32,,3,243,"<p>I have a little problem with designing DI architecture of my app. I am using Architecture Components ViewModels and I was inspired how to provide ViewModels via Dagger in their own GitHub <a href=""https://github.com/googlesamples/android-architecture-components/blob/388a10dd5a814ba6aaa9bf8dee8e7c1c5840b3a5/GithubBrowserSample/app/src/main/java/com/android/example/github/di/ViewModelModule.java"" rel=""nofollow noreferrer"">repository</a>   .. I want to create scoped component/module for example for product detail that would provide ViewModels/Repositories and other stuff dependent on that single product.. problem is that all ViewModels are provided from the same ViewModelModule as in given example. But ProductViewModel needs ProductRepository that is provided from scoped subcomponent ProductModule. And apparently thats not possible because Dagger throws error at build time that I need to provide ProductRepository with @Provides annotation. </p>

<p>Ok so I thought that I would provide ProductViewModel in my ProductModule but then it crashes at runtime, because provider of my ViewModel can't be found in this <a href=""https://github.com/googlesamples/android-architecture-components/blob/388a10dd5a814ba6aaa9bf8dee8e7c1c5840b3a5/GithubBrowserSample/app/src/main/java/com/android/example/github/viewmodel/GithubViewModelFactory.java#L33"" rel=""nofollow noreferrer"">method</a>  </p>

<p>Is it possible at all to have this architecture or do I need to redesign it to not use the same method as Google in their sample?</p>
",1478296,,,,,2018-04-19 19:20:06,Dagger 2 bindings delegation with subcomponents,<android><mvvm><dependency-injection><dagger-2>,1,12,,,
Android,49833533,1,50061778,1051,4/27/2018 11:48:48,13,,4/14/2018 16:16:30,,5,3301,"<p>I'm currently writing some UI unit tests for a fragment, and one of these <code>@Test</code> is to see if a list of objects is correctly displayed, this is <strong>not an integration</strong> test, therefore I wish to <strong>mock</strong> the <code>ViewModel</code>.</p>

<p>The fragment's vars:</p>

<pre><code>class FavoritesFragment : Fragment() {

    private lateinit var adapter: FavoritesAdapter
    private lateinit var viewModel: FavoritesViewModel
    @Inject lateinit var viewModelFactory: FavoritesViewModelFactory

    (...)
</code></pre>

<p>Here's the code:</p>

<pre><code>@MediumTest
@RunWith(AndroidJUnit4::class)
class FavoritesFragmentTest {

    @Rule @JvmField val activityRule = ActivityTestRule(TestFragmentActivity::class.java, true, true)
    @Rule @JvmField val instantTaskExecutorRule = InstantTaskExecutorRule()

    private val results = MutableLiveData&lt;Resource&lt;List&lt;FavoriteView&gt;&gt;&gt;()
    private val viewModel = mock(FavoritesViewModel::class.java)

    private lateinit var favoritesFragment: FavoritesFragment

    @Before
    fun setup() {
        favoritesFragment = FavoritesFragment.newInstance()
        activityRule.activity.addFragment(favoritesFragment)
        `when`(viewModel.getFavourites()).thenReturn(results)
    }

    (...)

    // This is the initial part of the test where I intend to push to the view
    @Test
    fun whenDataComesInItIsCorrectlyDisplayedOnTheList() {
        val resultsList = TestFactoryFavoriteView.generateFavoriteViewList()
        results.postValue(Resource.success(resultsList))

        (...)
    }
</code></pre>

<p>I was able to mock the <code>ViewModel</code> but of course, that's not the same <code>ViewModel</code> created inside the <code>Fragment</code>.</p>

<p>So my question really, has someone done this successfully or has some pointers/references that might help me out?</p>

<ul>
<li><p>Also, I've tried looking into the <a href=""https://github.com/googlesamples/android-architecture-components"" rel=""noreferrer"">google-samples</a> but with no luck.</p></li>
<li><p><strong>For reference, the project can be found here:</strong> <a href=""https://github.com/JoaquimLey/transport-eta/"" rel=""noreferrer"">https://github.com/JoaquimLey/transport-eta/</a></p></li>
</ul>
",3374428,,3374428,,2018-04-27 7:47:08,2018-08-10 12:47:04,How to correctly mock ViewModel on androidTest,<android><kotlin><mockito><android-espresso><android-architecture-components>,5,0,2,,
Android,50053555,1,50145474,1052,5/3/2018 0:56:08,6,,4/27/2018 0:17:45,,1,260,"<p>I'm implementing an MVP app in which the Views are fragments loaded in Activities. Each Activity had 1 fragment to display. I have to change my implementation and add the TabLayout which will now display the fragments. I've tried different ways of passing the fragment to the adapter but all makes my app crash and I can't understand the error. My last try, I'm passing an arraylist of fragments(1 for now) to the adapter. At the base, I'm following <a href=""https://github.com/googlesamples/android-architecture/tree/todo-mvp/"" rel=""nofollow noreferrer"">google samples MVP todo app</a>, but I need to implement this tab layout. Please, this is for my major project, I looked everywhere and this is my last resort.</p>

<pre><code>public class HomeActivity extends AppCompatActivity implements NavigationView.OnNavigationItemSelectedListener {
    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_home);

        Toolbar mHomeToolbar = (Toolbar) findViewById(R.id.toolbar);    // Set to the corresponding Toolbar in the UI.
        setSupportActionBar(mHomeToolbar);

        mDrawerLayout = (DrawerLayout) findViewById(R.id.drawer_layout);    // Set to the corresponding Drawer Layout in the UI.

        ActionBarDrawerToggle mToggle = new ActionBarDrawerToggle(this, mDrawerLayout, mHomeToolbar, R.string.navigation_drawer_open, R.string.navigation_drawer_close);
        mDrawerLayout.addDrawerListener(mToggle);   // Set mToggle as Drawer's toggle button and listen to actions.
        mToggle.syncState();

        NavigationView mDrawerNavigationView = (NavigationView) findViewById(R.id.nav_view);    // Set the corresponding Navigation View in the UI.

        mDrawerNavigationView.setNavigationItemSelectedListener(this);  // Add listener on Navigation's items.

        HomeFragment homeFragment = (HomeFragment) getSupportFragmentManager().findFragmentById(R.id.Quests_Frame); // Set to corresponding Fragment View in the UI.

        if (homeFragment == null) {
            homeFragment = HomeFragment.newInstance();
            FragmentLoader.loadFragmentInActivity(getSupportFragmentManager(), homeFragment, R.id.Quests_Frame);    // Display fragment in Activity.
        }

        repo = QuestsRepository.getInstance(QuestsDataSource.getINSTANCE());
        mHomePresenter = new HomePresenter(repo , homeFragment);

        TabLayout tabLayout = (TabLayout) findViewById(R.id.tab_layout);
        ViewPager viewPager = (ViewPager) findViewById(R.id.pager);
        TabPagerAdapter adapter = new TabPagerAdapter(getSupportFragmentManager());
        adapter.addFragment(homeFragment);
        viewPager.setAdapter(adapter);

    }
</code></pre>

<p>The adapter class:</p>

<pre><code>public class TabPagerAdapter extends FragmentPagerAdapter {

    private final List&lt;Fragment&gt; mFragmentList = new ArrayList&lt;&gt;();
    private final int tabCount = 3;

    public TabPagerAdapter(FragmentManager fragmentManager) {
        super(fragmentManager);
    }

    @Override
    public Fragment getItem(int position) {
        switch (position) {
            case 0:
                mFragmentList.get(position);
            default:
                return null;
        }
    }

    public void addFragment(Fragment fragment) {
        mFragmentList.add(fragment);
    }

    @Override
    public int getCount() {
        return tabCount;
    }
}
</code></pre>
",7905229,,,,,2018-05-03 0:56:08,Android TabLayout Fragment with MVP,<android-fragments><mvp><android-tablelayout>,1,0,,,
Android,50362528,1,50389268,1053,5/17/2018 10:32:15,1,,5/16/2018 4:36:06,,3,594,"<p>I am working with multi feature android application with instant app and wear app.Here i am able to <strong><em>successfully run my application</em></strong> but getting following error during <strong><em>building APK or rebuild projects</em></strong>. </p>

<pre><code>java.lang.IllegalStateException: Expected configuration ':module1:debugFeatureCompileClasspath' to contain exactly one file, however, it contains 2 files.
at org.gradle.api.internal.file.AbstractFileCollection.getSingleFile(AbstractFileCollection.java:62)
at com.android.build.gradle.tasks.MergeManifests.doFullTaskAction(MergeManifests.java:116)
at com.android.build.gradle.internal.tasks.IncrementalTask.taskAction(IncrementalTask.java:106)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
at java.lang.reflect.Method.invoke(Method.java:498)
at org.gradle.internal.reflect.JavaMethod.invoke(JavaMethod.java:73)
</code></pre>

<p>My project has 3-4 module and one base module projects. 
I have already integrated all setup for multi feature instant app as per sample provide by google. <a href=""https://github.com/googlesamples/android-instant-apps/tree/master/multi-feature-module"" rel=""nofollow noreferrer"">https://github.com/googlesamples/android-instant-apps/tree/master/multi-feature-module</a></p>

<p>I have one module(<strong>apimodule</strong>) where i have added all libraries and API dependencies. Following is my project dependencies structure.</p>

<ol>
<li>AppModule</li>
</ol>

<p>Added all module as implementation</p>

<pre><code>implementation project(':base')
implementation project(':module1')
implementation project(':module2')
implementation project(':module3')
wearApp project(':wear')
</code></pre>

<ol start=""2"">
<li>BaseModule ( Also added <code>application project(':app')</code> )</li>
</ol>

<p>Added <code>baseFeature true</code> in gradle</p>

<pre><code>feature project(':module1')
feature project(':module2')
feature project(':module3')
api project(':apimodule')
</code></pre>

<p>3. apimodule </p>

<p>Added <code>baseFeature true</code> in gradle</p>

<p>Here is my one module1 gradle file. </p>

<pre><code>apply plugin: 'com.android.feature'

apply plugin: 'kotlin-android'

apply plugin: 'kotlin-android-extensions'

android {
    compileSdkVersion 26
    defaultConfig {
        minSdkVersion 23
        targetSdkVersion 26
        versionCode 1
        versionName ""1.0""
        testInstrumentationRunner ""android.support.test.runner.AndroidJUnitRunner""
    }
    buildTypes {
        release {
            minifyEnabled false
            proguardFiles getDefaultProguardFile('proguard-android.txt'), 'proguard-rules.pro'
        }
    }
}

dependencies {
    implementation fileTree(dir: 'libs', include: ['*.jar'])
    implementation""org.jetbrains.kotlin:kotlin-stdlib-jdk7:$kotlin_version""
    implementation project(':base')
    testImplementation 'junit:junit:4.12'
    androidTestImplementation 'com.android.support.test:runner:1.0.1'
    androidTestImplementation 'com.android.support.test.espresso:espresso-core:3.0.1'

}
</code></pre>
",2553048,,2553048,,2018-05-17 3:57:53,2018-12-22 9:06:36,"IllegalStateException: Expected configuration ':module:debugFeatureCompileClasspath' to contain exactly one file, however, it contains 2 files",<android><kotlin><android-instant-apps><android-wear-2.0>,1,9,1,,
Android,50423546,1,50675491,1054,6/4/2018 7:35:46,16,,5/19/2018 9:01:06,,1,168,"<h2>Background</h2>

<p>For some time, as a user, I've noticed that on some apps I can perform common operations on partial texts, as such:</p>

<p><a href=""https://i.stack.imgur.com/u3LCU.png"" rel=""nofollow noreferrer""><img src=""https://i.stack.imgur.com/u3LCU.png"" alt=""enter image description here""></a></p>

<p>This is called ""smart text selection"" (video <a href=""https://youtu.be/Y2VF8tmLFHw?t=4831"" rel=""nofollow noreferrer""><strong>here</strong></a>), and it has being around from Android O, as shown <a href=""https://www.androidpolice.com/2017/05/17/android-o-feature-spotlight-smart-text-selection-automatically-highlights-right-words-double-tap/"" rel=""nofollow noreferrer""><strong>here</strong></a>.</p>

<h2>The problem</h2>

<p>Recently Google has shown how to make your app show the actions within itself (meaning inside its TextView). This is called ""Smart-Linkify"" and the video about it can be found <a href=""https://youtu.be/x-FcOX6ErdI?t=1887"" rel=""nofollow noreferrer""><strong>here</strong></a>. It shows there how to show the actions:</p>

<p><a href=""https://i.stack.imgur.com/jxXBQ.png"" rel=""nofollow noreferrer""><img src=""https://i.stack.imgur.com/jxXBQ.png"" alt=""enter image description here""></a></p>

<p>What I can't find is how to do the opposite. Meaning how to offer my own actions to other apps.</p>

<p>For example, I could make a dialer app that can handle phone numbers by either dialing them or search the phone number.</p>

<h2>What I've found</h2>

<ol>
<li><p>In the past, I've asked about a very similar thing, of Android M, <a href=""https://stackoverflow.com/q/30518089/878126""><strong>here</strong></a>. There is also a nice tutorial about it, <a href=""https://medium.com/google-developers/custom-text-selection-actions-with-action-process-text-191f792d2999"" rel=""nofollow noreferrer""><strong>here</strong></a>. However, this is about a general text, without a type of when to trigger, meaning it will always be shown.</p></li>
<li><p>I've found very few mentions about this feature. The only sample I've found is  <a href=""https://github.com/googlesamples/android-TextLinkify"" rel=""nofollow noreferrer""><strong>here</strong></a>, but I can't build it for some reason, and it's not even about providing the actions. It's about how to show the actions.</p></li>
<li><p>I've found a Github repository of the Android dialer, <a href=""https://github.com/geniusgithub/AndroidDialer"" rel=""nofollow noreferrer""><strong>here</strong></a>. It also offers an action of ""call"" for phone numbers. After playing around with the manifest, I've found that this part is responsible for offering this action:</p>

<pre><code>  &lt;intent-filter &gt;
      &lt;action android:name=""android.intent.action.VIEW"" /&gt;
      &lt;action android:name=""android.intent.action.DIAL"" /&gt;
      &lt;category android:name=""android.intent.category.DEFAULT"" /&gt;
      &lt;category android:name=""android.intent.category.BROWSABLE"" /&gt;
      &lt;data android:scheme=""tel"" /&gt;
  &lt;/intent-filter&gt;
</code></pre>

<p>If I remove this part, I don't see the action of ""call"" for this app anymore (till I re-add it).</p>

<p>Sadly, if I change the ""DIAL"" action to ""SEARCH"", it doesn't show up.</p>

<p>The good news are that I can see the action if I add this part to a new project.</p></li>
</ol>

<h2>The questions</h2>

<ol>
<li>This is from Android O and above, right? What would happen on Android M or N, when I implement this feature? </li>
<li>How can I offer my own app actions to other apps? So far I've found how to do a general text handling, and dialing. But how can I provide others, such as search of phone number? </li>
<li>Can I customize the text that's shown for the actions? I've noticed that if I change the label for the ""PROCESS_TEXT"" action, it does change, but I can't see how to do it for other actions.</li>
<li>Can I customize what will trigger the action? For example a specific regular expression to match ? I've found only phone numbers so far. What are the various things I can use for this filtering?</li>
</ol>
",878126,,878126,,2018-06-03 14:55:28,2018-06-04 7:35:46,"How to offer actions of my app to other apps, via Smart-Linkify (AKA ""smart text selection"")?",<android><android-8.0-oreo><smart-linkify><smart-text-selection>,1,0,,,
Android,50869969,1,50870340,717,6/15/2018 6:39:55,0,,6/15/2018 6:06:35,,3,172,"<p>Looking at the Android Architecture Blueprints ""todoâ€‘mvpâ€‘dagger"" from here: <a href=""https://github.com/googlesamples/android-architecture"" rel=""nofollow noreferrer"">https://github.com/googlesamples/android-architecture</a>.</p>

<p>I'm trying to understand the Dagger2 implementation and I can't seem to figure out how they are getting Dagger2 to provide the TasksRepository.</p>

<p>They have <code>@Provides</code> for ""provideTasksLocalDataSource"" and ""provideTasksRemoteDataSource"" but where is the one for the actual TaskRepository?</p>

<p>In the TodoApplication class they have this:</p>

<pre><code>@Inject
TasksRepository tasksRepository;
</code></pre>

<p>How can it inject this without an @Provides for it anywhere?</p>

<p>If I try to use this same approach in my own app I get this error: </p>

<blockquote>
  <p>cannot be provided without an @Provides- or @Produces-annotated method</p>
</blockquote>

<p>So I went looking everywhere in the Blueprints code but I can't see how they did it themselves. Is there some trick to it that allows them to not have an <code>@Provides</code>? It definitely builds so they've gotten around it somehow.</p>

<p>Someone has asked this same question on the actual github page but there are no answers at the time of writing. <a href=""https://github.com/googlesamples/android-architecture/issues/561"" rel=""nofollow noreferrer"">https://github.com/googlesamples/android-architecture/issues/561</a>.</p>

<p>I'm on the latest commit which at the time of writing is ""082bd72d62472f9caadd2979046067fb928bbfef"".</p>
",3828004,,,,,2018-06-15 6:46:57,"Android Architecture Blueprints ""todoâ€‘mvpâ€‘dagger"", where is @Provides for TasksRepository?",<java><android><kotlin><dagger-2><dagger.android>,1,0,,,
Android,50709880,1,50877431,1056,6/15/2018 14:17:51,10,,6/5/2018 22:35:29,,1,286,"<p>I'm trying to integrate <a href=""https://developer.android.com/topic/libraries/architecture/navigation/navigation-implementing"" rel=""nofollow noreferrer"">these libraries</a> into my Android project to make a navigation controller. 
When I add in these two lines to my build.gradle - </p>

<p><code>implementation 'android.arch.navigation:navigation-fragment:1.0.0-alpha01'
 implementation 'android.arch.navigation:navigation-ui:1.0.0-alpha01'</code></p>

<p>It syncs ok, but in build I get this error:</p>

<p>ERROR: In  NavArgument, unable to find attribute type. </p>

<p>I was able to build <a href=""https://github.com/googlesamples/android-architecture-components"" rel=""nofollow noreferrer"">Google's sample project</a> that uses the relevant libraries without problems. </p>

<p>My project has:</p>

<ul>
<li>androidSupportLibrary 27.1.1</li>
<li>projectTargetVersion 27</li>
<li>projectCompileSdkVersion android-P</li>
<li>projectBuildToolsVersion 27.0.2</li>
<li>gradleVersion 3.0.1 </li>
<li>gradlePlugin 4.4</li>
</ul>

<p>I've already tried upgrading all these versions^, doing a clean build, restarting Android Studio, etc. </p>

<p>I also get some Java compiler errors.</p>

<p>Any thoughts on why this might happen?</p>
",8698088,,,,,2018-06-15 14:17:51,"ERROR: In <declare-styleable> NavArgument, unable to find attribute type",<java><android><android-gradle>,1,0,,,
Android,51216376,1,51220755,1057,7/7/2018 6:54:41,1,,7/6/2018 19:06:03,,1,489,"<p>I am trying to build an app that is based on [todo-mvp-dagger] and retrofit. After creating the initial classes, modules, room db (first time using) and rebuilding the project, I am receiving an error: cannot find symbol variable DaggerAppComponent</p>

<p>Following <a href=""https://github.com/googlesamples/android-architecture"" rel=""nofollow noreferrer"">todo-mvp-dagger</a> app from Google Android Architecture sample.<br>
The [todo-mvp-dagger] app is building fine but mine is not. <br>What am I missing?<br><br>
Here is my <a href=""https://github.com/abhi007tyagi/MVP-Dagger2-Retrofit-Room"" rel=""nofollow noreferrer"">project repository</a>.</p>

<p><a href=""https://i.stack.imgur.com/YJAgo.png"" rel=""nofollow noreferrer""><img src=""https://i.stack.imgur.com/YJAgo.png"" alt=""enter image description here""></a></p>

<p><strong>Code is minimized now</strong> <br><br></p>

<p><strong>UPDATE</strong><br>
I updated the Dagger version and now I am getting following errors<br></p>

<ol>
<li><code>error: cannot find symbol variable DaggerAppComponent</code></li>
<li><code>/Users/abhinavtyagi/Documents/workspace/workspace_android/Research/UdacityCourseViewer/app/build/generated/source/apt/debug/com/tyagiabhinav/udacitycourseviewer/di/DaggerApplicationComponent.java:
uses unchecked or unsafe operations.
Recompile with -Xlint:unchecked for details.</code></li>
</ol>

<p>/Users/abhinavtyagi/Documents/workspace/workspace_android/Research/UdacityCourseViewer/app/build/generated/source/apt/debug/com/tyagiabhinav/udacitycourseviewer/di/DaggerApplicationComponent.java:
uses unchecked or unsafe operations.
Recompile with -Xlint:unchecked for details.</p>
",734298,,734298,,2018-07-07 6:19:14,2018-07-07 6:54:41,Room Retrofit Dagger2 MVP: Error: cannot find symbol variable DaggerAppComponent,<android><dependency-injection><retrofit><dagger-2><android-room>,1,10,,,
Android,29472129,1,51223759,1058,7/7/2018 13:36:11,1,,4/6/2015 13:19:06,,3,1621,"<p>I am trying to make an Android app about Geofencing. I have followed the tutorial on <a href=""https://developer.android.com/training/location/geofencing.html"" rel=""nofollow"">developers page</a> and <a href=""https://github.com/googlesamples/android-play-location/tree/master/Geofencing/app/src/main/java/com/google/android/gms/location/sample/geofencing"" rel=""nofollow"">the sample code</a>, however it doesn't work as expected. I could have maybe made some failures regarding the life cycle of an Android app since I combined Location Addresses and Geofencing.</p>

<p>My question is specifically why I don't get <code>onHandleIntent</code> called in the <code>IntentService</code> in the <code>GeofenceTransitionIntentService.java</code> class. Is there any error in the <code>getGeofencePending</code> function in <code>MainActivity.java</code>.
Here is the code:</p>

<pre><code>package com.example.geofence;

import java.text.DateFormat;
import java.util.ArrayList;
import java.util.Date;
import java.util.Map;

import com.google.android.gms.common.ConnectionResult;
import com.google.android.gms.common.api.GoogleApiClient;
import com.google.android.gms.common.api.GoogleApiClient.Builder;
import com.google.android.gms.common.api.GoogleApiClient.ConnectionCallbacks;
import com.google.android.gms.common.api.GoogleApiClient.OnConnectionFailedListener;
import com.google.android.gms.common.api.ResultCallback;
import com.google.android.gms.common.api.Status;
import com.google.android.gms.internal.mr;
import com.google.android.gms.location.Geofence;
import com.google.android.gms.location.GeofencingRequest;
import com.google.android.gms.location.LocationListener;
import com.google.android.gms.location.LocationRequest;
import com.google.android.gms.location.LocationServices;
import com.google.android.gms.maps.model.LatLng;

import android.support.v7.app.ActionBarActivity;
import android.util.Log;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;
import android.widget.EditText;
import android.widget.TextView;
import android.widget.Toast;
import android.annotation.SuppressLint;
import android.app.Activity;
import android.app.PendingIntent;
import android.content.Intent;
import android.content.SharedPreferences;
import android.location.Geocoder;
import android.location.Location;
import android.os.Bundle;
import android.os.Handler;
import android.os.ResultReceiver;

public class MainActivity extends Activity implements OnClickListener,
ConnectionCallbacks, OnConnectionFailedListener, LocationListener, ResultCallback &lt;Status&gt;{

    protected static final String TAG = ""creating-and-monitoring-geofences"";
    GoogleApiClient mGoogleApiClient;
    LocationRequest mLocationRequest;
    Boolean mRequestingLocationUpdates = true;
    Boolean mAddressRequested = true;
    String mAddressOutput = null;
    Location mCurrentLocation;
    protected Location mLastLocation;
    private AddressResultReceiver mResultReceiver;
    String mLastUpdateTime;
    TextView latitudeText, longitudeText, lastUpdateTimeText, locationAddress;
    private SharedPreferences mSharedPreferences;

    private Button mAddGeofencesButton, mRemoveGeofencesButton;
    protected ArrayList&lt;Geofence&gt; mGeofenceList = null;
    private PendingIntent mGeofencePendingIntent;
    private boolean mGeofencesAdded;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        Toast.makeText(this, ""OnCreate"", Toast.LENGTH_SHORT).show();
        setContentView(R.layout.activity_main);
        mResultReceiver = new AddressResultReceiver(new Handler());
        latitudeText = (TextView) findViewById(R.id.latitudeText);
        longitudeText = (TextView) findViewById(R.id.longitudeText);
        lastUpdateTimeText = (TextView) findViewById(R.id.lastUpdateText);
        locationAddress = (TextView) findViewById(R.id.locationAddressText);

        mAddGeofencesButton = (Button) findViewById(R.id.add_geofence);
        mRemoveGeofencesButton = (Button) findViewById(R.id.remove_geofence);
        mGeofenceList = new ArrayList&lt;Geofence&gt;();
        mGeofencePendingIntent = null;
        mSharedPreferences = getSharedPreferences(Constants.SHARED_PREFERENCES_NAME,
                MODE_PRIVATE);
        mGeofencesAdded = mSharedPreferences.getBoolean(Constants.GEOFENCES_ADDED_KEY, false);

        mAddGeofencesButton.setOnClickListener(this);
        mRemoveGeofencesButton.setOnClickListener(this);

        setButtonsEnabledState();
        buildGoogleApiClient(); 
    }

    protected void startIntentService() {
        Intent intent = new Intent(this, FetchAddressIntentService.class);
        intent.putExtra(Constants.RECEIVER, mResultReceiver);
        intent.putExtra(Constants.LOCATION_DATA_EXTRA, mLastLocation);
        startService(intent);
    }
    /*  
    @Override
    protected void onSaveInstanceState(Bundle savedInstanceState) {
        savedInstanceState.putBoolean(REQUESTING_LOCATION_UPDATES_KEY,
                mRequestingLocationUpdates);
        savedInstanceState.putParcelable(LOCATION_KEY, mCurrentLocation);
        savedInstanceState.putString(LAST_UPDATED_TIME_STRING_KEY, mLastUpdateTime);
        super.onSaveInstanceState(savedInstanceState);
    }
    */

    @Override
    public void onClick(View v) {
        if(v==mAddGeofencesButton){
            addGeofencesButtonHandler(v);
        }
        if(v==mRemoveGeofencesButton){
            removeGeofencesButtonHandler(v);
        }

    }

    @Override
    protected void onPause() {
        super.onPause();
        stopLocationUpdates();
    }

    @Override
    public void onResume() {
        super.onResume();
        Toast.makeText(this, ""onResume"", Toast.LENGTH_SHORT).show();
        if (mGoogleApiClient.isConnected() &amp;&amp; !mRequestingLocationUpdates) {
            startLocationUpdates();
        }
    }

    protected synchronized void buildGoogleApiClient() {
        mGoogleApiClient = new GoogleApiClient.Builder(this)
        .addConnectionCallbacks(this)
        .addOnConnectionFailedListener(this)
        .addApi(LocationServices.API)
        .build();
        mGoogleApiClient.connect();

    }
    @Override
    public void onConnectionFailed(ConnectionResult result) {
        // TODO Auto-generated method stub
        Toast.makeText(this, ""onConnectionFailed"", Toast.LENGTH_SHORT).show();

    }
    @SuppressLint(""NewApi"")
    @Override
    public void onConnected(Bundle connectionHint) {
        Toast.makeText(this, ""onConnected"", Toast.LENGTH_SHORT).show();
        mLastLocation = LocationServices.FusedLocationApi.getLastLocation(
                mGoogleApiClient);
        if (mLastLocation != null) {
            String latitude = String.valueOf(mLastLocation.getLatitude());
            String longitude = String.valueOf(mLastLocation.getLongitude());
            latitudeText.setText(""latitude: "" + latitude);
            longitudeText.setText(""longitude: "" + longitude);
        }
        if(mRequestingLocationUpdates){
            createLocationRequest();
            startLocationUpdates();
        }
        if (mLastLocation != null) {
            // Determine whether a Geocoder is available.
            if (!Geocoder.isPresent()) {
                Toast.makeText(this, ""No geocoder available"",
                        Toast.LENGTH_SHORT).show();
                return;
            }

            if (mAddressRequested) {
                startIntentService();
            }
        }

    }
    @Override
    public void onConnectionSuspended(int cause) {
        // TODO Auto-generated method stub
        Toast.makeText(this, ""onConnectionSuspended"", Toast.LENGTH_SHORT).show();
    }

    protected void createLocationRequest() {
        mLocationRequest = new LocationRequest();
        mLocationRequest.setInterval(10000);
        mLocationRequest.setFastestInterval(5000);
        mLocationRequest.setPriority(LocationRequest.PRIORITY_HIGH_ACCURACY);
    }

    protected void startLocationUpdates() {
        LocationServices.FusedLocationApi.requestLocationUpdates(
                mGoogleApiClient, mLocationRequest, this); //this refers to the interface LocationListener
    }

    protected void stopLocationUpdates() {
        LocationServices.FusedLocationApi.removeLocationUpdates(
                mGoogleApiClient, this);
    }   

    @Override
    public void onLocationChanged(Location location) {
        mCurrentLocation = location;
        mLastUpdateTime = DateFormat.getTimeInstance().format(new Date());
        updateUI();
    }   

    public void updateUI() {
        latitudeText.setText(String.valueOf(mCurrentLocation.getLatitude()));
        longitudeText.setText(String.valueOf(mCurrentLocation.getLongitude()));
        lastUpdateTimeText.setText(mLastUpdateTime);
        locationAddress.setText(mAddressOutput);
    }

    public void showToast(String text){
        Toast.makeText(this, text, Toast.LENGTH_SHORT).show();
    }


    class AddressResultReceiver extends ResultReceiver {
        public AddressResultReceiver(Handler handler) {
            super(handler);
        }

        @Override
        protected void onReceiveResult(int resultCode, Bundle resultData) {
            showToast(""onReceiveResult"");
            // Display the address string
            // or an error message sent from the intent service.
            mAddressOutput = resultData.getString(Constants.RESULT_DATA_KEY);
            //displayAddressOutput();
            System.out.println(mAddressOutput);
            Log.e(""RESULT!!!"", mAddressOutput);
            locationAddress.setText(mAddressOutput);

            // Show a toast message if an address was found.
            if (resultCode == Constants.SUCCESS_RESULT) {
                ;
            }
        }
    }

    /**
    * Adds geofences, which sets alerts to be notified when the device enters or exits one of the
    * specified geofences. Handles the success or failure results returned by addGeofences().
    */
   public void addGeofencesButtonHandler(View view) {
       if (!mGoogleApiClient.isConnected()) {
           Toast.makeText(this, getString(R.string.not_connected), Toast.LENGTH_SHORT).show();
           return;
       }

       try {
           LocationServices.GeofencingApi.addGeofences(
                   mGoogleApiClient,
                   // The GeofenceRequest object.
                   getGeofencingRequest(),
                   // A pending intent that that is reused when calling removeGeofences(). This
                   // pending intent is used to generate an intent when a matched geofence
                   // transition is observed.
                   getGeofencePendingIntent()
           ).setResultCallback(this); // Result processed in onResult().
       } catch (SecurityException securityException) {
           // Catch exception generated if the app does not use ACCESS_FINE_LOCATION permission.
           logSecurityException(securityException);
       }
   }

   /**
    * Removes geofences, which stops further notifications when the device enters or exits
    * previously registered geofences.
    */
   public void removeGeofencesButtonHandler(View view) {
       if (!mGoogleApiClient.isConnected()) {
           Toast.makeText(this, getString(R.string.not_connected), Toast.LENGTH_SHORT).show();
           return;
       }
       try {
           // Remove geofences.
           LocationServices.GeofencingApi.removeGeofences(
                   mGoogleApiClient,
                   // This is the same pending intent that was used in addGeofences().
                   getGeofencePendingIntent()
           ).setResultCallback(this); // Result processed in onResult().
       } catch (SecurityException securityException) {
           // Catch exception generated if the app does not use ACCESS_FINE_LOCATION permission.
           logSecurityException(securityException);
       }
   }

   private void logSecurityException(SecurityException securityException) {
       Log.e(TAG, ""Invalid location permission. "" +
               ""You need to use ACCESS_FINE_LOCATION with geofences"", securityException);
   }

    /**
     * Gets a PendingIntent to send with the request to add or remove Geofences. Location Services
     * issues the Intent inside this PendingIntent whenever a geofence transition occurs for the
     * current list of geofences.
     *
     * @return A PendingIntent for the IntentService that handles geofence transitions.
     */
    private PendingIntent getGeofencePendingIntent() {
        // Reuse the PendingIntent if we already have it.
        if (mGeofencePendingIntent != null) {
            Toast.makeText(this, ""mGeofencePendingIntent != null"", Toast.LENGTH_SHORT).show();
            return mGeofencePendingIntent;
        }
        Intent intent = new Intent(this, GeofenceTransitionsIntentService.class);
        // We use FLAG_UPDATE_CURRENT so that we get the same pending intent back when calling
        // addGeofences() and removeGeofences().
        Toast.makeText(this, ""mGeofencePendingIntent == null"", Toast.LENGTH_SHORT).show();
        mGeofencePendingIntent = PendingIntent.getService(this, 0, intent, PendingIntent.FLAG_UPDATE_CURRENT);
        return mGeofencePendingIntent;
    }

    /**
     * Builds and returns a GeofencingRequest. Specifies the list of geofences to be monitored.
     * Also specifies how the geofence notifications are initially triggered.
     */
    private GeofencingRequest getGeofencingRequest() {     

        GeofencingRequest.Builder builder = new GeofencingRequest.Builder();

        // The INITIAL_TRIGGER_ENTER flag indicates that geofencing service should trigger a
        // GEOFENCE_TRANSITION_ENTER notification when the geofence is added and if the device
        // is already inside that geofence.
            builder.setInitialTrigger(GeofencingRequest.INITIAL_TRIGGER_ENTER);

        // Add the geofences to be monitored by geofencing service.
        builder.addGeofences(mGeofenceList);
        builder.addGeofence(new Geofence.Builder()
        .setRequestId(""CurrentLocation"")
        .setCircularRegion(mCurrentLocation.getLatitude(), mCurrentLocation.getLongitude(), 50)
        .setExpirationDuration(Geofence.NEVER_EXPIRE)
        .setTransitionTypes(Geofence.GEOFENCE_TRANSITION_ENTER | Geofence.GEOFENCE_TRANSITION_EXIT)
        .build());

        Toast.makeText(this, ""Geofence request added"",  Toast.LENGTH_SHORT).show();

        // Return a GeofencingRequest.
        return builder.build();
    }


    @Override
    public void onResult(Status status) {
        if (status.isSuccess()) {
            // Update state and save in shared preferences.
            mGeofencesAdded = !mGeofencesAdded;
            SharedPreferences.Editor editor = mSharedPreferences.edit();
            editor.putBoolean(Constants.GEOFENCES_ADDED_KEY, mGeofencesAdded);
            editor.commit();

            // Update the UI. Adding geofences enables the Remove Geofences button, and removing
            // geofences enables the Add Geofences button.
            setButtonsEnabledState();

            Toast.makeText(
                    this,
                    getString(mGeofencesAdded ? R.string.geofences_added :
                            R.string.geofences_removed),
                    Toast.LENGTH_SHORT
            ).show();
        } else {
            // Get the status code for the error and log it using a user-friendly message.
            String errorMessage = GeoFenceErrorMessages.getErrorString(this,
                    status.getStatusCode());
            Log.e(TAG, errorMessage);
        }
    }

     /**
     * Ensures that only one button is enabled at any time. The Add Geofences button is enabled
     * if the user hasn't yet added geofences. The Remove Geofences button is enabled if the
     * user has added geofences.
     */
    private void setButtonsEnabledState() {
        if (mGeofencesAdded) {
            mAddGeofencesButton.setEnabled(false);
            mRemoveGeofencesButton.setEnabled(true);
        } else {
            mAddGeofencesButton.setEnabled(true);
            mRemoveGeofencesButton.setEnabled(false);
        }
    }    
}
</code></pre>

<p>and the GeofenceTransitionIntentService class, that should deal with the triggering event</p>

<pre><code>package com.example.geofence;

import java.util.ArrayList;
import java.util.List;

import com.google.android.gms.location.Geofence;
import com.google.android.gms.location.GeofencingEvent;

import android.app.IntentService;
import android.app.NotificationManager;
import android.app.PendingIntent;
import android.content.Context;
import android.content.Intent;
import android.graphics.BitmapFactory;
import android.graphics.Color;
import android.support.v4.app.NotificationCompat;
import android.support.v4.app.TaskStackBuilder;
import android.text.TextUtils;
import android.util.Log;
import android.widget.Toast;

public class GeofenceTransitionsIntentService extends IntentService{

    protected static final String TAG = ""geofence-transitions-service"";

    public GeofenceTransitionsIntentService(String name) {
        super(""name"");
    }

    @Override
    protected void onHandleIntent(Intent intent) {
        Toast.makeText(this, ""OnHandleIntent"", Toast.LENGTH_SHORT).show();
        Log.e(TAG, ""OnHandleIntent"");
        GeofencingEvent geofencingEvent = GeofencingEvent.fromIntent(intent);       
        if (geofencingEvent.hasError()) {
            String errorMessage = GeoFenceErrorMessages.getErrorString(this,
                    geofencingEvent.getErrorCode());
            Log.e(TAG, errorMessage);
            return;
        }
        Log.e(""DEBUG"", ""No geofencingEvent error"");

         // Get the transition type.
        int geofenceTransition = geofencingEvent.getGeofenceTransition();
        Log.e(""DEBUG"", ""getGeofenceTransition has been called"");
        // Test that the reported transition was of interest.
        if (geofenceTransition == Geofence.GEOFENCE_TRANSITION_ENTER ||
                geofenceTransition == Geofence.GEOFENCE_TRANSITION_EXIT) {
            Log.e(""DEBUG"", ""Geofence Transition enter or exit"");
            // Get the geofences that were triggered. A single event can trigger multiple geofences.
            List&lt;Geofence&gt; triggeringGeofences = geofencingEvent.getTriggeringGeofences();

            // Get the transition details as a String.
            String geofenceTransitionDetails = getGeofenceTransitionDetails(
                    this,
                    geofenceTransition,
                    triggeringGeofences
            );

            // Send notification and log the transition details.
            sendNotification(geofenceTransitionDetails);
            Log.i(TAG, geofenceTransitionDetails);
        } else {
            // Log the error.
            Log.e(TAG, getString(R.string.geofence_transition_invalid_type, geofenceTransition));
        }   
    }

    /**
     * Gets transition details and returns them as a formatted string.
     *
     * @param context               The app context.
     * @param geofenceTransition    The ID of the geofence transition.
     * @param triggeringGeofences   The geofence(s) triggered.
     * @return                      The transition details formatted as String.
     */
    private String getGeofenceTransitionDetails(
            Context context,
            int geofenceTransition,
            List&lt;Geofence&gt; triggeringGeofences) {
        Log.e(""DEBUG"", ""getGeofenceTransitionDetails"");
        String geofenceTransitionString = getTransitionString(geofenceTransition);

        // Get the Ids of each geofence that was triggered.
        ArrayList triggeringGeofencesIdsList = new ArrayList();
        for (Geofence geofence : triggeringGeofences) {
            triggeringGeofencesIdsList.add(geofence.getRequestId());
        }
        String triggeringGeofencesIdsString = TextUtils.join("", "",  triggeringGeofencesIdsList);

        return geofenceTransitionString + "": "" + triggeringGeofencesIdsString;
    }

    /**
     * Posts a notification in the notification bar when a transition is detected.
     * If the user clicks the notification, control goes to the MainActivity.
     */
    private void sendNotification(String notificationDetails) {
        // Create an explicit content Intent that starts the main Activity.
        Intent notificationIntent = new Intent(getApplicationContext(), MainActivity.class);
        Log.e(""DEBUG"", ""sendNotification"");
        // Construct a task stack.
        TaskStackBuilder stackBuilder = TaskStackBuilder.create(this);

        // Add the main Activity to the task stack as the parent.
        stackBuilder.addParentStack(MainActivity.class);

        // Push the content Intent onto the stack.
        stackBuilder.addNextIntent(notificationIntent);

        // Get a PendingIntent containing the entire back stack.
        PendingIntent notificationPendingIntent =
                stackBuilder.getPendingIntent(0, PendingIntent.FLAG_UPDATE_CURRENT);

        // Get a notification builder that's compatible with platform versions &gt;= 4
        NotificationCompat.Builder builder = new NotificationCompat.Builder(this);

        // Define the notification settings.
        builder.setSmallIcon(R.drawable.ic_launcher)
                // In a real app, you may want to use a library like Volley
                // to decode the Bitmap.
                .setLargeIcon(BitmapFactory.decodeResource(getResources(),
                        R.drawable.ic_launcher))
                .setColor(Color.RED)
                .setContentTitle(notificationDetails)
                .setContentText(getString(R.string.geofence_transition_notification_text))
                .setContentIntent(notificationPendingIntent);

        // Dismiss notification once the user touches it.
        builder.setAutoCancel(true);

        // Get an instance of the Notification manager
        NotificationManager mNotificationManager =
                (NotificationManager) getSystemService(Context.NOTIFICATION_SERVICE);

        // Issue the notification
        mNotificationManager.notify(0, builder.build());
    }

    /**
     * Maps geofence transition types to their human-readable equivalents.
     *
     * @param transitionType    A transition type constant defined in Geofence
     * @return                  A String indicating the type of transition
     */
    private String getTransitionString(int transitionType) {
        Log.e(""DEBUG"", ""getTransitionString"");
        switch (transitionType) {
            case Geofence.GEOFENCE_TRANSITION_ENTER:
                return getString(R.string.geofence_transition_entered);
            case Geofence.GEOFENCE_TRANSITION_EXIT:
                return getString(R.string.geofence_transition_exited);
            default:
                return getString(R.string.unknown_geofence_transition);
        }
    }

}
</code></pre>

<p>The manifest:</p>

<pre><code>&lt;?xml version=""1.0"" encoding=""utf-8""?&gt;
&lt;manifest xmlns:android=""http://schemas.android.com/apk/res/android""
    package=""com.example.geofence""
    android:versionCode=""1""
    android:versionName=""1.0"" &gt;

    &lt;uses-permission android:name=""android.permission.ACCESS_FINE_LOCATION""/&gt;
    &lt;uses-permission android:name=""android.permission.ACCESS_FINE_LOCATION""/&gt;
    &lt;uses-permission android:name=""android.permission.INTERNET"" /&gt;

    &lt;uses-sdk
        android:minSdkVersion=""9""
        android:targetSdkVersion=""21"" /&gt;

    &lt;application
        android:allowBackup=""true""
        android:icon=""@drawable/ic_launcher""
        android:label=""@string/app_name""
        android:theme=""@style/AppTheme"" &gt;
        &lt;meta-data android:name=""com.google.android.gms.version""
        android:value=""@integer/google_play_services_version"" /&gt;
        &lt;activity
            android:name="".MainActivity""
            android:label=""@string/app_name"" &gt;
            &lt;intent-filter&gt;
                &lt;action android:name=""android.intent.action.MAIN"" /&gt;

                &lt;category android:name=""android.intent.category.LAUNCHER"" /&gt;
            &lt;/intent-filter&gt;
        &lt;/activity&gt;
        &lt;service
            android:name="".FetchAddressIntentService""
            android:exported=""false""/&gt;
        &lt;service android:name="".GeofenceTransitionsIntentService""/&gt;
    &lt;/application&gt;

&lt;/manifest&gt;
</code></pre>
",2410994,,2410994,,2015-04-08 13:23:39,2018-07-07 13:36:11,IntentService doesn't get called in combination with PendingIntent,<android><android-pendingintent><android-geofence><android-intentservice>,1,4,1,,
Android,51523053,1,51523428,1059,7/25/2018 16:11:50,0,,7/25/2018 15:48:18,,2,71,"<p>My requirement is to scan the finger and based on the finger I've to navigate user to the particular page in android</p>

<p><strong>Explanation</strong></p>

<p>While registering user will give different fingerprints for different functionalities</p>

<p><em>Ex:</em> </p>

<ol>
<li><p>For navigating to login page user may use left index finger</p></li>
<li><p>For navigating to About us page user may use right index finger</p></li>
</ol>

<p>for each fingerprint I've to redirect to the different pages based on the user wish. For this I've checked these <a href=""https://github.com/googlesamples/android-FingerprintDialog/issues/20"" rel=""nofollow noreferrer"">link1</a>, <a href=""https://stackoverflow.com/questions/44520343/android-how-to-get-unique-key-from-finger-print-authentication"">link2</a> and many more but I'm unable to achieve it. Can any one give suggestion...</p>
",3142611,,2649012,,2018-07-25 15:56:24,2018-07-30 14:56:18,How to know which finger is scanned for bio-metric?,<android><biometrics><android-fingerprint-api>,1,6,,,
Android,51757164,1,51762972,1060,8/9/2018 9:06:29,1,,8/8/2018 23:59:56,,3,2313,"<p>I created live data which emits a single event as in this <a href=""https://github.com/googlesamples/android-architecture/blob/dev-todo-mvvm-live/todoapp/app/src/main/java/com/example/android/architecture/blueprints/todoapp/SingleLiveEvent.java"" rel=""nofollow noreferrer"">example</a>.</p>

<p>My question is next: 
How to notify only last subscribed observer when the value in the LiveData changes?</p>

<p>What comes to my mind is to store observers in the linked list in SingleLiveData class and then to call <code>super.observe</code> only if a passed observer is the same as the last element of the list. </p>

<p>I'm not sure if this is the best approach. </p>

<p>I want to use this mechanism to propagate FAB click events from activity to the fragments which are shown inside of the ViewPager. Fragments are dynamically added to view pager adapter, so let's say that we know the order of the fragments.</p>
",3609514,,2978334,,2018-08-09 10:06:08,2018-08-09 10:06:08,How to create LiveData which emits a single event and notifies only last subscribed observer?,<android><android-architecture-components><android-jetpack><android-livedata>,1,6,,,
Android,51781176,1,51788659,756,8/10/2018 14:27:29,0,,8/10/2018 7:25:16,,5,1740,"<p>I have been using the <code>SingleLiveData</code> class which can be found <a href=""https://github.com/googlesamples/android-architecture/blob/dev-todo-mvvm-live/todoapp/app/src/main/java/com/example/android/architecture/blueprints/todoapp/SingleLiveEvent.java"" rel=""noreferrer"">here</a>.  My questions are:</p>

<ol>
<li><p>Is <code>SingleLiveData</code> is actually part of the Android Architecture Components?</p></li>
<li><p>Is it a good idea to use it?</p></li>
</ol>
",9291997,,139985,,2018-08-10 8:01:40,2019-03-16 15:50:59,Is SingleLiveEvent actually part of the Android Architecture Components Library?,<android><android-architecture-components><android-livedata><mutablelivedata>,2,1,2,,
Android,51884303,1,51886545,758,8/16/2018 23:24:12,0,,8/16/2018 19:43:05,,1,123,"<p>I am looking at a <code>Kotlin</code> sample app by Google called <a href=""https://github.com/googlesamples/android-sunflower"" rel=""nofollow noreferrer"">Sunflower</a> that I am using to understand how <code>Kotlin</code> / <code>Android Jetpack</code> works.</p>

<p>In <code>PlantAdapter</code> is the following code:</p>

<pre><code>/**
 * Adapter for the [RecyclerView] in [PlantListFragment].
 */
class PlantAdapter : ListAdapter&lt;Plant, PlantAdapter.ViewHolder&gt;(PlantDiffCallback()) {

    override fun onBindViewHolder(holder: ViewHolder, position: Int) {
        val plant = getItem(position)
        holder.apply {
            bind(createOnClickListener(plant.plantId), plant)
            itemView.tag = plant
        }
    }

    override fun onCreateViewHolder(parent: ViewGroup, viewType: Int): ViewHolder {
        return ViewHolder(ListItemPlantBinding.inflate(
                LayoutInflater.from(parent.context), parent, false))
    }

    private fun createOnClickListener(plantId: String): View.OnClickListener {
        return View.OnClickListener {
            val direction = PlantListFragmentDirections.ActionPlantListFragmentToPlantDetailFragment(plantId)
            it.findNavController().navigate(direction)
        }
    }

    class ViewHolder(
        private val binding: ListItemPlantBinding
    ) : RecyclerView.ViewHolder(binding.root) {

        fun bind(listener: View.OnClickListener, item: Plant) {
            binding.apply {
                clickListener = listener
                plant = item
                executePendingBindings()
            }
        }
    }
}
</code></pre>

<p>What I am confused about is where it gets <code>PlantListFragmentDirections</code> and <code>ListItemPlantBinding</code>? When I jump to the definition of these classes, they are in the <code>build</code> folder where it is autogenerated. When I look at the imports </p>

<ul>
<li><code>import
com.google.samples.apps.sunflower.PlantListFragmentDirections</code></li>
<li><code>import
com.google.samples.apps.sunflower.databinding.ListItemPlantBinding</code></li>
</ul>

<p>They are not in the project structure. How does this work?</p>
",1270257,,1270257,,2018-08-16 19:48:32,2018-08-16 23:37:45,Adapter referencing generated classes (android-sunflower),<android><kotlin><android-jetpack>,1,0,,,
Android,51892478,1,51961333,1063,8/22/2018 6:59:37,5,,8/17/2018 9:35:37,,6,3680,"<h3>Issue</h3>

<p><em>Summary</em>: Multiple <strong>LiveData</strong> <strong>Observers</strong> are being triggered in a Fragment after navigating to a new Fragment, popping the new Fragment, and returning to the original Fragment.</p>

<p><em>Details</em>: The architecture consists of <strong>MainActivity</strong> that hosts a <strong>HomeFragment</strong> as the <em>start destination</em> in the MainActivity's <strong>navigation graph</strong>. Within HomeFragment is a programmatically inflated <strong>PriceGraphFragment</strong>. The <strong>HomeFragment</strong> is using the navigation component to launch a new child Fragment <strong>ProfileFragment</strong>. On back press the ProfileFragment is popped and the app returns to the HomeFragment hosting the PriceGraphFragment. The PriceGraphFragment is where the Observer is being called multiple times.</p>

<p>I'm logging the hashcode of the HashMap being emitted by the Observer and it is showing 2 unique hashcodes when I go to the profile Fragment, pop the profile Fragment, and return to the price Fragment. This is opposed to the one hashcode seen from the HashMap when I rotate the screen without launching the profile Fragment. </p>

<h3>Implementation</h3>

<ol>
<li><p>Navigation component to launch new ProfileFragment within HomeFragment.</p>

<p><code>view.setOnClickListener(Navigation.createNavigateOnClickListener(
R.id.action_homeFragment_to_profileFragment, null))</code></p></li>
<li><p><strong>ViewModel</strong> creation in Fragment (PriceGraphFragment). The ViewModel has been logged and the data that has multiple Observers only has data initialized in the ViewModel once. </p>

<p><code>override fun onCreate(savedInstanceState: Bundle?) {
    super.onCreate(savedInstanceState)
    priceViewModel = ViewModelProviders.of(this).get(PriceDataViewModel::class.java)
}</code></p></li>
<li><p>Listen for data from <strong>ViewModel</strong> in original Fragment (PriceGraphFragment). This is being called multiple times, however it is only expected to have one Observer when the Fragment is loaded.</p>

<p><code>priceViewModel.graphLiveData.observe(
this, Observer { priceGraphDataMap: HashMap&lt;Exchange, PriceGraphLiveData&gt;? -&gt;
   // This is being called multiple times.
})</code></p></li>
</ol>

<h3>Attempted Solutions</h3>

<ol>
<li>Creating the <strong>Fragment</strong>'s <strong>ViewModel</strong> in the <strong>onCreate()</strong> method.
<code>priceViewModel = ViewModelProviders.of(this).get(PriceDataViewModel::class.java)</code></li>
<li><p>Creating the ViewModel using the Fragment's activity and the child Fragment's parent Fragment.<br>
<code>priceViewModel = ViewModelProviders.of(activity!!).get(PriceDataViewModel::class.java)</code></p>

<p><code>priceViewModel = ViewModelProviders.of(parentFragment!!).get(PriceDataViewModel::class.java)</code></p></li>
<li>Moving methods that create the Observers to the Fragment's <strong>onCreate()</strong> and <strong>onActivityCreated()</strong> methods.</li>
<li>Using <code>viewLifecycleOwner</code> instead of <code>this</code> for the <strong>LifecycleOwner</strong> in the method <code>observe(@NonNull LifecycleOwner owner, @NonNull Observer&lt;? super T&gt; observer)</code>.</li>
<li>Storing the HashMap data that is showing as duplicates in the ViewModel opposed to the Fragment.</li>
<li>Launching the child Fragment using the <code>ChildFragmentManager</code> and the <code>SupportFragmentManager</code> (on the Activity level).</li>
</ol>

<h3>Similar Issues and Proposed Solutions</h3>

<ul>
<li><a href=""https://github.com/googlesamples/android-architecture-components/issues/47"" rel=""noreferrer"">https://github.com/googlesamples/android-architecture-components/issues/47</a></li>
<li><a href=""https://medium.com/@BladeCoder/architecture-components-pitfalls-part-1-9300dd969808"" rel=""noreferrer"">https://medium.com/@BladeCoder/architecture-components-pitfalls-part-1-9300dd969808</a></li>
<li><a href=""https://plus.google.com/109072532559844610756/posts/Mn9SpcA5cHz"" rel=""noreferrer"">https://plus.google.com/109072532559844610756/posts/Mn9SpcA5cHz</a></li>
</ul>

<h3>Next Steps</h3>

<ul>
<li>Perhaps the issue is related to creating the nested <strong>ChildFragment</strong> (<em>PriceGraphFragment</em>) in the <strong>ParentFragment</strong>'s (<em>HomeFragment</em>) <code>onViewCreated()</code>?</li>
</ul>

<p><em>ParentFragment</em></p>

<pre><code>override fun onViewCreated(view: View, savedInstanceState: Bundle?) {
    super.onViewCreated(view, savedInstanceState)
    user = viewModel.getCurrentUser()
     if (savedInstanceState == null) {
         fragmentManager
                ?.beginTransaction()
                ?.replace(binding.priceDataContainer.id, 
                   PriceGraphFragment.newInstance())
                ?.commit()
}
</code></pre>

<ul>
<li>Test replacing the LiveData objects with RxJava observables.</li>
</ul>
",2253682,,2253682,,2018-08-21 19:37:43,2019-03-18 7:03:57,Multiple LiveData Observers After Popping Fragment,<android><android-fragments><kotlin><android-navigation><android-livedata>,2,16,,,
Android,51988532,1,51988806,1064,8/23/2018 15:01:00,0,,8/23/2018 14:48:36,,6,308,"<p>I have been looking at some Google sample code and they seem to create a singleton using the the following code:</p>

<pre><code>companion object {

        // For Singleton instantiation
        @Volatile
        private var instance: CarRepository? = null

        fun getInstance(carDao: CarDao) =
                instance ?: synchronized(this) {
                    instance ?: CarRepository(carDao).also { instance = it }
                }
    }
</code></pre>

<p>So I know <code>@Volatile</code> means that </p>

<blockquote>
  <p>Marks the JVM backing field of the annotated property as volatile, meaning that writes to this field are immediately made visible to other threads.</p>
</blockquote>

<p>Should all Singletons instances always be marked as <code>@Volatile</code>? If so, why?</p>

<p>Lastly, I don't understand the <code>getInstance</code> function</p>

<pre><code>instance ?: synchronized(this) {
    instance ?: CarRepository(carDao).also { instance = it }
}
</code></pre>

<p>What is it exactly doing here? </p>

<p>UPDATE:
Source: <a href=""https://github.com/googlesamples/android-sunflower"" rel=""nofollow noreferrer"">Google's Sunflower</a> 
I changed the Repository and Dao name for my own use, but it is the same logic in the <code>Repository</code> files.</p>
",1270257,,1963973,,2018-08-23 20:52:01,2018-08-23 20:52:01,Getting a Singleton in Kotlin,<kotlin>,2,3,,,
Android,51309576,1,52085011,1065,8/29/2018 19:42:14,48,,7/12/2018 15:33:28,,1,234,"<p><strong>EDIT:</strong> I've tested the below on two devices on Android API 22 and one on API 19, the one on API 19 does not have the issue. Any ideas what the difference could be between versions?</p>

<p>I am setting up espresso tests for my Android with an IdlingResource identical to the example <a href=""https://github.com/googlesamples/android-testing/tree/master/ui/espresso/IdlingResourceSample/app/src/main/java/com/example/android/testing/espresso/IdlingResourceSample"" rel=""nofollow noreferrer"">here</a>. </p>

<p>My Test setup:</p>

<pre><code>@Rule
public ActivityTestRule&lt;MainActivity&gt; mMainActivity =
        new ActivityTestRule(MainActivity.class);

private IdlingResource mIdlingResource;

@Before
public void registerIdlingResource() {
    mIdlingResource = mMainActivity.getActivity().getIdlingResource();
    IdlingRegistry.getInstance().register(mIdlingResource);
}
</code></pre>

<p>In my Activity each time I change the Idle state I call:</p>

<pre><code>if (mIdlingResource != null) {
    mIdlingResource.setIdleState(false);
} else {
    Log.d(""error "", ""idle resource is null"");
}
</code></pre>

<p>My issue comes when trying to change the idle state in my activity -- there seems to be a lag between when the activity is created and the IdlingResource is available.</p>

<p><strong>In the first test of the sequence, the IdlingResource is never available</strong> -- as such I cannot set the initialValue of the IdlingResource to false and then later switch back to true. That seems to be caused by the annotation lifecycle as described in <a href=""https://medium.com/mindorks/android-testing-part-1-espresso-basics-7219b86c862b"" rel=""nofollow noreferrer"">this article</a>:</p>

<p><a href=""https://i.stack.imgur.com/sF5x4.jpg"" rel=""nofollow noreferrer""><img src=""https://i.stack.imgur.com/sF5x4.jpg"" alt=""enter image description here""></a></p>

<p>From what I can tell the Activity is created by the @Rule and then the IdlingResource is instantiated in the @Before. Since the Activity is already running the idle resource is null at each of the points where I attempt to change the state.</p>

<p>In subsequent tests only the first instance of setIdleState (which occurs in the onCreate) is skipped -- perhaps something to do with the Activity lifecycle with the @Rule? -- but the others operate as expected.</p>

<p>Is there a best practice to getting the @Rule and @Before to work in order before the first test?</p>
",3130972,,3130972,,2018-07-18 14:50:30,2018-08-29 19:42:14,Why is IdlingResource null in Espresso tests on Android API 22?,<java><android><junit><android-espresso>,2,0,1,,
Android,52140059,1,52142897,1066,9/3/2018 3:43:20,1,,9/2/2018 18:45:05,,6,994,"<p><strong>OBS:</strong> Though still no first class support (as of writing this), Google has now updated their samples with an example of how they think this should be solved: <a href=""https://github.com/googlesamples/android-architecture-components/tree/master/NavigationAdvancedSample"" rel=""nofollow noreferrer"">https://github.com/googlesamples/android-architecture-components/tree/master/NavigationAdvancedSample</a></p>

<p>The <a href=""https://codelabs.developers.google.com/codelabs/android-navigation/index.html?index=..%2F..%2Findex#0"" rel=""nofollow noreferrer"">Android Codelab for Navigation</a> does a good job describing how to use the architecture component Navigation together with a <code>BottomNavigationView</code>. But let's say I have 2 tabs in the <code>BottomNavigationView</code>, <strong>Tab1</strong> and <strong>Tab2</strong>. And let's say that in <strong>Tab1</strong> you navigate through the fragments <strong>Frag1</strong> --> <strong>Frag2</strong>. Now, whenever I go to <strong>Tab2</strong>, and then back to <strong>Tab1</strong>, the fragment back stack of <strong>Frag1,2</strong> is gone, and replaced with the starting point <strong>Frag1</strong> again. </p>

<p>What do I have to do in an app so that a <code>BottomNavigationView</code> together with <a href=""https://developer.android.com/topic/libraries/architecture/navigation/"" rel=""nofollow noreferrer"">Navigation</a> keeps its back stack intact even though I change tabs? And, also keeping the back/up button behaviours in sync with the guidelines.</p>

<p>Previously I've done this with the use of <code>ViewPager</code> and managing the back stack my selfe, but that doesn't feels like the right approach with the new Navigation.</p>

<p>Thanks in advance!</p>

<hr>

<p><strong>Edit:</strong></p>

<p>There's a more elaborate answer <a href=""https://stackoverflow.com/questions/51707889/android-jetpack-navigation-with-multiple-stack/52146506#52146506"">here</a>.</p>
",3499145,,3499145,,2019-03-20 7:27:39,2019-03-20 7:27:39,Android Jetpack Navigation proper back stack with BottomNavigationView,<android><android-architecture-components><bottomnavigationview><android-navigation><android-jetpack>,2,0,4,,
Android,52173040,1,52176365,1067,9/5/2018 2:49:53,1,,9/4/2018 19:43:48,,1,653,"<pre><code>@Test
fun sendResultToUI() {

    val foo = MutableLiveData&lt;Resource&lt;User&gt;&gt;()
    val bar = MutableLiveData&lt;Resource&lt;User&gt;&gt;()
    `when`(userRepository.loadUser(""foo"")).thenReturn(foo)
    `when`(userRepository.loadUser(""bar"")).thenReturn(bar)
    val observer = mock&lt;Observer&lt;Resource&lt;User&gt;&gt;&gt;()
    userViewModel.user.observeForever(observer) //Create foo and bar, observe user live data

    userViewModel.setLogin(""foo"")
    verify(observer, never()).onChanged(any()) //Make sure that setting login to foo did not touch vm.user?

    /*val fooUser = TestUtil.createUser(""foo"")
    val fooValue = Resource.success(fooUser)
    foo.value = fooValue
    verify(observer).onChanged(fooValue)
    reset(observer)

    val barUser = TestUtil.createUser(""bar"")
    val barValue = Resource.success(barUser)
    bar.value = barValue
    userViewModel.setLogin(""bar"")
    verify(observer).onChanged(barValue)*/
}
</code></pre>

<p>Can anyone please explain wtf this line: <code>verify(observer, never()).onChanged(any())</code> is doing in Google's <a href=""https://github.com/googlesamples/android-architecture-components/tree/master/GithubBrowserSample"" rel=""nofollow noreferrer"">GithubBrowser</a> sample? I just don't understand it, calling <code>setLogin()</code> <em>fires</em> the observer so how the hell can we verify that <code>onChanged()</code> was never called when we specifically triggered it on the previous line!?</p>
",1866373,,,,,2018-09-05 2:49:53,Android Architecture sample unit testing live data,<android><kotlin><android-testing><android-architecture-components><android-livedata>,1,0,,,
Android,52235986,1,52236076,1068,9/8/2018 14:07:16,0,,9/8/2018 13:55:00,,3,663,"<p>How many methods will I have to make for Room migration if I have db version 10?</p>

<p>I looked into the following example <a href=""https://github.com/googlesamples/android-architecture-components/blob/master/PersistenceMigrationsSample/app/src/room3/java/com/example/android/persistence/migrations/UsersDatabase.java"" rel=""nofollow noreferrer"" title=""Google Persistence Migration Sample"">Google Persistence Migration Sample</a></p>

<p>and I found <em>Migration</em> varargs based on probable scenarios for database version 4.</p>

<pre><code>public static UsersDatabase getInstance(Context context) {
    synchronized (sLock) {
        if (INSTANCE == null) {
            INSTANCE = Room.databaseBuilder(context.getApplicationContext(),
                    UsersDatabase.class, ""Sample.db"") 
                    .addMigrations(MIGRATION_1_2, MIGRATION_2_3, MIGRATION_3_4, MIGRATION_1_4)
                    .build(); 
        } 
        return INSTANCE;
    } 
} 
</code></pre>

<p>My question is, Suppose I am using Room from the db v1 and by time my app reaches to db v10, how many migration methods will I have to write?</p>

<p>In sqlite, we get current db version of installed app in <code>onUpgrade</code> and we just fall through switch case without break statements so that it satisfies all db upgrades.</p>

<p>However, I am not sure, but afaik, we cannot get current db version of installed app in room, we write all possible methods for migration. </p>

<p>But it feels so inconvenient, inappropriate to write total 45 methods if I have db v10!</p>

<p>Is there any better solution?</p>
",5492211,,2649012,,2018-09-08 15:47:56,2018-09-08 15:47:56,Room Database migration,<android><database><sqlite><android-room>,2,0,,,
Android,52381029,1,52396338,775,9/19/2018 0:34:05,1,,9/18/2018 7:21:54,,5,733,"<p>Regarding <a href=""https://developer.android.com/training/articles/keystore"" rel=""noreferrer"">Android Keystore system</a> article,</p>

<blockquote>
  <p>Key material never enters the application process. When an application performs cryptographic operations using an Android Keystore key, behind the scenes plaintext, ciphertext, and messages to be signed or verified are fed to a system process which carries out the cryptographic operations. If the app's process is compromised, the attacker may be able to use the app's keys but cannot extract their key material (for example, to be used outside of the Android device)</p>
</blockquote>

<p>So, my question is why is in <a href=""https://github.com/googlesamples/android-BasicAndroidKeyStore/"" rel=""noreferrer"">BasicAndroidKeyStore</a>, developer able to <a href=""https://github.com/googlesamples/android-BasicAndroidKeyStore/blob/master/Application/src/main/java/com/example/android/basicandroidkeystore/BasicAndroidKeyStoreFragment.java#L211"" rel=""noreferrer"">get the KeyPair object</a> and then <a href=""https://github.com/googlesamples/android-BasicAndroidKeyStore/blob/master/Application/src/main/java/com/example/android/basicandroidkeystore/BasicAndroidKeyStoreFragment.java#L213"" rel=""noreferrer"">print its public/private keys</a>?</p>

<p>If developer can access the keys, how this system can be considered to be secured? It's not. If an attacker compromises the app process, he can easily retrieve the kays and use outside of the device. </p>
",1841194,,,,,2018-09-24 4:04:01,Can we extract public/private keys from the Android Keystore?,<android><android-keystore>,1,1,1,,
Android,52367169,1,52420312,1070,9/20/2018 7:59:56,3,,9/17/2018 11:54:09,,4,358,"<p><strong>What I Need:</strong> </p>

<p>To Crop out the only exact face from Image.</p>

<p><strong>What I Have Done:</strong> </p>

<p><a href=""https://github.com/blundell/FaceDetectionTutorialWithPreview"" rel=""nofollow noreferrer"">https://github.com/blundell/FaceDetectionTutorialWithPreview</a></p>

<p>With This way or with </p>

<p><a href=""https://github.com/googlesamples/android-vision"" rel=""nofollow noreferrer"">https://github.com/googlesamples/android-vision</a></p>

<p>Both way I am getting Face Detected. But I am unable to crop the detected Face.</p>

<p>I tried with </p>

<pre><code>Matrix matrix = new Matrix();

        RectF sourceRect = null , destRect = null;

        for (Camera.Face f : mFaces) {

            // Draws a circle at the position of the detected face, with the face's track id below.
            float x = translateX(f.rect.centerX() + f.rect.width() / 2);
            float y = translateY(f.rect.centerY() + f.rect.height() / 2);
            //canvas.drawCircle(x, y, FACE_POSITION_RADIUS, mFacePositionPaint);
            //  canvas.drawText(""id: "" + mFaceId, x + ID_X_OFFSET, y + ID_Y_OFFSET, mIdPaint);
            // canvas.drawText(""happiness: "" + String.format(""%.2f"", face.getIsSmilingProbability()), x - ID_X_OFFSET, y - ID_Y_OFFSET, mIdPaint);
            // canvas.drawText(""right eye: "" + String.format(""%.2f"", face.getIsRightEyeOpenProbability()), x + ID_X_OFFSET * 2, y + ID_Y_OFFSET * 2, mIdPaint);
            //canvas.drawText(""left eye: "" + String.format(""%.2f"", face.getIsLeftEyeOpenProbability()), x - ID_X_OFFSET*2, y - ID_Y_OFFSET*2, mIdPaint);

            // Draws a bounding box around the face.
            float xOffset = scaleX(f.rect.width() / 2.0f);
            float yOffset = scaleY(f.rect.height() / 2.0f);
            float left = x - xOffset;
            float top = y - yOffset;
            float right = x + xOffset;
            float bottom = y + yOffset;

            sourceRect = new RectF(0, 0, source.getWidth(), source.getHeight());
            destRect = new RectF(left, top, right, bottom);

            Log.v(""Margins: "",""top: ""+top+""\n""+""left: ""+left+""\n""+""right: ""+right+""\n""+""bottom: ""+bottom+""\n"");

        }


        matrix.setRectToRect(sourceRect, destRect, Matrix.ScaleToFit.CENTER);

        matrix.postRotate(angle);

        return Bitmap.createBitmap(source, 0, 0, source.getWidth(), source.getHeight(),
                matrix, true);
</code></pre>

<p>The same code working for drawing it for canvas but while cropping its not working. </p>

<p>For Now, I am taking pictures of the whole view. Just need the way how to crop from that image like below.
<a href=""https://i.stack.imgur.com/rlbEY.jpg"" rel=""nofollow noreferrer""><img src=""https://i.stack.imgur.com/rlbEY.jpg"" alt=""enter image description here""></a></p>
",6000190,,,,,2018-09-20 7:59:56,Crop Detected Face in Android,<android><crop><face-detection>,2,0,,,
Android,52441736,1,52446017,1071,9/21/2018 14:36:39,0,,9/21/2018 10:28:45,,4,469,"<p>I want to pre-populate my Room database from the json file in the assets folder. I follow the <a href=""https://github.com/googlesamples/android-sunflower/tree/master/app/src/main/java/com/google/samples/apps/sunflower"" rel=""nofollow noreferrer"">Google Sunflower sample</a>. I copied the SeedDatabaseWorker class:</p>

<pre><code>import android.content.Context
import android.util.Log
import androidx.work.Worker
import androidx.work.WorkerParameters
import com.dmitrysimakov.gymlab.data.GymLabDb
import com.dmitrysimakov.gymlab.data.entity.Training
import com.google.gson.Gson
import com.google.gson.reflect.TypeToken
import com.google.gson.stream.JsonReader
import javax.inject.Inject

class SeedDatabaseWorker(val context: Context, workerParams: WorkerParameters) : Worker(context, workerParams) {
    private val TAG = SeedDatabaseWorker::class.java.simpleName

    @Inject lateinit var database: GymLabDb

    override fun doWork(): Worker.Result {
        val plantType = object : TypeToken&lt;List&lt;Training&gt;&gt;() {}.type
        var jsonReader: JsonReader? = null

        return try {
            val inputStream = context.assets.open(""training.json"")
            jsonReader = JsonReader(inputStream.reader())
            val plantList: List&lt;Training&gt; = Gson().fromJson(jsonReader, plantType)
            database.trainingDao().insert(plantList)
            Worker.Result.SUCCESS
        } catch (ex: Exception) {
            Log.e(TAG, ""Error seeding database"", ex)
            Worker.Result.FAILURE
        } finally {
            jsonReader?.close()
        }
    }
}
</code></pre>

<p>I'm using Dagger 2, so instead of doing this: <a href=""https://github.com/googlesamples/android-sunflower/blob/master/app/src/main/java/com/google/samples/apps/sunflower/data/AppDatabase.kt"" rel=""nofollow noreferrer"">Sunflower AppDatabase</a>, I do this:</p>

<pre><code>import android.arch.persistence.db.SupportSQLiteDatabase
import android.arch.persistence.room.Room
import android.arch.persistence.room.RoomDatabase
import androidx.work.OneTimeWorkRequestBuilder
import androidx.work.WorkManager
import com.dmitrysimakov.gymlab.GymLabApp
import com.dmitrysimakov.gymlab.data.GymLabDb
import com.dmitrysimakov.gymlab.workers.SeedDatabaseWorker
import dagger.Module
import dagger.Provides
import javax.inject.Singleton

@Module(includes = [ViewModelModule::class])
class AppModule {

    @Singleton
    @Provides
    fun provideDb(app: GymLabApp): GymLabDb {
        return Room
                .databaseBuilder(app, GymLabDb::class.java, ""gymlab.db"")
                .addCallback(object : RoomDatabase.Callback() {
                    override fun onCreate(db: SupportSQLiteDatabase) {
                        super.onCreate(db)
                        val request = OneTimeWorkRequestBuilder&lt;SeedDatabaseWorker&gt;().build()
                        WorkManager.getInstance().enqueue(request)
                    }
                })
                .fallbackToDestructiveMigration()
                .build()
    }

    @Singleton
    @Provides
    fun provideTrainingDao(db: GymLabDb) = db.trainingDao()
}
</code></pre>

<p>But I can't inject the database that has not yet been created. So, how can I access the dao?</p>
",7775572,,7775572,,2018-09-21 11:44:02,2018-10-02 5:52:52,Android. Could not instantiate Worker,<android><dagger-2><android-room><android-architecture-components><android-workmanager>,2,0,1,,
Android,50615225,1,52530498,1072,9/27/2018 6:11:41,119,,5/31/2018 0:58:02,,5,1315,"<p>Which is the best way to update a single element when using the new paging library?</p>

<p>Let's say we have the <a href=""https://github.com/googlesamples/android-architecture-components/tree/master/PagingWithNetworkSample"" rel=""noreferrer"">Paging with network</a> google sample using the <code>PageKeyedSubredditDataSource</code>. Imagine we want to make a change of a single element of <code>RedditPost</code>. So, we want to check if it is in the list and if so, update it. The update should not be as easy as calling invalidate() which will make a call to the first page (maybe the RedditPost is in the 5th page. We don't want to update all elements, just one).</p>
",5125212,,,,,2018-09-27 6:11:41,Best way to update a single element using Paging Library,<android><android-architecture-components><android-paging><android-livedata>,1,8,3,,
Android,52576072,1,52576209,1073,9/30/2018 8:39:26,0,,9/30/2018 8:21:04,,1,416,"<p>Recently I have dived into learning new andoirdX artefacts including Android Architecture Components. </p>

<p>After reading through the officials docs and a google code samples I have successfully added the necessary dependencies in both my project and app level Gradle files. 
They are as follows</p>

<pre><code>dependencies {
    classpath 'com.android.tools.build:gradle:3.2.0'
    classpath ""org.jetbrains.kotlin:kotlin-gradle-plugin:$kotlin_version""
    classpath ""android.arch.navigation:navigation-safe-args-gradle-plugin:$navigationVersion""

    // NOTE: Do not place your application dependencies here; they belong
    // in the individual module build.gradle files
}
</code></pre>

<p>and </p>

<pre><code>apply plugin: 'com.android.application'

apply plugin: 'kotlin-android'

apply plugin: 'kotlin-android-extensions'

apply plugin: 'kotlin-kapt'

apply plugin: 'androidx.navigation.safeargs'

android {
compileSdkVersion 28
defaultConfig {
    applicationId ""_ _ _ _ _ _""
    minSdkVersion 15
    targetSdkVersion 28
    versionCode 1
    versionName ""1.0""
    vectorDrawables.useSupportLibrary = true
    testInstrumentationRunner ""androidx.test.runner.AndroidJUnitRunner""
}
buildTypes {
    release {
        minifyEnabled false
        proguardFiles getDefaultProguardFile('proguard-android.txt'), 'proguard-rules.pro'
    }
}
}

dependencies {
implementation fileTree(dir: 'libs', include: ['*.jar'])
implementation""org.jetbrains.kotlin:kotlin-stdlib-jdk8:$kotlin_version""
implementation 'androidx.appcompat:appcompat:1.0.0'
implementation 'androidx.recyclerview:recyclerview:1.0.0'
implementation 'androidx.constraintlayout:constraintlayout:2.0.0-alpha2'
implementation 'com.google.android.material:material:1.0.0-rc01'
testImplementation 'junit:junit:4.12'
androidTestImplementation 'androidx.test:runner:1.1.0-alpha3'
androidTestImplementation 'androidx.test.espresso:espresso-core:3.1.0-alpha3'


def lifecycle_version = ""2.0.0-beta01""
def room_version = ""2.0.0-beta01""
def navigationVersion = '1.0.0-alpha06'
kapt ""androidx.room:room-compiler:$room_version""
kapt ""androidx.lifecycle:lifecycle-compiler:$lifecycle_version""

implementation 'androidx.core:core-ktx:1.0.0-alpha1'
implementation ""androidx.lifecycle:lifecycle-viewmodel-ktx:$lifecycle_version""
implementation ""androidx.lifecycle:lifecycle-livedata:$lifecycle_version""
implementation ""androidx.lifecycle:lifecycle-runtime:$lifecycle_version""
implementation ""android.arch.navigation:navigation-fragment-ktx:$navigationVersion""
implementation ""android.arch.navigation:navigation-ui-ktx:$navigationVersion""

implementation ""androidx.room:room-runtime:$room_version""
 }
</code></pre>

<p>after giving Gradle sync everything worked fine, however, it showed an error saying <strong>""Manifest merge error please see logs for more info""</strong></p>

<p>I have double checked with <a href=""https://github.com/googlesamples/android-sunflower"" rel=""nofollow noreferrer"">an app from google</a> repository and everything seems normal.</p>

<p>Please accept my humble appreciation in advance</p>
",,user5436326,,,,2018-09-30 8:39:26,Manifest marge error after migrating to androidX,<android><android-jetpack><android-navigation-component>,1,0,1,,
Android,49832787,1,52724308,1074,10/9/2018 15:13:56,178,,4/14/2018 14:56:33,,1,1264,"<p>Is it possible to prevent LiveData receive the last value when start observing?
I am considering to use LiveData as events.</p>

<p>For example events like show message, a navigation event or a dialog trigger, similar to EventBus.</p>

<p>I found something similar <a href=""https://github.com/googlesamples/android-architecture/blob/dev-todo-mvvm-live/todoapp/app/src/main/java/com/example/android/architecture/blueprints/todoapp/SingleLiveEvent.java"" rel=""nofollow noreferrer"">SingleLiveEvent</a> - but it work only for 1 observer and not for multiple observers.</p>
",5827565,,5827565,,2019-02-08 23:34:16,2019-03-17 23:00:43,Android LiveData prevent receive the last value when subscribe,<android><android-architecture-components><android-livedata><mutablelivedata>,5,5,2,,
Android,52788958,1,52790082,1079,10/13/2018 6:15:22,0,,10/13/2018 2:25:10,,1,157,"<p>I'm adopting MVVM to my Android apps recently. In order to solve the problems underlying with the lifecycle of an app, Google had released LiveData. </p>

<p>The usage of LiveData has different scenarios, as pointed out in the <a href=""https://medium.com/androiddevelopers/livedata-with-snackbar-navigation-and-other-events-the-singleliveevent-case-ac2622673150"" rel=""nofollow noreferrer"">medium article wrote by Jose AlcÃ©rreca</a>, you can use SingleLiveEvent or something like the event wrapper pattern.</p>

<p>I want to make sure the <a href=""https://github.com/googlesamples/android-architecture/blob/dev-todo-mvvm-live/todoapp/app/src/main/java/com/example/android/architecture/blueprints/todoapp/SingleLiveEvent.java"" rel=""nofollow noreferrer""><strong>SingleLiveEvent</strong></a>, or the <a href=""https://gist.github.com/JoseAlcerreca/5b661f1800e1e654f07cc54fe87441af#file-event-kt"" rel=""nofollow noreferrer""><strong>event wrapper pattern</strong></a>, which one would be the best practice to use with LiveData in Android MVVM architecture. And I found the <a href=""https://github.com/google/iosched"" rel=""nofollow noreferrer"">Google I/O app</a> of this year(2018) have no usages of <strong>SingleLiveEvent</strong>, it uses <strong>event wrapper pattern</strong> instead.</p>

<p>Previously I have opened an <a href=""https://github.com/googlesamples/android-architecture/issues/593"" rel=""nofollow noreferrer"">issue</a> on the project <a href=""https://github.com/googlesamples/android-architecture"" rel=""nofollow noreferrer"">android-architecture</a>, at first I'm seeking an official reply, but it seems to have no comments at all. As a result, I would like to hear the advice from the developers who already use these stuff and have reflections on it. </p>

<p>Please share your precious experiences, thank you in advance.</p>
",4414208,,,,,2018-10-13 6:15:22,Does event wrapper pattern replace the use of SingleLiveEvent?,<android><android-livedata><android-architecture-lifecycle><android-architecture>,1,0,,,
Android,52873173,1,52897124,1080,10/19/2018 17:16:45,1,,10/18/2018 11:42:00,,20,3401,"<p>I am migrating my app to androidx, I can't seem to get my unit tests working. I took example from <a href=""https://github.com/googlesamples/android-testing/tree/master/runner/AndroidJunitRunnerSample/"" rel=""noreferrer"">Google's AndroidJunitRunnerSample</a>, which has been updated to use the new androidx api. I get the following error when trying to run my tests:</p>

<pre><code>java.lang.Exception: Delegate runner 'androidx.test.internal.runner.junit4.AndroidJUnit4ClassRunner' for AndroidJUnit4 could not be loaded. Check your build configuration.
</code></pre>

<p>Here is my module build.gradle:</p>

<pre><code>android {
    defaultConfig {
        testInstrumentationRunner ""androidx.test.runner.AndroidJUnitRunner""
    }
}
dependencies {
    // Test dependencies
    androidTestImplementation 'androidx.test:core:1.0.0-beta02'
    androidTestImplementation 'androidx.test.ext:junit:1.0.0-beta02'
    androidTestImplementation 'androidx.test:runner:1.1.0-beta02'
    androidTestImplementation 'androidx.test.espresso:espresso-core:3.1.0-beta02'
    androidTestImplementation ""androidx.arch.core:core-testing:2.0.0""
    androidTestImplementation 'androidx.room:room-testing:2.1.0-alpha01'
    androidTestImplementation 'androidx.test.espresso:espresso-core:3.1.0-beta02'
    androidTestImplementation 'org.hamcrest:hamcrest-library:1.3'
}
</code></pre>

<p>And here is how my tests are structured:</p>

<pre><code>import org.junit.BeforeClass;
import org.junit.Test;
import org.junit.runner.RunWith;

import androidx.test.ext.junit.runners.AndroidJUnit4;

@RunWith(AndroidJUnit4.class)
public class EntityParcelTest {

    @BeforeClass
    public void createEntities() {
        // Setup...
    }

    @Test
    void someTest() {
        // Testing here
    }
</code></pre>

<p>What am I doing wrong?</p>
",10518087,,10518087,,2018-10-19 17:02:09,2019-03-01 11:15:35,Migrating Junit4 tests to androidx: What causes 'delegate runner could not be loaded'?,<android><android-studio><junit><junit4><androidx>,5,0,3,,
Android,52873328,1,52943251,1081,10/23/2018 7:18:44,5,,10/18/2018 11:50:17,,1,195,"<p>I'm currently working on instant apps for Android and I want to use the Camera. 
I'm requesting the camera permission in a Fragment, but the Permission request dialog doesn't appear. </p>

<p>This is how I request the permission in the Fragment:</p>

<pre><code>requestPermissions(new String[]{
                    Manifest.permission.CAMERA}, 1);
</code></pre>

<p>Now I expect, that the Permission request dialog is displayed, as it is for the Application itself (com.android.application). Unfortunately it doesn't appear for the instant app (com.android.instantapp).</p>

<p>Additionally I figured out that the </p>

<pre><code>@Override
public void onRequestPermissionsResult(final int requestCode, @NonNull final String permissions[], @NonNull int[] grantResults)
{...}
</code></pre>

<p>is called but with <code>grantResults[0] = -1</code>, which means <code>PackageManager.PERMISSION_DENIED</code>.</p>

<p>As per the <a href=""https://developer.android.com/topic/instant-apps/faqs.html"" rel=""nofollow noreferrer"">Instant Apps FAQ</a> it should be the same as for the application:</p>

<blockquote>
  <p><strong>How do permissions work in Google Play Instant?</strong></p>
  
  <p>Google Play Instant uses the <a href=""https://developer.android.com/training/permissions/requesting.html"" rel=""nofollow noreferrer"">runtime permissions</a> model that was introduced in Android 6.0 (API level 23).</p>
</blockquote>

<p>The same problem occurs, if I add a permission request for the Instant App Demo project from Google (<a href=""https://github.com/googlesamples/android-topeka"" rel=""nofollow noreferrer"">android-topeka</a>).</p>
",4291264,,4291264,,2018-10-19 11:26:11,2018-10-23 7:18:44,Android instant app permission request dialog not shown,<android><android-permissions><android-instant-apps>,2,5,1,,
Android,44497929,1,52966077,1082,10/24/2018 9:56:07,499,,6/12/2017 11:08:04,,2,3333,"<p>I have created an instant app. I uploaded it to my Google Console, and I got this error. </p>

<blockquote>
  <p>The www.kochchy.cz website has not been linked to your application
  through the Digital Assets Link protocol. Link the application site
  with Digital Assets Link.</p>
</blockquote>

<pre><code>[{
  ""relation"": [""delegate_permission/common.handle_all_urls""],
  ""target"": {
   ""namespace"": ""android_app"",
    ""package_name"": ""com.kochchy.instantapptest.app"",
    ""sha256_cert_fingerprints"":[""A4:A6:74:15:F1:3E:38:3F:93:0F:EF:E3:A6:86:8E:7C:25:45:E8:80:5B:5E:35:70:49:20:DB:F8:CB:D4:FC:E0""]
  }
}] 
</code></pre>

<p>Both apks, instant and installable use same id: <strong>com.kochchy.instantapptest.app</strong> (each defined in own module manifests) </p>

<p>My <strong>base</strong> module manifest looks like this: </p>

<pre><code>&lt;?xml version=""1.0"" encoding=""utf-8""?&gt;
&lt;manifest xmlns:android=""http://schemas.android.com/apk/res/android""
package=""com.kochchy.instantapptest""&gt;

&lt;uses-permission android:name=""android.permission.INTERNET"" /&gt;

&lt;application
    android:allowBackup=""true""
    android:icon=""@mipmap/ic_launcher""
    android:label=""@string/app_name""
    android:roundIcon=""@mipmap/ic_launcher_round""
    android:theme=""@style/AppTheme""&gt;

    &lt;activity
        android:name="".MainActivity""
        android:label=""@string/app_name""
        android:theme=""@style/AppTheme.NoActionBar""&gt;
        &lt;intent-filter&gt;
            &lt;action android:name=""android.intent.action.MAIN"" /&gt;

            &lt;category android:name=""android.intent.category.LAUNCHER"" /&gt;
        &lt;/intent-filter&gt;

        &lt;meta-data
            android:name=""default-url""
            android:value=""https://www.kochchy.cz"" /&gt;

        &lt;intent-filter android:autoVerify=""true""&gt;
            &lt;action android:name=""android.intent.action.VIEW"" /&gt;

            &lt;category android:name=""android.intent.category.DEFAULT"" /&gt;
            &lt;category android:name=""android.intent.category.BROWSABLE"" /&gt;

            &lt;data android:scheme=""https"" /&gt;
            &lt;data android:scheme=""http"" /&gt;
            &lt;data android:host=""www.kochchy.cz"" /&gt;
            &lt;data android:pathPattern=""/menu"" /&gt;
        &lt;/intent-filter&gt;
    &lt;/activity&gt;
&lt;/application&gt;
&lt;/manifest&gt;
</code></pre>

<p><strong>------ EDIT ------</strong></p>

<p>I made new project from google instant app sample: <a href=""https://github.com/googlesamples/android-instant-apps/tree/master/hello"" rel=""nofollow noreferrer"">https://github.com/googlesamples/android-instant-apps/tree/master/hello</a></p>

<p>Same google console error. I guess there is problem in my web setup, not in the app.</p>

<blockquote>
  <p><strong>The www.kochchy.cz website has not been linked to your application
  through the Digital Assets Link protocol. Link the application site
  with Digital Assets Link.</strong></p>
</blockquote>
",2291718,,2291718,,2017-06-15 14:19:10,2018-10-24 9:56:07,Digital Assets Link link to my website,<android><google-console-developer><android-instant-apps>,7,5,1,,
Android,52972693,1,53040454,1083,10/29/2018 7:12:22,5,,10/24/2018 15:23:19,,1,117,"<p>I'm currently working on Android instant apps by using the <a href=""https://github.com/googlesamples/android-topeka"" rel=""nofollow noreferrer"">android-topeka</a> example project.</p>

<p>Everything works as expected, after I'm using <a href=""http://androidannotations.org/"" rel=""nofollow noreferrer"">AndroidAnnotations</a> on my Activity:</p>

<pre><code>@EActivity(resName = ""activity_start"")
public class StartActivity extends AppCompatActivity {
...
}
</code></pre>

<p>If I want to start the <strong>application</strong>(<code>:installed</code>) one, everything works, but for the <strong>instant-app</strong>(<code>:instant</code>), I get the following error:</p>

<pre><code>:base:javaPreCompileDebugFeature UP-TO-DATE
error: The generated &lt;applicationId&gt;.R class cannot be found
1 error
:base:compileDebugFeatureJavaWithJavac FAILED
</code></pre>

<p><strong>Additional Info:</strong></p>

<blockquote>
  <p>If I remove the <code>application project(':installed')</code> in the base
  build.gradle I can start the <strong>instant-app</strong> but with the wrong
  <strong>application-id</strong> (configured in the <code>:installed</code> project).</p>
</blockquote>
",4291264,,,,,2018-10-29 7:32:35,AndroidAnnotations + Instant App - The generated <applicationId>.R class cannot be found,<android><android-annotations><android-instant-apps>,2,3,,,
Android,53051745,1,53052560,1084,10/29/2018 19:32:41,0,,10/29/2018 18:31:53,,2,259,"<p>I'm working on an Android app that uses some 3rd party native libraries. We need to add some functionality to these libraries. So I wrote a set of C++ classes with the code that I need and also cross-compile openssl, as we are using openssl crypto functions.</p>

<p>I made a demo app to test my code and everything is working fine. </p>

<p>Now I need to send this code to the people that are developing the 3rd party libraries, and they will add our code and wrap all the native code in a JAR for us to use it in our app.</p>

<p>I used this example <a href=""https://github.com/googlesamples/android-ndk/tree/master/hello-libs"" rel=""nofollow noreferrer"">NDK hello libs</a> as a base. As I want to send my code as a shared library (.so file), I did this in the 'CMakeList.txt':</p>

<pre><code>cmake_minimum_required(VERSION 3.4.1)

set(distribution_DIR ${CMAKE_SOURCE_DIR}/../distribution)

add_library(lib_crypto STATIC IMPORTED)
set_target_properties(lib_crypto PROPERTIES IMPORTED_LOCATION
    ${distribution_DIR}/openssl/lib/${ANDROID_ABI}/libcrypto.a)

set(CMAKE_CXX_FLAGS ""${CMAKE_CXX_FLAGS} -std=gnu++11"")

### This code just calls my my-lib ###
add_library(native-lib SHARED
        src/main/cpp/native-lib.cpp)

### This is the lib I want to build ###
add_library(my-lib SHARED
         src/main/cpp/*****.cpp
         # more files...
         )

target_include_directories(my-lib PRIVATE ${distribution_DIR}/openssl/include)

target_link_libraries(
                native-lib
                my-lib
                )

target_link_libraries(
                neclic
                lib_crypto
                )
</code></pre>

<p>I built the APK and took 'my-lib.so' from it. Then I made a new project using this lib (and including the .h headers) and everything is working as expected.</p>

<p>My questions is:
Is there a better way of doing this? May I expect any problem when I send this library to be integrated with the original code? For example, do they need to use the same NDK version? Or 'my-lib.so' can be used in any android app if the arch is supported?</p>

<p>Thanks!</p>
",10575618,,,,,2018-10-29 19:32:41,Android NDK - Build shared library from source code,<android><c++><cmake><android-ndk><.so>,1,1,,,
Android,53129932,1,53275304,1085,11/13/2018 6:48:14,10,,11/3/2018 9:13:32,,4,618,"<p>I want to get realtime frames from video. like camera is open and I am getting frames per seconds.</p>

<p>I have also gone through google example of video capturing app via camera2 API <a href=""https://github.com/googlesamples/android-Camera2Video"" rel=""nofollow noreferrer"">https://github.com/googlesamples/android-Camera2Video</a>
, But couldn't find any such method/way.</p>

<p>I know this is possible as video broadcasters and apps like snapchat who does realtime video processing must be doing something like this.</p>

<p>Also I require 30 frames/seconds.</p>
",1404257,,,,,2018-11-13 6:48:14,How to capture frame by frame images from Android video recording in real time,<java><android><kotlin><video-processing><video-capture>,1,5,3,,
Android,53193247,1,53341010,1086,11/16/2018 15:37:09,9,,11/7/2018 16:03:20,,2,1575,"<p>I am trying to write Android Instrumented test using Espresso. When I run the test I get this error</p>

<blockquote>
  <p>java.lang.IllegalStateException: No instrumentation registered! Must run under a registering instrumentation.</p>
</blockquote>

<p>I can't understand what this error means.</p>

<p>I will briefly explain what I am doing in my test. I followed the <a href=""https://github.com/googlesamples/android-testing"" rel=""nofollow noreferrer"">samples</a> given by google and <a href=""https://github.com/LearnShareKnowledge/EspressoTestingUi"" rel=""nofollow noreferrer"">EspressoTesting Tutorial</a></p>

<pre><code>@SmallTest
@RunWith(AndroidJUnit4.class)
public class ActivityInputTest {

   @Rule
   public ActivityTestRule&lt;ActivityInput&gt; aiRule = new ActivityTestRule&lt;&gt;(ActivityInput.class);


   @Before
   public void setUp(){}
}
</code></pre>

<p>When I run the test the error occurs at annotation <code>@Rule</code>. Can I get some explanation why this happens or what is the issue behind this? I am not interested in working code but more on the actual problem behind the issue.</p>
",1965914,,1043380,,2018-11-08 16:48:19,2018-11-16 15:37:09,Android Instrumentation Testing: No instrumentation registered Error,<java><android><android-studio><android-espresso>,1,0,1,,
Android,53372539,1,53390772,1087,11/20/2018 10:17:09,1,,11/19/2018 10:23:03,,5,1017,"<p>I am implementing an android app (in Kotlin, but that is not relevant to the Problem) in my free time and I try to use android jetpack and new libraries. I have a single Activity with a navigation drawer. I try to follow the <a href=""https://github.com/googlesamples/android-sunflower"" rel=""nofollow noreferrer"">sample sunflower app</a>. It uses the following combination in the main activity to enable the logic behind the navigation drawer:</p>

<pre><code>appBarConfiguration = AppBarConfiguration(navController.graph, drawerLayout)
setSupportActionBar(findViewById(R.id.toolbar))
setupActionBarWithNavController(navController, appBarConfiguration)
</code></pre>

<p><strong>Note on this code</strong>: This automatically will navigate to the correct fragments when clicked in the navigation drawer and close the drawer and keep them selected etc. All that boilerplate code. That is pretty neat and also works. As far as I understand this, the IDs of the navigation drawer menu items have to match the ids of the fragments in the navigation graph and this way they are connected.</p>

<p><strong>The problem I have</strong>: When I use the navigation drawer to go to any fragment other than the starting fragment of the navigation graph, it will display a back button instead of the hamburger item. That is not what I expect, I would expect it still to be the hamburger item since the navigation drawer is for navigating between views on an equal level and not nested in each other, right? I expect a back button if I navigate to a subfragment of any fragment by clicking on elements in that fragment (for example list -> detail) but not if I navigate using the navigation drawer.</p>

<p>Now I traced that problem back to the <code>AppBarConfiguration</code> builder which reads on the constructor taking a navgraph <code>The NavGraph whose start destination should be considered the only top level destination.</code> I can fairly easily fix that by overriding <code>AppBarConfiguration</code> to return different top level destinations than just the starting destination of the navigation graph. </p>

<p>However my question is, why is there this behaviour default? Is it a bug? If I override this will I violate some design guidelines by Google? Should not every element in the navigation drawer be on the same level how I expect it? Is there a different solution inteded for I want to do?</p>
",3795043,,3795043,,2018-11-27 16:33:54,2018-12-09 18:57:32,Navigation graph with multiple top level destinations,<android><android-navigation-drawer><android-navigation><android-jetpack>,2,0,1,,
Android,53638074,1,53638529,1088,12/5/2018 18:24:54,0,,12/5/2018 17:53:16,,1,25,"<p>I have a RecyclerView which could contain any number of items.  I need to be able to get a single row from that list so i can check its contents or click/long click on that row.</p>

<p>I am struggling greatly to figure out how to do this as unlike ListView's ""onData"" there is no built in functionality to scroll through the RecyclerView to find the row.  It appears that with RecyclerView if the view is not actually ON SCREEN you can not verify that rows UI.</p>

<p>In the examples I have seen they are using the number of items in the list to scroll to each row. However I do not know in advance how many rows my list has as the number is not fixed.</p>

<p>This solution looked very promising, but that assumes you know the items in your list to pass into the espresso objects which is not applicable to me.</p>

<p><a href=""https://medium.com/@_rpiel/recyclerview-and-espresso-a-complicated-story-3f6f4179652e"" rel=""nofollow noreferrer"">https://medium.com/@_rpiel/recyclerview-and-espresso-a-complicated-story-3f6f4179652e</a></p>

<p>This example also assumes it knows which rows are off screen
<a href=""https://github.com/googlesamples/android-testing/blob/master/ui/espresso/RecyclerViewSample/app/src/androidTest/java/com/example/android/testing/espresso/RecyclerViewSample/RecyclerViewSampleTest.java"" rel=""nofollow noreferrer"">https://github.com/googlesamples/android-testing/blob/master/ui/espresso/RecyclerViewSample/app/src/androidTest/java/com/example/android/testing/espresso/RecyclerViewSample/RecyclerViewSampleTest.java</a></p>

<p>Likewise this example knows which row to move to
<a href=""http://blog.forkingcode.com/2016/06/espresso-and-recyclerview.html"" rel=""nofollow noreferrer"">http://blog.forkingcode.com/2016/06/espresso-and-recyclerview.html</a></p>

<p>I need to do something like</p>

<pre><code>onView(withId(R.id.recyclerView)).perform(findRowWhichHasText(""name1"");
</code></pre>

<p>where ""findRowWhichHasText"" does something like</p>

<ul>
<li>find the number of items in the list</li>
<li>scroll to each one in turn (scrollToPosition(i) )</li>
<li><p>check if that row has the item I want. Something like  </p>

<pre><code>StringUtils.equals(viewHolder.nameView.getText().toString(), assetName);
</code></pre></li>
</ul>
",2663916,,6296561,,2019-02-09 22:01:56,2019-02-09 22:01:56,Espresso finding row in RecyclerView that could be off screen,<android><android-recyclerview><android-espresso>,1,0,,,
Android,53573731,1,53764393,1089,12/13/2018 14:45:10,12,,12/1/2018 18:19:26,,12,364,"<p>We try to update <code>sqlite_sequence</code> with the following code.</p>

<pre><code>WeNoteRoomDatabase weNoteRoomDatabase = WeNoteRoomDatabase.instance();
weNoteRoomDatabase.query(new SimpleSQLiteQuery(""UPDATE sqlite_sequence SET seq = 0 WHERE name = 'attachment'""));
</code></pre>

<p>However, it has no effect at all. I exam the <code>sqlite_sequence</code> table content using SQLite browser. The counter is not reset to 0.</p>

<p>If we try to run the same query manually using SQLite browser on same SQLite file, it works just fine.</p>

<p>Our Room database is pretty straightforward.</p>

<pre><code>@Database(
    entities = {Attachment.class},
    version = 6
)
public abstract class WeNoteRoomDatabase extends RoomDatabase {
    private volatile static WeNoteRoomDatabase INSTANCE;

    private static final String NAME = ""wenote"";

    public abstract AttachmentDao attachmentDao();

    public static WeNoteRoomDatabase instance() {
        if (INSTANCE == null) {
            synchronized (WeNoteRoomDatabase.class) {
                if (INSTANCE == null) {
                    INSTANCE = Room.databaseBuilder(
                        WeNoteApplication.instance(),
                        WeNoteRoomDatabase.class,
                        NAME
                    )
                        .build();
                }
            }
        }

        return INSTANCE;
    }
}
</code></pre>

<p>Any idea what we had missed out?</p>

<hr>

<p>Additional information : <a href=""https://github.com/googlesamples/android-architecture-components/issues/330"" rel=""noreferrer"">clearing sqlite_sequence is not working in android room</a></p>
",72437,,72437,,2018-12-02 8:28:35,2018-12-14 16:24:33,Not able to update sqlite_sequence table using RoomDatabase.query,<android><android-room>,3,7,2,,
Android,53931191,1,53954074,1090,12/28/2018 5:32:53,2,,12/26/2018 11:04:41,,1,51,"<p>I'm implement one demo Video and Audio recording using <code>MediaRecorder</code></p>

<p>Download the demo from hear : <strong><a href=""https://github.com/googlesamples/android-MediaRecorder"" rel=""nofollow noreferrer"">Android MediaRecorder Sample</a></strong> </p>

<p>There is one method <strong><code>prepareVideoRecorder()</code></strong> in <code>MainActivity.java</code>. in this method initialization and <strong>set Source</strong> Audio and video like:</p>

<pre><code>mMediaRecorder.setAudioSource(MediaRecorder.AudioSource.MIC);
mMediaRecorder.setVideoSource(MediaRecorder.VideoSource.CAMERA);
</code></pre>

<p>Now i want to audio <strong>ON</strong> or <strong>OFF</strong> functionality.</p>

<p>For that i'll tried like this :</p>

<pre><code> if (!AppSetting.getValue(activity, Config.AUDIO, false)) {
            mMediaRecorder.setVideoSource(MediaRecorder.VideoSource.CAMERA);
        }else {
            mMediaRecorder.setAudioSource(MediaRecorder.AudioSource.MIC);
            mMediaRecorder.setVideoSource(MediaRecorder.VideoSource.CAMERA);
        }
</code></pre>

<p>But app is Crash with below error :</p>

<pre><code>java.lang.IllegalStateException
at android.media.MediaRecorder.setAudioEncoder(Native Method)
</code></pre>

<p>So how to i solve this error or there is another solution for Audio <strong>ON</strong> or <strong>OFF</strong>:</p>
",9180439,,,,,2018-12-28 7:11:39,How to ON or OFF audio recording using MediaRecorder,<java><android><audio><android-mediarecorder>,1,0,1,,
Android,54016644,1,54017265,1091,1/3/2019 6:22:17,0,,1/3/2019 5:08:10,,9,704,"<p>I was reading about the <a href=""https://github.com/googlesamples/android-testing"" rel=""nofollow noreferrer"">Android Testing Samples</a> project and noticed that a ""<strong>new</strong>"" build tool named <strong>Bazel</strong> is being used for building Android projects:</p>

<blockquote>
  <h2>Experimental Bazel Support</h2>
  
  <p>Some of these samples can be built with Bazel on Linux. These samples contain a <code>BUILD.bazel</code> file, which is similar to a <code>build.gradle</code> file. The external dependencies are defined in the top level WORKSPACE file.</p>
  
  <p>This is experimental feature. To run the tests, please install the latest version of Bazel (0.12.0 or later) by following the instructions on the Bazel website. </p>
</blockquote>

<p>Then, </p>

<ul>
<li>What is the added advantage of using Bazel over the existing Gradle? </li>
<li>Is it really good to have TWO build tools for Android? </li>
<li>Does it mean that Android developers will probably need to learn this new build tool in future?</li>
</ul>

<hr>

<p><strong>Update #1:</strong> Updated with accepted answer from <a href=""https://stackoverflow.com/users/7357920/farhana"">farhana</a> and thanks to <a href=""https://stackoverflow.com/users/521209/jin"">Jin</a> for the in depth details about the google build systems. </p>

<p><strong>Update #2:</strong> Updated with google code labs for <a href=""https://codelabs.developers.google.com/codelabs/bazel-android-intro/index.html#0"" rel=""nofollow noreferrer"">bazel android introduction</a>. </p>
",8034839,,8034839,,2019-02-22 8:16:21,2019-03-15 4:47:43,What is the added advantage of using Bazel over Gradle?,<android><gradle><android-gradle><android-testing><bazel>,2,3,6,2019-01-18 19:04:54,
Android,46646744,1,54328498,1092,1/23/2019 13:34:20,471,,10/9/2017 12:41:52,,3,620,"<p>I'm using <code>Recyclerview</code> inside a <code>Fragment</code> Following <a href=""https://github.com/googlesamples/android-architecture/tree/todo-mvp/"" rel=""nofollow noreferrer"">Google's sample of MVP</a> Android architecture and I tried to make the <code>View</code> part passive as possible following <a href=""https://android.jlelse.eu/recyclerview-in-mvp-passive-views-approach-8dd74633158"" rel=""nofollow noreferrer"">this article</a> , which makes the whole <code>Recyclerview</code> <code>Adapter</code> passive of the Data Models and the presenter handles it.</p>

<p><strong>Here is my code of the Fragment:</strong></p>

<pre><code>class OrderHistoryFragment : Fragment(), OrderHistoryContract.View {


    lateinit var mPresenter: OrderHistoryContract.Presenter
    lateinit var rvOrderHistory: RecyclerView
    lateinit var  orderHistoryAdapter : OrderHistoryAdapter


    override fun onCreateView(inflater: LayoutInflater?, container: ViewGroup?,
                              savedInstanceState: Bundle?): View? {
        val root = inflater!!.inflate(R.layout.order_history_fragment, container, false)
        rvOrderHistory = root.findViewById&lt;RecyclerView&gt;(R.id.rvOrderHistory)
        rvOrderHistory.layoutManager = LinearLayoutManager(context, LinearLayout.VERTICAL, false)
         orderHistoryAdapter = OrderHistoryAdapter(mPresenter, object : HistoryItemListener {
            override fun onReorder(orderHistory: OrderHistory) {

            }

            override fun onOpenOrder(orderHistory: OrderHistory) {
                val orderIntent = Intent(activity, OrderDetailActivity::class.java)
                orderIntent.putExtra(""orderId"", orderHistory.id)
                startActivity(orderIntent)

            }
        })
        rvOrderHistory.adapter = orderHistoryAdapter


        return root
    }



    override fun onResume() {
        super.onResume()
        mPresenter.start()

    }

    override fun setPresenter(presenter: OrderHistoryContract.Presenter) {
        mPresenter = checkNotNull&lt;OrderHistoryContract.Presenter&gt;(presenter)

    }


    override fun showLoadingIndicator(load: Boolean?) {


    }


    override fun updateOrdersAdapter() {

        orderHistoryAdapter.notifyDataSetChanged()


    }

    override fun showSnackBar(Message: String) {
        val parentLayout = activity.findViewById&lt;View&gt;(android.R.id.content)
        val snackBar = Snackbar
                .make(parentLayout, Message, Snackbar.LENGTH_INDEFINITE)
        snackBar.setAction(""Dismiss"") { snackBar.dismiss() }
        snackBar.setActionTextColor(Color.RED)
        snackBar.show()

    }


    interface HistoryItemListener {

        fun onReorder(orderHistory: OrderHistory)

        fun onOpenOrder(orderHistory: OrderHistory)

    }

    companion object {

        fun newInstance(): OrderHistoryFragment {

            return OrderHistoryFragment()
        }
    }

    fun OrderHistoryFragment() {

    }

}
</code></pre>

<p><strong>And this is my <code>RecyclerView</code> Adapters code</strong></p>

<pre><code>class OrderHistoryAdapter(internal var orderHistoryPresenter: OrderHistoryContract.Presenter, private val listener: OrderHistoryFragment.HistoryItemListener) : RecyclerView.Adapter&lt;OrderHistoryAdapter.ViewHolder&gt;() {


    override fun onCreateViewHolder(parent: ViewGroup, viewType: Int): ViewHolder {
        val view = LayoutInflater.from(parent.context)
                .inflate(R.layout.order_history_item, parent, false)
        return ViewHolder(view)

    }

    override fun onBindViewHolder(holder: ViewHolder, position: Int) {
        orderHistoryPresenter.onBindOrdersRow(position, holder)
        holder.bReOrder!!.setOnClickListener { v -&gt; listener.onReorder(orderHistoryPresenter.getOrderHistoryItem(position)) }
        holder.cvOrderItem!!.setOnClickListener { v -&gt; listener.onOpenOrder(orderHistoryPresenter.getOrderHistoryItem(position)) }


    }

    override fun getItemId(position: Int): Long {
        return position.toLong()
    }

    override fun getItemCount(): Int {
        return orderHistoryPresenter.getOrdersCount()
    }


    class ViewHolder(itemView: View) : RecyclerView.ViewHolder(itemView), OrderHistoryContract.orderRowView {
        internal var ivOrderVendor: ImageView? = null
        internal var tvOrderId: TextView? = null
        internal var tvOrderItems: TextView? = null
        internal var tvOrderDate: TextView? = null
        internal var tvOrderPrice: TextView? = null
        internal var bReOrder: Button? = null
        internal var cvOrderItem: CardView? = null

        init {
            ivOrderVendor = itemView.findViewById&lt;ImageView&gt;(R.id.ivOrderVendor)
            tvOrderId = itemView.findViewById&lt;TextView&gt;(R.id.tvOrderId)
            tvOrderItems = itemView.findViewById&lt;TextView&gt;(R.id.tvOrderItems)
            tvOrderDate = itemView.findViewById&lt;TextView&gt;(R.id.tvOrderDate)
            tvOrderPrice = itemView.findViewById&lt;TextView&gt;(R.id.tvOrderPrice)
            bReOrder = itemView.findViewById&lt;Button&gt;(R.id.bReOrder)
            cvOrderItem = itemView.findViewById&lt;CardView&gt;(R.id.cvOrderItem)

        }

        override fun setOrderImage(url: String) {
            Glide.with(itemView.context).load(url).into(ivOrderVendor!!)


        }

        override fun setOrderDate(orderDate: String) {
            tvOrderDate!!.text = orderDate


        }

        override fun setOrderId(orderId: String) {
            tvOrderId!!.text = orderId


        }

        override fun setOrderItems(orderItems: ArrayList&lt;String&gt;) {
            val stringBuilder = StringBuilder()
            for (item in orderItems) {
                stringBuilder.append(item)
            }
            tvOrderItems!!.text = stringBuilder.toString()


        }

        override fun setOrderPrice(orderPrice: String) {
            tvOrderPrice!!.text = R.string.price.toString() + "" "" + orderPrice + "" "" + R.string.egp

        }
    }


}
</code></pre>

<p><strong>And Here is code of the presenter which handles the <code>Adapter</code> data and it's binding to the <code>ViewHolder</code></strong> </p>

<pre><code>class OrderHistoryPresenter internal constructor(mDataRepository: DataRepository, mOrdeHistoryView: OrderHistoryContract.View) : OrderHistoryContract.Presenter {


    private val mDataRepository: DataRepository
    //refrence of the View to trigger the functions after proccessing the task
    private val mOrdeHistoryView: OrderHistoryContract.View
    private var orderHistoryItems = ArrayList&lt;OrderHistory&gt;()


    init {
        this.mDataRepository = checkNotNull(mDataRepository, ""tasksRepository cannot be null"")
        this.mOrdeHistoryView = checkNotNull&lt;OrderHistoryContract.View&gt;(mOrdeHistoryView, ""tasksView cannot be null!"")

        mOrdeHistoryView.setPresenter(this)
    }


    override fun start() {
        mOrdeHistoryView.showLoadingIndicator(true)
        mDataRepository.getCurrentUser(object : LocalDataSource.userRequestCallback {
            override fun onUserRequestSuccess(botitUser: BotitUser) {
                val urlParams = HashMap&lt;String, String&gt;()
                urlParams.put(Endpoints.USER_ID_KEY, botitUser.userId!!)
                val url = Endpoints.getUrl(Endpoints.urls.ORDER_HISTORY, urlParams)
                mDataRepository.buildEndPointRequest(url, "" "", Endpoints.requestsType.GET, object : EndpointDataSource.RequestCallback {
                    override fun onRequestSuccess(Body: String) {
                        try {
                            mOrdeHistoryView.showLoadingIndicator(false)
                            orderHistoryItems = JSONParser.parseData(JSONParser.parsers.ORDER_HISTORY, JSONObject(Body)) as ArrayList&lt;OrderHistory&gt;
                            mOrdeHistoryView.updateOrdersAdapter()
                        } catch (e: JSONException) {
                            e.printStackTrace()
                        }

                    }

                    override fun onRequestError(Body: String) {
                        mOrdeHistoryView.showLoadingIndicator(false)
                        mOrdeHistoryView.showSnackBar(""Cannot load data"")

                    }
                })

            }

            override fun onUserRequestError(Body: String) {

            }
        })
    }


    override fun refreshData() {


    }

    override fun getOrdersCount(): Int {

            return orderHistoryItems.size


    }

    override fun onBindOrdersRow(position: Int, orderViewHolder: OrderHistoryContract.orderRowView) {
        if (orderHistoryItems.isNotEmpty()) {
            val orderHistory = orderHistoryItems[position]
//            orderViewHolder.setOrderDate(orderHistory.orderDate!!)
            orderViewHolder.setOrderId(orderHistory.orderId!!)
            orderViewHolder.setOrderImage(orderHistory.orderImage!!)
            orderViewHolder.setOrderItems(orderHistory.orderItems)
            orderViewHolder.setOrderPrice(orderHistory.orderPrice!!)
        }


    }

    override fun getOrderHistoryItem(position: Int): OrderHistory {
        return orderHistoryItems[position]
    }

    override fun actionReOrder(ordreId: String) {


    }


}
</code></pre>

<p><strong>Here is the <code>Fragment</code> XML</strong> </p>

<pre><code>&lt;android.support.v7.widget.RecyclerView android:layout_width=""match_parent""
    xmlns:app=""http://schemas.android.com/apk/res-auto""
    android:id=""@+id/rvOrderHistory""
    android:layout_height=""match_parent""
    xmlns:android=""http://schemas.android.com/apk/res/android""&gt;

        &lt;/android.support.v7.widget.RecyclerView&gt;
</code></pre>

<p>and Here is the RecyclerView Item XML order_history_item.xml</p>

<pre><code>&lt;?xml version=""1.0"" encoding=""utf-8""?&gt;
&lt;android.support.v7.widget.CardView xmlns:android=""http://schemas.android.com/apk/res/android""
    xmlns:app=""http://schemas.android.com/apk/res-auto""
    xmlns:tools=""http://schemas.android.com/tools""
    android:layout_width=""match_parent""
    android:layout_height=""wrap_content""
    android:id=""@+id/cvOrderItem""
    android:layout_margin=""4dp""
    android:orientation=""vertical""&gt;

    &lt;android.support.constraint.ConstraintLayout xmlns:android=""http://schemas.android.com/apk/res/android""
        xmlns:app=""http://schemas.android.com/apk/res-auto""
        xmlns:tools=""http://schemas.android.com/tools""
        android:layout_width=""match_parent""
        android:layout_height=""match_parent""
        android:orientation=""vertical""
        android:padding=""8dp""&gt;


        &lt;ImageView
            android:id=""@+id/ivOrderVendor""
            android:layout_width=""60dp""
            android:layout_height=""60dp""
            android:layout_marginEnd=""8dp""
            android:layout_marginLeft=""8dp""
            android:layout_marginRight=""8dp""
            android:layout_marginStart=""8dp""
            android:layout_marginTop=""8dp""
            app:layout_constraintHorizontal_bias=""0.0""
            app:layout_constraintLeft_toLeftOf=""parent""
            app:layout_constraintRight_toRightOf=""parent""
            app:layout_constraintTop_toTopOf=""parent""
            app:srcCompat=""@drawable/mac"" /&gt;

        &lt;TextView
            android:id=""@+id/tvOrderId""
            android:layout_width=""wrap_content""
            android:layout_height=""wrap_content""
            android:layout_marginEnd=""8dp""
            android:layout_marginLeft=""8dp""
            android:layout_marginRight=""8dp""
            android:layout_marginStart=""8dp""
            android:layout_marginTop=""8dp""
            android:text=""Order #2123""
            android:textAppearance=""@style/TextAppearance.AppCompat.Body2""
            app:layout_constraintHorizontal_bias=""0.0""
            app:layout_constraintLeft_toRightOf=""@+id/ivOrderVendor""
            app:layout_constraintRight_toRightOf=""parent""
            app:layout_constraintTop_toTopOf=""parent"" /&gt;

        &lt;TextView
            android:id=""@+id/tvOrderItems""
            android:layout_width=""242dp""
            android:layout_height=""35dp""
            android:layout_marginEnd=""8dp""
            android:layout_marginStart=""8dp""
            android:text=""MacDonaldâ€™s: Big Mac Beef, Big Tasty Beef. El Ezaby: Signal 2, Pantene Shampoo""
            android:textAppearance=""@style/TextAppearance.AppCompat.Small""
            android:layout_marginRight=""8dp""
            app:layout_constraintRight_toRightOf=""parent""
            android:layout_marginTop=""8dp""
            app:layout_constraintTop_toBottomOf=""@+id/tvOrderId""
            app:layout_constraintLeft_toRightOf=""@+id/ivOrderVendor""
            android:layout_marginLeft=""8dp""
            app:layout_constraintHorizontal_bias=""0.0"" /&gt;

        &lt;TextView
            android:id=""@+id/tvOrderDate""
            android:layout_width=""wrap_content""
            android:layout_height=""wrap_content""
            android:layout_marginBottom=""8dp""
            android:layout_marginEnd=""16dp""
            android:layout_marginRight=""16dp""
            android:layout_marginTop=""8dp""
            android:text=""03:22 PM 23/2/2017""
            app:layout_constraintBottom_toTopOf=""@+id/tvOrderItems""
            app:layout_constraintRight_toRightOf=""parent""
            app:layout_constraintTop_toTopOf=""parent""
            app:layout_constraintVertical_bias=""0.0""
            android:layout_marginLeft=""8dp""
            app:layout_constraintLeft_toLeftOf=""parent""
            app:layout_constraintHorizontal_bias=""1.0"" /&gt;

        &lt;TextView
            android:id=""@+id/tvOrderPrice""
            android:layout_width=""wrap_content""
            android:layout_height=""wrap_content""
            android:layout_marginEnd=""8dp""
            android:layout_marginLeft=""8dp""
            android:layout_marginRight=""8dp""
            android:layout_marginStart=""8dp""
            android:layout_marginTop=""16dp""
            android:text=""Price: 225.50 LE""
            android:textAppearance=""@style/TextAppearance.AppCompat.Body2""
            app:layout_constraintHorizontal_bias=""0.0""
            app:layout_constraintLeft_toLeftOf=""parent""
            app:layout_constraintRight_toRightOf=""parent""
            app:layout_constraintTop_toBottomOf=""@+id/tvOrderItems"" /&gt;

        &lt;Button
            android:id=""@+id/bReOrder""
            android:layout_width=""wrap_content""
            android:layout_height=""35dp""
            android:layout_margin=""4dp""
            android:background=""@drawable/chip_accent""
            android:foreground=""?attr/selectableItemBackground""
            android:orientation=""vertical""
            android:padding=""8dp""
            android:text=""Order Again""
            android:textAllCaps=""false""
            android:textColor=""@color/colorAccent""
            android:textSize=""15sp""
            app:layout_constraintHorizontal_bias=""0.937""
            app:layout_constraintLeft_toRightOf=""@+id/tvOrderPrice""
            app:layout_constraintRight_toRightOf=""parent""
            app:layout_constraintTop_toBottomOf=""@+id/tvOrderItems""
            tools:layout_editor_absoluteY=""74dp"" /&gt;
    &lt;/android.support.constraint.ConstraintLayout&gt;
&lt;/android.support.v7.widget.CardView&gt;
</code></pre>

<p>The issue is that when I start the <code>Activity</code> showing the <code>Fragment</code>, the <code>RecyclerView</code> doesn't show the Item. It only appears if I scrolled the empty <code>RecyclerView</code> or by leaving the App on the foreground and go back to it again.</p>

<p>At the initialization the data of the <code>Adapter</code> is empty but <code>onResume()</code> I make a request which updates the data at the Presenter, Then I <code>notifyDataChange()</code> on the <code>Adapter</code> but nothing updates.</p>

<p>When I debugged I found that <code>onBindViewHolder()</code> isn't called after <code>notifyDataChange()</code> on the Adapter so i don't know why the <code>notifyDataChange()</code> doesn't notify the <code>Adapter</code> that the data is changed.</p>

<p>Anyone has an idea or any solution that might fix this issue?</p>
",4614550,,5223744,,2017-10-09 12:52:39,2019-01-23 13:34:20,RecyclerView Items doesn't appear until i scroll it,<android><android-recyclerview><kotlin><mvp><android-constraintlayout>,2,2,,,
Android,54448798,1,54448919,1093,1/30/2019 20:20:17,0,,1/30/2019 20:10:28,,1,21,"<p>I imported a project from GitHub of Universal Music Player - Google Sample.
I can't find where the Versions of dependencies are defined in here. </p>

<p><a href=""https://github.com/googlesamples/android-UniversalMusicPlayer"" rel=""nofollow noreferrer"">https://github.com/googlesamples/android-UniversalMusicPlayer</a></p>

<p>This is where I imported the project from</p>

<p>dependencies {
    implementation project(':media')</p>

<pre><code>implementation ""org.jetbrains.kotlin:kotlin-stdlib-jdk8:$kotlin_version""

implementation ""androidx.appcompat:appcompat:$androidx_app_compat_version""
implementation ""androidx.legacy:legacy-support-v4:$androidx_version""
implementation ""androidx.recyclerview:recyclerview:$androidx_version""

implementation ""androidx.constraintlayout:constraintlayout:$constraint_layout_version""
implementation ""androidx.lifecycle:lifecycle-extensions:$arch_lifecycle_version""

// Glide dependencies
implementation ""com.github.bumptech.glide:glide:$glide_version""
kapt ""com.github.bumptech.glide:compiler:$glide_version""
</code></pre>

<p>}</p>

<p>I was expecting def version name, but can't seem to figure out where it is in the Google sample code. </p>
",10966474,,,,,2019-01-30 20:20:17,Where are the dependency Versions defined in build gradle (app) of Android Studio?,<android><android-studio>,1,0,,,
Android,54489418,1,54490336,1094,2/2/2019 5:41:44,0,,2/2/2019 2:21:53,,2,111,"<p>The <a href=""https://github.com/googlesamples/android-sunflower"" rel=""nofollow noreferrer"">sunflower example app by Google</a> uses a private Class with a companion object to implement a Singleton pattern of their repository instead of simply implementing the repository as an (inherently Singleton) Object. </p>

<p>This is the first time I've seen a Singleton implemented this way in Kotlin instead of implementing it as an Object. In what context(s) should this private constructor implementation be used instead of the more common Object implementation?</p>

<pre><code>class GardenPlantingRepository private constructor(
  private val gardenPlantingDao: GardenPlantingDao
) {
  suspend fun createGardenPlanting(plantId: String) {
    withContext(IO) {
      val gardenPlanting = GardenPlanting(plantId)
      gardenPlantingDao.insertGardenPlanting(gardenPlanting)
    }
  }

  suspend fun removeGardenPlanting(gardenPlanting: GardenPlanting) {
    withContext(IO) {
      gardenPlantingDao.deleteGardenPlanting(gardenPlanting)
    }
  }

  fun getGardenPlantingForPlant(plantId: String) =

    gardenPlantingDao.getGardenPlantingForPlant(plantId)

  fun getGardenPlantings() = gardenPlantingDao.getGardenPlantings()

  fun getPlantAndGardenPlantings() = gardenPlantingDao.getPlantAndGardenPlantings()

  companion object {
    // For Singleton instantiation
    @Volatile private var instance: GardenPlantingRepository? = null

    fun getInstance(gardenPlantingDao: GardenPlantingDao) =
      instance ?: synchronized(this) {
        instance ?: GardenPlantingRepository(gardenPlantingDao).also { instance = it }
      }
  }
}
</code></pre>
",490375,,,,,2019-02-02 5:41:44,Kotlin Singletons: Object vs a Class with private constructor,<kotlin><singleton>,1,0,1,,
Android,54508117,1,54508853,822,2/4/2019 0:10:17,1,,2/3/2019 22:13:21,,4,138,"<p>Another ""which is better"" question, I know these are highly subjective.  My definition for better would be:</p>

<ol>
<li>Being used by the best dev teams</li>
<li>Best for unit testing</li>
<li>Most modular / easiest to build out a prod app</li>
<li>What Google recommends (this is where I'm most confused)</li>
</ol>

<p>All of the Android blueprints use package-by-feature:</p>

<p><a href=""https://github.com/googlesamples/android-architecture"" rel=""nofollow noreferrer"">https://github.com/googlesamples/android-architecture</a></p>

<pre><code>/tasks
/addedittask
/taskdetail
</code></pre>

<p>and all of the architecture components samples using package by layer:</p>

<p><a href=""https://github.com/googlesamples/android-architecture-components"" rel=""nofollow noreferrer"">https://github.com/googlesamples/android-architecture-components</a></p>

<pre><code>/db
/model
/ui
/persistence
</code></pre>

<p>I'm confused because at the bottom of the Architecture Components site, it actually has links to the Android MVP and MVVM blueprint samples, which seems to me to be contradictory.  </p>
",914587,,,,,2019-02-05 20:14:00,Which is better for Android MVVM package by feature or package by layer?,<android><mvvm><android-architecture-components>,1,0,,,
Android,54847411,1,54847523,1096,2/24/2019 0:11:30,1,,2/23/2019 23:51:11,,1,55,"<p>I am exploring Google's Sunflower sample <code>Jetpack</code> app (<a href=""https://github.com/googlesamples/android-sunflower"" rel=""nofollow noreferrer"">https://github.com/googlesamples/android-sunflower</a>). The NavGraph is defined in a navigation xml file that has a single <code>Activity</code> and numerous <code>Fragment</code>s.  The main <code>Activity</code> layout has an <code>AppBar</code> which is shared by all the fragments.  I would like to add another <code>Fragment</code> to the NavGraph that displays an image in Fullscreen mode.  The Android documentation shows the following code to enable Fullscreen mode:</p>

<pre><code> private fun hideSystemUI() {
            window.decorView.systemUiVisibility = (View.SYSTEM_UI_FLAG_IMMERSIVE
            or View.SYSTEM_UI_FLAG_LAYOUT_STABLE
            or View.SYSTEM_UI_FLAG_LAYOUT_HIDE_NAVIGATION
            or View.SYSTEM_UI_FLAG_LAYOUT_FULLSCREEN
            or View.SYSTEM_UI_FLAG_HIDE_NAVIGATION
            or View.SYSTEM_UI_FLAG_FULLSCREEN)
}
</code></pre>

<p>I call <code>hideSystemUI</code> in the new <code>Fragment</code>'s <code>onResume()</code>, and it is not working. The <code>Fragment</code> still shows the main <code>AppBar</code> and navigation that were set up in <code>MainActivity</code>. I've tried a variety of other solutions from S.O. threads, but most seem to be based on the standard <code>Activity/Fragment</code> pattern that I've had success with in my pre-Jetpack apps.  The new layout contains a <code>FrameLayout</code> with an <code>ImageView</code>. My new Fragment looks like this:</p>

<pre><code>class FullScreenFragment: Fragment() {
    override fun onCreateView(inflater: LayoutInflater, container: ViewGroup?,
                              savedInstanceState: Bundle?): View? {
        super.onCreateView(inflater, container, savedInstanceState)
        val binding = DataBindingUtil.inflate&lt;FragmentFullscreenBinding&gt;(
                inflater, R.layout.fragment_fullscreen, container, false)
        return binding.root
    }

    override fun onResume() {
        super.onResume()
        hideSystemUI()
    }

    private fun hideSystemUI() {
                    activity!!.window.decorView.systemUiVisibility = (View.SYSTEM_UI_FLAG_IMMERSIVE
                                    or View.SYSTEM_UI_FLAG_LAYOUT_STABLE
                or View.SYSTEM_UI_FLAG_LAYOUT_HIDE_NAVIGATION
                or View.SYSTEM_UI_FLAG_LAYOUT_FULLSCREEN
                                    or View.SYSTEM_UI_FLAG_HIDE_NAVIGATION
                or View.SYSTEM_UI_FLAG_FULLSCREEN)
    }
}
</code></pre>

<p>Is there a way to enable Fullscreen mode for one fragment?  I haven't changed Google's code at all, except to add the new <code>Fragment</code> to the NavGraph, but I can post additional code here if necessary.  I'm thinking that this may have to be managed through <code>MainActivity</code>, but I'm not sure. Thanks in advance!</p>
",5277309,,,,,2019-02-24 0:11:30,Android NavigationUI Fragment in Fullscreen Mode,<android><android-fragments><android-fragmentactivity><android-jetpack>,1,0,,,
Android,54878343,1,54884316,1097,2/26/2019 11:17:41,0,,2/26/2019 4:12:54,,2,246,"<p>I have a use case where I want to create Youtube like animation using MotionLayout. There is a sample for this animation in <a href=""https://github.com/googlesamples/android-ConstraintLayoutExamples/tree/master/motionlayout"" rel=""nofollow noreferrer"">this</a> repo.
But the problem is that in this example they use static height for starting constraint like this which is <code>320dp</code>:</p>

<pre><code>&lt;MotionScene...&gt;

    &lt;Transition..&gt;

        &lt;OnSwipe... /&gt;

        &lt;ConstraintSet android:id=""@id/start""&gt;

            &lt;Constraint
                android:id=""@id/top_image_container""
                android:layout_width=""0dp""
                android:layout_height=""320dp""
                motion:layout_constraintTop_toTopOf=""parent""
                motion:layout_constraintStart_toStartOf=""parent""
                motion:layout_constraintEnd_toEndOf=""parent""  /&gt;

      &lt;/ConstraintSet&gt;
  &lt;/Transition&gt;
&lt;/MotionScene&gt;
</code></pre>

<p>But my requirement to set constraint using aspect ratio. For static aspect ratio, I can set using <code>app:layout_constraintDimensionRatio=""w,16:9""</code> in Constraint like this.</p>

<pre><code>&lt;Constraint
    android:id=""@id/top_image_container""
    android:layout_width=""0dp""
    android:layout_height=""0dp""
    motion:layout_constraintTop_toTopOf=""w,16:9""
    motion:layout_constraintTop_toTopOf=""parent""
    motion:layout_constraintStart_toStartOf=""parent""
    motion:layout_constraintEnd_toEndOf=""parent""  /&gt;
</code></pre>

<p>But every video has a different aspect ratio which I am getting from API.So I want to set different aspect ratio depending upon the video. I am not able to find a way to set this programmatically in the <code>ConstraintSet</code></p>

<p>I tried a workaround to set <code>android:layout_height=""wrap_content""</code> and change the view aspect ratio programmatically. But it did not work and the animation was not working properly.</p>

<p>Any solution or suggestion would be appreciated.</p>
",5301119,,6296561,,2019-02-26 5:48:56,2019-02-26 11:17:41,Programmatically change ConstraintSet attribute in motion scene of MotionLayout,<android><android-layout><android-constraintlayout><android-motionlayout>,1,0,,,
Android,54728368,1,54967397,1098,3/3/2019 9:29:22,15,,2/16/2019 22:38:32,,1,110,"<p><strong>Context:</strong></p>

<p>I have been using Google's <a href=""https://github.com/googlesamples/android-play-location/tree/master/LocationUpdatesForegroundService"" rel=""nofollow noreferrer"">LocationUpdatesForegroundService</a> example project to learn a bit more about services.</p>

<p>I have downloaded the project via Github desktop and ran it on my phone, everything is great and the project does what it's intended to do.</p>

<p><em>My phone is Android 8.0.0, API 26</em></p>

<p><strong>Problem:</strong></p>

<p>The foreground service notification shows up on the status bar once the app is terminated, as soon as that happens I hear a notification sound(default sound).
However, I would like the notification to be silent, like in some location-based apps(eg: <a href=""https://play.google.com/store/apps/details?id=com.life360.android.safetymapd&amp;hl"" rel=""nofollow noreferrer"">Life360</a>)</p>

<p><strong>What I've tried so far:</strong></p>

<ul>
<li>in <a href=""https://github.com/googlesamples/android-play-location/blob/master/LocationUpdatesForegroundService/app/src/main/java/com/google/android/gms/location/sample/locationupdatesforegroundservice/LocationUpdatesService.java"" rel=""nofollow noreferrer"">LocationUpdatesService.java</a> at added<code>159</code> tried <code>mChannel.setSound(null,null);</code></li>
<li>in <a href=""https://github.com/googlesamples/android-play-location/blob/master/LocationUpdatesForegroundService/app/src/main/java/com/google/android/gms/location/sample/locationupdatesforegroundservice/LocationUpdatesService.java"" rel=""nofollow noreferrer"">LocationUpdatesService.java</a> at line <code>296</code> changed <code>.setPriority(Notification.PRIORITY_HIGH)</code> to 
<code>.setPriority(Notification.PRIORITY_LOW)</code></li>
<li>in <a href=""https://github.com/googlesamples/android-play-location/blob/master/LocationUpdatesForegroundService/app/src/main/java/com/google/android/gms/location/sample/locationupdatesforegroundservice/LocationUpdatesService.java"" rel=""nofollow noreferrer"">LocationUpdatesService.java</a> at line <code>158</code>changed <code>NotificationManager.IMPORTANCE_DEFAULT</code> to <code>NotificationManager.IMPORTANCE_LOW)</code></li>
<li>in <a href=""https://github.com/googlesamples/android-play-location/blob/master/LocationUpdatesForegroundService/app/src/main/java/com/google/android/gms/location/sample/locationupdatesforegroundservice/LocationUpdatesService.java"" rel=""nofollow noreferrer"">LocationUpdatesService.java</a> at  line <code>300</code> added <code>setSound(null)</code></li>
</ul>

<p>None of the above have worked for me, I would really appreciate if someone could shed some light on this situation.</p>
",4194655,,6296561,,2019-02-25 7:14:21,2019-03-03 9:29:22,Foreground Service with a Silent Notification,<java><android><notifications><foreground-service>,2,13,1,,
Android,54967251,1,54980053,831,3/4/2019 9:18:20,1,,3/3/2019 9:09:56,,4,246,"<p>What are the steps necessary for me to integrate,</p>

<p><a href=""https://github.com/opencv/opencv"" rel=""nofollow noreferrer"">the latest version of OpenCV</a></p>

<p>into a pure C++(No Java Code) Android NDK project, such as Android NDK Google tutorial:</p>

<p><a href=""https://github.com/googlesamples/android-ndk/tree/master/endless-tunnel"" rel=""nofollow noreferrer"">Endless-Tunnel</a>
?</p>

<p><a href=""https://docs.opencv.org/2.4/doc/tutorials/introduction/android_binary_package/O4A_SDK.html"" rel=""nofollow noreferrer"">official documentation</a> for android integration refers to much older version :OpenCV-2.4 and folder structures are no longer the same. </p>

<p>I am using Android Studio on Linux. </p>

<p>All help is highly Appreciated.</p>
",10591628,,10591628,,2019-03-03 9:15:41,2019-03-10 16:24:21,How can I integrate OpenCV 4.0 into a pure C++ Android NDK project?,<android><c++><opencv><android-ndk>,1,0,1,,
Android,54529117,1,55016471,1100,3/6/2019 5:55:31,29,,2/5/2019 6:55:06,,1,44,"<p><a href=""https://i.stack.imgur.com/YOXFF.png"" rel=""nofollow noreferrer"">ref: log</a>  </p>

<p>We use the <a href=""https://github.com/googlesamples/android-SimpleMediaPlayer"" rel=""nofollow noreferrer"">Google sample project</a> with the following changes. Same things we use in our project, we got an error (-38,0) on media player error listener in Samsung flagship devices and Google devices. (tested in note 8-8.1 and pixel 2xl-9.0)</p>

<p>Here, <code>onError</code> listener calls first then <code>onPrepared</code> listener.</p>

<p>Expected solution: Play audio without any error.</p>

<pre><code>package com.example.android.mediaplayersample;

import android.content.Context;
import android.content.res.AssetFileDescriptor;
import android.media.AudioManager;
import android.media.MediaPlayer;

import java.util.concurrent.Executors;
import java.util.concurrent.ScheduledExecutorService;
import java.util.concurrent.TimeUnit;

/**
 * Exposes the functionality of the {@link MediaPlayer} and implements the {@link PlayerAdapter}
 * so that {@link MainActivity} can control music playback.
 */
public final class MediaPlayerHolder implements PlayerAdapter {

    public static final int PLAYBACK_POSITION_REFRESH_INTERVAL_MS = 1000;

    private final Context mContext;
    private MediaPlayer mMediaPlayer;
    private int mResourceId;
    private PlaybackInfoListener mPlaybackInfoListener;
    private ScheduledExecutorService mExecutor;
    private Runnable mSeekbarPositionUpdateTask;

    public MediaPlayerHolder(Context context) {
        mContext = context.getApplicationContext();
    }

    /**
     * Once the {@link MediaPlayer} is released, it can't be used again, and another one has to be
     * created. In the onStop() method of the {@link MainActivity} the {@link MediaPlayer} is
     * released. Then in the onStart() of the {@link MainActivity} a new {@link MediaPlayer}
     * object has to be created. That's why this method is private, and called by load(int) and
     * not the constructor.
     */
    private void initializeMediaPlayer() {
        if (mMediaPlayer != null) {

            mMediaPlayer.setOnPreparedListener(new MediaPlayer.OnPreparedListener() {
                @Override
                public void onPrepared(MediaPlayer mediaPlayer) {
                    logToUI(""OnPrepared()"");
                    mediaPlayer.start();
                }
            });
            mMediaPlayer.setOnCompletionListener(new MediaPlayer.OnCompletionListener() {
                @Override
                public void onCompletion(MediaPlayer mediaPlayer) {
                    stopUpdatingCallbackWithPosition(true);
                    logToUI(""MediaPlayer playback completed"");
                    if (mPlaybackInfoListener != null) {
                        mPlaybackInfoListener.onStateChanged(PlaybackInfoListener.State.COMPLETED);
                        mPlaybackInfoListener.onPlaybackCompleted();
                    }
                }
            });
            mMediaPlayer.setOnErrorListener(new MediaPlayer.OnErrorListener() {
                @Override
                public boolean onError(MediaPlayer mediaPlayer, int i, int i1) {
                    logToUI(""OnError()"" + i + "" "" + i1);
                    return true;
                }
            });
            logToUI(""mMediaPlayer = new MediaPlayer()"");
        }
    }

    public void setPlaybackInfoListener(PlaybackInfoListener listener) {
        mPlaybackInfoListener = listener;
    }

    // Implements PlaybackControl.
    @Override
    public void loadMedia(int resourceId) {
        mResourceId = resourceId;
        mMediaPlayer = new MediaPlayer();

        try {
            logToUI(""load() {1. setDataSource}"");
            mMediaPlayer.setAudioStreamType(AudioManager.STREAM_MUSIC);
            mMediaPlayer.setDataSource(""http://radio-electron.ru:8000/96"");
        } catch (Exception e) {
            logToUI(e.toString());
        }

        initializeMediaPlayer();


        try {
            logToUI(""load() {2. prepare}"");
            mMediaPlayer.prepareAsync();
        } catch (Exception e) {
            logToUI(e.toString());
        }

        initializeProgressCallback();
        logToUI(""initializeProgressCallback()"");
    }

    @Override
    public void release() {
        if (mMediaPlayer != null) {
            logToUI(""release() and mMediaPlayer = null"");
            mMediaPlayer.release();
            mMediaPlayer = null;
        }
    }

    @Override
    public boolean isPlaying() {
        if (mMediaPlayer != null) {
            return mMediaPlayer.isPlaying();
        }
        return false;
    }

    @Override
    public void play() {
        if (mMediaPlayer != null &amp;&amp; !mMediaPlayer.isPlaying()) {
            logToUI(String.format(""playbackStart() %s"",
                    mContext.getResources().getResourceEntryName(mResourceId)));
            mMediaPlayer.start();
            if (mPlaybackInfoListener != null) {
                mPlaybackInfoListener.onStateChanged(PlaybackInfoListener.State.PLAYING);
            }
            startUpdatingCallbackWithPosition();
        }
    }

    @Override
    public void reset() {
        if (mMediaPlayer != null) {
            logToUI(""playbackReset()"");
            mMediaPlayer.reset();
            loadMedia(mResourceId);
            if (mPlaybackInfoListener != null) {
                mPlaybackInfoListener.onStateChanged(PlaybackInfoListener.State.RESET);
            }
            stopUpdatingCallbackWithPosition(true);
        }
    }

    @Override
    public void pause() {
        if (mMediaPlayer != null &amp;&amp; mMediaPlayer.isPlaying()) {
            mMediaPlayer.pause();
            if (mPlaybackInfoListener != null) {
                mPlaybackInfoListener.onStateChanged(PlaybackInfoListener.State.PAUSED);
            }
            logToUI(""playbackPause()"");
        }
    }

    @Override
    public void seekTo(int position) {
        if (mMediaPlayer != null) {
            logToUI(String.format(""seekTo() %d ms"", position));
            mMediaPlayer.seekTo(position);
        }
    }

    /**
     * Syncs the mMediaPlayer position with mPlaybackProgressCallback via recurring task.
     */
    private void startUpdatingCallbackWithPosition() {
        if (mExecutor == null) {
            mExecutor = Executors.newSingleThreadScheduledExecutor();
        }
        if (mSeekbarPositionUpdateTask == null) {
            mSeekbarPositionUpdateTask = new Runnable() {
                @Override
                public void run() {
                    updateProgressCallbackTask();
                }
            };
        }
        mExecutor.scheduleAtFixedRate(
                mSeekbarPositionUpdateTask,
                0,
                PLAYBACK_POSITION_REFRESH_INTERVAL_MS,
                TimeUnit.MILLISECONDS
        );
    }

    // Reports media playback position to mPlaybackProgressCallback.
    private void stopUpdatingCallbackWithPosition(boolean resetUIPlaybackPosition) {
        if (mExecutor != null) {
            mExecutor.shutdownNow();
            mExecutor = null;
            mSeekbarPositionUpdateTask = null;
            if (resetUIPlaybackPosition &amp;&amp; mPlaybackInfoListener != null) {
                mPlaybackInfoListener.onPositionChanged(0);
            }
        }
    }

    private void updateProgressCallbackTask() {
        if (mMediaPlayer != null &amp;&amp; mMediaPlayer.isPlaying()) {
            int currentPosition = mMediaPlayer.getCurrentPosition();
            if (mPlaybackInfoListener != null) {
                mPlaybackInfoListener.onPositionChanged(currentPosition);
            }
        }
    }

    @Override
    public void initializeProgressCallback() {
        final int duration = mMediaPlayer.getDuration();
        if (mPlaybackInfoListener != null) {
            mPlaybackInfoListener.onDurationChanged(duration);
            mPlaybackInfoListener.onPositionChanged(0);
            logToUI(String.format(""firing setPlaybackDuration(%d sec)"",
                    TimeUnit.MILLISECONDS.toSeconds(duration)));
            logToUI(""firing setPlaybackPosition(0)"");
        }
    }

    private void logToUI(String message) {
        if (mPlaybackInfoListener != null) {
            mPlaybackInfoListener.onLogUpdated(message);
        }
    }

}
</code></pre>
",9222720,,,,,2019-03-06 5:55:31,"I face android media player error (-38, 0) in Samsung and Google latest version mobile",<android><android-mediaplayer><samsung-mobile>,1,0,2,,
Android,55038077,1,55121125,1101,3/12/2019 12:08:24,5,,3/7/2019 7:19:16,,1,141,"<p><a href=""https://i.stack.imgur.com/0JXoJ.png"" rel=""nofollow noreferrer""><img src=""https://i.stack.imgur.com/0JXoJ.png"" alt=""Image inside overlay""></a></p>

<p>I need to capture only the image which is inside the overlay box as shown. I don't need the entire image in the TextureView. I'm new to Android and I couldn't figure out a few solutions that were mentioned to capture just the image inside the rectangular region.
The overlay must be at the center. I tried, but I couldn't achieve it. </p>

<p>I followed this code - <a href=""https://github.com/googlesamples/android-Camera2Basic"" rel=""nofollow noreferrer"">Google Sample-Camera2Basic</a></p>

<hr>

<p>To add overlay, I used the following code:</p>

<p><code>activity_camera2_basic_fragment.xml</code></p>

<pre><code>&lt;?xml version=""1.0"" encoding=""utf-8""?&gt;
&lt;RelativeLayout xmlns:android=""http://schemas.android.com/apk/res/android""
    android:layout_width=""match_parent""
    android:layout_height=""match_parent""&gt;

    &lt;com.example.googlecamera2.AutoFitTextureView
        android:id=""@+id/texture""
        android:layout_width=""wrap_content""
        android:layout_height=""wrap_content""
        android:layout_alignParentStart=""true""
        android:layout_alignParentTop=""true"" /&gt;

    &lt;LinearLayout
        android:id=""@+id/surface""
        android:layout_width=""match_parent""
        android:layout_height=""match_parent""
        android:orientation=""vertical""
        android:layout_centerInParent=""true""/&gt;

    &lt;FrameLayout
        android:id=""@+id/control""
        android:layout_width=""match_parent""
        android:layout_height=""112dp""
        android:layout_alignParentBottom=""true""
        android:layout_alignParentStart=""true""
        android:background=""@color/control_background""&gt;

        &lt;Button
            android:id=""@+id/picture""
            android:layout_width=""wrap_content""
            android:layout_height=""wrap_content""
            android:layout_gravity=""center""
            android:text=""@string/picture"" /&gt;

        &lt;ImageButton
            android:id=""@+id/info""
            android:contentDescription=""@string/description_info""
            style=""@android:style/Widget.Material.Light.Button.Borderless""
            android:layout_width=""wrap_content""
            android:layout_height=""wrap_content""
            android:layout_gravity=""center_vertical|right""
            android:padding=""20dp""
            android:src=""@drawable/ic_action_info"" /&gt;

    &lt;/FrameLayout&gt;

&lt;/RelativeLayout&gt;
</code></pre>

<hr>

<p>I implemented the <code>onCreateView</code> like this:</p>

<pre><code>@Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {
        View view = inflater.inflate(R.layout.fragment_camera2_basic, container, false);

        linearLayout = view.findViewById(R.id.surface);
        linearLayout.addView(new Rectangle(getActivity()));
        return view;
    }

</code></pre>

<h2>EDIT</h2>

<p>Rectangle.java</p>

<pre><code>package com.example.googlecamera2;

import android.content.Context;
import android.graphics.Canvas;
import android.graphics.Color;
import android.graphics.Paint;
import android.graphics.Rect;
import android.view.View;

public class Rectangle extends View {
    Paint paint = new Paint();

    public Rectangle(Context context) {
        super(context);
    }


    @Override
    public void onDraw(Canvas canvas) {
        paint.setColor(Color.GREEN);
        paint.setStyle(Paint.Style.STROKE);
        paint.setStrokeWidth(6);
        Rect rect = new Rect(120, 100, 620, 900);
        canvas.drawRect(rect, paint );
    }
}
</code></pre>

<p>Please suggest how I can get just the cropped image from the overlay region and center the overlay in the preview.</p>
",10391394,,10391394,,2019-03-07 9:40:50,2019-03-12 12:08:24,How to capture image inside the overlay in Camera2 API Android?,<android><overlay><crop><android-camera2>,2,7,,,
Android,55237055,1,55246405,1102,3/19/2019 17:02:32,0,,3/19/2019 9:02:36,,2,65,"<p>I am following <a href=""https://github.com/googlesamples/android-architecture-components/tree/master/GithubBrowserSample"" rel=""nofollow noreferrer"">GithubBrowserSample</a>. The only change I have made is not to use <code>NavHostFragment</code>. I am adding fragment at runtime but the code is not compiling and there is no such helpful error log</p>

<p><strong>Application</strong></p>

<pre><code>open class SCApp : Application(), HasActivityInjector, HasServiceInjector {

    @Inject
    protected lateinit var dispatchingAndroidInjector: DispatchingAndroidInjector&lt;Activity&gt;

    @Inject
    protected lateinit var dispatchingServiceInjector: DispatchingAndroidInjector&lt;Service&gt;

    override fun onCreate() {
        super.onCreate()

        AppInjector.init(this)
    }

    override fun activityInjector() = dispatchingAndroidInjector

    override fun serviceInjector() = dispatchingServiceInjector
}
</code></pre>

<p><strong>Activity</strong></p>

<pre><code>class IncomingLeadActivity : AppCompatActivity(), HasSupportFragmentInjector {

    lateinit var binding: ActivityIncomingLeadBinding

    private lateinit var incomingLeadViewModel: IncomingLeadViewModel

    @Inject
    lateinit var viewModelFactory: ViewModelProvider.Factory

    @Inject
    lateinit var dispatchingAndroidInjector: DispatchingAndroidInjector&lt;Fragment&gt;

    override fun onCreate(savedInstanceState: Bundle?) {
        super.onCreate(savedInstanceState)

        binding = DataBindingUtil.setContentView(this, R.layout.activity_incoming_lead)
        incomingLeadViewModel = ViewModelProviders.of(this, viewModelFactory).get(IncomingLeadViewModel::class.java)

        binding.viewModel = incomingLeadViewModel
        binding.setLifecycleOwner(this)

        supportFragmentManager
            .beginTransaction()
            .replace(android.R.id.content, LeadReceiverFragment.newInstance(), """")
            .commit()
    }

    override fun supportFragmentInjector() = dispatchingAndroidInjector
}
</code></pre>

<p><strong>Fragment</strong></p>

<pre><code>class LeadReceiverFragment : Fragment(), Injectable {

    lateinit var binding: LeadReceiverFragmentBinding

    @Inject
    lateinit var viewModelFactory: ViewModelProvider.Factory

    private lateinit var leadReceiverViewModel: LeadReceiverViewModel

    companion object {
        fun newInstance() = LeadReceiverFragment()
    }

    override fun onCreateView(inflater: LayoutInflater, container: ViewGroup?, savedInstanceState: Bundle?): View? {
        binding = DataBindingUtil.inflate(
            inflater,
            R.layout.lead_receiver_fragment,
            container,
            false
        )
        return binding.root
    }

    override fun onViewCreated(view: View, savedInstanceState: Bundle?) {
        leadReceiverViewModel = ViewModelProviders.of(this, viewModelFactory).get(LeadReceiverViewModel::class.java)
        binding.setLifecycleOwner(viewLifecycleOwner)

        binding.viewModel = leadReceiverViewModel
    }
}
</code></pre>

<p><strong>Error</strong></p>

<pre><code>* Exception is:
org.gradle.api.tasks.TaskExecutionException: Execution failed for task ':app:kaptDebugKotlin'.
        at org.gradle.api.internal.tasks.execution.ExecuteActionsTaskExecuter.executeActions(ExecuteActionsTaskExecuter.java:110)
        at org.gradle.api.internal.tasks.execution.ExecuteActionsTaskExecuter.execute(ExecuteActionsTaskExecuter.java:77)
        at org.gradle.api.internal.tasks.execution.OutputDirectoryCreatingTaskExecuter.execute(OutputDirectoryCreatingTaskExecuter.java:51)
        at org.gradle.api.internal.tasks.execution.SkipUpToDateTaskExecuter.execute(SkipUpToDateTaskExecuter.java:59)
        at org.gradle.api.internal.tasks.execution.ResolveTaskOutputCachingStateExecuter.execute(ResolveTaskOutputCachingStateExecuter.java:54)
        at org.gradle.api.internal.tasks.execution.ValidatingTaskExecuter.execute(ValidatingTaskExecuter.java:59)
        at org.gradle.api.internal.tasks.execution.SkipEmptySourceFilesTaskExecuter.execute(SkipEmptySourceFilesTaskExecuter.java:101)
        at org.gradle.api.internal.tasks.execution.FinalizeInputFilePropertiesTaskExecuter.execute(FinalizeInputFilePropertiesTaskExecuter.java:44)
        at org.gradle.api.internal.tasks.execution.CleanupStaleOutputsExecuter.execute(CleanupStaleOutputsExecuter.java:91)
        at org.gradle.api.internal.tasks.execution.ResolveTaskArtifactStateTaskExecuter.execute(ResolveTaskArtifactStateTaskExecuter.java:62)
        at org.gradle.api.internal.tasks.execution.SkipTaskWithNoActionsExecuter.execute(SkipTaskWithNoActionsExecuter.java:59)
        at org.gradle.api.internal.tasks.execution.SkipOnlyIfTaskExecuter.execute(SkipOnlyIfTaskExecuter.java:54)
        at org.gradle.api.internal.tasks.execution.ExecuteAtMostOnceTaskExecuter.execute(ExecuteAtMostOnceTaskExecuter.java:43)
        at org.gradle.api.internal.tasks.execution.CatchExceptionTaskExecuter.execute(CatchExceptionTaskExecuter.java:34)
        at org.gradle.api.internal.tasks.execution.EventFiringTaskExecuter$1.run(EventFiringTaskExecuter.java:51)
        at org.gradle.internal.operations.DefaultBuildOperationExecutor$RunnableBuildOperationWorker.execute(DefaultBuildOperationExecutor.java:300)
        at org.gradle.internal.operations.DefaultBuildOperationExecutor$RunnableBuildOperationWorker.execute(DefaultBuildOperationExecutor.java:292)
        at org.gradle.internal.operations.DefaultBuildOperationExecutor.execute(DefaultBuildOperationExecutor.java:174)
        at org.gradle.internal.operations.DefaultBuildOperationExecutor.run(DefaultBuildOperationExecutor.java:90)
        at org.gradle.internal.operations.DelegatingBuildOperationExecutor.run(DelegatingBuildOperationExecutor.java:31)
        at org.gradle.api.internal.tasks.execution.EventFiringTaskExecuter.execute(EventFiringTaskExecuter.java:46)
        at org.gradle.execution.taskgraph.LocalTaskInfoExecutor.execute(LocalTaskInfoExecutor.java:42)
        at org.gradle.execution.taskgraph.DefaultTaskExecutionGraph$BuildOperationAwareWorkItemExecutor.execute(DefaultTaskExecutionGraph.java:277)
        at org.gradle.execution.taskgraph.DefaultTaskExecutionGraph$BuildOperationAwareWorkItemExecutor.execute(DefaultTaskExecutionGraph.java:262)
        at org.gradle.execution.taskgraph.DefaultTaskPlanExecutor$ExecutorWorker$1.execute(DefaultTaskPlanExecutor.java:135)
        at org.gradle.execution.taskgraph.DefaultTaskPlanExecutor$ExecutorWorker$1.execute(DefaultTaskPlanExecutor.java:130)
        at org.gradle.execution.taskgraph.DefaultTaskPlanExecutor$ExecutorWorker.execute(DefaultTaskPlanExecutor.java:200)
        at org.gradle.execution.taskgraph.DefaultTaskPlanExecutor$ExecutorWorker.executeWithWork(DefaultTaskPlanExecutor.java:191)
        at org.gradle.execution.taskgraph.DefaultTaskPlanExecutor$ExecutorWorker.run(DefaultTaskPlanExecutor.java:130)
        at org.gradle.internal.concurrent.ExecutorPolicy$CatchAndRecordFailures.onExecute(ExecutorPolicy.java:63)
        at org.gradle.internal.concurrent.ManagedExecutorImpl$1.run(ManagedExecutorImpl.java:46)
        at org.gradle.internal.concurrent.ThreadFactoryImpl$ManagedThreadRunnable.run(ThreadFactoryImpl.java:55)
Caused by: org.gradle.api.GradleException: Internal compiler error. See log for more details
        at org.jetbrains.kotlin.gradle.tasks.TasksUtilsKt.throwGradleExceptionIfError(tasksUtils.kt:15)
        at org.jetbrains.kotlin.compilerRunner.GradleKotlinCompilerWork.run(GradleKotlinCompilerWork.kt:135)
        at org.jetbrains.kotlin.compilerRunner.GradleCompilerRunner.runCompilerAsync(GradleKotlinCompilerRunner.kt:152)
        at org.jetbrains.kotlin.compilerRunner.GradleCompilerRunner.runCompilerAsync(GradleKotlinCompilerRunner.kt:147)
        at org.jetbrains.kotlin.compilerRunner.GradleCompilerRunner.runJvmCompilerAsync(GradleKotlinCompilerRunner.kt:87)
        at org.jetbrains.kotlin.gradle.internal.KaptWithKotlincTask.compile(KaptWithKotlincTask.kt:72)
        at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
        at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
        at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
        at org.gradle.internal.reflect.JavaMethod.invoke(JavaMethod.java:73)
        at org.gradle.api.internal.project.taskfactory.StandardTaskAction.doExecute(StandardTaskAction.java:46)
        at org.gradle.api.internal.project.taskfactory.StandardTaskAction.execute(StandardTaskAction.java:39)
        at org.gradle.api.internal.project.taskfactory.StandardTaskAction.execute(StandardTaskAction.java:26)
        at org.gradle.api.internal.AbstractTask$TaskActionWrapper.execute(AbstractTask.java:801)
        at org.gradle.api.internal.AbstractTask$TaskActionWrapper.execute(AbstractTask.java:768)
        at org.gradle.api.internal.tasks.execution.ExecuteActionsTaskExecuter$1.run(ExecuteActionsTaskExecuter.java:131)
        at org.gradle.internal.operations.DefaultBuildOperationExecutor$RunnableBuildOperationWorker.execute(DefaultBuildOperationExecutor.java:300)
        at org.gradle.internal.operations.DefaultBuildOperationExecutor$RunnableBuildOperationWorker.execute(DefaultBuildOperationExecutor.java:292)
        at org.gradle.internal.operations.DefaultBuildOperationExecutor.execute(DefaultBuildOperationExecutor.java:174)
        at org.gradle.internal.operations.DefaultBuildOperationExecutor.run(DefaultBuildOperationExecutor.java:90)
        at org.gradle.internal.operations.DelegatingBuildOperationExecutor.run(DelegatingBuildOperationExecutor.java:31)
        at org.gradle.api.internal.tasks.execution.ExecuteActionsTaskExecuter.executeAction(ExecuteActionsTaskExecuter.java:120)
        at org.gradle.api.internal.tasks.execution.ExecuteActionsTaskExecuter.executeActions(ExecuteActionsTaskExecuter.java:99)
        ... 31 more
</code></pre>

<p><strong>Detailed Log</strong></p>

<pre><code>            ^
e: java.lang.IllegalStateException: failed to analyze: java.lang.reflect.InvocationTargetException
        at org.jetbrains.kotlin.analyzer.AnalysisResult.throwIfError(AnalysisResult.kt:56)
        at org.jetbrains.kotlin.cli.jvm.compiler.KotlinToJVMBytecodeCompiler.compileModules$cli(KotlinToJVMBytecodeCompiler.kt:128)
        at org.jetbrains.kotlin.cli.jvm.K2JVMCompiler.doExecute(K2JVMCompiler.kt:159)
        at org.jetbrains.kotlin.cli.jvm.K2JVMCompiler.doExecute(K2JVMCompiler.kt:57)
        at org.jetbrains.kotlin.cli.common.CLICompiler.execImpl(CLICompiler.java:96)
        at org.jetbrains.kotlin.cli.common.CLICompiler.execImpl(CLICompiler.java:52)
        at org.jetbrains.kotlin.cli.common.CLITool.exec(CLITool.kt:93)
        at org.jetbrains.kotlin.daemon.CompileServiceImpl$compile$1$1$2.invoke(CompileServiceImpl.kt:442)
        at org.jetbrains.kotlin.daemon.CompileServiceImpl$compile$1$1$2.invoke(CompileServiceImpl.kt:102)
        at org.jetbrains.kotlin.daemon.CompileServiceImpl$doCompile$$inlined$ifAlive$lambda$2.invoke(CompileServiceImpl.kt:1013)
        at org.jetbrains.kotlin.daemon.CompileServiceImpl$doCompile$$inlined$ifAlive$lambda$2.invoke(CompileServiceImpl.kt:102)
        at org.jetbrains.kotlin.daemon.common.DummyProfiler.withMeasure(PerfUtils.kt:137)
        at org.jetbrains.kotlin.daemon.CompileServiceImpl.checkedCompile(CompileServiceImpl.kt:1055)
        at org.jetbrains.kotlin.daemon.CompileServiceImpl.doCompile(CompileServiceImpl.kt:1012)
        at org.jetbrains.kotlin.daemon.CompileServiceImpl.compile(CompileServiceImpl.kt:441)
        at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
        at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
        at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
        at java.base/java.lang.reflect.Method.invoke(Method.java:564)
        at java.rmi/sun.rmi.server.UnicastServerRef.dispatch(UnicastServerRef.java:359)
        at java.rmi/sun.rmi.transport.Transport$1.run(Transport.java:200)
        at java.rmi/sun.rmi.transport.Transport$1.run(Transport.java:197)
        at java.base/java.security.AccessController.doPrivileged(Native Method)
        at java.rmi/sun.rmi.transport.Transport.serviceCall(Transport.java:196)
        at java.rmi/sun.rmi.transport.tcp.TCPTransport.handleMessages(TCPTransport.java:562)
        at java.rmi/sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.run0(TCPTransport.java:796)
        at java.rmi/sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.lambda$run$0(TCPTransport.java:677)
        at java.base/java.security.AccessController.doPrivileged(Native Method)
        at java.rmi/sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.run(TCPTransport.java:676)
        at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1135)
        at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:635)
        at java.base/java.lang.Thread.run(Thread.java:844)
Caused by: java.lang.reflect.InvocationTargetException
        at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
        at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
        at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
        at java.base/java.lang.reflect.Method.invoke(Method.java:564)
        at org.jetbrains.kotlin.kapt3.base.AnnotationProcessingKt.doAnnotationProcessing(annotationProcessing.kt:55)
        at org.jetbrains.kotlin.kapt3.base.AnnotationProcessingKt.doAnnotationProcessing$default(annotationProcessing.kt:31)
        at org.jetbrains.kotlin.kapt3.AbstractKapt3Extension.runAnnotationProcessing(Kapt3Extension.kt:223)
        at org.jetbrains.kotlin.kapt3.AbstractKapt3Extension.analysisCompleted(Kapt3Extension.kt:187)
        at org.jetbrains.kotlin.kapt3.ClasspathBasedKapt3Extension.analysisCompleted(Kapt3Extension.kt:98)
        at org.jetbrains.kotlin.cli.jvm.compiler.TopDownAnalyzerFacadeForJVM$analyzeFilesWithJavaIntegration$2.invoke(TopDownAnalyzerFacadeForJVM.kt:96)
        at org.jetbrains.kotlin.cli.jvm.compiler.TopDownAnalyzerFacadeForJVM.analyzeFilesWithJavaIntegration(TopDownAnalyzerFacadeForJVM.kt:106)
        at org.jetbrains.kotlin.cli.jvm.compiler.TopDownAnalyzerFacadeForJVM.analyzeFilesWithJavaIntegration$default(TopDownAnalyzerFacadeForJVM.kt:82)
        at org.jetbrains.kotlin.cli.jvm.compiler.KotlinToJVMBytecodeCompiler$analyze$1.invoke(KotlinToJVMBytecodeCompiler.kt:384)
        at org.jetbrains.kotlin.cli.jvm.compiler.KotlinToJVMBytecodeCompiler$analyze$1.invoke(KotlinToJVMBytecodeCompiler.kt:70)
        at org.jetbrains.kotlin.cli.common.messages.AnalyzerWithCompilerReport.analyzeAndReport(AnalyzerWithCompilerReport.kt:107)
        at org.jetbrains.kotlin.cli.jvm.compiler.KotlinToJVMBytecodeCompiler.analyze(KotlinToJVMBytecodeCompiler.kt:375)
        at org.jetbrains.kotlin.cli.jvm.compiler.KotlinToJVMBytecodeCompiler.compileModules$cli(KotlinToJVMBytecodeCompiler.kt:123)
        ... 30 more
Caused by: com.sun.tools.javac.processing.AnnotationProcessingError: java.lang.ExceptionInInitializerError
        at jdk.compiler/com.sun.tools.javac.processing.JavacProcessingEnvironment.callProcessor(JavacProcessingEnvironment.java:976)
        at jdk.compiler/com.sun.tools.javac.processing.JavacProcessingEnvironment.discoverAndRunProcs(JavacProcessingEnvironment.java:881)
        at jdk.compiler/com.sun.tools.javac.processing.JavacProcessingEnvironment.access$2100(JavacProcessingEnvironment.java:110)
        at jdk.compiler/com.sun.tools.javac.processing.JavacProcessingEnvironment$Round.run(JavacProcessingEnvironment.java:1202)
        at jdk.compiler/com.sun.tools.javac.processing.JavacProcessingEnvironment.doProcessing(JavacProcessingEnvironment.java:1311)
        at jdk.compiler/com.sun.tools.javac.main.JavaCompiler.processAnnotations(JavaCompiler.java:1250)
        at jdk.compiler/com.sun.tools.javac.main.JavaCompiler.processAnnotations(JavaCompiler.java:1149)
        ... 47 more
Caused by: java.lang.ExceptionInInitializerError
        at android.databinding.annotationprocessor.ProcessExpressions$IntermediateV2.appendTo(ProcessExpressions.java:326)
        at android.databinding.annotationprocessor.ProcessExpressions.onHandleStep(ProcessExpressions.java:117)
        at android.databinding.annotationprocessor.ProcessDataBinding$ProcessingStep.runStep(ProcessDataBinding.java:212)
        at android.databinding.annotationprocessor.ProcessDataBinding$ProcessingStep.access$000(ProcessDataBinding.java:197)
        at android.databinding.annotationprocessor.ProcessDataBinding.doProcess(ProcessDataBinding.java:98)
        at android.databinding.annotationprocessor.ProcessDataBinding.process(ProcessDataBinding.java:73)
        at org.jetbrains.kotlin.kapt3.base.ProcessorWrapper.process(annotationProcessing.kt:106)
        at jdk.compiler/com.sun.tools.javac.processing.JavacProcessingEnvironment.callProcessor(JavacProcessingEnvironment.java:964)
        ... 53 more
Caused by: java.lang.RuntimeException: Cannot create the xml marshaller
        at android.databinding.tool.store.ResourceBundle$LayoutFileBundle.&lt;clinit&gt;(ResourceBundle.java:730)
        ... 61 more
Caused by: javax.xml.bind.JAXBException: Implementation of JAXB-API has not been found on module path or classpath.
 - with linked exception:
[java.lang.ClassNotFoundException: com.sun.xml.internal.bind.v2.ContextFactory]
        at javax.xml.bind.ContextFinder.newInstance(ContextFinder.java:278)
        at javax.xml.bind.ContextFinder.find(ContextFinder.java:421)
        at javax.xml.bind.JAXBContext.newInstance(JAXBContext.java:721)
        at javax.xml.bind.JAXBContext.newInstance(JAXBContext.java:662)
        at android.databinding.tool.store.ResourceBundle$LayoutFileBundle.&lt;clinit&gt;(ResourceBundle.java:725)
        ... 61 more
Caused by: java.lang.ClassNotFoundException: com.sun.xml.internal.bind.v2.ContextFactory
        at java.base/jdk.internal.loader.BuiltinClassLoader.loadClass(BuiltinClassLoader.java:582)
        at java.base/jdk.internal.loader.ClassLoaders$AppClassLoader.loadClass(ClassLoaders.java:190)
        at java.base/java.lang.ClassLoader.loadClass(ClassLoader.java:499)
        at javax.xml.bind.ServiceLoaderUtil.nullSafeLoadClass(ServiceLoaderUtil.java:122)
        at javax.xml.bind.ServiceLoaderUtil.safeLoadClass(ServiceLoaderUtil.java:155)
        at javax.xml.bind.ContextFinder.newInstance(ContextFinder.java:276)
        ... 65 more


FAILURE: Build failed with an exception.

* What went wrong:
Execution failed for task ':app:kaptDebugKotlin'.
</code></pre>
",3134462,,2413303,,2019-03-19 9:28:13,2019-03-19 17:02:32,Databinding fails with JAXB class not found exception during compilation (using kapt),<kotlin><dagger-2><android-databinding><androidx><kapt>,1,4,,,
Android,26241916,1,,,,,,10/7/2014 17:39:34,,3,484,"<p>I started by looking into a couple of Gists I found on Github: <a href=""https://gist.github.com/lpetre/87a5196d14cf4484f1f2"" rel=""nofollow"">https://gist.github.com/lpetre/87a5196d14cf4484f1f2</a></p>

<p>And this works great on my laptop, however I'm trying to set up Travis-CI to automatically build the release APK and submit it to the Play Store.  The issue that I'm encountering now is on the Travis side, in that I cannot use pip to install the google_api_python_client.</p>

<p>upon that call, I get the following:</p>

<pre><code> Installing collected packages: google-api-python-client, httplib2
  Running setup.py install for google-api-python-client
    error: could not create '/usr/local/lib/python2.7/dist-packages/apiclient': Permission denied
    Complete output from command /usr/bin/python -c ""import setuptools, tokenize;__file__='/tmp/pip_build_travis/google-api-python-client/setup.py';exec(compile(getattr(tokenize, 'open', open)(__file__).read().replace('\r\n', '\n'), __file__, 'exec'))"" install --record /tmp/pip-ctZKCR-record/install-record.txt --single-version-externally-managed --compile:
</code></pre>

<p>So I strayed away from using pip, downloaded the python client libraries on their own, and am now including them in my git repo (under /google_api_upload).</p>

<p>A part of Google's API Upload client library instructions (<a href=""https://github.com/googlesamples/android-play-publisher-api/blob/master/v2/python/README.md"" rel=""nofollow"">https://github.com/googlesamples/android-play-publisher-api/blob/master/v2/python/README.md</a>) say to run ""import apiclient"" in a python console (again, works fine on my laptop, but not travis because I can't start a python session and enter in ""import apiclient"" so far as I've found; it just hangs on the python session).</p>

<p>So then I figured it'd be awesome to just have a Gradle function in my gradle files which calls the API functions, and is called from the travis.yml file; but I don't even know if that's possible.</p>

<p>So any input would help, notably:</p>

<ul>
<li>Did I mess up in my attempt at running pip on travis? Can I sudo to elevate permissions for this (I imagine I can't)</li>
<li>Is there a way to call ""import apiclient"" for python within a single line in the travis.yml file?</li>
<li>Is it possible to have travis call a gradle function which refers to client libraries included in my build?</li>
<li>I've tried to find examples of this end-to-end process, but haven't found any that fit this exact case, do you know of any?</li>
</ul>

<p>Thanks!</p>
",231768,,,,,2014-11-23 12:39:45,Error in Travis trying to submit app to Google's Play Store,<google-api><android-gradle><google-api-java-client><travis-ci><google-play>,2,2,1,,
Android,26689630,1,,,,,,11/1/2014 13:09:29,,8,2392,"<p>The new Android Lollipop API provides a new pair of methods for getting and setting restrictions on other apps: <a href=""https://developer.android.com/reference/android/app/admin/DevicePolicyManager.html#getApplicationRestrictions(android.content.ComponentName,%20java.lang.String)"">DevicePolicyManager.getApplicationRestrictions</a> and <a href=""https://developer.android.com/reference/android/app/admin/DevicePolicyManager.html#setApplicationRestrictions(android.content.ComponentName,%20java.lang.String,%20android.os.Bundle)"">DevicePolicyManager.setApplicationRestrictions</a></p>

<p>There's an example of them being used in the <a href=""https://github.com/googlesamples/android-BasicManagedProfile"">BasicManagedProfile sample app</a> to set restrictions on the Chrome app by passing a set of key/value pairs that seem to correlate to the <a href=""http://www.chromium.org/administrators/policy-list-3"">Chrome's published policy list</a>. This works perfectly for me.</p>

<p>But I can't find any documentation on any other apps that can be restricted in this way. Does anyone know of any other apps that can be restricted with these methods, and the keys that can be set?</p>

<p><a href=""https://developer.android.com/reference/android/app/admin/DevicePolicyManager.html#getApplicationRestrictions(android.content.ComponentName,%20java.lang.String)"">DevicePolicyManager.getApplicationRestrictions</a> only seems to return the restrictions you've already set for that app, not a list of all available restrictions. I also tried using <a href=""http://developer.android.com/reference/android/content/RestrictionsManager.html#getManifestRestrictions(java.lang.String)"">RestrictionsManager.getManifestRestrictions</a> on Chrome but this returns an empty list, so I think this is something different.</p>
",2652471,,,,,2017-08-16 6:53:55,How to find an app's available restrictions for DevicePolicyManager.setApplicationRestrictions,<android><google-chrome><android-5.0-lollipop><device-policy-manager>,1,6,6,,
Android,27311251,1,,,,,,12/5/2014 7:52:01,,3,681,"<p>I got an android demo named <a href=""https://github.com/googlesamples/android-BasicManagedProfile"" rel=""nofollow"">BasicManagedProfile</a>  which implements some new features about device policy manager.</p>

<p>Now I have a question about how to get the other package names when application in managed profile. For example, the demo shows the chrome and calculators name string to make presentations. </p>

<pre><code>/**
 * Package name of calculator
 */
private static final String PACKAGE_NAME_CALCULATOR = ""com.android.calculator2"";

/**
 * Package name of Chrome
 */
private static final String PACKAGE_NAME_CHROME = ""com.android.chrome"";
</code></pre>

<p>But I want to know how to get others like dialer and contact.</p>

<p>I tried to use <code>getInstalledPackages()</code> or <code>queryIntentActivities()</code> but failed.</p>

<p>By the way, I use the method <code>addCrossProfileIntentFilter()</code> like this:</p>

<pre><code>IntentFilter filter = new IntentFilter(Intent.ACTION_MAIN); filter.addCategory(Intent.CATEGORY_LAUNCHER);

MyActivity.deviceManager.addCrossProfileIntentFilter(MyReceiver.getComponentName(context), filter, FLAG_MANAGED_CAN_ACCESS_PARENT | FLAG_PARENT_CAN_ACCESS_MANAGED);
</code></pre>

<p>But the <code>queryIntentActivities()</code> can not return the right list of applications.
Please give me some suggestion about these.</p>
",1432273,,3478852,,2015-01-19 21:19:15,2017-06-11 8:18:55,How to obtain package info list form primary account when application in managed profile?,<android><android-5.0-lollipop><device-policy-manager>,3,0,,,
Android,27529852,1,,,,,,12/17/2014 16:09:39,,3,5007,"<p>I have a problem with android Camera2 API on a Nexus 7. I have developed an app on android 4.4.4 that uses the camera to take a picture, and I want to update it for the Lollipop update. I've followed code from this link to make new camera api work: <a href=""https://github.com/googlesamples/android-Camera2Basic/blob/master/Application/src/main/java/com/example/android/camera2basic/Camera2BasicFragment.java"" rel=""nofollow"">https://github.com/googlesamples/android-Camera2Basic/blob/master/Application/src/main/java/com/example/android/camera2basic/Camera2BasicFragment.java</a></p>

<p>I've tested code on a Nexus 5, and everything works well, but if i try it on a Nexus 7, something goes wrong. This is the error log:</p>

<pre><code>12-17 17:01:15.517: W/LegacyRequestMapper(24382): convertRequestMetadata - control.awbRegions setting is not supported, ignoring value
12-17 17:01:15.517: W/LegacyRequestMapper(24382): Only received metering rectangles with weight 0.
12-17 17:01:15.518: W/LegacyRequestMapper(24382): Only received metering rectangles with weight 0.
12-17 17:01:15.519: W/LegacyRequestMapper(24382): mapAeAndFlashMode - Ignore control.aeMode == ON_AUTO_FLASH;camera does not support it
12-17 17:01:15.519: W/LegacyRequestMapper(24382): convertRequestToMetadata - Ignoring android.lens.focusDistance false, only 0.0f is supported
12-17 17:01:15.955: I/CameraDeviceState(24382): Legacy camera service transitioning to state CAPTURING
12-17 17:01:21.198: I/RequestQueue(24382): Repeating capture request cancelled.
12-17 17:01:21.198: I/RequestQueue(24382): Repeating capture request set.
12-17 17:01:21.215: W/LegacyRequestMapper(24382): convertRequestMetadata - control.awbRegions setting is not supported, ignoring value
12-17 17:01:21.215: W/LegacyRequestMapper(24382): Only received metering rectangles with weight 0.
12-17 17:01:21.215: W/LegacyRequestMapper(24382): Only received metering rectangles with weight 0.
12-17 17:01:21.216: W/LegacyRequestMapper(24382): mapAeAndFlashMode - Ignore control.aeMode == ON_AUTO_FLASH;camera does not support it
12-17 17:01:21.216: W/LegacyRequestMapper(24382): convertRequestToMetadata - Ignoring android.lens.focusDistance false, only 0.0f is supported
12-17 17:01:21.495: E/AndroidRuntime(24382): FATAL EXCEPTION: CameraBackground
12-17 17:01:21.495: E/AndroidRuntime(24382): Process: com.example.newapicamera, PID: 24382
12-17 17:01:21.495: E/AndroidRuntime(24382): java.lang.NullPointerException: Attempt to invoke virtual method 'int java.lang.Integer.intValue()' on a null object reference
12-17 17:01:21.495: E/AndroidRuntime(24382):    at com.example.newapicamera.Camera2BasicFragment$4.process(Camera2BasicFragment.java:285)
12-17 17:01:21.495: E/AndroidRuntime(24382):    at com.example.newapicamera.Camera2BasicFragment$4.onCaptureCompleted(Camera2BasicFragment.java:324)
12-17 17:01:21.495: E/AndroidRuntime(24382):    at java.lang.reflect.Method.invoke(Native Method)
12-17 17:01:21.495: E/AndroidRuntime(24382):    at java.lang.reflect.Method.invoke(Method.java:372)
12-17 17:01:21.495: E/AndroidRuntime(24382):    at android.hardware.camera2.dispatch.InvokeDispatcher.dispatch(InvokeDispatcher.java:39)
12-17 17:01:21.495: E/AndroidRuntime(24382):    at android.hardware.camera2.dispatch.HandlerDispatcher$1.run(HandlerDispatcher.java:65)
12-17 17:01:21.495: E/AndroidRuntime(24382):    at android.os.Handler.handleCallback(Handler.java:739)
12-17 17:01:21.495: E/AndroidRuntime(24382):    at  android.os.Handler.dispatchMessage(Handler.java:95)
12-17 17:01:21.495: E/AndroidRuntime(24382):    at android.os.Looper.loop(Looper.java:135)
12-17 17:01:21.495: E/AndroidRuntime(24382):    at android.os.HandlerThread.run(HandlerThread.java:61)
12-17 17:01:21.542: I/RequestQueue(24382): Repeating capture request cancelled.
12-17 17:01:21.580: E/BufferQueueProducer(24382): [unnamed-24382-2] dequeueBuffer: BufferQueue has been abandoned
12-17 17:01:21.580: E/BufferQueueProducer(24382): [unnamed-24382-2] dequeueBuffer: BufferQueue has been abandoned
12-17 17:01:21.596: E/BufferQueueProducer(24382): [unnamed-24382-2] queueBuffer: BufferQueue has been abandoned
12-17 17:01:21.605: W/Camera-JNI(24382): callback on dead camera object
12-17 17:01:21.620: E/BufferQueueProducer(24382): [unnamed-24382-2] queueBuffer: BufferQueue has been abandoned
12-17 17:01:21.651: E/BufferQueueProducer(24382): [unnamed-24382-2] queueBuffer: BufferQueue has been abandoned
12-17 17:01:21.688: E/BufferQueueProducer(24382): [unnamed-24382-2] queueBuffer: BufferQueue has been abandoned
12-17 17:01:21.721: E/BufferQueueProducer(24382): [unnamed-24382-2] queueBuffer: BufferQueue has been abandoned
</code></pre>

<p>The line that throws the exception is:</p>

<pre><code>int aeState = result.get(CaptureResult.CONTROL_AE_STATE);
</code></pre>

<p>What is going wrong?</p>
",1246746,,822005,,2014-12-17 23:53:09,2016-03-15 1:46:24,new android Camera2 Api on nexus 7,<android><android-camera>,4,0,1,,
Android,27738431,1,,,,,,1/2/2015 6:45:50,,1,278,"<p>I have been trying the Android MDM sample <a href=""https://github.com/googlesamples/android-BasicManagedProfile"" rel=""nofollow"">https://github.com/googlesamples/android-BasicManagedProfile</a> and there are couple of questions that I am not clear on,  </p>

<ol>
<li><p>Why is there a separate managed and unmanaged version for the profile-owner app? I am not sure how to design the application flow, like in my app assume I provide two functionalities, one is to browse some SharePoint sites and save files to disk and the second is to provision/manage apps which is controlled by the admin (from an admin console).<br>
Because there are two versions of my application once user enables the profile, user can click on any of the icons. If user clicks on the unmanaged version then I am not able to perform any app-provisioning related tasks and have to ask the user to launch the managed version to continue.
In the managed version if user wants to access any of his data, then I have to use the file-provider to access app's data which was downloaded via unmanaged version.<br>
So am not sure if the new API's requires the user to be forced to use the managed version only?</p></li>
<li><p>Is there a way to launch the managed version of the app from the unmanaged version of the same application which is a profile owner and vice-versa? </p></li>
</ol>
",987105,,,,,2015-02-05 6:15:50,Android L - EMM/MDM - Launching Managed app from Unmanaged app,<android><android-5.0-lollipop>,1,0,,,
Android,27876937,1,,,,,,1/10/2015 13:52:45,,2,508,"<p>I imported WatchFace sample <a href=""https://github.com/googlesamples/android-WatchFace"" rel=""nofollow"">https://github.com/googlesamples/android-WatchFace</a>
however I cannot run phone app neither install watch faces to the emulator.
That sample project's phone app doesn't have default activity, but when I'm trying to start any of it's activities, it gives Null exception on ComponentName</p>

<pre><code>Caused by: java.lang.NullPointerException
        at com.example.android.wearable.watchface.DigitalWatchFaceCompanionConfigActivity.onCreate(DigitalWatchFaceCompanionConfigActivity.java:77)
        at android.app.Activity.performCreate(Activity.java:5231)
        at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1087)
        at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2169)    
</code></pre>

<p>row 77 is the last one in the onCreate method:</p>

<pre><code>@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_digital_watch_face_config);

    mPeerId = getIntent().getStringExtra(WatchFaceCompanion.EXTRA_PEER_ID);
    mGoogleApiClient = new GoogleApiClient.Builder(this)
            .addConnectionCallbacks(this)
            .addOnConnectionFailedListener(this)
            .addApi(Wearable.API)
            .build();

    ComponentName name = getIntent().getParcelableExtra(
            WatchFaceCompanion.EXTRA_WATCH_FACE_COMPONENT);
    TextView label = (TextView)findViewById(R.id.label);
    label.setText(label.getText() + "" ("" + name.getClassName() + "")"");
}
</code></pre>

<p>I set wearable app to not running any activity so it should install watch faces to the emulator. However is does not install anything.</p>

<p>I hope this is not a totally broken sample and I am just doing something very wrong, just can figure out what?
 Simple ""hello world"" app works OK and install with no issues when running on the same machine.</p>
",4439998,,1672895,,2015-01-10 14:36:49,2015-01-19 21:42:52,WatchFace sample - how to run,<android><nullpointerexception><sample>,1,0,1,,
Android,28257607,1,,,,,,1/31/2015 23:12:20,,1,645,"<p>I am using a fragment pager adapter for two tabs, based almost identically on the code from the <a href=""https://github.com/googlesamples/android-SlidingTabsBasic"" rel=""nofollow"">Sliding Tabs Basic sdk sample</a>. All was working fine until I tried to swap out the action bar for the tool bar. I had to switch up my theme to light, and now I've noticed that the tabs were using a transparent default colour. I want my tabs to be the same colour as the tool bar, but in setting the colour, they are obscuring the sliding tab strip indicator completely. What is the correct way to push the SlidingTabStrip to the front?</p>

<ul>
<li>I've tried setting the background resource of the tab programmatically rather than via the <code>selectableItemBackground</code> theme property. The background still obscures the indicators.</li>
<li>I've tried to <code>bringToFront()</code> or <code>bringChildToFront()</code> the SlidingTabStrip in multiple places, (it is created in the constructor of the SlidingTabLayout). I've tried it after the for loop in <code>SlidingTabLayout.populateTabStrip()</code> which seems sensible as this is where the tab views are created.</li>
</ul>

<p>I wonder why no-one else has had this issue ?!</p>
",1866373,,,,,2015-01-31 23:27:56,SlidingTabStrip indicator underneath SlidingTabLayout,<android><android-tabs><android-sliding>,1,0,,,
Android,29029594,1,,,,,,3/13/2015 10:12:16,,22,7668,"<p>I've been testing the geofencing api available in the latest Google Play Services, using the official sample available here: <a href=""https://github.com/googlesamples/android-Geofencing/"">https://github.com/googlesamples/android-Geofencing/</a>
And of course, following the training course: <a href=""http://developer.android.com/training/location/geofencing.html"">http://developer.android.com/training/location/geofencing.html</a></p>

<p>The sample displays a notification when you are nearing two Google buildings in San Fransisco, so I tweaked it to be triggered when I'm nearing my home or my work place.</p>

<p>If I use a real device, it works. The notifications are triggered properly. But when I'm using a simulator, and change the location with telnet or ddms, nothing happens. I also tried with Genymotion, with the Gapps installed, and same stuff: nothing.</p>

<p>Would anyone have any pointer about how to test geofence, without actually moving my butt? Because in the street, there is no way to debug the code...</p>
",870751,,,,,2018-09-04 10:17:40,Testing geofencing with Google Play Services 6.5.+,<android><google-play-services><geofencing>,6,7,5,,
Android,29071154,1,,,,,,3/16/2015 6:57:47,,1,300,"<p>I want to have Reveal Effect with in my app. I come to know about it for how it can be implemented. I got the information from the <a href=""http://developer.android.com/training/material/animations.html#Reveal"" rel=""nofollow"">Andoid Developer Blog</a>.</p>

<p>But when i have updated that with in my code, it is not showing any effect.</p>

<p>I have also try with <a href=""https://github.com/googlesamples/android-RevealEffectBasic"" rel=""nofollow"">Demo given by Google</a> to demostrate Reveal effect. But it also not showing the effect. If there any permission i need to add or whats wrong i am doing?</p>

<p>My animator is as below:</p>

<pre><code>View button = rootView.findViewById(R.id.button);
    final View shape = rootView.findViewById(R.id.circle);
    shape.setClipToOutline(false);
    shape.setVisibility(View.INVISIBLE);
    // Set a listener to reveal the view when clicked.
    button.setOnClickListener(new View.OnClickListener() {
        @Override
        public void onClick(View view) {

            if(isShowing==false){
                // previously invisible view

                // get the center for the clipping circle
                int cx = (shape.getLeft() + shape.getRight()) / 2;
                int cy = (shape.getTop() + shape.getBottom()) / 2;

                // get the final radius for the clipping circle
                int finalRadius = Math.max(shape.getWidth(), shape.getHeight());

                // create the animator for this view (the start radius is zero)
                Animator anim =
                        ViewAnimationUtils.createCircularReveal(shape, cx, cy, 0, finalRadius);

                // make the view visible and start the animation
                shape.setVisibility(View.VISIBLE);
                anim.setDuration(4000);
                anim.start();
            }else{

                // get the center for the clipping circle
                int cx = (shape.getLeft() + shape.getRight()) / 2;
                int cy = (shape.getTop() + shape.getBottom()) / 2;

                // get the initial radius for the clipping circle
                int initialRadius = shape.getWidth();

                // create the animation (the final radius is zero)
                Animator anim =
                        ViewAnimationUtils.createCircularReveal(shape, cx, cy, initialRadius, 0);

                // make the view invisible when the animation is done
                anim.addListener(new AnimatorListenerAdapter() {
                    @Override
                    public void onAnimationEnd(Animator animation) {
                        super.onAnimationEnd(animation);
                        shape.setVisibility(View.INVISIBLE);
                    }
                });

                anim.setDuration(4000);
                // start the animation
                anim.start();
            }

            isShowing = !isShowing;

    }
    });
</code></pre>

<p>Please let me know how to achieve this effect.</p>
",881635,,,,,2015-07-01 8:49:18,Why Reveal effect not working as per Developer blog,<android><android-layout><material-design><viewanimator><circularreveal>,1,9,,,
Android,29253846,1,,,,,,3/25/2015 11:02:42,,3,1001,"<p>I have fragment A which includes a SwipeRefresh and a RecycleView.
When user click on an Item in RecycleView, I replace a new Fragment which is B:</p>

<pre><code>mAdapter.setOnItemClickListener(new MyAdapter.OnItemClickListener() {
            @Override
            public void onItemClick(View view, int position) {

                Item tem = mItems.get(position);
                // selected item
                Log.i(TAG, item.getTitle() + "" clicked. Replacing fragment."");

                // We start the fragment transaction here. It is just an ordinary fragment transaction.
                getActivity().getSupportFragmentManager()
                        .beginTransaction()
                        .replace(R.id.content_fragment,
                                FragmentB.newInstance(item,
                                        (int) view.getX(), (int) view.getY(),
                                        view.getWidth(), view.getHeight())
                        )
                                // We push the fragment transaction to back stack. User can go back to the
                                // previous fragment by pressing back button.
                        .addToBackStack(""detail"")
                        .commit();
            }
        });
</code></pre>

<p>There is a problem :</p>

<p>When I start to refresh using SwipeRefresh, and it is still running, I click on an item (as you can see the code above), Fragment B will be replaced <code>under</code> Fragment A in the screen.
I can see Fragment B under my RecycleView in Fragment A! 
I am no longer able to scroll in recycleView since <code>onStop()</code> is called in Fragment A and <code>onCreateView</code> is called in Fragment B.</p>

<p>What could be the reason? do you have any workaround?</p>

<p>Addenda : Crash can be reproduce in google sample as well:</p>

<p><a href=""https://github.com/googlesamples/android-FragmentTransition/"" rel=""nofollow"">https://github.com/googlesamples/android-FragmentTransition/</a></p>
",1315447,,1315447,,2015-03-25 20:42:14,2016-12-21 13:47:01,Replacing Fragment does not work properly while swipeRefresh is running,<android><android-recyclerview><swiperefreshlayout>,2,5,1,,
Android,29431021,1,,,,,,4/3/2015 11:07:42,,5,3713,"<p>I want to capture video with 4:3 aspect ratio from android fron-facing camera using Camera2 API (added in 5.0 version of android). It works correctly unless camera has 16:9 sensor array (as front-facing camera on Samsung Galaxy S5). In such case picture looks stretched as if 16:9 picture was being captured and squeezed into 4:3 surface provided by MediaRecorder.</p>

<p>According to documentation there shouldn't be any additional configuration needed as long as MediaRecorder's size has been set to one of sizes provided by <a href=""https://developer.android.com/reference/android/hardware/camera2/params/StreamConfigurationMap.html#getOutputSizes(java.lang.Class%3CT%3E)"" rel=""noreferrer"">getOutputSizes(MediaRecorder.class)</a>. Camera should automatically crop picture so it fits size of MediaRecorder's surface.</p>

<p>I tested also reversed situation - recording 16:9 video on camera with 4:3 sensor array (front-facing camera of Nexus-5). It works properly - picture is cropped to 16:9 aspect ratio.</p>

<p>I assume this is a bug in android API but would like to see whether there's something I miss here.</p>

<p>The simplest way to reproduce that problem is to use <a href=""https://github.com/googlesamples/android-Camera2Basic"" rel=""noreferrer"">camera2Basic</a> sample app provided by google with the following <a href=""https://github.com/mikosik/android-Camera2Basic/commit/c3cf9f3755d2844d3398fa6252f3e324eee63e92"" rel=""noreferrer"">change</a> that switches to using front-facing camera and 4:3 size for preview. It works correctly on Nexus-5 but provides stretched image on Samsung Galaxy S5. Below screenshot of camera2Basic app on Samsung Galaxy S5 (android 5.0).</p>

<p><img src=""https://i.stack.imgur.com/WCJaj.jpg"" alt=""enter image description here""></p>
",2807871,,,,,2015-11-13 10:29:21,Capturing 4:3 camera picture via android Camera2 API on camera with 16:9 sensor array,<android><android-camera>,2,2,5,,
Android,29501618,1,,,,,,4/7/2015 21:27:26,,6,6075,"<p>Since android 5.0 they are providing mediaprojection library to capture screen content. but sample demo application provided by them is not clear. U can find sample app <a href=""https://github.com/googlesamples/android-ScreenCapture"" rel=""noreferrer"">here</a>. In that application they are projecting captured screen using virtualdisplay method</p>

<pre><code>private void setUpVirtualDisplay() {
    Log.i(TAG, ""Setting up a VirtualDisplay: "" +
            mSurfaceView.getWidth() + ""x"" + mSurfaceView.getHeight() +
            "" ("" + mScreenDensity + "")"");
    mVirtualDisplay = mMediaProjection.createVirtualDisplay(""ScreenCapture"",
            mSurfaceView.getWidth(), mSurfaceView.getHeight(), mScreenDensity,
            DisplayManager.VIRTUAL_DISPLAY_FLAG_AUTO_MIRROR,
            mSurface, null, null);
    mButtonToggle.setText(R.string.stop);
}
</code></pre>

<p>I want to convert captured screen into mp4 file for my screen recording application. Please help me to get through this.</p>
",2251601,,294248,,2015-05-07 17:46:51,2016-07-26 9:25:12,How to use Mediaprojection library in android to capture screen and convert into mp4 file?,<android><android-mediarecorder><android-mediaprojection>,3,0,1,,
Android,29540171,1,,,,,,4/9/2015 13:40:34,,1,1148,"<p>NOTE: Before you say it's a duplicate and others have solved it and that there are tutorials (like <a href=""http://androidopentutorials.com/android-vertical-scrollbar-styling/"" rel=""nofollow""><strong>this one</strong></a>), I know, but for some reason, they don't work for me.</p>

<h2>Background</h2>

<p>I've made a library (<a href=""https://github.com/AndroidDeveloperLB/ListViewVariants"" rel=""nofollow""><strong>here</strong></a>) that shows how to mimic the way that the Contacts app of Lollipop shows the headers on the left.</p>

<p>I'd like to know how to customize the scrollbar and the fast-scroller to look like on Lollipop (either like the contacts app there as I've done <a href=""https://github.com/AndroidDeveloperLB/LollipopContactsRecyclerViewFastScroller"" rel=""nofollow""><strong>with RecyclerView</strong></a>, or like the default one for ListView).</p>

<h2>The problem</h2>

<p>For some reason, even though I use the same attributes that are talked about on all of the tutorials and StackOverflow posts, they don't do anything.</p>

<p>Here's the style I created:</p>

<pre><code>&lt;style name=""CustomTheme"" &gt;
  &lt;item name=""android:scrollbarFadeDuration""&gt;250&lt;/item&gt;
  &lt;item name=""android:scrollbarDefaultDelayBeforeFade""&gt;300&lt;/item&gt;
  &lt;item name=""android:scrollbarSize""&gt;10dip&lt;/item&gt;
  &lt;item name=""android:scrollbarThumbHorizontal""&gt;@drawable/scrollbar_handle_material&lt;/item&gt;
  &lt;item name=""android:scrollbarThumbVertical""&gt;@drawable/scrollbar_handle_material&lt;/item&gt;
  &lt;item name=""android:scrollbarTrackHorizontal""&gt;@null&lt;/item&gt;
  &lt;item name=""android:scrollbarTrackVertical""&gt;@null&lt;/item&gt;
&lt;/style&gt;
</code></pre>

<p><strong>res/drawable/scrollbar_handle_material.xml</strong></p>

<pre><code>&lt;shape xmlns:android=""http://schemas.android.com/apk/res/android""
       android:tint=""?attr/colorControlNormal""
       android:shape=""rectangle""&gt;
  &lt;solid android:color=""#84ffffff""/&gt;
  &lt;size android:width=""4dp""/&gt;
&lt;/shape&gt;
</code></pre>

<p>And of course I use it for the ListView:</p>

<pre><code>style=""@style/CustomTheme""
</code></pre>

<h2>What I've tried</h2>

<p>Well, I tried to play with the attributes, I tried to use a simple ListView (and a GridView, by using the sample ""<a href=""https://github.com/googlesamples/android-DisplayingBitmaps/"" rel=""nofollow""><strong>DisplayingBitmaps</strong></a>"") and I tried to set the attributes right in the ListView tag (instead of using a style) as such:</p>

<pre><code>            android:scrollbarFadeDuration=""250""
            android:scrollbarDefaultDelayBeforeFade=""300""
            android:scrollbarSize=""10dp""
            android:scrollbarThumbHorizontal=""@drawable/scrollbar_handle_material""
            android:scrollbarThumbVertical=""@drawable/scrollbar_handle_material""
            android:scrollbarTrackHorizontal=""@null""
            android:scrollbarTrackVertical=""@null""
</code></pre>

<p>... but nothing does anything...</p>

<h2>The question</h2>

<p>How could it be? what's missing? what's wrong ?</p>

<p>I'd also like to ask if it's possible on Android 2.x.</p>
",878126,,,,,2015-04-10 19:06:15,How to customize the scrollbar on ListView?,<android><android-listview><scrollbar>,1,4,1,,
Android,29542859,1,,,,,,4/9/2015 15:32:20,,3,2586,"<p>I'm trying to run the Google Place Code Sample, but I am not able to do it. </p>

<p>I am receiving error messages like:</p>

<blockquote>
  <p>Error getting autocomplete prediction API call: Status{statusCode=TIMEOUT, resolution=null}</p>
</blockquote>

<p>I added my Google Map V2 ApiKey to the Manifest, and signed the app with the right certificate, so it seems that the key could be here:</p>

<pre><code>    mGoogleApiClient = new GoogleApiClient.Builder(this)
            .enableAutoManage(this, 0 /* clientId */, this)
            .addConnectionCallbacks(this)
            .addApi(Places.GEO_DATA_API)
            .build(); 
</code></pre>

<p>I am not sure what is supposed to be in the <code>clientId</code> slot, and there is not too much info out there. Just other people with the same problem but without solution.</p>

<p>By the way if somebody wants to take a look to the complete code it is here:
<a href=""https://github.com/googlesamples/android-play-places/issues/3"" rel=""nofollow"">https://github.com/googlesamples/android-play-places/issues/3</a></p>
",3891283,,1677912,,2015-10-21 20:03:12,2015-10-21 20:13:03,Autocomplete Google Places sample,<android><autocomplete><google-places-api>,1,6,,,
Android,29556406,1,,,,,,4/10/2015 8:09:11,,1,199,"<p>I'm trying this sample: <a href=""https://github.com/googlesamples/android-Camera2Basic"" rel=""nofollow noreferrer"">https://github.com/googlesamples/android-Camera2Basic</a></p>

<p>When I change to Front Camera, the Camera is scaled. When I stop and resume the application, it can work perfect.</p>

<p>I'm using Nexus 7 2013 OS 5.0.2</p>

<p>I change to Front Camera by comment this code:</p>

<pre><code>// We don't use a front facing camera in this sample.
if (characteristics.get(CameraCharacteristics.LENS_FACING)
        == CameraCharacteristics.LENS_FACING_FRONT) {

//                    continue;
//                }
</code></pre>

<p><img src=""https://i.stack.imgur.com/oJXuh.png"" alt=""enter image description here""></p>
",1735499,,192373,,2015-04-10 12:36:12,2015-04-23 21:44:21,Camera2 is scaled on Front Camera of Nexus 7 2013,<android><camera>,1,0,,,
Android,29578606,1,,,,,,4/11/2015 13:48:27,,2,1479,"<p>I installed Google Services API in my Genymotion and after I downloaded the location example (<a href=""https://github.com/googlesamples/android-play-location/tree/master/BasicLocationSample"" rel=""nofollow"">https://github.com/googlesamples/android-play-location/tree/master/BasicLocationSample</a>) and it doesn't work, I set GPS and Data abled. I tested it on my real phone and it works! How to fix?</p>

<p>Google Maps find me on map.</p>
",4747586,,,,,2016-06-26 15:18:42,Android Genymotion Location (Google Services API) doesn't work,<android><location><genymotion><genymotion-gps>,3,2,,,
Android,29822760,1,,,,,,4/23/2015 11:57:27,,8,9353,"<p>Final intention here is to have a device in 'kiosk mod'.</p>

<p><a href=""http://sdgsystems.com/blog/implementing-kiosk-mode-android-part-3-android-lollipop/"" rel=""nofollow noreferrer"">They</a> <a href=""http://florent-dupont.blogspot.fr/2015/01/android-shell-command-dpm-device-policy.html"" rel=""nofollow noreferrer"">say</a> you don't need NFC nor rooting to achieve application becoming <a href=""http://developer.android.com/about/versions/android-5.0.html#DeviceOwner"" rel=""nofollow noreferrer"">device owner</a>. I've yet to see a full example of this method but lets try:</p>

<pre><code>adb shell dpm set-device-owner &lt;package&gt;/.&lt;ReceiverImplementation&gt;
</code></pre>

<p>should do... So I do so, and get: </p>

<pre><code>java.lang.SecurityException: 
Neither user 2000 nor current process has android.permission.BIND_DEVICE_ADMIN.
</code></pre>

<p>Following code, therefore, returns false.</p>

<pre><code>((DevicePolicyManager) getSystemService(Context.DEVICE_POLICY_SERVICE))
   .isDeviceOwnerApp(getApplicationContext().getPackageName())
</code></pre>

<p><a href=""https://stackoverflow.com/questions/28112382/device-owner-without-using-nfc-in-android-lollipop"">This STO question</a> poses a similar question but doesn't specify an actual failure..</p>

<p>Manifest file and the rest of the source is mostly inspired from <a href=""https://github.com/googlesamples/android-DeviceOwner"" rel=""nofollow noreferrer"">this google sample</a></p>

<pre><code>&lt;manifest
    package=""com.example.android.deviceowner""
    xmlns:android=""http://schemas.android.com/apk/res/android""
    android:versionCode=""1""
    android:versionName=""1.0""&gt;

    &lt;application
        android:allowBackup=""true""
        android:icon=""@drawable/ic_launcher""
        android:label=""@string/app_name""
        android:theme=""@style/AppTheme""&gt;

        &lt;activity
            android:name="".MainActivity""
            android:label=""@string/app_name""&gt;
            &lt;intent-filter&gt;
                &lt;action android:name=""android.intent.action.MAIN""/&gt;
                &lt;category android:name=""android.intent.category.LAUNCHER""/&gt;
            &lt;/intent-filter&gt;
        &lt;/activity&gt;

        &lt;receiver
            android:name="".DeviceOwnerReceiver""
            android:description=""@string/app_name""
            android:label=""@string/app_name""
            android:permission=""android.permission.BIND_DEVICE_ADMIN""&gt;
            &lt;meta-data
                android:name=""android.app.device_admin""
                android:resource=""@xml/device_owner_receiver""/&gt;
            &lt;intent-filter&gt;
                &lt;action android:name=""android.app.action.ACTION_DEVICE_ADMIN_ENABLED""/&gt;
            &lt;/intent-filter&gt;
        &lt;/receiver&gt;

    &lt;/application&gt;

&lt;/manifest&gt;
</code></pre>

<p>Device I am trying to do this currently is LG G Pad.</p>
",2208247,,-1,,2017-05-23 11:47:28,2016-05-12 13:42:14,"Device owner on a nonrooted device (Android L), without NFC, using adb shell, dpm set-device-owner",<android><android-5.0-lollipop><kiosk-mode>,2,15,1,,
Android,30172529,1,,,,,,5/11/2015 16:08:03,,10,753,"<p><a href=""https://github.com/googlesamples/android-Camera2Basic"" rel=""nofollow noreferrer"">One of the official Google samples for the Camera2 API</a> suffers from <a href=""https://github.com/googlesamples/android-Camera2Basic/issues/10"" rel=""nofollow noreferrer"">the same <code>BufferQueue has been abandoned</code> problem</a> as is seen in:</p>

<ul>
<li><a href=""https://stackoverflow.com/questions/22486762/what-can-i-do-when-the-bufferqueue-has-been-abandoned"">What can I do when the BufferQueue has been abandoned?</a></li>
<li><a href=""https://stackoverflow.com/questions/30111951/android-logcat-shows-bufferqueueprocedure-solved"">Android LogCat shows BufferQueueProcedure</a></li>
</ul>

<p>Specifically, the sample app calls a <code>closeCamera()</code> method from <code>onPause()</code> of a fragment, where <code>closeCamera()</code> calls <code>close()</code> on the <code>CameraCaptureSession</code>, then <code>close()</code> on the <code>CameraDevice</code>, then <code>close()</code> on the <code>ImageReader</code> (used for actual picture-taking). After the <code>close()</code> on <code>CameraDevice</code> is when a few occurrences of the aforementioned <code>BufferQueue has been abandoned</code> message appears in LogCat, though I only get the message on some Android 5.1 hardware (Nexus 4 and Nexus 7 2013) and not others (Nexus 5 and Nexus 6).</p>

<p>fadden's comment on this was:</p>

<blockquote>
  <p>If the consumer side is shut down before entering onPause(), the messages would be expected.</p>
</blockquote>

<p>When will <code>TextureView</code>'s ""consumer side"" will be shut down, and why then?</p>

<p>Google's sample code does not proactively do anything to shut down the <code>TextureView</code> that I can see. And, since the <code>TextureView</code> could still be visible when paused, I would have expected that the ""consumer side"" would not be affected at the time of <code>onPause()</code>, but perhaps later in <code>onStop()</code>.</p>

<p>While I realize that this message (despite being an error) is benign, I'm trying to figure out how to get rid of it, if for no other reason than to prevent my being asked time and again why code of mine is logging this error. I am hoping that by understanding more about this ""consumer side"", I can figure out how better to tidy things up when the user exits a Camera2-using activity or fragment and avoid this error.</p>
",115145,,-1,,2017-05-23 11:51:56,2015-05-19 20:22:42,"When Is a TextureView's ""Consumer Side"" Closed?",<android><android-camera><textureview>,2,2,4,,
Android,30334319,1,,,,,,5/19/2015 19:17:52,,16,9602,"<p>There is not enough info about camera2 face recognition mechanism. I used Camera2 sample from Google:
  <a href=""http://%20%20https://github.com/googlesamples/android-Camera2Basic"" rel=""noreferrer"">android-Camera2Basic</a></p>

<p>I set face recognition mode to FULL.</p>

<pre><code>mPreviewRequestBuilder.set(CaptureRequest.STATISTICS_FACE_DETECT_MODE,
                                    CameraMetadata.STATISTICS_FACE_DETECT_MODE_FULL);
</code></pre>

<p>Also I checked </p>

<p><code>STATISTICS_INFO_MAX_FACE_COUNT</code> and <code>STATISTICS_INFO_AVAILABLE_FACE_DETECT_MODES</code>:</p>

<pre><code>int max_count = characteristics.get(
CameraCharacteristics.STATISTICS_INFO_MAX_FACE_COUNT);
int modes [] = characteristics.get(
CameraCharacteristics.STATISTICS_INFO_AVAILABLE_FACE_DETECT_MODES);
</code></pre>

<p><strong>Output</strong>: <em>maxCount : 5 , modes : [0, 2]</em> </p>

<p>My CaptureCallback:</p>

<pre><code> private CameraCaptureSession.CaptureCallback mCaptureCallback
 = new CameraCaptureSession.CaptureCallback() {

    private void process(CaptureResult result) {
                Integer mode = result.get(CaptureResult.STATISTICS_FACE_DETECT_MODE);
                Face [] faces = result.get(CaptureResult.STATISTICS_FACES);
                if(faces != null &amp;&amp; mode != null)
                    Log.e(""tag"", ""faces : "" + faces.length + "" , mode : "" + mode ); 
    }

    @Override
    public void onCaptureProgressed(CameraCaptureSession session, CaptureRequest request,
                                    CaptureResult partialResult) {
        process(partialResult);
    }

    @Override
    public void onCaptureCompleted(CameraCaptureSession session, CaptureRequest request,
                                   TotalCaptureResult result) {
        process(result);
    }
</code></pre>

<p><strong>Output</strong>: <em>faces : 0 , mode : 2</em> </p>

<pre><code> public static final int STATISTICS_FACE_DETECT_MODE_FULL = 2;
</code></pre>

<p>Faces length is constantly 0. Looks like it doesn't recognise a face properly or I missed something.</p>

<p>I know approach with <a href=""https://developer.android.com/reference/android/media/FaceDetector.html"" rel=""noreferrer"">FaceDetector</a>. I just wanted to check how it works with new camera2 <a href=""https://developer.android.com/reference/android/hardware/camera2/params/Face.html"" rel=""noreferrer"">Face</a>.</p>
",1100525,,4501480,,2016-06-27 5:09:28,2018-12-29 13:01:05,Android camera2 face recognition,<android><android-camera><face-detection><face-recognition>,4,2,4,,
Android,30350739,1,,,,,,5/20/2015 13:12:05,,9,24330,"<p>I need to make screen similar to this. I think it has autocompletetextview and listview to display returned results. Google Place API is used here to auto suggest places and listview adapter is updated accordingly.
Please any kind of help is appreciated.
Thanks in advance.</p>

<p>Checked android sample project on AutoComplete for places too. But it is not having any listview to display results. Instead it shows results in autocompletetextview spinner. Any modification we can do with that project</p>

<p><a href=""https://github.com/googlesamples/android-play-places"" rel=""noreferrer"">Link to google sample project</a></p>

<p><img src=""https://i.stack.imgur.com/KVQOR.png"" alt=""Uber PickUp location screen""></p>
",2265145,,,,,2018-07-02 23:36:11,AutoCompleteTextView with Google Places shown in ListView just like Uber,<android><android-fragments><android-listview><google-places-api><autocompletetextview>,3,4,6,,
Android,30622664,1,,,,,,6/3/2015 14:13:54,,1,1015,"<p>I have made a custom camera on android using camera2 api. I am currently facing an intermittent issue with one device, a OnePlus One. As checked it is working fine with other devices like S3, S4, HTC  (all major devices), Moto  (all devices).</p>

<p>Please suggest if anything in particular is required/needed to resolve this issue on the OnePlus One and other devices?</p>

<pre><code>public class AutoFitTextureView extends TextureView {

private int mRatioWidth = 0;
private int mRatioHeight = 0;

public AutoFitTextureView(Context context) {
    this(context, null);
}

public AutoFitTextureView(Context context, AttributeSet attrs) {
    this(context, attrs, 0);
}

@SuppressLint(""NewApi"")
public AutoFitTextureView(Context context, AttributeSet attrs, int defStyle) {
    super(context, attrs, defStyle);
}

/**
 * Sets the aspect ratio for this view. The size of the view will be measured based on the ratio
 * calculated from the parameters. Note that the actual sizes of parameters don't matter, that
 * is, calling setAspectRatio(2, 3) and setAspectRatio(4, 6) make the same result.
 *
 * @param width  Relative horizontal size
 * @param height Relative vertical size
 */
@SuppressLint(""NewApi"")
public void setAspectRatio(int width, int height) {
    if (width &lt; 0 || height &lt; 0) {
        throw new IllegalArgumentException(""Size cannot be negative."");
    }
    mRatioWidth = width;
    mRatioHeight = height;
    requestLayout();
}

@SuppressLint(""NewApi"")
@Override
protected void onMeasure(int widthMeasureSpec, int heightMeasureSpec) {
    super.onMeasure(widthMeasureSpec, heightMeasureSpec);
    if (mRatioWidth ==0 &amp;&amp; mRatioHeight == 00) {
           int width = MeasureSpec.getSize(widthMeasureSpec);
           int height = MeasureSpec.getSize(heightMeasureSpec);
           if (0 == mRatioWidth || 0 == mRatioHeight) {
               setMeasuredDimension(width, height);
           } else {
               if (width &lt; height * mRatioWidth / mRatioHeight) {
                   setMeasuredDimension(width, width * mRatioHeight / mRatioWidth);
               } else {
                   setMeasuredDimension(height * mRatioWidth / mRatioHeight, height);
               }
           }
    }else {
        setMeasuredDimension(mRatioWidth, mRatioHeight);
    }
}
</code></pre>

<p>We have used <a href=""https://github.com/googlesamples/android-Camera2Basic"" rel=""nofollow"">this</a> link to make this camera</p>

<p>Thanks in advance</p>
",4969863,,4969863,,2015-06-03 15:21:36,2017-02-09 14:06:44,Front Camera preview is not full screen,<android><camera>,2,0,,,
Android,31154802,1,,,,,,7/1/2015 7:14:16,,2,1918,"<p>I want to use <a href=""http://developer.android.com/training/location/geofencing.html"" rel=""nofollow noreferrer"">Geofencing location API</a> in my application to set certain Point of Interest. I have used <a href=""https://github.com/googlesamples/android-play-location/tree/master/Geofencing"" rel=""nofollow noreferrer"">this</a> demo provided by google. I am able to run this demo when WIFI and location services both are on. But this doesn't seem to work when only GPS is turned on. I am not able to get <a href=""http://developer.android.com/reference/com/google/android/gms/location/Geofence.html#GEOFENCE_TRANSITION_ENTER"" rel=""nofollow noreferrer"">GEOFENCE_TRANSITION_ENTER</a> or <a href=""https://developers.google.com/android/reference/com/google/android/gms/location/Geofence#GEOFENCE_TRANSITION_EXIT"" rel=""nofollow noreferrer"">GEOFENCE_TRANSITION_EXIT</a> events for that. I have modified the expiration time to <a href=""https://developers.google.com/android/reference/com/google/android/gms/location/Geofence#NEVER_EXPIRE"" rel=""nofollow noreferrer"">NEVER_EXPIRE</a>, but still no luck. Can anyone point out what I am doing wrong ? TIA.  </p>

<p>Edit: After following many sites, I finally managed to get the Geofence API working with <a href=""https://stackoverflow.com/a/23741825/1465910"">this code</a>. That is, Poll the GPS hardware on an interval without doing anything with the result. But now my question is that, is it the right way to do it ? Will google allow this once it's on Play store ? Please guide me on this topic. </p>
",1465910,,-1,,2017-05-23 12:01:40,2016-09-02 9:19:06,Geofencing with only GPS does not work in android,<android><gps><geolocation><geofencing><android-geofence>,3,0,2,,
Android,31229953,1,,,,,,7/5/2015 11:39:36,,3,2394,"<p>In my android application, I need to get each frame that is returned by the  android.hardware.camera2, make some processing with it's data and only then display it on the surfacetexture.
This question is similar to mine, but it didn't help me:
<a href=""https://stackoverflow.com/questions/25462277/camera-preview-image-data-processing-with-android-l-and-camera2-api"">Camera preview image data processing with Android L and Camera2 API</a></p>

<p>I've tried to get the frame from here (as suggested in the answer to the question):</p>

<pre><code>private final ImageReader.OnImageAvailableListener mOnImageAvailableListener
            = new ImageReader.OnImageAvailableListener() {

        @Override
        public void onImageAvailable(ImageReader reader) {

            Log.d(""Img"", ""onImageAvailable"");
            mBackgroundHandler.post(new ImageSaver(reader.acquireNextImage(), mFile));
        }

    };
</code></pre>

<p>This was not useful, as the callback is called only after the user performed capture of image. And I don't need it only on capture, I need to get each frame that is sent to the camerapreview surface.
I wonder, maybe the farme can be taken here (from the texture):</p>

<pre><code>public void onSurfaceTextureUpdated(SurfaceTexture texture) {
            Log.d(""Img"", ""onSurfaceTextureUpdated"");

        }
</code></pre>

<p>If yes, how?</p>

<p>I'm using this sample from google, as a basis: </p>

<p><a href=""https://github.com/googlesamples/android-Camera2Basic"" rel=""nofollow noreferrer"">https://github.com/googlesamples/android-Camera2Basic</a></p>
",2924714,,-1,,2017-05-23 11:44:38,2015-09-15 5:16:41,get data of each android.hardware.camera2 frame before it is displayed on the surfacetexture,<android><image-processing><android-camera><android-5.0-lollipop>,2,2,,,
Android,31232008,1,,,,,,7/5/2015 15:36:48,,5,4521,"<p>I use the <a href=""https://github.com/googlesamples/android-Camera2Basic"" rel=""noreferrer"">https://github.com/googlesamples/android-Camera2Basic</a>, but try to modify it in a way that I could get access to each frame before it is drawn on the surfaceview.
I understood, I should add additional surface (ImageReader.getSurface()), and read the frame from it in this callback:</p>

<pre><code>private final ImageReader.OnImageAvailableListener mOnImageAvailableListener
            = new ImageReader.OnImageAvailableListener() {

        @Override
        public void onImageAvailable(ImageReader reader) {

           Log.d(""Img"", ""onImageAvailable"");
            mBackgroundHandler.post(new ImageSaver(reader.acquireNextImage(), mFile));
        }

    };
</code></pre>

<p>The problem is this callback gets called only when the image is capture by the user and not on eacg frame that is sent to preview screen from camera.</p>

<p>Here is what I tried to add:</p>

<pre><code>private void createCameraPreviewSession() {
        try {
            SurfaceTexture texture = mTextureView.getSurfaceTexture();
            assert texture != null;

            // We configure the size of default buffer to be the size of camera preview we want.
            texture.setDefaultBufferSize(mPreviewSize.getWidth(), mPreviewSize.getHeight());

            // This is the output Surface we need to start preview.
            Surface surface = new Surface(texture);

            // We set up a CaptureRequest.Builder with the output Surface.
            mPreviewRequestBuilder
                    = mCameraDevice.createCaptureRequest(CameraDevice.TEMPLATE_PREVIEW);
            mPreviewRequestBuilder.addTarget(surface);

            // Here, we create a CameraCaptureSession for camera preview.
            mCameraDevice.createCaptureSession(Arrays.asList(surface, mImageReader.getSurface()),
                    new CameraCaptureSession.StateCallback() {

                        @Override
                        public void onConfigured(CameraCaptureSession cameraCaptureSession) {
                            // The camera is already closed
                            if (null == mCameraDevice) {
                                return;
                            }

                            // When the session is ready, we start displaying the preview.
                            mCaptureSession = cameraCaptureSession;
                            try {
                                // Auto focus should be continuous for camera preview.
                                mPreviewRequestBuilder.set(CaptureRequest.CONTROL_AF_MODE,
                                        CaptureRequest.CONTROL_AF_MODE_CONTINUOUS_PICTURE);
                                // Flash is automatically enabled when necessary.
                                mPreviewRequestBuilder.set(CaptureRequest.CONTROL_AE_MODE,
                                        CaptureRequest.CONTROL_AE_MODE_ON_AUTO_FLASH);

                                // Finally, we start displaying the camera preview.
                                mPreviewRequest = mPreviewRequestBuilder.build();
                                mCaptureSession.setRepeatingRequest(mPreviewRequest,
                                        mCaptureCallback, mBackgroundHandler);
                                //mPreviewRequestBuilder.addTarget(mImageReader.getSurface());
                            } catch (CameraAccessException e) {
                                e.printStackTrace();
                            }
                        }

                        @Override
                        public void onConfigureFailed(CameraCaptureSession cameraCaptureSession) {
                            showToast(""Failed"");
                        }
                    }, null
            );

            /**TODO added for capturing aeach frame*/
            // This is the CaptureRequest.Builder that we use to take a picture.
            final CaptureRequest.Builder captureBuilder =
                    mCameraDevice.createCaptureRequest(CameraDevice.TEMPLATE_STILL_CAPTURE);
            captureBuilder.addTarget(mImageReader.getSurface());

            // Use the same AE and AF modes as the preview.
            captureBuilder.set(CaptureRequest.CONTROL_AF_MODE,
                    CaptureRequest.CONTROL_AF_MODE_CONTINUOUS_PICTURE);
            captureBuilder.set(CaptureRequest.CONTROL_AE_MODE,
                    CaptureRequest.CONTROL_AE_MODE_ON_AUTO_FLASH);

            /**end added for capture each frame*/


        } catch (CameraAccessException e) {
            e.printStackTrace();
        }
    }
</code></pre>
",2924714,,,,,2018-10-17 0:22:56,android camera2 process each frame and display its preview,<android><image-processing><android-camera><surfaceview>,1,1,2,,
Android,31450919,1,,,,,,7/16/2015 9:52:43,,1,3044,"<p><strong>Bluetooth LE</strong> introduced with <code>Android 4.3</code>, therefore i am using two Android devices and my both devices <code>supports</code> API Version <strong>4.4.2</strong></p>

<p>Even, I already paired both the devices, but still not showing device in a List, see below screenshot</p>

<p><img src=""https://i.stack.imgur.com/0BOZp.jpg"" alt=""enter image description here""></p>

<p>I have tried with both the ways:</p>

<pre><code>&lt;uses-feature android:name=""android.hardware.bluetooth_le"" android:required=""true""/&gt;
</code></pre>

<p><strong>and</strong></p>

<pre><code>&lt;uses-feature android:name=""android.hardware.bluetooth_le"" android:required=""false""/&gt;
</code></pre>

<p><strong>Log says:</strong></p>

<pre><code>07-16 17:26:15.146    3857-3857/com.example.android.bluetoothlegatt D/dalvikvmï¹• Late-enabling CheckJNI
07-16 17:26:15.146    3857-3857/com.example.android.bluetoothlegatt D/dalvikvmï¹• Try to disable coredump for pid 3857
07-16 17:26:15.146    3857-3857/com.example.android.bluetoothlegatt D/dalvikvmï¹• Process 3857 nice name: com.example.android.bluetoothlegatt
07-16 17:26:15.146    3857-3857/com.example.android.bluetoothlegatt D/dalvikvmï¹• Extra Options: not specified
07-16 17:26:15.246    3857-3857/com.example.android.bluetoothlegatt D/BluetoothAdapterï¹• startLeScan(): null
07-16 17:26:15.276    3857-3869/com.example.android.bluetoothlegatt D/BluetoothAdapterï¹• onClientRegistered() - status=0 clientIf=5
07-16 17:26:15.296    3857-3857/com.example.android.bluetoothlegatt E/IMGSRVï¹• :0: PVRDRMOpen: TP3, ret = 50
07-16 17:26:15.306    3857-3857/com.example.android.bluetoothlegatt E/IMGSRVï¹• :0: PVRDRMOpen: TP3, ret = 53
07-16 17:26:15.306    3857-3857/com.example.android.bluetoothlegatt E/IMGSRVï¹• :0: PVRDRMOpen: TP3, ret = 54
07-16 17:26:15.306    3857-3857/com.example.android.bluetoothlegatt E/IMGSRVï¹• :0: PVRDRMOpen: TP3, ret = 54
07-16 17:26:15.306    3857-3857/com.example.android.bluetoothlegatt E/IMGSRVï¹• :0: PVRDRMOpen: TP3, ret = 54
07-16 17:26:15.306    3857-3857/com.example.android.bluetoothlegatt E/IMGSRVï¹• :0: PVRDRMOpen: TP3, ret = 56
07-16 17:26:15.346    3857-3857/com.example.android.bluetoothlegatt D/OpenGLRendererï¹• Enabling debug mode 0
07-16 17:26:25.246    3857-3857/com.example.android.bluetoothlegatt D/BluetoothAdapterï¹• stopLeScan()
</code></pre>

<p>Code:</p>

<p><strong>BluetoothLeService.java:-</strong></p>

<pre><code>public class BluetoothLeService extends Service {
    .......
    public final static UUID UUID_HEART_RATE_MEASUREMENT =
            UUID.fromString(SampleGattAttributes.HEART_RATE_MEASUREMENT);

    private final BluetoothGattCallback mGattCallback = new BluetoothGattCallback() {
        @Override
        public void onConnectionStateChange(BluetoothGatt gatt, int status, int newState) {
            String intentAction;
            if (newState == BluetoothProfile.STATE_CONNECTED) {
                intentAction = ACTION_GATT_CONNECTED;
                mConnectionState = STATE_CONNECTED;
                broadcastUpdate(intentAction);
                Log.i(TAG, ""Connected to GATT server."");
                // Attempts to discover services after successful connection.
                Log.i(TAG, ""Attempting to start service discovery:"" +
                        mBluetoothGatt.discoverServices());

            } else if (newState == BluetoothProfile.STATE_DISCONNECTED) {
                intentAction = ACTION_GATT_DISCONNECTED;
                mConnectionState = STATE_DISCONNECTED;
                Log.i(TAG, ""Disconnected from GATT server."");
                broadcastUpdate(intentAction);
            }
        }

        @Override
        public void onServicesDiscovered(BluetoothGatt gatt, int status) {
            if (status == BluetoothGatt.GATT_SUCCESS) {
                broadcastUpdate(ACTION_GATT_SERVICES_DISCOVERED);
            } else {
                Log.w(TAG, ""onServicesDiscovered received: "" + status);
            }
        }

        @Override
        public void onCharacteristicRead(BluetoothGatt gatt,
                                         BluetoothGattCharacteristic characteristic,
                                         int status) {
            if (status == BluetoothGatt.GATT_SUCCESS) {
                broadcastUpdate(ACTION_DATA_AVAILABLE, characteristic);
            }
        }

        @Override
        public void onCharacteristicChanged(BluetoothGatt gatt,
                                            BluetoothGattCharacteristic characteristic) {
            broadcastUpdate(ACTION_DATA_AVAILABLE, characteristic);
        }
    };

    private void broadcastUpdate(final String action) {
        final Intent intent = new Intent(action);
        sendBroadcast(intent);
    }

    private void broadcastUpdate(final String action,
                                 final BluetoothGattCharacteristic characteristic) {
        final Intent intent = new Intent(action);

        if (UUID_HEART_RATE_MEASUREMENT.equals(characteristic.getUuid())) {
            int flag = characteristic.getProperties();
            int format = -1;
            if ((flag &amp; 0x01) != 0) {
                format = BluetoothGattCharacteristic.FORMAT_UINT16;
                Log.d(TAG, ""Heart rate format UINT16."");
            } else {
                format = BluetoothGattCharacteristic.FORMAT_UINT8;
                Log.d(TAG, ""Heart rate format UINT8."");
            }
            final int heartRate = characteristic.getIntValue(format, 1);
            Log.d(TAG, String.format(""Received heart rate: %d"", heartRate));
            intent.putExtra(EXTRA_DATA, String.valueOf(heartRate));
        } else {
            // For all other profiles, writes the data formatted in HEX.
            final byte[] data = characteristic.getValue();
            if (data != null &amp;&amp; data.length &gt; 0) {
                final StringBuilder stringBuilder = new StringBuilder(data.length);
                for(byte byteChar : data)
                    stringBuilder.append(String.format(""%02X "", byteChar));
                intent.putExtra(EXTRA_DATA, new String(data) + ""\n"" + stringBuilder.toString());
            }
        }
        sendBroadcast(intent);
    }

    public class LocalBinder extends Binder {
        BluetoothLeService getService() {
            return BluetoothLeService.this;
        }
    }

    @Override
    public IBinder onBind(Intent intent) {
        return mBinder;
    }

    @Override
    public boolean onUnbind(Intent intent) {
        close();
        return super.onUnbind(intent);
    }

    private final IBinder mBinder = new LocalBinder();

    public boolean initialize() {
        if (mBluetoothManager == null) {
            mBluetoothManager = (BluetoothManager) getSystemService(Context.BLUETOOTH_SERVICE);
            if (mBluetoothManager == null) {
                Log.e(TAG, ""Unable to initialize BluetoothManager."");
                return false;
            }
        }

        mBluetoothAdapter = mBluetoothManager.getAdapter();
        if (mBluetoothAdapter == null) {
            Log.e(TAG, ""Unable to obtain a BluetoothAdapter."");
            return false;
        }

        return true;
    }

    public boolean connect(final String address) {
        if (mBluetoothAdapter == null || address == null) {
            Log.w(TAG, ""BluetoothAdapter not initialized or unspecified address."");
            return false;
        }

        // Previously connected device.  Try to reconnect.
        if (mBluetoothDeviceAddress != null &amp;&amp; address.equals(mBluetoothDeviceAddress)
                &amp;&amp; mBluetoothGatt != null) {
            Log.d(TAG, ""Trying to use an existing mBluetoothGatt for connection."");
            if (mBluetoothGatt.connect()) {
                mConnectionState = STATE_CONNECTING;
                return true;
            } else {
                return false;
            }
        }

        final BluetoothDevice device = mBluetoothAdapter.getRemoteDevice(address);
        if (device == null) {
            Log.w(TAG, ""Device not found.  Unable to connect."");
            return false;
        }
        // We want to directly connect to the device, so we are setting the autoConnect
        // parameter to false.
        mBluetoothGatt = device.connectGatt(this, false, mGattCallback);
        Log.d(TAG, ""Trying to create a new connection."");
        mBluetoothDeviceAddress = address;
        mConnectionState = STATE_CONNECTING;
        return true;
    }

   public void disconnect() {
        if (mBluetoothAdapter == null || mBluetoothGatt == null) {
            Log.w(TAG, ""BluetoothAdapter not initialized"");
            return;
        }
        mBluetoothGatt.disconnect();
    }

    public void close() {
        if (mBluetoothGatt == null) {
            return;
        }
        mBluetoothGatt.close();
        mBluetoothGatt = null;
    }

    public void readCharacteristic(BluetoothGattCharacteristic characteristic) {
        if (mBluetoothAdapter == null || mBluetoothGatt == null) {
            Log.w(TAG, ""BluetoothAdapter not initialized"");
            return;
        }
        mBluetoothGatt.readCharacteristic(characteristic);
    }

    public void setCharacteristicNotification(BluetoothGattCharacteristic characteristic,
                                              boolean enabled) {
        if (mBluetoothAdapter == null || mBluetoothGatt == null) {
            Log.w(TAG, ""BluetoothAdapter not initialized"");
            return;
        }
        mBluetoothGatt.setCharacteristicNotification(characteristic, enabled);

        // This is specific to Heart Rate Measurement.
        if (UUID_HEART_RATE_MEASUREMENT.equals(characteristic.getUuid())) {
            BluetoothGattDescriptor descriptor = characteristic.getDescriptor(
                    UUID.fromString(SampleGattAttributes.CLIENT_CHARACTERISTIC_CONFIG));
            descriptor.setValue(BluetoothGattDescriptor.ENABLE_NOTIFICATION_VALUE);
            mBluetoothGatt.writeDescriptor(descriptor);
        }
    }

    public List&lt;BluetoothGattService&gt; getSupportedGattServices() {
        if (mBluetoothGatt == null) return null;

        return mBluetoothGatt.getServices();
    }
}
</code></pre>

<p><strong>DeviceScanActivity.java:</strong></p>

<pre><code>public class DeviceScanActivity extends ListActivity {
    ......

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        getActionBar().setTitle(R.string.title_devices);
        mHandler = new Handler();


        if (!getPackageManager().hasSystemFeature(PackageManager.FEATURE_BLUETOOTH_LE)) {
            Toast.makeText(this, R.string.ble_not_supported, Toast.LENGTH_SHORT).show();
            finish();
        }

        final BluetoothManager bluetoothManager =
                (BluetoothManager) getSystemService(Context.BLUETOOTH_SERVICE);
        mBluetoothAdapter = bluetoothManager.getAdapter();

        if (mBluetoothAdapter == null) {
            Toast.makeText(this, R.string.error_bluetooth_not_supported, Toast.LENGTH_SHORT).show();
            finish();
            return;
        }
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        getMenuInflater().inflate(R.menu.main, menu);
        if (!mScanning) {
            menu.findItem(R.id.menu_stop).setVisible(false);
            menu.findItem(R.id.menu_scan).setVisible(true);
            menu.findItem(R.id.menu_refresh).setActionView(null);
        } else {
            menu.findItem(R.id.menu_stop).setVisible(true);
            menu.findItem(R.id.menu_scan).setVisible(false);
            menu.findItem(R.id.menu_refresh).setActionView(
                    R.layout.actionbar_indeterminate_progress);
        }
        return true;
    }

    @Override
    public boolean onOptionsItemSelected(MenuItem item) {
        switch (item.getItemId()) {
            case R.id.menu_scan:
                mLeDeviceListAdapter.clear();
                scanLeDevice(true);
                break;
            case R.id.menu_stop:
                scanLeDevice(false);
                break;
        }
        return true;
    }

    @Override
    protected void onResume() {
        super.onResume();
        if (!mBluetoothAdapter.isEnabled()) {
            if (!mBluetoothAdapter.isEnabled()) {
                Intent enableBtIntent = new Intent(BluetoothAdapter.ACTION_REQUEST_ENABLE);
                startActivityForResult(enableBtIntent, REQUEST_ENABLE_BT);
            }
        }

        // Initializes list view adapter.
        mLeDeviceListAdapter = new LeDeviceListAdapter();
        setListAdapter(mLeDeviceListAdapter);
        scanLeDevice(true);
    }

    @Override
    protected void onActivityResult(int requestCode, int resultCode, Intent data) {
        if (requestCode == REQUEST_ENABLE_BT &amp;&amp; resultCode == Activity.RESULT_CANCELED) {
            finish();
            return;
        }
        super.onActivityResult(requestCode, resultCode, data);
    }

    @Override
    protected void onPause() {
        super.onPause();
        scanLeDevice(false);
        mLeDeviceListAdapter.clear();
    }

    @Override
    protected void onListItemClick(ListView l, View v, int position, long id) {
        ....
        startActivity(intent);
    }

    private void scanLeDevice(final boolean enable) {
        if (enable) {
            mHandler.postDelayed(new Runnable() {
                @Override
                public void run() {
                    mScanning = false;
                    mBluetoothAdapter.stopLeScan(mLeScanCallback);
                    invalidateOptionsMenu();
                }
            }, SCAN_PERIOD);

            mScanning = true;
            mBluetoothAdapter.startLeScan(mLeScanCallback);
        } else {
            mScanning = false;
            mBluetoothAdapter.stopLeScan(mLeScanCallback);
        }
        invalidateOptionsMenu();
    }

    private class LeDeviceListAdapter extends BaseAdapter {
        private ArrayList&lt;BluetoothDevice&gt; mLeDevices;
        private LayoutInflater mInflator;

        public LeDeviceListAdapter() {
            super();
            mLeDevices = new ArrayList&lt;BluetoothDevice&gt;();
            mInflator = DeviceScanActivity.this.getLayoutInflater();
        }

        public void addDevice(BluetoothDevice device) {
            if(!mLeDevices.contains(device)) {
                mLeDevices.add(device);
            }
        }

        public BluetoothDevice getDevice(int position) {
            return mLeDevices.get(position);
        }

        public void clear() {
            mLeDevices.clear();
        }

        @Override
        public int getCount() {
            return mLeDevices.size();
        }

        @Override
        public Object getItem(int i) {
            return mLeDevices.get(i);
        }

        @Override
        public long getItemId(int i) {
            return i;
        }

        @Override
        public View getView(int i, View view, ViewGroup viewGroup) {
            ViewHolder viewHolder;
            // General ListView optimization code.
            if (view == null) {
                view = mInflator.inflate(R.layout.listitem_device, null);
                viewHolder = new ViewHolder();
                viewHolder.deviceAddress = (TextView) view.findViewById(R.id.device_address);
                viewHolder.deviceName = (TextView) view.findViewById(R.id.device_name);
                view.setTag(viewHolder);
            } else {
                viewHolder = (ViewHolder) view.getTag();
            }

            BluetoothDevice device = mLeDevices.get(i);
            final String deviceName = device.getName();
            if (deviceName != null &amp;&amp; deviceName.length() &gt; 0)
                viewHolder.deviceName.setText(deviceName);
            else
                viewHolder.deviceName.setText(R.string.unknown_device);
            viewHolder.deviceAddress.setText(device.getAddress());

            return view;
        }
    }

    // Device scan callback.
    private BluetoothAdapter.LeScanCallback mLeScanCallback =
            new BluetoothAdapter.LeScanCallback() {

        @Override
        public void onLeScan(final BluetoothDevice device, int rssi, byte[] scanRecord) {
            runOnUiThread(new Runnable() {
                @Override
                public void run() {
                    mLeDeviceListAdapter.addDevice(device);
                    mLeDeviceListAdapter.notifyDataSetChanged();
                }
            });
        }
    };
.....
}
</code></pre>

<p><strong>DeviceControlActivity.java:</strong></p>

<pre><code>    public class DeviceControlActivity extends Activity {
    ........

    private final ServiceConnection mServiceConnection = new ServiceConnection() {

        @Override
        public void onServiceConnected(ComponentName componentName, IBinder service) {
            mBluetoothLeService = ((BluetoothLeService.LocalBinder) service).getService();
            if (!mBluetoothLeService.initialize()) {
                Log.e(TAG, ""Unable to initialize Bluetooth"");
                finish();
            }

            mBluetoothLeService.connect(mDeviceAddress);
        }

        @Override
        public void onServiceDisconnected(ComponentName componentName) {
            mBluetoothLeService = null;
        }
    };

   private final BroadcastReceiver mGattUpdateReceiver = new BroadcastReceiver() {
        @Override
        public void onReceive(Context context, Intent intent) {
            final String action = intent.getAction();
            if (BluetoothLeService.ACTION_GATT_CONNECTED.equals(action)) {
                mConnected = true;
                updateConnectionState(R.string.connected);
                invalidateOptionsMenu();
            } else if (BluetoothLeService.ACTION_GATT_DISCONNECTED.equals(action)) {
                mConnected = false;
                updateConnectionState(R.string.disconnected);
                invalidateOptionsMenu();
                clearUI();
            } else if (BluetoothLeService.ACTION_GATT_SERVICES_DISCOVERED.equals(action)) {
                // Show all the supported services and characteristics on the user interface.
                displayGattServices(mBluetoothLeService.getSupportedGattServices());
            } else if (BluetoothLeService.ACTION_DATA_AVAILABLE.equals(action)) {
                displayData(intent.getStringExtra(BluetoothLeService.EXTRA_DATA));
            }
        }
    };

    private final ExpandableListView.OnChildClickListener servicesListClickListner =
            new ExpandableListView.OnChildClickListener() {
                @Override
                public boolean onChildClick(ExpandableListView parent, View v, int groupPosition,
                                            int childPosition, long id) {
                    if (mGattCharacteristics != null) {
                        final BluetoothGattCharacteristic characteristic =
                                mGattCharacteristics.get(groupPosition).get(childPosition);
                        final int charaProp = characteristic.getProperties();
                        if ((charaProp | BluetoothGattCharacteristic.PROPERTY_READ) &gt; 0) {
                            // If there is an active notification on a characteristic, clear
                            // it first so it doesn't update the data field on the user interface.
                            if (mNotifyCharacteristic != null) {
                                mBluetoothLeService.setCharacteristicNotification(
                                        mNotifyCharacteristic, false);
                                mNotifyCharacteristic = null;
                            }
                            mBluetoothLeService.readCharacteristic(characteristic);
                        }
                        if ((charaProp | BluetoothGattCharacteristic.PROPERTY_NOTIFY) &gt; 0) {
                            mNotifyCharacteristic = characteristic;
                            mBluetoothLeService.setCharacteristicNotification(
                                    characteristic, true);
                        }
                        return true;
                    }
                    return false;
                }
    };

    private void clearUI() {
        mGattServicesList.setAdapter((SimpleExpandableListAdapter) null);
        mDataField.setText(R.string.no_data);
    }

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.gatt_services_characteristics);

        final Intent intent = getIntent();
        mDeviceName = intent.getStringExtra(EXTRAS_DEVICE_NAME);
        mDeviceAddress = intent.getStringExtra(EXTRAS_DEVICE_ADDRESS);

        ((TextView) findViewById(R.id.device_address)).setText(mDeviceAddress);
        mGattServicesList = (ExpandableListView) findViewById(R.id.gatt_services_list);
        mGattServicesList.setOnChildClickListener(servicesListClickListner);
        mConnectionState = (TextView) findViewById(R.id.connection_state);
        mDataField = (TextView) findViewById(R.id.data_value);

        getActionBar().setTitle(mDeviceName);
        getActionBar().setDisplayHomeAsUpEnabled(true);
        Intent gattServiceIntent = new Intent(this, BluetoothLeService.class);
        bindService(gattServiceIntent, mServiceConnection, BIND_AUTO_CREATE);
    }

    @Override
    protected void onResume() {
        super.onResume();
        registerReceiver(mGattUpdateReceiver, makeGattUpdateIntentFilter());
        if (mBluetoothLeService != null) {
            final boolean result = mBluetoothLeService.connect(mDeviceAddress);
            Log.d(TAG, ""Connect request result="" + result);
        }
    }

    @Override
    protected void onPause() {
        super.onPause();
        unregisterReceiver(mGattUpdateReceiver);
    }

    @Override
    protected void onDestroy() {
        super.onDestroy();
        unbindService(mServiceConnection);
        mBluetoothLeService = null;
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        getMenuInflater().inflate(R.menu.gatt_services, menu);
        if (mConnected) {
            menu.findItem(R.id.menu_connect).setVisible(false);
            menu.findItem(R.id.menu_disconnect).setVisible(true);
        } else {
            menu.findItem(R.id.menu_connect).setVisible(true);
            menu.findItem(R.id.menu_disconnect).setVisible(false);
        }
        return true;
    }

    @Override
    public boolean onOptionsItemSelected(MenuItem item) {
        switch(item.getItemId()) {
            case R.id.menu_connect:
                mBluetoothLeService.connect(mDeviceAddress);
                return true;
            case R.id.menu_disconnect:
                mBluetoothLeService.disconnect();
                return true;
            case android.R.id.home:
                onBackPressed();
                return true;
        }
        return super.onOptionsItemSelected(item);
    }

    private void updateConnectionState(final int resourceId) {
        runOnUiThread(new Runnable() {
            @Override
            public void run() {
                mConnectionState.setText(resourceId);
            }
        });
    }

    private void displayData(String data) {
        if (data != null) {
            mDataField.setText(data);
        }
    }

    private void displayGattServices(List&lt;BluetoothGattService&gt; gattServices) {
        if (gattServices == null) return;
        String uuid = null;
        String unknownServiceString = getResources().getString(R.string.unknown_service);
        String unknownCharaString = getResources().getString(R.string.unknown_characteristic);
        ArrayList&lt;HashMap&lt;String, String&gt;&gt; gattServiceData = new ArrayList&lt;HashMap&lt;String, String&gt;&gt;();
        ArrayList&lt;ArrayList&lt;HashMap&lt;String, String&gt;&gt;&gt; gattCharacteristicData
                = new ArrayList&lt;ArrayList&lt;HashMap&lt;String, String&gt;&gt;&gt;();
        mGattCharacteristics = new ArrayList&lt;ArrayList&lt;BluetoothGattCharacteristic&gt;&gt;();

        // Loops through available GATT Services.
        for (BluetoothGattService gattService : gattServices) {
            HashMap&lt;String, String&gt; currentServiceData = new HashMap&lt;String, String&gt;();
            uuid = gattService.getUuid().toString();
            currentServiceData.put(
                    LIST_NAME, SampleGattAttributes.lookup(uuid, unknownServiceString));
            currentServiceData.put(LIST_UUID, uuid);
            gattServiceData.add(currentServiceData);

            ArrayList&lt;HashMap&lt;String, String&gt;&gt; gattCharacteristicGroupData =
                    new ArrayList&lt;HashMap&lt;String, String&gt;&gt;();
            List&lt;BluetoothGattCharacteristic&gt; gattCharacteristics =
                    gattService.getCharacteristics();
            ArrayList&lt;BluetoothGattCharacteristic&gt; charas =
                    new ArrayList&lt;BluetoothGattCharacteristic&gt;();

            // Loops through available Characteristics.
            for (BluetoothGattCharacteristic gattCharacteristic : gattCharacteristics) {
                charas.add(gattCharacteristic);
                HashMap&lt;String, String&gt; currentCharaData = new HashMap&lt;String, String&gt;();
                uuid = gattCharacteristic.getUuid().toString();
                currentCharaData.put(
                        LIST_NAME, SampleGattAttributes.lookup(uuid, unknownCharaString));
                currentCharaData.put(LIST_UUID, uuid);
                gattCharacteristicGroupData.add(currentCharaData);
            }
            mGattCharacteristics.add(charas);
            gattCharacteristicData.add(gattCharacteristicGroupData);
        }

        SimpleExpandableListAdapter gattServiceAdapter = new SimpleExpandableListAdapter(
                this,
                gattServiceData,
                android.R.layout.simple_expandable_list_item_2,
                new String[] {LIST_NAME, LIST_UUID},
                new int[] { android.R.id.text1, android.R.id.text2 },
                gattCharacteristicData,
                android.R.layout.simple_expandable_list_item_2,
                new String[] {LIST_NAME, LIST_UUID},
                new int[] { android.R.id.text1, android.R.id.text2 }
        );
        mGattServicesList.setAdapter(gattServiceAdapter);
    }

    private static IntentFilter makeGattUpdateIntentFilter() {
        final IntentFilter intentFilter = new IntentFilter();
        intentFilter.addAction(BluetoothLeService.ACTION_GATT_CONNECTED);
        intentFilter.addAction(BluetoothLeService.ACTION_GATT_DISCONNECTED);
        intentFilter.addAction(BluetoothLeService.ACTION_GATT_SERVICES_DISCOVERED);
        intentFilter.addAction(BluetoothLeService.ACTION_DATA_AVAILABLE);
        return intentFilter;
    }
}
</code></pre>

<p>I am using <code>Google's</code> official <a href=""https://github.com/googlesamples/android-BluetoothLeGatt"" rel=""nofollow noreferrer"">BluetoothLeGatt</a> example</p>
",4675078,,4675078,,2015-07-16 12:23:22,2016-04-28 4:23:13,BluetoothLE BluetoothAdapterï¹• startLeScan(): null,<android><bluetooth><bluetooth-lowenergy>,1,1,,,
Android,31640783,1,,,,,,7/26/2015 19:00:46,,2,2254,"<p>I am building an android application that shows autocomplete feature and fetches autocomplete predictions in google maps using - GeoDataApi.getAutocompletePredictions. I followed this tutorial - <a href=""https://github.com/googlesamples/android-play-places/blob/master/PlaceComplete/Application/src/main/java/com/example/google/playservices/placecomplete/PlaceAutocompleteAdapter.java"" rel=""nofollow"">https://github.com/googlesamples/android-play-places/blob/master/PlaceComplete/Application/src/main/java/com/example/google/playservices/placecomplete/PlaceAutocompleteAdapter.java</a> </p>

<p>But somehow this is not working fine for me.</p>

<p>My class is this - </p>

<pre><code>public class GooglePlacesAutoCompleteAdapter extends ArrayAdapter implements Filterable {

    private ArrayList&lt;PlaceAutocomplete&gt; mResultList;
    GoogleApiClient mGoogleApiClient;
    private LatLngBounds mBounds;
    private AutocompleteFilter mPlaceFilter;
    int radius = 500;

    public GooglePlacesAutoCompleteAdapter(Context context, int textViewResourceId, GoogleApiClient googleApiClient,
                                           Location lastLocation, AutocompleteFilter filter) {
        super(context, textViewResourceId);
        LatLng currentLatLng = new LatLng(lastLocation.getLatitude(), lastLocation.getLongitude());
        mBounds = Utility.boundsWithCenterAndLatLngDistance(currentLatLng, 500, 500);
        mGoogleApiClient = googleApiClient;
        mPlaceFilter = filter;
    }

    @Override
    public int getCount() {
        return mResultList.size();
    }

    @Override
    public PlaceAutocomplete getItem(int index) {
        return mResultList.get(index);
    }

    @Override
    public android.widget.Filter getFilter() {
        Filter filter = new Filter() {
            @Override
            public FilterResults performFiltering(CharSequence constraint) {
                FilterResults filterResults = new FilterResults();
                if (constraint != null &amp;&amp; constraint.length() &gt; 3 &amp;&amp; constraint.length()%3 == 1) {
                    // Retrieve the autocomplete results.
                    mResultList = autocomplete(constraint.toString());

                    // Assign the data to the FilterResults
                    filterResults.values = mResultList;
                    filterResults.count = mResultList.size();
                }
                return filterResults;
            }

            @Override
            public void publishResults(CharSequence constraint, FilterResults results) {
                if (results != null &amp;&amp; results.count &gt; 0) {
                    notifyDataSetChanged();
                } else {
                    notifyDataSetInvalidated();
                }
            }
        };
        return filter;
    }


    public ArrayList&lt;PlaceAutocomplete&gt; autocomplete(String input) {

        if (mGoogleApiClient.isConnected()) {

            // Submit the query to the autocomplete API and retrieve a PendingResult that will
            // contain the results when the query completes.
            PendingResult results = Places.GeoDataApi.getAutocompletePredictions(mGoogleApiClient, input.toString(),
                    mBounds, mPlaceFilter);

            // This method should have been called off the main UI thread. Block and wait for at most 60s
            // for a result from the API.

            AutocompletePredictionBuffer autocompletePredictions = (AutocompletePredictionBuffer)results.await(60, TimeUnit.SECONDS);

            // Confirm that the query completed successfully, otherwise return null
            final Status status = autocompletePredictions.getStatus();
            if (!status.isSuccess()) {
                //Toast.makeText(getContext(), ""Error contacting API: "" + status.toString(),Toast.LENGTH_SHORT).show();
                //Log.e(TAG, ""Error getting autocomplete prediction API call: "" + status.toString());
                autocompletePredictions.release();
                return null;
            }

            // Copy the results into our own data structure, because we can't hold onto the buffer.
            // AutocompletePrediction objects encapsulate the API response (place ID and description).

            Iterator&lt;AutocompletePrediction&gt; iterator = autocompletePredictions.iterator();
            ArrayList resultList = new ArrayList&lt;&gt;(autocompletePredictions.getCount());
            while (iterator.hasNext()) {
                AutocompletePrediction prediction = iterator.next();
                // Get the details of this prediction and copy it into a new PlaceAutocomplete object.
                resultList.add(new PlaceAutocomplete(prediction.getPlaceId(), prediction.getDescription()));
            }

            // Release the buffer now that all data has been copied.
            autocompletePredictions.release();

            return resultList;
        }
        //Log.e(TAG, ""Google API client is not connected for autocomplete query."");
        return null;

    }

    class PlaceAutocomplete {
        public CharSequence placeId;
        public CharSequence description;

        PlaceAutocomplete(CharSequence placeId, CharSequence description) {
            this.placeId = placeId;
            this.description = description;
        }

        @Override
        public String toString() {
            return description.toString();
        }
    }
}
</code></pre>

<p>The line on which GeoDataApi.getAutocompletePredictions is called, goes into an internal classes called - Filter.java, Log.java, handler.java and then Looper.java and loops there indefinetly on line 121 of Looper.java (I am sure studio sdk will show the code for Looper.java). </p>

<p><strong>It is not even throwing an error, or going to the next line, it just does not work. Plus, I am not able to see the stack trace of an error.</strong></p>

<p>This is the code snippet which is calling this -</p>

<pre><code>if (mLastLocation != null) {
           GooglePlacesAutoCompleteAdapter placesAdapter = new GooglePlacesAutoCompleteAdapter(this, R.layout.item_list, mGoogleApiClient, mLastLocation, null);
            autoCompView.setAdapter(placesAdapter);
            autoCompView.setOnItemClickListener(this);
        }
</code></pre>

<p>Can someone please tell me what I am doing wrong here? Please any help will be greatly appreciated. I need to get this working as soon as I could.</p>

<p>PS - I am passing mPlaceFilter as null here.</p>
",5012866,,5012866,,2015-07-27 14:23:52,2017-03-28 14:31:07,GeoDataApi.getAutocompletePredictions not working,<google-maps><google-maps-android-api-2><google-places-api>,1,0,,,
Android,31734248,1,,,,,,7/30/2015 21:19:26,,1,230,"<p>In the <a href=""https://github.com/googlesamples/android-UniversalMusicPlayer"" rel=""nofollow"">Android Universal Music Player</a>, there is an icon which is displayed for a list. However, that icon is not shown. The <a href=""https://github.com/googlesamples/android-UniversalMusicPlayer/blob/b729def3679cac2d66136e8fdc9237d01bfb485c/mobile/src/main/java/com/example/android/uamp/MusicService.java#L344"" rel=""nofollow"">original source code</a>, set the icon as follow: </p>

<pre><code>        if (MEDIA_ID_ROOT.equals(parentMediaId)) {
            LogHelper.d(TAG, ""OnLoadChildren.ROOT"");
            mediaItems.add(new MediaBrowser.MediaItem(
                    new MediaDescription.Builder()
                        .setMediaId(MEDIA_ID_MUSICS_BY_GENRE)
                        .setTitle(getString(R.string.browse_genres))
                        .setIconUri(Uri.parse(""android.resource://"" +
                                ""com.example.android.uamp/drawable/ic_by_genre""))
                        .setSubtitle(getString(R.string.browse_genre_subtitle))
                        .build(), MediaBrowser.MediaItem.FLAG_BROWSABLE
            ));
}
</code></pre>

<p>I thought there might be issue with the way the uri is handled, so I changed it to the following: </p>

<pre><code> .setIconUri(Uri.parse(""android.resource://"" +
                                getPackageName() + ""/"" + R.drawable.ic_by_genre))
</code></pre>

<p>The icon exist in the resource file, however it is not displayed and instead of icon it is simply blank. </p>

<p>Did anybody face similar issue when they tried this sample project? and how to fix it?</p>
",4576720,,4576720,,2015-07-30 21:27:45,2015-07-30 21:54:45,Android Universal Music Player ic_by_genre is not displayed,<java><android><android-layout><android-resources>,1,1,,,
Android,32063524,1,,,,,,8/18/2015 4:27:06,,7,4011,"<p>I am working with <a href=""https://github.com/googlesamples/android-Camera2Basic"" rel=""noreferrer"">camera2Basic</a> now and trying to get each frame data to do some image processing. I am using camera2 API in Android5.0, everything is fine when only doing the camera preview and it is fluid. But the preview stuck when I use the <code>ImageReader.OnImageAvailableListener</code> callback to get each frame data, this cause a bad User Experience. 
The following is my related codes:</p>

<p>This is the setup for camera and ImageReader, I set the format of image is YUV_420_888</p>

<pre><code>public&lt;T&gt; Size setUpCameraOutputs(CameraManager cameraManager,Class&lt;T&gt; kClass, int width, int height) {
    boolean flagSuccess = true;
    try {
        for (String cameraId : cameraManager.getCameraIdList()) {
            CameraCharacteristics characteristics = cameraManager.getCameraCharacteristics(cameraId);
            // choose the front or back camera
            if (FLAG_CAMERA.BACK_CAMERA == mChosenCamera &amp;&amp;        
                    CameraCharacteristics.LENS_FACING_BACK != characteristics.get(CameraCharacteristics.LENS_FACING)) {
                continue;
            }
            if (FLAG_CAMERA.FRONT_CAMERA == mChosenCamera &amp;&amp;  
                    CameraCharacteristics.LENS_FACING_FRONT != characteristics.get(CameraCharacteristics.LENS_FACING)) {
                continue;
            }
            StreamConfigurationMap map = characteristics.get(
                    CameraCharacteristics.SCALER_STREAM_CONFIGURATION_MAP);

            Size largestSize = Collections.max(
                    Arrays.asList(map.getOutputSizes(ImageFormat.YUV_420_888)),
                    new CompareSizesByArea());

            mImageReader = ImageReader.newInstance(largestSize.getWidth(), largestSize.getHeight(),
                    ImageFormat.YUV_420_888, 3);

            mImageReader.setOnImageAvailableListener(mOnImageAvailableListener, mBackgroundHandler);
            ...
            mCameraId = cameraId;
       }
    } catch (CameraAccessException e) {
        e.printStackTrace();
    } catch (NullPointerException e) {

    }
    ......
}
</code></pre>

<p>When the camera opened successfully, I Create a CameraCaptureSession for camera preview</p>

<pre><code>private void createCameraPreviewSession() {
    if (null == mTexture) {
        return;
    }

    // We configure the size of default buffer to be the size of camera preview we want.
    mTexture.setDefaultBufferSize(mPreviewSize.getWidth(), mPreviewSize.getHeight());

    // This is the output Surface we need to start preview
    Surface surface = new Surface(mTexture);

    // We set up a CaptureRequest.Builder with the output Surface.
    try {
        mPreviewRequestBuilder =
                mCameraDevice.createCaptureRequest(CameraDevice.TEMPLATE_PREVIEW);
        mPreviewRequestBuilder.addTarget(mImageReader.getSurface());
        mPreviewRequestBuilder.addTarget(surface);

        // We create a CameraCaptureSession for camera preview
        mCameraDevice.createCaptureSession(Arrays.asList(surface, mImageReader.getSurface()),
                new CameraCaptureSession.StateCallback() {

                    @Override
                    public void onConfigured(CameraCaptureSession session) {
                        if (null == mCameraDevice) {
                            return;
                        }

                        // when the session is ready, we start displaying the preview
                        mCaptureSession = session;

                        // Finally, we start displaying the camera preview
                        mPreviewRequest = mPreviewRequestBuilder.build();
                        try {
                            mCaptureSession.setRepeatingRequest(mPreviewRequest,
                                    mCaptureCallback, mBackgroundHandler);
                        } catch (CameraAccessException e) {
                            e.printStackTrace();
                        }
                    }

                    @Override
                    public void onConfigureFailed(CameraCaptureSession session) {

                    }
                }, null);
    } catch (CameraAccessException e) {
        e.printStackTrace();
    }
}
</code></pre>

<p>The last is the <code>ImageReader.OnImageAvailableListener</code> callback</p>

<pre><code>private final ImageReader.OnImageAvailableListener mOnImageAvailableListener = new ImageReader.OnImageAvailableListener() {
            @Override
            public void onImageAvailable(ImageReader reader) {
                Log.d(TAG, ""The onImageAvailable thread id: "" + Thread.currentThread().getId());
                Image readImage = reader.acquireLatestImage();
                readImage.close();
            }
        };
</code></pre>

<p>Maybe I do the wrong setup but I try several times and it doesn't work. Maybe there is another way to get frame data rather than ImageReader but I don't know.
Anybody knows how to get each frame data in realtime?</p>
",5237329,,5237329,,2015-08-18 4:39:35,2017-01-30 14:25:00,How to get each frame data using camera2 API in Android5.0 in realtime,<android><android-camera>,2,8,3,,
Android,32105132,1,,,,,,8/19/2015 20:32:13,,1,1246,"<p>I'm testing the Barcode API from <a href=""https://github.com/googlesamples/android-vision"" rel=""nofollow"">android-vision</a> repo (multi-tracker app) . But I can only scan the QR Codes, I would like to scan also 1D barcodes like EAN 13. How can i do this work well ??</p>

<p>Ps.: Also, I have tried to filter only scan EAN 13, but also does not works well.</p>

<p>Thanks,
   Marcelo Alves</p>
",2578504,,,,,2015-12-22 16:39:09,Android Google Play Service Barcode scanner does not works on 1D (EAN13) barcodes,<android><google-play-services><google-vision>,1,1,,,
Android,32105785,1,,,,,,8/19/2015 21:15:14,,6,8484,"<p>I feel incredibly dumb asking this, but I've downloaded the sample code of the Android Mobile Vision API available here: <a href=""https://github.com/googlesamples/android-vision"" rel=""noreferrer"">https://github.com/googlesamples/android-vision</a>.</p>

<p>I'm trying to import this code into Android Studio so that I am able to just run the sample apps, but no matter how I import (Import Existing Android Studio Project, Import Non-Android Studio Project, Open Project), I am not able to get it imported in a way where I can just compile and hit play to run the app.</p>

<p>Since this is an official sample code from Android, I am <em>sure</em> it shouldn't be this complicated. What am I missing?</p>
",832442,,5231007,,2015-08-21 20:25:14,2015-08-25 20:11:37,Trying to import code from GitHub into Android Studio,<android><android-studio><google-vision><android-vision>,2,7,,,
Android,32134299,1,,,,,,8/21/2015 7:05:07,,39,16587,"<p>Say you have a method like this:</p>

<pre><code>public boolean saveFile (Url url, String content) {

   // save the file, this can be done a lot of different ways, but
   // basically the point is...

   return save_was_successful;
}
</code></pre>

<p>Throughout your app, if you want to save a file to external storage, you do something like...</p>

<pre><code>if (saveFile(external_storage_url, ""this is a test"")) {
   // yay, success!
} else { // notify the user something was wrong or handle the error }
</code></pre>

<p>This is a simplified example, so don't get on my case about blocking the UI, handling exceptions properly, etc.  If you don't like file saving, you could imagine a <code>getContact()</code> or <code>getPhoneState()</code> or whatever.  The point is it's a permission-needing operation that returns some value(s) and it's used throughout the app.</p>

<p>In Android &lt;= Lollipop, if the user had installed and agreed to granting <code>android.permission.WRITE_EXTERNAL_STORAGE</code> or whatever, all would be good.</p>

<p>But in the new Marshmallow (API 23) <a href=""https://developer.android.com/preview/features/runtime-permissions.html"">runtime permission model</a>, before you can save the file to external storage, you're supposed to (1) check if the permission has been granted.  <a href=""https://github.com/googlesamples/android-RuntimePermissions/blob/master/Application/src/main/java/com/example/android/system/runtimepermissions/MainActivity.java#L204-L208"">If not</a>, possibly (2) <a href=""https://github.com/googlesamples/android-RuntimePermissions/blob/master/Application/src/main/java/com/example/android/system/runtimepermissions/MainActivity.java#L217-L227"">show a rationale for the request</a> (if the <a href=""https://developer.android.com/reference/android/app/Activity.html#shouldShowRequestPermissionRationale(java.lang.String)"">system thinks it's a good idea</a>) with a toast or whatever and (3) ask the user to grant permission via a dialog, then basically sit back and wait for a callback...</p>

<p>(so your app sits around, waiting...)</p>

<p>(4) When the user finally responds to the dialog, the <a href=""https://github.com/googlesamples/android-RuntimePermissions/blob/master/Application/src/main/java/com/example/android/system/runtimepermissions/MainActivity.java#L263-L264"">onRequestPermissionsResult()</a> method fires off, and your code now (5) has to sift through WHICH <a href=""https://github.com/googlesamples/android-RuntimePermissions/blob/master/Application/src/main/java/com/example/android/system/runtimepermissions/MainActivity.java#L286"">permission</a> request they are actually <a href=""https://github.com/googlesamples/android-RuntimePermissions/blob/master/Application/src/main/java/com/example/android/system/runtimepermissions/MainActivity.java#L286"">responding to</a>, whether the user said yes or no (to my knowledge there's no way to handle ""no"" vs. ""no and don't ask again""), (6) figure out what they were trying to accomplish in the first place that prompted the whole ask-for-permissions process, so that the program can <em>finally</em>  (7) go ahead and do that thing.</p>

<p>To know what the user was trying to do in step (6) involves having previously passed a special <a href=""https://developer.android.com/preview/features/runtime-permissions.html#coding"">code</a> (the ""permissions request response"") which is described in the docs as an identifier of the type of <a href=""https://github.com/googlesamples/android-RuntimePermissions/blob/master/Application/src/main/java/com/example/android/system/runtimepermissions/MainActivity.java#L89"">permission request</a> (camera/contact/etc.) but seems to me more like a ""specifically, what you were trying to do when you realized you'd need to ask for permissions"" code, given that the same permission/group may be used for multiple purposes in your code, so you'd need to use this code to return execution to the appropriate place after getting the permission.</p>

<p>I could be totally misunderstanding how this is supposed to work-- so please let me know if I'm way off-- but the larger point is I'm <em>really</em> not sure how to even think about doing all of the above w/the <code>saveFile()</code> method described previously due to the asynchronous ""wait for the user to respond"" part.  The ideas I've considered are pretty hacky and certainly wrong.</p>

<p>Today's <a href=""http://androidbackstage.blogspot.com/2015/08/episode-33-permission-mission.html"">Android Developer Podcast</a> hinted that there may be a synchronous solution around the corner, and there was even talk about a magic, one-step alt-enter type of ""add a permissions request"" tool in Android Studio.  Still, how the runtime permission process might be shoved into a <code>saveFile()</code> or whatever-- I'm thinking something along the lines of :</p>

<pre><code>public boolean saveFile(Url url, String content) {
   //   this next line will check for the permission, ask the user
   //   for permission if required, maybe even handle the rationale
   //   situation
   if (!checkPermission(Manifest.permission.WRITE_EXTERNAL_STORAGE,
                        R.string.permission_storage_rationale))
       {
           return false; // or throw an exception or whatever
       } else {

   // try to save the file

   return save_was_successful;

   }
}
</code></pre>

<p>So the above <code>checkPermission()</code> would fail if the user didn't have and also refused to grant the permission.  Maybe one could use a loop around <code>checkPermission()</code> to try asking up to 3 times or something, or better would be if a sane dont-be-annoying-policy was handled by the method.</p>

<p>Is such a thing possible?  Desirable?  Would any such solution block the UI thread?  From the podcast it sounded like Google <em>may</em> have a solution like this coming 'round the corner, but I wanted to get thoughts on whether there was something-- a convenience class, a pattern, something-- that doesn't involve everyone having to refactor all permission-requiring operations, which I must assume could get pretty messy.</p>

<p>Sorry for the long-winded question, but I wanted to be as complete as possible.  I'll take my answer off the air.  Thanks!</p>

<hr>

<p><strong><em>Update</em></strong>:  Here is the transcript from the podcast mentioned above.</p>

<p>Listen at about <a href=""http://androidbackstage.blogspot.com/2015/08/episode-33-permission-mission.html"">41:20</a>.  In this discussion:</p>

<p>Rough transcript:</p>

<p>Tor Norbye (Tools team):  ""<em>So it doesn't seem like it should be a lot of work for developers.  But I understand part of the problem is that these are not synchronous calls, right?.  So what you have to- actually change the way your activity is written to have a callback-- so it's really kinda like a state machine where... for this state, you-</em>""</p>

<p>Poiesz (product manager): ""<em>Ah- I thought- there was a- there might be an option for synchronous response--</em>""</p>

<p>Norbye: ""<em>Oh.  that would make things--</em>""</p>

<p>Poiesz: ""<em>I can talk with folks internally.  I recall a discussion about synchronous- but we can find out.</em>""</p>

<p>Norbye: ""<em>Yeah. In fact we should probably make it into the tools.  Where you have an easy refactoring...</em>""</p>

<p>Then he talks about using annotations in the tools to determine which APIs require permissions.. (which as of now doesn't work that great IMO) and how he wants the tools someday to actually generate the required code if it finds an unchecked ""dangerous"" method call:</p>

<p>Norbye:  ""<em>...then if you're on M as well it'll say, 'hey, are you actually checking for this permission or are you catching security exceptions?', and if you're not, we'll say 'you probably need to do something for requesting the permission here.'   What I would like though is for that to have a quick fix where you can go 'CHING!' and it inserts all the right stuff for asking, but the way things were back when I looked, this required restructuring a lot of things-- adding interfaces and callbacks, and changing the flow, and that we couldn't do.  But if there's an easy synchronous mode as a temporary thing or a permanent thing, that would [be great].</em>""</p>
",3035127,,3035127,,2015-10-03 8:50:20,2017-07-24 19:04:10,Can you request permissions synchronously in Android Marshmallow (API 23)'s runtime permissions model?,<android><android-permissions><android-6.0-marshmallow>,5,9,8,,
Android,32193244,1,,,,,,8/24/2015 23:21:39,,3,1679,"<p>I have Android Studio 1.3.2, NDK r10e, gradle experimental plugin 0.2.0.  I have  cloned the <a href=""https://github.com/googlesamples/android-ndk.git"" rel=""nofollow noreferrer"">ndk samples repo</a> and carefully followed instructions for the <a href=""http://tools.android.com/tech-docs/android-ndk-preview"" rel=""nofollow noreferrer"">NDK Preview</a>, including creating a Native configuration.</p>

<p>When I select LLDB as the debugger and debug the Teapot NDK sample app (breakpoint in TeapotNativeActivity.cpp, line 393), the app runs, but breakpoint isn't hit as it should when I rotate the teapot.  Using GDB for the debugger results in the app freezing on startup.  I then have to force quit the app and press stop in the debugger window.</p>

<p>In both cases, debug controls appear (greyed out), and the variables window says, ""Connecting"", but I never see the ""Waiting for Debugger"" dialog on my device.</p>

<p>Console output using LLDB:
<a href=""https://i.stack.imgur.com/WCeue.png"" rel=""nofollow noreferrer""><img src=""https://i.stack.imgur.com/WCeue.png"" alt=""enter image description here""></a></p>

<p>Console output using GDB:
<a href=""https://i.stack.imgur.com/u9BwZ.png"" rel=""nofollow noreferrer""><img src=""https://i.stack.imgur.com/u9BwZ.png"" alt=""enter image description here""></a></p>

<p>Now, when I do the same thing from Android Studio 1.4 Preview 3, I now get the ""Waiting for Debugger"" dialog, but it hangs there.  It looks like the debugger never connects.</p>

<p>Console output Android Studio 1.4:
<a href=""https://i.stack.imgur.com/dy2ly.png"" rel=""nofollow noreferrer""><img src=""https://i.stack.imgur.com/dy2ly.png"" alt=""enter image description here""></a></p>

<p>Is it possible to debug with AS 1.3.2 or 1.4?  What do I need to do next to get it working?</p>
",3549440,,3549440,,2015-08-24 23:38:40,2015-08-28 21:32:08,Can't debug NDK samples with Android Studio 1.3.2 on Windows,<android><c++><debugging><android-studio><android-ndk>,1,2,,,
Android,32362072,1,,,,,,9/2/2015 20:01:44,,3,707,"<p>I have been using the Google Geofencing Service on Android for quite some time now and I just found out that the geofence transitions are not triggered on all devices. I've always tested with my HTC Nexus 5 and HTC Desire 320. But now I can see that the same code does not work on an Asus Zenfone 2 nor a Samsung Galaxy Tab 4.</p>

<p>Has someone successfully tested the Google Geofencing Api on a device that is not from HTC? Even the <a href=""https://github.com/googlesamples/android-play-location/tree/master/Geofencing"" rel=""nofollow"">sample project</a> is not working on these devices...</p>

<p>Note: I will not post my code, it is the same as the <a href=""https://developer.android.com/training/location/geofencing.html"" rel=""nofollow"">example from the official documentation</a>.</p>
",1084822,,4483873,,2015-09-15 15:42:20,2015-11-10 23:40:47,Why is Google Geofencing API on Android not working on all devices,<android><google-api><location><google-play-services><android-geofence>,1,0,,,
Android,32525489,1,,,,,,9/11/2015 14:09:07,,1,986,"<p>I'm having everything the same as in this sample in <a href=""https://github.com/googlesamples/android-vision/tree/master/visionSamples/multi-tracker"" rel=""nofollow noreferrer"">https://github.com/googlesamples/android-vision/tree/master/visionSamples/multi-tracker</a> except my activity layout is this:</p>

<pre><code>&lt;?xml version=""1.0"" encoding=""utf-8""?&gt;
&lt;LinearLayout xmlns:android=""http://schemas.android.com/apk/res/android""
    android:id=""@+id/topLayout""
    android:layout_width=""match_parent""
    android:layout_height=""match_parent""
    android:keepScreenOn=""true""
    android:weightSum=""100""
    android:orientation=""horizontal""&gt;

    &lt;be.citylife.communitypurchaseapp.view.camera.CameraSourcePreview
        android:id=""@+id/preview""
        android:layout_width=""0dp""
        android:layout_height=""match_parent""
        android:layout_weight=""60""&gt;

        &lt;be.citylife.communitypurchaseapp.view.camera.GraphicOverlay
            android:id=""@+id/overlay""
            android:layout_width=""match_parent""
            android:layout_height=""match_parent"" /&gt;

    &lt;/be.citylife.communitypurchaseapp.view.camera.CameraSourcePreview&gt;

    &lt;FrameLayout
        android:id=""@+id/sideContainer""
        android:layout_width=""0dp""
        android:layout_height=""match_parent""
        android:layout_weight=""40""/&gt;

&lt;/LinearLayout&gt;
</code></pre>

<p>My tablet is in landscape and I want that the cameraPreviewSource is always left and fills the whole screen in the height and then right off it I'm having a fragment that fills the rest. </p>

<p>This layout works except my previewsource doesn't fill the whole height. It has a black banner on it. Even my width is actually smaller than I want you can see this on the screenshot:</p>

<p><a href=""http://i61.tinypic.com/vctmw0.png"" rel=""nofollow noreferrer"">http://i61.tinypic.com/vctmw0.png</a></p>

<p>I played with the CameraSourcePreview with the width and height in the onLayout function but it doesn't help. I know on the preview that it does fill the screen to the bottom of the screen but on the tablet it isn't.  </p>

<p><a href=""https://i.stack.imgur.com/EnZBz.png"" rel=""nofollow noreferrer""><img src=""https://i.stack.imgur.com/EnZBz.png"" alt=""enter image description here""></a>lp.</p>

<p>Anyone an idea how to solve this? </p>

<p>EDIT: </p>

<p>I think it has something to do with this:</p>

<pre><code>  @Override
    protected void onLayout(boolean changed, int left, int top, int right, int bottom) {
        int width = 320;
        int height = 240;
        if (mCameraSource != null) {
            Size size = mCameraSource.getPreviewSize();
            if (size != null) {
                width = size.getWidth();
                height = size.getHeight();
            }
        }

        // Swap width and height sizes when in portrait, since it will be rotated 90 degrees
        if (isPortraitMode()) {
            int tmp = width;
            width = height;
            height = tmp;
        }

        final int layoutWidth = right - left;
        final int layoutHeight = bottom - top;

        // Computes height and width for potentially doing fit width.
        int childWidth = layoutWidth;
        int childHeight = (int)(((float) layoutWidth / (float) width) * height);

        // If height is too tall using fit width, does fit height instead.
        if (childHeight &gt; layoutHeight) {
            childHeight = layoutHeight;
            childWidth = (int)(((float) layoutHeight / (float) height) * width);
        }

        for (int i = 0; i &lt; getChildCount(); ++i) {
            getChildAt(i).layout(0, 0, childWidth, childHeight);
        }

        try {
            startIfReady();
        } catch (IOException e) {
            Log.e(TAG, ""Could not start camera source."", e);
        }
    }
</code></pre>

<p>That's the onlayout method off the CameraSourcePreview.</p>
",1007522,,1007522,,2015-09-11 14:24:39,2015-09-14 0:50:18,View doesn't fill the whole screen,<android>,3,1,,,
Android,32715573,1,,,,,,9/22/2015 11:23:44,,30,2306,"<p>I am using the <a href=""https://github.com/googlesamples/android-vision/tree/master/visionSamples/FaceTracker"" rel=""noreferrer"">FaceTracker</a> sample from the Android vision API. However, I am experiencing difficulty in recording videos while the overlays are drawn on them. </p>

<p>One way is to store bitmaps as images and process them using FFmpeg or Xuggler to merge them as videos, but I am wondering if there is a better solution to this problem if we can record video at runtime as the preview is projected.</p>

<p><strong>Update 1:</strong>
I updated the <a href=""https://github.com/googlesamples/android-vision/blob/master/visionSamples/FaceTracker/app/src/main/java/com/google/android/gms/samples/vision/face/facetracker/ui/camera/CameraSourcePreview.java"" rel=""noreferrer"">following</a> class with media recorder, but the recording is still not working. It is throwing the following error when I call triggerRecording() function:</p>

<p><strong>MediaRecorder: start called in an invalid state: 4</strong></p>

<p>and I have external storage permission in the Manifest file.</p>

<p><strong>Update 2:</strong></p>

<p>I have fixed the above issue in the code and moved the setupMediaRecorder() in the onSurfaceCreated callback. However, when I stop recording it throws the runtime-exception. According to the <a href=""http://developer.android.com/reference/android/media/MediaRecorder.html#stop%28%29"" rel=""noreferrer"">documentation</a> if there is no video/audio data Runtime exception will be thrown.</p>

<p>So, what am I missing here? </p>

<pre><code>public class CameraSourcePreview extends ViewGroup {
    private static final String TAG = ""CameraSourcePreview"";

    private static final SparseIntArray ORIENTATIONS = new SparseIntArray();

    static {
        ORIENTATIONS.append(Surface.ROTATION_0, 90);
        ORIENTATIONS.append(Surface.ROTATION_90, 0);
        ORIENTATIONS.append(Surface.ROTATION_180, 270);
        ORIENTATIONS.append(Surface.ROTATION_270, 180);
    }

    private MediaRecorder mMediaRecorder;
    /**
     * Whether the app is recording video now
     */
    private boolean mIsRecordingVideo;

    private Context mContext;
    private SurfaceView mSurfaceView;
    private boolean mStartRequested;
    private boolean mSurfaceAvailable;
    private CameraSource mCameraSource;

    private GraphicOverlay mOverlay;

    public CameraSourcePreview(Context context, AttributeSet attrs) {
        super(context, attrs);
        mContext = context;
        mStartRequested = false;
        mSurfaceAvailable = false;

        mSurfaceView = new SurfaceView(context);

        mSurfaceView.getHolder().addCallback(new SurfaceCallback());

        addView(mSurfaceView);

        mMediaRecorder = new MediaRecorder();
    }

    private void setUpMediaRecorder() throws IOException {
        mMediaRecorder.setPreviewDisplay(mSurfaceView.getHolder().getSurface());
        mMediaRecorder.setAudioSource(MediaRecorder.AudioSource.MIC);
        mMediaRecorder.setVideoSource(MediaRecorder.VideoSource.SURFACE);
        mMediaRecorder.setOutputFormat(MediaRecorder.OutputFormat.MPEG_4);

        mMediaRecorder.setOutputFile(Environment.getExternalStorageDirectory() + File.separator + Environment.DIRECTORY_DCIM + File.separator + System.currentTimeMillis() + "".mp4"");
        mMediaRecorder.setVideoEncodingBitRate(10000000);
        mMediaRecorder.setVideoFrameRate(30);
        mMediaRecorder.setVideoSize(480, 640);
        mMediaRecorder.setVideoEncoder(MediaRecorder.VideoEncoder.H264);
        mMediaRecorder.setAudioEncoder(MediaRecorder.AudioEncoder.AAC);
        //int rotation = mContext.getWindowManager().getDefaultDisplay().getRotation();
        //int orientation = ORIENTATIONS.get(rotation);
        mMediaRecorder.setOrientationHint(ORIENTATIONS.get(0));
        mMediaRecorder.prepare();

        mMediaRecorder.setOnErrorListener(new MediaRecorder.OnErrorListener() {
            @Override
            public void onError(MediaRecorder mr, int what, int extra) {
                Timber.d(mr.toString() + "" : what["" + what + ""]"" + "" Extras["" + extra + ""]"");
            }
        });
    }

    public void start(CameraSource cameraSource) throws IOException {
        if (cameraSource == null) {
            stop();
        }

        mCameraSource = cameraSource;

        if (mCameraSource != null) {
            mStartRequested = true;
            startIfReady();
        }
    }

    public void start(CameraSource cameraSource, GraphicOverlay overlay) throws IOException {
        mOverlay = overlay;
        start(cameraSource);
    }

    public void stop() {
        if (mCameraSource != null) {
            mCameraSource.stop();
        }
    }

    public void release() {
        if (mCameraSource != null) {
            mCameraSource.release();
            mCameraSource = null;
        }
    }

    private void startIfReady() throws IOException {
        if (mStartRequested &amp;&amp; mSurfaceAvailable) {
            mCameraSource.start(mSurfaceView.getHolder());
            if (mOverlay != null) {
                Size size = mCameraSource.getPreviewSize();
                int min = Math.min(size.getWidth(), size.getHeight());
                int max = Math.max(size.getWidth(), size.getHeight());
                if (isPortraitMode()) {
                    // Swap width and height sizes when in portrait, since it will be rotated by
                    // 90 degrees
                    mOverlay.setCameraInfo(min, max, mCameraSource.getCameraFacing());
                } else {
                    mOverlay.setCameraInfo(max, min, mCameraSource.getCameraFacing());
                }
                mOverlay.clear();
            }

            mStartRequested = false;
        }
    }

    private class SurfaceCallback implements SurfaceHolder.Callback {
        @Override
        public void surfaceCreated(SurfaceHolder surface) {
            mSurfaceAvailable = true;
            surface.setType(SurfaceHolder.SURFACE_TYPE_PUSH_BUFFERS);

            // setup the media recorder
            try {
                setUpMediaRecorder();
            } catch (IOException e) {
                e.printStackTrace();
            }

            try {
                startIfReady();
            } catch (IOException e) {
                Timber.e(TAG, ""Could not start camera source."", e);
            }
        }

        @Override
        public void surfaceDestroyed(SurfaceHolder surface) {
            mSurfaceAvailable = false;
        }

        @Override
        public void surfaceChanged(SurfaceHolder holder, int format, int width, int height) {
        }
    }

    @Override
    protected void onLayout(boolean changed, int left, int top, int right, int bottom) {
        int width = 320;
        int height = 240;
        if (mCameraSource != null) {
            Size size = mCameraSource.getPreviewSize();
            if (size != null) {
                width = size.getWidth();
                height = size.getHeight();
            }
        }

        // Swap width and height sizes when in portrait, since it will be rotated 90 degrees
        if (isPortraitMode()) {
            int tmp = width;
            width = height;
            height = tmp;
        }

        final int layoutWidth = right - left;
        final int layoutHeight = bottom - top;

        // Computes height and width for potentially doing fit width.
        int childWidth = layoutWidth;
        int childHeight = (int) (((float) layoutWidth / (float) width) * height);

        // If height is too tall using fit width, does fit height instead.
        if (childHeight &gt; layoutHeight) {
            childHeight = layoutHeight;
            childWidth = (int) (((float) layoutHeight / (float) height) * width);
        }

        for (int i = 0; i &lt; getChildCount(); ++i) {
            getChildAt(i).layout(0, 0, childWidth, childHeight);
        }

        try {
            startIfReady();
        } catch (IOException e) {
            Timber.e(TAG, ""Could not start camera source."", e);
        }
    }

    private boolean isPortraitMode() {
        int orientation = mContext.getResources().getConfiguration().orientation;
        if (orientation == Configuration.ORIENTATION_LANDSCAPE) {
            return false;
        }
        if (orientation == Configuration.ORIENTATION_PORTRAIT) {
            return true;
        }

        Timber.d(TAG, ""isPortraitMode returning false by default"");
        return false;
    }

    private void startRecordingVideo() {
        try {
            // Start recording
            mMediaRecorder.start();
            mIsRecordingVideo = true;
        } catch (IllegalStateException e) {
            e.printStackTrace();
        }
    }

    private void stopRecordingVideo() {
        // UI
        mIsRecordingVideo = false;
        // Stop recording
        mMediaRecorder.stop();
        mMediaRecorder.reset();
    }

    public void triggerRecording() {
        if (mIsRecordingVideo) {
            stopRecordingVideo();
            Timber.d(""Recording stopped"");
        } else {
            startRecordingVideo();
            Timber.d(""Recording starting"");
        }
    }
}
</code></pre>
",1053097,,4702010,,2017-12-07 11:51:59,2017-12-30 8:14:29,Media Recorder with Google Vision API,<android><android-camera><android-mediarecorder><google-vision><android-vision>,1,7,6,,
Android,32736708,1,,,,,,9/23/2015 10:09:21,,2,4172,"<p>I am presently working with a chat application where I'm suppose to use Bluetooth LE Technology in my chat application.<br>
Through my research &amp; study over it,i have gone through several links:</p>

<ol>
<li><p><a href=""https://stackoverflow.com/questions/21489386/android-bluetooth-le-chat-example"">Android Bluetooth LE Chat example</a></p>

<p>From here i got to know that serial data transfer over Bluetooth low
energy is not supported as of then(10.10.14).</p></li>
<li><p><a href=""https://github.com/onlyinamerica/blemeshchat"" rel=""nofollow noreferrer"">https://github.com/onlyinamerica/blemeshchat</a> </p>

<p>The above project i have found bit similar as of my purpose but later on it was in vain.</p></li>
<li><p>Even gone through several Bluetooth chat tutorials and got to know that the user has to pair their device for their purpose.<br>
Gone through the following tutorials:</p>

<ul>
<li><a href=""https://github.com/googlesamples/android-BluetoothChat"" rel=""nofollow noreferrer"">https://github.com/googlesamples/android-BluetoothChat</a></li>
<li><a href=""http://www.androidhive.info/2014/10/android-building-group-chat-app-using-sockets-part-1/"" rel=""nofollow noreferrer"">http://www.androidhive.info/2014/10/android-building-group-chat-app-using-sockets-part-1/</a></li>
<li><a href=""http://www.pubnub.com/blog/tutorial-how-to-build-android-group-chat-application/"" rel=""nofollow noreferrer"">http://www.pubnub.com/blog/tutorial-how-to-build-android-group-chat-application/</a></li>
<li><a href=""http://myapptemplates.com/simple-android-chat-app-parse-integration-tutorial/"" rel=""nofollow noreferrer"">http://myapptemplates.com/simple-android-chat-app-parse-integration-tutorial/</a></li>
</ul></li>
</ol>

<p>I have done loads of research on how to use BLE Technology for chatting but didn't find a good resource on how to implement it.</p>

<p>So my questions are as follows:</p>

<ol>
<li><p>Can we make a chat application using Bluetooth Low Energy similarly as of Bluetooth? Please give a verified reasons but not opinion based.</p></li>
<li><p>Can BLE chat application can chat with normal bluetooth application? Give reasons?</p></li>
<li><p>If possible please provide me some good resource for implementing chat with BLE Technology.</p></li>
</ol>
",4684069,,-1,,2017-05-23 11:46:36,2018-12-07 9:33:05,How to use Bluetooth Low Energy (BLE) in an android chat application?,<android><bluetooth><chat><bluetooth-lowenergy>,2,2,4,,
Android,32961771,1,,,,,,10/6/2015 4:30:12,,9,1918,"<p>I'm trying to create an app that takes some photos from a service using the <strong>camera2 API</strong>.</p>

<p>I can get the app to take pictures fine from a fragment based on the <a href=""https://github.com/googlesamples/android-Camera2Basic/blob/d7a3bfd0f2a2a3a6447a41f7b729fcae571ef020/Application/src/main/java/com/example/android/camera2basic/Camera2BasicFragment.java"">Camera2Basic sample</a>.</p>

<p>But when I try move to a service the image doesn't finish capturing properly. It never progresses past the autoexposure precapture state.</p>

<p>I narrowed it down to being some problem with not having a preview. I've put together a test fragment by taking the <strong>Camera2Basic</strong> code and removing the preview, which results in the same issue.</p>

<p>I put together a test fragment that has the issue, based on the Camera2Basic sample where i've basically just removed code for the preview. Fragment code uploaded here <a href=""http://pastebin.ca/3182401"">http://pastebin.ca/3182401</a>.</p>

<p>I'm getting the <strong>onCaptureCompleted()</strong> callback but when i check the camera autoexposure state here, it's still in the <strong>CONTROL_AE_STATE_PRECAPTURE</strong> state.</p>

<p>It doesn't make sense to me that the capture would be completed if one of the camera states is still in precapture.</p>

<p>Anyone know what might be happening here?</p>
",2128112,,609602,,2015-10-12 7:32:15,2015-11-25 23:44:18,Camera2 API onCaptureComplete() is called but camera state is still CONTROL_AE_STATE_PRECAPTURE,<android><android-camera><camera2>,2,3,1,,
Android,32970996,1,,,,,,10/6/2015 13:15:40,,1,936,"<p>Hello I have a really difficult question. <strong>I got the nexus 6 and I want to have the preview stream in RAW fromat</strong> (ImageFormate.RAW_SENSOR) <strong>at the camera2 API</strong>. <em>Is this even possible</em>?</p>

<p>I use the android-Camera2Raw (<a href=""https://github.com/googlesamples/android-Camera2Raw"" rel=""nofollow"">https://github.com/googlesamples/android-Camera2Raw</a>)  </p>
",3612630,,,,,2015-10-09 3:51:05,"how to become the preview stream in RAW Format (Camera2 API , ImageFormate.RAW_SENSOR)?",<android><preview><camera2>,1,0,,,
Android,32988308,1,,,,,,10/7/2015 9:13:46,,2,745,"<p>I want to use Vision API in android to detect the face and the landmarks over the face.
I followed the Vision API sample :</p>

<p><a href=""https://github.com/googlesamples/android-vision/tree/master/visionSamples/photo-demo/"" rel=""nofollow"">https://github.com/googlesamples/android-vision/tree/master/visionSamples/photo-demo/</a></p>

<p>My issues are:</p>

<p>1) I cannot understand the details of this object while debugging:</p>

<pre><code>FaceDetector detector = new FaceDetector.Builder(context)
    .setTrackingEnabled(false)
    .setLandmarkType(FaceDetector.ALL_LANDMARKS)
    .setProminentFaceOnly(true)
    .build();
</code></pre>

<p><a href=""http://i.stack.imgur.com/MPOuH.png"" rel=""nofollow"">image that shows the details of 'detector'</a></p>

<p>Cannot understand 'zzbbc','zzbbd'...etc</p>

<p>2)</p>

<pre><code>Frame frame = new Frame.Builder().setBitmap(bitmap).build();
SparseArray&lt;Face&gt; faces = detector.detect(frame);`
</code></pre>

<p>Here the size of faces is returned as zero.</p>

<p>There is no exception thrown, I can see the image but the rectangle and dots cannot be seen.</p>

<p>Can anyone please help me out with this issue?</p>
",4477690,,3374591,,2015-10-07 9:37:30,2015-10-07 21:02:52,Cannot understand the details of FaceDetector object while debugging using Vision API Android,<android><google-api><google-play-services><face-detection><android-vision>,1,0,,,
Android,33115337,1,,,,,,10/14/2015 1:53:44,,8,11927,"<p>I am trying Google Place Autocomplete Example from <a href=""https://github.com/googlesamples/android-play-places"">https://github.com/googlesamples/android-play-places</a>.</p>

<p>I have put the correct API key at the correct place. I knew it because when I put a random string invalid API key I will get a different error.</p>

<p>So after I put the correct API key, I run the app in both real device and simulator. Both devices gave me this error:</p>

<p>Status{statusCode=PLACES_API_INVALID_APP, resolution=null}</p>

<p>What causes this error and how to fix it?</p>
",1114591,,1677912,,2015-10-14 2:00:33,2018-06-04 19:20:23,PLACES_API_INVALID_APP error from Android Play Places,<android><google-places-api>,8,3,1,,
Android,33127258,1,,,,,,10/14/2015 13:53:14,,10,4255,"<p>I have the code for the Camera2 from <a href=""https://github.com/googlesamples/android-Camera2Basic"" rel=""noreferrer"">https://github.com/googlesamples/android-Camera2Basic</a>.</p>

<p>The problem i'm facing is that when i turn to my Front Camera, i cannot capture pictures but works fine with Back Camera.</p>

<p>Has anyone implemented the Camera2 Api please help!</p>

<p>Here's the code snippet:</p>

<pre><code>private void setUpCameraOutputs(int width, int height) {
    Activity activity = getActivity();
    CameraManager manager = (CameraManager) activity.getSystemService(Context.CAMERA_SERVICE);
    try {
        for (String cameraId : manager.getCameraIdList()) {
            CameraCharacteristics characteristics
                    = manager.getCameraCharacteristics(cameraId);

            // We don't use a front facing camera in this sample.
            int facing = characteristics.get(CameraCharacteristics.LENS_FACING);
            Log.i(TAG,""Front Cam ID: ""+ facing);
            if (characteristics.get(CameraCharacteristics.LENS_FACING)==CameraCharacteristics.LENS_FACING_FRONT)
            {



                StreamConfigurationMap map = characteristics.get(
                        CameraCharacteristics.SCALER_STREAM_CONFIGURATION_MAP);


                // For still image captures, we use the largest available size.
                Size largest = Collections.max(
                        Arrays.asList(map.getOutputSizes(ImageFormat.JPEG)),
                        new CompareSizesByArea());
                mImageReader = ImageReader.newInstance(largest.getWidth(), largest.getHeight(),
                        ImageFormat.JPEG, /*maxImages*/2);
                mImageReader.setOnImageAvailableListener(
                        mOnImageAvailableListener, mBackgroundHandler);

                // Danger, W.R.! Attempting to use too large a preview size could  exceed the camera
                // bus' bandwidth limitation, resulting in gorgeous previews but the storage of
                // garbage capture data.
                mPreviewSize = chooseOptimalSize(map.getOutputSizes(SurfaceTexture.class),
                        width, height, largest);

                // We fit the aspect ratio of TextureView to the size of preview we picked.
                int orientation = getResources().getConfiguration().orientation;
                if (orientation == Configuration.ORIENTATION_LANDSCAPE) {
                    mTextureView.setAspectRatio(
                            mPreviewSize.getWidth(), mPreviewSize.getHeight());
                } else {
                    mTextureView.setAspectRatio(
                            mPreviewSize.getHeight(), mPreviewSize.getWidth());
                }

                mCameraId = cameraId;
                return;
            }
            else
            {
                onActivityCreated(Bundle.EMPTY);
            }
        }
    } catch (CameraAccessException e) {
        e.printStackTrace();
    } catch (NullPointerException e) {
        // Currently an NPE is thrown when the Camera2API is used but not supported on the
        // device this code runs.
        ErrorDialog.newInstance(getString(R.string.camera_error))
                .show(getChildFragmentManager(), FRAGMENT_DIALOG);
    }
}
</code></pre>
",5137755,,,,,2016-11-14 20:21:31,Front Camera in Camera2 not capturing image,<android>,5,3,5,,
Android,33151244,1,,,,,,10/15/2015 14:30:00,,11,8478,"<p>i want to implement tap to focus feature in my custom camera.
This is the basic code provided by Google <a href=""https://github.com/googlesamples/android-Camera2Basic"" rel=""noreferrer"">https://github.com/googlesamples/android-Camera2Basic</a></p>

<p>Here's the code snippet where i think i should add my feature
If anyone has implemented the Camera2 API please help!</p>

<pre><code>  private void lockFocus() {
    try {
        // This is how to tell the camera to lock focus.
        mPreviewRequestBuilder.set(CaptureRequest.CONTROL_AF_TRIGGER,
                CameraMetadata.CONTROL_AF_TRIGGER_START);
        // Tell #mCaptureCallback to wait for the lock.
        mState = STATE_WAITING_LOCK;
        mCaptureSession.capture(mPreviewRequestBuilder.build(), mCaptureCallback,
                mBackgroundHandler);
    } catch (CameraAccessException e) {
        e.printStackTrace();
    }
}
</code></pre>
",5137755,,,,,2019-01-02 7:57:29,Implement Tap to Focus in Camera2 API,<android>,3,0,6,,
Android,33686656,1,,,,,,11/13/2015 5:45:02,,1,682,"<p>I'm trying to modify the universal music player app: <a href=""https://github.com/googlesamples/android-UniversalMusicPlayer"" rel=""nofollow"">https://github.com/googlesamples/android-UniversalMusicPlayer</a> </p>

<p>Since I'm trying to build this for AOSP 6.0, I have no Google Play Services or any other Google Apps on my device, and so cannot use any non-android api's or api's that depend on Google Libraries.</p>

<p>The ""Music provider"" class, seems to visit this url:</p>

<p><a href=""http://storage.googleapis.com/automotive-media/music.json"" rel=""nofollow"">http://storage.googleapis.com/automotive-media/music.json</a></p>

<p>As mentioned in this line:</p>

<pre><code>private static final String CATALOG_URL =
    ""http://storage.googleapis.com/automotive-media/music.json"";
</code></pre>

<p>This file contains a list of tracks that are hosted by Google online. It seems the app can stream these files, but for some reason it does not detect the music already on my device. Why is that ? How do I get the app to list the music tracks that are already on my device ?</p>
",2990509,,,,,2016-12-08 16:35:58,How to get the universal music player to detect on device music?,<android>,1,0,1,,
Android,33876196,1,,,,,,11/23/2015 16:44:37,,4,2155,"<p>I'm working on Camera 2 API recently and my device has a 16:9 screen ratio but my camera sensor is 4:3. So all the preview size I got is 4:3. I' wondering is there any way I get a crop the size and only display the 16:9 part?  I tried a long time and didn't find any help for camera 2.</p>

<p>My current camera code is similar to the <a href=""https://github.com/googlesamples/android-Camera2Basic"" rel=""nofollow noreferrer"">camera 2 basic sample</a>.</p>

<p>So how should I crop the preview and only display the 16:9 part on the texture view?</p>

<p>Thanks!!</p>
",1763748,,8892392,,2018-08-28 8:19:14,2018-08-28 8:19:14,"Android Camera 2, how to crop preview size",<android><preview><android-camera2>,3,1,,,
Android,34070557,1,,,,,,12/3/2015 15:59:23,,1,997,"<p>I downloaded an Android camera2 <a href=""https://github.com/googlesamples/android-Camera2Basic"" rel=""nofollow"">demo</a>, it ran well. </p>

<p>Now I want to get the intrinsic matrix of the camera by querying the <a href=""http://developer.android.com/reference/android/hardware/camera2/CameraCharacteristics.html#LENS_INTRINSIC_CALIBRATION"" rel=""nofollow"">CameraCharacteristics</a>.</p>

<p>My code is </p>

<pre><code>private void setUpCameraOutputs(int width, int height) {
    Activity activity = getActivity();
    CameraManager manager = (CameraManager) activity.getSystemService(Context.CAMERA_SERVICE);
    try {
        for (String cameraId : manager.getCameraIdList()) {
            CameraCharacteristics characteristics
                    = manager.getCameraCharacteristics(cameraId);
            float[] intrinsic = new float[5];
            intrinsic = characteristics.get(CameraCharacteristics.LENS_INTRINSIC_CALIBRATION);
    //...... leave out the following part
        }
    }
</code></pre>

<p>The intrinsic is expected to be a 5-element array but <code>intrinsic = characteristics.get(CameraCharacteristics.LENS_INTRINSIC_CALIBRATION)</code> returns null.</p>
",4158590,,2546444,,2015-12-03 16:34:11,2015-12-03 19:09:13,Android camera2 Lens intrinsic calibration,<java><android><android-camera><android-hardware><android-camera2>,1,3,,,
Android,34609427,1,,,,,,1/5/2016 10:28:21,,18,4795,"<p>A user of my app reported that when my app is listening for fingerprint authentication (I have called <code>fingerprintManager.authenticate</code>) and the screen is turned off (by hitting the devices power switch button), it is not possible to use the fingerprint to unlock the device. </p>

<p>I can also see that the onAuthenticationError callback method is called when the screen is turned off, which does not happen when I leave my activity, because I call <code>CancellationSignal.cancel()</code> in my <code>onPause</code> method. I have checked that <code>onPause</code> is being called.</p>

<p>The same behavior can be observed in the Fingerprint Dialog sample (<a href=""https://github.com/xamarin/monodroid-samples/tree/master/android-m/FingerprintDialog"">https://github.com/xamarin/monodroid-samples/tree/master/android-m/FingerprintDialog</a>, ported from <a href=""https://github.com/googlesamples/android-FingerprintDialog"">https://github.com/googlesamples/android-FingerprintDialog</a>)</p>

<p>What can I do to resolve this behavior?</p>

<p>EDIT: I also tried to register a broadcast receiver for android.intent.action.SCREEN_OFF which gets notified after onPause, so it's no surprise that calling <code>cancel()</code> in that receiver does not change anything.</p>
",292233,,292233,,2016-01-10 8:35:49,2016-09-07 14:07:29,Stop listening for fingerprint when screen off,<android><fingerprint>,3,2,,,
Android,34881551,1,,,,,,1/19/2016 16:09:16,,3,1754,"<p>Implemented <a href=""https://github.com/googlesamples/android-nearby"" rel=""nofollow"">this sample</a> on mobile &amp; tablet everything is perfect ! But whit Android TV ADT-1 v5.0.2 build LRX22G these eloquent message shows up.</p>

<pre><code>GmsClient: unable to connect to service: com.google.android.gms.nearby.messages.service.NearbyMessagesService.START

D/NearbyMessagesClient: Failed to emit client lifecycle event ACTIVITY_STOPPED due to GmsClient being disconnected

NearbyMessagesClient: Failed to emit client lifecycle event CLIENT_DISCONNECTED due to GmsClient being disconnected
</code></pre>

<p>The callback :</p>

<pre><code>@Override public void onConnectionFailed(@NonNull ConnectionResult connectionResult) 
</code></pre>

<p>Outputs :</p>

<pre><code>ConnectionResult{statusCode=INTERNAL_ERROR, resolution=null, message=null}
</code></pre>

<p>Like I said, everything works in the mobile module. I doubled checked API_KEY, gradle dependencies, Manifest meta, nope, I even created a listing for the APK and created a Game on Google Play Console, nothing.</p>

<p>Any ideas ? Thanks !</p>
",704439,,1018109,,2016-04-18 17:11:04,2016-04-18 17:11:04,"ConnectionResult{statusCode=INTERNAL_ERROR, resolution=null, message=null}",<android><google-api-client><android-tv><google-nearby>,1,0,2,,
Android,35054405,1,,,,,,1/28/2016 6:38:23,,3,2320,"<p>I have authenticated user using <code>authenticate()</code> method in my app. I was looking through documentation regarding gestures on Finger-Print Sensor but couldn't find any class pertaining to gestures. Is there any class regarding same which detects gestures like long Press,Tap, etc on finger print sensor. </p>

<p>I went through <code>FingerprintManager</code> class &amp; <a href=""https://github.com/googlesamples/android-FingerprintDialog"" rel=""nofollow"">this</a> but couldn't find much info regarding gestures. </p>
",5717212,,,,,2017-03-30 0:28:17,Detect Gestures on Fingerprint Sensor-Android,<android><gesture><android-6.0-marshmallow><fingerprint>,2,0,2,,
Android,35056994,1,,,,,,1/28/2016 9:03:39,,1,1265,"<p>I'm experimenting with the following Google sample: <a href=""https://github.com/googlesamples/android-vision/tree/master/visionSamples/FaceTracker"" rel=""nofollow"">https://github.com/googlesamples/android-vision/tree/master/visionSamples/FaceTracker</a></p>

<p>The sample is using the Play Service new Face detection APIs, and draws a square on detected faces on the camera video stream.</p>

<p>I'm trying to figure out if it is possible to save the frames that has detected faces in them, from following the code it seems that the face detector's processor is a good place to perform the 'saving' but it only supplies the detection meta data and not the actual frame.</p>

<p>Your guidance will be appreciated.</p>
",1068397,,,,,2017-12-06 22:24:03,Get detected face bitmap,<android><android-camera>,2,1,,,
Android,35127970,1,,,,,,2/1/2016 10:17:55,,1,408,"<p>Iâ€™m implementing a â€œuse fingerprint instead of passwordâ€ feature for devices with nexus imprint. </p>

<p>Itâ€™s fairly easy to prompt for a fingerprint and see if was correct or not but Iâ€™m scratching my head trying to protect a value with fingerprint, Iâ€™m following this example <a href=""https://github.com/googlesamples/android-FingerprintDialog"" rel=""nofollow"">https://github.com/googlesamples/android-FingerprintDialog</a> but there is no â€œrecover value with fingerprintâ€, it only explains how to store it</p>

<p>any good example of something like that?</p>

<p>The API expects a password so the general idea is:</p>

<ul>
<li>user activates ""protect with fingerprint""</li>
<li>is asked for the password</li>
<li>if correct, is asked for fingerprint</li>
<li>if correct, password is securely stored</li>
<li>for any subsequent logins, when touching the fingerprint scanner, if correct, the value is decrypted and sent to server for login</li>
</ul>
",1481061,,,,,2016-02-01 11:01:04,Protect value with fingerprint,<android><security><fingerprint><biometrics>,1,0,1,,
Android,35244472,1,,,,,,2/6/2016 18:03:19,,1,289,"<p>I want to use the demo application <a href=""https://github.com/googlesamples/android-testdpc"" rel=""nofollow noreferrer"">TestDPC</a> released by Google to create a Work Profile with my own device policy controller so I added some code to this app in order to connect to GCM service to receive cloud messages to start some actions on my device.<br/>
To connect to GCM I used some example code that I tested separately and it works, the only thing I added is a boot listener (<em>ReceiverStarter</em>) in order to activate GCM listener everytime the user reboot his device.<br/>
The strange thing is that when I install my app on device (Samsung Note 4 with Android 5.1.1 API 22) without create a managed profile the GCM client works properly.<br/>
If with the app early installed I create a work profile and the app itslef take control over the new profile the same code for GCM doesn't work anymore.
I can see (using notifications) that in this case my dpc app can register to GCM and fetch GCM ID and I can read it in my console but the listener (<em>MyGcmListenerService</em>) doesn't receive any cloud messages as if the listener is not up and running, I cannot see any errors and/or logs in my console.<br/>
Maybe I need some more permissions?<br/>
Here my manifest</p>

<pre><code>&lt;?xml version=""1.0"" encoding=""utf-8""?&gt;
</code></pre>

<p></p>

<pre><code>&lt;uses-permission android:name=""android.permission.GET_ACCOUNTS"" /&gt;
&lt;uses-permission android:name=""android.permission.MANAGE_ACCOUNTS"" /&gt;
&lt;uses-permission android:name=""android.permission.PACKAGE_USAGE_STATS"" /&gt;
&lt;uses-permission android:name=""android.permission.ACCESS_WIFI_STATE"" /&gt;
&lt;uses-permission android:name=""android.permission.CHANGE_WIFI_STATE"" /&gt;
&lt;uses-permission android:name=""android.permission.INTERNET"" /&gt;
&lt;uses-permission android:name=""android.permission.WAKE_LOCK"" /&gt;
&lt;uses-permission android:name=""android.permission.RECEIVE_BOOT_COMPLETED"" /&gt;
&lt;uses-permission android:name=""com.google.android.c2dm.permission.RECEIVE"" /&gt;

&lt;permission android:name=""com.xxx.emmagent.permission.C2D_MESSAGE"" android:protectionLevel=""signature"" /&gt;
&lt;uses-permission android:name=""com.xxx.emmagent.permission.C2D_MESSAGE"" /&gt;

&lt;application
        android:allowBackup=""true""
        android:icon=""@drawable/ic_launcher""
        android:theme=""@style/AppTheme""
        android:label=""@string/app_name""&gt;

    &lt;activity
        android:name="".LaunchActivity""&gt;
        &lt;intent-filter&gt;
            &lt;action android:name=""android.intent.action.MAIN""/&gt;
            &lt;category android:name=""android.intent.category.LAUNCHER""/&gt;
        &lt;/intent-filter&gt;
    &lt;/activity&gt;

    &lt;activity
        android:name="".gcm.MainActivity""
        android:label=""@string/app_name""
        android:theme=""@style/SetupTheme""/&gt;

    &lt;activity
            android:name="".PolicyManagementActivity""
            android:label=""@string/app_name""
            android:windowSoftInputMode=""adjustPan""/&gt;

    &lt;activity
            android:name="".AddAccountActivity""
            android:label=""@string/app_name""
            android:theme=""@style/SetupTheme""/&gt;

    &lt;activity
            android:name="".EnableProfileActivity""
            android:label=""@string/app_name""
            android:theme=""@style/SetupTheme""/&gt;

    &lt;activity
            android:name="".EnableDeviceOwnerActivity""
            android:label=""@string/app_name""
            android:theme=""@style/SetupTheme""/&gt;

    &lt;activity
            android:name="".cosu.EnableCosuActivity""
            android:label=""@string/app_name""
            android:theme=""@style/SetupTheme""/&gt;

    &lt;activity
            android:name="".syncauth.SetupSyncAuthManagement""
            android:label=""@string/app_name""
            android:theme=""@style/SetupTheme""/&gt;

    &lt;activity
            android:name="".syncauth.FinishSyncAuthDeviceOwnerActivity""
            android:label=""@string/app_name""
            android:theme=""@style/SetupTheme""/&gt;

    &lt;activity
            android:name="".syncauth.FinishSyncAuthProfileOwnerActivity""
            android:label=""@string/app_name""
            android:theme=""@style/SetupTheme""/&gt;

    &lt;activity
            android:name="".policy.locktask.KioskModeActivity""
            android:label=""@string/kiosk_mode""
            android:launchMode=""singleInstance""
            android:lockTaskMode=""if_whitelisted""
            android:enabled=""false""&gt;
        &lt;intent-filter&gt;
            &lt;action android:name=""android.intent.action.MAIN""/&gt;
            &lt;category android:name=""android.intent.category.HOME""/&gt;
            &lt;category android:name=""android.intent.category.DEFAULT""/&gt;
        &lt;/intent-filter&gt;
    &lt;/activity&gt;

    &lt;receiver
            android:name="".DeviceAdminReceiver""
            android:description=""@string/app_name""
            android:label=""@string/app_name""
            android:permission=""android.permission.BIND_DEVICE_ADMIN""&gt;
        &lt;meta-data
                android:name=""android.app.device_admin""
                android:resource=""@xml/device_admin_receiver""/&gt;
        &lt;intent-filter&gt;
            &lt;action android:name=""android.app.action.DEVICE_ADMIN_ENABLED""/&gt;
            &lt;action android:name=""android.app.action.PROFILE_PROVISIONING_COMPLETE""/&gt;
        &lt;/intent-filter&gt;
    &lt;/receiver&gt;

    &lt;provider
            android:authorities=""com.xxx.emmagent.fileprovider""
            android:name=""android.support.v4.content.FileProvider""
            android:grantUriPermissions=""true""
            android:exported=""false""&gt;
        &lt;meta-data
                android:name=""android.support.FILE_PROVIDER_PATHS""
                android:resource=""@xml/filepaths"" /&gt;
    &lt;/provider&gt;


    &lt;!-- GCM messagging --&gt;
    &lt;!-- [START gcm_receiver] --&gt;
    &lt;receiver
        android:name=""com.google.android.gms.gcm.GcmReceiver""
        android:exported=""true""
        android:permission=""com.google.android.c2dm.permission.SEND"" &gt;
        &lt;intent-filter&gt;
            &lt;action android:name=""com.google.android.c2dm.intent.RECEIVE"" /&gt;
            &lt;category android:name=""com.xxx.emmagent"" /&gt;
        &lt;/intent-filter&gt;
    &lt;/receiver&gt;
    &lt;!-- [END gcm_receiver] --&gt;

    &lt;!-- [START gcm_listener] --&gt;
    &lt;service
        android:name="".gcm.MyGcmListenerService""
        android:exported=""true"" &gt;
        &lt;intent-filter&gt;
            &lt;action android:name=""com.google.android.c2dm.intent.RECEIVE"" /&gt;
        &lt;/intent-filter&gt;
    &lt;/service&gt;
    &lt;!-- [END gcm_listener] --&gt;
    &lt;!-- [START instanceId_listener] --&gt;
    &lt;service
        android:name="".gcm.MyInstanceIDListenerService""
        android:exported=""false""&gt;
        &lt;intent-filter&gt;
            &lt;action android:name=""com.google.android.gms.iid.InstanceID""/&gt;
        &lt;/intent-filter&gt;
    &lt;/service&gt;
    &lt;!-- [END instanceId_listener] --&gt;
    &lt;service
        android:name="".gcm.RegistrationIntentService""
        android:exported=""false""&gt;
    &lt;/service&gt;

    &lt;receiver android:name="".gcm.ReceiverStarter"" android:enabled=""true"" android:exported=""false""&gt;
        &lt;intent-filter&gt;
            &lt;action android:name=""android.intent.action.BOOT_COMPLETED""/&gt;
        &lt;/intent-filter&gt;
    &lt;/receiver&gt;

&lt;/application&gt;
</code></pre>

<p></p>

<p>I don't think it depends by code, as I said the same app and the same code without a work profile works well.<br/>
Any ideas?<br/>
Thanks in advance</p>

<p><strong>EDIT</strong>: <a href=""https://stackoverflow.com/questions/28643226/gcm-wake-up-is-not-happening-inside-the-managed-profile-in-android-5-0-lollipop"">here</a> the same problem</p>
",5892337,,-1,,2017-05-23 12:09:44,2016-03-11 6:50:14,How configure GCM for an Android Device Policy Controller (DPC),<android><google-cloud-messaging><android-5.1.1-lollipop><android-managed-profile>,1,3,,,
Android,35381104,1,,,,,,2/13/2016 14:26:39,,46,943,"<p>Releasing promo codes for in-app purchases seems like it will prevent an app from (ever again) performing remote server purchase verification!</p>

<p>When a <a href=""http://developer.android.com/intl/es/google/play/billing/billing_promotions.html"" rel=""noreferrer"">promo code</a> is used for an in-app purchase (the <code>PURCHASES_UPDATED</code> broadcast), it will completely bypass the purchase flow so the app has no chance to supply an <a href=""http://developer.android.com/google/play/billing/billing_best_practices.html#payload"" rel=""noreferrer"">""developerPayload""</a>, used for remote verification.</p>

<p>Later when the app call <a href=""http://developer.android.com/intl/es/google/play/billing/billing_reference.html#getPurchases"" rel=""noreferrer"">getPurchases()</a> to get/verify owner products, the <a href=""http://developer.android.com/intl/es/google/play/billing/billing_reference.html#purchase-data-table"" rel=""noreferrer"">purchase data</a> for promo purchases won't contain a <code>""developerPayload""</code> of course, but neither an <code>""orderId""</code>, also useful for remote verification using the <a href=""https://developers.google.com/android-publisher/api-ref/purchases/products"" rel=""noreferrer"">Google Play Developer API</a>.</p>

<p><strong>How is an app supposed to verify in-app purchases made with promo codes?</strong></p>

<p>Allowing users to redeem promo codes through the Google Play Store app/site, thus bypassing the purchase flow, seems like an major oversight which shouldn't be possible.</p>

<p>Issue reports:</p>

<ul>
<li><a href=""https://code.google.com/p/android/issues/detail?id=200722"" rel=""noreferrer"">https://code.google.com/p/android/issues/detail?id=200722</a> (closed WrongForum)</li>
<li><a href=""https://github.com/googlesamples/android-play-billing/issues/7"" rel=""noreferrer"">https://github.com/googlesamples/android-play-billing/issues/7</a></li>
</ul>

<p>Similar posts:</p>

<ul>
<li><a href=""https://stackoverflow.com/questions/34979420/in-app-purchases-made-via-promo-codes-return-empty-developer-payload-string"">In-app purchases made via promo codes return empty developer payload string</a></li>
</ul>
",445360,,-1,,2017-05-23 11:55:00,2017-07-06 19:38:41,In-app purchase promo codes breaks remote server verification?,<android><google-play><in-app-billing><promotion-code>,1,1,10,,
Android,35629725,1,,,,,,2/25/2016 14:13:03,,3,299,"<p>I take example from <a href=""https://github.com/googlesamples/android-play-publisher-api/blob/master/v2/java/src/com/google/play/developerapi/samples/BasicUploadApk.java"" rel=""nofollow"">GitHub</a>.
It works fine, but I need to upload obb file with my apk.</p>

<p>Part of my code:</p>

<pre><code>        AndroidPublisher.Edits.Insert editRequest = edits.insert(bundleID, null);
        AppEdit edit = editRequest.execute();
        final String editId = edit.getId();
        final AbstractInputStreamContent apkFile = new FileContent(""application/vnd.android.package-archive"", new File(apkPath));

        AndroidPublisher.Edits.Apks.Upload uploadRequest = edits.apks().upload(bundleID, editId, apkFile);

        Apk apk = uploadRequest.execute();

        List&lt;Integer&gt; apkVersionCodes = new ArrayList&lt;&gt;();
        apkVersionCodes.add(apk.getVersionCode());
        AndroidPublisher.Edits.Tracks.Update updateTrackRequest = edits.tracks().update(bundleID, editId, TRACK_ALPHA, new Track().setVersionCodes(apkVersionCodes));
        updateTrackRequest.execute();
        // Commit changes for edit.
        AndroidPublisher.Edits.Commit commitRequest = edits.commit(bundleID, editId);
        commitRequest.execute();
</code></pre>

<p>How can I do it?</p>
",3882388,,,,,2017-05-20 4:49:38,How to upload obb file to Google Play via Android Publisher Java API v2,<java><upload><google-play-developer-api>,2,0,1,,
Android,35660883,1,,,,,,2/26/2016 20:13:28,,1,716,"<p>I'm using the Universal Android Media Player sample as the basis of another app. For the love of me I cannot figure out how to update the MusicProvider the MusicService uses (ie. change the songs in the queue).
This is to be done when the user clicks on a random item - the service will be provided with a new list to play from.</p>

<p>Any ideas? - the original source is located here: <a href=""https://github.com/googlesamples/android-UniversalMusicPlayer"" rel=""nofollow"">https://github.com/googlesamples/android-UniversalMusicPlayer</a> </p>

<p>I've already created the new MusicProvider, how do I get that to the service is what I'm asking.</p>
",5987752,,1000551,,2017-10-03 13:59:30,2017-10-03 13:59:30,Universal Android Media Player - UAMP,<android><media-player><playback>,1,0,,,
Android,35699359,1,,,,,,2/29/2016 12:17:46,,2,337,"<p>I am testing Nearby Messages API using the Google NearbyBackgroundBeacons sample,</p>

<p><a href=""https://github.com/googlesamples/android-"" rel=""nofollow"">https://github.com/googlesamples/android-</a>
nearby/tree/master/messages/NearbyBackgroundBeacons</p>

<p>As documented in the README, i created an API key and placed the same in AndroidManifest.xml. My Estimote Beacon is configured for EddyStone-UID. It is registered using Google Proximity API and status is ACTIVE.</p>

<p>When i run the NearbyBackgroundBeacons demo on Samsung Galaxy S4, API 19, Android 4.4.4, play services 8.4.89, i see this following error </p>

<blockquote>
  <p>02-29 07:08:55.363
  18073-18073/com.google.android.gms.nearby.messages.samples.nearbybackgroundbeacons
  E/MainActivityFragment: Could not resolve error. Status:
  Status{statusCode=unknown status code: 2801, resolution=null}</p>
</blockquote>

<p>when calling </p>

<pre><code>Nearby.Messages.subscribe(GoogleApiClient, PendingIntent, SubscribeOptions)
</code></pre>
",77887,,,,,2016-06-29 9:32:32,NearbyBackgroundBeacons demo returns unknown status code 2801 on subscribe,<android><google-api><google-play-services><bluetooth-lowenergy><google-nearby>,1,3,,,
Android,35811411,1,,,,,,3/5/2016 7:31:48,,7,4829,"<p>I am playing with the original example of BarCode scanner here:</p>

<p><a href=""https://github.com/googlesamples/android-vision/blob/master/visionSamples/barcode-reader/app/src/main/java/com/google/android/gms/samples/vision/barcodereader/BarcodeCaptureActivity.java"" rel=""noreferrer"">https://github.com/googlesamples/android-vision/blob/master/visionSamples/barcode-reader/app/src/main/java/com/google/android/gms/samples/vision/barcodereader/BarcodeCaptureActivity.java</a></p>

<p>They are able to start the AutoFocus/Flash within the camera factory like this:</p>

<pre><code>    // Creates and starts the camera.  Note that this uses a higher resolution in comparison
    // to other detection examples to enable the barcode detector to detect small barcodes
    // at long distances.
    CameraSource.Builder builder = new CameraSource.Builder(getApplicationContext(), barcodeDetector)
            .setFacing(CameraSource.CAMERA_FACING_BACK)
            .setRequestedPreviewSize(1600, 1024)
            .setRequestedFps(15.0f);

    // make sure that auto focus is an available option
    if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.ICE_CREAM_SANDWICH) {
        builder = builder.setFocusMode(
                autoFocus ? Camera.Parameters.FOCUS_MODE_CONTINUOUS_PICTURE : null);
    }

    mCameraSource = builder
            .setFlashMode(useFlash ? Camera.Parameters.FLASH_MODE_TORCH : null)
            .build();
</code></pre>

<p>However this method on cameraSource builder is gone in current version and so this setting cannot be accessed. Also I need to change the FlashMode during usage, so that is not the way to do it either. I found this ugly solution to accessing the camera:</p>

<pre><code>public static Camera getCamera(@NonNull CameraSource cameraSource) {
    Field[] declaredFields = CameraSource.class.getDeclaredFields();

    for (Field field : declaredFields) {
        if (field.getType() == Camera.class) {
            field.setAccessible(true);
            try {
                Camera camera = (Camera) field.get(cameraSource);
                if (camera != null) {
                    return camera;
                }

                return null;
            } catch (IllegalAccessException e) {
                e.printStackTrace();
            }

            break;
        }
    }

    return null;
}
</code></pre>

<p>Although it works, it does not help: when calling <code>getParameters().setFocusMode()</code> I am getting this exception:</p>

<pre><code>Attempt to invoke virtual method 'android.hardware.Camera$Parameters android.hardware.Camera.getParameters()' on a null object reference
</code></pre>

<p>Obviously what I am doing is not a right way to do it, but there seem to be no documentation about it.</p>

<p>Thanks for hints.</p>
",922584,,2057709,,2016-03-06 4:13:04,2018-04-04 12:28:43,Accessing AutoFocus/Flash with Google Vision BarCode Reader,<android><android-camera><barcode-scanner><camera-flash>,2,1,1,,
Android,35877936,1,,,,,,3/8/2016 21:02:10,,6,1661,"<p>On the official sources did not find the information ... There are many examples of how to work with the Camera API, but how to work with Camera2API anything ... a couple of discussions at Stake and all ... there is a similar question to me, but I have a problem not solved. ..</p>

<p><strong>link to the same quetion :</strong>
<a href=""https://stackoverflow.com/questions/30334319/android-camera2-face-recognition"">Android camera2 face recognition</a></p>

<p><strong>I took the example of <a href=""https://github.com/googlesamples/android-Camera2Basic"" rel=""nofollow noreferrer"">Google's API for Camera 2</a></strong>.</p>

<p>That's what I did, but I did not detect a face :</p>

<p>I added events</p>

<pre><code>    private void createCameraPreviewSession() {
    try {
        SurfaceTexture texture = mTextureView.getSurfaceTexture();
        assert texture != null;

        // We configure the size of default buffer to be the size of camera preview we want.
        texture.setDefaultBufferSize(mPreviewSize.getWidth(), mPreviewSize.getHeight());

        // This is the output Surface we need to start preview.
        Surface surface = new Surface(texture);

        // We set up a CaptureRequest.Builder with the output Surface.
        mPreviewRequestBuilder
                = mCameraDevice.createCaptureRequest(CameraDevice.TEMPLATE_PREVIEW);
        mPreviewRequestBuilder.addTarget(surface);

        // Here, we create a CameraCaptureSession for camera preview.
        mCameraDevice.createCaptureSession(Arrays.asList(surface, mImageReader.getSurface()),
                new CameraCaptureSession.StateCallback() {

                    @Override
                    public void onConfigured(@NonNull CameraCaptureSession cameraCaptureSession) {
                        // The camera is already closed
                        if (null == mCameraDevice) {
                            return;
                        }

                        // When the session is ready, we start displaying the preview.
                        mCaptureSession = cameraCaptureSession;
                        try {



//           ----&gt;&gt;         Ð£ÑÑ‚Ð°Ð½Ð¾Ð²ÐºÐ° Ð¼Ð¾Ð´ÑƒÐ»Ñ Ñ€Ð°ÑÐ¿Ð¾Ð·Ð½Ð°Ð½Ð¸Ñ Ð»Ð¸Ñ†Ð°
                            mPreviewRequestBuilder.set(CaptureRequest.STATISTICS_FACE_DETECT_MODE,
                                    CameraMetadata.STATISTICS_FACE_DETECT_MODE_FULL);



                            // Auto focus should be continuous for camera preview.
                            mPreviewRequestBuilder.set(CaptureRequest.CONTROL_AF_MODE,
                                    CaptureRequest.CONTROL_AF_MODE_CONTINUOUS_PICTURE);

                            // Flash is automatically enabled when necessary.
                            setAutoFlash(mPreviewRequestBuilder);

                            // Finally, we start displaying the camera preview.
                            mPreviewRequest = mPreviewRequestBuilder.build();

                            mCaptureSession.setRepeatingRequest(mPreviewRequest,
                                    mCaptureCallback, mBackgroundHandler);
                        } catch (CameraAccessException e) {
                            e.printStackTrace();
                        }
                    }

                    @Override
                    public void onConfigureFailed(
                            @NonNull CameraCaptureSession cameraCaptureSession) {
                        System.out.println(""Failed ÑÑ‚Ñ€Ð¾ÐºÐ° 757"");
                    }
                }, null
        );
    } catch (CameraAccessException e) {
        e.printStackTrace();
    }
}

private CameraCaptureSession.CaptureCallback mCaptureCallback
        = new CameraCaptureSession.CaptureCallback() {

    @Override
    public void onCaptureProgressed(@NonNull CameraCaptureSession session,
                                    @NonNull CaptureRequest request,
                                    @NonNull CaptureResult partialResult) {
        process(partialResult);
    }

    @Override
    public void onCaptureCompleted(@NonNull CameraCaptureSession session,
                                   @NonNull CaptureRequest request,
                                   @NonNull TotalCaptureResult result) {
        process(result);
    }

    private void process(CaptureResult result) {


---&gt;   //Ð·Ð´ÐµÑÑŒ Ð¿Ñ€Ð¾Ð²ÐµÑ€ÑÑŽ Ð¿Ð¾Ð»ÑƒÑ‡Ð°ÐµÑ‚ Ð»Ð¸ Ð¾Ð½ Ð¼Ð°ÑÑÐ¸Ð² Ð»Ð¸Ñ† Ð¸Ð»Ð¸ Ð½ÐµÑ‚ + Ð½ÐµÐ¿Ð¾Ð½ÑÑ‚Ð½Ñ‹Ð¹ Ð¼Ð¾Ð´
        Integer mode = result.get(CaptureResult.STATISTICS_FACE_DETECT_MODE);
        Face[] faces = result.get(CaptureResult.STATISTICS_FACES);
        if(faces != null &amp;&amp; mode != null)
            System.out.println(""tagDDDDDDDDDDDDDDDDDDDDDDDD"" + ""faces : "" +
                    faces.length + "" , mode : "" + mode);

        switch (mState) {
            case STATE_PREVIEW: {
                // We have nothing to do when the camera preview is working normally.

//                  Here i set Face Detection
                mPreviewRequestBuilder.set(CaptureRequest.STATISTICS_FACE_DETECT_MODE,
                        CameraMetadata.STATISTICS_FACE_DETECT_MODE_FULL);
                break;
            }
</code></pre>

<p><strong>here i am checking max count of faces that camera can get</strong></p>

<pre><code>    private void setUpCameraOutputs(int width, int height) {

    CameraManager manager = (CameraManager) getSystemService(Context.CAMERA_SERVICE);
    try {
        for (String cameraId : manager.getCameraIdList()) {
            CameraCharacteristics characteristics
                    = manager.getCameraCharacteristics(cameraId);

            // We don't use a front facing camera in this sample.
            Integer facing = characteristics.get(CameraCharacteristics.LENS_FACING);
            if (facing != null &amp;&amp; facing == CameraCharacteristics.LENS_FACING_FRONT) {
                continue;
            }

            max_count = characteristics.get(
                    CameraCharacteristics.STATISTICS_INFO_MAX_FACE_COUNT);
            modes = characteristics.get(
                    CameraCharacteristics.STATISTICS_INFO_AVAILABLE_FACE_DETECT_MODES);

            System.out.println(""!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!! max_count "" + max_count + "" modes "" + modes);
</code></pre>

<p>** Output is: **</p>

<pre><code>I/System.out: !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!! max_count 16 modes [I@3e2907e8
</code></pre>

<p>** And this is what a log prints **</p>

<pre><code>    03-08 18:34:07.018 7405-7438/com.example.android.camera2basic I/System.out: tagDDDDDDDDDDDDDDDDDDDDDDDDfaces : 0 , mode : 1
03-08 18:34:07.048 7405-7438/com.example.android.camera2basic I/System.out: tagDDDDDDDDDDDDDDDDDDDDDDDDfaces : 0 , mode : 1
03-08 18:34:07.078 7405-7438/com.example.android.camera2basic I/System.out: tagDDDDDDDDDDDDDDDDDDDDDDDDfaces : 0 , mode : 1
03-08 18:34:07.118 7405-7438/com.example.android.camera2basic I/System.out: tagDDDDDDDDDDDDDDDDDDDDDDDDfaces : 0 , mode : 1
03-08 18:34:07.148 7405-7438/com.example.android.camera2basic I/System.out: tagDDDDDDDDDDDDDDDDDDDDDDDDfaces : 0 , mode : 1
03-08 18:34:07.178 7405-7438/com.example.android.camera2basic I/System.out: tagDDDDDDDDDDDDDDDDDDDDDDDDfaces : 0 , mode : 1
03-08 18:34:07.218 7405-7438/com.example.android.camera2basic I/System.out: tagDDDDDDDDDDDDDDDDDDDDDDDDfaces : 0 , mode : 1
03-08 18:34:07.258 7405-7438/com.example.android.camera2basic I/System.out: tagDDDDDDDDDDDDDDDDDDDDDDDDfaces : 0 , mode : 1
03-08 18:34:07.288 7405-7438/com.example.android.camera2basic I/System.out: tagDDDDDDDDDDDDDDDDDDDDDDDDfaces : 0 , mode : 1
03-08 18:34:07.308 7405-7438/com.example.android.camera2basic I/System.out: tagDDDDDDDDDDDDDDDDDDDDDDDDfaces : 0 , mode : 1
03-08 18:34:07.348 7405-7438/com.example.android.camera2basic I/System.out: tagDDDDDDDDDDDDDDDDDDDDDDDDfaces : 0 , mode : 1
</code></pre>

<p>Why it isn't reterning face? If someone have a correct working exsample, give please a link. How i can make face detection with camera2API. Throughout the week, I can not understand((</p>
",5709159,,-1,,2017-05-23 12:16:06,2016-03-29 4:53:34,Who has a material how to work with the Face Detection Camera 2 API?,<java><android><camera><android-camera>,2,4,,,
Android,36051791,1,,,,,,3/17/2016 4:38:19,,1,1129,"<p>Im using <a href=""https://github.com/googlesamples/android-Camera2Basic"" rel=""nofollow"">https://github.com/googlesamples/android-Camera2Basic</a>.</p>

<p>I set face recognition mode to FULL.</p>

<pre><code>Â´mPreviewRequestBuilder.set(CaptureRequest.STATISTICS_FACE_DETECT_MODE,
</code></pre>

<p><code>CameraMetadata.STATISTICS_FACE_DETECT_MODE_FULL);</code></p>

<p>My CaptureCallback:</p>

<pre><code>private CameraCaptureSession.CaptureCallback mCaptureCallback
= new CameraCaptureSession.CaptureCallback() {

private void process(CaptureResult result) {
            Integer mode = result.get(CaptureResult.STATISTICS_FACE_DETECT_MODE);
            Face [] faces = result.get(CaptureResult.STATISTICS_FACES);
            if(faces != null &amp;&amp; mode != null)
                Log.e(""tag"", ""faces : "" + faces.length + "" , mode : "" + mode ); 
}

@Override
public void onCaptureProgressed(CameraCaptureSession session, CaptureRequest request,
                                CaptureResult partialResult) {
    process(partialResult);
}

@Override
public void onCaptureCompleted(CameraCaptureSession session, CaptureRequest request,
                               TotalCaptureResult result) {
    process(result);
}
</code></pre>

<p><code>Output: faces : 0 , mode : 2</code></p>

<p>Faces length is constantly 0. Looks like it doesn't recognise a face properly or I missed something. </p>
",3424397,,759866,,2016-06-23 23:47:07,2016-06-23 23:47:07,Face detection with android.hardware.Camera2,<android><android-5.1.1-lollipop><android-camera2>,1,0,,,
Android,36170914,1,,,,,,3/23/2016 6:05:58,,1,370,"<p>I have been working on an music player app based on <a href=""https://github.com/googlesamples/android-UniversalMusicPlayer"" rel=""nofollow"">android-UniversalMusicPlayer</a> sample. And I have had installed LeakCanary to detect memory leak issue and find out that there is indeed a memory leak issue. Please be noted that I did not make any changes except adding the memory leak detection.  </p>

<p>Please refer to the following information for details:</p>

<pre class=""lang-html prettyprint-override""><code>In com.example.android.uamp:1.1:2.

com.example.android.uamp.ui.FullScreenPlayerActivity has leaked:
GC ROOT static android.os.UserManager.sInstance
references android.os.UserManager.mContext
references android.app.ContextImpl.mOuterContext
references com.example.android.uamp.MusicService.mConnections
references android.support.v4.util.ArrayMap.mArray
references array java.lang.Object[].[2]
references android.os.Handler$MessengerImpl.this$0
references android.support.v4.media.MediaBrowserCompat$CallbackHandler.mCallbackImpl
references android.support.v4.media.MediaBrowserCompat$MediaBrowserImplApi23.mBrowserObj
references android.media.browse.MediaBrowser.mContext
leaks com.example.android.uamp.ui.FullScreenPlayerActivity instance
Retaining: 631 KB.
Reference Key: 21cd0054-506d-4c6f-94d1-47090c16fbb0
Device: LGE google Nexus 5 hammerhead
Android Version: 6.0.1 API: 23 LeakCanary: 1.4-beta1 02804f3
Durations: watch=5024ms, gc=121ms, heap dump=6019ms, analysis=40029ms
</code></pre>



<p>You could also refer to the <a href=""https://www.dropbox.com/s/h6b4x1jib2r6cte/Dump_memory_Leak_UniversalMusicPlayer.hprof?dl=0"" rel=""nofollow"">link</a> for the dump hprof file. To me it seems that this is a Android system bug? In this case, is there workaround? This is a deadly serious issue to my app as I could stably crash my app by exiting the app and entering the app again with playback on. Any help will be greatly appreciated. </p>
",4068957,,,,,2016-04-14 19:34:40,Memory Leak issue : com.example.android.uamp.ui.FullScreenPlayerActivity has leaked,<android><memory-leaks><exoplayer>,1,3,1,,
Android,36174807,1,,,,,,3/23/2016 9:53:38,,8,4355,"<p>I want to capture image while recording video using camera2 API.</p>

<p>Two separate demos are available.
1. <a href=""https://github.com/googlesamples/android-Camera2Basic"" rel=""noreferrer"">To capture image</a> and 
2. <a href=""https://github.com/googlesamples/android-Camera2Video"" rel=""noreferrer"">To record video</a></p>

<p>I tried to combine them into one app. But confused in many things. Like</p>

<ul>
<li>CameraDevice is single which representation of a single camera connected to an Android device.</li>
<li>Different template needed in request. For image : <code>mCameraDevice.createCaptureRequest(CameraDevice.TEMPLATE_PREVIEW);</code> and for video <code>mCameraDevice.createCaptureRequest(CameraDevice.TEMPLATE_RECORD);</code></li>
<li>In createCaptureSession method surface of ImageReader is needed and for video MediaRecorder is needed.</li>
</ul>

<p>CameraCaptureSession.StateCallback is needed in createCaptureSession method for both image and video.</p>

<p>And camera2 APIs are new. So no more examples available on Google.</p>

<p>Anyone has any idea about this? like how to capture photo while recording in android?</p>
",759684,,1033581,,2017-12-14 10:44:03,2018-09-12 16:46:05,How to programmatically take Photos while recording Video using Camera2 API in Android,<android><image><video><android-camera2>,6,2,6,,
Android,36265659,1,,,,,,3/28/2016 15:40:04,,3,3663,"<p>I'm using the Mobile vision api's face tracking example and i'm trying to take picture with tapping on the screen. Firstly i wanted to take any picture on the screen with button and i tryed this code but it failed. I look at the barcode reader example and there is tap method but i couldn't succeed. What approach that i should use this case?</p>

<p><a href=""https://github.com/googlesamples/android-vision/tree/master/visionSamples/FaceTracker"" rel=""nofollow"">pure FaceTracking github code</a></p>

<pre><code>private void takeImage() {
    camera.takePicture(null, null, new PictureCallback() {

        private File imageFile;

        @Override
        public void onPictureTaken(byte[] data, Camera camera) {
            try {
                // convert byte array into bitmap
                Bitmap loadedImage = null;
                Bitmap rotatedBitmap = null;
                loadedImage = BitmapFactory.decodeByteArray(data, 0,
                        data.length);

                // rotate Image
                Matrix rotateMatrix = new Matrix();
                rotateMatrix.postRotate(rotation);
                rotatedBitmap = Bitmap.createBitmap(loadedImage, 0, 0,
                        loadedImage.getWidth(), loadedImage.getHeight(),
                        rotateMatrix, false);
                String state = Environment.getExternalStorageState();
                File folder = null;
                if (state.contains(Environment.MEDIA_MOUNTED)) {
                    folder = new File(Environment
                            .getExternalStorageDirectory() + ""/Demo"");
                } else {
                    folder = new File(Environment
                            .getExternalStorageDirectory() + ""/Demo"");
                }

                boolean success = true;
                if (!folder.exists()) {
                    success = folder.mkdirs();
                }
                if (success) {
                    java.util.Date date = new java.util.Date();
                    imageFile = new File(folder.getAbsolutePath()
                            + File.separator
                            + new Timestamp(date.getTime()).toString()
                            + ""Image.jpg"");

                    imageFile.createNewFile();
                } else {
                    Toast.makeText(getBaseContext(), ""Image Not saved"",
                            Toast.LENGTH_SHORT).show();
                    return;
                }

                ByteArrayOutputStream ostream = new ByteArrayOutputStream();

                // save image into gallery
                rotatedBitmap.compress(CompressFormat.JPEG, 100, ostream);

                FileOutputStream fout = new FileOutputStream(imageFile);
                fout.write(ostream.toByteArray());
                fout.close();
                ContentValues values = new ContentValues();

                values.put(Images.Media.DATE_TAKEN,
                        System.currentTimeMillis());
                values.put(Images.Media.MIME_TYPE, ""image/jpeg"");
                values.put(MediaStore.MediaColumns.DATA,
                        imageFile.getAbsolutePath());

                CameraDemoActivity.this.getContentResolver().insert(
                        Images.Media.EXTERNAL_CONTENT_URI, values);

            } catch (Exception e) {
                e.printStackTrace();
            }

        }
    });
}

@Override
public void onClick(View v) {
    case R.id.captureImage:
        takeImage();
        break;
    default:
        break;
    }
}
</code></pre>
",6064497,,6064497,,2016-03-28 20:01:34,2016-06-09 11:10:44,How Capture Picture while mobile vision api - face tracking,<android><google-vision>,2,2,,,
Android,36440019,1,,,,,,4/6/2016 1:45:08,,1,199,"<p>I can't find information about face detection on preview in android.hardware.Camera2, would anybody help me with a complete example?</p>

<p>I saw some questions with camera2 examples in github but I can't understand them.</p>

<p>I used Camera2 sample from Google: <a href=""https://github.com/googlesamples/android-Camera2Basic"" rel=""nofollow"">https://github.com/googlesamples/android-Camera2Basic</a>.</p>

<p>I set face recognition mode to FULL.</p>

<pre><code>mPreviewRequestBuilder.set(CaptureRequest.STATISTICS_FACE_DETECT_MODE, CameraMetadata.STATISTICS_FACE_DETECT_MODE_FULL);
</code></pre>

<p>Also I checked <code>STATISTICS_INFO_MAX_FACE_COUNT</code> and <code>STATISTICS_INFO_AVAILABLE_FACE_DETECT_MODES</code>:</p>

<pre><code>int max_count = characteristics.get(
CameraCharacteristics.STATISTICS_INFO_MAX_FACE_COUNT);
int modes [] = characteristics.get(
CameraCharacteristics.STATISTICS_INFO_AVAILABLE_FACE_DETECT_MODES); 
 Output: maxCount : 5 , modes : [0, 2]
</code></pre>

<p>My CaptureCallback:</p>

<pre><code>private CameraCaptureSession.CaptureCallback mCaptureCallback = new CameraCaptureSession.CaptureCallback() {

private void process(CaptureResult result) {
            Integer mode = result.get(CaptureResult.STATISTICS_FACE_DETECT_MODE);
            Face [] faces = result.get(CaptureResult.STATISTICS_FACES);
            if(faces != null &amp;&amp; mode != null)
                Log.e(""tag"", ""faces : "" + faces.length + "" , mode : "" + mode ); 
}

@Override
public void onCaptureProgressed(CameraCaptureSession session, CaptureRequest request,
                                CaptureResult partialResult) {
    process(partialResult);
}

@Override
public void onCaptureCompleted(CameraCaptureSession session, CaptureRequest request,
                               TotalCaptureResult result) {
    process(result);
}     `
</code></pre>

<p>Output: faces : 0 , mode : 2</p>

<pre><code>public static final int STATISTICS_FACE_DETECT_MODE_FULL = 2; 
</code></pre>

<p>Faces length is constantly 0. Looks like it doesn't recognise a face properly or I missed something.</p>

<p>I know approach with FaceDetector. I just wanted to check how it works with new camera2 Face.</p>

<p>I need to detect face on preview of camera2!</p>
",6072423,,6083675,,2016-04-06 2:07:34,2018-10-17 17:52:49,I can't detect face with camera2,<java><android><camera2>,1,0,,,
Android,36481333,1,,,,,,4/7/2016 15:53:20,,4,827,"<p>I have kontakt.io beacon and I try to write application for background scanning with nearby API.</p>

<p>I use this method to subscribe messages: </p>

<pre><code>SubscribeOptions options = new SubscribeOptions.Builder()
            // Finds messages attached to BLE beacons. See
            // https://developers.google.com/beacons/
            .setStrategy(Strategy.BLE_ONLY)
            .build();

    Nearby.Messages.subscribe(mGoogleApiClient, getPendingIntent(), options)
            .setResultCallback(new ResultCallback&lt;Status&gt;() {
                @Override
                public void onResult(@NonNull Status status) {
                    if (status.isSuccess()) {
                        Log.i(TAG, ""subscribed successfully"");
                        mSubState = SubState.SUBSCRIBING;
                        // Start background service for handling the notification.
                        getActivity().startService(getBackgroundSubscribeServiceIntent());
                    } else {
                        Log.i(TAG, ""could not subscribe"");
                        handleUnsuccessfulNearbyResult(status);
                    }
                }
            });
</code></pre>

<p>My code is according to this sample:
<a href=""https://github.com/googlesamples/android-nearby/tree/master/messages/NearbyBackgroundBeacons"" rel=""nofollow"">https://github.com/googlesamples/android-nearby/tree/master/messages/NearbyBackgroundBeacons</a></p>

<p>IÂ´m receiving messages correctly, but when I kill application no more message come.</p>

<p>Is there any way to get messages from nearby after killing application?</p>
",5967417,,,,,2016-05-03 22:02:48,Google nearby API background scan doesnÂ´t work after application kill,<android><google-play-services><beacon><google-nearby>,2,0,2,,
Android,36530511,1,,,,,,4/10/2016 13:41:40,,1,679,"<p>I've been looking for a solution to this and I came across several answers that didn't fit the use-case. The <a href=""https://github.com/googlesamples/android-fit/tree/master/BasicSensorsApi"" rel=""nofollow"">sample code from Google</a> works fine if imported as is, but the code sits in an Activity and is messy if you want to integrate into a real project where the code would ideally be in a fragment.</p>

<p>The issue is with the <strong>enableAutoManage</strong> functionality and what to do in the fresh install case where the googleApiClient is built but the authentication/account-pick screen is not yet done and you end up with connection failed on the googleApiClient. I'm going to answer this in full, below.</p>
",764897,,,,,2018-09-24 5:50:20,How to implement Google Fit step counter within a Fragment,<android><google-fit>,1,0,1,,
Android,36580297,1,,,,,,4/12/2016 17:33:47,,2,2360,"<p>I am trying to use the new Fingerprint Scan feature on android. I followed the google's example from here:
<a href=""https://github.com/googlesamples/android-FingerprintDialog"" rel=""nofollow"">https://github.com/googlesamples/android-FingerprintDialog</a></p>

<p>But when I run my program I get this error:</p>

<pre><code>04-12 22:51:06.475 9218-9218/ivote.android.gj.ivote E/AndroidRuntime: FATAL EXCEPTION: main
                                                                      Process: ivote.android.gj.ivote, PID: 9218
                                                                      java.lang.NoClassDefFoundError: Failed resolution of: Landroid/hardware/fingerprint/FingerprintManager;
                                                                          at ivote.android.gj.ivote.ActivityPackage.HomeScreen.fingerScan(HomeScreen.java:233)
                                                                          at ivote.android.gj.ivote.ActivityPackage.HomeScreen$7.onResponse(HomeScreen.java:188)
                                                                          at ivote.android.gj.ivote.ActivityPackage.HomeScreen$7.onResponse(HomeScreen.java:176)
                                                                          at com.android.volley.toolbox.StringRequest.deliverResponse(StringRequest.java:60)
                                                                          at com.android.volley.toolbox.StringRequest.deliverResponse(StringRequest.java:30)
                                                                          at com.android.volley.ExecutorDelivery$ResponseDeliveryRunnable.run(ExecutorDelivery.java:99)
                                                                          at android.os.Handler.handleCallback(Handler.java:739)
                                                                          at android.os.Handler.dispatchMessage(Handler.java:95)
                                                                          at android.os.Looper.loop(Looper.java:135)
                                                                          at android.app.ActivityThread.main(ActivityThread.java:5383)
                                                                          at java.lang.reflect.Method.invoke(Native Method)
                                                                          at java.lang.reflect.Method.invoke(Method.java:372)
                                                                          at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:939)
                                                                          at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:734)
                                                                       Caused by: java.lang.ClassNotFoundException: Didn't find class ""android.hardware.fingerprint.FingerprintManager"" on path: DexPathList[[zip file ""/data/app/ivote.android.gj.ivote-2/base.apk""],nativeLibraryDirectories=[/vendor/lib64, /system/lib64]]
                                                                          at dalvik.system.BaseDexClassLoader.findClass(BaseDexClassLoader.java:56)
                                                                          at java.lang.ClassLoader.loadClass(ClassLoader.java:511)
                                                                          at java.lang.ClassLoader.loadClass(ClassLoader.java:469)
                                                                          at ivote.android.gj.ivote.ActivityPackage.HomeScreen.fingerScan(HomeScreen.java:233)Â 
                                                                          at ivote.android.gj.ivote.ActivityPackage.HomeScreen$7.onResponse(HomeScreen.java:188)Â 
                                                                          at ivote.android.gj.ivote.ActivityPackage.HomeScreen$7.onResponse(HomeScreen.java:176)Â 
                                                                          at com.android.volley.toolbox.StringRequest.deliverResponse(StringRequest.java:60)Â 
                                                                          at com.android.volley.toolbox.StringRequest.deliverResponse(StringRequest.java:30)Â 
                                                                          at com.android.volley.ExecutorDelivery$ResponseDeliveryRunnable.run(ExecutorDelivery.java:99)Â 
                                                                          at android.os.Handler.handleCallback(Handler.java:739)Â 
                                                                          at android.os.Handler.dispatchMessage(Handler.java:95)Â 
                                                                          at android.os.Looper.loop(Looper.java:135)Â 
                                                                          at android.app.ActivityThread.main(ActivityThread.java:5383)Â 
                                                                          at java.lang.reflect.Method.invoke(Native Method)Â 
                                                                          at java.lang.reflect.Method.invoke(Method.java:372)Â 
                                                                          at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:939)Â 
                                                                          at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:734)Â 
                                                                        Suppressed: java.lang.ClassNotFoundException: android.hardware.fingerprint.FingerprintManager
                                                                          at java.lang.Class.classForName(Native Method)
                                                                          at java.lang.BootClassLoader.findClass(ClassLoader.java:781)
                                                                          at java.lang.BootClassLoader.loadClass(ClassLoader.java:841)
                                                                          at java.lang.ClassLoader.loadClass(ClassLoader.java:504)
                                                                                ... 15 more
                                                                       Caused by: java.lang.NoClassDefFoundError: Class not found using the boot class loader; no stack available
</code></pre>

<p>I tried to find the solution of this issue on google, but it didn't help. Few SO question pointed out mistake n gradle file, so my app gradle file looks like this:</p>

<pre><code>apply plugin: 'com.android.application'

android {
    compileSdkVersion 23
    buildToolsVersion ""23.0.1""

    defaultConfig {
        applicationId ""ivote.android.gj.ivote""
        minSdkVersion 15
        targetSdkVersion 23
        versionCode 1
        versionName ""1.0""
    }
    buildTypes {
        release {
            minifyEnabled false
            proguardFiles getDefaultProguardFile('proguard-android.txt'), 'proguard-rules.pro'
        }
    }
}

repositories {
    jcenter()
    mavenCentral()
    maven { url ""https://jitpack.io"" }
}

dependencies {
    compile fileTree(dir: 'libs', include: ['*.jar'])
    compile 'com.android.support:appcompat-v7:23.1.1'
    compile 'com.android.support:design:23.1.1'
    compile 'com.android.support:support-v4:23.1.1'
    compile ""com.android.support:support-v13:23.1.1""
    compile 'com.squareup.picasso:picasso:2.5.2'
    compile project(path: ':volley')
    compile 'com.android.support:cardview-v7:23.1.1'
    compile 'com.android.support:recyclerview-v7:23.1.1'
    compile 'com.github.PhilJay:MPAndroidChart:v2.2.3'
    compile 'com.journeyapps:zxing-android-embedded:3.0.2@aar'
    compile 'com.google.zxing:core:3.2.0'
}
</code></pre>

<p>I am trying to solve this error for a while, so please if any one can help it would be great help. Thanks in Advance!</p>
",4123672,,,,,2017-07-19 6:34:01,Error While using FIngerprintManager android API,<java><android><classnotfoundexception><android-fingerprint-api>,2,2,,,
Android,36669064,1,,,,,,4/16/2016 20:00:19,,1,3823,"<p>I'm developing an android app which allows user to check a QR Code content and execute something according read result.</p>

<p>In order to improve the performance i'd like to implement 2 methods:</p>

<ul>
<li>onClickFocus (which allows user to focus the camera when screen is clicked)</li>
<li>turnOn/OFF flash (which allows user to turn on/off the flash)</li>
</ul>

<p>I've done some digging and figured out that for manage camera and flash I need to be able to manage the <code>Camera</code> as object itself.</p>

<p>And here is where the nightmare begin.</p>

<p>I'm using the follow code to show camera result and track QR codes.</p>

<pre><code>    import android.app.FragmentTransaction;
import android.content.Context;


import android.os.Bundle;
import android.os.Vibrator;
import android.support.v4.widget.DrawerLayout;
import android.support.v7.app.AppCompatActivity;
import android.util.Log;
import android.util.SparseArray;
import android.view.SurfaceHolder;
import android.view.SurfaceView;
import android.widget.TextView;

import com.google.android.gms.vision.Detector;
import com.google.android.gms.vision.barcode.Barcode;
import com.google.android.gms.vision.barcode.BarcodeDetector;
import java.io.IOException;



public class MainReadActivity extends AppCompatActivity {


    public SurfaceView cameraView;
    private TextView barcodeInfo;
    public BarcodeDetector barcodeDetector;
    public CameraSource cameraSource;
    public Vibrator v;
    public String textInfo;
    public DrawerLayout mDrawerLayout;




    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main_read);
        v = (Vibrator) getSystemService(Context.VIBRATOR_SERVICE);

        mDrawerLayout = (DrawerLayout) findViewById(R.id.drawer_layout_main);


        getSupportFragmentManager().findFragmentById(R.id.drawer_layout_main);

        cameraView = (SurfaceView) findViewById(R.id.camera_view);


        //barcodeInfo = (TextView) findViewById(R.id.code_info);

        barcodeDetector = new BarcodeDetector.Builder(this)
                .setBarcodeFormats(Barcode.QR_CODE)
                .build();


        cameraSource = new CameraSource.Builder(this, barcodeDetector).build();



        cameraView.getHolder().addCallback(new SurfaceHolder.Callback() {

            @Override
            public void surfaceCreated(SurfaceHolder holder) {


                try {
                    cameraSource.start(cameraView.getHolder());
                } catch (IOException ie) {
                    Log.e(""CAMERA SOURCE"", ie.getMessage());
                }

            }


            @Override
            public void surfaceChanged(SurfaceHolder holder, int format, int width, int height) {
            }

            @Override
            public void surfaceDestroyed(SurfaceHolder holder) {
                cameraSource.stop();
            }

        });


        barcodeDetector.setProcessor(new Detector.Processor&lt;Barcode&gt;() {

            @Override
            public void release() {

            }


            @Override
            public void receiveDetections(Detector.Detections&lt;Barcode&gt; detections) {
                final SparseArray&lt;Barcode&gt; barcodes = detections.getDetectedItems();

                if (barcodes.size() != 0) {


                    new Runnable() {    // Use the post method of the TextView
                        public void run() {


                            v.vibrate(500);
                          // textInfo = barcodes.valueAt(0).displayValue;

                            MyFragmentDialog newf = new MyFragmentDialog();
                            FragmentTransaction transaction = getFragmentManager().beginTransaction();
                            transaction.replace(R.id.fragment_container, newf);

                            transaction.addToBackStack(""tag"");
                            transaction.commit();

                        }
                    };
                }
            }

        });







    }

    public void onBackPressed() {
        // do nothing
    }
}
</code></pre>

<p>So, I need to get access to Camera, from CameraSource (am I right?!)
Once it is not possible, I tryed to use this <a href=""https://github.com/googlesamples/android-vision/blob/master/visionSamples/barcode-reader/app/src/main/java/com/google/android/gms/samples/vision/barcodereader/ui/camera/CameraSource.java"" rel=""nofollow"">CameraSource</a> class from GoogleSamples's git which allows to use setFocusMode method... But unfortunately I wasn't successful.</p>

<p>I also tryed to use API 21, since API 22 <a href=""http://developer.android.com/reference/android/hardware/camera2/package-summary.html"" rel=""nofollow"">no longer supports</a> Camera and CameraPreferences.</p>

<p>I'm pretty sure this is not only my problem, but couldn't find a way to fix it.</p>

<p>Anyone can help?</p>

<p>FIXED:</p>

<p>Just use this CameraSource (github.com/googlesamples/android-vision/blob/master/visionSamples/barcode-reader/app/src/main/java/com/google/android/gms/samples/vision/barcodereader/ui/camera/CameraSource.java) . Yeah, I know, I've suggested it... But this time i fixed my problem! So, if you're going to use this, make sure your compile looks like this:</p>

<pre><code>compile 'com.google.android.gms:play-services:8.1.0'
</code></pre>
",5991732,,5991732,,2016-04-18 1:10:36,2019-03-18 13:17:25,Create on click focus on CameraSource - Android QR Code detection,<android><camera><android-camera><qr-code><android-vision>,3,0,,,
Android,36713033,1,,,,,,4/19/2016 8:39:51,,2,494,"<p>Android's <code>Content Provider</code> <a href=""http://developer.android.com/guide/topics/manifest/provider-element.html#auth"" rel=""nofollow"">must have</a>:</p>

<blockquote>
  <p>At least one authority must be specified.</p>
</blockquote>

<p>So for example in Google's samples <a href=""https://github.com/googlesamples/android-BasicSyncAdapter/blob/master/Application/src/main/AndroidManifest.xml"" rel=""nofollow"">android-BasicSyncAdapter AndroidManifest.xml</a> there is</p>

<pre><code>&lt;provider
    android:name="".provider.FeedProvider""
    android:authorities=""com.example.android.basicsyncadapter""
    android:exported=""false"" /&gt;
</code></pre>

<p>Then to implement this CP one need to define the same String inside the CP like in <a href=""https://github.com/googlesamples/android-BasicSyncAdapter/blob/8210761ee67e06210d14ce913b2d82618cee0bb7/Application/src/main/java/com/example/android/basicsyncadapter/provider/FeedProvider.java"" rel=""nofollow"">android-BasicSyncAdapter FeedProvider.java</a> <code>CONTENT_AUTHORITY</code></p>

<pre><code>public static final String CONTENT_AUTHORITY = ""com.example.android.basicsyncadapter"";
</code></pre>

<p>As we have to define this String twice, isn't this basically breaking the DRY rule - if I change it in one place, I have to remember to change it somewhere else as well.</p>
",2401535,,,,,2016-05-01 18:56:55,Does Android Content Provider authority definition break the DRY rule?,<android><android-contentprovider><dry>,1,1,2,,
Android,36715739,1,,,,,,4/19/2016 10:29:43,,2,1541,"<p>I am trying to capture and save the image from camera using this project <a href=""https://github.com/googlesamples/android-vision/tree/master/visionSamples/FaceTracker"" rel=""nofollow"">https://github.com/googlesamples/android-vision/tree/master/visionSamples/FaceTracker</a></p>

<p>The code to capture image is in face track activity java file</p>

<pre><code>final CameraSource.ShutterCallback shutterCallback = new CameraSource.ShutterCallback() {
            @Override
            public void onShutter() {
                Log.d(TAG, ""onShutter"");
                Toast.makeText(view.getContext(),""sd"",Toast.LENGTH_SHORT).show();
            }
        };
        CameraSource.PictureCallback myPictureCallback_JPG = new CameraSource.PictureCallback(){
            @Override
            public void onPictureTaken(byte[] arg0) {
            Bitmap bitmapPicture = BitmapFactory.decodeByteArray(arg0, 0, arg0.length);

            //save file
            String path = Environment.DIRECTORY_DCIM.toString();
            //Toast.makeText(getApplicationContext(),path,Toast.LENGTH_SHORT).show();
            OutputStream fOut = null;
            File file = new File(path, ""FitnessGirl""+"".jpg""); // the File to save to
            try{
                fOut = new FileOutputStream(file);
                bitmapPicture.compress(Bitmap.CompressFormat.JPEG, 85, fOut); // saving the Bitmap to a file compressed as a JPEG with 85% compression rate
                MediaStore.Images.Media.insertImage(getContentResolver(),file.getAbsolutePath(),file.getName(),file.getName());
                fOut.flush();
                fOut.close(); // do not forget to close the stream

            }catch (FileNotFoundException exception){

            }catch (IOException e){

            }
            //save file
            }};

        mCameraSource.takePicture(shutterCallback, myPictureCallback_JPG);
</code></pre>

<p>above code is not working, can anyone help?</p>
",5524420,,2606144,,2016-06-08 10:32:04,2016-06-08 10:32:04,camerasource takepicture is not working,<java><android><android-camera>,1,2,,,
Android,36739298,1,,,,,,4/20/2016 9:23:00,,2,592,"<p>I am trying to record video from <a href=""https://github.com/googlesamples/android-Camera2Video"" rel=""nofollow"">android camera2 sample</a></p>

<p>All works fine but when I play the video after recording (from the sd card), the video starts freezing and you can hear just the audio at the background and when the audio stops, the video start playing without the audio and the time of the video jumps from seconds to minites (03:24)</p>

<pre><code>private void setUpMediaRecorder() throws IOException {
    mMediaRecorder.setAudioSource(MediaRecorder.AudioSource.MIC);
    mMediaRecorder.setVideoSource(MediaRecorder.VideoSource.SURFACE);
    mMediaRecorder.setOutputFormat(MediaRecorder.OutputFormat.MPEG_4);

    mMediaRecorder.setOutputFile(getVideoFile().getAbsolutePath());
    mMediaRecorder.setVideoEncodingBitRate(10000000);
    mMediaRecorder.setVideoFrameRate(30);
    //mMediaRecorder.setMaxDuration(60000); // Set max duration 60 sec.
    mMediaRecorder.setVideoSize(mVideoSize.getWidth(), mVideoSize.getHeight());
    mMediaRecorder.setVideoEncoder(MediaRecorder.VideoEncoder.H264);
    mMediaRecorder.setAudioEncoder(MediaRecorder.AudioEncoder.AAC);


    int rotation = getWindowManager().getDefaultDisplay().getRotation();
    int orientation = ORIENTATIONS.get(rotation);

    if (mCameraType == 1) {
        if (orientation == 90) {
            mMediaRecorder.setOrientationHint(270);
        } else if (orientation == 270) {
            mMediaRecorder.setOrientationHint(90);
        }
    }
    else {
        mMediaRecorder.setOrientationHint(orientation);
    }
    mMediaRecorder.prepare();
}
</code></pre>

<p>Figure out that it works without those lines:</p>

<pre><code>mMediaRecorder.setAudioSource(MediaRecorder.AudioSource.MIC);
mMediaRecorder.setAudioEncoder(MediaRecorder.AudioEncoder.AAC);
</code></pre>

<p>How can I make it works with sound?</p>

<p>The stupid solution is to restart the device.
Is someone know why is that happening? </p>

<p>Thanks for helping</p>
",5904387,,5904387,,2016-06-13 10:16:48,2017-04-05 1:38:17,Android camera2 delay between the video to the sound,<android><android-mediarecorder><camera2>,1,2,2,,
Android,36755427,1,,,,,,4/20/2016 21:21:32,,3,454,"<p>I have an Android NDK project which consists entirely of C/C++ code, and it basically processes images without using any external libraries.</p>

<p>I'm using Android Studio + Gradle NDK Experimental plugin (0.7.0-alpha1).</p>

<p>Now, I need to integrate ffmpeg as a native library to use it from the C/C++ code in order to decode a H.264 video frame.</p>

<p><strong>These are the questions I've found here regarding this issue:</strong></p>

<p><a href=""https://stackoverflow.com/questions/22079718/android-integrating-ffmpeg-and-android-ndk-r9c"">Android - Integrating ffmpeg and android-ndk-r9c</a></p>

<p><a href=""https://stackoverflow.com/questions/26247206/android-ndk-w-ffmpeg-library-error-running-project"">Android NDK w/ ffmpeg library - error running project</a></p>

<p><a href=""https://stackoverflow.com/questions/19576420/using-ffmpeg-native-libraries-with-android-ndk"">Using FFmpeg native libraries with Android-NDK</a></p>

<p><a href=""https://stackoverflow.com/questions/36426226/can-not-build-with-prebuilt-static-libraries-using-gradle-experimental"">Can not build with prebuilt static libraries using gradle-experimental</a></p>

<p><strong>Here is my build.gradle file:</strong></p>

<pre><code>apply plugin: 'com.android.model.application'

def ffmpeg_path = file(project(':ffmpeg').projectDir).absolutePath + ""/ffmpeg-android""

model {

    repositories {
        libs(PrebuiltLibraries) {
            libavcodec {
                headers.srcDir ""${ffmpeg_path}/include""
                binaries.withType(StaticLibraryBinary) {
                    staticLibraryFile = file(""${ffmpeg_path}/${targetPlatform.getName()}/lib/libavcodec.a"")
                }
            }
            libavutil {
                headers.srcDir ""${ffmpeg_path}/include""
                binaries.withType(StaticLibraryBinary) {
                    staticLibraryFile = file(""${ffmpeg_path}/${targetPlatform.getName()}/lib/libavutil.a"")
                }
            }
            libswresample {
                headers.srcDir ""${ffmpeg_path}/include""
                binaries.withType(StaticLibraryBinary) {
                    staticLibraryFile = file(""${ffmpeg_path}/${targetPlatform.getName()}/lib/libswresample.a"")
                }
            }
            libswscale {
                headers.srcDir ""${ffmpeg_path}/include""
                binaries.withType(StaticLibraryBinary) {
                    staticLibraryFile = file(""${ffmpeg_path}/${targetPlatform.getName()}/lib/libswscale.a"")
                }
            }
            libavformat {
                headers.srcDir ""${ffmpeg_path}/include""
                binaries.withType(StaticLibraryBinary) {
                    staticLibraryFile = file(""${ffmpeg_path}/${targetPlatform.getName()}/lib/libavformat.a"")
                }
            }
            libavdevice {
                headers.srcDir ""${ffmpeg_path}/include""
                binaries.withType(StaticLibraryBinary) {
                    staticLibraryFile = file(""${ffmpeg_path}/${targetPlatform.getName()}/lib/libavdevice.a"")
                }
            }
            libavfilter {
                headers.srcDir ""${ffmpeg_path}/include""
                binaries.withType(StaticLibraryBinary) {
                    staticLibraryFile = file(""${ffmpeg_path}/${targetPlatform.getName()}/lib/libavfilter.a"")
                }
            }
            libpostproc {
                headers.srcDir ""${ffmpeg_path}/include""
                binaries.withType(StaticLibraryBinary) {
                    staticLibraryFile = file(""${ffmpeg_path}/${targetPlatform.getName()}/lib/libpostproc.a"")
                }
            }
        }
    }

    android {
        compileSdkVersion = 23
        buildToolsVersion = ""23.0.2""

        defaultConfig.with {
            applicationId = ""com.example.hellojni""
            minSdkVersion.apiLevel = 4
            targetSdkVersion.apiLevel = 23
        }
    }

    /*
     * native build settings
     */
    android.ndk {
        moduleName = ""hello-jni""
        platformVersion = 9 //same as minSdkVersion.apiLevel for better compatibility
        stl    = ""c++_static""
        abiFilters.addAll([""armeabi"", ""armeabi-v7a"", ""x86""]) //filtering ABIs on the ones Google Play Games library is compatible with.
    }
    android.buildTypes {
        release {
            minifyEnabled = false
            proguardFiles.add(file('proguard-rules.txt'))
        }
    }

    android.sources {
        main {
            jni {
                dependencies {
                    library ""libavcodec"" linkage ""static""
                    library ""libavutil"" linkage ""static""
                    library ""libswresample"" linkage ""static""
                    library ""libswscale"" linkage ""static""
                    library ""libavformat"" linkage ""static""
                    library ""libavdevice"" linkage ""static""
                    library ""libavfilter"" linkage ""static""
                    library ""libpostproc"" linkage ""static""
                }
            }
        }
    }

}
</code></pre>

<p>I based on <a href=""https://github.com/googlesamples/android-ndk/tree/master/hello-thirdparty"" rel=""nofollow noreferrer"">this sample</a> from Google which integrates an external native library.</p>

<p>This is the ffmpeg project I compiled before importing it into mine:
<a href=""https://github.com/WritingMinds/ffmpeg-android"" rel=""nofollow noreferrer"">https://github.com/WritingMinds/ffmpeg-android</a></p>

<p>I've added all the .a and .h files and I'm able to import the headers in my C/C++ code, but when I try to compile it I get the following error:</p>

<pre><code>/Users/marcos/Documents/Android/fdecoder/ffmpeg/ffmpeg-android/armeabi-v7a/lib/libavformat.a(utils.o):utils.c:function try_decode_frame: error: undefined reference to 'avpriv_h264_has_num_reorder_frames'
/Users/marcos/Documents/Android/fdecoder/ffmpeg/ffmpeg-android/armeabi-v7a/lib/libavformat.a(utils.o):utils.c:function compute_pkt_fields: error: undefined reference to 'avpriv_h264_has_num_reorder_frames'
/Users/marcos/Documents/Android/fdecoder/ffmpeg/ffmpeg-android/armeabi-v7a/lib/libavformat.a(utils.o):utils.c:function parse_packet: error: undefined reference to 'av_parser_parse2'
/Users/marcos/Documents/Android/fdecoder/ffmpeg/ffmpeg-android/armeabi-v7a/lib/libavformat.a(utils.o):utils.c:function parse_packet: error: undefined reference to 'av_parser_close'
/Users/marcos/Documents/Android/fdecoder/ffmpeg/ffmpeg-android/armeabi-v7a/lib/libavformat.a(utils.o):utils.c:function read_frame_internal: error: undefined reference to 'av_parser_init'
/Users/marcos/Documents/Android/fdecoder/ffmpeg/ffmpeg-android/armeabi-v7a/lib/libavformat.a(utils.o):utils.c:function avformat_find_stream_info: error: undefined reference to 'av_parser_init'
/Users/marcos/Documents/Android/fdecoder/ffmpeg/ffmpeg-android/armeabi-v7a/lib/libavformat.a(utils.o):utils.c:function avformat_find_stream_info: error: undefined reference to 'avcodec_pix_fmt_to_codec_tag'
/Users/marcos/Documents/Android/fdecoder/ffmpeg/ffmpeg-android/armeabi-v7a/lib/libavformat.a(utils.o):utils.c:function avformat_find_stream_info: error: undefined reference to 'avpriv_get_raw_pix_fmt_tags'
/Users/marcos/Documents/Android/fdecoder/ffmpeg/ffmpeg-android/armeabi-v7a/lib/libavformat.a(utils.o):utils.c:function ff_stream_add_bitstream_filter: error: undefined reference to 'av_bitstream_filter_init'
/Users/marcos/Documents/Android/fdecoder/ffmpeg/ffmpeg-android/armeabi-v7a/lib/libavformat.a(utils.o):utils.c:function ff_stream_add_bitstream_filter: error: undefined reference to 'av_bitstream_filter_close'
/Users/marcos/Documents/Android/fdecoder/ffmpeg/ffmpeg-android/armeabi-v7a/lib/libavformat.a(utils.o):utils.c:function av_apply_bitstream_filters: error: undefined reference to 'av_bitstream_filter_filter'
/Users/marcos/Documents/Android/fdecoder/ffmpeg/ffmpeg-android/armeabi-v7a/lib/libavformat.a(aadec.o):aadec.c:function aa_read_packet: error: undefined reference to 'av_tea_init'
/Users/marcos/Documents/Android/fdecoder/ffmpeg/ffmpeg-android/armeabi-v7a/lib/libavformat.a(aadec.o):aadec.c:function aa_read_packet: error: undefined reference to 'av_tea_crypt'
/Users/marcos/Documents/Android/fdecoder/ffmpeg/ffmpeg-android/armeabi-v7a/lib/libavformat.a(aadec.o):aadec.c:function aa_read_header: error: undefined reference to 'av_tea_alloc'
/Users/marcos/Documents/Android/fdecoder/ffmpeg/ffmpeg-android/armeabi-v7a/lib/libavformat.a(aadec.o):aadec.c:function aa_read_header: error: undefined reference to 'av_tea_init'
/Users/marcos/Documents/Android/fdecoder/ffmpeg/ffmpeg-android/armeabi-v7a/lib/libavformat.a(aadec.o):aadec.c:function aa_read_header: error: undefined reference to 'av_tea_crypt'
/Users/marcos/Documents/Android/fdecoder/ffmpeg/ffmpeg-android/armeabi-v7a/lib/libavformat.a(ac3dec.o):ac3dec.c:function ac3_eac3_probe.isra.0: error: undefined reference to 'avpriv_ac3_parse_header'
/Users/marcos/Documents/Android/fdecoder/ffmpeg/ffmpeg-android/armeabi-v7a/lib/libavformat.a(adtsenc.o):adtsenc.c:function adts_write_header: error: undefined reference to 'avpriv_mpeg4audio_get_config'
/Users/marcos/Documents/Android/fdecoder/ffmpeg/ffmpeg-android/armeabi-v7a/lib/libavformat.a(adtsenc.o):adtsenc.c:function adts_write_header: error: undefined reference to 'avpriv_copy_pce_data'
/Users/marcos/Documents/Android/fdecoder/ffmpeg/ffmpeg-android/armeabi-v7a/lib/libavformat.a(asfcrypt.o):asfcrypt.c:function ff_asfcrypt_dec: error: undefined reference to 'av_rc4_alloc'
/Users/marcos/Documents/Android/fdecoder/ffmpeg/ffmpeg-android/armeabi-v7a/lib/libavformat.a(asfcrypt.o):asfcrypt.c:function ff_asfcrypt_dec: error: undefined reference to 'av_rc4_init'
/Users/marcos/Documents/Android/fdecoder/ffmpeg/ffmpeg-android/armeabi-v7a/lib/libavformat.a(asfcrypt.o):asfcrypt.c:function ff_asfcrypt_dec: error: undefined reference to 'av_rc4_crypt'
/Users/marcos/Documents/Android/fdecoder/ffmpeg/ffmpeg-android/armeabi-v7a/lib/libavformat.a(asfcrypt.o):asfcrypt.c:function ff_asfcrypt_dec: error: undefined reference to 'av_rc4_init'
/Users/marcos/Documents/Android/fdecoder/ffmpeg/ffmpeg-android/armeabi-v7a/lib/libavformat.a(asfcrypt.o):asfcrypt.c:function ff_asfcrypt_dec: error: undefined reference to 'av_rc4_crypt'
/Users/marcos/Documents/Android/fdecoder/ffmpeg/ffmpeg-android/armeabi-v7a/lib/libavformat.a(matroska.o):matroska.c:function ff_mkv_stereo3d_conv: error: undefined reference to 'av_stereo3d_alloc'
/Users/marcos/Documents/Android/fdecoder/ffmpeg/ffmpeg-android/armeabi-v7a/lib/libavformat.a(nut.o):nut.c:function ff_nut_add_sp: error: undefined reference to 'av_tree_node_alloc'
/Users/marcos/Documents/Android/fdecoder/ffmpeg/ffmpeg-android/armeabi-v7a/lib/libavformat.a(nut.o):nut.c:function ff_nut_add_sp: error: undefined reference to 'av_tree_insert'
/Users/marcos/Documents/Android/fdecoder/ffmpeg/ffmpeg-android/armeabi-v7a/lib/libavformat.a(nut.o):nut.c:function ff_nut_free_sp: error: undefined reference to 'av_tree_enumerate'
/Users/marcos/Documents/Android/fdecoder/ffmpeg/ffmpeg-android/armeabi-v7a/lib/libavformat.a(nut.o):nut.c:function ff_nut_free_sp: error: undefined reference to 'av_tree_destroy'
Error:error: ld returned 1 exit status
Error:Execution failed for task ':app:linkHello-jniArmeabi-v7aDebugSharedLibrary'.
&gt; A build operation failed.
      Linker failed while linking libhello-jni.so.
  See the complete log at: file:///Users/marcos/Documents/Android/fdecoder/app/build/tmp/linkHello-jniArmeabi-v7aDebugSharedLibrary/output.txt
Information:BUILD FAILED
Information:Total time: 14.993 secs
Information:2 errors
Information:0 warnings
Information:See complete output in console
</code></pre>

<p>There's obviously something I'm not importing properly, but can't figure exactly what's missing.</p>
",3641308,,-1,,2017-05-23 12:08:17,2019-02-28 11:09:08,Unable to integrate ffmpeg as a native dependency for an Android NDK project,<android><android-studio><ffmpeg><android-ndk><gradle-experimental>,1,2,,,
Android,36964572,1,,,,,,5/1/2016 8:18:53,,2,616,"<p>I am working on a modification of Google's Camera2 API example for Android, found here: <a href=""https://github.com/googlesamples/android-Camera2Basic"" rel=""nofollow"">https://github.com/googlesamples/android-Camera2Basic</a></p>

<p>I am uploading captured images to Cloudinary, and obviously need to do so in a background thread so the UI isn't blocked.</p>

<p>The problem I'm running into, however, is that the UI actually is blocked when the image is uploaded even though from what I understand, it shouldn't be, because the Handler is created with the Looper from a background thread like so: </p>

<pre><code>private void startBackgroundThread() {
    mBackgroundThread = new HandlerThread(""CameraBackground"");
    mBackgroundThread.start();
    mBackgroundHandler = new Handler(mBackgroundThread.getLooper());
}
</code></pre>

<p>The ImageSaver class, which is responsible for writing the captured image to disk, is as follows:</p>

<pre><code>private static class ImageSaver implements Runnable {
    /**
     * The JPEG image
     */
    private final Image mImage;
    /**
     * The file we save the image into.
     */
    private final File mFile;

    public ImageSaver(Image image, File file ) {
        mImage = image;
        mFile = file;
    }

    @Override
    public void run() {
        ByteBuffer buffer = mImage.getPlanes()[0].getBuffer();
        byte[] bytes = new byte[buffer.remaining()];
        buffer.get(bytes);
        FileOutputStream output = null;
        try {
            output = new FileOutputStream(mFile);
            output.write(bytes);
            InputStream is = new ByteArrayInputStream(bytes);
            Map uploadResult = CloudinaryManager.getInstance().uploader().upload(is, ObjectUtils.asMap(
                    ""api_key"", CloudinaryManager.CLOUDINARY_API_KEY,
                    ""api_secret"", CloudinaryManager.CLOUDINARY_SECRET_KEY
            ));
            System.out.println(""result"");
        } catch (IOException e) {
            e.printStackTrace();
        } finally {
            mImage.close();
            if (null != output) {
                try {
                    output.close();
                } catch (IOException e) {
                    e.printStackTrace();
                }
            }
        }
    }
</code></pre>

<p>The ImageSaver is added to the Handler here:</p>

<pre><code> private final ImageReader.OnImageAvailableListener mOnImageAvailableListener
        = new ImageReader.OnImageAvailableListener() {

    @Override
    public void onImageAvailable(ImageReader reader) {
        mBackgroundHandler.post(new ImageSaver(reader.acquireNextImage(), mFile));
    }
};
</code></pre>

<p>I would appreciate any help or advice to point me in the right direction.</p>
",4812993,,4812993,,2016-05-01 19:08:24,2017-03-13 20:21:52,HandlerThread blocks UI android,<android><multithreading><android-camera2><android-looper><android-handlerthread>,2,2,1,,
Android,37014990,1,,,,,,5/3/2016 21:50:32,,4,1045,"<p>Is the following situation poor design or am I overlooking something important?</p>

<p>Here is the code</p>

<pre><code>public class MainActivity extends AppCompatActivity â€¦ {

  â€¦

  @Override
  public void onCreate(Bundle savedInstanceState){
     â€¦
     buildGoogleApiClient();
  }

  /**
   * Builds a GoogleApiClient. Uses the addApi() method to request the LocationServices API.
   */
    protected synchronized void buildGoogleApiClient() {
        mGoogleApiClient = new GoogleApiClient.Builder(this)
                .addConnectionCallbacks(this)
                .addOnConnectionFailedListener(this)
                .addApi(LocationServices.API)
                .build();
    }
}
</code></pre>

<p>Why is <code>buildGoogleApiClient</code> <code>synchronized</code> when itâ€™s ever only called from inside <code>onCreate</code>?</p>

<p>I know it cannot hurt, but that's hardly the point of the question. What I need to know is: <strong>Why is it necessary?</strong></p>

<p><strong>Edit</strong></p>

<p>source to full code: <a href=""https://github.com/googlesamples/android-play-location/blob/master/BasicLocationSample/app/src/main/java/com/google/android/gms/location/sample/basiclocationsample/MainActivity.java"" rel=""nofollow"">https://github.com/googlesamples/android-play-location/blob/master/BasicLocationSample/app/src/main/java/com/google/android/gms/location/sample/basiclocationsample/MainActivity.java</a></p>
",5641865,,5641865,,2016-05-04 0:03:16,2016-05-04 0:03:16,Synchronized method called by Android Activity onCreate method,<java><android><multithreading><android-activity>,1,3,1,,
Android,37075088,1,,,,,,5/6/2016 14:34:05,,1,122,"<p>I am using the <a href=""https://github.com/googlesamples/android-Camera2Basic"" rel=""nofollow"">Camera2Basic example</a> by Google to test an application in Android Studio. I am getting this error when I run the project:</p>

<blockquote>
  <p>Error:Execution failed for task ':Application:transformClassesWithDexForDebug'.
  com.android.build.api.transform.TransformException: java.lang.RuntimeException: com.android.ide.common.process.ProcessException: java.util.concurrent.ExecutionException: com.android.ide.common.process.ProcessException: org.gradle.process.internal.ExecException: Process 'command 'C:\Program Files\Java\jdk1.7.0_55\bin\java.exe'' finished with non-zero exit value 1</p>
</blockquote>

<pre><code>buildscript {
    repositories {
        jcenter()
    }

    dependencies {
        classpath 'com.android.tools.build:gradle:2.0.0'
    }
}

apply plugin: 'com.android.application'

repositories {
    jcenter()
}

dependencies {
    compile ""com.android.support:support-v4:23.3.0""
    compile ""com.android.support:support-v13:23.3.0""
    compile ""com.android.support:cardview-v7:23.3.0""
    compile 'com.android.support:appcompat-v7:23.0.0'
}

// The sample build uses multiple directories to
// keep boilerplate and common code separate from
// the main sample code.
List&lt;String&gt; dirs = [
    'main',     // main sample code; look here for the interesting stuff.
    'common',   // components that are reused by multiple samples
    'template'] // boilerplate code that is generated by the sample template process

android {
    compileSdkVersion 23
    buildToolsVersion ""24.0.0 rc3""

    defaultConfig {
        minSdkVersion 21
        targetSdkVersion 23
    }

    compileOptions {
        sourceCompatibility JavaVersion.VERSION_1_7
        targetCompatibility JavaVersion.VERSION_1_7
    }

    sourceSets {
        main {
            dirs.each { dir -&gt;
                java.srcDirs ""src/${dir}/java""
                res.srcDirs ""src/${dir}/res""
            }
        }
        androidTest.setRoot('tests')
        androidTest.java.srcDirs = ['tests/src']

    }

}
</code></pre>

<p><strong>What I did</strong></p>

<p>1) I added <code>multiDexEnabled true</code> in defaultConfig.</p>

<p>2) Also tried by adding <code>compile 'com.android.support:multidex:1.0.0'</code> in dependencies.</p>
",3067928,,6083675,,2016-05-12 17:29:19,2016-05-12 17:29:19,Camera2Basic : Application:transformClassesWithDexForDebug,<java><android><android-camera2>,1,0,,,
Android,37327891,1,,,,,,5/19/2016 15:32:50,,2,4322,"<p>I am trying to test the google mobile vision api, for face detection, so I started with the demos from <a href=""https://github.com/googlesamples/android-vision/tree/master/visionSamples"" rel=""nofollow noreferrer"">GitHub mobile vision</a>. I tried both apps, FaceTracker and photo-demo, and the same issue rises with downloading the native face detector library. </p>

<p>For Nexus 5x, Galaxy S6 Edge not working, Galaxy S4, Galaxy Alpha is working.</p>

<p>What I see in the logs, when not working is:</p>

<p>For the app:</p>

<pre><code>05-19 17:52:07.301 14909-14909/com.google.android.gms.samples.vision.face.photo W/System: ClassLoader referenced unknown path: /data/app/com.google.android.gms.samples.vision.face.photo-1/lib/arm64
05-19 17:52:07.725 14909-14909/com.google.android.gms.samples.vision.face.photo W/System: ClassLoader referenced unknown path: /data/app/com.google.android.gms.samples.vision.face.photo-1/lib/arm64
05-19 17:52:08.043 14909-14909/com.google.android.gms.samples.vision.face.photo D/ChimeraCfgMgr: Reading stored module config
05-19 17:52:08.068 14909-14909/com.google.android.gms.samples.vision.face.photo W/System: ClassLoader referenced unknown path: /data/user/0/com.google.android.gms/app_chimera/m/00000001/n/arm64-v8a
05-19 17:52:08.077 14909-14909/com.google.android.gms.samples.vision.face.photo D/ChimeraFileApk: Primary ABI of requesting process is arm64-v8a
05-19 17:52:08.079 14909-14909/com.google.android.gms.samples.vision.face.photo D/ChimeraFileApk: Classloading successful. Optimized code found.
05-19 17:52:08.105 14909-14909/com.google.android.gms.samples.vision.face.photo I/FaceDetectorCreatorImpl: Requesting download for vision face detector
05-19 17:52:08.107 14909-14909/com.google.android.gms.samples.vision.face.photo W/FaceDetectorHandle: Native face detector not yet available.  Reverting to no-op detection.
05-19 17:52:08.253 14909-14909/com.google.android.gms.samples.vision.face.photo W/PhotoViewerActivity: Face detector dependencies are not yet available.
05-19 17:52:08.263 14909-14941/com.google.android.gms.samples.vision.face.photo D/OpenGLRenderer: Use EGL_SWAP_BEHAVIOR_PRESERVED: true
05-19 17:52:08.312 14909-14941/com.google.android.gms.samples.vision.face.photo I/Adreno: QUALCOMM build                   : 63c06b2, I8366cd0437
                                                                                          Build Date                       : 12/06/15
                                                                                          OpenGL ES Shader Compiler Version: XE031.05.13.02
                                                                                          Local Branch                     : mybranch17112971
                                                                                          Remote Branch                    : quic/LA.BF64.1.2.9_v2
                                                                                          Remote Branch                    : NONE
                                                                                          Reconstruct Branch               : NOTHING
05-19 17:52:08.317 14909-14941/com.google.android.gms.samples.vision.face.photo I/OpenGLRenderer: Initialized EGL, version 1.4
</code></pre>

<p>After doing some digging in the logs, by applying the vision filter for tags I see:</p>

<pre><code>05-19 17:52:08.124 10421-10526/? I/Vision: Attempting to open download_details.json in com.google.android.gms.vision
05-19 17:52:08.125 10421-10526/? W/Vision: Failed to open download_details.json in com.google.android.gms.vision: android.content.pm.PackageManager$NameNotFoundException: com.google.android.gms.vision
05-19 17:52:08.126 10421-10526/? I/Vision: Attempting to open download_details.json in com.google.android.gms.policy_ccocr_vision
05-19 17:52:08.127 10421-10526/? W/Vision: Failed to open download_details.json in com.google.android.gms.policy_ccocr_vision: android.content.pm.PackageManager$NameNotFoundException: com.google.android.gms.policy_ccocr_vision
05-19 17:52:08.127 10421-10526/? W/Vision: Reading download details from hard-coded Java
05-19 17:52:08.443 10421-10526/? E/Vision: Download Failed: Status{statusCode=Download errored: The download was configured incorrectly., resolution=null}
</code></pre>

<p>Similar questions:</p>

<ol>
<li><a href=""https://stackoverflow.com/questions/32099530/google-vision-barcode-library-not-found"">Google Vision barcode library not found</a></li>
<li><a href=""https://stackoverflow.com/questions/32062803/facedetectorhandle-native-face-detector-not-yet-available-reverting-to-no-op-d"">FaceDetectorHandleï¹• Native face detector not yet available. Reverting to no-op detection</a></li>
</ol>

<p>Tried the solution with freeing up space, clearing cache, no result.</p>

<p>What can I do next ? Is it possible to manually download the libraries ? Does anyone have a clear indication why is the library not downloading ?</p>

<p><strong><em>EDIT</em></strong></p>

<p>So it looks like there is an issue with the Mobile Vision api <a href=""https://github.com/googlesamples/android-vision/issues/98"" rel=""nofollow noreferrer"">https://github.com/googlesamples/android-vision/issues/98</a>. Hope the developers come with a solution soon.</p>

<p><strong><em>EDIT</em></strong></p>

<p>The issue has been resolved by updating the play service library.</p>
",1532642,,-1,,2017-05-23 12:02:05,2018-05-04 17:42:16,Android vision - Face detector dependencies are not yet available,<android><google-play-services><google-vision>,2,6,,,
Android,37371844,1,,,,,,5/22/2016 7:51:42,,5,950,"<p>I tried Google barcode-reader from <a href=""https://github.com/googlesamples/android-vision"" rel=""nofollow noreferrer"">https://github.com/googlesamples/android-vision</a></p>

<p>This example doesn't work. When I tab to screen it always detect </p>

<blockquote>
  <p>""no barcode detected""</p>
</blockquote>

<p>Debug reason : </p>

<pre><code>private boolean onTap(float rawX, float rawY) {

    //TODO: use the tap position to select the barcode.
    BarcodeGraphic graphic = mGraphicOverlay.getFirstGraphic();
    Barcode barcode = null;
    if (graphic != null) {
        barcode = graphic.getBarcode();
        if (barcode != null) {
            Intent data = new Intent();
            data.putExtra(BarcodeObject, barcode);
            setResult(CommonStatusCodes.SUCCESS, data);
            finish();
        }
        else {
            Log.d(TAG, ""barcode data is null"");
        }
    }
    else {
        Log.d(TAG,""no barcode detected"");
    }
    return barcode != null;
}
</code></pre>

<p><code>graphic</code> variable is always <code>Null</code> </p>

<p>See the image:</p>

<p><img src=""https://i.stack.imgur.com/JJvE7.jpg"" alt=""Image on android studio""></p>

<p>Anyone faced this problem? Can you let me know how to resolve it?
Thank you so much!</p>
",5667742,,900743,,2016-05-22 10:16:06,2016-06-07 17:13:26,Can not use Google Barcode scanner,<android><android-vision>,3,1,,,
Android,37539614,1,,,,,,5/31/2016 7:35:53,,1,1399,"<p>I'm building an app regarding camera2video API. Wanted to show the preview full screen, but instead it is occupying 70% area of the screen as shown in the Camera2video API Github <a href=""https://github.com/googlesamples/android-Camera2Video"" rel=""nofollow"">https://github.com/googlesamples/android-Camera2Video</a>
And also there is no option for Video Quality parameter as it was available in the deprecated Camera API.</p>
",5693666,,,,,2018-02-13 7:28:06,Camera2Video Api full screen preview and video quality,<android><camera><android-camera><android-camera2>,3,0,,,
Android,37547385,1,,,,,,5/31/2016 13:38:32,,1,376,"<p>I am working on Location and Geo Fencing. But I have seen couple of problems. I think that I have missing some thing but indeed I have many confusions regarding Geo Fencing and Location services Such as Fused Location API. </p>

<p><strong>What I am doing</strong> </p>

<p>According to my App scenario, I have to get the user location ( which I am getting using Fused Location API) and also I have ask the user what is his destination and let say he is on Point A and he picks Place F. Now I want that My app should notify him that he has Arrived at point F.</p>

<p>Problems and Confusion : </p>

<ol>
<li><p>I am notified (through my notification) that I have arrived to my destination only and only if I am in my app. it looks like that my location did not update google to my current location. so what is a best way that if the app is close or in back ground google still track him </p></li>
<li><p>What I am doing is creating the geo fence around the destination of user. Now I do not know what is a way of google to track user. ? can you please clear me that after creating geo fence how does google track Us ? </p></li>
<li><p>Do I need to implement some thing in service so that my service should remain running if my app is in background or even my app is force closed? </p></li>
</ol>

<p>I think I am quiet clear about my question that What I want . Please share your views and also tell me how does google track us when we geo fence any location ? </p>

<p>I am following <a href=""https://github.com/googlesamples/android-Geofencing"" rel=""nofollow"">this</a> to create the geofence. </p>

<p>Please sahre your views. </p>
",6404917,,,,,2016-06-22 12:37:26,GeoFencing Best Stratigies,<android><android-geofence><google-geolocation><android-fusedlocation>,1,1,1,,
Android,37559401,1,,,,,,6/1/2016 4:24:43,,11,1558,"<p>I saw that in android vision api (the sample is here: <a href=""https://github.com/googlesamples/android-vision"" rel=""noreferrer"">https://github.com/googlesamples/android-vision</a>) camera (camera1) is now deprecated and the recommend is to use camera2.</p>

<p>Do you guys have any idea how to re-write CameraSource to use camera2 on android vision?</p>

<p>Thanks in advance,</p>
",6369323,,,,,2018-06-29 17:20:25,Switching to Camera2 in Android Vision API,<android><android-vision>,2,0,3,,
Android,37597252,1,,,,,,6/2/2016 16:23:53,,3,437,"<p>Google has launched a project on Github in order to demonstrate different architecture implementations.</p>

<p><a href=""https://github.com/googlesamples/android-architecture/tree/todo-mvp/"" rel=""nofollow noreferrer"">todo-mvp</a></p>

<p>In its' simple MVP implementation's model layer, which applies the Repository pattern, it simply contains one POJO(Task) and we already have a bloated model layer here.</p>

<p><a href=""https://i.stack.imgur.com/i8fEi.jpg"" rel=""nofollow noreferrer""><img src=""https://i.stack.imgur.com/i8fEi.jpg"" width=""300""/></a></p>

<p>It's quite common to have dozens of POJOs in a <strong>REAL</strong> project. And it's easy to imagine how big the repository would grow. </p>

<p>Whenever I want to add or amend something, like adding a Owner(of a Task), I have to add so many lines of code in each one of the classes in the model layer. No need to mention that we have to write so many hard-coded SQL statements. </p>

<p>Is there a better way to avoid these things?</p>
",2290191,,2290191,,2016-06-02 16:37:58,2016-06-07 17:05:38,How should we deal with the growing Repository in a mvp project's model layer?,<android><repository-pattern><mvp>,1,1,,,
Android,37623264,1,,,,,,6/3/2016 20:55:17,,7,1900,"<p>I have the standard com.google.android.gms.vision.Tracker <a href=""https://github.com/googlesamples/android-vision/blob/master/visionSamples/FaceTracker/app/src/main/java/com/google/android/gms/samples/vision/face/facetracker/FaceTrackerActivity.java"" rel=""noreferrer"">example</a> successfully running on my android device and now i need to postprocess the image to find the iris of the current face which has been notified in the event methods of the Tracker.</p>

<p>So, how do i get the Bitmap frame which matches exactly the com.google.android.gms.vision.face.Face i received in the Tracker events?
This also means that the final bitmap should match the webcam resolution and not the screen resolution.</p>

<p>One bad alternative solution is to call takePicture every few ms on my CameraSource and process this picture separately using the FaceDetector. Although this works i have the problem that the video stream freezes during takepicture and i get lots of GC_FOR_ALLOC messages cause of the single bmp facedetector memory waste.</p>
",73594,,,,,2017-07-19 14:23:32,How to get the current frame (as a Bitmap) for android facedetector in a Tracker event?,<android><vision>,1,5,1,,
Android,37642551,1,,,,,,6/5/2016 13:38:06,,3,1850,"<p>I am trying to work on my Nexus 5x with android <code>Camera2 APIs</code> and I am using <a href=""https://github.com/googlesamples/android-Camera2Basic"" rel=""nofollow"">googlesamples android-Camera2Basic</a></p>

<p>My problem is that the JPEG images have too low quality and their size is much smaller that regular images I am taking with my phone camera app.</p>

<p>According to google documents there should be a key <code>JPEG_QUALITY</code> both in CaptureRequest and in CaptureResult:</p>

<blockquote>
  <p>JPEG_QUALITY</p>
  
  <p>Added in API level 21</p>
  
  <p>Key JPEG_QUALITY</p>
  
  <p>Compression quality of the final JPEG image.</p>
  
  <p>85-95 is typical usage range.</p>
  
  <p>Range of valid values:</p>
  
  <p>1-100; larger is higher quality</p>
  
  <p>This key is available on all devices.</p>
</blockquote>

<p>However when I ask for the available keys, <code>JPEG_QUALITY</code> key is not available so I don't how to know what is my current <code>JPEG</code> compression quallity used and how I can change it. </p>

<p>The code I did inside:</p>

<pre><code>CameraCaptureSession.CaptureCallback CaptureCallback
                = new CameraCaptureSession.CaptureCallback() {

            @Override
            public void onCaptureCompleted(@NonNull CameraCaptureSession session,
                                           @NonNull CaptureRequest request,
                                           @NonNull TotalCaptureResult result) {


                //_TEST_DEBUG
                List&lt;CaptureRequest.Key&lt;?&gt;&gt; requestKeys = request.getKeys();
                List&lt;CaptureResult.Key&lt;?&gt;&gt; resultKeys = result.getKeys();
</code></pre>

<p>requestKeys &amp; resultKeys have many keys including <code>JPEG_ORIENTATION</code> but not the <code>JPEG_QUALITY</code> key.</p>

<p>Any idea what am I doing wrong? 
Why can't I find how to change <code>JPEG</code> compression quality?</p>

<p>Thanks,
Guy</p>
",6426789,,5709159,,2016-07-04 16:04:01,2016-07-04 16:04:01,Android Camera2 API JPEG_QUALITY not available,<android><android-camera2>,1,0,1,,
Android,37764937,1,,,,,,6/11/2016 14:36:32,,4,2792,"<p>I am using my Samsung S5 G900F(API 23, ANDROID 6.0.1) to test the latest Android Fingerprint API. </p>

<p>I tried to build Google Sample project
<a href=""https://github.com/googlesamples/android-FingerprintDialog"" rel=""nofollow"">https://github.com/googlesamples/android-FingerprintDialog</a></p>

<p>But I am facing some problems </p>

<p><code>mFingerprintManager.hasEnrolledFingerprints()</code> </p>

<p>This always returns false. I have double checked on Settings that I have enrolled my fingerprint and I am using Fingerprint to unlock my device.</p>

<p>I had also tried this function </p>

<pre><code>mFingerprintManager.isHardwareDetected() 
</code></pre>

<p>which also returns false.</p>

<p>Does this mean my Samsung S5 (which got its offical 6.0.1 update) is not supported or I am missing something?</p>
",1162842,,,,,2017-02-11 23:02:00,FingerPrint API isHardwareDetected always returns false,<android-studio><android-6.0-marshmallow><android-fingerprint-api>,2,3,1,,
Android,37908660,1,,,,,,6/19/2016 15:07:22,,2,1691,"<p>I have a similar question to <a href=""https://stackoverflow.com/questions/32654087/how-turn-on-flashlight-using-barcode-detection-in-google-play-services"">this question</a> and <a href=""https://stackoverflow.com/questions/35811411/accessing-autofocus-flash-with-google-vision-barcode-reader"">this question</a>, neither of which have an accepted solution.</p>

<p>I'm basically using the Google Vision barcode API but there appears no obvious way to control the flashlight.</p>

<p><a href=""https://stackoverflow.com/a/32659445/1617737"">This answer</a> suggests using <a href=""https://github.com/googlesamples/android-vision/blob/master/visionSamples/barcode-reader/app/src/main/java/com/google/android/gms/samples/vision/barcodereader/ui/camera/CameraSource.java"" rel=""nofollow noreferrer"">this code</a>, but (having tried and failed) I'm not sure how to integrate it into my app.</p>

<p>Here is the code for my activity, which basically starts the camera/barcode scanner and also uses a menu item from my <code>BaseActivity</code> which I want to use to be able to toggle the flashlight:</p>

<pre><code>import android.content.Intent;
import android.os.Bundle;
import android.util.Log;
import android.util.SparseArray;
import android.view.Menu;
import android.view.MenuItem;
import android.view.SurfaceHolder;
import android.view.SurfaceView;
import com.google.android.gms.common.api.CommonStatusCodes;
import com.google.android.gms.vision.Detector;
import com.google.android.gms.vision.barcode.Barcode;
import com.google.android.gms.vision.barcode.BarcodeDetector;
import java.io.IOException;

public class ScanQRCodeAutoActivity extends BaseActivity {

    private static final String LOG_TAG = ScanQRCodeAutoActivity.class.getSimpleName();

    private static final int CAMERA_SOURCE_PREVIEW_WIDTH = -1;
    private static final int CAMERA_SOURCE_PREVIEW_HEIGHT = 480;
    public static final String QR_CODE_VALUE = ""QR_CODE_VALUE"";

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_scan_qr_code_auto);

        super.initFlash(savedInstanceState);

        final SurfaceView cameraSurfaceView = (SurfaceView)findViewById(R.id.cameraSurfaceView);

        BarcodeDetector.Builder barcodeDetectorBuilder = new BarcodeDetector.Builder(this);
        barcodeDetectorBuilder.setBarcodeFormats(Barcode.QR_CODE);
        BarcodeDetector barcodeDetector = barcodeDetectorBuilder.build();
        barcodeDetector.setProcessor(new Detector.Processor&lt;Barcode&gt;() {
            @Override
            public void release() {
            }

            @Override
            public void receiveDetections(Detector.Detections&lt;Barcode&gt; detections) {

                final SparseArray&lt;Barcode&gt; barcodes = detections.getDetectedItems();

                if (barcodes.size() != 0) {

                    Intent data = new Intent();
                    data.putExtra(QR_CODE_VALUE, barcodes.valueAt(0).displayValue);
                    setResult(CommonStatusCodes.SUCCESS, data);
                    finish();

                }

            }
        });

        CameraSource.Builder cameraSourceBuilder = new CameraSource.Builder(this, barcodeDetector);
        //cameraSourceBuilder.setAutoFocusEnabled(true);
        //cameraSourceBuilder.setFacing(CameraSource.CAMERA_FACING_BACK);
        if (CAMERA_SOURCE_PREVIEW_WIDTH != -1 &amp;&amp; CAMERA_SOURCE_PREVIEW_HEIGHT != -1) {
            cameraSourceBuilder.setRequestedPreviewSize(CAMERA_SOURCE_PREVIEW_WIDTH, CAMERA_SOURCE_PREVIEW_HEIGHT);
        }

        final CameraSource cameraSource = cameraSourceBuilder.build();

        cameraSurfaceView.getHolder().addCallback(new SurfaceHolder.Callback() {
            @Override
            public void surfaceCreated(SurfaceHolder holder) {

                try {
                    cameraSource.start(cameraSurfaceView.getHolder());

                }
                catch (SecurityException se) {
                    Log.e(LOG_TAG, ""Could not start camera source."", se);
                }
                catch (IOException ioe) {
                    Log.e(LOG_TAG, ""Couldn't start camera source."", ioe);
                }

            }

            @Override
            public void surfaceChanged(SurfaceHolder holder, int format, int width, int height) {
            }

            @Override
            public void surfaceDestroyed(SurfaceHolder holder) {

                cameraSource.stop();

            }
        });

    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        super.onCreateOptionsMenu(menu);

        MenuItem flashItem = menu.findItem(R.id.action_flash);
        flashItem.setVisible(true);

        return true;
    }

    @Override
    protected void toggleFlash() {

        super.toggleFlash();

        // HELP!!

        invalidateOptionsMenu();
        if (isFlashOn()) {
            Utilities.makeToast(this, ""Flash turned on"");
        }
        else {
            Utilities.makeToast(this, ""Flash turned off"");
        }

    }
}
</code></pre>
",1617737,,-1,,2017-05-23 12:08:43,2016-12-01 11:05:51,How to use flashlight/torch with Google Vision barcode reader API?,<android><google-play-services><barcode-scanner><flashlight><google-vision>,1,3,,,
Android,37936693,1,,,,,,6/21/2016 6:06:04,,2,1476,"<p>I am currently making an application where I need to get the user's location when a button is clicked. I am using <a href=""https://github.com/googlesamples/android-play-location/tree/master/LocationUpdates"" rel=""nofollow"">this</a> sample and it works great as a sample application. My question is, how would I implement it into my application button's <em>onClick</em> event? I don't need it to refresh often, I just need it so that when the user clicks the button, it gets the user's latitude and longitude and saves them to two variables. What would be the best way to do this? I didn't post my own code because all I have is a button with an <em>onClick</em> event.</p>
",6363024,,,,,2016-06-21 7:15:10,How do I get android location once at the push of a button?,<java><android><android-location>,2,0,2,,
Android,38296278,1,,,,,,7/10/2016 20:40:52,,4,2637,"<p>I took inspiration from google's sample on how to test your <code>SharedPreferences</code> code here by creating a <code>SharedPreferencesHelper</code> class:</p>

<p><a href=""https://github.com/googlesamples/android-https://github.com/googlesamples/android-testing/blob/master/unit/BasicSample/app/src/main/java/com/example/android/testing/unittesting/BasicSample/SharedPreferencesHelper.java"" rel=""nofollow noreferrer"">https://github.com/googlesamples/android-https://github.com/googlesamples/android-testing/blob/master/unit/BasicSample/app/src/main/java/com/example/android/testing/unittesting/BasicSample/SharedPreferencesHelper.java</a></p>

<p>You can see that the class uses actual strings hardcoded within the class as the keys to the <code>sharedPreferences</code> - here's an extract of the class:</p>

<pre><code>public class SharedPreferencesHelper {

    // Keys for saving values in SharedPreferences.
    static final String KEY_NAME = ""key_name"";
    static final String KEY_DOB = ""key_dob_millis"";
    static final String KEY_EMAIL = ""key_email"";

    public boolean savePersonalInfo(SharedPreferenceEntry sharedPreferenceEntry){
        // Start a SharedPreferences transaction.
        SharedPreferences.Editor editor = mSharedPreferences.edit();
        editor.putString(KEY_NAME, sharedPreferenceEntry.getName());
        editor.putLong(KEY_DOB, sharedPreferenceEntry.getDateOfBirth().getTimeInMillis());
        editor.putString(KEY_EMAIL, sharedPreferenceEntry.getEmail());

        // Commit changes to SharedPreferences.
        return editor.commit();
    }
</code></pre>

<p>When testing this on using their <code>SharedPreferencesHelperTest</code> class here, they access the mocked <code>sharedPreferences</code> using the same variables defined in the above class:</p>

<p><a href=""https://github.com/googlesamples/android-testing/blob/master/unit/BasicSample/app/src/test/java/com/example/android/testing/unittesting/BasicSample/SharedPreferencesHelperTest.java"" rel=""nofollow noreferrer"">https://github.com/googlesamples/android-testing/blob/master/unit/BasicSample/app/src/test/java/com/example/android/testing/unittesting/BasicSample/SharedPreferencesHelperTest.java</a></p>

<p>An extract of that class is displayed below:</p>

<pre><code>when(mMockSharedPreferences.getString(eq(SharedPreferencesHelper.KEY_NAME), anyString()))
            .thenReturn(mSharedPreferenceEntry.getName());
    when(mMockSharedPreferences.getString(eq(SharedPreferencesHelper.KEY_EMAIL), anyString()))
            .thenReturn(mSharedPreferenceEntry.getEmail());
    when(mMockSharedPreferences.getLong(eq(SharedPreferencesHelper.KEY_DOB), anyLong()))
            .thenReturn(mSharedPreferenceEntry.getDateOfBirth().getTimeInMillis());
</code></pre>

<p>The way google does this allowed them to bypass the issue of using a <code>context</code> to pull a string out of the <strong>string.xml</strong> resource file and query it inside <code>sharedPreferences</code> like how it is normally suppose to happen by using <code>getString()</code>, ie:</p>

<pre><code>mSharedPreferences.getString(context.getString(R.string.name),"""");
</code></pre>

<p>However, I have read that it is not possible to use <code>context.getString</code> as it is a final method and mockito cannot mock final methods: </p>

<p><a href=""https://stackoverflow.com/questions/18941509/mockito-overriding-a-method-that-takes-primitive-parameters/18942522#18942522"">Mockito - Overriding a method that takes primitive parameters</a></p>

<p>How can I then use mockito to unit test any methods with <code>getString</code>? Any method with <code>getString</code> will not work and my unit test will fail.</p>

<p>This is my class that I have written for <code>SharedPreferences</code> and I would like to test it with the <code>sharedPreferences</code> keys written with <code>getStrings</code>:</p>

<pre><code>public class SharedPreferencesHelper {

    // The injected SharedPreferences implementation to use for persistence.
    private final SharedPreferences mSharedPreferences;
    private Context context;

    public SharedPreferencesHelper(SharedPreferences sharedPreferences, Context context) {
        mSharedPreferences = sharedPreferences;
        this.context = context;
    }

    public boolean saveName(String name) {
        // Start a SharedPreferences transaction.
        SharedPreferences.Editor editor = mSharedPreferences.edit();
        editor.putString(context.getString(R.string.name), name);
        return editor.commit();
    }

    public String fetchName() {
        // Start a SharedPreferences transaction.
        return mSharedPreferences.getString(context.getString(R.string.name),"""");
    }

    public boolean saveGender(String gender) {
        SharedPreferences.Editor editor = mSharedPreferences.edit();
        editor.putString(context.getString(R.string.gender), gender);
        return editor.commit();
    }

}
</code></pre>

<p>This is the test that I have written for the above class - it is very similar to google's SharedPreferencesHelperTest:</p>

<pre><code>@RunWith(MockitoJUnitRunner.class)
public class SharedPreferencesHelperTest {

    private static final String TEST_NAME = ""Test name"";

    private SharedPreferencesHelper mMockSharedPreferencesHelper;

    @Mock
    SharedPreferences mMockSharedPreferences;
    @Mock
    SharedPreferences.Editor mMockEditor;
    @Mock
    MockContext context;

    @Before
    public void setUp() throws Exception {
        // Create a mocked SharedPreferences.
        mMockSharedPreferencesHelper = createMockSharedPreference();
    }

    @Test
    public void testSaveName() throws Exception {
        boolean success = mMockSharedPreferencesHelper.saveName(TEST_NAME);
        Timber.e(""success "" + success);
        assertThat(""Checking that name was saved... returns true = "" + success,
                success, is(true));
        String name = mMockSharedPreferencesHelper.fetchName();
        Timber.e(""name "" + name);
        assertThat(""Checking that name has been persisted and read correctly "" + name,
                TEST_NAME,
                is(name));
    }

    /**
     * Creates a mocked SharedPreferences.
     */
    private SharedPreferencesHelper createMockSharedPreference() {
        // Mocking reading the SharedPreferences as if mMockSharedPreferences was previously written
        // correctly.
        when(mMockSharedPreferences.getString(Matchers.eq(""name""), anyString()))
                .thenReturn(TEST_NAME);
        when(mMockSharedPreferences.getString(Matchers.eq(""gender""), anyString()))
                .thenReturn(""M"");
        // Mocking a successful commit.
        when(mMockEditor.commit()).thenReturn(true);
        // Return the MockEditor when requesting it.
        when(mMockSharedPreferences.edit()).thenReturn(mMockEditor);
        return new SharedPreferencesHelper(mMockSharedPreferences, context);
    }
}
</code></pre>

<p>Running the test fails as I have used <code>getString</code> in my <code>SharedPreferencesHelper</code> class. If I hard coded the keys, I will not get the error, i.e.:</p>

<pre><code>public String fetchName() {
    // Start a SharedPreferences transaction.
    return mSharedPreferences.getString(""name"","""");
}
</code></pre>

<p>One should not hard-code strings within the code so how do I solve this dilemma?</p>
",3178944,,-1,,2017-05-23 12:19:29,2018-10-01 20:46:05,Mockito: How do I use getString with mockito?,<android><unit-testing><mockito><android-context>,3,0,,,
Android,38305431,1,,,,,,7/11/2016 11:09:45,,1,1654,"<p>How can I get <strong>latitude &amp; longitude</strong> from <strong>Google Place API of android</strong>? My code looks like below..</p>

<pre><code>AutocompleteFilter mAutocompleteFilter = new AutocompleteFilter.Builder().setTypeFilter(AutocompleteFilter.TYPE_FILTER_CITIES).build();

PendingResult&lt;AutocompletePredictionBuffer&gt; results =
                    Places.GeoDataApi
                            .getAutocompletePredictions(mGoogleApiClient, constraint.toString(),
                                    mBounds, mAutocompleteFilter);
</code></pre>

<p>I also facing trouble getting results more than <strong>5 results</strong>. I'm using <a href=""https://github.com/googlesamples/android-play-places/tree/master/PlaceCompleteFragment"" rel=""nofollow"">this</a> link for the references. Any help would be grateful.</p>
",1934452,,,,,2018-04-19 10:01:19,Google Place API get latitude & longitude of places,<android><autocomplete><google-places-api>,1,2,,,
Android,38493000,1,,,,,,7/21/2016 0:36:56,,21,1895,"<p>The new API, perhaps only on LG G3, seems to have something changed.</p>

<p>I'm using <a href=""https://github.com/googlesamples/android-Camera2Basic"">the sample code</a>.</p>

<p>On my nexus 4, the code runs perfectly, but on LGG3 updated to Android 6.0 it does not. Any ideas?</p>

<p>I played with the settings, but no luck, this still works fine on Nexus 4:</p>

<pre><code>mPreviewRequestBuilder.set(CaptureRequest.BLACK_LEVEL_LOCK, false);


mPreviewRequestBuilder.set(CaptureRequest.CONTROL_AWB_LOCK, false);
mPreviewRequestBuilder.set(CaptureRequest.CONTROL_AWB_MODE, CaptureRequest.CONTROL_AWB_MODE_AUTO);


mPreviewRequestBuilder.set(CaptureRequest.CONTROL_AE_LOCK, false);

mPreviewRequestBuilder.set(CaptureRequest.CONTROL_AE_MODE, CaptureRequest.CONTROL_AE_MODE_ON);
mPreviewRequestBuilder.set(CaptureRequest.CONTROL_AE_ANTIBANDING_MODE, CaptureRequest.CONTROL_AE_ANTIBANDING_MODE_AUTO);
mPreviewRequestBuilder.set(CaptureRequest.CONTROL_AE_EXPOSURE_COMPENSATION, 0);
//mPreviewRequestBuilder.set(CaptureRequest.CONTROL_AE_TARGET_FPS_RANGE, Range.create(1000,1000));
mPreviewRequestBuilder.set(CaptureRequest.CONTROL_AE_PRECAPTURE_TRIGGER, 0);


mPreviewRequestBuilder.set(CaptureRequest.CONTROL_MODE, CaptureRequest.CONTROL_MODE_AUTO);
mPreviewRequestBuilder.set(CaptureRequest.COLOR_CORRECTION_MODE, CaptureRequest.CONTROL_MODE_AUTO);


mPreviewRequestBuilder.set(CaptureRequest.CONTROL_CAPTURE_INTENT,
        CaptureRequest.CONTROL_CAPTURE_INTENT_PREVIEW);

mPreviewRequestBuilder.set(CaptureRequest.CONTROL_AF_MODE,
        CaptureRequest.CONTROL_AF_MODE_CONTINUOUS_PICTURE);
</code></pre>
",6503333,,1276636,,2016-08-01 15:14:59,2018-04-29 15:23:24,"Camera2basic app, has very dark preview in Android 6.0 LGG3",<android><android-6.0-marshmallow><android-camera2>,3,4,5,,
Android,38535355,1,,,,,,7/22/2016 21:16:05,,10,3877,"<p>I have been working with the <a href=""https://github.com/googlesamples/android-Camera2Video"" rel=""noreferrer"">camera2 api demo from google</a> and unfortunately the sample application is built to display the textureview preview at approximately 70% of the screen height, after looking around I was able to determine that this was being caused by the AutoFitTextureView overriding the <code>onMeasure()</code> method as shown below:</p>

<pre><code>@Override
protected void onMeasure(int widthMeasureSpec, int heightMeasureSpec) {
    super.onMeasure(widthMeasureSpec, heightMeasureSpec);
    int width = MeasureSpec.getSize(widthMeasureSpec);
    int height = MeasureSpec.getSize(heightMeasureSpec);
    if (0 == mRatioWidth || 0 == mRatioHeight) {
        setMeasuredDimension(width, height);
    } else {
        if (width &lt; height * mRatioWidth / mRatioHeight) {
            setMeasuredDimension(width, width * mRatioHeight / mRatioWidth);
        } else {
            setMeasuredDimension(height * mRatioWidth / mRatioHeight, height);
        }
    }
}
</code></pre>

<p>I attempted to correct this by setting the correct heights and widths in <code>setMeasuredDimension(width, height);</code>, this fixed the height issue and gave me a full screen preview from the textureview, however the aspect ratio is completely broken and warped on every device, what is the standard way of fixing this? I see many apps on the play store have found a way to solve this problem but havent been able to track down a fix, any help will go a long way, thanks.</p>
",793197,,,,,2017-08-17 15:12:59,android textureview full screen preview with correct aspect ratio,<java><android><android-camera><android-camera2><android-textureview>,3,2,2,,
Android,38809845,1,,,,,,8/7/2016 0:29:28,,1,1010,"<p>I am a beginner in android, and tried a demo code Bluetoothchat in <a href=""https://developer.android.com/samples/BluetoothChat/index.html"" rel=""nofollow"">https://developer.android.com/samples/BluetoothChat/index.html</a>. It doesn't work well on my phone(Nexus 5, android 6.0.1). the full package is on github. <a href=""https://github.com/googlesamples/android-BluetoothChat"" rel=""nofollow"">https://github.com/googlesamples/android-BluetoothChat</a>. I didn't change anything in the demo. Android studio 2.1.2</p>

<p>It failed to discover other Bluetooth devices(an ipad and a blackberry). The visibility of the devices were on. If I use the default Bluetooth's discovery function on the nexus 5, the two devices were showed on the list.</p>

<p>I have also tried some other demos about Bluetooth discovery app. They did not work on my phone either. I know the basic idea about how to find a device, but couldn't find why it didn't work.</p>

<p>The relative code in Bluetoothchat is here:</p>

<p>basic setup</p>

<pre><code>    mNewDevicesArrayAdapter = new ArrayAdapter&lt;String&gt;(this, R.layout.device_name);
    // Find and set up the ListView for newly discovered devices
    ListView newDevicesListView = (ListView) findViewById(R.id.new_devices);
    newDevicesListView.setAdapter(mNewDevicesArrayAdapter);
    newDevicesListView.setOnItemClickListener(mDeviceClickListener);

    // Register for broadcasts when a device is discovered
    IntentFilter filter = new IntentFilter(BluetoothDevice.ACTION_FOUND);
    this.registerReceiver(mReceiver, filter);

    // Register for broadcasts when discovery has finished
    filter = new IntentFilter(BluetoothAdapter.ACTION_DISCOVERY_FINISHED);
    this.registerReceiver(mReceiver, filter);

    // Get the local Bluetooth adapter
    mBtAdapter = BluetoothAdapter.getDefaultAdapter();
</code></pre>

<p>click the scanButton to scan devices</p>

<pre><code>    // Initialize the button to perform device discovery
    Button scanButton = (Button) findViewById(R.id.button_scan);
    scanButton.setOnClickListener(new View.OnClickListener() {
        public void onClick(View v) {
            doDiscovery();
            v.setVisibility(View.GONE);
        }
    });

    // Initialize array adapters. 
    // one for newly discovered devices
</code></pre>

<p>discovery part</p>

<pre><code>/**
 * Start device discover with the BluetoothAdapter
 */
private void doDiscovery() {
    Log.d(TAG, ""doDiscovery()"");

    // Indicate scanning in the title
    setProgressBarIndeterminateVisibility(true);
    setTitle(R.string.scanning);

    // Turn on sub-title for new devices
    findViewById(R.id.title_new_devices).setVisibility(View.VISIBLE);

    // If we're already discovering, stop it
    if (mBtAdapter.isDiscovering()) {
        mBtAdapter.cancelDiscovery();
    }

    // Request discover from BluetoothAdapter
    mBtAdapter.startDiscovery();
}
</code></pre>

<p>Broadcast receiver</p>

<pre><code>/**
 * The BroadcastReceiver that listens for discovered devices and changes the title when
 * discovery is finished
 */
private final BroadcastReceiver mReceiver = new BroadcastReceiver() {
    @Override
    public void onReceive(Context context, Intent intent) {
        String action = intent.getAction();

        // When discovery finds a device
        if (BluetoothDevice.ACTION_FOUND.equals(action)) {
            // Get the BluetoothDevice object from the Intent
            BluetoothDevice device = intent.getParcelableExtra(BluetoothDevice.EXTRA_DEVICE);
            // If it's already paired, skip it, because it's been listed already
            if (device.getBondState() != BluetoothDevice.BOND_BONDED) {
                mNewDevicesArrayAdapter.add(device.getName() + ""\n"" + device.getAddress());
            }
            // When discovery is finished, change the Activity title
        } else if (BluetoothAdapter.ACTION_DISCOVERY_FINISHED.equals(action)) {
            setProgressBarIndeterminateVisibility(false);
            setTitle(R.string.select_device);
            if (mNewDevicesArrayAdapter.getCount() == 0) {
                String noDevices = getResources().getText(R.string.none_found).toString();
                mNewDevicesArrayAdapter.add(noDevices);
            }
        }
    }
};
</code></pre>

<p>destroy part</p>

<pre><code>@Override
protected void onDestroy() {
    super.onDestroy();

    // Make sure we're not doing discovery anymore
    if (mBtAdapter != null) {
        mBtAdapter.cancelDiscovery();
    }

    // Unregister broadcast listeners
    this.unregisterReceiver(mReceiver);
}
</code></pre>

<p>Could someone help me? Thanks in advance!</p>
",6686875,,6686875,,2016-08-07 13:50:44,2019-02-20 17:32:23,Android Bluetooth app can't discover other devices,<android><bluetooth>,1,2,,,
Android,38814600,1,,,,,,8/7/2016 13:24:30,,1,286,"<p>I'm working with the <a href=""https://developer.android.com/training/location/geofencing.html"" rel=""nofollow"">Google's Creating and Monitoring Geofences</a>
and I have done everything exactly like it (In fact I just downloaded and ran the example code <a href=""https://github.com/googlesamples/android-Geofencing"" rel=""nofollow"">from here)</a></p>

<p>I've configured everything like said the in tutorial.</p>

<p>After I perform this:</p>

<pre><code>LocationServices.GeofencingApi.addGeofences(googleApiClient,
                    getGeofencingRequest(),
                    getGeofencingPendingIntent())
                    .setResultCallback(this);
</code></pre>

<p>My onResult():</p>

<pre><code>@Override
public void onResult(@NonNull Status status) {
    if (status.isSuccess()) {
        L.log(this.getClass(), ""Called... success"");

    } else {
        L.log(this.getClass(), ""Called... FAILURE: "" + status.getStatusMessage() + "" code: "" + status.getStatusCode());

    }
}
</code></pre>

<p>Prints to Log that it has been successful.</p>

<p>Yet - When I inject coordinates to the emulator, the IntentService never seem to be triggered.</p>

<p>There is no exception thrown or anything, not even the constructor of the IntentService is called.</p>

<p>I wonder if this has something to do with the emulator or maybe the rules which I inject the coordinates are wrong ?
Because I also downloaded Google's sample and couldn't get it to trigger either</p>
",4497575,,,,,2016-09-10 19:47:28,Geofencing API: adding successful but not triggered,<android><android-studio><android-geofence>,1,0,,,
Android,38869938,1,,,,,,8/10/2016 9:52:35,,1,197,"<p>I want to <strong>send ""text"" from android device to a LED panel via a ""BLE"" adapter.</strong></p>

<p>I am able to connect the android device with the ""BLE adapter"" through the following sample project. As this is an open-source project, i have no problems in the connection part.
<a href=""https://github.com/googlesamples/android-BluetoothLeGatt"" rel=""nofollow noreferrer"">https://github.com/googlesamples/android-BluetoothLeGatt</a></p>

<p>Now, i want to send data (say ""Hello World"") from the device to the ble adapter. I find a project on Google Play and it would send data successfully to the ""BLE Adapter"" as shown below
<a href=""https://play.google.com/store/apps/details?id=com.ingics.uc.serialble.v2"" rel=""nofollow noreferrer"">https://play.google.com/store/apps/details?id=com.ingics.uc.serialble.v2</a></p>

<p>However, <strong>this is not an open-source project and there are no ways for me to work it out programmatically.</strong> </p>

<p>I have searched github and found some projects claming they would send data to bluetooth devices but i still would not work it out.
<a href=""https://github.com/suzp1984/Light_BLE"" rel=""nofollow noreferrer"">https://github.com/suzp1984/Light_BLE</a>
<a href=""https://github.com/Lembed/Android-BLE-Terminal"" rel=""nofollow noreferrer"">https://github.com/Lembed/Android-BLE-Terminal</a></p>

<p>I know ""BLE"" is a big topic here but the objective i want to achieve is very simple. Great if anyone would share with me some ""<strong>simple sample projects</strong>"" for me to achieve my goal.</p>

<p><a href=""https://i.stack.imgur.com/rQXU1.png"" rel=""nofollow noreferrer""><img src=""https://i.stack.imgur.com/rQXU1.png"" alt=""enter image description here""></a></p>
",4152203,,,,,2016-08-10 9:56:41,Android Send Data via Blue Tooth Low Energy adapter,<android><bluetooth><bluetooth-lowenergy>,1,0,1,,
Android,38901921,1,,,,,,8/11/2016 16:40:42,,10,307,"<p>Everything builds correctly and runs in the emulator, but I cannot seem to get my IntentService to log anything. I'm sure there's something basic that I'm missing or overlooking, but I'm pretty new to Android/Java and have run out of ideas at this point.</p>

<pre><code>public class MainActivity extends AppCompatActivity implements GoogleApiClient.ConnectionCallbacks, GoogleApiClient.OnConnectionFailedListener {

private Geofence geofence;
private PendingIntent mGeofencePendingIntent;
private GoogleApiClient mGoogleApiClient;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    LatLng latLng = new LatLng(39.7492350, -104.9913250);

    geofence = new Geofence.Builder()
            .setRequestId(GEOFENCE_REQ_ID)
            .setCircularRegion(latLng.latitude, latLng.longitude, GEOFENCE_RADIUS_IN_METERS)
            .setExpirationDuration(GEOFENCE_EXPIRATION)
            .setTransitionTypes(Geofence.GEOFENCE_TRANSITION_ENTER | Geofence.GEOFENCE_TRANSITION_EXIT)
            .build();

    mGoogleApiClient = new GoogleApiClient.Builder(this)
            .addApi(LocationServices.API)
            .addConnectionCallbacks(this)
            .addOnConnectionFailedListener(this)
            .build();
    mGoogleApiClient.connect();
}

private boolean checkPermission() {
    Log.i(TAG, ""MainActivity.checkPermission()"");
    return (ContextCompat.checkSelfPermission(this, Manifest.permission.ACCESS_FINE_LOCATION) == PackageManager.PERMISSION_GRANTED);
}

private GeofencingRequest getGeofencingRequest() {
    Log.i(TAG, ""MainActivity.getGeofencingRequest()"");
    GeofencingRequest.Builder builder = new GeofencingRequest.Builder();
    builder.setInitialTrigger(GeofencingRequest.INITIAL_TRIGGER_ENTER);
    builder.addGeofence(geofence);
    return builder.build();
}

private PendingIntent getGeofencePendingIntent() {
    Log.i(TAG, ""MainActivity.getGeofencePendingIntent()"");
    if (null != mGeofencePendingIntent) {
        return mGeofencePendingIntent;
    }

    Intent intent = new Intent(this, GeofenceTransitionsIntentService.class);
    return PendingIntent.getService(this, 0, intent, PendingIntent.FLAG_UPDATE_CURRENT);
}

@Override
public void onConnected(Bundle connectionHint) {
    Log.i(TAG, ""MainActivity.onConnected()"");
    if (checkPermission()) {
        mGeofencePendingIntent = getGeofencePendingIntent();
        LocationServices.GeofencingApi.addGeofences(mGoogleApiClient, getGeofencingRequest(), mGeofencePendingIntent);
    } else {
        Log.i(TAG, ""Permission not granted"");
    }
}

@Override
public void onConnectionSuspended(int i) {
    Log.i(TAG, ""MainActivity.onConnectionSuspended()"");
    if (null != mGeofencePendingIntent) {
        LocationServices.GeofencingApi.removeGeofences(mGoogleApiClient, mGeofencePendingIntent);
    }
}

@Override
public void onConnectionFailed(ConnectionResult connectionResult) {
    Log.i(TAG, ""MainActivity.onConnectionFailed()"");
}}
</code></pre>

<p>Whenever I update that device lat/lng using the emulator or the android console, no intent is received by the following service:</p>

<pre><code>public class GeofenceTransitionsIntentService extends IntentService {

public GeofenceTransitionsIntentService() {
    super(GeofenceTransitionsIntentService.class.getSimpleName());
}

@Override
protected void onHandleIntent(Intent intent) {
    Log.i(TAG, ""GeofenceTransitionsIntentService.onHandleIntent()"");

    GeofencingEvent geofencingEvent = GeofencingEvent.fromIntent(intent);
    if (geofencingEvent.hasError()) {
        int errorCode = geofencingEvent.getErrorCode();
        Log.e(TAG, ""Location Services error: "" + errorCode);
    } else {
        Log.i(TAG, ""geofencingEvent was successful"");
    }
}}
</code></pre>

<p>Manifest:</p>

<pre><code>&lt;?xml version=""1.0"" encoding=""utf-8""?&gt;
</code></pre>

<p></p>

<pre><code>&lt;uses-permission android:name=""android.permission.ACCESS_FINE_LOCATION"" /&gt;

&lt;application
    android:allowBackup=""true""
    android:icon=""@mipmap/ic_launcher""
    android:label=""@string/app_name""
    android:supportsRtl=""true""
    android:theme=""@style/AppTheme""&gt;
    &lt;activity android:name="".MainActivity""&gt;
        &lt;intent-filter&gt;
            &lt;action android:name=""android.intent.action.MAIN"" /&gt;

            &lt;category android:name=""android.intent.category.LAUNCHER"" /&gt;
        &lt;/intent-filter&gt;
    &lt;/activity&gt;

    &lt;service android:name="".GeofenceTransitionsIntentService"" /&gt;
&lt;/application&gt;
</code></pre>

<p></p>

<p>I've been referencing the following resources: <a href=""https://developer.android.com/training/location/geofencing.html#HandleGeofenceTransitions"" rel=""noreferrer"">Android Documentation</a> and <a href=""https://github.com/googlesamples/android-Geofencing/tree/master/Application/src/main/java/com/example/android/wearable/geofencing"" rel=""noreferrer"">Google Sample</a>.</p>
",625675,,,,,2016-08-24 17:19:55,Intent not received from Android Geofence event,<java><android><android-intent><geofencing><android-geofence>,1,2,,,
Android,39019899,1,,,,,,8/18/2016 13:47:16,,3,1328,"<p>I would like to perform face detection / tracking on a video file (e.g. an MP4 from the users gallery) using the Android Vision <code>FaceDetector</code> API. I can see many examples on using the <a href=""https://developers.google.com/android/reference/com/google/android/gms/vision/CameraSource"" rel=""nofollow noreferrer"">CameraSource</a> class to perform face tracking on the stream coming directly from the camera (e.g. <a href=""https://github.com/googlesamples/android-vision/blob/master/visionSamples/FaceTracker/app/src/main/java/com/google/android/gms/samples/vision/face/facetracker/FaceTrackerActivity.java"" rel=""nofollow noreferrer"">on the android-vision github</a>), but nothing on video files.</p>

<p>I tried looking at the source code for <code>CameraSource</code> through Android Studio, but it is obfuscated, and I couldn't see the original online. I image there are many commonalities between using the camera and using a file. Presumably I just play the video file on a <code>Surface</code>, and then pass that to a pipeline.</p>

<p>Alternatively I can see that <code>Frame.Builder</code> has functions <code>setImageData</code> and <code>setTimestampMillis</code>. If I was able to read in the video as <code>ByteBuffer</code>, how would I pass that to the <code>FaceDetector</code> API? I guess <a href=""https://stackoverflow.com/questions/33173525/android-vision-face-detection-with-video-stream"">this question</a> is similar, but no answers. Similarly, decode the video into <code>Bitmap</code> frames and pass that to <code>setBitmap</code>.</p>

<p>Ideally I don't want to render the video to the screen, and the processing should happen as fast as the <code>FaceDetector</code> API is capable of.</p>
",1847734,,-1,,2017-05-23 12:17:32,2017-05-31 15:46:07,Android Face Detection API - Stored video file,<android><video><face-detection><android-vision>,2,2,2,,
Android,39075163,1,,,,,,8/22/2016 8:57:05,,2,770,"<p>I'm analysing the ocr-reader sample project: <a href=""https://github.com/googlesamples/android-vision/tree/master/visionSamples/ocr-reader"" rel=""nofollow"">https://github.com/googlesamples/android-vision/tree/master/visionSamples/ocr-reader</a></p>

<p>The goal would be to replace my custom ""text to image"" implementation for Android (with OpenCV and Tesseract) with Android Vision. </p>

<p>I could not find any way to apply advanced configuration for the OCR processor. For example, in my application, only a predefined set of symbols is allowed. For that, I'm using the following code in my App:</p>

<pre><code>api.SetVariable(""tessedit_char_whitelist"", ""ABJOKEA1234"");
</code></pre>

<p>This helps to avoid the confusion between 0 and O for example.</p>

<p>Is there a way to do this with android-vision? I don't see any options while building the TextRecognizer:</p>

<pre><code>TextRecognizer textRecognizer = new TextRecognizer.Builder(context).build();
</code></pre>

<p>In a general matter, does Google plan to extend the configurability of the library? For example:</p>

<ul>
<li>Cropping of the source image </li>
<li>Providing a custom OCR training file</li>
</ul>

<p>Or is it supposed to remain a straightforward library, with just common features? </p>

<p>Thanks for your help! </p>
",4070636,,,,,2016-10-25 13:58:16,Set OCR whitelist in the TextRecognizer,<android-vision>,1,0,,,
Android,39131973,1,,,,,,8/24/2016 19:53:23,,1,104,"<p>I created a <code>SampleMediaRouteProvider</code>  as given in <a href=""https://github.com/googlesamples/android-MediaRouter"" rel=""nofollow"">https://github.com/googlesamples/android-MediaRouter</a>. In this sample there is also a <code>MediaRouter</code> that discovers all <code>MediaRouteProviders</code> in the network. 
This <code>SampleMediaRouteProvider</code> is visible in the same device to other apps but its not visible to apps on other device in the same network.  </p>

<p>Can you please help me to get <code>MediaRouteProvider</code> visible in wifi network. 
Iam looking to create a <code>MediaRenderer</code> on a Android device that I could use to cast audio from other Android devices. </p>
",5402174,,1841827,,2016-08-24 21:47:44,2017-01-25 20:01:11,MediaRouterProvider not visible in the network,<android><casting><upnp><mediarouter>,1,0,,,
Android,39253010,1,,,,,,8/31/2016 14:57:56,,1,299,"<p>I'm trying to develop an application that uses Camera 2 API, but I have a problem when I try to edit the height of the bottom bar. I would like to remove the black space between the camera and bottom bar. Moreover, I would like to extend the camera height.</p>

<p>I followed the Google <a href=""https://github.com/googlesamples/android-Camera2Basic"" rel=""nofollow noreferrer"">Camera2Basic</a> example.</p>

<p><a href=""https://i.stack.imgur.com/4foft.jpg"" rel=""nofollow noreferrer""><img src=""https://i.stack.imgur.com/4foft.jpg"" alt=""enter image description here""></a></p>

<p>Could I fix this problem?</p>

<p>Thanks.</p>

<p><strong>activity_camera.xml</strong></p>

<pre><code>&lt;?xml version=""1.0"" encoding=""utf-8""?&gt;
&lt;FrameLayout xmlns:android=""http://schemas.android.com/apk/res/android""
    xmlns:tools=""http://schemas.android.com/tools""
    android:id=""@+id/container""
    android:layout_width=""match_parent""
    android:layout_height=""match_parent""
    android:background=""#000""
    tools:context="".CameraActivity"" /&gt;
</code></pre>

<p><strong>fragment_camera2.xml</strong></p>

<pre><code>&lt;?xml version=""1.0"" encoding=""utf-8""?&gt;
&lt;RelativeLayout xmlns:android=""http://schemas.android.com/apk/res/android""
    xmlns:app=""http://schemas.android.com/apk/res-auto""
    android:layout_width=""match_parent""
    android:layout_height=""match_parent""
    android:foreground=""?selectableItemBackground"" &gt;

    &lt;widgets.AutoFitTextureView
        android:id=""@+id/texture""
        android:layout_width=""match_parent""
        android:layout_height=""match_parent""
        android:layout_alignParentLeft=""true""
        android:layout_alignParentStart=""true""
        android:layout_alignParentTop=""true"" /&gt;

    &lt;FrameLayout
        android:id=""@+id/control""
        android:layout_width=""match_parent""
        android:layout_height=""wrap_content""
        android:layout_alignParentBottom=""true""
        android:layout_alignParentLeft=""true""
        android:layout_alignParentStart=""true""
        android:elevation=""4dp""
        android:paddingBottom=""12dp""
        android:paddingLeft=""16dp""
        android:paddingRight=""16dp""
        android:paddingTop=""12dp""
        android:background=""@color/white"" &gt;

        &lt;ImageButton
            android:id=""@+id/picture""
            android:layout_width=""@dimen/ic_camera""
            android:layout_height=""@dimen/ic_camera""
            android:layout_gravity=""center""
            android:background=""@drawable/cam_circle_selector""
            android:contentDescription=""@string/description_info""
            android:scaleType=""fitXY""
            app:srcCompat=""@drawable/ic_action_capture"" /&gt;

    &lt;/FrameLayout&gt;

&lt;/RelativeLayout&gt;
</code></pre>
",4711153,,4711153,,2016-10-05 15:49:25,2019-01-06 7:57:11,Android Camera2 - Remove black space between camera and bottom bar,<android><android-camera2>,1,7,1,,
Android,39363500,1,,,,,,9/7/2016 7:15:51,,1,2781,"<p>I use <code>setAlarmClock</code> method of <code>Alarmmanager</code> for do alarm clock application.
When I set alarm clock from 6.00 AM and alarm in 6.01 AM . It delay and not exact.</p>

<p>Code when <code>setAlarmClock</code>.</p>

<pre><code>Intent intent = new Intent(getBaseContext(), AlarmReceiver.class);
intent.setFlags(Intent.FLAG_ACTIVITY_NO_ANIMATION);
intent.putExtra(AppConstant.REMINDER, note.convertToString());
PendingIntent pendingIntent = PendingIntent.getBroadcast(getApplicationContext(),
        note.getId(), intent, PendingIntent.FLAG_CANCEL_CURRENT);
AlarmManager alarmManager = (AlarmManager) getSystemService(Context.ALARM_SERVICE);

if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.LOLLIPOP) {
    alarmManager.setAlarmClock(new AlarmManager.AlarmClockInfo(getTargetTime().getTimeInMillis(),pendingIntent),pendingIntent);
}
</code></pre>

<p>Code when setCalander for alarm</p>

<pre><code>  private Calendar getTargetTime() {
    Calendar calNow = Calendar.getInstance();
    Calendar calSet = (Calendar) calNow.clone();
    calSet.set(Calendar.DAY_OF_MONTH, sDay);
    calSet.set(Calendar.HOUR_OF_DAY, sHour);
    calSet.set(Calendar.MINUTE, sMinute);
    calSet.set(Calendar.SECOND, 0);
    calSet.set(Calendar.MILLISECOND, 0);

    return calSet;
}
</code></pre>

<p>Ok, I implement from this project <a href=""https://github.com/googlesamples/android-DirectBoot"" rel=""nofollow"">https://github.com/googlesamples/android-DirectBoot</a>.</p>

<p>This project use setAlarmClock for alarm when it's time.</p>

<p>update: I change setAlarmClock to setExact</p>

<p>This code:</p>

<pre><code> alarmManager.setExact(AlarmManager.RTC_WAKEUP, getTargetTime().getTimeInMillis(), pendingIntent);
</code></pre>

<p>It doesn't work for me but It delay same setAlarmClock.</p>

<p>Current Time in millisecond: 1473318858628
I change to default format by use <a href=""http://www.ruddwire.com/handy-code/date-to-millisecond-calculators/#.V9EPXfmLRD8"" rel=""nofollow"">http://www.ruddwire.com/handy-code/date-to-millisecond-calculators/#.V9EPXfmLRD8</a></p>

<p>Thu Sep 08 2016 14:14:18 GMT+0700</p>

<p>Set Alarm Time in millisecond:1473318960000</p>

<p>Thu Sep 08 2016 14:16:00 GMT+0700</p>

<p>And now It's 14:16:00 , It doesn't alarm.</p>

<p>It's alarm on 14.20:00 , so delay about 4 minutes. ( Time in millisecond = 1473319200207)</p>

<p>Thank</p>
",5549837,,5549837,,2016-09-08 7:23:25,2016-09-08 7:23:25,setAlarmClock not exact in android marshmallow,<android><alarmmanager><android-alarms>,1,2,2,,
Android,39443657,1,,,,,,9/12/2016 5:08:33,,2,967,"<p>I am using vision api for tracking face. I applied a mask on the basis of face position.When i take a picture from front camera i call  camerasource.takePicture() to save images.I am facing issue of image rotation in some device like samsung and capture image shows mask and face in different different position.I use Exif class to get orientation of images but it always return 0 so i am unable to rotate the image.
I am using following class to getOrientation and rotate image.</p>

<pre><code> public class ExifUtils {
 public Bitmap rotateBitmap(String src, Bitmap bitmap) {
    try {
        int orientation = getExifOrientation(src);

        if (orientation == 1) {
            return bitmap;
        }

        Matrix matrix = new Matrix();
        switch (orientation) {
            case 2:
                matrix.setScale(-1, 1);
                break;
            case 3:
                matrix.setRotate(180);
                break;
            case 4:
                matrix.setRotate(180);
                matrix.postScale(-1, 1);
                break;
            case 5:
                matrix.setRotate(90);
                matrix.postScale(-1, 1);
                break;
            case 6:
                matrix.setRotate(90);
                break;
            case 7:
                matrix.setRotate(-90);
                matrix.postScale(-1, 1);
                break;
            case 8:
                matrix.setRotate(-90);
                break;
            default:
                return bitmap;
        }

        try {
            Bitmap oriented = Bitmap.createBitmap(bitmap, 0, 0,
                    bitmap.getWidth(), bitmap.getHeight(), matrix, true);
            bitmap.recycle();
            return oriented;
        } catch (OutOfMemoryError e) {
            e.printStackTrace();
            return bitmap;
        }
    } catch (IOException e) {
        e.printStackTrace();
    }

    return bitmap;
}

private int getExifOrientation(String src) throws IOException {
    int orientation = 1;

    try {

        if (Build.VERSION.SDK_INT &gt;= 5) {
            Class&lt;?&gt; exifClass = Class
                    .forName(""android.media.ExifInterface"");
            Constructor&lt;?&gt; exifConstructor = exifClass
                    .getConstructor(new Class[]{String.class});
            Object exifInstance = exifConstructor
                    .newInstance(new Object[]{src});
            Method getAttributeInt = exifClass.getMethod(""getAttributeInt"",
                    new Class[]{String.class, int.class});
            Field tagOrientationField = exifClass
                    .getField(""TAG_ORIENTATION"");
            String tagOrientation = (String) tagOrientationField.get(null);
            orientation = (Integer) getAttributeInt.invoke(exifInstance,
                    new Object[]{tagOrientation, 1});

        }
    } catch (ClassNotFoundException e) {
        e.printStackTrace();
    } catch (SecurityException e) {
        e.printStackTrace();
    } catch (NoSuchMethodException e) {
        e.printStackTrace();
    } catch (IllegalArgumentException e) {
        e.printStackTrace();
    } catch (Fragment.InstantiationException e) {
        e.printStackTrace();
    } catch (IllegalAccessException e) {
        e.printStackTrace();
    } catch (InvocationTargetException e) {
        e.printStackTrace();
    } catch (NoSuchFieldException e) {
        e.printStackTrace();
    } catch (java.lang.InstantiationException e) {
        e.printStackTrace();
    }

    return orientation;
}
</code></pre>

<p>}</p>

<p>I found this <a href=""https://github.com/googlesamples/android-vision/issues/124"" rel=""nofollow"">issue</a> in vision api is there any solution.</p>
",4875115,,4875115,,2016-09-12 9:37:42,2016-09-15 12:09:41,camerasource.takePicture() save rotated images in some device,<android><google-vision>,3,3,,,
Android,39470098,1,,,,,,9/13/2016 12:27:22,,14,4423,"<p>I have gone through the android finger print sample provided by Google.</p>

<p><a href=""https://github.com/googlesamples/android-FingerprintDialog"" rel=""nofollow noreferrer"">https://github.com/googlesamples/android-FingerprintDialog</a></p>

<p>As I am new to security standards, I am unable to understand the following.</p>

<ol>
<li>Why we need to use Keystore, key, CryptoObject... etc? Simply It could be like, ask fingerprint manager to authenticate the user and it can simply return the status(success/failed)</li>
<li>Do I need to generate new key every time on each authentication?</li>
</ol>
",1294150,,3857465,,2018-09-13 10:55:35,2018-09-13 10:55:35,Why crypto object is needed for Android fingerprint authentication?,<android><android-fingerprint-api>,3,3,3,,
Android,39481821,1,,,,,,9/14/2016 2:56:37,,1,579,"<h1>Question</h1>

<p>I want to do something similar to what's done on the <a href=""https://github.com/googlesamples/android-Camera2Basic"" rel=""nofollow"">Camera2Basic</a> sample, that is:</p>

<ol>
<li><strong>Previewing</strong> images from the camera using a <code>TextureView</code></li>
<li><strong>Processing</strong> images from the camera using a <code>ImageReader</code></li>
</ol>

<p>With a few differences regarding <code>2</code>:</p>

<ul>
<li>I'm only interested on the gray channel (brightness) from the images to be processed. Their dimensions should be around 1000 x 1000 pixels (and not the highest resolution available)</li>
<li>When a image to be processed is available, a generic <code>process(Image)</code> method will be called instead of saving images to disk. What this method does is out of the scope of this question, but it takes around 50 ms to return</li>
<li>The image data should be processed periodically (around 10 FPS, but speed is not critical) instead of eventually</li>
</ul>

<p>How can I accomplish this using the <code>Camera2</code> API?</p>

<h1>Observations</h1>

<ul>
<li>I've changed the way I'm creating the <code>ImageReader</code> instance, selecting smaller dimensions and a different format (<code>YUV_420_888</code> instead of <code>JPEG</code>). The <code>Y</code> plane will be accessed in order to get the brightness data. Is there a more efficient format (since I'm simply ignoring the <code>U</code> and <code>V</code> planes)?</li>
<li>Both <code>TextureView</code> and <code>ImageReader</code> surfaces should be filled periodically, but at different rates. Since there can be only one repeating <code>CameraRequest</code> on a <code>CameraCaptureSession</code> (which can be set by calling <code>setRepeatingRequest()</code>), am I supposed to manually call <code>capture()</code> periodically (e.g. call <code>setRepeatingRequest()</code> with the preview request and call <code>capture()</code> periodically with the process request)?</li>
<li>Can the performance be improved by sending reprocessed requests to obtain the images to be processed from the preview images? If so, how can I do it?</li>
</ul>
",4681266,,,,,2016-09-20 8:55:43,Use Camera2 to Preview and Process camera data,<android><android-camera2>,1,0,1,,
Android,39585232,1,,,,,,9/20/2016 3:24:12,,2,158,"<p>I've tried the sample project from Google-Trivial Drive</p>

<p>it works well now I'm trying to refactor it</p>

<p>see the comment in the link below</p>

<p><a href=""https://github.com/googlesamples/android-play-billing/blob/master/TrivialDrive/app/src/main/java/com/example/android/trivialdrivesample/MainActivity.java#L198"" rel=""nofollow"">https://github.com/googlesamples/android-play-billing/blob/master/TrivialDrive/app/src/main/java/com/example/android/trivialdrivesample/MainActivity.java#L198</a></p>

<p>it says, ""We register the receiver here instead of as a  in the Manifest"" also ""registering this listener in an Activity is a bad idea""</p>

<p>so what should I do actually?</p>
",4652534,,,,,2016-09-20 5:29:44,Android in app purchase where to register receiver,<java><android><in-app-purchase><in-app-billing>,1,0,,,
Android,39658993,1,,,,,,9/23/2016 10:52:37,,16,3787,"<p>I have a BroadcastReceiver implementation that receives network connection events. its declared in the AndroidManifest.xml and is called by Android automatically when network events occur.</p>

<p>BroadcastReceiver:</p>

<pre><code>public class ConnectivityChangeReceiver extends BroadcastReceiver {

    @Override
    public void onReceive(Context context, Intent intent) {
        Log.v(TAG, ""action: "" + intent.getAction());
        Log.v(TAG, ""component: "" + intent.getComponent());
    }
}
</code></pre>

<p>AndroidManifest.xml:</p>

<pre><code>&lt;?xml version=""1.0"" encoding=""utf-8""?&gt;
&lt;manifest xmlns:android=""http://schemas.android.com/apk/res/android""
    package=""com.example.test""&gt;

    &lt;uses-permission android:name=""android.permission.ACCESS_NETWORK_STATE"" /&gt;

    &lt;application
        android:allowBackup=""true""
        android:icon=""@mipmap/ic_launcher""
        android:label=""@string/app_name""
        android:supportsRtl=""true""
        android:theme=""@style/AppTheme""&gt;
        ...
        &lt;receiver
            android:name="".ConnectivityChangeReceiver""
            android:enabled=""true""&gt;
            &lt;intent-filter&gt;
                &lt;action android:name=""android.net.conn.CONNECTIVITY_CHANGE"" /&gt;
            &lt;/intent-filter&gt;
        &lt;/receiver&gt;
    &lt;/application&gt;

&lt;/manifest&gt;
</code></pre>

<p>I'd like to use Google's MVP sample architecture described here for my app:</p>

<p><a href=""https://github.com/googlesamples/android-architecture/tree/todo-mvp/"" rel=""noreferrer"">https://github.com/googlesamples/android-architecture/tree/todo-mvp/</a></p>

<p>Using the above architecture, just wondering:</p>

<ol>
<li><p>Where should my BroadcastReceiver be placed?</p></li>
<li><p>If my BroadcastReceiver needs to write to the database, whats the best way of doing this?</p></li>
<li><p>If my BroadcastReceiver needs to update the UI, whats the best way of doing this?</p></li>
</ol>
",4477923,,,,,2016-10-03 12:18:47,Where to put BroadcastReceiver in Android MVP?,<android><mvp>,5,5,6,,
Android,39797164,1,,,,,,9/30/2016 17:42:43,,1,1363,"<p>In this <a href=""https://stackoverflow.com/questions/32051973/google-vision-api-samples-get-the-camerasource-to-focus?rq=1"">SO Thread</a>, <a href=""https://stackoverflow.com/users/5231007/pm0733464"">pm0733464</a>, says this: </p>

<blockquote>
  <p>we open sourced the CameraSource class, which has an auto focus method as well. This one allows you to set a specific focus mode as opposed to the ""continuous video"" mode that the official API defaults to:</p>
</blockquote>

<p>Which was great. But it seems that the Google Vision API has moved on and the open Sourced version has not. The official API now has a new type of processor called: FocusingProcessor -- which allows the detector to only respond on the OnFocus event. </p>

<pre><code> barcodeDetector = new BarcodeDetector.Builder(this)
            .setBarcodeFormats(Barcode.QR_CODE | Barcode.PDF417)
            .build();
 barcodeDetector.setProcessor(new BarcodeFocusingProcessor(
            barcodeDetector,
            new NullTracker()));
 CameraSource.Builder builder = new CameraSource.Builder(getApplicationContext(), barcodeDetector)
            .setFacing(CameraSource.CAMERA_FACING_BACK)
            .setRequestedPreviewSize(1600, 1024)
            .setAutoFocusEnabled(true)
            .setRequestedFps(24.0f);
    cameraSource = builder.build();
</code></pre>

<p>In my experiments this ""finds"" barcodes much faster than using the processor that the examples show in the <a href=""https://github.com/googlesamples/android-vision/blob/master/visionSamples/barcode-reader/app/src/main/java/com/google/android/gms/samples/vision/barcodereader/ui/camera/CameraSource.java"" rel=""nofollow noreferrer"">Official Google Vision API Samples</a></p>

<p>Am I missing something somewhere? Or is the CameraSource in the Google.Vision libraries not the same one they are showing in the open source?</p>

<p>[EDIT] 
Sharing code by request of pm0733464:</p>

<p>For the record, I began with the fork of the vision api Demo which allows for <a href=""https://github.com/wax911/Vision-Barcode-Scanner"" rel=""nofollow noreferrer"">automatically detecting barcode</a></p>

<p>My code makes some simple changes. First off, I add PDF417 to the scanable barcodes. Then I set the processor to an autofocus-er. I turn the tracker into a nullTracker because I don't need the graphic displaying, and I hoped that would speed some things up</p>

<p>in  <strong>BarcodeCaptureActivity</strong> I change <strong>createCameraSource</strong> where it defined the barcode detector like to this:</p>

<pre><code>  BarcodeDetector barcodeDetector =
                new BarcodeDetector.Builder(context)
                        .setBarcodeFormats(Barcode.PDF417)
                        .build();


        barcodeDetector.setProcessor(new MyCameraFocusingProcessor(
                barcodeDetector,
                new NullTracker()));


// Creates and starts the camera.  Note that this uses a higher resolution in comparison
        // to other detection examples to enable the barcode detector to detect small barcodes
        // at long distances.

        CameraSource.Builder builder = new CameraSource.Builder(getApplicationContext(), barcodeDetector)
                .setFacing(CameraSource.CAMERA_FACING_BACK)
                .setRequestedPreviewSize(1600, 1024)
                .setRequestedFps(24.0f);

        // make sure that auto focus is an available option
        if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.ICE_CREAM_SANDWICH)
        {
            builder = builder.setFocusMode(
                    autoFocus ? Camera.Parameters.FOCUS_MODE_CONTINUOUS_PICTURE : null);
        }

        mCameraSource = builder
                .setFlashMode(useFlash ? Camera.Parameters.FLASH_MODE_TORCH : null)
                .build();
    }
</code></pre>

<p>My FocusProcessor (in the same class) looks like this:</p>

<pre><code>private class MyCameraFocusingProcessor implements Detector.Processor&lt;Barcode&gt;
    {
        public MyCameraFocusingProcessor(BarcodeDetector barcodeDetector, NullTracker emptyTracker)
        {

        }

        @Override
        public void release()
        {

        }

        @Override
        public void receiveDetections(Detector.Detections&lt;Barcode&gt; detections)
        {
            //  boolean chk = detections.detectorIsOperational();
            int sizeCheck = detections.getDetectedItems().size();
            if (sizeCheck &gt; 0)
            {
                SparseArray&lt;Barcode&gt; codes = detections.getDetectedItems();
                for (int i = 0; i &lt; sizeCheck; i++)
                {
                    Barcode barcode = codes.valueAt(i);
                    try
                    {
                        if (barcode.format == Barcode.PDF417)
                        {
                            Intent data = new Intent();
                            data.putExtra(BarcodeObject, barcode);
                            setResult(CommonStatusCodes.SUCCESS, data);
                            finish();
                            break;
                        }
                    }
                    catch (Exception ex)
                    {
                        Log.d(""Detect"", ""Error: "" + ex.getMessage());
                    }
                }
            }
            return;
        }
    }

    private class NullTracker
    {

    }
</code></pre>
",628887,,-1,,2017-05-23 12:00:40,2016-10-10 16:06:43,Is the Open Sourced Google Vision API CameraSource class Out-Dated?,<android><android-camera><google-play-services><android-vision><google-vision>,1,0,1,,
Android,39982859,1,,,,,,10/11/2016 17:10:24,,1,1584,"<p>Is it possible to link platforms\android-XX\arch-arm\usr\lib*.a versions of libraries when using NDK Cmake build system with Android Studio? I'm using LLVM toolchain and Android NDK 13.</p>

<p>I have tried modifications on sample app, changing file: <a href=""https://github.com/googlesamples/android-ndk/blob/master-cmake/hello-jni/app/src/main/cpp/CMakeLists.txt"" rel=""nofollow"">https://github.com/googlesamples/android-ndk/blob/master-cmake/hello-jni/app/src/main/cpp/CMakeLists.txt</a></p>

<p>With following modification (adding libm.a):</p>

<pre><code>target_link_libraries(hello-jni libm.a android log)
</code></pre>

<p>Builds successfully, but readelf -d reveals that libm.so is still linked:</p>

<pre><code> 0x00000001 (NEEDED)                     Shared library: [libandroid.so]
 0x00000001 (NEEDED)                     Shared library: [liblog.so]
 0x00000001 (NEEDED)                     Shared library: [libm.so]
 0x00000001 (NEEDED)                     Shared library: [libdl.so]
 0x00000001 (NEEDED)                     Shared library: [libc.so]
</code></pre>

<p>When adding also libc.a it gets worse, building fails:</p>

<pre><code>Error:error: relocation overflow in R_ARM_THM_JUMP11
Error:error: linker command failed with exit code 1 (use -v to see invocation)
</code></pre>

<p>BTW, sometimes I see only last error without any explanation (for example, when misspelling library name). Should I set -v flag somehwere to see more details? How to do it?</p>
",6725342,,,,,2016-10-12 17:05:55,Linking static libraries libm.a or libc.a with NDK cmake,<android><c++><android-ndk><cmake><clang>,1,4,1,,
Android,40144970,1,,,,,,10/20/2016 3:31:37,,9,3229,"<p>I've been looking at the Google Android Architecture examples for MVP with Dagger 2:</p>

<p><a href=""https://github.com/googlesamples/android-architecture/blob/todo-mvp-dagger/todoapp/app/src/main/java/com/example/android/architecture/blueprints/todoapp/tasks/TasksActivity.java"" rel=""noreferrer"">https://github.com/googlesamples/android-architecture/blob/todo-mvp-dagger/todoapp/app/src/main/java/com/example/android/architecture/blueprints/todoapp/tasks/TasksActivity.java</a></p>

<p>But, the example is rather trivial - each Activity has only one Fragment, and the Dagger Component is built in the Activity, and used to inject the Activity with the Presenter for the Fragment.</p>

<p>I've tried building on that example, to add multiple fragments to an Activity and navigate between them. Since each fragment has its own presenter, I've moved the dagger component building into the Fragment. So now I have:</p>

<ul>
<li>FragmentCallback (an interface providing methods to load fragment1 and fragment2)</li>
<li>Activity (implements FragmentCallback)</li>
<li>Fragment1 (implements the view interface)</li>
<li>Fragment1Contract (defines view and presenter interfaces)</li>
<li>Fragment1Presenter (implements the presenter interface)</li>
<li>Fragment1Component (injects Fragment1)</li>
<li>Fragment1Module (provides the view and presenter)</li>
<li>Fragment2</li>
<li>Fragment2Contract (defines view and presenter interfaces)</li>
<li>Fragment2Presenter (implements the presenter interface)</li>
<li>Fragment2Component (injects Fragment2)</li>
<li>Fragment2Module (provides the view and presenter)</li>
</ul>

<p>The activity does very little, it just loads the first fragment and implements FragmentCallback which the view can use to switch to another fragment.</p>

<p>The first fragment has a button which loads the second fragment using the FragmentCallback - which the fragments get by casting the Activity via</p>

<pre><code>public void onAttach(Context context) {
    super.onAttach(context);
    callback = (FragmentCallback) context;
}
</code></pre>

<p>Am I on a sensible track here? While the code looks clean with MVP am I missing something w.r.t the dagger components and modules?</p>

<p>Thanks.</p>

<h1>Update</h1>

<p>I've improved my situation a bit by creating one Component and Module for the Activity. Each Fragment still builds the Dagger context, but I'm no longer injecting the view (fragment) in the presenter constructor - when the fragment builds the context, injects itself (so it has the presenter) it then calls <code>presenter.init(this)</code> so that the presenter now has the view. </p>

<p>This nicely reduces the number of classes, and the next step would be to try only building the component in the activity, and having the fragment use this to inject itself (without having to build a new component). </p>
",20242,,20242,,2016-10-21 23:47:29,2016-11-08 12:22:51,Android MVP with Dagger 2 - Activity with multiple fragments,<android><mvp><dagger-2>,1,7,2,,
Android,40331561,1,,,,,,10/30/2016 17:14:47,,1,1890,"<p>I am trying to capture video in a custom view. I can display video in correct orientation via Camera.setDisplayOrientation(rotation), but recorded video is still in landscape mode. I cannot capture video correctly in portrait mode.</p>

<p>I tested <a href=""https://github.com/googlesamples/android-Camera2Video"" rel=""nofollow"">https://github.com/googlesamples/android-Camera2Video</a>  and it has the same problem too.</p>

<p>I am calling <code>setCameraOrientation()</code> method after <code>Camera.open(currentCameraId)</code> after checking for permissions.</p>

<pre><code>private void setCameraOrientation()
{
    int rotation = getRotation();
    mCamera.setDisplayOrientation(rotation);

    Camera.Parameters parameters = mCamera.getParameters();
    parameters.setRotation(rotation);
    mCamera.setParameters(parameters);
}

private int getRotation()
{
    Display display = getWindowManager().getDefaultDisplay();
    int rotation = 0;
    switch (display.getRotation())
    {
        case Surface.ROTATION_0:
            rotation = 90;
            break;
        case Surface.ROTATION_90:
            rotation = 0;
            break;
        case Surface.ROTATION_180:
            rotation = 270;
            break;
        case Surface.ROTATION_270:
            rotation = 180;
            break;
    }
    return rotation;
}
</code></pre>

<p>This lets me display video in correct orientation. But when after I stop <code>MediaRecorder</code> and check for saved file, I see 90 degrees rotated video with bad aspect ratio. I checked this via pulling to my computer and in another fragment which has VideoView element. My  prepareRecorder method is: </p>

<pre><code>private boolean prepareRecorder()
{
    mCamera.lock();
    mCamera.unlock();
    recorder = new MediaRecorder();

    recorder.setCamera(mCamera);

    recorder.setVideoSource(MediaRecorder.VideoSource.CAMERA);

    CamcorderProfile profile = CamcorderProfile.get(CamcorderProfile.QUALITY_HIGH);
    if (!mIsMute)
    {
        recorder.setAudioSource(MediaRecorder.AudioSource.DEFAULT);
        recorder.setProfile(profile);
    }
    else
    {
        recorder.setOutputFormat(profile.fileFormat);
        recorder.setVideoSize(profile.videoFrameWidth, profile.videoFrameHeight);
        recorder.setVideoFrameRate(profile.videoFrameRate);
        recorder.setVideoEncoder(profile.videoCodec);
        recorder.setVideoEncodingBitRate(profile.videoBitRate);
    }

    recorder.setMaxDuration(maxVideoDuration - videoProgress);

    String fileName = StorageUtil.sharedUtil().getExternalStorageDir() + File.separator + String.format(
            fileNameFormat, videoCount);
    recorder.setOutputFile(fileName);

    recorder.setPreviewDisplay(surfaceHolder.getSurface());

    try
    {
        recorder.prepare();
    }
    catch (Exception e)
    {
        e.printStackTrace();
        return false;
    }

    return true;
}
</code></pre>

<p>and then I just call <code>recorder.start();</code></p>

<p>By the way I tried <code>recorder.setOrientationHint(90);</code> just before <code>recoreder.prepare();</code> but it does not do anything. I can display correct orientation but cannot save.</p>
",7027099,,,,,2017-01-21 17:49:29,"Android, How to rotate recorded video using MediaRecorder in portrait mode",<android><video><orientation><mediarecorder><portrait>,2,0,1,,
Android,40533276,1,,,,,,11/10/2016 17:06:07,,2,1167,"<p>I was working on taking a photo from my camera, and everything seems good, I'm using <a href=""https://github.com/googlesamples/android-Camera2Basic"" rel=""nofollow noreferrer"">Camera2Basic</a> sample, this code only offre the back camera so i added a button to switch between 2 cameras like this :</p>

<p>Boolean facingCamera = true; // initialization</p>

<pre><code>onClick() {
    facingCamera = !facingCamera;
    closeCamera();
    openCamera(mTextureView.getWidth(), mTextureView.getHeight()); 
}
</code></pre>

<p>And i changed method setUpCameraOutputs code like this :</p>

<pre><code>if (facing != null &amp;&amp; facing == CameraCharacteristics.LENS_FACING_FRONT ) {
    continue;
}
</code></pre>

<p><strong>To</strong></p>

<pre><code>if (facing != null &amp;&amp; facing == CameraCharacteristics.LENS_FACING_FRONT &amp;&amp; !facingCamera 
|| facing != null &amp;&amp; facing == CameraCharacteristics.LENS_FACING_BACK &amp;&amp; facingCamera ) {
    continue;
}
</code></pre>

<p>This work fine for Nexus 4 but for my LG-D802 is not working fine ( onConfigureFailed is called each time I try to change the camera )</p>

<p>How to fix this properly so it work fine on all devices?</p>
",6325994,,,,,2018-08-11 16:01:19,Android: Camera2 switching between back and front camera,<android><android-camera><android-camera2>,1,0,1,,
Android,40548551,1,,,,,,11/11/2016 12:58:48,,6,1120,"<p>I have app which uses Fingerprint and 4 digit pin (which can be set by user in application settings, this is not system pin/pattern/password) authorization.</p>

<p>With Fingerprint everything is fine, I have problem with pin.</p>

<p>What I'm trying to do is:</p>

<ol>
<li>Let user set pin from application settings</li>
<li>Generate Keypair in keystore for some alias protected by entered pin (so that private key can not be accessed without this pin)</li>
<li>Send public key to server for future signature verification</li>
<li>Get user token from server and store it in local storage</li>
</ol>

<p>Then during Authorization:</p>

<ol start=""5"">
<li>Request user to enter the pin</li>
<li>Retrieve private key by entered pin</li>
<li>Retrieve token from local storage</li>
<li>Sign token with private key from step 6</li>
<li>Send it to server with signed data</li>
<li>Verify signature on server and if it is valid, open session for user.</li>
</ol>

<p>My question is: <strong>How can I generate KeyPair protected by pin entered by user</strong></p>

<p>P.S. For <a href=""https://github.com/googlesamples/android-AsymmetricFingerprintDialog"" rel=""nofollow noreferrer"">fingerprint</a> this logic is handled by:</p>

<pre><code>KeyGenParameterSpec.Builder(KEY_NAME, KeyProperties.PURPOSE_SIGN).setUserAuthenticationRequired(true)
</code></pre>
",1372146,,1372146,,2016-11-13 16:54:35,2016-11-13 16:54:35,"How to generate KeyPair in android KeyStore, protected by custom password",<android><keystore><key-pair><android-fingerprint-api>,1,0,1,,
Android,41221284,1,,,,,,12/19/2016 11:09:22,,3,3425,"<p>I try to change the aspect ratio of the <a href=""https://developer.android.com/reference/android/hardware/camera2/package-summary.html"" rel=""nofollow noreferrer"">Camera2</a> preview but I fail :-(</p>

<p>For cropping I have to use the <a href=""https://developer.android.com/reference/android/hardware/camera2/CaptureRequest.html#SCALER_CROP_REGION"" rel=""nofollow noreferrer"">SCALER_CROP_REGION</a> but I don't get it working.</p>

<p>I used the <a href=""https://github.com/googlesamples/android-Camera2Video"" rel=""nofollow noreferrer"">android-Camera2Video</a> example from Google for my tests.</p>

<p>In the <a href=""https://github.com/googlesamples/android-Camera2Video/blob/master/Application/src/main/java/com/example/android/camera2video/Camera2VideoFragment.java#L416"" rel=""nofollow noreferrer"">openCamera</a> method I added the following line:</p>

<pre><code>mSensorSize = characteristics.get(CameraCharacteristics.SENSOR_INFO_ACTIVE_ARRAY_SIZE);
</code></pre>

<p>And in <a href=""https://github.com/googlesamples/android-Camera2Video/blob/master/Application/src/main/java/com/example/android/camera2video/Camera2VideoFragment.java#L486"" rel=""nofollow noreferrer"">startPreview</a> I added this:</p>

<pre><code>final int centerX = mSensorSize.width() / 2;
final int centerY = mSensorSize.height() / 2;
final int cropSize = Math.min(mSensorSize.width(), mSensorSize.height());
final Rect crop = new Rect(centerY - cropSize / 2,
                           centerX - cropSize / 2,
                           cropSize,
                           cropSize);
mPreviewBuilder.set(CaptureRequest.SCALER_CROP_REGION, crop);
</code></pre>

<p>I should get a preview with a 1:1 ratio but it is 3:4 :-(</p>

<p>What did I wrong?</p>
",1016472,,,,,2017-07-14 6:39:12,How to change aspect ratio of camera2 preview?,<android><android-camera2>,1,1,1,,
Android,41284827,1,,,,,,12/22/2016 13:56:56,,4,702,"<p>I'm trying to develop a media application for Android Auto. To help me, I've downloaded the AndroidMediaBrowserService Sample (<a href=""https://github.com/googlesamples/android-MediaBrowserService"" rel=""nofollow noreferrer"">https://github.com/googlesamples/android-MediaBrowserService</a>).
I've succeded in installing the application, but when I launch Android Auto on my phone and I click the Media icon in the bottom right corner, the application is not listed with the other ones and I can't find out why. Can someone help me please ?</p>
",4349315,,845568,,2016-12-27 23:07:59,2018-12-19 15:10:11,Application not listed in Android Auto,<android><android-auto>,2,2,,,
Android,41296030,1,,,,,,12/23/2016 6:07:44,,2,2496,"<p><a href=""https://github.com/googlesamples/android-SwipeRefreshLayoutBasic"" rel=""nofollow noreferrer"">https://github.com/googlesamples/android-SwipeRefreshLayoutBasic</a></p>

<p>Referring to the sample above. The swipe refresh is calling when user scrolls up reaches top of the list. What i want is to call swipe refresh only when user specially swipes for it. Not calling swipe refresh when user is scrolling up and reached top end.</p>

<p>When i am using the lib below, i get what i want. But i m facing some issues with this lib so i didnt want to use it.
github.com/baoyongzhang/android-PullRefreshLayout</p>

<p>Here is the video clip of what i dont want:
<a href=""https://drive.google.com/file/d/0By2g3SV1qz5TUFdZZ1FUNmxzU1E/view?usp=sharing"" rel=""nofollow noreferrer"">https://drive.google.com/file/d/0By2g3SV1qz5TUFdZZ1FUNmxzU1E/view?usp=sharing</a></p>
",4302472,,4302472,,2016-12-23 6:21:48,2016-12-23 9:08:41,"Swipe refresh to be called only when user swipes for it, not when user reaches top of list",<android><android-support-library><swiperefreshlayout>,4,13,1,,
Android,41518374,1,,,,,,1/7/2017 6:02:56,,1,458,"<p>I am learning camera 2 API using google sample code <a href=""https://github.com/googlesamples/android-Camera2Basic"" rel=""nofollow noreferrer"">android-Camera2Basic</a> in that i have changed the width and height of <code>AutoFitTextureView</code> to 200 dp and when i capture the picture then i seeing that picture has more focused area than the preview size.</p>

<p>So How can i get the image as in the preview?  </p>
",1007302,,,,,2017-03-22 9:13:52,How can i get the image as in the preview size of TextureView in camera 2,<android><android-camera2>,1,1,,,
Android,41623247,1,,,,,,1/12/2017 21:23:03,,2,3377,"<p>I'm trying to implement things from this example - <a href=""https://github.com/googlesamples/android-testing/tree/master/ui/espresso/BasicSample"" rel=""nofollow noreferrer"">https://github.com/googlesamples/android-testing/tree/master/ui/espresso/BasicSample</a> - into my app.</p>

<p>When I try to execute the simple Espresso test, this happens:</p>

<blockquote>
  <p>""/Applications/Android Studio 2.2.3.app/Contents/jre/jdk/Contents/Home/bin/java"" (...)</p>
  
  <p>Process finished with exit code 1
  Class not found: ""com.faces_shop.app.MainActivityTest""Empty test suite.</p>
</blockquote>

<p>(copy-pasted from Android Studio)</p>

<p>The test:</p>

<pre><code>package com.faces_shop.app;

import android.support.test.filters.LargeTest;
import android.support.test.rule.ActivityTestRule;
import android.support.test.runner.AndroidJUnit4;

import org.junit.Rule;
import org.junit.Test;
import org.junit.runner.RunWith;

import static android.support.test.espresso.Espresso.onView;
import static android.support.test.espresso.action.ViewActions.closeSoftKeyboard;
import static android.support.test.espresso.action.ViewActions.typeText;
import static android.support.test.espresso.assertion.ViewAssertions.matches;
import static android.support.test.espresso.matcher.ViewMatchers.withId;
import static android.support.test.espresso.matcher.ViewMatchers.withText;

/**
 * Created by AnonymizedForReview on 2017-01-12.
 */
@RunWith(AndroidJUnit4.class)
@LargeTest
public class MainActivityTest {

    public static final String STRING_TO_BE_TYPED = ""Espresso"";

    @Rule
    public ActivityTestRule&lt;MainActivity&gt; mActivityRule = new ActivityTestRule&lt;&gt;(
            MainActivity.class);

    @Test
    public void changeText_sameActivity() {
        // Type text and then press the button.
        onView(withId(R.id.editFilter))
                .perform(typeText(STRING_TO_BE_TYPED), closeSoftKeyboard());
//        onView(withId(R.id.changeTextBt)).perform(click());

        // Check that the text was changed.
        onView(withId(R.id.editFilter)).check(matches(withText(STRING_TO_BE_TYPED)));
    }


}
</code></pre>

<p>The app's build.gradle:</p>

<pre><code>apply plugin: 'com.android.application'

android {
//    productFlavors {
//        /* https://android-developers.googleblog.com/2015/12/leveraging-product-flavors-in-android.html */
//        mock {
//            applicationIdSuffix = "".mock""
//        }
//        prod
//    }
    compileSdkVersion 25
    buildToolsVersion ""25.0.0""
    defaultConfig {
        applicationId ""com.faces_shop.app""
        minSdkVersion 16
        targetSdkVersion 25
        versionCode 1
        versionName ""1.0""
        testInstrumentationRunner ""android.support.test.runner.AndroidJUnitRunner""
    }
    buildTypes {
        release {
            minifyEnabled false
            proguardFiles getDefaultProguardFile('proguard-android.txt'), 'proguard-rules.pro'
        }
    }
}

dependencies {
    compile fileTree(dir: 'libs', include: ['*.jar'])
    compile project(':FacesApi')

//    androidTestCompile('com.android.support.test.espresso:espresso-core:2.2.2', {
//        exclude group: 'com.android.support', module: 'support-annotations'
//    })
    // Testing-only dependencies
    // Force usage of support annotations in the test app, since it is internally used by the runner module.
    androidTestCompile 'com.android.support:support-annotations:' + rootProject.supportLibVersion;
    androidTestCompile 'com.android.support.test:runner:' + rootProject.runnerVersion;
    androidTestCompile 'com.android.support.test:rules:' + rootProject.rulesVersion;
    androidTestCompile 'com.android.support.test.espresso:espresso-core:' + rootProject.espressoVersion;

    compile 'com.android.support:appcompat-v7:25.0.1'
    compile 'com.android.support:recyclerview-v7:25.0.1'
    testCompile 'junit:junit:4.12'
}
</code></pre>

<p>The top-level build.gradle:</p>

<pre><code>// Top-level build file where you can add configuration options common to all sub-projects/modules.

buildscript {
    repositories {
        jcenter()
    }
    dependencies {
        classpath 'com.android.tools.build:gradle:2.2.3'

        // NOTE: Do not place your application dependencies here; they belong
        // in the individual module build.gradle files
    }
}

allprojects {
    repositories {
        jcenter()
    }
}

ext {
    buildToolsVersion = ""24.0.1""
    supportLibVersion = ""25.0.1""
    runnerVersion = ""0.5""
    rulesVersion = ""0.5""
    espressoVersion = ""2.2.2""
}
</code></pre>

<p><strong>What am I doing wrong?</strong></p>

<p><strong>Why is the test class not seen?</strong></p>

<p>It is in this path in androidTest : .../Examples/DynamicList/FacesApp/src/androidTest/java/com/faces_shop/app/MainActivityTest.java</p>
",170451,,170451,,2017-01-12 21:29:10,2018-06-28 11:11:01,Android Espresso test: Class not found: ...Empty test suite,<android><android-studio><gradle><android-gradle><android-espresso>,1,1,,,
Android,41680922,1,,,,,,1/16/2017 16:33:18,,1,115,"<p>I am trying to set up a viewPager with two fragments. I am using the v4 support library for the FragmentPagerAdapter as in the sample Android Activity in Android Studio, this is how it looks:</p>

<pre><code>public class SectionsPagerAdapter extends FragmentPagerAdapter {

    SectionsPagerAdapter(FragmentManager fm) {
        super(fm);
    }

    @Override
    public Fragment getItem(int position) {

        switch (position){
            case 0:
                return FirstFragment.newInstance();
            case 1:
                return CameraFragment.newInstance();
            default:
                return null;
        }
    }

    @Override
    public int getCount() {
        // Show 2 total pages.
        return 2;
    }

}
</code></pre>

<p>My issue comes because I try to implement the Google <a href=""https://github.com/googlesamples/android-Camera2Basic"" rel=""nofollow noreferrer"">Camera2</a> example as my camera fragment. These Fragments are native Fragments, while the PagerAdapter expects support.v4.Fragments.</p>

<p>I have tried to use the v13 FragmentPagerAdapter, but this cannot use the v4.FragmentManager, and it doesn't have its own FragmentManager.</p>

<p>I also tried converting the CameraFragment to a v4 Fragment, but there is some code in there that doesn't compile to the v4 support library. </p>

<p>How do I solve this?</p>
",3052244,,,,,2017-04-25 13:32:58,Camera2 in FragmentPagerAdapter,<android><android-fragments><camera><android-viewpager>,1,2,,,
Android,41713056,1,,,,,,1/18/2017 6:50:49,,1,375,"<p>I want to make live filter in camera like Snapchat app. This app based on <a href=""https://github.com/googlesamples/android-vision/tree/master/visionSamples/FaceTracker"" rel=""nofollow noreferrer"">Google Vision Face Tracker</a>. </p>

<p>I have these following code in FaceGraphic.java:</p>

<pre><code>package com.google.android.gms.samples.vision.face.facetracker;

import android.graphics.Canvas;
import android.graphics.Color;
import android.graphics.Paint;
import android.graphics.Bitmap;
import android.graphics.BitmapFactory;

import com.google.android.gms.samples.vision.face.facetracker.ui.camera.GraphicOverlay;
import com.google.android.gms.vision.face.Face;
import com.google.android.gms.vision.face.Landmark;

/**
 * Graphic instance for rendering face position, orientation, and landmarks within an associated
* graphic overlay view.
*/
class FaceGraphic extends GraphicOverlay.Graphic {
    private static final float FACE_POSITION_RADIUS = 10.0f;
    private static final float ID_TEXT_SIZE = 40.0f;
    private static final float ID_Y_OFFSET = 50.0f;
    private static final float ID_X_OFFSET = -50.0f;
    private static final float BOX_STROKE_WIDTH = 5.0f;

    private static final int COLOR_CHOICES[] = {
        Color.BLUE,
        Color.CYAN,
        Color.GREEN,
        Color.MAGENTA,
        Color.RED,
        Color.WHITE,
        Color.YELLOW
    };
    private static int mCurrentColorIndex = 0;

    private Paint mFacePositionPaint;
    private Paint mIdPaint;
    private Paint mBoxPaint;

    private volatile Face mFace;
    private int mFaceId;
    private float mFaceHappiness;

    private Bitmap bitmap;
    private Bitmap sunglasses;

    FaceGraphic(GraphicOverlay overlay) {
        super(overlay);

        mCurrentColorIndex = (mCurrentColorIndex + 1) % COLOR_CHOICES.length;
        final int selectedColor = COLOR_CHOICES[mCurrentColorIndex];

        mFacePositionPaint = new Paint();
        mFacePositionPaint.setColor(selectedColor);

        mIdPaint = new Paint();
        mIdPaint.setColor(selectedColor);
        mIdPaint.setTextSize(ID_TEXT_SIZE);

        mBoxPaint = new Paint();
        mBoxPaint.setColor(selectedColor);
        mBoxPaint.setStyle(Paint.Style.STROKE);
        mBoxPaint.setStrokeWidth(BOX_STROKE_WIDTH);

        bitmap = BitmapFactory.decodeResource(getOverlay().getContext().getResources(), R.drawable.sunglasses);
        sunglasses = bitmap;

    }

    void setId(int id) {
        mFaceId = id;
    }


    /**
     * Updates the face instance from the detection of the most recent frame.  Invalidates the
     * relevant portions of the overlay to trigger a redraw.
     */
    void updateFace(Face face) {
        mFace = face;

        sunglasses = Bitmap.createScaledBitmap(bitmap, (int) scaleX(face.getWidth()),
                (int) scaleY(((bitmap.getHeight() * face.getWidth()) / bitmap.getWidth())), false);

        postInvalidate();
    }

    /**
     * Draws the face annotations for position on the supplied canvas.
     */
    @Override
    public void draw(Canvas canvas) {
        Face face = mFace;

        if (face == null) {
            return;
        }

        float x = translateX(face.getPosition().x + face.getWidth() / 2);
        float y = translateY(face.getPosition().y + face.getHeight() / 2);

        // Draws a bounding box around the face.
        float xOffset = scaleX(face.getWidth() / 2.0f);
        float yOffset = scaleY(face.getHeight() / 2.0f);
        float left = x - xOffset;
        float top = y - yOffset;
        float right = x + xOffset;
        float bottom = y + yOffset;
        canvas.drawRect(left, top, right, bottom, mBoxPaint);

        //Get the left eye to place the sunglasses over the eyes
        float eyeY = top + sunglasses.getHeight() / 2;
        for(Landmark l : face.getLandmarks()){
            if(l.getType() == Landmark.LEFT_EYE){
                eyeY = l.getPosition().y + sunglasses.getHeight() / 2;
            }
        }
        canvas.drawBitmap(sunglasses, left, eyeY, new Paint());

    }
}
</code></pre>

<p>I create function to take a photo in <a href=""https://gist.github.com/elraghifary/ae7f4ef221f2e0a7c2571889a8b1a07d"" rel=""nofollow noreferrer"">FaceTrackerActivity.java</a>:</p>

<pre><code>findViewById(R.id.capture).setOnClickListener(new View.OnClickListener() {
        @Override
        public void onClick(View v) {
            mCameraSource.takePicture(null, new CameraSource.PictureCallback() {

                @Override
                public void onPictureTaken(byte[] bytes) {
                    Log.d(TAG, ""onPictureTaken - jpeg"");
                    capturePic(bytes);
                }

                private void capturePic(byte[] bytes) {
                    try {
                        String mainpath = getExternalStorageDirectory() + separator + ""MaskIt"" + separator + ""images"" + separator;
                        File basePath = new File(mainpath);
                        if (!basePath.exists())
                            Log.d(""CAPTURE_BASE_PATH"", basePath.mkdirs() ? ""Success"": ""Failed"");
                        File captureFile = new File(mainpath + ""photo_"" + getPhotoTime() + "".jpg"");
                        if (!captureFile.exists())
                            Log.d(""CAPTURE_FILE_PATH"", captureFile.createNewFile() ? ""Success"": ""Failed"");
                        FileOutputStream stream = new FileOutputStream(captureFile);
                        stream.write(bytes);
                        stream.flush();
                        stream.close();
                    } catch (IOException e) {
                        e.printStackTrace();
                    }
                }

                private String getPhotoTime(){
                    SimpleDateFormat sdf=new SimpleDateFormat(""ddMMyy_hhmmss"");
                    return sdf.format(new Date());
                }
            });
        }
    });
</code></pre>

<p>First, open app and give permission to access camera, and app will detect faces and draw bitmap (sunglasses) to them. I create button ""Take a picture"" with id <em>capture</em>.</p>

<p>This is my main.xml:
    </p>

<pre><code>&lt;LinearLayout
    xmlns:android=""http://schemas.android.com/apk/res/android""
    xmlns:app=""http://schemas.android.com/apk/res-auto""
    xmlns:tools=""http://schemas.android.com/tools""
    android:id=""@+id/topLayout""
    android:layout_width=""match_parent""
    android:layout_height=""match_parent""
    android:keepScreenOn=""true""
    android:weightSum=""1""
    android:orientation=""vertical""&gt;

  &lt;LinearLayout
      android:orientation=""horizontal""
      android:layout_width=""match_parent""
      android:layout_height=""64dp""&gt;

    &lt;Button
        android:text=""Sunglasses""
        android:layout_width=""wrap_content""
        android:layout_height=""wrap_content""
        android:id=""@+id/sun""
        android:layout_weight=""1""
        tools:ignore=""HardcodedText"" /&gt;

    &lt;Button
        android:text=""Helmet""
        android:layout_width=""wrap_content""
        android:layout_height=""wrap_content""
        android:id=""@+id/helm""
        android:layout_weight=""1""
        tools:ignore=""HardcodedText"" /&gt;

    &lt;Button
        android:text=""Mustache""
        android:layout_width=""wrap_content""
        android:layout_height=""wrap_content""
        android:id=""@+id/must""
        android:layout_weight=""1""
        tools:ignore=""HardcodedText"" /&gt;
  &lt;/LinearLayout&gt;
&lt;com.google.android.gms.samples.vision.face.facetracker.ui.camera.CameraSourcePreview
      android:id=""@+id/preview""
      android:layout_width=""match_parent""
      android:layout_height=""0dp""
      android:layout_weight=""0.99""
      android:weightSum=""1""&gt;
    &lt;com.google.android.gms.samples.vision.face.facetracker.ui.camera.GraphicOverlay
        android:id=""@+id/faceOverlay""
        android:layout_width=""match_parent""
        android:layout_height=""match_parent""
        android:layout_weight=""0.79"" /&gt;

&lt;/com.google.android.gms.samples.vision.face.facetracker.ui.camera.CameraSourcePreview&gt;

  &lt;Button
      android:id=""@+id/capture""
      android:layout_width=""match_parent""
      android:layout_height=""wrap_content""
      android:text=""Take a Picture""
      tools:ignore=""HardcodedText"" /&gt;
    &lt;/LinearLayout&gt;
</code></pre>

<p>How can I get bitmap that I draw in FaceGraphic? If I take a photo, I only get the default photo without bitmap. I want to take photo with user faces and bitmap and save into gallery. Sorry, I hope you understand my question. Thank you.</p>
",4670082,,1000551,,2017-01-18 21:02:36,2017-01-18 21:02:36,Take photo with bitmap in android camera,<android><bitmap><android-bitmap><google-vision>,1,0,,,
Android,41766196,1,,,,,,1/20/2017 14:41:35,,3,665,"<p>Face Tracker app based on <a href=""https://github.com/googlesamples/android-vision/tree/master/visionSamples/FaceTracker"" rel=""nofollow noreferrer"">Google Vision Face Tracker</a>. By default, Face Tracker use rear/back camera, but I want to detect faces with front camera.</p>

<p>This is the code for CameraSourcePreview that google vision provide:</p>

<pre><code>package com.google.android.gms.samples.vision.face.facetracker.ui.camera;

import android.content.Context;
import android.content.res.Configuration;
import android.util.AttributeSet;
import android.util.Log;
import android.view.SurfaceHolder;
import android.view.SurfaceView;
import android.view.ViewGroup;

import com.google.android.gms.common.images.Size;
import com.google.android.gms.vision.CameraSource;

import java.io.IOException;

public class CameraSourcePreview extends ViewGroup {
    private static final String TAG = ""CameraSourcePreview"";

    private Context mContext;
    private SurfaceView mSurfaceView;
    private boolean mStartRequested;
    private boolean mSurfaceAvailable;
    private CameraSource mCameraSource;

    private GraphicOverlay mOverlay;

    public CameraSourcePreview(Context context, AttributeSet attrs) {
        super(context, attrs);
        mContext = context;
        mStartRequested = false;
        mSurfaceAvailable = false;

        mSurfaceView = new SurfaceView(context);
        mSurfaceView.getHolder().addCallback(new SurfaceCallback());
        addView(mSurfaceView);
    }

    public void start(CameraSource cameraSource) throws IOException {
        if (cameraSource == null) {
            stop();
        }

        mCameraSource = cameraSource;

        if (mCameraSource != null) {
            mStartRequested = true;
            startIfReady();
        }
    }

    public void start(CameraSource cameraSource, GraphicOverlay overlay) throws IOException {
        mOverlay = overlay;
        start(cameraSource);
    }

    public void stop() {
        if (mCameraSource != null) {
            mCameraSource.stop();
        }
    }

    public void release() {
        if (mCameraSource != null) {
            mCameraSource.release();
            mCameraSource = null;
        }
    }

    private void startIfReady() throws IOException {
        if (mStartRequested &amp;&amp; mSurfaceAvailable) {
            mCameraSource.start(mSurfaceView.getHolder());
            if (mOverlay != null) {
                Size size = mCameraSource.getPreviewSize();
                int min = Math.min(size.getWidth(), size.getHeight());
                int max = Math.max(size.getWidth(), size.getHeight());
                if (isPortraitMode()) {
                    // Swap width and height sizes when in portrait, since it will be rotated by
                    // 90 degrees
                    mOverlay.setCameraInfo(min, max, mCameraSource.getCameraFacing());
                } else {
                    mOverlay.setCameraInfo(max, min, mCameraSource.getCameraFacing());
                }
                mOverlay.clear();
            }
            mStartRequested = false;
        }
    }

    private class SurfaceCallback implements SurfaceHolder.Callback {
        @Override
        public void surfaceCreated(SurfaceHolder surface) {
            mSurfaceAvailable = true;
            try {
                startIfReady();
            } catch (IOException e) {
                Log.e(TAG, ""Could not start camera source."", e);
            }
        }

        @Override
        public void surfaceDestroyed(SurfaceHolder surface) {
            mSurfaceAvailable = false;
        }

        @Override
        public void surfaceChanged(SurfaceHolder holder, int format, int width, int height) {
        }
    }

    @Override
    protected void onLayout(boolean changed, int left, int top, int right, int bottom) {
        int width = 640;
        int height = 480;
        if (mCameraSource != null) {
            Size size = mCameraSource.getPreviewSize();
            if (size != null) {
                width = size.getWidth();
                height = size.getHeight();
            }
        }

        // Swap width and height sizes when in portrait, since it will be rotated 90 degrees
        if (isPortraitMode()) {
            int tmp = width;
            width = height;
            height = tmp;
        }

        final int layoutWidth = right - left;
        final int layoutHeight = bottom - top;

        // Computes height and width for potentially doing fit width.
        int childWidth = layoutWidth;
        int childHeight = (int)(((float) layoutWidth / (float) width) * height);

        // If height is too tall using fit width, does fit height instead.
        if (childHeight &gt; layoutHeight) {
            childHeight = layoutHeight;
            childWidth = (int)(((float) layoutHeight / (float) height) * width);
        }

        for (int i = 0; i &lt; getChildCount(); ++i) {
            getChildAt(i).layout(0, 0, childWidth, childHeight);
        }

        try {
            startIfReady();
        } catch (IOException e) {
            Log.e(TAG, ""Could not start camera source."", e);
        }
    }

    private boolean isPortraitMode() {
        int orientation = mContext.getResources().getConfiguration().orientation;
        if (orientation == Configuration.ORIENTATION_LANDSCAPE) {
            return false;
        }
        if (orientation == Configuration.ORIENTATION_PORTRAIT) {
            return true;
        }

        Log.d(TAG, ""isPortraitMode returning false by default"");
        return false;
    }
}
</code></pre>

<p>I call camera source with this method:</p>

<pre><code>private void startCameraSource() {

        // check that the device has play services available.
        int code = GoogleApiAvailability.getInstance().isGooglePlayServicesAvailable(
                getApplicationContext());
        if (code != ConnectionResult.SUCCESS) {
            Dialog dlg =
                    GoogleApiAvailability.getInstance().getErrorDialog(this, code, RC_HANDLE_GMS);
            dlg.show();
        }

        if (mCameraSource != null) {
            try {
                mPreview.start(mCameraSource, mGraphicOverlay);
            } catch (IOException e) {
                Log.e(TAG, ""Unable to start camera source."", e);
                mCameraSource.release();
                mCameraSource = null;
            }
        }
    }
</code></pre>

<p>Face Tracker front camera still too dark compare with default phone camera app.</p>

<p>How to brighten front camera in face tracker google vision? Is it related with surface view?</p>

<pre><code>&lt;com.google.android.gms.samples.vision.face.facetracker.ui.camera.CameraSourcePreview
    android:id=""@+id/preview""
    android:layout_width=""match_parent""
    android:layout_height=""0dp""
    android:layout_weight=""1.00""
    android:weightSum=""1""&gt;

&lt;com.google.android.gms.samples.vision.face.facetracker.ui.camera.GraphicOverlay
    android:id=""@+id/faceOverlay""
    android:layout_width=""match_parent""
    android:layout_height=""match_parent""
    android:layout_weight=""0.79"" /&gt;

&lt;/com.google.android.gms.samples.vision.face.facetracker.ui.camera.CameraSourcePreview&gt;
</code></pre>
",4670082,,4670082,,2017-01-20 14:47:13,2018-07-08 7:13:28,Face Tracker CameraSource Android: How to brighten front camera quality?,<android><android-studio><camera><google-vision><front-camera>,1,0,1,,
Android,41773621,1,,,,,,1/20/2017 22:49:44,,3,3176,"<p>I'm trying to use <a href=""https://developers.google.com/vision/barcodes-overview"" rel=""nofollow noreferrer"">Google Mobile Vision API</a> with the camera2 module and I'm having a lot of trouble.</p>

<p>I'm using Google's <a href=""https://github.com/googlesamples/android-Camera2Video"" rel=""nofollow noreferrer"">android-Camera2Video</a> example code as a base. I've modified it to include the following callback:</p>

<p><strong>Camera2VideoFragment.java</strong></p>

<pre><code>OnCameraImageAvailable mCameraImageCallback;

public interface OnCameraImageAvailable {
    void onCameraImageAvailable(Image image);
}


ImageReader.OnImageAvailableListener mImageAvailable = new ImageReader.OnImageAvailableListener() {
    @Override
    public void onImageAvailable(ImageReader reader) {

        Image image = reader.acquireLatestImage();
        if (image == null)
            return;

        mCameraImageCallback.onCameraImageAvailable(image);

        image.close();
    }
};
</code></pre>

<p>That way any fragment including <code>Camera2VideoFragment.java</code> can get access to its images.</p>

<p>Now, The Barcode API only accepts <code>Bitmap</code> images, but I'm unable to convert <code>YUV_420_888</code> to Bitmap. Instead, I changed the <code>imageReader</code>'s file format to <code>JPEG</code> and ran the following conversion code:</p>

<pre><code>    Image.Plane[] planes = image.getPlanes();
    ByteBuffer buffer = planes[0].getBuffer();
    buffer.rewind();
    byte[] data = new byte[buffer.capacity()];
    buffer.get(data);
    Bitmap bitmap = BitmapFactory.decodeByteArray(data, 0, data.length);
</code></pre>

<p>This worked but the framerate drop of feeding <code>JPEG</code> data to the <code>imageReader</code> was significant. I'm wondering if anyone has worked around this issue before.</p>
",5710376,,,,,2018-01-04 0:11:23,camera2 output to Bitmap,<java><android><bitmap><google-vision>,1,0,2,,
Android,41828237,1,,,,,,1/24/2017 12:26:50,,5,929,"<p>I got an error and I'm going mad because happen only in some circumstances but I really don't understand when, maybe a more expert eye can help me:</p>

<p>From the Google tutorials I took the code for make an in-app purchase, <strong>briefly this code do</strong>: </p>

<ol>
<li><code>Initialize the In-App Service</code></li>
<li><code>Retrieve the price</code> of the object</li>
<li><code>Start the in-purchase</code> if the user click the button ""Buy"".</li>
</ol>

<p>Now, in all the tests that I did this work fine (more devices and API) <strong>BUT</strong> I got ton of reports that say: thrown a <code>NullPointerException</code> on <code>mHelper</code>. </p>

<p>I think that this happen in on the OnDestroy() when the service is disposed but i'm not sure and I couldn't fix it(Complete Error Log in the end).</p>

<p><strong>Here is my cleaned and commented as much as possible code:</strong></p>

<pre><code>IabHelper mHelper;
IabHelper.OnIabPurchaseFinishedListener mPurchaseFinishedListener;
Activity c;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_show_room);
    getWindow().addFlags(WindowManager.LayoutParams.FLAG_KEEP_SCREEN_ON);
    c=this;

    //Initialize the In-App Service
    mHelper = new IabHelper(this, ""my_key"");
    mHelper.startSetup(new IabHelper.OnIabSetupFinishedListener() {
            public void onIabSetupFinished(IabResult result) {
                if (!result.isSuccess()) {
                        //Problem setting up In-app Billing
                    return;
                }
                if (mHelper == null) return;

                //Ask for the price
                List additionalSkuList = new ArrayList();
                additionalSkuList.add(""SKU_ID"");
                try {
                    mHelper.queryInventoryAsync(true, additionalSkuList, mQueryFinishedListener);
                }catch (Exception e){
                    //Fail while asking the price
                }
            }
        });

    //Buy Button Listener
    b_buy.setOnClickListener(new View.OnClickListener()
    {
        public void onClick(View V)
        {
            try {
            String payload= ""my_payload""
            mHelper.launchPurchaseFlow(c, ""SKU_ID"",1111,mPurchaseFinishedListener, payload);
            } catch (Exception e) {
                //Error launching purchase flow. Another async operation in progress
            }
        }
    });

    // Callback for when a purchase is finished
    mPurchaseFinishedListener = new IabHelper.OnIabPurchaseFinishedListener() {
        public void onIabPurchaseFinished(IabResult result, Purchase purchase) {
            // if we were disposed of in the meantime, quit.
            if (mHelper == null) return;

            if (result.isFailure()) {
                //Error while buying
                return;
            }

            if (purchase.getSku().equals(""SKU_ID"")) {
                // bought the premium upgrade!
            }
            }
        };
}

//For retrieve the price:
IabHelper.QueryInventoryFinishedListener mQueryFinishedListener = new IabHelper.QueryInventoryFinishedListener() {
    public void onQueryInventoryFinished(IabResult result, Inventory inventory) {
        if (result.isFailure()) {
            return;
        }
        String z = inventory.getSkuDetails(""SKU_ID"").getPrice();
        //The price of the object is + z !!!
    }

};

@Override
protected void onActivityResult(int requestCode, int resultCode, Intent data) {
    if (mHelper == null) return;

    // Pass on the activity result to the helper for handling
    if (!mHelper.handleActivityResult(requestCode, resultCode, data)) {
        super.onActivityResult(requestCode, resultCode, data);
    }
}

@Override
public void onDestroy() {
    super.onDestroy();
        if (mHelper != null) mHelper.dispose();
        mHelper = null;
}

@Override
public void onBackPressed() {
    super.onBackPressed();
    finish();
}
}
</code></pre>

<p><strong>And this is the error:</strong></p>

<pre><code>Exception java.lang.NullPointerException: Attempt to invoke virtual method 'java.lang.String android.content.Context.getPackageName()' on a null object reference
com.myproj.util.IabHelper.startSetup (IabHelper.java)
__null__.dispose (IabHelper.java)
__null__.launchPurchaseFlow (IabHelper.java)
__null__.handleActivityResult (IabHelper.java)
__null__.queryInventory (IabHelper.java)
__null__.queryInventoryAsync (IabHelper.java)
__null__.getResponseDesc (IabHelper.java)
__null__.checkSetupDone (IabHelper.java)
__null__.getResponseCodeFromBundle (IabHelper.java)
__null__.getResponseCodeFromIntent (IabHelper.java)
__null__.queryPurchases (IabHelper.java)
__null__.querySkuDetails (IabHelper.java)
com.myproj.util.IabHelper.startSetup (IabHelper.java)
__null__.dispose (IabHelper.java)
__null__.launchPurchaseFlow (IabHelper.java)
__null__.handleActivityResult (IabHelper.java)
__null__.queryInventory (IabHelper.java)
__null__.queryInventoryAsync (IabHelper.java)
__null__.getResponseDesc (IabHelper.java)
__null__.checkSetupDone (IabHelper.java)
__null__.getResponseCodeFromBundle (IabHelper.java)
__null__.getResponseCodeFromIntent (IabHelper.java)
__null__.queryPurchases (IabHelper.java)
__null__.querySkuDetails (IabHelper.java)
com.myproj.util.IabHelper.startSetup (IabHelper.java)
__null__.dispose (IabHelper.java)
__null__.launchPurchaseFlow (IabHelper.java)
__null__.handleActivityResult (IabHelper.java)
__null__.queryInventory (IabHelper.java)
__null__.queryInventoryAsync (IabHelper.java)
__null__.getResponseDesc (IabHelper.java)
__null__.checkSetupDone (IabHelper.java)
__null__.getResponseCodeFromBundle (IabHelper.java)
__null__.getResponseCodeFromIntent (IabHelper.java)
__null__.queryPurchases (IabHelper.java)
__null__.querySkuDetails (IabHelper.java)
com.myproj.util.IabHelper$2.run (IabHelper.java)
java.lang.Thread.run (Thread.java:818)
</code></pre>

<hr>

<p>Here is some involved method of the Google IabHelper class <strong>(Probably you'll NOT need to read this)</strong> They are just mentioned in the Error Log and are written by Google:</p>

<p>Dispose:</p>

<pre><code>public void dispose() {
    logDebug(""Disposing."");
    mSetupDone = false;
    if (mServiceConn != null) {
        logDebug(""Unbinding from service."");
        if (mContext != null) mContext.unbindService(mServiceConn);
    }
    mDisposed = true;
    mContext = null;
    mServiceConn = null;
    mService = null;
    mPurchaseListener = null;
}
</code></pre>

<p>StartSetup:</p>

<pre><code>    public void startSetup(final OnIabSetupFinishedListener listener) {
    // If already set up, can't do it again.
    checkNotDisposed();
    if (mSetupDone) throw new IllegalStateException(""IAB helper is already set up."");

    // Connection to IAB service
    logDebug(""Starting in-app billing setup."");
    mServiceConn = new ServiceConnection() {
        @Override
        public void onServiceDisconnected(ComponentName name) {
            logDebug(""Billing service disconnected."");
            mService = null;
        }

        @Override
        public void onServiceConnected(ComponentName name, IBinder service) {
            if (mDisposed) return;
            logDebug(""Billing service connected."");
            mService = IInAppBillingService.Stub.asInterface(service);
            String packageName = mContext.getPackageName();
            try {
                logDebug(""Checking for in-app billing 3 support."");

                // check for in-app billing v3 support
                int response = mService.isBillingSupported(3, packageName, ITEM_TYPE_INAPP);
                if (response != BILLING_RESPONSE_RESULT_OK) {
                    if (listener != null) listener.onIabSetupFinished(new IabResult(response,
                            ""Error checking for billing v3 support.""));

                    // if in-app purchases aren't supported, neither are subscriptions.
                    mSubscriptionsSupported = false;
                    return;
                }
                logDebug(""In-app billing version 3 supported for "" + packageName);

                // check for v3 subscriptions support
                response = mService.isBillingSupported(3, packageName, ITEM_TYPE_SUBS);
                if (response == BILLING_RESPONSE_RESULT_OK) {
                    logDebug(""Subscriptions AVAILABLE."");
                    mSubscriptionsSupported = true;
                }
                else {
                    logDebug(""Subscriptions NOT AVAILABLE. Response: "" + response);
                }

                mSetupDone = true;
            }
            catch (RemoteException e) {
                if (listener != null) {
                    listener.onIabSetupFinished(new IabResult(IABHELPER_REMOTE_EXCEPTION,
                                                ""RemoteException while setting up in-app billing.""));
                }
                e.printStackTrace();
                return;
            }

            if (listener != null) {
                listener.onIabSetupFinished(new IabResult(BILLING_RESPONSE_RESULT_OK, ""Setup successful.""));
            }
        }
    };

    Intent serviceIntent = new Intent(""com.android.vending.billing.InAppBillingService.BIND"");
    serviceIntent.setPackage(""com.android.vending"");
    if (!mContext.getPackageManager().queryIntentServices(serviceIntent, 0).isEmpty()) {
        // service available to handle that Intent
        mContext.bindService(serviceIntent, mServiceConn, Context.BIND_AUTO_CREATE);
    }
    else {
        // no service available to handle that Intent
        if (listener != null) {
            listener.onIabSetupFinished(
                    new IabResult(BILLING_RESPONSE_RESULT_BILLING_UNAVAILABLE,
                    ""Billing service unavailable on device.""));
        }
    }
}
</code></pre>

<p>and the Constructor of IabHelper:</p>

<pre><code>    public IabHelper(Context ctx, String base64PublicKey) {
        mContext = ctx.getApplicationContext();
        mSignatureBase64 = base64PublicKey;
        logDebug(""IAB helper created."");
    }
</code></pre>

<p><a href=""https://github.com/googlesamples/android-play-billing/blob/master/TrivialDrive/app/src/main/java/com/example/android/trivialdrivesample/util/IabHelper.java"" rel=""nofollow noreferrer"">Here</a> is the complete IabHelper class.</p>

<p><strong>Recap:</strong></p>

<p>Tell me if you can see <strong>where/when the <code>NullPointerException</code> of the variable <code>mHelper</code> is thrown.</strong> I couldn't from the code and test with virtual and physical devices since work fine. </p>

<p>I'm pretty much sure that the error is thrown after that the Activity is closed but I don't understand why for fix it.</p>

<p>Write if you need more info. Thank to all!</p>
",3893550,,3893550,,2017-01-27 22:44:07,2017-02-02 15:04:41,Android In-app purchase NullPointerException,<java><android><nullpointerexception><in-app-purchase>,2,7,3,,
Android,41834529,1,,,,,,1/24/2017 17:25:30,,4,605,"<p>The <code>getBuyIntentExtraParams</code> method described by <a href=""https://developer.android.com/google/play/billing/billing_reference.html"" rel=""nofollow noreferrer"">the Android Billing Docs</a> doesn't seem to work properly in my project.</p>

<p>I see that there is an <a href=""https://github.com/googlesamples/android-play-billing/issues/3"" rel=""nofollow noreferrer"">open issue</a> on github that suggests grabbing <a href=""https://raw.githubusercontent.com/googlesamples/android-play-billing/master/TrivialDrive/app/src/main/aidl/com/android/vending/billing/IInAppBillingService.aidl"" rel=""nofollow noreferrer"">the AIDL file from the Trivial Drive Android example application</a>, but even after doing this I can't get the v6 API working (I get a <code>cannot find symbol</code> error).</p>

<p>My call is as follows:</p>

<pre><code>Bundle extraParams = new Bundle();
extraParams.putBoolean(""replaceSkusProration"", true);
String ownedSku = ""someSkuAlreadyOwnedByTheUser"";
ArrayList&lt;String&gt; replaceSkus = new ArrayList&lt;String&gt;();
replaceSkus.add(ownedSku);
extraParams.putStringArrayList(""skusToReplace"", replaceSkus);
Bundle buyIntentBundle = mService.getBuyIntentExtraParams(6, 
                         getPackageName(), sku, ""subs"", ""BigOlRandomString"", extraParams);
</code></pre>

<p>Everything else about billing seems to work fine... what am I missing here?</p>

<p>edit: I can definitely get API v5 working, as Android Studio is more than happy to let me use the <code>getBuyIntentToReplaceSkus</code> function.</p>
",543640,,543640,,2017-01-24 17:32:27,2017-08-30 17:01:56,getBuyIntentExtraParams does not exist? aka how do I use Version 6 in-app billing APIs?,<android><in-app-billing>,1,1,,,
Android,41926591,1,,,,,,1/29/2017 22:18:52,,6,2179,"<p>So I have played around all weekend with the camera2 api. Now I'm at a point where I begin to understand how things are wired together.
While testing the api to implement a video recording app I hit a wall though.</p>

<p>I started by changing the <a href=""https://github.com/googlesamples/android-Camera2Video"" rel=""noreferrer"">Android Camera2Video Sample</a> to my needs. What bugged me is that after each recording process the camera session is being recreated. Even worse, when a recording session is beeing started whats happening is that the preview session will be destroyed first and a recording session is created. After the recording session is done it gets destroyed and a new preview session is created.</p>

<p>The documentation clearly states: </p>

<blockquote>
  <p>Creating a session is an expensive operation and can take several hundred milliseconds... <a href=""https://developer.android.com/reference/android/hardware/camera2/CameraCaptureSession.html"" rel=""noreferrer"">CameraCaptureSession Documentation</a></p>
</blockquote>

<p>The result looks pretty ugly and the screen stutters when I hit record and stop. I wanted to improve this behavior so I fiddled around with the code.</p>

<p>What I do now is I create my one and only <code>CameraSession</code> where I add my preview surface (a <code>TextureView</code>) and also the Surface from a already created <code>MediaRecorder</code> by calling its <code>getSurface</code> method. This works fine for the first video but when I try to capture a second Video I get a <code>IllegalArgumentException: Bad argument passed to camera service</code>. I think this is because the surface of the <code>MediaRecorder</code> which I pass to the <code>CameraSession</code> upon it's creation is somehow destroyed or changed when I reset the <code>MediaRecorder</code> to prepare a new recording.</p>

<p>My question now is, is there any way around this problem? (<code>setInputSurface(Surface surface)</code>) might be but the api level is too high so I didn't test it.</p>

<p>Here is a quick overview over the relevant code pieces:</p>

<ol>
<li><p>setup the <code>MediaRecorder</code></p>

<pre><code>private void setUpMediaRecorder() throws IOException {
    if (mMediaRecorder == null) {
        mMediaRecorder = new MediaRecorder();
    }
    mMediaRecorder.setVideoEncodingBitRate(5000000);
    mMediaRecorder.setAudioSource(MediaRecorder.AudioSource.MIC);
    mMediaRecorder.setVideoSource(MediaRecorder.VideoSource.SURFACE);
    mMediaRecorder.setOutputFormat(MediaRecorder.OutputFormat.MPEG_4);
    mMediaRecorder.setVideoFrameRate(24);
    mMediaRecorder.setVideoSize(mVideoSize.getWidth(), mVideoSize.getHeight());
    mMediaRecorder.setVideoEncoder(MediaRecorder.VideoEncoder.H264);
    mMediaRecorder.setAudioEncoder(MediaRecorder.AudioEncoder.AAC);
    mMediaRecorder.setOrientationHint(SENSOR_ORIENTATION_DEFAULT_DEGREES);
    mNextVideoAbsolutePath = getVideoFilePath();
    mMediaRecorder.setOutputFile(mNextVideoAbsolutePath);
    mMediaRecorder.prepare();
}
</code></pre></li>
<li><p>create the all mighty recording session</p>

<pre><code>SurfaceTexture texture = mTextureView.getSurfaceTexture();
texture.setDefaultBufferSize(mPreviewSize.getWidth(), mPreviewSize.getHeight());

List&lt;Surface&gt; surfaces = new ArrayList&lt;&gt;();
// Set up Surface for the camera preview
mPreviewSurface = new Surface(texture);
surfaces.add(mPreviewSurface);

// Set up Surface for the MediaRecorder
mRecorderSurface = mMediaRecorder.getSurface();
surfaces.add(mRecorderSurface);

// create the capture session
mCameraDevice.createCaptureSession(surfaces, new CameraCaptureSession.StateCallback() {

    @Override
    public void onConfigured(@NonNull CameraCaptureSession cameraCaptureSession) {
        mCameraSession = cameraCaptureSession;

        // now that the session is created, start using it  for the preview
        showPreview();
    }

    @Override
    public void onConfigureFailed(@NonNull CameraCaptureSession cameraCaptureSession) {
        ....
            }
        }
    }, mBackgroundHandler);
} catch (CameraAccessException) {
    e.printStackTrace();
}

void showPreview() {
    mPreviewBuilder = mCameraDevice.createCaptureRequest(CameraDevice.TEMPLATE_PREVIEW);
    mPreviewBuilder.set(CaptureRequest.CONTROL_MODE, CameraMetadata.CONTROL_MODE_AUTO);
    mPreviewBuilder.addTarget(mPreviewSurface);
    mCameraSession.setRepeatingRequest(mPreviewBuilder.build(), null, mBackgroundHandler);
}
</code></pre></li>
<li><p>start recording a video</p>

<pre><code>mVideoBuilder = mCameraDevice.createCaptureRequest(CameraDevice.TEMPLATE_RECORD);
mVideoBuilder.set(CaptureRequest.CONTROL_AF_MODE, CaptureRequest.CONTROL_AF_MODE_CONTINUOUS_VIDEO);
mVideoBuilder.set(CaptureRequest.CONTROL_AE_MODE, CaptureRequest.CONTROL_AE_MODE_ON);
mVideoBuilder.addTarget(mPreviewSurface);
mVideoBuilder.addTarget(mRecorderSurface);
// set the request for the capture
mCameraSession.setRepeatingRequest(mVideoBuilder.build(), null, mBackgroundHandler);
// Start recording
mMediaRecorder.start();
</code></pre></li>
<li><p>stop recording</p>

<pre><code>mMediaRecorder.stop();
mMediaRecorder.reset();
showPreview();
setUpMediaRecorder(); // this is key to not get an error from the MediaRecorder
</code></pre></li>
</ol>

<p>All of this works perfect and the video recording starts and stops without any hiccups! It's awesome but when I go back to step 3 (after 4) I get the aforementioned <code>IllegalArgumentException: Bad argument passed to camera service</code>. I keep banging my head against the wall but I cannot find a way around this problem.</p>

<p>Any help is greatly appreciated!</p>

<p>Thanks!</p>
",1096141,,1096141,,2017-01-30 21:17:51,2017-05-16 21:38:44,How to reuse the Surface of MediaRecorder in the camera2 API on Android?,<android><video><mediarecorder><android-camera2>,1,1,4,,
Android,41985926,1,,,,,,2/1/2017 17:26:57,,3,1480,"<p>I am using the <a href=""https://github.com/googlesamples/android-Camera2Basic"" rel=""nofollow noreferrer"">sample code</a> for Camera2, and I was wondering how I can make the preview and captured image in full screen? <a href=""https://stackoverflow.com/questions/19577299/android-camera-preview-stretched?rq=1"">This</a> SO question seems to solve it in video mode, but I can't find any solution for image captures. The sample fragment has a blue area at the bottom and also has the status bas. I want to hide both of these and use the entire screen to show the preview, and also capture the image in full screen size.</p>
",3052244,,-1,,2017-05-23 12:34:15,2018-02-26 20:33:31,Camera2 full screen preview and image capture,<android><camera>,2,0,,,
Android,42107466,1,,,,,,2/8/2017 7:50:33,,2,2351,"<p>I am exploring wonderful mobile vision apis, I am working on <a href=""https://github.com/googlesamples/android-vision/tree/master/visionSamples/FaceTracker"" rel=""nofollow noreferrer"">Face Tracker</a> example and looking for a solution where I can find out whether mouth is open or not. e.g. person is yawning. There is not direct way like <code>face.getIsLeftEyeOpenProbability();</code></p>

<p>So I am thinking that I need to find out x,y coordinates of both left and right mouth find out the difference and figure out whether mouse is open or not. I am not sure if this will work or not.</p>

<p>But is there any other way we can find out whether mouth is open or closed ?</p>
",1166926,,1166926,,2017-02-08 9:42:40,2019-04-10 13:48:41,Android Mobile Vision API detect mouth is open,<android><face-recognition><android-vision>,5,0,1,,
Android,42216472,1,,,,,,2/14/2017 1:42:31,,2,167,"<p>I am working with the CC2650STK SensorTag.</p>

<p>I have downloaded this open source app from GitHub: <a href=""https://github.com/googlesamples/android-BluetoothLeGatt"" rel=""nofollow noreferrer"">https://github.com/googlesamples/android-BluetoothLeGatt</a></p>

<p>However, the app does not scan my BLE device and show on the list. If anyone can guide me or help me modify this code so that it can scan for my CC2650STK device. </p>

<p>Your help is appreciated</p>
",7422536,,1319139,,2017-02-14 2:32:39,2017-03-06 4:34:16,Android Code Does not scan BLE device CC2650,<java><android><bluetooth-lowenergy><gatt>,2,2,,,
Android,42268602,1,,,,,,2/16/2017 8:30:57,,1,79,"<p>I am working on a geofence app for Android. With the help of the <a href=""https://github.com/googlesamples/android-play-location"" rel=""nofollow noreferrer"">example</a> from google and refactoring from <code>IntentService</code> to <code>BroadcastReceiver</code> as described <a href=""https://stackoverflow.com/questions/19505614/android-geofence-eventually-stop-getting-transition-intents/19521823#19521823"">here</a> I now have an app that works as expected if app is in background. What I did not manage is how I can update my App e.g. a Model if the app is killed? My <code>GeofenceReceiver</code> is triggered/called while the app is killed, but my <code>BroadcastReceiver</code> message is not received in my <code>MainActivity</code>.</p>

<p>In my <code>GeofenceReceiver</code> I do something like this if I get a geofence-transition:</p>

<p>1:</p>

<pre><code>Intent notificationIntent = new Intent(context, MainActivity.class);
    notificationIntent.putStringArrayListExtra(Constants.TRIGGERING_GEOFENCE_IDS_KEY, triggeringIDs);

    TaskStackBuilder stackBuilder = TaskStackBuilder.create(context);
    stackBuilder.addParentStack(MainActivity.class);
    stackBuilder.addNextIntent(notificationIntent);

    PendingIntent resultPendingIntent = stackBuilder.getPendingIntent(0, PendingIntent.FLAG_UPDATE_CURRENT);

    NotificationCompat.Builder builder = new NotificationCompat.Builder(context);
    builder.setSmallIcon(R.mipmap.ic_launcher)
            .setLargeIcon(BitmapFactory.decodeResource(context.getResources(), R.mipmap.ic_launcher))
            .setColor(Color.RED)
            .setContentTitle(notificationDetails)
            .setContentText(context.getString(R.string.geofence_transition_notification_text))
            .setPriority(NotificationCompat.PRIORITY_HIGH)
            .setContentIntent(resultPendingIntent);
    builder.setAutoCancel(true);

    NotificationManager mNotificationManager = (NotificationManager) context.getSystemService(Context.NOTIFICATION_SERVICE);
    mNotificationManager.notify(0, builder.build());
</code></pre>

<p>2: </p>

<pre><code>Intent broadcastIntent = new Intent(ACTION);
        broadcastIntent.putExtra(""resultCode"", Activity.RESULT_OK);
        broadcastIntent.putExtra(Constants.BUNDLE_KEY, bundle);
        LocalBroadcastManager.getInstance(context).sendBroadcast(broadcastIntent);
</code></pre>

<p>As I already said the broadcast is received in my <code>MainActivity</code>, if the app is in background. If I kill the App the broadcast is not received in my <code>MainActivity</code>. I checked that with terminal and logcat.</p>

<p>Any ideas?</p>
",6029834,,-1,,2017-05-23 12:17:05,2017-02-16 9:40:07,How to update closed/killed app from IntentReceiver?,<android><broadcastreceiver><updates><android-geofence>,1,2,,,
Android,42345734,1,,,,,,2/20/2017 13:23:30,,1,1715,"<p>Androids 6.0 Fingerprint API cannot detect my fingerprint scanner on Samsung S5.</p>

<ul>
<li>Screen lock is secured with fingerprints</li>
<li>I've 2 Fingerprints registered in fingerprint manager</li>
<li>My S5 is updated to android 6.0</li>
<li>The fingerprint scanner is working fine, I use it to unlock my phone</li>
<li>I cannot find anything to do with fingerprints in the Security Settings (Was told to allow Apps to have access to fingerprint here, but its not on it)</li>
</ul>

<p>In App Info of each app, is says Permissions: No Permissions Requested however in each of the sample app's ive tried it meantions they do request permission...However I haven't seen the request pop up</p>

<p>I've tried the google fingerprint scanner authentication <a href=""https://github.com/googlesamples/android-FingerprintDialog"" rel=""nofollow noreferrer"">Sample App</a> and I've also tried <a href=""https://github.com/JessicaThornsby/FingerprintAuthentication"" rel=""nofollow noreferrer"">this app </a></p>

<p>Any idea's on what could to be the problem?</p>
",4832523,,4832523,,2017-02-20 15:12:41,2017-02-22 12:57:54,Fingerprint scanner not detected when using Android 6.0 Fingerprint API on Samsung S5,<android><android-studio><android-6.0-marshmallow><fingerprint><android-fingerprint-api>,1,1,,,
Android,42418470,1,,,,,,2/23/2017 14:25:42,,3,736,"<p>I have been trying to implement the flashlight/torch feature of the camera using the GooglePlay Services Vision API (using Nuget from Visual Studio) for the past few days without success. I have noticed that there is a GitHub implementation of this API which has such functionality but that is only available to Java users.
I was wondering if there is anything related to C# Xamarin users.</p>

<p>The Camera object is not made available on this API therefore I am not able to alter the Camera parameters needed to activate the flashlight.</p>

<p>I would like to be sure if that functionality is not available so I don't waste more time over this. It just might be the case that the Xamarin developers have not attended to this functionality and they might in a near future.</p>

<hr>

<p>UPDATE</p>

<p><a href=""https://github.com/googlesamples/android-vision/blob/master/visionSamples/barcode-reader/app/src/main/java/com/google/android/gms/samples/vision/barcodereader/BarcodeCaptureActivity.java"" rel=""nofollow noreferrer"">https://github.com/googlesamples/android-vision/blob/master/visionSamples/barcode-reader/app/src/main/java/com/google/android/gms/samples/vision/barcodereader/BarcodeCaptureActivity.java</a></p>

<p>In there you can see that on line 214 we have such method call:</p>

<pre><code>mCameraSource = builder.setFlashMode(useFlash ? Camera.Parameters.FLASH_MODE_TORCH : null).build();
</code></pre>

<p>SetFlashMode is not a method of the CameraSource in Nuget, but it is on the GitHub (open source version).</p>
",1792386,,1792386,,2017-02-23 15:32:38,2017-07-20 12:10:42,How to turn on the torch/flashlight with GooglePlay Services Vision API Xamarin Android,<android><xamarin><torch><flashlight><vision>,2,9,,,
Android,42548247,1,,,,,,3/2/2017 6:25:36,,1,514,"<p>I want to create an app to register a new fingerprint and add more fingerprint and authenticate in same app, but i am able to authenticate only one with the hardware supported fingerprint only.</p>

<p>So my requirement is:</p>

<ol>
<li>Register fingerprint as an image scanner through app and send them to db or server.</li>
<li>Authenticate scanned fingerprint in same app through db or server where fingerprint was saved.</li>
</ol>

<p>with the help of <a href=""https://github.com/googlesamples/android-FingerprintDialog"" rel=""nofollow noreferrer"">google sample code</a> i can scan system's scanned fingerprint.</p>
",,user5421769,,,,2017-08-03 4:24:26,How can I create multiple fingerprint scan and register in db?,<android><fingerprint><android-fingerprint-api>,1,0,,,
Android,42581120,1,,,,,,3/3/2017 14:12:45,,2,2482,"<p>I want to play around with mobile Vulkan without having to buy a device.</p>

<p>If it is not supported, please provide evidence (e.g. source code, official Google statements). Are there any plans to support it?</p>

<p>If supported, please give detailed and tested instructions of how to get a minimal hello world triangle app running, including the app you have tested with.</p>

<p>I have tried <a href=""https://github.com/googlesamples/android-vulkan-tutorials/tree/7ba478ac2e0d9006c9e2e261446003a4449b8aa3/tutorial05_triangle"" rel=""nofollow noreferrer"">https://github.com/googlesamples/android-vulkan-tutorials/tree/7ba478ac2e0d9006c9e2e261446003a4449b8aa3/tutorial05_triangle</a> with a Pixel API 25 image (API 25 is supposed to support Vulkan), but keep getting build or runtime errors.</p>

<p>I have opened an issue at: <a href=""https://github.com/googlesamples/android-vulkan-tutorials/issues/13"" rel=""nofollow noreferrer"">https://github.com/googlesamples/android-vulkan-tutorials/issues/13</a> but it was closed without solution.</p>

<p>Related:</p>

<ul>
<li>OpenGL ES 2: <a href=""https://stackoverflow.com/questions/4455783/does-the-android-emulator-support-opengl-es-2-0"">Does the Android Emulator support OpenGL ES 2.0?</a></li>
<li>OpenGL ES 3:
<a href=""https://stackoverflow.com/questions/24874066/does-the-android-emulator-support-opengl-es-3-0"">Does the Android emulator support OpenGL ES 3.0?</a></li>
</ul>
",895245,,-1,,2017-05-23 12:09:27,2017-03-04 16:10:41,How to create and run an example Vulkan app on the Android emulator?,<android><android-emulator><vulkan>,2,0,1,,
Android,42623014,1,,,,,,3/6/2017 10:20:41,,1,737,"<p>I upgraded Android Studio 2.2 -> 2.3 today and now have a compiler error when building my app in Android Studio that I didn't have before.</p>

<pre><code>Error:No resource found that matches the given name (at 'versionName' with value '@string/BRAND_VERSION').
</code></pre>

<p>This is the string resource.</p>

<pre><code>&lt;string name=""BRAND_VERSION""&gt;2.0&lt;/string&gt;
</code></pre>

<p>This is the relevant section from the manifest.</p>

<pre><code>&lt;manifest package=""com.metaswitch.cp.unbrandedpackage""
      xmlns:android=""http://schemas.android.com/apk/res/android""
      xmlns:tools=""http://schemas.android.com/tools""
      android:versionCode=""5""
      android:versionName=""@string/BRAND_VERSION""&gt;
</code></pre>

<p>According to <a href=""https://developer.android.com/studio/publish/versioning.html"" rel=""nofollow noreferrer"">Android documentation</a>, string resources are allowed in the versionName in the manifest or in build.gradle.</p>

<p>This is not specific to my app.  I can repro with this <a href=""https://github.com/googlesamples/android-architecture/tree/todo-mvp-loaders/"" rel=""nofollow noreferrer"">Android sample</a></p>

<p>It builds and installs fine for me.  When I make this single line change to the versionName in build.gradle (picking a random string resource from strings.xml) it fails with the same error.</p>

<pre><code>// versionName ""1.0""
versionName ""@string/add_task""
</code></pre>

<p>This is the build.gradle from the Android sample (note my edit to versionName).</p>

<pre><code>apply plugin: 'com.android.application'

android {
    compileSdkVersion rootProject.ext.compileSdkVersion
    buildToolsVersion rootProject.ext.buildToolsVersion

    defaultConfig {
        applicationId ""com.example.android.architecture.blueprints.todomvploaders""
    minSdkVersion rootProject.ext.minSdkVersion
    targetSdkVersion rootProject.ext.targetSdkVersion
    versionCode 1
    // I really want to use a string resource here!
    // versionName ""1.0""
    versionName ""@string/add_task""

    testInstrumentationRunner 'android.support.test.runner.AndroidJUnitRunner'
}

buildTypes {
    debug {
        minifyEnabled true
        // Uses new built-in shrinker http://tools.android.com/tech-docs/new-build-system/built-in-shrinker
        useProguard false
        proguardFiles getDefaultProguardFile('proguard-android.txt'), 'proguard-rules.pro'
        testProguardFiles getDefaultProguardFile('proguard-android.txt'), 'proguardTest-rules.pro'
    }

    release {
        minifyEnabled true
        useProguard true
        proguardFiles getDefaultProguardFile('proguard-android.txt'), 'proguard-rules.pro'
        testProguardFiles getDefaultProguardFile('proguard-android.txt'), 'proguardTest-rules.pro'
    }
}

// If you need to add more flavors, consider using flavor dimensions.
productFlavors {
    mock {
        applicationIdSuffix = "".mock""
    }
    prod {

    }
}

// Remove mockRelease as it's not needed.
android.variantFilter { variant -&gt;
    if(variant.buildType.name.equals('release')
            &amp;&amp; variant.getFlavors().get(0).name.equals('mock')) {
        variant.setIgnore(true);
    }
}

// Always show the result of every unit test, even if it passes.
testOptions.unitTests.all {
    testLogging {
        events 'passed', 'skipped', 'failed', 'standardOut', 'standardError'
    }
}
buildToolsVersion '25.0.0'
</code></pre>

<p>}</p>

<pre><code>/*
 Dependency versions are defined in the top level build.gradle file. This helps keeping track of
 all versions in a single place. This improves readability and helps managing project complexity.
 */
dependencies {
    // App's dependencies, including test
    compile ""com.android.support:appcompat-v7:$rootProject.supportLibraryVersion""
    compile ""com.android.support:cardview-v7:$rootProject.supportLibraryVersion""
    compile ""com.android.support:design:$rootProject.supportLibraryVersion""
    compile ""com.android.support:recyclerview-v7:$rootProject.supportLibraryVersion""
    compile ""com.android.support:support-v4:$rootProject.supportLibraryVersion""
    compile ""com.android.support.test.espresso:espresso-idling-resource:$rootProject.espressoVersion""
    compile ""com.google.guava:guava:$rootProject.guavaVersion""
// Dependencies for local unit tests
testCompile ""junit:junit:$rootProject.ext.junitVersion""
testCompile ""org.mockito:mockito-all:$rootProject.ext.mockitoVersion""
testCompile ""org.hamcrest:hamcrest-all:$rootProject.ext.hamcrestVersion""

// Android Testing Support Library's runner and rules
androidTestCompile ""com.android.support.test:runner:$rootProject.ext.runnerVersion""
androidTestCompile ""com.android.support.test:rules:$rootProject.ext.runnerVersion""

// Dependencies for Android unit tests
androidTestCompile ""junit:junit:$rootProject.ext.junitVersion""
androidTestCompile ""org.mockito:mockito-core:$rootProject.ext.mockitoVersion""
androidTestCompile 'com.google.dexmaker:dexmaker:1.2'
androidTestCompile 'com.google.dexmaker:dexmaker-mockito:1.2'

// Espresso UI Testing
androidTestCompile ""com.android.support.test.espresso:espresso-core:$rootProject.espressoVersion""
androidTestCompile ""com.android.support.test.espresso:espresso-contrib:$rootProject.espressoVersion""
androidTestCompile ""com.android.support.test.espresso:espresso-intents:$rootProject.espressoVersion""

// Resolve conflicts between main and test APK:
androidTestCompile ""com.android.support:support-annotations:$rootProject.supportLibraryVersion""
androidTestCompile ""com.android.support:support-v4:$rootProject.supportLibraryVersion""
androidTestCompile ""com.android.support:recyclerview-v7:$rootProject.supportLibraryVersion""
androidTestCompile ""com.android.support:appcompat-v7:$rootProject.supportLibraryVersion""
androidTestCompile ""com.android.support:design:$rootProject.supportLibraryVersion""
</code></pre>

<p>}</p>
",98618,,98618,,2017-03-06 10:37:21,2017-12-16 4:09:16,Android Studio 2.3: can't use string resource in android:versionName,<android>,2,8,1,,
Android,43159280,1,,,,,,4/1/2017 16:28:21,,10,2007,"<p>I am using mobile vision API for scanning barcode. I am using <code>TextureView</code> to render camera on it. I read this github thread <a href=""https://github.com/googlesamples/android-vision/issues/15"" rel=""noreferrer"">https://github.com/googlesamples/android-vision/issues/15</a> it seems mobile vision is not compatible with <code>TextureView</code></p>

<p>I see that <code>CameraSource</code> is for <code>SurfaceView</code> which is not compatible with <code>TextureView</code>, as there is no method to preview frames on <code>TextureView</code>. <a href=""https://developers.google.com/android/reference/com/google/android/gms/vision/CameraSource.html#start(android.view.SurfaceHolder)"" rel=""noreferrer"">https://developers.google.com/android/reference/com/google/android/gms/vision/CameraSource.html#start(android.view.SurfaceHolder)</a></p>

<p>I tried to do using below approach and checked that <code>receiveDetections</code> is not being called. Does anyone have any idea how can I integrate mobile vision API with <code>TextureView</code> and <code>Camera</code>.</p>

<h2>MainActivity.java</h2>

<pre><code>@RuntimePermissions
public class ScanBarcodeActivity extends BaseActivity {

    private TextureView textureView;

    private BarcodeDetector barcodeDetector;

    private Camera camera;

    private String TAG = LogUtils.makeLogTag(ScanBarcodeActivity.class);

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        ActivityScanBarcodeBinding activityScanBarcodeBinding = setContentView(this, R.layout.activity_scan_barcode);

        textureView = activityScanBarcodeBinding.textureView;

        barcodeDetector = new BarcodeDetector.Builder(this).build();

        ScanBarcodeActivityPermissionsDispatcher.requestCameraPermissionWithCheck(this);

    }

    @Override
    public void onRequestPermissionsResult(int requestCode, @NonNull String[] permissions, @NonNull int[] grantResults) {
        super.onRequestPermissionsResult(requestCode, permissions, grantResults);
        // NOTE: delegate the permission handling to generated method
        ScanBarcodeActivityPermissionsDispatcher.onRequestPermissionsResult(this, requestCode, grantResults);

        if(permissions[0].equals(Manifest.permission.CAMERA)) {
            if(grantResults[0] == PackageManager.PERMISSION_GRANTED) {
                initializeCamera();            }
        }
    }

    @NeedsPermission(Manifest.permission.CAMERA)
    void requestCameraPermission() {
        initializeCamera();
    }

    void initializeCamera() {
        textureView.setSurfaceTextureListener(new TextureView.SurfaceTextureListener() {
            @Override
            public void onSurfaceTextureAvailable(SurfaceTexture surface, int width, int height) {
                camera = Camera.open();

                /* Set Auto focus */
                Camera.Parameters parameters = camera.getParameters();
                List&lt;String&gt; focusModes = parameters.getSupportedFocusModes();
                if(focusModes.contains(Camera.Parameters.FOCUS_MODE_CONTINUOUS_PICTURE)){
                    parameters.setFocusMode(Camera.Parameters.FOCUS_MODE_CONTINUOUS_PICTURE);
                } else
                if(focusModes.contains(Camera.Parameters.FOCUS_MODE_AUTO)){
                    parameters.setFocusMode(Camera.Parameters.FOCUS_MODE_AUTO);
                }

                camera.setParameters(parameters);

                try {
                    camera.setPreviewTexture(surface);
                } catch (IOException io) {
                    LogUtils.LOGD(TAG, io.getMessage());
                }
                camera.startPreview();
            }

            @Override
            public void onSurfaceTextureSizeChanged(SurfaceTexture surface, int width, int height) {

            }

            @Override
            public boolean onSurfaceTextureDestroyed(SurfaceTexture surface) {
                try {
                    camera.stopPreview();
                    camera.release();
                } catch (Exception e) {
                    LogUtils.LOGD(TAG, e.getMessage());
                }
                return true;
            }

            @Override
            public void onSurfaceTextureUpdated(SurfaceTexture surface) {

            }
        });

        barcodeDetector.setProcessor(new Detector.Processor&lt;Barcode&gt;() {
            @Override
            public void release() {

            }

            @Override
            public void receiveDetections(Detector.Detections&lt;Barcode&gt; detections) {
                final SparseArray&lt;Barcode&gt; barcodes = detections.getDetectedItems();

                if (barcodes.size() != 0) {
                    LogUtils.LOGD(TAG, barcodes.valueAt(0).displayValue);
                }
            }
        });

    }

    @OnShowRationale(Manifest.permission.CAMERA)
    void showRationaleForCamera(final PermissionRequest request) {
        new AlertDialog.Builder(this)
                .setMessage(R.string.permission_camera_rationale)
                .setPositiveButton(R.string.button_allow, new DialogInterface.OnClickListener() {
                    @Override
                    public void onClick(DialogInterface dialog, int which) {
                        request.proceed();
                    }
                })
                .setNegativeButton(R.string.button_deny, new DialogInterface.OnClickListener() {
                    @Override
                    public void onClick(DialogInterface dialog, int which) {
                        request.cancel();
                    }
                })
                .show();
    }

    @OnPermissionDenied(Manifest.permission.CAMERA)
    void showPermissionDeniedForCamera() {
        Toast.makeText(this, R.string.permission_camera_denied, Toast.LENGTH_SHORT).show();
    }

    @OnNeverAskAgain(Manifest.permission.CAMERA)
    void showNeverAskAgainForCamera() {
        Toast.makeText(this, R.string.permission_camera_never_ask_again, Toast.LENGTH_SHORT).show();
    }

}
</code></pre>
",2455259,,2455259,,2017-04-01 16:56:57,2017-04-11 21:53:45,How to use mobile vision API with TextureView and Camera,<android><android-vision><google-vision><android-textureview>,1,0,3,,
Android,43251528,1,,,,,,4/6/2017 9:46:47,,29,31846,"<p>So, with Android O, you need to have your service running as a foreground service if you want to receive more than just a few location updates per hour.</p>

<p>I noticed that the old method for starting a foreground service does seem to work on O.
i.e. </p>

<pre><code>startForeground(NOTIFICATION_ID, getNotification());
</code></pre>

<p>According to the behaviour changes guide here:
<a href=""https://developer.android.com/preview/behavior-changes.html"" rel=""noreferrer"">https://developer.android.com/preview/behavior-changes.html</a></p>

<blockquote>
  <p>The NotificationManager.startServiceInForeground() method starts a foreground service. The old way to start a foreground service no longer works.</p>
</blockquote>

<p>Though the new method only works when targeting O, it seems that the old method still seems to work on an O device whether targeting O or not.</p>

<p><strong>Edit</strong>
Including example:</p>

<p>The Google sample project LocationUpdatesForegroundService actually has a working example where you can see the issue first hand.
<a href=""https://github.com/googlesamples/android-play-location/tree/master/LocationUpdatesForegroundService"" rel=""noreferrer"">https://github.com/googlesamples/android-play-location/tree/master/LocationUpdatesForegroundService</a></p>

<p>The startForeground method seems to work without issue whether targeting and compiling against API level 25 OR targeting and compiling against O (as directed to here: <a href=""https://developer.android.com/preview/migration.html#uya"" rel=""noreferrer"">https://developer.android.com/preview/migration.html#uya</a>)</p>

<p>So, to reproduce:</p>

<ol>
<li>Configure the app gradle as mentioned in the previous link</li>
<li>Open the app</li>
<li>Request location updates</li>
<li>Close app (either via back button or home button)</li>
</ol>

<p>Service is running in foreground (shown by icon in notification shade).  Location updates are coming through as expected (every 10 seconds) even on a device running O. What I am missing here?</p>
",487812,,6618622,,2018-04-01 9:22:48,2019-01-04 14:12:28,Android O - Old start foreground service still working?,<android><location><android-8.0-oreo>,7,9,10,,
Android,43300273,1,,,,,,4/8/2017 20:56:25,,2,205,"<p>I've tried to use Nearby Connections, but I keep getting the dialog ""Google Play Services"" has crashed. The logcat shows a stack trace like this:</p>

<pre><code>04-08 20:01:32.309 8904-11589/? E/AndroidRuntime: FATAL EXCEPTION: highpool[3]
                                                  Process: com.google.android.gms.nearby.connection, PID: 8904
                                                  java.lang.NullPointerException: Attempt to read from field 'java.lang.Object pu.a' on a null object reference
                                                      at vsb.e(:com.google.android.gms:244)
                                                      at vsr.run(:com.google.android.gms:344)
                                                      at lmq.run(:com.google.android.gms:450)
                                                      at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1112)
                                                      at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:587)
                                                      at lra.run(:com.google.android.gms:17)
                                                      at java.lang.Thread.run(Thread.java:818)
</code></pre>

<p>Where the specific random letters can change.</p>

<p>After further investigation, it seems to occur when a device is attempting to discover advertising devices and the timeout it specifies ends.</p>

<p>I went to report the issue and found someone already had:</p>

<p><a href=""https://code.google.com/p/android/issues/detail?can=1&amp;start=0&amp;num=100&amp;q=nearby%20connections%20nullpointerexception&amp;colspec=ID%20Status%20Priority%20Owner%20Summary%20Stars%20Reporter%20Opened&amp;groupby=&amp;sort=&amp;id=316748"" rel=""nofollow noreferrer"">https://code.google.com/p/android/issues/detail?can=1&amp;start=0&amp;num=100&amp;q=nearby%20connections%20nullpointerexception&amp;colspec=ID%20Status%20Priority%20Owner%20Summary%20Stars%20Reporter%20Opened&amp;groupby=&amp;sort=&amp;id=316748</a></p>

<p>Very few apps seem to use Nearby Connections; I know of none. The official documentation isn't great. Heck, <code>Nearby.Connections.startAdvertising()</code> still wants a <code>AppMetadata</code> parameter, which Google has deprecated.</p>

<p>The official code example, <a href=""https://github.com/googlesamples/android-nearby"" rel=""nofollow noreferrer"">https://github.com/googlesamples/android-nearby</a> , is obsolete and non-functional.</p>

<p>So my question is: how can I work around these issues? Is there a modern, <em>working</em> example of Nearby Connections anywhere? Or is the Nearby Connections API itself simply unused and completely broken?</p>
",967131,,,,,2017-07-06 8:19:32,Nearby Connections NullPointerException,<android><google-nearby>,1,4,2,,
Android,43319318,1,,,,,,4/10/2017 9:20:21,,1,1063,"<p>I am building a custom camera with the Camera2 API.
So far the camera works very well except for the preview which is distorted sometimes. Let's say I open the camera 7 times in a row. All of the attempts are succesful and the 8th time the camera preview is distorted. It looks like it uses the width as the height and vice versa.</p>

<p>I have based my code on the Google sample implementation of the camera2 which can be found <a href=""https://github.com/googlesamples/android-Camera2Basic"" rel=""nofollow noreferrer"">here</a>.
the interesting thing is that even the Google sample implementation has this distorted preview sometimes. I have tried to modify the AutoFitTextureView but nothing was successful. I am currently using the AutoFitTextureView.java Google provides again.</p>

<p>A similar post to this one <a href=""https://stackoverflow.com/questions/30049293/camera-preview-stretched-on-few-android-devices"">can be found here</a>.
However the proposed fixes didn't solve the problem.</p>

<p>I can reproduce the problem by changing the following in the setUpCameraOutputs method:</p>

<pre><code>mTextureView.setAspectRatio(mPreviewSize.getHeight(), mPreviewSize.getWidth());
</code></pre>

<p>to:</p>

<pre><code>mTextureView.setAspectRatio(mPreviewSize.getWidth(), mPreviewSize.getHeight());
</code></pre>

<p>Another weird thing is that whenever the distorted preview occurs and you just press the home button so the app goes in onPause() and open up the app again so onResume() gets called, the preview is perfect every time.</p>

<p>Has anyone here experienced this problem and found a fix for it?</p>

<p>Thanks in advance</p>
",7726613,,-1,,2017-05-23 12:17:35,2018-01-07 15:33:32,Android Camera2 API preview sometimes distorted,<android><preview><android-camera2><distortion><camera2>,2,2,1,,
Android,43382586,1,,,,,,4/13/2017 2:30:50,,1,261,"<p><a href=""https://github.com/googlesamples/android-UniversalMusicPlayer/tree/master/mobile/src/main"" rel=""nofollow noreferrer"">Here</a> is the Google sample app. It's set up to pull metadata from a URL with a JSON. I would like to know how to have Firebase be my source. </p>

<p>Here is my attempt in changing the RemoteJSONSource class:</p>

<pre><code>package com.mm.android.uamp.model;

import android.support.v4.media.MediaMetadataCompat;
import android.util.Log;

import com.google.firebase.database.DataSnapshot;
import com.google.firebase.database.DatabaseError;
import com.google.firebase.database.DatabaseReference;
import com.google.firebase.database.FirebaseDatabase;
import com.google.firebase.database.ValueEventListener;
import com.mm.android.uamp.utils.LogHelper;

import java.util.ArrayList;
import java.util.Iterator;

public class RemoteJSONSource implements MusicProviderSource {

private static final String TAG = LogHelper.makeLogTag(RemoteJSONSource.class);

DatabaseReference mRootRef = FirebaseDatabase.getInstance().getReference();
DatabaseReference mMusic = mRootRef.child(""music"");

ArrayList&lt;MediaMetadataCompat&gt; tracksFromFB = new ArrayList&lt;&gt;();
public void buildFromFirebase(){

    mMusic.addListenerForSingleValueEvent(new ValueEventListener() {

        @Override
        public void onDataChange(DataSnapshot dataSnapshot) {

            for (DataSnapshot music : dataSnapshot.getChildren()){

                String title = music.child(""title"").getValue(String.class);
                String album = music.child(""album"").getValue(String.class);
                String artist = music.child(""artist"").getValue(String.class);
                String genre = music.child(""genre"").getValue(String.class);
                String source = music.child(""source"").getValue(String.class);
                String id = String.valueOf(source.hashCode());
                String iconUrl = music.child(""image"").getValue(String.class);
                int trackNumber = music.child(""trackNumber"").getValue(Integer.class);
                int totalTrackCount = music.child(""totalTrackCount"").getValue(Integer.class);
                int duration = music.child(""duration"").getValue(Integer.class);

                MediaMetadataCompat theMetadataFB = new MediaMetadataCompat.Builder()
                        .putString(MediaMetadataCompat.METADATA_KEY_MEDIA_ID, id)
                        .putString(MusicProviderSource.CUSTOM_METADATA_TRACK_SOURCE, source)
                        .putString(MediaMetadataCompat.METADATA_KEY_ALBUM, album)
                        .putString(MediaMetadataCompat.METADATA_KEY_ARTIST, artist)
                        .putLong(MediaMetadataCompat.METADATA_KEY_DURATION, duration)
                        .putString(MediaMetadataCompat.METADATA_KEY_GENRE, genre)
                        .putString(MediaMetadataCompat.METADATA_KEY_ALBUM_ART_URI, iconUrl)
                        .putString(MediaMetadataCompat.METADATA_KEY_TITLE, title)
                        .putLong(MediaMetadataCompat.METADATA_KEY_TRACK_NUMBER, trackNumber)
                        .putLong(MediaMetadataCompat.METADATA_KEY_NUM_TRACKS, totalTrackCount)
                        .build();

                tracksFromFB.add(theMetadataFB);
            }
        }

        @Override
        public void onCancelled(DatabaseError databaseError) {
            Log.w(TAG, ""loadPost:onCancelled"", databaseError.toException());
        }
    });
}

@Override
public Iterator&lt;MediaMetadataCompat&gt; iterator() {
    buildFromFirebase();
    ArrayList&lt;MediaMetadataCompat&gt; tracksFB = tracksFromFB;

    return tracksFB.iterator();
}

}
</code></pre>

<p>The firebase onDataChange is asynchronous so I think it hasn't finished pulling the data yet before the iterator method returns tracksFB.iterator cause tracksFB array is null. Weird thing is when I run in debug mode with a line break on</p>

<p>ArrayList tracksFB = tracksFromFB;</p>

<p>It works. From my research I think I need a callback or some type of pausing task, but I just cant figure it out.</p>

<p>Possible relevant code connected to the iterator method</p>

<pre><code>public interface MusicProviderSource {
   String CUSTOM_METADATA_TRACK_SOURCE = ""__SOURCE__"";
   Iterator&lt;MediaMetadataCompat&gt; iterator();
}
</code></pre>

<p>next</p>

<pre><code>public class MusicProvider {
private static final String TAG = LogHelper.makeLogTag(MusicProvider.class);
private MusicProviderSource mSource;
private ConcurrentMap&lt;String, List&lt;MediaMetadataCompat&gt;&gt; mMusicListByGenre;
private final ConcurrentMap&lt;String, MutableMediaMetadata&gt; mMusicListById;

private final Set&lt;String&gt; mFavoriteTracks;

enum State {
    NON_INITIALIZED, INITIALIZING, INITIALIZED
}

private volatile State mCurrentState = State.NON_INITIALIZED;

public interface Callback {
    void onMusicCatalogReady(boolean success);
}

public MusicProvider() {
    this(new RemoteJSONSource());
}
public MusicProvider(MusicProviderSource source) {
    mSource = source;
    mMusicListByGenre = new ConcurrentHashMap&lt;&gt;();
    mMusicListById = new ConcurrentHashMap&lt;&gt;();
    mFavoriteTracks = Collections.newSetFromMap(new ConcurrentHashMap&lt;String, Boolean&gt;());
}

public Iterable&lt;String&gt; getGenres() {
    if (mCurrentState != State.INITIALIZED) {
        return Collections.emptyList();
    }
    return mMusicListByGenre.keySet();
}

/**
 * Get an iterator over a shuffled collection of all songs
 */
public Iterable&lt;MediaMetadataCompat&gt; getShuffledMusic() {
    if (mCurrentState != State.INITIALIZED) {
        return Collections.emptyList();
    }
    List&lt;MediaMetadataCompat&gt; shuffled = new ArrayList&lt;&gt;(mMusicListById.size());
    for (MutableMediaMetadata mutableMetadata: mMusicListById.values()) {
        shuffled.add(mutableMetadata.metadata);
    }
    Collections.shuffle(shuffled);
    return shuffled;
}

/**
 * Get music tracks of the given genre
 *
 */
public Iterable&lt;MediaMetadataCompat&gt; getMusicsByGenre(String genre) {
    if (mCurrentState != State.INITIALIZED || !mMusicListByGenre.containsKey(genre)) {
        return Collections.emptyList();
    }
    return mMusicListByGenre.get(genre);
}

}
</code></pre>

<p>Also the musicService.java in the link above might be relevant. PLEASE help! </p>
",7789011,,4625829,,2017-04-13 2:46:05,2017-11-27 20:50:49,How to use Firebase with the Android universal music player?,<android><firebase><android-asynctask><callback><firebase-realtime-database>,1,3,1,,
Android,43440909,1,,,,,,4/16/2017 18:57:32,,1,476,"<p>I use <a href=""https://github.com/googlesamples/android-vision/tree/master/visionSamples/barcode-reader"" rel=""nofollow noreferrer"">android vision sample</a> for scanning PDF417 barcode on South Africa driver license. 
For decoding information, I need to pass the byte array to another library. 
But I can get only get barcode.rawValue that is String.</p>

<p>Tring to get butes[] from string by barcode.rawValue.getBytes() returnes array this is not working with decode librery.</p>

<p>Need analog of Pdf417MobiScanData.getBarcodeRawData().getAllData()</p>

<p>Thank you.</p>
",7875525,,,,,2017-04-16 19:25:32,Get byte array with Android Vision scanning pdf417 barcode,<android><android-vision>,1,0,1,,
Android,43460985,1,,,,,,4/17/2017 23:02:59,,2,4098,"<p>I'm working on some app using Android's Camera2 API. So far I've been able to get a preview displayed within a <code>TextureView</code>. The app is by default in landscape mode. When using the emulator the preview will appear upside-down. On my physical Nexus 5 the preview is <em>usually</em> displayed correctly (landscape, not upside-down), but occasionally it is rotated by 90 degrees, yet stretched to the dimensions of the screen.
I thought that should be easy and thought the following code would return the necessary information on the current orientation:</p>

<pre><code>// display rotation
getActivity().getWindowManager().getDefaultDisplay().getRotation();
// sensor orientation
mManager.getCameraCharacteristics(mCameraId).get(CameraCharacteristics.SENSOR_ORIENTATION);
</code></pre>

<p>... I was pretty surprised when I saw that above code <strong>always</strong> returned <code>1</code> for the display rotation and <code>90</code> for the sensor orientation, <em>regardless</em> of the preview being rotated by 90 degree or not. (Within the emulator sensor orientation is always 270 which kinda makes sense if I assume 90 to be the correct orientation).
I also checked the width and height within <code>onMeasure</code> within <a href=""https://github.com/googlesamples/android-Camera2Basic/blob/master/Application/src/main/java/com/example/android/camera2basic/AutoFitTextureView.java"" rel=""nofollow noreferrer"">AutoMeasureTextureView</a> (adopted from <a href=""https://github.com/googlesamples/android-Camera2Basic/blob/master/Application/src/main/java/com/example/android/camera2basic/Camera2BasicFragment.java"" rel=""nofollow noreferrer"">Android's Camera2 example</a>) that I'm using to create my TextureView. But no luck either - width and height reported from within <code>onMeasure</code> are always the same regardless of the preview rotation.
So I'm clueless on how to tackle this issue. Does anyone have an idea what could be the reason for the occasional hickups in my preview orientation?</p>

<p>[Edit]
A detail I just found out: Whenever the preview appears rotated <code>onSurfaceTextureSizeChanged</code> in the <code>TextureView.SurfaceTextureListener</code> seems not to get called. In the documentation for <code>onSurfaceTextureSizeChanged</code> it is said that this method is called whenever the <code>SurfaceTexture</code>'s buffers size is changed. I have a method <code>createCameraPreviewSession</code> (copied from Android's Camera2 example) in which I set the default buffer size of my texture like</p>

<pre><code>texture.setDefaultBufferSize(mPreviewSize.getWidth(), mPreviewSize.getHeight());
</code></pre>

<p>From my logging output I can tell that <code>onSurfaceTextureSizeChanged</code> is called exactly after that - however, not always... (or setting the default buffer size sometimes silently fails?).</p>
",2001687,,2001687,,2018-09-15 14:07:27,2018-09-15 14:07:27,Android Camera2 preview occasionally rotated by 90 degrees,<android><rotation><android-camera2>,3,0,2,,
Android,43515031,1,,,,,,4/20/2017 9:07:30,,1,152,"<p>I have followed the <a href=""https://github.com/googlesamples/android-BasicSyncAdapter"" rel=""nofollow noreferrer"">BasicSyncAdapter</a> example in the google samples and I wonder why a default periodic sync (sync interval 86400 secs or 24h) is even created if I <a href=""https://github.com/googlesamples/android-BasicSyncAdapter/blob/master/Application/src/main/java/com/example/android/basicsyncadapter/SyncUtils.java#L63"" rel=""nofollow noreferrer"">comment out the call to <code>addPeriodicSync()</code> function in the code</a>.</p>

<p>I find no documentation whatsoever that creating a SyncAdapter and the stub code (SyncService, Authenticator account etc.) also creates a periodic sync with that default sync interval. </p>

<p>My Question: Is it possible to create a SyncAdapter without such default periodic sync?</p>

<p>Thanks.</p>

<p>BTW, this is how I detect the presence of periodic syncs.</p>

<pre><code>java.util.List&lt;PeriodicSync&gt; periodicSyncsList = ContentResolver.getPeriodicSyncs(myaccount, CONTENT_AUTHORITY);
Log.d(TAG, ""Number of syncs in the periodicSyncsList = "" + periodicSyncsList.size());
for (PeriodicSync p : periodicSyncsList) {
    Log.d(TAG, p.toString());
}
</code></pre>
",782094,,782094,,2017-04-20 9:20:06,2018-10-05 8:20:14,Why does SyncAdapter create a default periodic sync even though I have not called addPeriodicSync()?,<java><android><android-syncadapter>,2,0,,,
Android,43532713,1,,,,,,4/21/2017 2:01:07,,2,133,"<p>I'm trying to run <a href=""https://github.com/googlesamples/android-vision/tree/master/visionSamples/FaceTracker"" rel=""nofollow noreferrer"">Google Vision FaceTracker</a> but I have an error on one line of code in <code>CameraSourcePreview</code>. </p>

<p><strong>This is the error</strong> - 
Call requires permission which may be rejected by user: code should explicitly check to see if permission is available (with <code>checkPermission</code>) or explicitly handle a potential <code>SecurityException</code></p>

<p>And this is the function-</p>

<pre><code>private void startIfReady() throws IOException {
    if (mStartRequested &amp;&amp; mSurfaceAvailable) {

        mCameraSource.start(mSurfaceView.getHolder()); //Error

        //...other code

        mStartRequested = false;
    }
}
</code></pre>
",7868376,,,,,2017-04-21 10:30:57,Google's VisionAPI example FaceTracker Camera permission,<android><android-camera><google-vision>,1,6,,,
Android,43549220,1,,,,,,4/21/2017 17:59:22,,1,375,"<p>I'm trying to implement camera2api provided by google with this link
<a href=""https://github.com/googlesamples/android-Camera2Video"" rel=""nofollow noreferrer"">https://github.com/googlesamples/android-Camera2Video</a></p>

<p>Everything works fine but after after stoping the video the app crashes on mediarecorder.stop()</p>

<p>I'm using Xiaomi 4A </p>

<p>Logcat:</p>

<p>4-21 23:37:42.189 20375-20375/? E/AndroidRuntime: FATAL EXCEPTION: main
                                                   Process: com.example.android.camera2video, PID: 20375
                                                   java.lang.RuntimeException: stop failed.
                                                       at android.media.MediaRecorder.stop(Native Method)
                                                       at com.example.android.camera2video.Camera2VideoFragment.stopRecordingVideo(Camera2VideoFragment.java:687)
                                                       at com.example.android.camera2video.Camera2VideoFragment.onClick(Camera2VideoFragment.java:314)
                                                       at android.view.View.performClick(View.java:5207)
                                                       at android.view.View$PerformClick.run(View.java:21177)
                                                       at android.os.Handler.handleCallback(Handler.java:739)
                                                       at android.os.Handler.dispatchMessage(Handler.java:95)
                                                       at android.os.Looper.loop(Looper.java:148)
                                                       at android.app.ActivityThread.main(ActivityThread.java:5441)
                                                       at java.lang.reflect.Method.invoke(Native Method)
                                                       at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:738)
                                                       at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:628)</p>
",6140957,,6140957,,2017-04-21 18:08:28,2018-02-07 10:51:50,Android media recorder crashes on stop,<android><google-api><android-mediarecorder><android-camera2>,1,3,1,,
Android,43632379,1,,,,,,4/26/2017 11:05:05,,1,467,"<p>I have used picture which has text in black colour and white background  </p>

<p><strong>Vision API is unable to read the text in that image, it reads first two line but rest all its not reading.</strong></p>

<p>Please let me know whats wrong. Is it problem with Api or from my code. </p>

<p>I used this  <a href=""https://github.com/googlesamples/android-vision/tree/master/visionSamples/ocr-reader"" rel=""nofollow noreferrer"" title=""Sample"">sample code</a> </p>
",1829753,,1829753,,2017-05-04 6:51:45,2017-10-23 15:04:01,Android vision api OCR example is not detecting all text,<android><android-vision>,1,0,,,
Android,43821919,1,,,,,,5/6/2017 15:00:03,,1,1361,"<p>I'm developing an app for Android Things and want to use Nearby from Google Play Services to communicate with my IoT device across Android and iOS.</p>

<p>I've compiled the app, but am getting a message that it's not supported on my device, however, the Android Things website clearly states that there is support for it.</p>

<p>I'm using the sample code provided by Google here with no modifications other than adding my API key <a href=""https://github.com/googlesamples/android-nearby/tree/master/messages/NearbyDevices"" rel=""nofollow noreferrer"">https://github.com/googlesamples/android-nearby/tree/master/messages/NearbyDevices</a>.</p>

<p>My device is a Raspberry Pi 3 model B and I'm using the latest release of Android Things.</p>
",6377072,,6377072,,2017-05-07 8:28:12,2018-05-19 6:56:37,Are Google Play Services Supported on Android Things?,<android><google-play><google-nearby><android-things>,3,4,,,
Android,44022751,1,,,,,,5/17/2017 10:50:31,,2,356,"<p>I am trying to get continuous location updates by running a background service. While I debug the code <strong>onConnected(Bundle b)</strong> is called and location update request is called. But <strong>onLocationChanged(Location location)</strong>  is never called. Below is my code:</p>

<pre><code>    public class LocationUpdateService extends Service implements
        GoogleApiClient.ConnectionCallbacks, GoogleApiClient.OnConnectionFailedListener, LocationListener {


    private GoogleApiClient googleApiClient;
    private LocationRequest mLocationRequest;
    Location mCurrentLocation;

    @Override
    public void onLocationChanged(Location location) {
        mCurrentLocation = location;
        double lat = mCurrentLocation.getLatitude();
        double lng = mCurrentLocation.getLongitude();
    }

    //GoogleApiClient
    @Override
    public void onConnectionFailed(ConnectionResult bundle) {

    }

    @Override
    public void onConnected(Bundle bundle) {
        Log.i(""onConnected"", ""GoogleApiClient"");

        Toast.makeText(this, ""Location  service connected"", Toast.LENGTH_SHORT).show();
        createLocationRequest();
        startLocationUpdate();
    }

    @Override
    public void onConnectionSuspended(int i) {

    }

    //Service
    @Override
    public void onCreate() {
        super.onCreate();
        buildGoogleApiClient();
    }

    @Override
    public int onStartCommand(Intent intent, int flags, int startId) {

        return START_STICKY; // run until explicitly stopped.
    }

    @Override
    public IBinder onBind(Intent intent) {
        return null;
    }

    private void startLocationUpdate() {
        if (ActivityCompat.checkSelfPermission(this, Manifest.permission.ACCESS_FINE_LOCATION)
                != PackageManager.PERMISSION_GRANTED &amp;&amp; ActivityCompat.checkSelfPermission(this, Manifest.permission.ACCESS_COARSE_LOCATION) != PackageManager.PERMISSION_GRANTED) {
            return;
        }
        LocationServices.FusedLocationApi.requestLocationUpdates(
                googleApiClient, mLocationRequest, this);
        mCurrentLocation = LocationServices.FusedLocationApi.getLastLocation(googleApiClient);
    }

    void buildGoogleApiClient() {
        googleApiClient = new GoogleApiClient.Builder(this)
                .addConnectionCallbacks(this)
                .addOnConnectionFailedListener(this)
                .addApi(LocationServices.API)
                .build();
        googleApiClient.connect();
    }

    void createLocationRequest() {
        mLocationRequest = new LocationRequest().create()
                .setInterval(5000)
                .setFastestInterval(5000)
                .setPriority(LocationRequest.PRIORITY_HIGH_ACCURACY);
    }
}
</code></pre>

<p>I can't understand where I am making mistake, while I have followed <a href=""https://github.com/googlesamples/android-play-location/tree/master/LocationUpdates"" rel=""nofollow noreferrer"">android docs</a>. I am testing on real device and app has location permissions.</p>

<p>service in menifest:</p>

<pre><code>&lt;service
            android:name="".locations.LocationUpdateService""
            android:enabled=""true""
            android:exported=""false""&gt;&lt;/service&gt;
</code></pre>

<p>Call of service in activity:</p>

<pre><code>startService(new Intent(BaseActivity.this, LocationUpdateService.class));
</code></pre>
",7387039,,7387039,,2017-05-17 11:23:31,2017-05-19 9:55:33,"onLocationChanged never called , GoogleApiClient",<android><google-maps><geolocation><google-api-client>,2,2,,,
Android,44181562,1,,,,,,5/25/2017 13:15:30,,1,667,"<p>Want to design an app that registers the user with password field as fingerprint, got a <a href=""https://github.com/googlesamples/android-FingerprintDialog"" rel=""nofollow noreferrer"">google sample code from github</a>, It asks the user to add the fingerprint in <strong><em>Settings</em></strong> as many as we want and it authenticates the user from the existing fingerprints by calling the authenticate() of the FingerprintManager</p>

<p>How could I register a new fingerprint from app and get it stored in sqlite or in cloud?</p>

<p>Is there any external Bluetooth Biometric sensor and SDK support for android?</p>
",2459623,,2459623,,2017-05-25 14:34:23,2017-05-25 14:34:23,[Android]Registering fingerprints in application,<android><android-fingerprint-api>,1,3,,,
Android,44231334,1,,,,,,5/28/2017 19:43:33,,16,4290,"<p>New Android Architecture Components released on google IO 17.</p>

<p>So should we use MVP with architecture components and MVVM?</p>

<p>In google sample on Github, they have used the MVVM model.
<a href=""https://github.com/googlesamples/android-architecture-components/tree/master/BasicSample"" rel=""noreferrer"">Google Sample</a></p>
",2534612,,767857,,2017-06-01 17:16:50,2018-03-18 10:08:36,Android architecture components with MVP,<android><android-architecture-components>,2,2,7,,
Android,44249483,1,,,,,,5/29/2017 19:43:47,,2,622,"<p>As of now, when Android Vision detects a QR-code, the array ""Barcode.cornerPoints"" (which contains the code's corner points) is populated in a seemingly random order. I need is to determine which 3 out of the 4 corner points that contains ""orientation squares"".</p>

<p>The current approach I am using is very unsatisfying:</p>

<ol>
<li><p>For every detected QR-code, I am forced to create a bitmap and attempt to find the QR-code again with another library (Zxing) that always returns the corner points in a consistent order with respect to rotation.</p></li>
<li><p>If Zxing finds the QR-code (which sadly doesn't happen about four times out of five), I need to cross-check and match the Zxing-corners with Android Vision corners.</p></li>
</ol>

<p>What I would like is to get the array ""Barcode.cornerPoints"" populated with respect to orientation.</p>

<p>For example and clarification:</p>

<pre><code>cornerPoints[0] = //First corner-point with an orientation square
cornerPoints[1] = //Second corner-point with an orientation square
cornerPoints[2] = //Third corner-point with an orientation square
cornerPoints[3] = //The corner-point that does not contain a orientation square
</code></pre>

<p><a href=""https://i.stack.imgur.com/bg4jK.jpg"" rel=""nofollow noreferrer"">> Like in this picture &lt;</a></p>

<p>I have been trying to find a clever workaround to this issue for quire a while now but I can't come up with any good solution, and it does not appear as Google has open source'd the code used when population the qrCorners array so i can't extend it...</p>

<p>Any help out there? I am not the only one who has been looking for a solution to this issue:</p>

<p><a href=""https://github.com/googlesamples/android-vision/issues/103"" rel=""nofollow noreferrer"">https://github.com/googlesamples/android-vision/issues/103</a></p>
",8082968,,8082968,,2017-06-01 7:17:08,2017-06-06 8:39:46,Orientation corners of a QR-code,<android><image-processing><mobile><android-vision>,1,2,,,
Android,44467885,1,,,,,,6/9/2017 23:20:21,,4,234,"<p>I have followed the sample here: <a href=""https://github.com/googlesamples/android-WearVerifyRemoteApp"" rel=""nofollow noreferrer"">https://github.com/googlesamples/android-WearVerifyRemoteApp</a>. I ran the app on Wear Emulator (Android 6.0.1). I reached the point where the app is not installed on phone and want to launch the app link on Google Play on the device:</p>

<pre><code>// Create Remote Intent to open Play Store listing of app on remote device.
            Intent intentAndroid =
                    new Intent(Intent.ACTION_VIEW)
                            .addCategory(Intent.CATEGORY_BROWSABLE)
                            .setData(Uri.parse(PLAY_STORE_APP_URI));

            RemoteIntent.startRemoteActivity(
                    getApplicationContext(),
                    intentAndroid,
                    mResultReceiver);
</code></pre>

<p>I attached the debugger and, yes, I reached this line, but nothing happens. Google Play is not launched on the phone. I am sure I am connected to the phone as other notifications from the phone (real device) appears on the emulator.</p>

<p><strong>Edit:</strong></p>

<p>Not clear why but connection from the phone to the emulator is really buggy. It's really frustrating and the issue was solved but disconnecting and reconnecting many times.</p>
",1149647,,1149647,,2017-06-20 11:40:20,2017-06-20 11:40:20,Android Wear - Launching Google Play on Phone,<android><wear-os>,1,2,,,
Android,44527420,1,,,,,,6/13/2017 16:56:29,,6,1055,"<p>I need to use Camera2 API on my application. (Api21+)
I found the next sample:
<a href=""https://github.com/googlesamples/android-Camera2Basic"" rel=""nofollow noreferrer"">https://github.com/googlesamples/android-Camera2Basic</a> </p>

<p>I downloaded it and started on my phone. When I pressed the ""Picture"" Button, it's call the takePhoto method.</p>

<pre><code>private void takePicture() {
    lockFocus();
}
</code></pre>

<p>It is a State machine. Sometimes this machine stuck on <code>STATE_WAITING_LOCK</code>.
My device is waiting for Focus, but nothing happens! (Yes, my device is support auto focus)</p>

<pre><code>case STATE_WAITING_LOCK: {
        Integer afState = result.get(CaptureResult.CONTROL_AF_STATE);
        if (afState == null) {
            captureStillPicture();
        } else if (CaptureResult.CONTROL_AF_STATE_FOCUSED_LOCKED == afState ||
                CaptureResult.CONTROL_AF_STATE_NOT_FOCUSED_LOCKED == afState) {
            // CONTROL_AE_STATE can be null on some devices
            Integer aeState = result.get(CaptureResult.CONTROL_AE_STATE);
            if (aeState == null ||
                    aeState == CaptureResult.CONTROL_AE_STATE_CONVERGED) {
                mState = STATE_PICTURE_TAKEN;
                captureStillPicture();
            } else {
                runPrecaptureSequence();
            }
        }
        break;
    }
</code></pre>

<p>What is the good solution for this problem?
And this program sometimes crashed here:</p>

<pre><code>private void unlockFocus() {
    try {
        // Reset the auto-focus trigger
        mPreviewRequestBuilder.set(CaptureRequest.CONTROL_AF_TRIGGER,
                CameraMetadata.CONTROL_AF_TRIGGER_CANCEL);
        setAutoFlash(mPreviewRequestBuilder);
/*HERE*/ mCaptureSession.capture(mPreviewRequestBuilder.build(), mCaptureCallback,
                mBackgroundHandler);
        // After this, the camera will go back to the normal state of preview.
        mState = STATE_PREVIEW;
        mCaptureSession.setRepeatingRequest(mPreviewRequest, mCaptureCallback,
                mBackgroundHandler);
    } catch (CameraAccessException e) {
        e.printStackTrace();
    }
}
</code></pre>

<p>Why can't focus my device?</p>
",5472479,,1033581,,2019-02-01 7:41:35,2019-02-01 7:41:35,Android Camera2 focus state stuck,<android><android-camera2>,2,2,3,,
Android,44905858,1,,,,,,7/4/2017 12:21:32,,1,474,"<p>I'm trying to work with Camera2 API on emulator but unfortunately i encountered a problem while implementing it. </p>

<p>I'm using the <strong>Camera2Basic</strong> provided by google from this <a href=""https://github.com/googlesamples/android-Camera2Basic"" rel=""nofollow noreferrer"">link</a> and i tried it on real device and it works fine.</p>

<p><strong>Real devices are :</strong> Huawei P9 Lite API 24 , Samsung Galaxy S5 API 23.</p>

<p><strong>Genymotion Emulators are :</strong> Google Nexus 4,5,6 API 21,22,24 , Samsung Galaxy S6,S7 API 23,25</p>

<p>The problem now is when launching the App on emulator it shows the camera (i'm working with a webcam) but when i click on the button picture normally it shows on a toast that the picture is saved in a certain path. But it doesn't , that means that the picture wasn't taken , it only do that on real devices.</p>

<p>I've noticed while building the project the logcat shows this :</p>

<pre><code>07-04 07:56:06.252 1694-1694/? E/memtrack: Couldn't load memtrack module (No 
such file or directory)
07-04 07:56:06.252 1694-1694/? E/android.os.Debug: failed to load memtrack 
module: -2
07-04 07:56:07.360 1709-1709/? E/memtrack: Couldn't load memtrack module (No 
such file or directory)
07-04 07:56:07.360 1709-1709/? E/android.os.Debug: failed to load memtrack 
module: -2
07-04 07:56:34.492 1723-1723/? E/memtrack: Couldn't load memtrack module (No 
such file or directory)
07-04 07:56:34.492 1723-1723/? E/android.os.Debug: failed to load memtrack 
module: -2
07-04 07:56:35.220 1816-1816/? E/cutils-trace: Error opening trace file: 
Permission denied (13)
07-04 07:56:37.443 1863-1863/? E/memtrack: Couldn't load memtrack module (No 
such file or directory)
07-04 07:56:37.444 1863-1863/? E/android.os.Debug: failed to load memtrack 
module: -2
07-04 07:56:38.734 1872-1909/com.example.android.camera2basic E/libEGL: 
load_driver(/system/lib/egl/libGLES_emulation.so): dlopen failed: library 
""/system/lib/egl/libGLES_emulation.so"" not found
07-04 07:56:39.621 1872-1909/com.example.android.camera2basic 
E/EGL_emulation: tid 1909: eglSurfaceAttrib(1174): error 0x3009 
(EGL_BAD_MATCH)
07-04 07:56:40.775 635-727/system_process E/TaskPersister: File error 
accessing recents directory (directory doesn't exist?).
07-04 07:56:44.003 1935-1981/com.android.packageinstaller E/libEGL: 
load_driver(/system/lib/egl/libGLES_emulation.so): dlopen failed: library 
""/system/lib/egl/libGLES_emulation.so"" not found
07-04 07:56:44.597 1935-1981/com.android.packageinstaller E/EGL_emulation: 
tid 1981: eglSurfaceAttrib(1174): error 0x3009 (EGL_BAD_MATCH)
</code></pre>

<p>But when i click on the button <strong>picture</strong> it shows nothing on the logcat. This is the <strong>AndroidManifest.xml</strong> file :</p>

<pre><code>&lt;?xml version=""1.0"" encoding=""UTF-8""?&gt;

&lt;manifest xmlns:android=""http://schemas.android.com/apk/res/android""
package=""com.example.android.camera2basic""&gt;

&lt;uses-permission android:name=""android.permission.CAMERA"" /&gt;

&lt;uses-feature android:name=""android.hardware.camera"" /&gt;
&lt;uses-feature android:name=""android.hardware.camera.autofocus"" /&gt;
&lt;uses-permission android:name=""android.permission.READ_EXTERNAL_STORAGE"" /&gt;
&lt;uses-permission android:name=""android.permission.WRITE_EXTERNAL_STORAGE"" /&gt;

&lt;application android:allowBackup=""true""
    android:label=""@string/app_name""
    android:icon=""@drawable/ic_launcher""
    android:theme=""@style/MaterialTheme""&gt;

    &lt;activity android:name="".CameraActivity""
              android:label=""@string/app_name""&gt;
        &lt;intent-filter&gt;
            &lt;action android:name=""android.intent.action.MAIN"" /&gt;
            &lt;category android:name=""android.intent.category.LAUNCHER"" /&gt;
        &lt;/intent-filter&gt;
    &lt;/activity&gt;
&lt;/application&gt;
</code></pre>

<p></p>

<p>i saw many questions with the ""Couldn't load memtrack module (No 
such file or directory)"" but i couldn't realy relate to them. Can anyone help ? Thank you in advance.</p>

<p><strong>P.S :</strong> to make the Camera2 API work on emulator is a must for my project that's why i'm asking this. Thank you for understanding</p>
",3816569,,3816569,,2017-07-04 12:59:36,2018-08-15 11:58:52,Camera2 API doesn't work on emualtor,<android><android-emulator><android-camera>,1,0,,,
Android,44911596,1,,,,,,7/4/2017 17:39:19,,3,308,"<p>The official documentation is incredibly unclear when it comes how youâ€™re supposed to be handling in-app billing.</p>

<p>For starters there are two versions of TrivialDrive:</p>

<p>github.com/googlesamples/android-play-billing</p>

<p>And then from the official docs:</p>

<p>developer.android.com/google/play/billing/billing_integrate.html </p>

<p>(here it says to import the IInAppBillingService.aidl file and use ServiceConnections / IInAppBillingService)</p>

<p>developer.android.com/training/play-billing-library/preparing-iab-app.html </p>

<p>(here it says to look at Trivial Drive v2, and also use compile 'com.android.billingclient:billing:dp-1' instead of importing the .aidl file, and to use BillingManager)</p>

<p>developer.android.com/training/in-app-billing/preparing-iab-app.html </p>

<p>(here it says to look at Trivial Drive, import the .aidl file, and use the IabHelper + associated listeners for everything instead)</p>

<p>Can anyone clarify why such a crucial part of the Android platform has different explanations for things all over the place? What's the intended / latest framework we need to be using? Which pieces are outdated? Which TrivialDrive should I be referencing?</p>
",8251758,,,,,2017-07-05 13:07:05,How do we implement in-app purchasing when the documentation is so inconsistent?,<android><in-app-purchase><google-play-services><in-app-billing><android-billing>,1,0,1,,
Android,45005130,1,,,,,,7/10/2017 6:31:17,,4,2200,"<p>I am trying to implement sms retriever api to read OTP code message without having to add read_sms permission.</p>

<p>The help doc <a href=""https://developers.google.com/identity/sms-retriever/request"" rel=""nofollow noreferrer"">here</a>, ask user to generate hash code specific to app.</p>

<p>I have generated the code as required but still </p>

<p><code>&lt;action android:name=""com.google.android.gms.auth.api.phone.SMS_RETRIEVED""/&gt;</code></p>

<p>broadcast receiver is not firing up.</p>

<p>How can I debug this? </p>

<p>I am testing this by sending a SMS from one mobile to another and I am following the SMS requirement as specified in the document above.</p>

<p>Also, 
There are various methods mentioned to generated hash code. I have tried them all. Problem is each method generated different hash. </p>

<p>I have tried for both debug and release keystore.</p>

<p>Here are those various methods:</p>

<ol>
<li>linux command as describe here - <a href=""https://developers.google.com/identity/sms-retriever/verify#computing_your_apps_hash_string"" rel=""nofollow noreferrer"">help doc</a></li>
<li>sms_retriever_hash_v9 <a href=""https://github.com/googlesamples/android-credentials/blob/master/sms-verification/bin/sms_retriever_hash_v9.sh"" rel=""nofollow noreferrer"">file</a> as described <a href=""https://github.com/googlesamples/android-credentials/tree/master/sms-verification/android"" rel=""nofollow noreferrer"">here</a></li>
<li>By including <a href=""https://github.com/googlesamples/android-credentials/blob/master/sms-verification/android/app/src/main/java/com/google/samples/smartlock/sms_verify/AppSignatureHelper.java"" rel=""nofollow noreferrer"">AppSignatureHelper</a> from sample app.</li>
</ol>
",5700434,,,,,2017-07-13 18:45:11,SMS Retriever API - Generate 11 char hash code for app specific keystore file,<java><android><google-play-services>,1,18,1,,
Android,45104944,1,,,,,,7/14/2017 14:03:51,,1,885,"<p>I am interested in how to run Espresso tests from command line (gradle task) individually (<em>run group/suite tests then close app and then run another group/suite of tests</em>).</p>

<p>Found that it is feasible to implement <a href=""https://developer.android.com/training/testing/unit-testing/instrumented-unit-tests.html#test-suites"" rel=""nofollow noreferrer"">JUnit Test Suites</a> but do not really understand how does it looks like under the hood in a context of instrumentation tests. Does it starts separate processes per Test suite? There is <a href=""https://github.com/googlesamples/android-testing/tree/master/runner/AndroidJunitRunnerSample"" rel=""nofollow noreferrer"">sample application on Github</a> but how to execute it from terminal?</p>

<p>Another interesting discovery is <a href=""https://developer.android.com/training/testing/junit-runner.html#sharding-tests"" rel=""nofollow noreferrer"">Sharding tests</a>. However, it one sentence documentation.</p>

<p>May be somebody can share with any experience of running Espresso tests individually.</p>
",1474153,,1474153,,2017-07-14 17:04:31,2017-07-18 3:17:38,Android Espresso Test Suites,<android><unit-testing><android-emulator><android-espresso><android-junit>,2,0,1,,
Android,45461226,1,,,,,,8/2/2017 12:42:57,,12,9692,"<p>I am trying to implement Custom Camera to record a video. I have followed <a href=""https://github.com/googlesamples/android-Camera2Video"" rel=""noreferrer"">This sample</a> and it is working fine.</p>

<p>Now, i want to add <strong>""Switch Camera""</strong> functionality over a Button click. It should be able to <strong>Switch between Front/Back Camera</strong> even while the video is getting recorded.</p>

<p>Hence please help me to know if it is even possible??</p>

<p><strong>1. If yes then How??</strong></p>

<p><strong>2. If no then Please suggest some workaround??</strong></p>

<p>Some sample codes or links would be very helpful...</p>

<p><strong>Note :</strong> I have been googling about it and found some StackOverFlow answers like </p>

<p><a href=""https://stackoverflow.com/questions/39022845/android-camera2-api-switch-back-front-cameras"">Android Camera2 API switch back - front cameras</a></p>

<p><a href=""https://stackoverflow.com/questions/16765527/android-switch-camera-when-button-clicked"">Android: Switch camera when button clicked</a></p>

<p>But none of these are giving a <strong>facility to switch the camera when the video is being recorded</strong>.</p>

<p><strong>Please Help.</strong> </p>

<p>The code is same as <a href=""https://github.com/googlesamples/android-Camera2Video"" rel=""noreferrer"">This sample</a>. And it's the <strong>Camera2 API</strong>.</p>
",3792476,,3792476,,2017-08-10 8:33:02,2017-08-10 12:33:05,Android - Switch between front and back camera while recording a video,<android><android-layout><video><android-camera><android-camera2>,2,1,3,,
Android,45593065,1,,,,,,8/9/2017 14:08:13,,4,1374,"<p>I'm working on a call recorder app using MediaRecorder <strong>VOICE_CALL</strong> audio source, In some marshmallow devices it's crashing, then I changed source to <strong>MIC</strong> here incoming voice is not getting recorded. Due to this java limitation now I'm working on native android code to record voice call.
I'm managed to record the audio using <a href=""https://github.com/googlesamples/android-ndk/tree/master/native-audio"" rel=""nofollow noreferrer"">native-audio</a> recorder for call recorder. Problem is in native code also it's recording one side voice only,incoming voice is not getting recorded. Then I tried the <strong>voice communication</strong> preset configuration, its not recording. Below is the preset configuration code.</p>

<pre><code>const SLInterfaceID id[2] = { SL_IID_ANDROIDSIMPLEBUFFERQUEUE,SL_IID_ANDROIDCONFIGURATION};
const SLboolean req[2] = { SL_BOOLEAN_TRUE,SL_BOOLEAN_TRUE};

result = (*engineEngine)-&gt;CreateAudioRecorder(engineEngine, &amp;recorderObject, &amp;audioSrc,
                                              &amp;audioSnk, 2, id, req);

SLAndroidConfigurationItf inputConfig;
result = (*recorderObject)-&gt;GetInterface(recorderObject,
                                         SL_IID_ANDROIDCONFIGURATION,
                                         &amp;inputConfig);


if (SL_RESULT_SUCCESS == result) {
    SLuint32 presetValue =SL_ANDROID_RECORDING_PRESET_VOICE_COMMUNICATION ;
    (*inputConfig)-&gt;SetConfiguration(inputConfig,
                                     SL_ANDROID_KEY_RECORDING_PRESET,
                                     &amp;presetValue,
                                     sizeof(SLuint32));
    __android_log_print(ANDROID_LOG_DEBUG, ""LOG_TAG"", ""\n Native PCM Conf Success\n"");

} else{
    __android_log_print(ANDROID_LOG_DEBUG, ""LOG_TAG"", ""\n Native PCM Conf Error %d\n"",result);

}
</code></pre>

<p><strong>After adding preset configuration I'm getting system error when start recording the voice call :</strong> </p>

<blockquote>
  <p>E/AudioRecord: Could not get audio input for record source 7, sample
  rate 16000, format 0x1, channel mask 0x10, session 925, flags 0 </p>
  
  <p>E/libOpenSLES: android_audioRecorder_realize(0x559548c350) error
  creating AudioRecord object; status -22 </p>
  
  <p>W/libOpenSLES: Leaving Object::Realize (SL_RESULT_CONTENT_UNSUPPORTED)</p>
</blockquote>
",4491620,,5458344,,2018-07-17 15:20:51,2018-07-17 15:20:51,How to configure OpenSL to record voice call,<android><audio><android-ndk><opensl>,1,8,3,,
Android,45630903,1,,,,,,8/11/2017 8:52:48,,3,545,"<p>I have been trying to elevate an internal Demo App to Device Owner on my <strong>rooted</strong> S8 and keep having problems.</p>

<p>Ways I have tried:</p>

<p>1) <strong>NFC provisioning</strong> (as explained <a href=""https://github.com/googlesamples/android-NfcProvisioning"" rel=""nofollow noreferrer"">here</a> )</p>

<p>When using NFC with Android Bean to set the Device Owner the S8 shows a ""Cannot create working profile due to the security guidelines of your device""-error</p>

<p>2) <strong>Adb provisioning</strong> (from console):</p>

<p>When using </p>

<pre><code>dpm set-device-owner my/app/namespace/.DeviceAdmin
</code></pre>

<p>in a windows console I get the following error</p>

<pre><code>java.lang.SecurityException: Neither user 2000 nor current process has com.samsung.android.knox.permission.KNOX_PROXY_ADMIN_INTERNAL.,com.sec.enterprise.permission.MDM_PROXY_ADMIN_INTERNAL
        at android.os.Parcel.readException(Parcel.java:1693)
        at android.os.Parcel.readException(Parcel.java:1646)
        at android.app.admin.IDevicePolicyManager$Stub$Proxy.setActiveAdmin(IDevicePolicyManager.java:5825)
        at com.android.commands.dpm.Dpm.runSetDeviceOwner(Dpm.java:145)
        at com.android.commands.dpm.Dpm.onRun(Dpm.java:96)
        at com.android.internal.os.BaseCommand.run(BaseCommand.java:51)
        at com.android.commands.dpm.Dpm.main(Dpm.java:41)
        at com.android.internal.os.RuntimeInit.nativeFinishInit(Native Method)
        at com.android.internal.os.RuntimeInit.main(RuntimeInit.java:307)
</code></pre>

<p>Adding the missing permissions to my manifest did not change anything.</p>

<p>3) <strong>Create xml-file manually</strong> (as explained <a href=""https://stackoverflow.com/questions/21183328/how-to-make-my-app-a-device-owner/27909315#answer-26839548"">here</a> )</p>

<p>In this case I can create the xml in the right folder, but when I restart the phone the file gets deleted and my app is not registered as Device Owner</p>

<p>Are there any more ways I could try or does anyone know where the problem is? </p>
",3840288,,3840288,,2017-08-11 11:11:35,2017-10-12 11:10:20,Device Owner on rooted Galaxy S8,<android><device-admin><samsung-knox>,2,0,1,,
Android,45692889,1,,,,,,8/15/2017 12:31:52,,3,633,"<p>Following the <a href=""https://github.com/googlesamples/android-Camera2Basic"" rel=""nofollow noreferrer"">Camera 2</a> sample I've created simple camera class to capture the images. When it's okay with capturing both flash/non-flash images on any device with Android &lt; 7.0, on mine Nexus 5X with Android 7.1 the same config fire the flash only once on the preview. Pre-sequences are the next:</p>

<ul>
<li>for the preview I'm using <a href=""https://developer.android.com/reference/android/hardware/camera2/CameraDevice.html#TEMPLATE_PREVIEW"" rel=""nofollow noreferrer"">CameraDevice.TEMPLATE_PREVIEW</a> with AE mode set to <a href=""https://developer.android.com/reference/android/hardware/camera2/CameraMetadata.html#CONTROL_AE_MODE_ON_ALWAYS_FLASH"" rel=""nofollow noreferrer"">CameraMetadata.CONTROL_AE_MODE_ON_ALWAYS_FLASH</a></li>
<li>the same I use for the capture still picture, but with <a href=""https://developer.android.com/reference/android/hardware/camera2/CameraDevice.html#TEMPLATE_STILL_CAPTURE"" rel=""nofollow noreferrer"">CameraDevice.TEMPLATE_STILL_CAPTURE</a></li>
</ul>

<p>If someone can help me with this case - I'll be really appreciated.</p>
",4614669,,4614669,,2017-08-15 12:36:52,2017-10-12 17:14:20,Android Camera 2 API problems with flash on Nougat 7.1,<android><flash><android-camera><android-7.0-nougat><android-camera2>,1,0,,,
Android,46119375,1,,,,,,9/8/2017 14:59:39,,5,1251,"<p>I'm trying to add the new Architecture Components <code>ViewModel</code> to my application while injecting them with dagger. I based my code on what google showed <a href=""https://github.com/googlesamples/android-architecture-components/tree/master/GithubBrowserSample/app/src/main/java/com/android/example/github/di"" rel=""nofollow noreferrer"">here</a>. I'm trying to avoid having a <code>ViewModelFactory</code> for each <code>ViewModel</code> type, so I used the <code>ViewModelFactory</code> that receives <code>Map&lt;Class&lt;? extends ViewModel&gt;, Provider&lt;ViewModel&gt;&gt; creators</code>. It works for <code>ViewModels</code> that have dependencies with <code>@Singleton</code> scope. However, one of my <code>ViewModels</code> has a dependency that comes from the fragment. This is the module of that fragment:</p>

<pre><code>@Module
public abstract class DownloadIssueDialogFragmentModule {

    @Binds
    abstract DialogFragment dialogFragment(DownloadIssueDialogFragment dialogFragment);

    @Provides
    @FragmentScope
    static Issue provideIssue(DownloadIssueDialogFragment dialogFragment) {
        return dialogFragment.getIssue();
    }
}
</code></pre>

<p>And my <code>ViewModelModule</code>:</p>

<pre><code>@Module
public abstract class ViewModelModule {

    @Binds
    abstract ViewModelProvider.Factory bindViewModelFactory(ViewModelFactory factory);

    @Binds
    @IntoMap
    @ViewModelKey(DownloadIssueViewModel.class)
    abstract ViewModel bindDownloadIssueViewModel(DownloadIssueViewModel viewModel);

}
</code></pre>

<p>dagger says it can't provide <code>Issue</code>. It makes sense since <code>Map&lt;Class&lt;? extends ViewModel&gt;, Provider&lt;ViewModel&gt;&gt;</code> seems to be created at compile time. But I will only know the parameter during the scope of that fragment. How can I achieve this?</p>

<p>Thank you.</p>

<p><strong>EDIT:</strong></p>

<p>In the end I went with a different approach. Now I create a factory for each ViewModel and instead of injecting ViewModels, I inject the factory.</p>

<p>I created this library: <a href=""https://github.com/kakai248/AutoViewModelFactory"" rel=""nofollow noreferrer"">AutoViewModelFactory</a></p>

<p>To automatically generate the factories. It's the best solution I've found so far.</p>
",2283624,,2283624,,2017-09-21 11:38:15,2017-09-21 11:38:15,Architecture Components ViewModels inject with dagger with params that come from the Activity/Fragment,<android><mvvm><dagger-2><dagger><android-architecture-components>,1,2,4,,
Android,46134466,1,,,,,,9/9/2017 19:40:21,,1,105,"<p>I am working on android in purchase project. I used <a href=""https://github.com/googlesamples/android-play-billing/"" rel=""nofollow noreferrer"">this</a> sample code as reference.</p>

<p>But when execute in app purchase it return null point exception.</p>

<p>This is my code.</p>

<p>launchPurchaseFlow</p>

<pre><code> mHelper.launchPurchaseFlow(this, SKU_GAS, 10001,
   mPurchaseFinishedListener, ""bGoa+V7g/yqDXvKRqq+JTFn4uQZbPiQJo4pf9RzJ"");
</code></pre>

<p>PurchaseFinish Listener</p>

<pre><code> IabHelper.OnIabPurchaseFinishedListener mPurchaseFinishedListener
            = new IabHelper.OnIabPurchaseFinishedListener() {
        public void onIabPurchaseFinished(IabResult result, Purchase purchase)
        {
            if (result.isFailure()) {
                Log.d(TAG, ""Error purchasing: "" + result);


            }

            Log.d(TAG, ""Error purchasing END""+purchase.getSku());
}
</code></pre>

<p>Error shows following line in above code</p>

<pre><code>Log.d(TAG, ""Error purchasing END""+purchase.getSku());
</code></pre>

<p>I added this for testing and identify <code>sku</code>. But <code>purchase</code> object also null in here.</p>

<p>Error</p>

<blockquote>
  <p>.util.Purchase.getSku()' on a null object reference</p>
</blockquote>
",5051423,,5051423,,2017-09-09 19:47:21,2017-09-09 21:21:08,Android In-app purchase NullPointerException Purchase.getSku(),<java><android><in-app-purchase><in-app-billing>,1,1,,,
Android,46268768,1,,,,,,9/17/2017 20:51:13,,11,3161,"<p>The problem is quite straightforward. The question is in context of using ViewModels, LiveData and other related <a href=""https://developer.android.com/reference/android/arch/lifecycle/package-summary.html"" rel=""noreferrer"">Lifecycle</a> aware arch approaches.
<br/>I have an Activity with NavDrawer, which switches fragments inside. <br>And also I have a case when two fragments are present at the same time on the screen - this will be the main pain.
One Fragment has a ViewPager with nested <code>Fragments</code>(<strong>don't ask why</strong>).
The other fragment is just obtaining info from first one when user performs some actions. This is achieved just by sharing activity viewmodel. But the app itself has a lot of business logic and as it goes further the viewmodel goes bigger and bigger.
<br/> What I want to ask - not a receipt or rules how to fix this, or maybe how to overcome this by fixing the entire structure of the project. I want to ask for suggestions how can I apply the MVVM approach within android.arch.lifecycle style to mine use-case.
<br> I haven't seen something more complicated then just sharing the Activity ViewModel between Fragments. But common, that's not a cure.
<a href=""https://i.stack.imgur.com/kASaU.jpg"" rel=""noreferrer""><img src=""https://i.stack.imgur.com/kASaU.jpg"" alt=""enter image description here""></a></p>

<p>What you can see here - a mess actually. The point is that all are sharing the <code>ActivityViewModel</code>. Connections(aggregation) from FirstFragment mean that <code>ViewPager</code> inside <code>FirstFragment</code> is initiating <code>ChildFragments</code> and they are also working with the same <code>ActivityViewModel</code>(kill me). So as result everyone is working with one shared ViewModel. 
<br> My proposal is to add a ViewModel for each Layer. So that Activity/Fragments/ChildFragments have their own ViewModels.
But what appears here - <strong><em>how we should communicate then</em></strong>?
<br> Possible solutions :</p>

<ul>
<li>Having two ViewModels per one component. One ViewModel will handle/delegate the business logic and another will make the communication. <strong>Two viewmodels per component - not so good, yeah?</strong></li>
<li>Having old manner interface(<strong>please no!</strong>)</li>
<li><p>Other workarounds - like DB/SharedPrefs/Realm change listeners and Event Buses(<strong>I'm too old for this :(</strong> ).</p></li>
<li><p><strong>Your solution here!</strong></p></li>
</ul>

<p>I'll say that all of the above are breaking a lot of design principles, so what should I do?
How should I come out of this mess? Is there any <code>Uncle Bob</code> or another <code>superhero</code> here to help?</p>

<p><strong>P.S.</strong> - Well, creating UMLs or other charts isn't mine forte. Sorry for that. 
<br><strong>P.P.S.</strong> - I'm aware of <a href=""https://github.com/googlesamples/android-architecture-components"" rel=""noreferrer"">google</a> <a href=""https://github.com/googlesamples/android-architecture"" rel=""noreferrer"">samples</a>.</p>
",3874721,,4604751,,2017-09-18 8:54:19,2018-10-10 4:52:24,ViewModel for Fragment instead accessing Activity ViewModel?,<android><android-fragments><mvvm><kotlin><android-architecture-components>,2,5,8,,
Android,46273499,1,,,,,,9/18/2017 7:09:32,,1,585,"<p>I am using the Raspberry Pi 3 model B as a bluetooth peripheral. 
The Pi is running a GATT server and advertising it as well.</p>

<p>I can connect to it from the LightBlue iOS app and can read and write values.</p>

<p>I am having trouble connecting to the Pi over BLE from an Android App.
I have tried using 2 apps from the play store - BLE Scanner and Bluetooth LE Scanner.
BluetoothLeGatt is another app I have tried using. It is available as an example BLE project on Android Studio. The pi appears in the scan results and once I press connect, the app tries to connect but is possibly refused connection by the pi. The program control goes to the GattCallback function with the state changed to 'disconnected' and the service discovery never happens.
The logs look like this:</p>

<pre><code>D/BluetoothGatt: connect() - device: B8:27:EB:A4:E7:75, auto: false
D/BluetoothGatt: registerApp()
D/BluetoothGatt: registerApp() - UUID=0c46767a-1ddc-4d91-83fe-490f9d3a5ad7
D/BluetoothGatt: onClientRegistered() - status=0 clientIf=6
D/BluetoothLeService: Trying to create a new connection.
D/BluetoothGatt: onClientConnectionState() - status=133 clientIf=6 device=B8:27:EB:A4:E7:75
I/BluetoothLeService: Disconnected from GATT server.
</code></pre>

<p>The same app is able to connect to a virtual peripheral simulated using the LightBlue iOS app or the DropBeacon iOS app.</p>

<p>This makes me think, some configuration on the pi is preventing it from accepting a connection from Android.</p>

<p>src code: <a href=""https://github.com/googlesamples/android-BluetoothLeGatt"" rel=""nofollow noreferrer"">https://github.com/googlesamples/android-BluetoothLeGatt</a></p>

<p>Any suggestion to make this work?
Thanks</p>
",5473324,,5473324,,2017-09-18 7:30:51,2017-12-14 11:48:21,Trouble Connecting Android App to Raspberry Pi 3 over BLE,<android><bluetooth><bluetooth-lowenergy><raspberry-pi3><android-ble>,1,0,,,
Android,46275819,1,,,,,,9/18/2017 9:23:28,,2,283,"<p>im very confused with NDK and with OpenSL 
Im trying to add OpenSL to my project. And have some problems. When i create ndk project- i dont have file Android.mk
but i have CMakeList</p>

<p>in tutorials everywhere talks about android.mk where need write one string for implement OpenSL to project.</p>

<p>here my build.graddle(module) file</p>

<pre><code>android {
    compileSdkVersion 26
    buildToolsVersion ""26.0.1""

    defaultConfig {
        minSdkVersion 15
        targetSdkVersion 26
        versionCode 1
        versionName ""1.0""
    }
    buildTypes {
        release {
            minifyEnabled false
            proguardFiles getDefaultProguardFile('proguard-android.txt'), 'proguard-rules.pro'
        }
    }
    externalNativeBuild {
        cmake {
            path 'CMakeLists.txt'
        }
    }

    sourceSets {
        main {
            jniLibs.srcDirs 'imported-lib/src/', 'more-imported-libs/src/'
        }
    }
}

dependencies {
    compile fileTree(dir: 'libs', include: ['*.jar'])
    compile 'com.android.support:appcompat-v7:26.+'
}
</code></pre>

<p>CMakeList.txt</p>

<pre><code>cmake_minimum_required(VERSION 3.4.1)
add_library( # Specifies the name of the library.
             native-lib

             # Sets the library as a shared library.
             SHARED

             # Provides a relative path to your source file(s).
             src/main/cpp/native-lib.cpp )

             # Specifies a path to native header files.
             include_directories(src/main/cpp/include/)

             # Include libraries needed for native-audio-jni lib
             target_link_libraries(native-audio-jni
                                   android
                                   log
                                   OpenSLES)
</code></pre>

<p>and a simple test for ndk </p>

<pre><code>#include &lt;jni.h&gt;
#include &lt;string&gt;

extern ""C""
JNIEXPORT jstring JNICALL
Java_ndk_test_stringFromJNI(
        JNIEnv *env,
        jobject /* this */) {
    std::string hello = ""Hello from C++"";
    return env-&gt;NewStringUTF(hello.c_str());
}
</code></pre>

<p>calling function stringFromJNI is ok i see this line in logs. 
But main question what im doing wrong. How to implement OpenSL without Android.mk</p>

<p>In google.devandroid section its tell 
add <code>LOCAL_LDLIBS += -lOpenSLES</code> to Android.mk
in every tutorial all tells about android.mk. But i dont have this file. Can any help me ? 
in example of goo<a href=""https://github.com/googlesamples/android-ndk/tree/master/native-audio/app/src/main/cpp"" rel=""nofollow noreferrer"">link to example</a></p>
",562592,,,,,2017-09-29 13:23:26,Add OpenSL to android,<java><android><android-ndk><opensl>,1,2,1,,
Android,46294833,1,,,,,,9/19/2017 7:48:48,,7,6415,"<p>The notification channels which introduced from Android O (API 26) version.I read about it from the following links:</p>

<ul>
<li><a href=""https://developer.android.com/guide/topics/ui/notifiers/notifications.html#ManageChannels"" rel=""noreferrer"">Managing notification channels</a></li>
<li><a href=""https://github.com/googlesamples/android-NotificationChannels/blob/master/Application/src/main/java/com/example/android/notificationchannels/NotificationHelper.java"" rel=""noreferrer"">Google Sample for Creating Channel</a></li>
</ul>

<p><strong>Questions:</strong> </p>

<ol>
<li><p>If I have multiple numbers of notification then Is it a good idea to create notification channels when the application starts and keep it at <code>ApplicationScope</code>?</p>

<pre><code>public void addNotificationChannels(Context context) {

    List&lt;NotificationChannel&gt; channels = new ArrayList&lt;&gt;();
    channels.add(""channel_1"");
    channels.add(""channel_2"");
    .
    .
    channels.add(""channel_7"");

    NotificationManager notificationManager =
        (NotificationManager) context.getSystemService(Context.NOTIFICATION_SERVICE);
    notificationManager.createNotificationChannels(channels);

}
</code></pre></li>
<li><p>What will happen if I try to execute this line <code>new Notification.Builder(getApplicationContext(), PRIMARY_CHANNEL)</code> before adding channels to the notification manager</p></li>
</ol>
",1004437,,4166923,,2017-10-31 19:50:41,2018-06-01 19:05:17,Correct way to create Notification Channels from Android O Api,<android><android-notifications><android-8.0-oreo><notification-channel>,3,0,1,,
Android,46317509,1,,,,,,9/20/2017 8:53:55,,1,1033,"<p>I'm using the EmojiCompat support library to have emoji in my app, and I would like to have those emojis directly in the <code>strings.xml</code> file (ex: <code>&lt;string name=""string_name""&gt;Some text \uD83E\uDD96&lt;/string&gt;</code>)</p>

<p>This works well for devices API>23 but otherwise it crash</p>

<pre><code>A/art: art/runtime/check_jni.cc:65] JNI DETECTED ERROR IN APPLICATION: input is not valid Modified UTF-8: illegal start byte 0xf0
A/art: art/runtime/check_jni.cc:65]     string: 'Some text ðŸ¦–'
A/art: art/runtime/check_jni.cc:65]     in call to NewStringUTF
A/art: art/runtime/check_jni.cc:65]     from java.lang.String android.content.res.StringBlock.nativeGetString(long, int)
</code></pre>

<p>The only solution I have found is to get the emoji code in a java variable and put it at the end of my string (like the <a href=""https://github.com/googlesamples/android-EmojiCompat/blob/master/app/src/main/java/com/example/android/emojicompat/MainActivity.java"" rel=""nofollow noreferrer"">google sample</a>) and it works on every version supported.</p>

<p>But I really want to put emoji code in the strings files and be able to do something like this :</p>

<pre><code>emojiTextView.setText(getText(R.string.string_name));
</code></pre>

<p>Does anyone know how to achieve this ?</p>
",2050982,,2050982,,2018-02-27 17:55:49,2018-08-29 5:52:32,Use emoji in strings.xml with EmojiCompat support library,<android><emoji>,3,0,,,
Android,46465056,1,,,,,,9/28/2017 8:58:31,,6,8033,"<p>I am using Android Support Library 26.1.0. These are the dependencies in app module - </p>

<pre><code>implementation ""android.arch.lifecycle:runtime:1.0.0""
implementation ""android.arch.lifecycle:extensions:1.0.0-beta1""
implementation ""android.arch.persistence.room:rxjava2:1.0.0-beta1""
implementation ""android.arch.lifecycle:common-java8:1.0.0-beta1""
annotationProcessor ""android.arch.lifecycle:compiler:1.0.0-beta1""
</code></pre>

<p>But when I am trying to use ViewModel like below - </p>

<pre><code>mUserViewModel.getUsers().observe(this,
            (Observer&lt;Resource&lt;List&lt;UserView&gt;&gt;&gt;) listResource -&gt; {
                if(listResource != null){
                    this.handleDataState(listResource.status, listResource.data, listResource.message);
                }
            });
</code></pre>

<p>It is showing error at <code>this</code> and the error message is <code>Wrong first argument type Found: packagename.BrowseActivity, required: android.arch.lifecycle.LifecycleOwner</code>. (Although support library version is 26.1+ which already implements LifecycleOwner)</p>

<p>I have also tried to implement <code>LifecycleRegistryOwner</code> which I found in this <a href=""https://github.com/googlesamples/android-architecture-components/blob/master/GithubBrowserSample/app/src/main/java/com/android/example/github/MainActivity.java"" rel=""noreferrer"">sample</a> and this is also not working. Kindly suggest a solution and let me know if I am doing anything wrong.</p>

<p><strong>Edit 1</strong> - 
This is Activity class</p>

<pre><code>import android.arch.lifecycle.Observer;
import android.arch.lifecycle.ViewModelProviders;
import android.os.Bundle;
import android.support.v7.app.AppCompatActivity;
import android.support.v7.widget.LinearLayoutManager;
import android.support.v7.widget.RecyclerView;
import android.view.View;
import android.widget.ProgressBar;

import com.github.amitkma.boilerplate.app.R;
import com.github.amitkma.boilerplate.app.mapper.UserMapper;
import com.github.amitkma.boilerplate.app.model.UserModel;
import com.github.amitkma.boilerplate.app.ui.widget.EmptyView;
import com.github.amitkma.boilerplate.app.ui.widget.ErrorView;
import com.github.amitkma.boilerplate.presentation.data.Resource;
import com.github.amitkma.boilerplate.presentation.data.ResourceState;
import com.github.amitkma.boilerplate.presentation.factory.ViewModelFactory;
import com.github.amitkma.boilerplate.presentation.viewmodel.UserViewModel;
import com.github.amitkma.boilerplate.presentation.vo.UserView;

import java.util.ArrayList;
import java.util.List;

import javax.inject.Inject;

import dagger.android.AndroidInjection;

public class BrowseActivity extends AppCompatActivity {

    @Inject
    UserAdapter mUserAdapter;
    @Inject
    UserMapper mUserMapper;
    @Inject
    ViewModelFactory mViewModelFactory;
    private UserViewModel mUserViewModel;

    private RecyclerView mRecyclerView;
    private ProgressBar mProgressBar;
    private ErrorView mErrorView;
    private EmptyView mEmptyView;


   @Override
   protected void onCreate(Bundle savedInstanceState) {
       super.onCreate(savedInstanceState);
       AndroidInjection.inject(this);
       setContentView(R.layout.activity_browse);
       mUserViewModel = ViewModelProviders.of(this, mViewModelFactory)
            .get(UserViewModel.class);

       mRecyclerView = findViewById(R.id.recycler_browse);
       mProgressBar = findViewById(R.id.progress);
       mEmptyView = findViewById(R.id.view_empty);
       mErrorView = findViewById(R.id.view_error);

       setupBrowseRecycler();
       setupViewListeners();
   }

    @Override
    protected void onStart() {
        super.onStart();
        mUserViewModel.getUsers().observe(this,
            (Observer&lt;Resource&lt;List&lt;UserView&gt;&gt;&gt;) listResource -&gt; {
                if(listResource != null){
                    this.handleDataState(listResource.status, listResource.data, listResource.message);
                }
            });
    }
    ....
}
</code></pre>

<p>This is ViewModel Class</p>

<pre><code>import android.arch.lifecycle.LiveData;
import android.arch.lifecycle.MutableLiveData;
import android.arch.lifecycle.ViewModel;

import com.github.amitkma.boilerplate.domain.interactor.GetUserList;
import com.github.amitkma.boilerplate.domain.model.User;
import com.github.amitkma.boilerplate.presentation.data.Resource;
import com.github.amitkma.boilerplate.presentation.data.ResourceState;
import com.github.amitkma.boilerplate.presentation.mapper.UserMapper;
import com.github.amitkma.boilerplate.presentation.vo.UserView;

import java.util.ArrayList;
import java.util.List;

import javax.inject.Inject;

import io.reactivex.subscribers.DisposableSubscriber;

public class UserViewModel extends ViewModel {

    private final GetUserList mGetUserList;
    private final UserMapper mUserMapper;

    @Inject
    public UserViewModel(GetUserList getUserList,
            UserMapper userMapper) {
        mGetUserList = getUserList;
        mUserMapper = userMapper;
        fetchUsers();
    }

    public void fetchUsers(){
        mUserMutableLiveData.postValue(new Resource(ResourceState.LOADING, null, null));
        mGetUserList.execute(new UserSubscriber(), null);
    }

    public LiveData&lt;Resource&lt;List&lt;UserView&gt;&gt;&gt; getUsers(){
        return mUserMutableLiveData;
    }

    @Override
    protected void onCleared() {
        mGetUserList.dispose();
        super.onCleared();
    }

    private final MutableLiveData&lt;Resource&lt;List&lt;UserView&gt;&gt;&gt; mUserMutableLiveData =
        new MutableLiveData&lt;&gt;();
</code></pre>

<p>}</p>
",4440076,,4440076,,2017-09-28 9:27:01,2019-04-14 19:41:26,AppCompatActivity not implementing LifecycleOwner,<java><android><android-architecture-components><android-architecture-lifecycle>,2,7,,,
Android,46533989,1,,,,,,10/2/2017 21:29:03,,4,497,"<p>Related to this question: <a href=""https://stackoverflow.com/questions/46513349/espresso-dagger2-set-viemodelprovider-factory-on-baseactivity"">Espresso, Dagger2 set ViemodelProvider.Factory on BaseActivity</a></p>

<p>I went through hell and back to get a ViewModelFactory.Provider on an Activity during my tests, in order to get espresso tests working regarding Android Architecture Components. I expected it to be simple, but I guess it's not...    </p>

<p>The example to get it working with fragments is straightforward:<br>
<a href=""https://github.com/googlesamples/android-architecture-components/blob/master/GithubBrowserSample/app/src/androidTest/java/com/android/example/github/ui/user/UserFragmentTest.java"" rel=""nofollow noreferrer"">https://github.com/googlesamples/android-architecture-components/blob/master/GithubBrowserSample/app/src/androidTest/java/com/android/example/github/ui/user/UserFragmentTest.java</a></p>

<pre><code>@Before
public void init() {
    UserFragment fragment = UserFragment.create(""foo"");
    viewModel = mock(UserViewModel.class);
    when(viewModel.getUser()).thenReturn(userData);
    when(viewModel.getRepositories()).thenReturn(repoListData);
    navigationController = mock(NavigationController.class);
    fragmentBindingAdapters = mock(FragmentBindingAdapters.class);

    fragment.viewModelFactory = ViewModelUtil.createFor(viewModel);
    fragment.navigationController = navigationController;
    fragment.dataBindingComponent = () -&gt; fragmentBindingAdapters;

    activityRule.getActivity().setFragment(fragment);
}
</code></pre>

<p>However, this simply won't work with activities as I can't get the dependencies on the activity before its creation using an <code>ActivityTestRule</code>.<br>
I followed the same new dependency injection flow with Dagger2 as in the example above using the <code>HasActivityInjector</code> interface.  </p>

<p>I would appreciate your help! </p>
",917467,,,,,2017-11-13 10:14:15,Inject ViewModelFactory.Provider in activity for espresso testing,<android><dagger-2>,1,0,1,,
Android,46543877,1,,,,,,10/3/2017 11:47:54,,1,67,"<p>I want to play 5 songs together without any miss sync. I've taken reference from the below link with use of NDK:
<a href=""https://github.com/googlesamples/android-ndk"" rel=""nofollow noreferrer"">https://github.com/googlesamples/android-ndk</a></p>

<p>I'm creating 5 instance for player and playing songs but on some devices songs are not played in sync when I just fire a play.</p>

<p>I would like to know what is the best way to achieve this so I can play multiple songs in sync.</p>

<p>Let me inform you the device having good configuration like 2gb+ RAM will play sounds in perfectly But in device having RAM of 1GB will not work always.</p>

<p>I've tried with MediaPlayer and Soundpool but not helps me. NDK implementation is far better.</p>

<p>Looking for best work around for this...</p>

<p>Thanks in advance</p>
",4007027,,-1,,2019-04-09 19:36:06,2017-10-03 11:57:55,How to play multiple songs together in sync?,<android><audio><android-ndk><audio-player><opensl><android-music-player>,1,0,,,
Android,46567945,1,,,,,,10/4/2017 14:51:52,,4,572,"<blockquote>
  <p><strong>TL;DR:</strong> I have successfully created and coupled (via a subscription) an activity to a media browser service. This media browser service can continue running and play music in the background. I'd like to be able to refresh the content at some stage, either when the app comes to the foreground again or during a SwipeRefreshLayout event.</p>
</blockquote>

<p>I have the following functionality I'd like to implement:</p>

<ol>
<li>Start a MediaBrowserServiceCompat service.</li>
<li>From an activity, connect to and subscribe to the media browser service.</li>
<li>Allow the service to continue running and playing music while the app is closed.</li>
<li><strong>At a later stage, or on a SwipeRefreshLayout event, reconnect and subscribe to the service to get fresh content.</strong></li>
</ol>

<p>The issue I am receiving is that within a MediaBrowserService (after a subscription has been created) you can only call sendResult() once from the onLoadChildren() method, so the next time you try to subscribe to the media browser service using the same root, you get the following exception when sendResult() is called for the second time:</p>

<pre><code>E/UncaughtException: java.lang.IllegalStateException: sendResult() called when either sendResult() or sendError() had already been called for: MEDIA_ID_ROOT
                                                    at android.support.v4.media.MediaBrowserServiceCompat$Result.sendResult(MediaBrowserServiceCompat.java:602)
                                                    at com.roostermornings.android.service.MediaService.loadChildrenImpl(MediaService.kt:422)
                                                    at com.roostermornings.android.service.MediaService.access$loadChildrenImpl(MediaService.kt:50)
                                                    at com.roostermornings.android.service.MediaService$onLoadChildren$1$onSyncFinished$playerEventListener$1.onPlayerStateChanged(MediaService.kt:376)
                                                    at com.google.android.exoplayer2.ExoPlayerImpl.handleEvent(ExoPlayerImpl.java:422)
                                                    at com.google.android.exoplayer2.ExoPlayerImpl$1.handleMessage(ExoPlayerImpl.java:103)
                                                    at android.os.Handler.dispatchMessage(Handler.java:102)
                                                    at android.os.Looper.loop(Looper.java:150)
                                                    at android.app.ActivityThread.main(ActivityThread.java:5665)
                                                    at java.lang.reflect.Method.invoke(Native Method)
                                                    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:822)
                                                    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:712)
</code></pre>

<p>I call the following methods to connect to and disconnect from the media browser (again, everything runs smoothly on first connection, but on the second connection I'm not sure how to refresh the content via a subscription):</p>

<pre><code>override fun onStart() {
        super.onStart()

        mMediaBrowser = MediaBrowserCompat(this, ComponentName(this, MediaService::class.java), connectionCallback, null)

        if (!mMediaBrowser.isConnected)
            mMediaBrowser.connect()
}

override fun onPause() {
        super.onPause()

        //Unsubscribe and unregister MediaControllerCompat callbacks
        MediaControllerCompat.getMediaController(this@DiscoverFragmentActivity)?.unregisterCallback(mediaControllerCallback)
        if (mMediaBrowser.isConnected) {
            mMediaBrowser.unsubscribe(mMediaBrowser.root, subscriptionCallback)
            mMediaBrowser.disconnect()
        }
}
</code></pre>

<p>I unsubscribe and disconnect in onPause() instead of onDestroy() so that the subscription is recreated even if the activity is kept on the back-stack.</p>

<p><strong>Actual method used for swipe refresh, in activity and service respectively:</strong></p>

<p>Activity</p>

<pre><code>if (mMediaBrowser.isConnected)
        mMediaController?.sendCommand(MediaService.Companion.CustomCommand.REFRESH.toString(), null, null)
</code></pre>

<p>Service</p>

<pre><code>inner class MediaPlaybackPreparer : MediaSessionConnector.PlaybackPreparer {

    ...

    override fun onCommand(command: String?, extras: Bundle?, cb: ResultReceiver?) {
        when(command) {
            // Refresh media browser content and send result to subscribers
            CustomCommand.REFRESH.toString() -&gt; {
                notifyChildrenChanged(MEDIA_ID_ROOT)
            }
        }
    }}
</code></pre>

<p><strong>Other research:</strong></p>

<p>I have referred to the Google Samples code on Github, as well as...</p>

<ul>
<li><a href=""https://github.com/googlesamples/android-MediaBrowserService"" rel=""nofollow noreferrer"">https://github.com/googlesamples/android-MediaBrowserService</a></li>
<li><a href=""https://github.com/moondroid/UniversalMusicPlayer"" rel=""nofollow noreferrer"">https://github.com/moondroid/UniversalMusicPlayer</a></li>
</ul>

<p>Neither of the above repos seem to handle the issue of <strong>refreshing</strong> content after the media browser service has been created and the activity has subscribed at least once - I'd like to avoid restarting the service so that the music can continue playing in the background.</p>

<p><strong>Possible related issues:</strong></p>

<ul>
<li><a href=""https://stackoverflow.com/questions/43169875/mediabrowser-subscribe-doesnt-work-after-i-get-back-to-activity-1-from-activity"">MediaBrowser.subscribe doesn&#39;t work after I get back to activity 1 from activity 2 (6.0.1 Android)</a> --no effect on current issue</li>
</ul>
",2351499,,2351499,,2018-03-27 12:22:38,2018-03-27 12:22:38,Refreshing MediaBrowserService subcription content,<android><kotlin><android-mediasession><mediabrowserservice><mediabrowserservicecompat>,1,3,,,
Android,46601474,1,,,,,,10/6/2017 8:26:41,,2,429,"<p>I tried to follow the example of the google(<a href=""https://github.com/googlesamples/android-architecture-components/blob/master/GithubBrowserSample/app/src/main/java/com/android/example/github/di/ViewModelModule.java"" rel=""nofollow noreferrer"">ViewModelModule</a>). And I saw it can bind to different ViewModel type to the generic one.</p>

<pre><code>@Module
abstract class ViewModelModule {
    @Binds
    @IntoMap
    @ViewModelKey(UserViewModel.class)
    abstract ViewModel bindUserViewModel(UserViewModel userViewModel);

    @Binds
    @IntoMap
    @ViewModelKey(SearchViewModel.class)
    abstract ViewModel bindSearchViewModel(SearchViewModel searchViewModel);

    @Binds
    @IntoMap
    @ViewModelKey(RepoViewModel.class)
    abstract ViewModel bindRepoViewModel(RepoViewModel repoViewModel);

    @Binds
    abstract ViewModelProvider.Factory bindViewModelFactory(GithubViewModelFactory factory);
}
</code></pre>

<p>What I want to do is to bind multi ViewModelProvider.Factory to the generic one.</p>

<pre><code>@Module
abstract class ViewModelModule {


  @Binds
  @IntoMap
  @ViewModelFactoryKey(FeedEntryListViewModelFactory.class)
  abstract ViewModelProvider.Factory bindViewModelFactory(FeedEntryListViewModelFactory factory);

}
</code></pre>

<p>ViewModelFactoryKey.java</p>

<pre><code>@Documented
@Target({ElementType.METHOD})
@Retention(RetentionPolicy.RUNTIME)
@MapKey
@interface ViewModelFactoryKey {
  Class&lt;? extends ViewModelProvider.Factory &gt; value();
}
</code></pre>

<p>FeedActivity.java</p>

<pre><code>public class FeedActivity extends DaggerAppCompatActivity {


  @Inject
  ViewModelProvider.Factory viewModelFactory;

  FeedEntryListViewModel viewModel;


  @SuppressLint(""StaticFieldLeak"")
  @Override
  protected void onCreate(Bundle savedInstanceState) {
    ...
  }
}
</code></pre>

<p>However, it throws the following error.</p>

<pre><code>Error:(21, 8) error: [dagger.android.AndroidInjector.inject(T)] android.arch.lifecycle.ViewModelProvider.Factory cannot be provided without an @Provides- or @Produces-annotated method.
android.arch.lifecycle.ViewModelProvider.Factory is injected at
com.cn29.aac.ui.feedentry.FeedActivity.viewModelFactory
com.cn29.aac.ui.feedentry.FeedActivity is injected at
dagger.android.AndroidInjector.inject(arg0)
</code></pre>

<p>I am new to Dagger2. If it is not used properly, please feel free to comment. Thank you.</p>
",2877822,,1083957,,2017-10-06 10:36:41,2017-10-06 10:36:41,How to bind into map with multi ViewModelFactory using Dagger2,<java><android><dagger-2><dagger.android><android-architecture-components>,1,2,,,
Android,46666474,1,,,,,,10/10/2017 12:12:05,,7,1804,"<p>I am currently working on an exiting Android application in order to create an Instant apps version.</p>

<p>My Android Studio is now split into several modules :</p>

<ul>
<li>the business object module (which is a library)</li>
<li>the base -feature- module</li>
<li>the moduleA -feature- module</li>
<li>the app module (which is a phone/tablet module)</li>
<li>the instant module (which is an instant apps module)</li>
</ul>

<p>My instant app module can be compiled and launched on a phone/tablet but each time it crashes due to Firebase issues. I have the following message into the logcat :</p>

<blockquote>
  <p>I/FirebaseInitProvider: FirebaseApp initialization unsuccessful</p>
</blockquote>

<p>According to the <a href=""https://developer.android.com/topic/instant-apps/guides/analytics.html"" rel=""noreferrer"">documentation</a> the Firebase library is compatible with Instant Apps, but I am pretty sure that I do not move the google-services.json file into the right place in my project...</p>

<p>Here what I have done :</p>

<ol>
<li><p>I defined the following classpath dependencies into the build.gradle file of the Android Studio project : classpath 'com.google.gms:google-services:3.1.1'</p></li>
<li><p>I put the google-services.json file into my module base (because the documentation asks for it)</p></li>
</ol>

<p>Now, if I try to apply the plugin (apply plugin: 'com.google.gms.google-services') into the build.gradle file of the base module, I cannot compile. I have the following message :</p>

<blockquote>
  <p>Error:Execution failed for task ':base:processGooglePlayProductionDebugFeatureGoogleServices'.</p>
  
  <p>> No matching client found for package name 'com.mycompany.myapp.base'</p>
</blockquote>

<p>In fact, the package name defined into the google-services.json file is the one use by the app (because according to the <a href=""https://codelabs.developers.google.com/codelabs/android-instant-apps/#4"" rel=""noreferrer"">documentation</a> the base library cannot have the same package name as the installed android app.</p>

<p>I also tried to apply the plugin into the build.gradle files of the installed app and into the instant apps module leaving the google-services.json file into the base module. The app compile but I have the log : ""FirebaseApp initialization unsuccessful"".</p>

<p>So I tried moving the google-services.json file into my instant app module but I still have the log : ""FirebaseApp initialization unsuccessful""</p>

<p>I also tried to force the initialization calling the static method initializeApp from the FirebaseApp class but the log persists.</p>

<p>I cannot find an example of implementation on the web. In fact, the <a href=""https://github.com/googlesamples/android-instant-apps"" rel=""noreferrer"">Google Sample repository</a> does not use a google-services.json file.</p>

<p>Thank you in advance for your help !</p>

<p><strong>Edit :</strong> Here the dependencies of my modules :</p>

<p>The dependencies of my base -feature- module :</p>

<pre><code>  implementation project(':businessobject')
  feature project(':moduleA')
  application project(':app')
</code></pre>

<p>The dependencies of my moduleA -feature- module :</p>

<pre><code>api project(':base')
api project(':businessobject')
</code></pre>

<p>The dependencies of my app module (which is a phone/tablet module) :</p>

<pre><code>implementation (project(':base'))
implementation (project(':businessobject'))
implementation (project(':moduleA'))
</code></pre>

<p>The dependencies of my instant module (which is an instant apps module) :</p>

<pre><code>implementation project(':base')
implementation project(':businessobject')
implementation project(':moduleA')
</code></pre>
",2762990,,2762990,,2017-10-10 15:38:26,2018-02-22 7:35:40,FirebaseApp initialization unsuccessful in Android Instant apps,<android><firebase><android-instant-apps><google-play-services>,1,3,3,,
Android,46696170,1,,,,,,10/11/2017 19:34:34,,3,2594,"<p>Looking through the samples I seen 2 approaches to MVVM using Android Architecture Components.</p>

<p>First  approach:</p>

<ol>
<li><code>ViewModel</code> provides <code>LiveData</code></li>
<li><code>Activity</code> subscribes to <code>LiveData</code></li>
<li>When observer called <code>Activity</code> is setting data to <code>ViewModel</code> <code>ObservableField</code>.</li>
<li>Whole <code>ViewModel</code> is passed to binding.</li>
<li><p>In <code>xml</code> you just set <code>ObservableField</code> as value</p>

<pre><code>&lt;ProgressBar
    android:layout_width=""wrap_content""
    android:layout_height=""wrap_content""
    android:layout_gravity=""center""
    app:visibleGone=""@{viewmodel.listLoading}""/&gt;

&lt;android.support.v4.widget.SwipeRefreshLayout
    android:id=""@+id/swiperefresh""
    android:layout_width=""match_parent""
    android:layout_height=""match_parent""
    app:refreshing=""@{viewmodel.listRefreshing}""
    app:onRefreshListener=""@{() -&gt; viewmodel.refreshList()}""
    app:visibleGone=""@{!viewmodel.listLoading}""&gt;
</code></pre></li>
</ol>

<p><strong>Pros:</strong> I don't need to pass state (for example ""loading""), as I update <code>listLoading</code> <code>ObservableField</code> in <code>ViewModel</code> as this:</p>

<pre><code>val listLoading = ObservableBoolean(false)
/** other observable fields go here **/

val list: MutableLiveData&lt;List&lt;Item&gt;&gt; = MutableLiveData()

  fun loadList() {
        listLoading.set(true)
        repo.getList { items -&gt;
            list.value = items
            listLoading.set(false)
        }
    }
</code></pre>

<p><strong>Cons:</strong> Are there any cons in this approach?</p>

<p>Second approach:</p>

<ol>
<li><code>ViewModel</code> provides <code>LiveData</code></li>
<li><code>Activity</code> subscribes to <code>LiveData</code></li>
<li>When observer called <code>Activity</code> is passed to binding</li>
<li>Only needed object (pojo) is passed to binding</li>
</ol>

<p><strong>Pros:</strong> Any pros of this approach?</p>

<p><strong>Cons:</strong> State should be returned from <code>ViewModel</code>. In this <a href=""https://github.com/googlesamples/android-architecture-components/tree/master/GithubBrowserSample"" rel=""nofollow noreferrer"">sample from Google</a> data is wrapped in <code>Resource</code> object.</p>

<p>First approach is used in <a href=""https://github.com/googlesamples/android-architecture/tree/dev-todo-mvvm-live-kotlin/"" rel=""nofollow noreferrer"">another sample app from Google</a></p>

<p>I would like to know what are pros and cons of both patterns from developers with more experience working with Android Data Binding and Android Arch Components.</p>
",4260554,,4260554,,2017-10-11 20:59:14,2017-10-11 21:29:27,Best practices and patterns in ViewModel + Data Binding. Is ObservableField in ViewModel OK?,<android><design-patterns><android-databinding><android-architecture-components><android-mvvm>,1,1,2,,
Android,46774604,1,,,,,,10/16/2017 16:09:32,,1,108,"<p>In android many image loading libraries (like <a href=""http://square.github.io/picasso/2.x/picasso/"" rel=""nofollow noreferrer"">Picasso</a> -- which uses 2% of the storage for disk cache, Glide) use disk cache in addition to in memory lru cache. I can understand why this might be useful for images downloaded from the network -- if the in memory cache is full, read it from disk rather than fetching them remotely -- thus avoiding network latency etc. However, if we are just reading local images on the android device itself -- do we gain anything by using a separate disk cache with the serialized bitmap data -- since the data will have to be read from the disk anyways ? Probably makes sense if your app needs a thumbnail and subsample the original image once and store it in cache ? Are there any studies showing perf gains. I have seen use of disk cache in <a href=""https://github.com/googlesamples/android-DisplayingBitmaps"" rel=""nofollow noreferrer"">googles samples</a> and other <a href=""https://github.com/chrisbanes/Android-BitmapCache"" rel=""nofollow noreferrer"">bitmap cache</a> libraries.</p>
",1034442,,,,,2017-10-16 17:47:23,DiskLRUCache for Bitmaps (and others) in Android,<android><bitmap><android-lru-cache><imageresizer-diskcache><diskcache>,1,1,,,
Android,46831355,1,,,,,,10/19/2017 13:42:44,,1,452,"<p>As it took me some time to find the solution for this error, I post my problem and solution here in the hope that I find it next time faster:</p>

<blockquote>
  <p>Error:(39, 0) Gradle DSL method not found: 'minSdkVersion()'</p>
</blockquote>

<p><strong>What I tried to do:</strong></p>

<ul>
<li><p>I followed the <a href=""https://github.com/googlesamples/android-testing-templates/tree/master/AndroidTestingBlueprint"" rel=""nofollow noreferrer"">Android Test Blueprint</a>'s sample to define the library versions in the top level / rootProject'S build.gradle file:</p>

<p>ext {
  minSdkVersion 16
}</p></li>
<li><p>And wanted to use it in the app's/module's build.gradle file:</p>

<p>minSdkVersion rootProject.ext.minSdkVersion</p></li>
</ul>
",5815054,,,,,2017-10-19 13:42:44,Gradle: DSL method not found: minSdkVersion / targetSdkVersion / compileSdkVersion / buildToolsVersion,<android><gradle><dsl><android-gradle-2.2>,1,0,,,
Android,47158230,1,,,,,,11/7/2017 12:38:44,,1,298,"<p>I have an app uploaded to Google Play that was working fine, but suddenly some users reported me a strange error. I have been investigating and it's due to an <a href=""https://github.com/googlesamples/android-vision/issues/269"" rel=""nofollow noreferrer"">internal error of the google vision inside gms library</a>. This is the code that causes the problem:</p>

<pre><code>TextRecognizer textRecognizer = new TextRecognizer.Builder(context)
                .build();
</code></pre>

<p>This error only occurs on some devices. So how can I handle this error at runtime preventing an app crash?. </p>

<p>Thanks a lot!</p>
",5107823,,5107823,,2017-11-07 13:23:28,2017-11-08 13:34:50,Prevent app crash due to Google native library error,<android><google-vision><crash>,2,2,,,
Android,47236796,1,,,,,,11/11/2017 10:18:20,,9,1107,"<p>I was looking in to the google sample for the new architecture component, where I found the the code as below:</p>

<pre><code>dependencies {
    // Support libraries
    implementation deps.support.app_compat
    implementation deps.support.v4
    implementation deps.support.design
    implementation deps.support.cardview

    // Architecture components
    implementation deps.lifecycle.runtime
    implementation deps.lifecycle.extensions
    annotationProcessor deps.lifecycle.compiler
    implementation deps.room.runtime
    annotationProcessor deps.room.compiler

    // Android Testing Support Library's runner and rules
    androidTestImplementation deps.atsl.runner
    androidTestImplementation deps.atsl.rules
    androidTestImplementation deps.room.testing
    androidTestImplementation deps.arch_core.testing

    // Espresso UI Testing
    androidTestImplementation deps.espresso.core
    androidTestImplementation deps.espresso.contrib
    androidTestImplementation deps.espresso.intents

    // Resolve conflicts between main and test APK:
    androidTestImplementation deps.support.annotations
    androidTestImplementation deps.support.v4
    androidTestImplementation deps.support.app_compat
    androidTestImplementation deps.support.design
}
</code></pre>

<p>I am not able to understand why they have written all the dependency starting with <code>deps.*</code>. Could anybody help me understand the code. Thanks in advance.
Here is the <a href=""https://github.com/googlesamples/android-architecture-components/blob/master/BasicSample/app/build.gradle"" rel=""noreferrer"">link</a> to the repo.</p>
",4820070,,542270,,2017-11-11 10:25:47,2017-11-24 15:06:06,"What is ""deps"" in ""implementation deps.support.app_compat""?",<android><gradle><build.gradle>,2,1,5,,
Android,47248029,1,,,,,,11/12/2017 11:05:07,,1,499,"<p>I am facing some weird memory leak using camera2 api. Tested with <a href=""https://github.com/googlesamples/android-Camera2Basic"" rel=""nofollow noreferrer"">https://github.com/googlesamples/android-Camera2Basic</a> adding empty activity to launch the camera activity and close it then launch again, I get following trace:</p>

<blockquote>
  <p>11-12 12:52:19.506 16069-16078/com.example.android.camera2basic E/StrictMode: A resource was acquired at attached stack trace but never released. See java.io.Closeable for information on avoiding resource leaks.
                                                                                java.lang.Throwable: Explicit termination method 'release' not called
                                                                                    at dalvik.system.CloseGuard.open(CloseGuard.java:180)
                                                                                    at android.view.Surface.setNativeObjectLocked(Surface.java:511)
                                                                                    at android.view.Surface.(Surface.java:179)
                                                                                    at com.example.android.camera2basic.Camera2BasicFragment.createCameraPreviewSession(Camera2BasicFragment.java:684)
                                                                                    at com.example.android.camera2basic.Camera2BasicFragment.access$400(Camera2BasicFragment.java:74)
                                                                                    at com.example.android.camera2basic.Camera2BasicFragment$2.onOpened(Camera2BasicFragment.java:194)
                                                                                    at android.hardware.camera2.impl.CameraDeviceImpl$1.run(CameraDeviceImpl.java:134)
                                                                                    at android.os.Handler.handleCallback(Handler.java:751)
                                                                                    at android.os.Handler.dispatchMessage(Handler.java:95)
                                                                                    at android.os.Looper.loop(Looper.java:154)
                                                                                    at android.os.HandlerThread.run(HandlerThread.java:61)
  11-12 12:52:19.506 16069-16078/com.example.android.camera2basic W/System.err: StrictMode VmPolicy violation with POLICY_DEATH; shutting down.</p>
</blockquote>

<p>I use</p>

<pre><code>StrictMode.setVmPolicy(new StrictMode.VmPolicy.Builder()
    .detectAll()
    .penaltyLog()
    .penaltyDeath()
    .build());
</code></pre>

<p>Running on LG Nexus 5X, OS 7.1.2</p>

<p>Any ideas if this is something to worry about?</p>

<p>Thanks.</p>
",1238164,,,,,2017-11-14 1:30:12,Memory leak with Android camera2 API,<java><android><memory-leaks>,1,3,,,
Android,47459523,1,,,,,,11/23/2017 16:05:18,,24,2967,"<p>I have an architectural question about the android ViewModels:</p>

<p>Let's say that in my App I have an Activity with two Fragments inside (using a Viewpager). The two fragments do different things (therefore may have their own ViewModel?), but they also both need various data that is similar. </p>

<p>This is for example the state if a network connection is available or not (and both fragments show different error UIs if there is no connection), or some user setting that comes via a Push from a server and affects both fragments equally.</p>

<p>This looks something like this:</p>

<p><a href=""https://i.stack.imgur.com/fnss1.png"" rel=""noreferrer""><img src=""https://i.stack.imgur.com/fnss1.png"" alt=""enter image description here""></a></p>

<p>Now my question is how to deal with that situation when using ViewModels? 
Is it good that a view observes multiple ViewModels, like it would be if I have a ViewModel for the Activity (holding the state that both need equally) and one for each fragment, like this:</p>

<p><a href=""https://i.stack.imgur.com/7CufL.png"" rel=""noreferrer""><img src=""https://i.stack.imgur.com/7CufL.png"" alt=""enter image description here""></a></p>

<p>This was hinted <a href=""https://github.com/googlesamples/android-architecture-components/issues/205"" rel=""noreferrer"">here</a> for example, but it is not a good practice, as the <a href=""https://stackoverflow.com/questions/9413034/viewmodel-per-view-or-per-model"">relationship in MVVM</a> generally is </p>

<blockquote>
  <p>View n - 1 ViewModel n - 1 Model</p>
</blockquote>

<p>But I am not sure where the right place for such shared LiveData is in my case?</p>
",2567799,,,,,2018-10-09 18:16:22,Android MVVM: Activity with multiple Fragments - Where to put shared LiveData?,<android><mvvm><android-viewmodel>,1,7,9,,
Android,47469398,1,,,,,,11/24/2017 8:44:16,,3,2820,"<p>I am now using the recent Android Architecture Components and in particular the ViewModel and LiveData.</p>

<p>I am in a case where the <a href=""https://github.com/googlesamples/android-architecture/blob/dev-todo-mvvm-live/todoapp/app/src/main/java/com/example/android/architecture/blueprints/todoapp/SingleLiveEvent.java"" rel=""nofollow noreferrer"">SingleLiveEvent</a> suggested <a href=""https://medium.com/google-developers/viewmodels-and-livedata-patterns-antipatterns-21efaef74a54"" rel=""nofollow noreferrer"">here</a> is relevant, i.e. I am returning an error and I want to display an alert only once. Before emitting a value to the Activity, I need to map my error to a more appropriate object for the view. I am using a Transformation for this.</p>

<p>So in the end, I have a ViewModel that looks like:</p>

<pre><code>public LiveData&lt;ViewState&gt; getStateForView() {
    final LiveData&lt;NetworkState&gt; liveState = myRepository.getState();
    return Transformations.map(liveState, myMapper::map);
}
</code></pre>

<p>Where in my repository I am using a SingleLiveEvent:</p>

<pre><code>public LiveData&lt;NetworkState&gt; getState() {
    myNetworkState = new SingleLiveEvent&lt;&gt;();
    return myNetworkState;
}
</code></pre>

<p>This works fairly well but I notice that my event is not propagated all the time when orientation changes multiple times. When debugging, I have noticed that there is no symmetry between the observer registration and removal: </p>

<ul>
<li>at registration time the observer of my SingleLiveEvent is the anonymous Observer class in my SingleLiveEvent</li>
</ul>

<p><a href=""https://i.stack.imgur.com/nbqkd.png"" rel=""nofollow noreferrer""><img src=""https://i.stack.imgur.com/nbqkd.png"" alt=""debug of registration""></a></p>

<ul>
<li>at removal time the observer to be removed from my SingleLiveEvent is a MediatorLiveData (which is actually observing the earlier anonymous class in my SingleLiveEvent)</li>
</ul>

<p><a href=""https://i.stack.imgur.com/K8SJp.png"" rel=""nofollow noreferrer""><img src=""https://i.stack.imgur.com/K8SJp.png"" alt=""debug of removal""></a></p>

<p>What happens is that my initial observer is never removed from the observers of the SingleLiveEvent (so if orientation changes multiple times my SingleLiveEvent has multiple observers).</p>

<p>I cannot figure out why this is not the same observer at removal time. When reproducing it without a Transformation step, there is no such issue.</p>

<p>Does anyone have a hint about this behaviour? Are SingleLiveEvent (not part of the framework) and Transformations not supposed to work together?</p>
",1181162,,,,,2017-11-27 16:49:37,LiveData - Using SingleLiveEvent with Transformations,<android><mvvm><android-architecture-components><android-livedata>,1,1,,,
Android,47479274,1,,,,,,11/24/2017 19:49:44,,1,94,"<p>Iâ€™m working with the <code>ActivityRecognitionClient</code> class to get the data of the Userâ€™s activity whether he walks, runs or on bicycle etcâ€¦</p>

<p>The thing is that working with <code>PendingIntent</code>, so Iâ€™m able to start the <code>PendingIntent</code>, and in the function <code>onHandleIntent</code> I even can extract logs of the values of the userâ€™s activity.</p>

<p>The Problem is that I can't extract the values to the <code>MainActivity</code>.</p>

<p>Although I saw a solution <a href=""https://github.com/googlesamples/android-play-location/tree/master/ActivityRecognition"" rel=""nofollow noreferrer"">here</a>.</p>

<p>He uses <code>SharedPreferences</code> to pass the data, and in the <code>MainActivity</code> he implements <a href=""https://developer.android.com/reference/android/content/SharedPreferences.OnSharedPreferenceChangeListener.html"" rel=""nofollow noreferrer"">SharedPreferences.OnSharedPreferenceChangeListener</a>. so whenever the <code>SharedPreference</code> is edited in the <code>IntentService</code> <strong>or in any other class</strong>, the <code>MainActivity</code> gets a callback.</p>

<p>I don't think that this is the best solution but I didn't found any other solution.</p>

<p>But what I don't understand is why there is no any callback to the <code>PendingIntent.getService()</code> function apart from <code>OnSuccessListener</code> and <code>OnFailureListener</code>.</p>

<p>What I've done until now is in <a href=""https://gist.github.com/asafbaibekov/66de024050524a4e943c65fff93c517c"" rel=""nofollow noreferrer"">this gist</a> </p>

<p>Thanks for helpers!</p>
",3023098,,3023098,,2017-11-28 22:21:36,2017-11-28 22:21:36,Android - get ActivityRecognition service values back to MainActivity,<java><android><intentservice><activity-recognition>,1,0,,,
Android,47528461,1,,,,,,11/28/2017 9:51:17,,1,143,"<p>I'm working on location based app. I am using <code>LocationUpdatesForegroundService</code> sample code.
Which is a <code>Service</code> to get location details</p>

<p>At some case location are not getting.</p>

<p>like.</p>

<p><strong>GPS and Internet are on I'm getting location details</strong>.</p>

<p>but,</p>

<p><strong>GPS and Internet are in offline I'm not getting location details.</strong></p>

<p><strong>case :</strong>
Start app I am start to service getting location but <code>gps</code> off case to first prompt to please <code>gps</code> ON after I <code>gps</code> ON.</p>

<p>BUT not getting LOCATION <code>mFusedLocationClient.getLastLocation</code> method <code>task.getResult()</code> are <code>null</code>.</p>

<p>please resolve my issue.</p>

<p>Thanks</p>

<p><strong>NOTE:
This code working in MOTO E os version 4.4.4.
but not working in LAVA a97 os version 6.0</strong></p>

<p>I'm using this sample :-
<a href=""https://github.com/googlesamples/android-play-location/tree/master/LocationUpdatesForegroundService"" rel=""nofollow noreferrer"">https://github.com/googlesamples/android-play-location/tree/master/LocationUpdatesForegroundService</a></p>
",3469444,,8525773,,2017-11-28 12:27:11,2017-11-29 1:34:33,Google play service sample not getting location offline,<android><gps><location><google-play-services><android-fusedlocation>,2,1,,,
Android,47529737,1,,,,,,11/28/2017 10:52:06,,2,3017,"<p><strong>What I want to do &amp; the problem</strong> </p>

<p>I updated my Android Studio and Android Gradle Plugin to 3.0.1 and my Gradle Wrapper to 4.1 and can build &amp; deploy my Android Gradle project in release variant on a device via IDE.</p>

<ul>
<li><p>However, the following 'Gradle Sync' warning messages are shown:</p>

<blockquote>
  <p>Warning:Module 'library' has variant 'release' selected, but the modules ['integration-test'] depend on variant 'debug'</p>
</blockquote></li>
<li><p><strong>The problem here is, that there is no 'release' variant for the <em>integration-test</em> module which uses the 'com.android.test'
plugin</strong>.</p></li>
<li><p>If I simply try to add a release build type (<code>buildTypes { release {} }</code>) to the :integration-test module I receive:</p>

<blockquote>
  <p>Error:VariantInputs initialized with no merged manifest report on: DEFAULT</p>
</blockquote></li>
</ul>

<p><strong>Details about the project (simplified)</strong></p>

<p>The project consists of:</p>

<ul>
<li>a <strong>:library module</strong></li>
<li>an <strong>:app module</strong> which builds the app's apk and uses the :library module</li>
<li>an <strong>:integration-test module</strong> which:

<ul>
<li>uses the <strong>""com.android.test"" plugin</strong></li>
<li>dependents on the :app module via targetProjectPath ':app' &amp;  targetVariant 'debug'</li>
<li>and contains instrumented tests on the :app functions</li>
<li>only contains a 'main' folder (the test plugin does not support others)</li>
</ul></li>
<li>This project is build after the <a href=""https://github.com/googlesamples/android-testing-templates/tree/master/AndroidTestingBlueprint"" rel=""nofollow noreferrer"">Android Test Blueprint</a> as the goal is here that the :app module does not know anything about the integration-test module's existence.</li>
</ul>

<p>settings.gradle</p>

<pre><code>include :library
include :app
include :integration-test
</code></pre>

<p>app/build.gradle</p>

<pre><code>apply plugin: 'com.android.application'

android {
compileSdkVersion rootProject.ext.compileSdkVersion
buildToolsVersion rootProject.ext.buildToolsVersion

publishNonDefault true

defaultConfig {
    minSdkVersion rootProject.ext.minSdkVersion
    targetSdkVersion rootProject.ext.targetSdkVersion

    applicationId ""xxxxx""

    testInstrumentationRunner rootProject.ext.testInstrumentationRunner

    multiDexEnabled true
    vectorDrawables.useSupportLibrary = true
}

signingConfigs {
    release {
        keyAlias 'xxxx'
    }
}

buildTypes {
    debug {
        testCoverageEnabled = true
    }
    release {
        minifyEnabled false
        proguardFiles getDefaultProguardFile('proguard-android-optimize.txt'), 'proguard-rules.pro'
        signingConfig signingConfigs.release
    }
}

// This is needed by the integration-test module (i.e. com.android.test : integration test)
// in order for targetVariant to work without a flavor
publishNonDefault true

testOptions {
    unitTests {
        // Required so that logging methods do not throw not mocked exceptions in junit tests.
        returnDefaultValues = true
    }
}

compileOptions {
    sourceCompatibility rootProject.ext.sourceCompatibility
    targetCompatibility rootProject.ext.targetCompatibility
}
}

dependencies {
// Local dependencies
compile project(':library')
// i cleaned up all the other dependencies as they wouldn't help here
}
</code></pre>

<p><strong>Question</strong></p>

<p>Did anyone get an <strong>(integration-)test module using the com.android.test plugin</strong> to run with <strong>Android Gradle Plugin 3.0.1</strong> without getting the ""no release variant"" error? If so, how can I avoid this error or how can I add such a release variant to a android test plugin based module (if this makes sense at all)?</p>
",5815054,,5815054,,2017-12-04 9:10:04,2018-08-24 21:19:52,Avoid 'Variant Selection Conflicts' warning when using android test plugin without release variant,<android><android-studio><android-testing><android-gradle-3.0><gradle-android-test-plugi>,1,9,,,
Android,47533726,1,,,,,,11/28/2017 14:16:11,,6,422,"<p>I am new to android. I have been looking for ways to record a video using Camera2 api and MediaCodec but no luck. I saw a sample by Google(<a href=""https://github.com/googlesamples/android-Camera2Video"" rel=""noreferrer"">https://github.com/googlesamples/android-Camera2Video</a>) using MediaRecorder. My question is how to replace this MediaRecorder with MediaCodec.</p>
",4968955,,,,,2018-08-30 19:28:45,How to use MediaCodec with Camera2?,<android>,1,0,1,,
Android,47544132,1,,,,,,11/29/2017 2:34:34,,1,345,"<p>My app uses SyncAdapters to sync data in the background. On a device running OS 8.0 and setup for Android for Work managed profile, calling addAccountExplicitly throws a SecurityException and fails to add the account properly.</p>

<p>Here is the callstack:</p>

<pre><code>11-28 17:28:00.182 7291-7291/com.example.android.basicsyncadapter E/CreateSyncAccount: Failed
   java.lang.SecurityException: com.google.android.gm from uid 10074 not allowed to perform GET_ACCOUNTS
      at android.os.Parcel.readException(Parcel.java:1942)
      at android.os.Parcel.readException(Parcel.java:1888)
      at android.accounts.IAccountManager$Stub$Proxy.addAccountExplicitly(IAccountManager.java:1205)
      at android.accounts.AccountManager.addAccountExplicitly(AccountManager.java:875)
      at com.example.android.basicsyncadapter.SyncUtils.CreateSyncAccount(SyncUtils.java:58)
      at com.example.android.basicsyncadapter.EntryListFragment.onAttach(EntryListFragment.java:148)
</code></pre>

<p>I have reproduced the failure using two GitHub projects running 8.0 on a Pixel:
fingerprint=google/marlin/marlin:8.0.0/OPR3.170623.013/4397526:user/release-keys</p>

<p>GitHub apps:</p>

<ol>
<li><a href=""https://github.com/googlesamples/android-testdpc"" rel=""nofollow noreferrer"">https://github.com/googlesamples/android-testdpc</a></li>
<li><a href=""https://github.com/googlesamples/android-BasicSyncAdapter"" rel=""nofollow noreferrer"">https://github.com/googlesamples/android-BasicSyncAdapter</a></li>
</ol>

<p>Here are the steps to reproduce throwing the above exception:</p>

<ol>
<li>Factory reset the device and wait for the out-of-box screen to appear.</li>
<li>Install the application android-testdpc. Complete setting up the device for Android for Work managed profile.</li>
<li>Do not change any policies and do not restart the device.</li>
<li>Install the application android-BasicSyncAdapter and launch it.</li>
<li>Logcat will capture</li>
</ol>

<blockquote>
  <p>I am_crash: [7489,0,com.example.android.basicsyncadapter,950582854,java.lang.SecurityException,com.google.android.gm from uid 10075 not allowed to perform GET_ACCOUNTS,Parcel.java,1942]</p>
</blockquote>

<p>Additional Notes:</p>

<ul>
<li>I am seeing the SecurityException being thrown on devices with Android 8.0 only.</li>
<li>Restarting the device before launching android-BasicSyncAdapter does not cause the SecurityException to be thrown. Currently proposed work around for users.</li>
</ul>

<p>I am trying to figure out how to successfully call addAccountExplicitly without having to first restart the device.</p>
",9023227,,,,,2018-02-15 20:04:55,addAccountExplicitly throws SecurityException because com.google.android.gm is not allowed to perform GET_ACCOUNTS,<android><android-syncadapter><android-securityexception>,1,2,,,
Android,47551921,1,,,,,,11/29/2017 11:38:13,,1,556,"<p>I have created a library (check <a href=""https://github.com/VishalKumar2016/react-native-camera2-android"" rel=""nofollow noreferrer"">this</a> for more information) for Android for Android Camera2 functionality in Android all is working good, but in the aspect ratio issue with full screen camera.</p>

<p>Please Check below image how it looks in preview and the real picture (Only preview has the issue not the real picture after capturing)</p>

<p>Captured image horizontal:</p>

<p><img src=""https://i.stack.imgur.com/uS7qc.jpg"" alt=""enter image description here""></p>

<p>Preview image horizontal:</p>

<p><img src=""https://i.stack.imgur.com/4f7VV.jpg"" alt=""enter image description here""></p>

<p>Captured image vertical:</p>

<p><img src=""https://i.stack.imgur.com/nCm1A.jpg"" alt=""enter image description here""></p>

<p>Preview image vertical:</p>

<p><img src=""https://i.stack.imgur.com/6m6wk.jpg"" alt=""enter image description here""></p>

<p>Google sample of Camera2 API have similar issue and resolved <a href=""https://github.com/googlesamples/android-Camera2Basic/pull/83/commits/1d4c404393f177fc2b87fc24edc30af3840c2a59"" rel=""nofollow noreferrer"">here</a>.</p>

<p>But same code not working in my react native library code. May be I am using one code for image and video both and add additional code for video capture.</p>
",7321021,,8225828,,2017-11-29 17:23:55,2017-12-06 15:10:02,React Native android camera2 aspect ratio issue,<android><react-native><android-camera2>,1,1,,,
Android,47621046,1,,,,,,12/3/2017 17:21:02,,1,151,"<p>I am writing an Android application that uses the camera.</p>

<p>I took the sample code <a href=""https://github.com/googlesamples/android-Camera2Basic/"" rel=""nofollow noreferrer"">https://github.com/googlesamples/android-Camera2Basic/</a> provided by Google. However, I observed that calling the <code>close()</code> method of the <a href=""https://developer.android.com/reference/android/hardware/camera2/CameraDevice.html#close()"" rel=""nofollow noreferrer""><code>CameraDevice</code></a> takes too long (almost one second on my Samsung Galaxy S8).</p>

<p>This method is called from <code>onPause()</code>, thus the application hangs a little while when the camera fragment is closed.</p>

<pre><code>@Override
public void onPause() {
    closeCamera();
    stopBackgroundThread();
    super.onPause();
}

private void closeCamera() {
    try {
        mCameraOpenCloseLock.acquire();
        if (null != mCaptureSession) {
            mCaptureSession.close();
            mCaptureSession = null;
        }
        if (null != mCameraDevice) {
            mCameraDevice.close(); // This call takes 1 second!
            mCameraDevice = null;
        }
        if (null != mImageReader) {
            mImageReader.close();
            mImageReader = null;
        }
    } catch (InterruptedException e) {
        throw new RuntimeException(""Interrupted while trying to lock camera closing."", e);
    } finally {
        mCameraOpenCloseLock.release();
    }
}
</code></pre>

<p>How can I avoid the application to become unresponsive when the <code>closeCamera()</code> method is being called?</p>

<p>I tried to call it from another thread than the UI thread but the application crashes in some cases.</p>
",741920,,,,,2018-03-29 17:23:09,Closing the Android CameraDevice is slow and hangs the application,<android><android-camera2>,1,1,,,
Android,47839974,1,,,,,,12/15/2017 21:18:03,,1,479,"<p>For my university thesis, I need a android program which can detect and recognize a face in real time. I have read about 'android-vision' library and tested the example code.</p>

<p><a href=""https://github.com/googlesamples/android-vision/tree/master/visionSamples/FaceTracker/app/src/main/java/com/google/android/gms/samples/vision/face/facetracker."" rel=""nofollow noreferrer"">https://github.com/googlesamples/android-vision/tree/master/visionSamples/FaceTracker/app/src/main/java/com/google/android/gms/samples/vision/face/facetracker.</a></p>

<p>Modified code:</p>

<pre><code>package com.google.android.gms.samples.vision.face.facetracker;

import android.content.Context;
import android.graphics.Bitmap;
import android.graphics.Canvas;
import android.graphics.Color;
import android.graphics.Paint;
import android.os.AsyncTask;
import android.os.Environment;
import android.util.Log;
import android.widget.Toast;

import com.google.android.gms.samples.vision.face.facetracker.ui.camera.GraphicOverlay;
import com.google.android.gms.vision.face.Face;

import java.io.ByteArrayOutputStream;
import java.io.DataInputStream;
import java.io.DataOutputStream;
import java.io.File;
import java.io.FileInputStream;
import java.io.FileOutputStream;
import java.net.Socket;
import java.text.SimpleDateFormat;
import java.util.Date;

/**
 * Graphic instance for rendering face position, orientation, and landmarks within an associated
 * graphic overlay view.
 */
class FaceGraphic extends GraphicOverlay.Graphic
{
    private static final float FACE_POSITION_RADIUS = 10.0f;
    private static final float ID_TEXT_SIZE = 40.0f;
    private static final float ID_Y_OFFSET = 50.0f;
    private static final float ID_X_OFFSET = -50.0f;
    private static final float BOX_STROKE_WIDTH = 5.0f;

    public Canvas canvas1;
    public Face face;
    int i =0;
    int flag = 0;

    private static final int COLOR_CHOICES[] = {
        Color.BLUE,
        Color.CYAN,
        Color.GREEN,
        Color.MAGENTA,
        Color.RED,
        Color.WHITE,
        Color.YELLOW
    };
    private static int mCurrentColorIndex = 0;

    private Paint mFacePositionPaint;
    private Paint mIdPaint;
    private Paint mBoxPaint;

    private volatile Face mFace;
    private int mFaceId;
    private float mFaceHappiness;
    public Bitmap myBitmap ;
    FaceGraphic(GraphicOverlay overlay)
    {
        super(overlay);

        mCurrentColorIndex = (mCurrentColorIndex + 1) % COLOR_CHOICES.length;
        final int selectedColor = COLOR_CHOICES[mCurrentColorIndex];

        mFacePositionPaint = new Paint();
        mFacePositionPaint.setColor(selectedColor);

        mIdPaint = new Paint();
        mIdPaint.setColor(selectedColor);
        mIdPaint.setTextSize(ID_TEXT_SIZE);

        mBoxPaint = new Paint();
        mBoxPaint.setColor(selectedColor);
        mBoxPaint.setStyle(Paint.Style.STROKE);
        mBoxPaint.setStrokeWidth(BOX_STROKE_WIDTH);
    }

    void setId(int id)
    {
        mFaceId = id;
        flag = 1;
    }


    /**
     * Updates the face instance from the detection of the most recent frame.  Invalidates the
     * relevant portions of the overlay to trigger a redraw.
     */
    void updateFace(Face face)
    {
        mFace = face;
        postInvalidate();
    }

    /**
     * Draws the face annotations for position on the supplied canvas.
     */
    @Override
    public void draw(Canvas canvas)
    {
        face = mFace;
        if (face == null)
        {
            return;
        }

        // Draws a circle at the position of the detected face, with the face's track id below.
        float x = translateX(face.getPosition().x + face.getWidth() / 2);
        float y = translateY(face.getPosition().y + face.getHeight() / 2);
 //       canvas.drawCircle(x, y, FACE_POSITION_RADIUS, mFacePositionPaint);
        canvas.drawText(""id: "" + mFaceId, x + ID_X_OFFSET, y + ID_Y_OFFSET, mIdPaint);
  //      canvas.drawText(""happiness: "" + String.format(""%.2f"", face.getIsSmilingProbability()), x - ID_X_OFFSET, y - ID_Y_OFFSET, mIdPaint);
  //      canvas.drawText(""right eye: "" + String.format(""%.2f"", face.getIsRightEyeOpenProbability()), x + ID_X_OFFSET * 2, y + ID_Y_OFFSET * 2, mIdPaint);
  //      canvas.drawText(""left eye: "" + String.format(""%.2f"", face.getIsLeftEyeOpenProbability()), x - ID_X_OFFSET*2, y - ID_Y_OFFSET*2, mIdPaint);

        // Draws a bounding box around the face.
        float xOffset = scaleX(face.getWidth() / 2.0f);
        float yOffset = scaleY(face.getHeight() / 2.0f);
        float left = x - xOffset;
        float top = y - yOffset;
        float right = x + xOffset;
        float bottom = y + yOffset;
        canvas.drawRect(left, top, right, bottom, mBoxPaint);

        Log.d(""MyTag"", ""hello ""+i);
        i++;

        if (flag == 1)
        {
            flag = 0;
            canvas1=canvas;
            // send face image to server for recognition
            new MyAsyncTask().execute(""ppppp"");

        }
    }


    class MyAsyncTask extends AsyncTask&lt;String, Void, String&gt;
    {
        private Context context;

        public MyAsyncTask()
        {
            // TODO Auto-generated constructor stub
            //context = applicationContext;
        }

        protected String doInBackground(String... params)
        {
            try
            {

                Log.d(""MyTag"", ""face.getWidth() ""+face.getWidth());
                Bitmap temp_bitmap = Bitmap.createBitmap((int)face.getWidth(), (int)face.getHeight(), Bitmap.Config.RGB_565);
                canvas1.setBitmap(temp_bitmap);


            }
            catch (Exception e)
            {
                Log.e(""MyTag"", ""I got an error"", e);
                e.printStackTrace();
            }
            Log.d(""MyTag"", ""doInBackground"");
            return null;
        }

        protected void onPostExecute(String result) {
            Log.d(""MyTag"", ""onPostExecute "" + result);
            // tv2.setText(s);

        }

    }

}
</code></pre>

<p>It give me this error:</p>

<pre><code>12-16 03:08:00.310 22926-23044/com.google.android.gms.samples.vision.face.facetracker E/MyTag: I got an error
                                                                                               java.lang.UnsupportedOperationException
                                                                                                   at android.view.HardwareCanvas.setBitmap(HardwareCanvas.java:39)
                                                                                                   at com.google.android.gms.samples.vision.face.facetracker.FaceGraphic$MyAsyncTask.doInBackground(FaceGraphic.java:175)
                                                                                                   at com.google.android.gms.samples.vision.face.facetracker.FaceGraphic$MyAsyncTask.doInBackground(FaceGraphic.java:158)
</code></pre>

<p>This code can detect face in real time. For recognition part, I am planning to use 'JavaCV' <a href=""https://github.com/bytedeco/javacv"" rel=""nofollow noreferrer"">https://github.com/bytedeco/javacv</a>. If I can capture the face in a bitmap then I can save it in .jpg image then I can recognize it. Could you please give me some advise, how to save detected face. Thank you. </p>
",1850484,,1850484,,2017-12-15 21:30:08,2018-12-06 16:26:23,Save real-time detected face(Track Faces) image using 'android-vision' library,<java><android><android-vision>,1,3,1,,
Android,47860064,1,,,,,,12/17/2017 22:24:53,,2,122,"<p>As the title states, does it considered as a good practice to use a single fragment within an activity to display the content? I began to notice that more and more developers start to use the fragment as an insulation layer to separate the lifecycle logic from UI that activity (sorry, fragment) displays. The most recent example that I stumble on is the <a href=""https://github.com/googlesamples/android-architecture"" rel=""nofollow noreferrer""><code>architecture blueprints</code></a> provided by Google developers. They <a href=""https://github.com/googlesamples/android-architecture/blob/todo-mvvm-live/todoapp/app/src/main/java/com/example/android/architecture/blueprints/todoapp/tasks/TasksActivity.java"" rel=""nofollow noreferrer""><code>use</code></a> just one single fragment for UI while the activity handles ViewModel and all the navigation between screens.</p>

<p>So, is this a good practice or just a personal preference? Would you care to share your opinion on the subject?</p>
",5233074,,5233074,,2017-12-18 16:25:04,2017-12-18 16:25:04,Is it a good practice to use a single fragment to display the UI instead of the activity?,<android><android-fragments><design-patterns><android-activity><architecture>,2,0,,,
Android,47874391,1,,,,,,12/18/2017 18:29:47,,2,596,"<p>I've noticed an odd behavior when injecting ViewModels into my activities/fragments (following the example at <a href=""https://github.com/googlesamples/android-architecture-components/tree/master/GithubBrowserSample"" rel=""nofollow noreferrer"">GithubBrowserSample</a>).</p>

<p><strong>Trial 1</strong> At first I was just lazily seeing what happens when I use</p>

<pre><code>@Inject MainViewModel viewModel;
</code></pre>

<p>Obviously, I got a new instance of MainViewModel for every activity and when rotated.</p>

<p><strong>Trial 2</strong>
I then updated to using ""the right way"" of injecting the <code>ViewModelProvider.Factory</code> and grabbing the view model in <code>onCreate</code>:</p>

<pre><code>@Inject ViewModelProvider.Factory viewModelProviderFactory;
private MainViewModel viewModel;

@Override
public void onCreate(Bundle savedInstanceState) {
    viewModel = ViewModelProviders.of(this, viewModelProviderFactory)
            .get(MainViewModel::class);
}
</code></pre>

<p>This snippet works like a charm. Printing the viewModel will show that I get a new instance for each new activity instance triggered from a startActivity call but re-using when rotated. This got me thinking... Maybe I can just inject the MainViewModel.</p>

<p><strong>Trial 3</strong> I updated my MainActivityModule to include the following:</p>

<pre><code>@Provides @ActivityScope
public MainViewModel provideMainViewModel(MainActivity activity,
        ViewModelProvider.Factory factory) {
    return ViewModelProviders.of(activity, factory).get(MainViewModel::class);
}
</code></pre>

<p>This resulted in a new instance of MainViewModel even on screen rotations (same as trial 1). I verified that the provided ViewModelProvider.Factory instance is the same every time that provideMainViewModel is called. I also tried removing the @ActivityScope which caused even stranger behavior especially when trying to include the same instance of MainViewModel in both MainActivity and MainFragment1. The fragment got the same instance of MainViewModel as before the rotation, but the activity got a brand new one, even though both calls to provideMainViewModel were called with the same instance of MainActivity and the factory.</p>

<p><strong>Question</strong> Can anyone explain this? Is there no way for me to inject the ViewModel directly into my activity/fragment?</p>

<p><strong>UPDATE</strong></p>

<p>This is really baffling me so I've updated to include a full sample of the issue <a href=""https://github.com/yperess/android-architecture-components"" rel=""nofollow noreferrer"">HERE</a>. Note that I've had to update AppInjector's <code>FragmentLifecycleCallback</code> to inject the fragment during <code>onFragmentPreCreated</code>. This was done due to the lifecycle of a fragment, the current implementation seen in <code>SearchFragment</code> using <code>SearchViewModel</code> will get the instance of the view model during <code>onActivityCreated</code> which may be called more than once on the same fragment. In such a case, the same view model will be returned from <code>ViewModelProviders</code> and multiple observers will be registered. Instead Fragments should be injected before <code>onCreate</code> and any LiveData observers should be registered at that point.</p>

<p>When run and rotated, you'll see the following logs:</p>

<pre><code>12-19 22:48:28.538 7116-7116/com.android.example.github D/MainActivityProvidersMo: provideMainViewModel for com.android.example.github.MainActivity@78c5d27 using com.android.example.github.viewmodel.GithubViewModelFactory@6d6c140: com.android.example.github.MainViewModel@fd1f879
12-19 22:48:28.611 7116-7116/com.android.example.github D/MainActivity: viewModel: com.android.example.github.MainViewModel@fd1f879
12-19 22:48:28.615 7116-7116/com.android.example.github D/dagger.android.support: An injector for com.android.example.github.ui.search.SearchFragment was found in com.android.example.github.MainActivity
12-19 22:48:28.616 7116-7116/com.android.example.github D/SearchFragment: mainViewModel: com.android.example.github.MainViewModel@fd1f879
12-19 22:48:28.760 7116-7116/com.android.example.github D/SearchFragment: results live data has observers? false


12-19 22:48:40.579 7116-7116/com.android.example.github D/MainActivityProvidersMo: provideMainViewModel for com.android.example.github.MainActivity@d1f344f using com.android.example.github.viewmodel.GithubViewModelFactory@6d6c140: com.android.example.github.MainViewModel@c5387dc
12-19 22:48:40.581 7116-7116/com.android.example.github D/dagger.android.support: An injector for com.android.example.github.ui.search.SearchFragment was found in com.android.example.github.MainActivity
12-19 22:48:40.583 7116-7116/com.android.example.github D/SearchFragment: mainViewModel: com.android.example.github.MainViewModel@c5387dc
12-19 22:48:40.625 7116-7116/com.android.example.github D/MainActivity: viewModel: com.android.example.github.MainViewModel@c5387dc
12-19 22:48:40.715 7116-7116/com.android.example.github D/SearchFragment: results live data has observers? false
</code></pre>
",3456952,,3456952,,2017-12-20 4:00:36,2018-01-13 16:45:47,Dagger 2 inject ViewModel odd behavior (ViewModel not re-used on screen rotation),<android><mvvm><android-lifecycle><dagger-2>,1,0,1,,
Android,47880718,1,,,,,,12/19/2017 5:48:36,,1,42,"<p>I connected to a bluetooth LE device with below instructions and samples:
<a href=""https://developer.android.com/reference/android/bluetooth/BluetoothGatt.html#getService(java.util.UUID)"" rel=""nofollow noreferrer"">https://developer.android.com/reference/android/bluetooth/BluetoothGatt.html#getService(java.util.UUID)</a></p>

<p><a href=""https://github.com/googlesamples/android-BluetoothLeGatt"" rel=""nofollow noreferrer"">https://github.com/googlesamples/android-BluetoothLeGatt</a></p>

<p>but i have no idea how i can send data (hexa code) to ble device,
can anyone help me?
does below code send data to device :</p>

<pre><code>BluetoothGattDescriptor descriptor = characteristic.getDescriptor(
UUID.fromString(SampleGattAttributes.CLIENT_CHARACTERISTIC_CONFIG));
int hexaCode =Integer.parseInt(""7c"",16);
descriptor.setValue( 
ByteBuffer.allocate(4).putInt(hexaCode).array());
mBluetoothGatt.writeDescriptor(descriptor);
</code></pre>
",4650625,,,,,2017-12-19 10:29:26,how transferring data to connected bluetooth LE device,<java><android><bluetooth><hex><bluetooth-lowenergy>,1,0,,,
Android,48005850,1,,,,,,12/28/2017 10:34:58,,8,293,"<p><a href=""https://github.com/googlesamples/android-RuntimePermissions/"" rel=""noreferrer"">https://github.com/googlesamples/android-RuntimePermissions/</a></p>

<p>After cloning I imported the code in Android Studio 2.3.3 But app folder is not showing in Project>Android and also other android specific option like Android Monitor is absent. Build Project not working.</p>

<p>How I imported is as followed.
<strong>File > New > Import Project > android-RuntimePermissions > build.gradle</strong>and then clicked ok</p>

<p>I have added Kotlin plugin to android studio as the project have Kotlin module.</p>
",1646919,,6248491,,2018-01-16 5:51:51,2018-01-22 6:51:33,android-RuntimePermissions sample code not working,<java><android><android-studio><intellij-idea>,5,1,,,
Android,48020271,1,,,,,,12/29/2017 9:25:03,,1,42,"<p>I face a problem when using a google ble demo on VIVO X7 and X9 android phones.
Here is the demo link: <a href=""https://github.com/googlesamples/android-BluetoothLeGatt"" rel=""nofollow noreferrer"">https://github.com/googlesamples/android-BluetoothLeGatt</a>
The bluetoothadapter scans ble devices for 4 minutes and then stops automatically.
This problem only occurs on above 2 android phones. The ble scanning lasts longer on other android phone. There is no related info I can find on Google. Does anyone get the reason on that? Many thanks</p>
",9152458,,9152458,,2017-12-29 9:30:46,2018-11-26 10:19:17,BLE development on VIVO smartphones?,<android><bluetooth-lowenergy>,1,2,,,
Android,48095462,1,,,,,,1/4/2018 12:34:59,,1,161,"<p>I've an activity in my app which <strong>Either</strong> picks an image from gallery to scan for a barcode and then displays the result in a <code>TextView</code> and picked image in an <code>ImageView</code> <strong>OR</strong> starts the camera to scan one and displays the result in the respective <code>TextView</code>.</p>

<p>I'm using <a href=""https://github.com/googlesamples/android-vision"" rel=""nofollow noreferrer"">Google Mobile Vision API</a> (indirectly through a <a href=""https://github.com/KingsMentor/MobileVisionBarcodeScanner"" rel=""nofollow noreferrer"">Library</a> just to skip the boiler plate code) and the scanning works impressively fast.</p>

<p>I've tried my best to find a way before asking this question through searching the sample project of the library and Google Mobile Vision API and the internet but failed to find one.</p>

<p>How can I pass the actual scanned barcode to an <code>ImageView</code> (or an Activity)? (seems impossible directly)</p>

<p>My code is basically this (just with some intents etc)</p>

<pre><code>@Override
    public void onRetrieved(final Barcode barcode) {
        Log.d(TAG, ""Barcode read: "" + barcode.displayValue);
        runOnUiThread(new Runnable() {
            @Override
            public void run() {
                AlertDialog.Builder builder = new AlertDialog.Builder(MainActivity.this)
                        .setTitle(""code retrieved"")
                        .setMessage(barcode.displayValue);
                builder.show();
            }
        });


    }

    // for multiple callback
    @Override
    public void onRetrievedMultiple(final Barcode closetToClick, final List&lt;BarcodeGraphic&gt; barcodeGraphics) {
        runOnUiThread(new Runnable() {
            @Override
            public void run() {
                String message = ""Code selected : "" + closetToClick.displayValue + ""\n\nother "" +
                        ""codes in frame include : \n"";
                for (int index = 0; index &lt; barcodeGraphics.size(); index++) {
                    Barcode barcode = barcodeGraphics.get(index).getBarcode();
                    message += (index + 1) + "". "" + barcode.displayValue + ""\n"";
                }
                AlertDialog.Builder builder = new AlertDialog.Builder(MainActivity.this)
                        .setTitle(""code retrieved"")
                        .setMessage(message);
                builder.show();
            }
        });

    }

    @Override
    public void onBitmapScanned(SparseArray&lt;Barcode&gt; sparseArray) {
        for (int i = 0; i &lt; sparseArray.size(); i++) {
        Barcode barcode = sparseArray.valueAt(i);
        Log.e(""value"", barcode.displayValue);
        }
    }

    @Override
    public void onRetrievedFailed(String reason) {
        // in case of failure
    }
}
</code></pre>

<p>Above code works great but is there a way possible to use that <code>SparseArray</code> for obtaining the actual scanned barcode?</p>
",8439566,,472495,,2018-01-05 18:46:55,2018-01-05 18:46:55,How to pass the actual barcode scanned to an ImageView,<android><barcode><google-vision>,1,0,1,,
Android,48105925,1,,,,,,1/5/2018 1:22:26,,1,596,"<p>Using Google's mvvm architecture components <a href=""https://github.com/googlesamples/android-architecture-components/tree/178fe541643adb122d2a8925cf61a21950a4611c/GithubBrowserSample"" rel=""nofollow noreferrer"">Github browser sample as a reference</a>, how would one cancel a viewmodel hosted, live data observed, retrofit network request? :)</p>

<p>Maybe I'm reading it wrong, but if network conditions are poor and requests take for example 30 seconds, each request should be cancelled otherwise many requests might be launched if the app is opened and closed rapidly. How would a well designed app handle this?</p>

<p>The callback when the livedata observer is removed can be accessed <a href=""https://github.com/googlesamples/android-architecture-components/blob/178fe541643adb122d2a8925cf61a21950a4611c/GithubBrowserSample/app/src/main/java/com/android/example/github/util/LiveDataCallAdapter.java"" rel=""nofollow noreferrer"">by overriding onInactive here</a> I think. I could try cancelling all calls here, but what if I don't want to cancel some calls for some reason?</p>

<p>I'm guessing Facebook doesn't cancel trying to load your feed when you hit the back button.</p>
",1866373,,,,,2018-01-05 3:01:42,"Should my mvvm, livedata app cancel network requests when app is backgrounded?",<android><mvvm><android-architecture-components><android-architecture-lifecycle>,1,0,1,,
Android,48169430,1,,,,,,1/9/2018 13:37:57,,11,428,"<p>I am having trouble to find a proper solution to make view/viewmodel aware of network status, specially using RxJava.</p>

<p>I tried to follow <a href=""https://developer.android.com/topic/libraries/architecture/guide.html#addendum"" rel=""nofollow noreferrer"">Google's NetworkBoundResource</a> and <a href=""https://medium.com/@iammert/offline-app-with-rxjava-2-and-room-ccd0b5c18101"" rel=""nofollow noreferrer"">Iammert's networkBoundResouce</a> (also tried <a href=""https://github.com/googlesamples/android-architecture-components/tree/master/GithubBrowserSample"" rel=""nofollow noreferrer"">GithubBrowserSample</a>
but I just don't really understand the code or how it should be encapsulated.</p>

<p>I'm looking for how can I implement NetworkBoundResource with RxJava2 in a way that the data gets refreshed automatically with the Database.</p>

<p>I will show what I currently have:</p>

<p>A fragment with arch.lifecycle.ViewModel</p>

<pre><code>public class LoginViewModel extends ViewModel {

    static final int SCREEN_JUST_BUTTONS = 0;
    static final int SCREEN_LOGIN_INPUT = 1;
    static final int SCREEN_PASS_INPUT = 2;

    // using a PublishSubject because we are not interested in the last object that was emitted
    // before subscribing. Like this we avoid displaying the snackbar multiple times
    @NonNull
    private final PublishSubject&lt;Integer&gt; snackbarText;

    private int SCREEN = 0;

    private LoginUiModel loginUiModel;
    @NonNull
    private BaseSchedulerProvider schedulerProvider;
    @NonNull
    private UserRepository userRepository;

    @Inject
    LoginViewModel(@NonNull final BaseSchedulerProvider schedulerProvider, @NonNull final UserRepository userRepository) {
        this.schedulerProvider = schedulerProvider;
        this.userRepository = userRepository;
        snackbarText = PublishSubject.create();
        disposables = new CompositeDisposable();
        loginUiModel = new LoginUiModel();
    }

    int getScreen() {
        return SCREEN;
    }

    void setScreen(final int screen) {
        this.SCREEN = screen;
    }

    @NonNull
    Observable&lt;Integer&gt; getSnackbarText() {
        return snackbarText;
    }

    LoginUiModel getLoginUiModel() {
        return loginUiModel;
    }


    public Single&lt;User&gt; login(final String login, final String password) {
        return userRepository.login(login, password)
                             .subscribeOn(schedulerProvider.io())
                             .observeOn(schedulerProvider.ui())
                             .doOnError(this::handleErrorLogin);
    }

    private void handleErrorLogin(final Throwable t) {
        if (t instanceof HttpException) {
            showSnackbar(R.string.Login_invalid_input);
        } else if (t instanceof IOException) {
            showSnackbar(R.string.Common_no_connection);
        } else {
            showSnackbar(R.string.Common_error_loading);
        }
    }

    private void showSnackbar(@StringRes int textId) {
        snackbarText.onNext(textId);
    }

    void forgotPassword() {
        if (isValidEmail(loginUiModel.getEmail())) {
            showSnackbar(R.string.Login_password_sent);
        } else {
            showSnackbar(R.string.Login_invalid_login);
        }
        //TODO;
    }

    boolean isValidEmail(@Nullable final String text) {
        return text != null &amp;&amp; text.trim().length() &gt; 3 &amp;&amp; text.contains(""@"");
    }
}
</code></pre>

<p>and in my UserRepository:</p>

<pre><code>@Singleton
public class UserRepository {

    @NonNull
    private final UserDataSource userRemoteDataSource;

    @NonNull
    private final UserDataSource userLocalDataSource;

    @NonNull
    private final RxSharedPreferences preferences;

    @Inject
    UserRepository(@NonNull RxSharedPreferences rxSharedPreferences, @NonNull @Remote UserDataSource userRemoteDataSource, @NonNull @Local UserDataSource
            userLocalDataSource) {
        this.userRemoteDataSource = userRemoteDataSource;
        this.userLocalDataSource = userLocalDataSource;
        preferences = rxSharedPreferences;
    }

    @NonNull
    public Single&lt;User&gt; login(final String email, final String password) {
        return userRemoteDataSource
                .login(email, password) // busca do webservice
                .flatMap(userLocalDataSource::saveUser) // salva no banco local
                .flatMap(user -&gt; userLocalDataSource.login(user.getEmail(), user.getPassword())) // busca usuÃ¡rio no banco local como SSOT
                .doOnSuccess(this::saveUserId); // salva o ID do usuÃ¡rio nas preferÃªncias.
    }

    public Single&lt;User&gt; saveUser(String email, String password, String name, String phone, String company) {
        User user = new User(0, name, email, password, phone, company);

        return saveUser(user);
    }

    private Single&lt;User&gt; saveUser(final User user) {
        return userRemoteDataSource.saveUser(user)
                                   .flatMap(userLocalDataSource::saveUser)
                                   .doOnSuccess(this::saveUserId); // salva o ID do usuÃ¡rio nas preferÃªncias.
    }

    private void saveUserId(final User user) {
        preferences.getLong(Consts.KEY_USER_ID__long).set(user.getUserId());
    }

    public Flowable&lt;User&gt; getUserUsingSystemPreferences() {
        Preference&lt;Long&gt; userIdPref = preferences.getLong(Consts.KEY_USER_ID__long, -1L);
        if (userIdPref.get() &lt;= 0) {
            //nao deveria acontecer, mas se acontecer, reseta:
            userIdPref.delete();
            return Flowable.error(new RuntimeException(""Not logged in.""));
        } else if (!userIdPref.isSet()) {
            return Flowable.error(new RuntimeException(""Not logged in.""));
        } else {
            return userLocalDataSource.getUser(String.valueOf(userIdPref.get()));
            }
        }
    }
</code></pre>

<p>and my UserLocalDataSource:</p>

<pre><code>@Singleton
public class UserLocalDataSource implements UserDataSource {

    private final UserDao userDao;

    @Inject
    UserLocalDataSource(UserDao userDao) {
        this.userDao = get(userDao);
    }

    @NonNull
    @Override
    public Single&lt;User&gt; login(final String email, final String password) {
        return userDao.login(email, password);
    }

    @Override
    public Flowable&lt;User&gt; getUser(final String id) {
        return userDao.getUserById(Long.valueOf(id));
    }

    @Override
    public Single&lt;User&gt; saveUser(final User user) {
        return Single.create(e -&gt; {
            long id = userDao.insert(user);
            user.setUserId(id);
            e.onSuccess(user);
        });
    }

    @Override
    public Completable deleteUser(final String id) {
        return getUser(id).flatMapCompletable(user -&gt; Completable.create(e -&gt; {
            int numberOfDeletedRows = userDao.delete(user);
            if (numberOfDeletedRows &gt; 0) {
                e.onComplete();
            } else {
                e.onError(new Exception(""Tried to delete a non existing user""));
            }
        }));
    }
}
</code></pre>

<p>and the user remote data source:</p>

<pre><code>public class UserRemoteDataSource implements UserDataSource {

    private final ISApiService apiService;

    @Inject
    UserRemoteDataSource(ISApiService apiService) {
        this.apiService = get(apiService);
    }

    @NonNull
    @Override
    public Single&lt;User&gt; login(final String email, final String password) {
        return apiService.login(email, password);
    }

    @Override
    public Flowable&lt;User&gt; getUser(final String id) {
        throw new RuntimeException(""NO getUser endpoint"");
    }

    @Override
    public Single&lt;User&gt; saveUser(final User user) {
        Map&lt;String, String&gt; params = new HashMap&lt;&gt;();

        params.put(ISApiConsts.EMAIL, user.getEmail());
        params.put(ISApiConsts.NAME, user.getName());
        params.put(ISApiConsts.PASSWORD, user.getPassword());
        params.put(ISApiConsts.PHONE, user.getPhone());
        params.put(ISApiConsts.COMPANY, user.getCompany());

        return apiService.signUp(params);
    }

    @Override
    public Completable deleteUser(final String id) {
        //can't delete user.
        return Completable.complete();
    }
}
</code></pre>

<p>UserDao interface ( It is using Room)</p>

<pre><code>@Dao
public interface UserDao extends BaseDao&lt;User&gt; {

    @Query(""SELECT * FROM user WHERE user_id = :id"")
    Flowable&lt;User&gt; getUserById(long id);

    @Query(""SELECT * FROM user WHERE email = :login AND password = :password"")
    Single&lt;User&gt; login(String login, String password);

}
</code></pre>

<p>What I want to know exactly is: How can I encapsulate my domain while still get access to possible problems like network and show it to the user using RxJava in the MVVM pattern?</p>
",3291164,,3674262,,2018-02-09 18:01:42,2018-02-10 0:39:50,Network Awareness from Repository using RxJava,<android><rx-java2><rx-android>,1,9,4,,
Android,48189415,1,,,,,,1/10/2018 14:17:50,,13,3814,"<p>I've started using Architecture Components in my application and I'm still learning how to use it. </p>

<p>In my app I have an Activity showing different Fragments sequentially. In some of them I need to communicate with a background service in order to receive data from external BLE sensors. Since I need to interact with the service in more than one Fragment, I'm wondering if ViewModel is the right place where to make the binding. <a href=""https://github.com/googlesamples/android-architecture-components/issues/20"" rel=""noreferrer"">I've looked around</a> but I didn't found an answer.</p>

<p>Are there any problems binding a service inside a ViewModel?</p>
",302798,,,,,2018-02-20 6:37:35,Is it correct to bind a ViewModel to a Service?,<android><android-service><android-architecture-components><android-viewmodel>,1,3,1,,
Android,48198374,1,,,,,,1/11/2018 0:53:45,,1,301,"<p>From <a href=""https://github.com/googlesamples/android-Camera2Basic"" rel=""nofollow noreferrer"">Camera2Basic</a> example, I modified the code to make the program continuously takes still photo every 2 seconds. It runs fine but after a while it enters the same statecallback condition and does not take picture anymore:</p>

<pre><code>case STATE_WAITING_PRECAPTURE: {
                // CONTROL_AE_STATE can be null on some devices
                Integer aeState = result.get(CaptureResult.CONTROL_AE_STATE);
                if (aeState == null ||
                        aeState == CaptureResult.CONTROL_AE_STATE_PRECAPTURE ||
                        aeState == CaptureRequest.CONTROL_AE_STATE_FLASH_REQUIRED) {
                    mState = STATE_WAITING_NON_PRECAPTURE;
                }
                else
                {
                    Log.e(TAG,""aeState = "" + aeState);
                }
                break;
            }
</code></pre>

<p>The log keeps printing aeState = 2, which is CONTROL_AE_STATE_CONVERGED. My question is why the code does nothing when the AE is converged? Why not change state to STATE_WAITING_NON_PRECAPTURE? </p>

<p>I mean why not doing this instead?</p>

<pre><code>case STATE_WAITING_PRECAPTURE: {
            // CONTROL_AE_STATE can be null on some devices
            Integer aeState = result.get(CaptureResult.CONTROL_AE_STATE);
            if (aeState == null ||
                    aeState == CaptureResult.CONTROL_AE_STATE_CONVERGED ||
                    aeState == CaptureResult.CONTROL_AE_STATE_PRECAPTURE ||
                    aeState == CaptureRequest.CONTROL_AE_STATE_FLASH_REQUIRED) {
                mState = STATE_WAITING_NON_PRECAPTURE;
            }
            else
            {
                Log.e(TAG,""aeState = "" + aeState);
            }
            break;
        }
</code></pre>

<p>ps: Where should I call takePicture() if I want to take photo every 2 seconds? Currently I call it in the CaptureCallback, but look like there some race condition because the CaptureCallback is in the background thread.</p>

<p>Thanks.</p>
",1726452,,1726452,,2018-01-11 8:18:33,2018-01-11 8:18:33,Continuously take still photo with android Camera2,<android><android-camera><android-camera2>,1,1,,,
Android,48241802,1,,,,,,1/13/2018 16:24:55,,1,224,"<p>Iâ€™m trying to implement Dagger 2 in my Android app, and got stuck it this problem:
The ActivityModels I use are created with an implementation of ViewModelProvider.Factory (as the <a href=""https://github.com/googlesamples/android-architecture-components/tree/master/GithubBrowserSample"" rel=""nofollow noreferrer"">example here</a>). I attach the model to the activity by injecting the factory and calling:</p>

<pre><code>viewModel = ViewModelProviders.of(this, viewModelFactory).get(MyActivityViewModel.class);
</code></pre>

<p>In another part of the app Iâ€™m trying to use a Command class to make changes to the model, so I injected MyActivityViewModel directly to it.</p>

<pre><code>@Inject
public SearchCommand(MyActivityViewModel viewModel) {
    super(viewModel);
}
</code></pre>

<p>The problem: The injected ViewModel is a new instance of the view model, different than the one instantiated in the Activity. Whatever I try I donâ€™t manage to solve thatâ€¦ Any ideas?</p>
",2919354,,2649012,,2018-01-13 16:52:33,2018-06-05 4:05:58,Dagger 2 - two instances of the same View model are created,<android><viewmodel><dagger-2><dagger.android>,1,2,,,
Android,48382642,1,,,,,,1/22/2018 13:25:21,,1,90,"<p>I'm starting to develop Android Wear watchfaces using <a href=""https://github.com/googlesamples/android-WatchFace"" rel=""nofollow noreferrer"">Google's Sample app</a> as a reference. I am running in to an issue where I do <em>not</em> want color tinting on my complications. Specifically, the google assistant complication. However, no matter what I do, the google assistant complication will appear with some type of color tinting.</p>

<p>When looking through Google's code, I can only find a single reference to color tinting the complication:</p>

<pre><code>    private void setComplicationsActiveAndAmbientColors(int primaryComplicationColor) {
        int complicationId;
        ComplicationDrawable complicationDrawable;

        for (int i = 0; i &lt; COMPLICATION_IDS.length; i++) {
            complicationId = COMPLICATION_IDS[i];
            complicationDrawable = mComplicationDrawableSparseArray.get(complicationId);

            if (complicationId == BACKGROUND_COMPLICATION_ID) {
                // It helps for the background color to be black in case the image used for the
                // watch face's background takes some time to load.
                complicationDrawable.setBackgroundColorActive(Color.BLACK);
            } else {
                // Active mode colors.
                complicationDrawable.setBorderColorActive(primaryComplicationColor);
                complicationDrawable.setRangedValuePrimaryColorActive(primaryComplicationColor);

                // Ambient mode colors.
                Log.d(""TAG Type"", ""Failed at complication "" + i);
                complicationDrawable.setIconColorActive(Color.WHITE);
                complicationDrawable.setBorderColorAmbient(Color.WHITE);
                complicationDrawable.setRangedValuePrimaryColorAmbient(Color.WHITE);
            }
        }
    }
</code></pre>

<p>When I comment out </p>

<pre><code>complicationDrawable.setIconColorActive(Color.WHITE);
</code></pre>

<p>The color is still tinted white. If I were to uncomment and change the value to something like Color.BLUE, the icon will appear blue.</p>

<p><a href=""https://i.stack.imgur.com/R2cVc.png"" rel=""nofollow noreferrer""><img src=""https://i.stack.imgur.com/R2cVc.png"" alt=""Watchface with Google Assistant color tinting""></a></p>

<p>I know it is possible to disable complication tinting because one of my Fossil watchfaces displays the Google Assistant logo the way I wish. </p>

<p><a href=""https://i.stack.imgur.com/ujYPX.png"" rel=""nofollow noreferrer""><img src=""https://i.stack.imgur.com/ujYPX.png"" alt=""enter image description here""></a></p>

<p>Does anyone know how I can disable color tinting for my complications?</p>
",1568480,,,,,2018-01-25 18:38:24,Prevent Android Wear Complication Tinting,<java><android><wear-os><android-wear-complication>,1,1,,,
Android,48524083,1,,,,,,1/30/2018 14:43:37,,1,452,"<p>I have a problem with android camera2. I started from <a href=""https://github.com/googlesamples/android-Camera2Basic"" rel=""nofollow noreferrer"">camera2Basic</a> and changed it so that preview and capture takes manual pictures. So I changed <code>CameraDevice.TEMPLATE_PREVIEW</code> and <code>CameraDevice.TEMPLATE_STILL_CAPTURE</code> both to <code>CameraDevice.TEMPLATE_MANUAL</code>.</p>

<p>And I removed the preview callback, because without autofocus there is no need for it. So here is how I take a picture:</p>

<pre><code>final CameraCaptureSession.CaptureCallback captureCallback
                = new CameraCaptureSession.CaptureCallback() {

            @Override
            public void onCaptureCompleted(@NonNull CameraCaptureSession session,
                                           @NonNull CaptureRequest request,
                                           @NonNull TotalCaptureResult result) {
                showToast(""Saved"");
                unlockFocus();
            }
        };

mCaptureSession.stopRepeating();
mCaptureSession.abortCaptures();
mCaptureSession.capture(mCaptureRequest, captureCallback, null);
</code></pre>

<p>And in <code>unlockFocus</code>:</p>

<pre><code>mCaptureSession.capture(mPreviewRequest, null, mBackgroundHandler);
mCaptureSession.setRepeatingRequest(mPreviewRequest, mPreviewCaptureCallback,
                mBackgroundHandler);
</code></pre>

<p>But it works for 5 pictures every time, and then it never goes in <code>onCaptureCompleted</code> in the callback and I can't figure out why. </p>

<p>Can someone help me with this ? </p>

<p><em>EDIT:</em></p>

<p><code>captureCallback</code>'s <code>onCaptureFailed</code> says that the image has been taken but the capture failed with <code>reason == 0</code> (Error in the framework but I don't know where, and how it could even work for 5 first captures) and the sequence id always go up by two when taking a picture. </p>

<p>So it means that the error occur whenever <code>seqid &gt; 10</code>, is there a link ?</p>
",9013967,,9013967,,2018-01-31 8:29:28,2018-01-31 10:16:31,Camera2 API Working Only for First 5 Pictures,<java><android><android-camera2>,1,3,,2018-01-31 10:18:14,
Android,48604251,1,,,,,,2/4/2018 2:58:43,,3,2084,"<p>Google says that is not possible to observe a LiveData from a ViewModel:</p>

<blockquote>
  <p>[...] However ViewModel objects must never observe changes to
  lifecycle-aware observables, such as LiveData objects.[...]</p>
</blockquote>

<p>And I would handle the <code>repo.login()</code> result in the ViewModel and notify the UI thought the two <a href=""https://github.com/googlesamples/android-architecture/blob/dev-todo-mvvm-live/todoapp/app/src/main/java/com/example/android/architecture/blueprints/todoapp/SingleLiveEvent.java"" rel=""nofollow noreferrer"">SingleLiveEvent</a>s, is it possible?</p>

<pre><code>class Repository {
    // .... //
    fun login(user:String, password:String): LiveData&lt;Status&gt; { /* ... */ }
}

class LoginViewModel : ViewModel() {

    @Inject
    lateinit var repo: Repository

    private var auth = MutableLiveData&lt;User&gt;()
    private var showErrorEvent = SingleLiveEvent&lt;String&gt;()
    private var showSuccessEvent = SingleLiveEvent&lt;String&gt;()

    // Called from UI
    fun performLogin(user:User){
        repo.login(user.name, user.password)
        // We can't observe the result here 
        // and update error/success events
    }

    // Called from UI
    fun getErrorEvent() = showErrorEvent

    // Called from UI
    fun getSuccessEvent() = showSuccessEvent

}
</code></pre>
",3550413,,,,,2018-02-07 20:13:28,Observing repository LiveData from ViewModel and notify UI,<android><mvvm><kotlin><android-architecture-components>,1,2,,,
Android,48608334,1,,,,,,2/4/2018 13:03:17,,1,264,"<p>I am trying to develop android face recognition app. Starting from <a href=""https://github.com/googlesamples/android-vision/tree/master/visionSamples/FaceTracker"" rel=""nofollow noreferrer"">Google Vision API FaceTracker example</a> - <strong>how can I get camera preview FPS value</strong>? </p>

<p>I understand that I can set requested FPS on <code>CameraSource.Builder()</code> with <code>setRequestedFps()</code>, but I want <strong>actual</strong> FPS value updated every second or every new frame. Is it possible to get or calculate it?</p>
",2568647,,2649012,,2018-02-04 15:17:24,2018-02-04 16:02:44,Google Vision API CameraSourcePreview FPS,<android><android-camera><frame-rate><face-recognition><google-vision>,1,0,,,
Android,48675221,1,,,,,,2/7/2018 23:45:11,,6,833,"<p>I can't understand why this very simple activity produces memory leaks.</p>

<p>It follows the guidelines given here: <a href=""https://developer.android.com/training/location/receive-location-updates.html"" rel=""noreferrer"">https://developer.android.com/training/location/receive-location-updates.html</a> and the example code given here: <a href=""https://github.com/googlesamples/android-play-location/tree/master/LocationUpdates"" rel=""noreferrer"">https://github.com/googlesamples/android-play-location/tree/master/LocationUpdates</a></p>

<p>I also noticed that the memory leak is solved if I don't override the onLocationResult method of the LocationCallback class.
But in this ways the LocationCallback is completely useless.</p>

<p>Thank you for your help!</p>

<pre><code>public class TestLeaks extends Activity {
    private FusedLocationProviderClient mFusedLocationClient;   // Access to Fused Loc. Provider API
    private LocationRequest mLocationRequest;         // Stores parameters for requests to F.L.P.Api
    private LocationCallback mLocationCallback;                      // Callback for Location events

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.test_leaks);

        mFusedLocationClient = LocationServices.getFusedLocationProviderClient(this);
        mLocationCallback = new LocationCallback() {
            @Override
            public void onLocationResult(LocationResult locationResult) {
                super.onLocationResult(locationResult);
                Location loc = locationResult.getLastLocation();
                ((TextView) findViewById(R.id.latitude)).setText(String.format(Locale.US, ""%.6f"", loc.getLatitude()));
                ((TextView) findViewById(R.id.longitude)).setText(String.format(Locale.US, ""%.6f"", loc.getLongitude()));
            }
        };

        mLocationRequest = new LocationRequest()
                .setInterval(5000)
                .setFastestInterval(2000)
                .setPriority(LocationRequest.PRIORITY_HIGH_ACCURACY);
    }

    @SuppressLint(""MissingPermission"")
    @Override
    public void onResume() {
        super.onResume();
        mFusedLocationClient.requestLocationUpdates(mLocationRequest, mLocationCallback, Looper.myLooper());
    }

    @Override
    protected void onPause() {
        super.onPause();
        mFusedLocationClient.removeLocationUpdates(mLocationCallback);
    }

    @Override
    protected void onDestroy() {
        super.onDestroy();
        mLocationCallback = null;
    }
}
</code></pre>

<p>This is the output of LeakCanary about the detected memory leak:</p>

<pre><code>In it.myapp.app:1.0.4:10004.
* it.myapp.app.activities.TestLeaks has leaked:
* GC ROOT com.google.android.gms.internal.zzcfe.zzfus
* references com.google.android.gms.common.api.internal.zzci.zzful
* references com.google.android.gms.common.api.internal.zzck.zzfuk
* references it.myapp.app.activities.TestLeaks$1.this$0 (anonymous subclass of com.google.android.gms.location.LocationCallback)
* leaks it.myapp.app.activities.TestLeaks instance

* Retaining: 35 KB.
* Reference Key: 969b4256-81ff-4b01-b0d4-63e27e49b764
* Device: samsung samsung SM-G920F zerofltexx
* Android Version: 7.0 API: 24 LeakCanary: 1.5.4 74837f0
* Durations: watch=637463ms, gc=258ms, heap dump=2766ms, analysis=46757ms

* Details:
* Instance of com.google.android.gms.internal.zzcfe
|   static $classOverhead = byte[768]@317861889 (0x12f23001)
|   zzfus = com.google.android.gms.common.api.internal.zzci@318105032 (0x12f5e5c8)
|   mDescriptor = java.lang.String@317290744 (0x12e978f8)
|   mObject = 511599546432
|   mOwner = com.google.android.gms.internal.zzcfe@317359520 (0x12ea85a0)
|   shadow$_klass_ = com.google.android.gms.internal.zzcfe
|   shadow$_monitor_ = 0
* Instance of com.google.android.gms.common.api.internal.zzci
|   static $classOverhead = byte[648]@316776449 (0x12e1a001)
|   zzfuj = com.google.android.gms.common.api.internal.zzcj@317594368 (0x12ee1b00)
|   zzfuk = null
|   zzful = com.google.android.gms.common.api.internal.zzck@318185888 (0x12f721a0)
|   shadow$_klass_ = com.google.android.gms.common.api.internal.zzci
|   shadow$_monitor_ = 0
* Instance of com.google.android.gms.common.api.internal.zzck
|   static $classOverhead = byte[608]@316789761 (0x12e1d401)
|   zzfuk = it.myapp.app.activities.TestLeaks$1@318185648 (0x12f720b0)
|   zzfun = java.lang.String@317049344 (0x12e5ca00)
|   shadow$_klass_ = com.google.android.gms.common.api.internal.zzck
|   shadow$_monitor_ = 0
* Instance of it.myapp.app.activities.TestLeaks$1
|   static $classOverhead = byte[640]@316606465 (0x12df0801)
|   static serialVersionUID = -1641506329145588052
|   static $change = null
|   this$0 = it.myapp.app.activities.TestLeaks@317686496 (0x12ef82e0)
|   shadow$_klass_ = it.myapp.app.activities.TestLeaks$1
|   shadow$_monitor_ = -1897236332
* Instance of it.myapp.app.activities.TestLeaks
|   static $classOverhead = byte[4336]@316567553 (0x12de7001)
|   static serialVersionUID = 2740572635131010457
|   static $change = null
|   mFusedLocationClient = com.google.android.gms.location.FusedLocationProviderClient@317049680 (0x12e5cb50)
|   mLocationCallback = null
|   mLocationRequest = com.google.android.gms.location.LocationRequest@318159496 (0x12f6ba88)
|   mActionBar = null
|   mActionModeTypeStarting = 0
|   mActivityInfo = android.content.pm.ActivityInfo@317696896 (0x12efab80)
|   mActivityTransitionState = android.app.ActivityTransitionState@317736656 (0x12f046d0)
|   mAppLockCheckRunnable = android.app.Activity$1@318057504 (0x12f52c20)
|   mAppLockIsInMultiWindowMode = false
|   mApplication = it.myapp.app.CanaryLeak@315492064 (0x12ce06e0)
|   mCalled = true
|   mChangeCanvasToTranslucent = false
|   mChangingConfigurations = false
|   mComponent = android.content.ComponentName@318099536 (0x12f5d050)
|   mConfigChangeFlags = 0
|   mCurrentConfig = android.content.res.Configuration@317764560 (0x12f0b3d0)
|   mDecor = null
|   mDefaultKeyMode = 0
|   mDefaultKeySsb = null
|   mDestroyed = true
|   mDoReportFullyDrawn = false
|   mEatKeyUpEvent = false
|   mEmbeddedID = null
|   mEnableDefaultActionBarUp = false
|   mEnterTransitionListener = android.app.SharedElementCallback$1@1899179144 (0x71332c88)
|   mExitTransitionListener = android.app.SharedElementCallback$1@1899179144 (0x71332c88)
|   mFinished = true
|   mFlipfont = 0
|   mFragments = android.app.FragmentController@318057472 (0x12f52c00)
|   mHandler = android.os.Handler@317542688 (0x12ed5120)
|   mHasCurrentPermissionsRequest = false
|   mIdent = 165309401
|   mInstanceTracker = android.os.StrictMode$InstanceTracker@318057488 (0x12f52c10)
|   mInstrumentation = android.app.Instrumentation@315494968 (0x12ce1238)
|   mIntent = android.content.Intent@314929344 (0x12c570c0)
|   mLastNonConfigurationInstances = null
|   mMainThread = android.app.ActivityThread@315314736 (0x12cb5230)
|   mManagedCursors = java.util.ArrayList@318035832 (0x12f4d778)
|   mManagedDialogs = null
|   mMenuInflater = null
|   mParent = null
|   mPolicyManager = null
|   mReferrer = java.lang.String@314929856 (0x12c572c0)
|   mResultCode = 0
|   mResultData = null
|   mResumed = false
|   mScreenChangeListener = null
|   mSearchEvent = null
|   mSearchManager = null
|   mStartedActivity = false
|   mStopped = true
|   mTaskDescription = android.app.ActivityManager$TaskDescription@317542720 (0x12ed5140)
|   mTemporaryPause = false
|   mTitle = java.lang.String@315505152 (0x12ce3a00)
|   mTitleColor = 0
|   mTitleReady = true
|   mToken = android.os.BinderProxy@315387808 (0x12cc6fa0)
|   mTranslucentCallback = null
|   mUiThread = java.lang.Thread@2004343960 (0x7777dc98)
|   mVisibleBehind = false
|   mVisibleFromClient = true
|   mVisibleFromServer = true
|   mVoiceInteractor = null
|   mWindow = com.android.internal.policy.PhoneWindow@315451968 (0x12cd6a40)
|   mWindowAdded = true
|   mWindowManager = android.view.WindowManagerImpl@318034248 (0x12f4d148)
|   mInflater = com.android.internal.policy.PhoneLayoutInflater@316645632 (0x12dfa100)
|   mOverrideConfiguration = null
|   mResources = android.content.res.Resources@316047040 (0x12d67ec0)
|   mTheme = android.content.res.Resources$Theme@318057696 (0x12f52ce0)
|   mThemeResource = 2131820551
|   mBase = android.app.ContextImpl@316473008 (0x12dcfeb0)
|   shadow$_klass_ = it.myapp.app.activities.TestLeaks
|   shadow$_monitor_ = 1073742768
* Excluded Refs:
| Field: android.view.inputmethod.InputMethodManager.mNextServedView
| Field: android.view.inputmethod.InputMethodManager.mServedView
| Field: android.view.inputmethod.InputMethodManager.mServedInputConnection
| Field: android.view.textservice.SpellCheckerSession$1.this$0
| Field: com.samsung.android.content.clipboard.SemClipboardManager.mContext
| Field: com.samsung.android.emergencymode.SemEmergencyManager.mContext
| Field: android.view.Choreographer$FrameDisplayEventReceiver.mMessageQueue (always)
| Thread:FinalizerWatchdogDaemon (always)
| Thread:main (always)
| Thread:LeakCanary-Heap-Dump (always)
| Class:java.lang.ref.WeakReference (always)
| Class:java.lang.ref.SoftReference (always)
| Class:java.lang.ref.PhantomReference (always)
| Class:java.lang.ref.Finalizer (always)
| Class:java.lang.ref.FinalizerReference (always)
</code></pre>
",8073535,,,,,2018-10-10 4:09:29,Location Updates with FusedLocationProviderClient produces memory leaks,<android><memory-leaks><google-api-client><fusedlocationproviderclient><location-updates>,1,1,2,,
Android,48887518,1,,,,,,2/20/2018 14:29:04,,1,476,"<p>My Espresso test is working fine with Espresso version <code>2.2.2</code> but When I update my studio to latest one and applied migration rule test going to fail and required to update the version.<br>
<strong>library using</strong> </p>

<pre><code>androidTestImplementation'com.android.support.test.espresso:espresso-core:3.0.1'
    implementation 'com.android.support.test.espresso:espresso-idling-resource:3.0.1'
    androidTestImplementation 'junit:junit:4.12'
    androidTestImplementation 'com.android.support.test:runner:1.0.1'
    androidTestCompile 'com.android.support.test:rules:1.0.1'
    androidTestImplementation ""com.android.support:support-annotations:${support}""
    implementation fileTree(include: ['*.jar'], dir: 'libs')
</code></pre>

<p>For Idling resource during testing I am using the <a href=""https://github.com/googlesamples/android-testing/tree/master/ui/espresso/IdlingResourceSample"" rel=""nofollow noreferrer"">IdlingResourceSample</a> also I also tried <a href=""https://github.com/chiuki/espresso-samples/tree/master/idling-resource-intent-service"" rel=""nofollow noreferrer"">idling-resource-intent-service</a>  As I am using <code>IntentService</code> and <code>BroadcastReceiver</code>.<br>
As There is issue in <code>Espresso</code> <a href=""https://issuetracker.google.com/issues/65568629"" rel=""nofollow noreferrer""> Espresso.onIdle</a> &amp; <a href=""https://issuetracker.google.com/issues/65576174"" rel=""nofollow noreferrer"">Espresso IdlingResourceRegistry.sync</a> which is already reported and will fix in next release. I use <code>IdlingRegistry</code> for registering. but still I am getting <code>AppNotIdleException</code><br>
<strong>Log Cat</strong></p>

<pre><code>android.support.test.espresso.AppNotIdleException: Looped for 35 iterations over 60 SECONDS. The following Idle Conditions failed ASYNC_TASKS_HAVE_IDLED.
at dalvik.system.VMStack.getThreadStackTrace(Native Method)
at java.lang.Thread.getStackTrace(Thread.java:1538)
at android.support.test.espresso.base.DefaultFailureHandler.getUserFriendlyError(DefaultFailureHandler.java:90)
at android.support.test.espresso.base.DefaultFailureHandler.handle(DefaultFailureHandler.java:52)
at android.support.test.espresso.ViewInteraction.waitForAndHandleInteractionResults(ViewInteraction.java:312)
at android.support.test.espresso.ViewInteraction.check(ViewInteraction.java:291)
at com.company.project.InstrumentedDeepLinkTest.setDeepLinkUri(InstrumentedDeepLinkTest.java:107)
at java.lang.reflect.Method.invoke(Native Method)
at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:50)
at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:47)
at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
at android.support.test.rule.ActivityTestRule$ActivityStatement.evaluate(ActivityTestRule.java:433)
at org.junit.rules.RunRules.evaluate(RunRules.java:20)
at org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:325)
at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:78)
at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:57)
at org.junit.runners.ParentRunner$3.run(ParentRunner.java:290)
at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:71)
at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:288)
at org.junit.runners.ParentRunner.access$000(ParentRunner.java:58)
at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:268)
at org.junit.runners.ParentRunner.run(ParentRunner.java:363)
at org.junit.runners.Suite.runChild(Suite.java:128)
at org.junit.runners.Suite.runChild(Suite.java:27)
at org.junit.runners.ParentRunner$3.run(ParentRunner.java:290)
at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:71)
at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:288)
at org.junit.runners.ParentRunner.access$000(ParentRunner.java:58)
at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:268)
at org.junit.runners.ParentRunner.run(ParentRunner.java:363)
at org.junit.runner.JUnitCore.run(JUnitCore.java:137)
at org.junit.runner.JUnitCore.run(JUnitCore.java:115)
at android.support.test.internal.runner.TestExecutor.execute(TestExecutor.java:58)
at android.support.test.runner.AndroidJUnitRunner.onStart(AndroidJUnitRunner.java:375)
at android.app.Instrumentation$InstrumentationThread.run(Instrumentation.java:2075) 
</code></pre>

<p>I disabled already animations from <code>developer Options</code></p>

<p>After Analyzing which <code>AsyncTask</code> is keeping my <code>App</code> busy, I got the <code>thread pool</code> having many <code>AsyncTask</code> related to <code>sun.misc.Unsafe.park(Unsafe.java:299)</code>.<br>
<strong>Thread Pool</strong></p>

<pre><code>AsyncTask #9: WAITING
02-21 16:16:39.955 1611-1670/com.myCompany.MyProject W/System.err:  java.lang.Object.wait(Native Method)
02-21 16:16:39.955 1611-1670/com.myCompany.MyProject W/System.err:  java.lang.Thread.parkFor$(Thread.java:1220)
02-21 16:16:39.955 1611-1670/com.myCompany.MyProject W/System.err:  sun.misc.Unsafe.park(Unsafe.java:299)
02-21 16:16:39.955 1611-1670/com.myCompany.MyProject W/System.err:  java.util.concurrent.locks.LockSupport.park(LockSupport.java:158)
02-21 16:16:39.955 1611-1670/com.myCompany.MyProject W/System.err:  java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.await(AbstractQueuedSynchronizer.java:2013)
02-21 16:16:39.955 1611-1670/com.myCompany.MyProject W/System.err:  java.util.concurrent.LinkedBlockingQueue.take(LinkedBlockingQueue.java:410)
02-21 16:16:39.955 1611-1670/com.myCompany.MyProject W/System.err:  java.util.concurrent.ThreadPoolExecutor.getTask(ThreadPoolExecutor.java:1036)
02-21 16:16:39.955 1611-1670/com.myCompany.MyProject W/System.err:  java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1098)
02-21 16:16:39.955 1611-1670/com.myCompany.MyProject W/System.err:  java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:588)
02-21 16:16:39.955 1611-1670/com.myCompany.MyProject W/System.err:  java.lang.Thread.run(Thread.java:818)
</code></pre>
",3026578,,3026578,,2018-02-22 12:38:51,2019-01-17 22:42:07,Espresso Test Fail due to App not Idle Exception: The following Idle Conditions failed ASYNC_TASKS_HAVE_IDLED,<android><unit-testing><android-espresso><android-instrumentation>,1,2,1,,
Android,48972343,1,,,,,,2/25/2018 10:11:04,,1,1654,"<p>I am looking for recommendation in handling below use case w.r.t. LiveData handling:
ViewModel invokes Repository for LiveData (e.g. products catalog). Repository checks from LocalDataSource(Room) first but if data not available, invokes RemoteDataSource(REST API). </p>

<p>Questions:</p>

<p>1) As per below comment from yigit <a href=""https://github.com/googlesamples/android-architecture-components/issues/44"" rel=""nofollow noreferrer"">here</a>, Repository can't get LiveData availability status in Room until it subscribes as observer. So even when data is avaiable, I get null in response. 
<em>""LiveData is to watch the data and distribute it to the observers. It won't calculate the value until an active observer is added.""</em></p>

<p>Since Repository hides data sources to clients, it is repository's responsibility to check in Room and then pull from Remote Source. How can it check for data availability in Room ?</p>

<p>2) Since data returned by RemoteDataSource is not LiveData type, what should be done so that repository eventually returns LiveData to ViewModel ?</p>

<p>Should Repository first insert data (from RemoteDataSource) into Room first and then query Room so it returns LiveData ? It looks quite expensive operation as there Room is queried twice in the process. Please advise . Thanks !</p>
",1992013,,1000551,,2018-03-19 11:21:28,2018-12-23 13:40:27,Repository to return LiveData when Room doesn't have it and instead fetches from REST API,<android><android-room><android-architecture-components><android-livedata><android-viewmodel>,2,0,1,,
Android,49024906,1,,,,,,2/28/2018 8:19:39,,1,36,"<p>I am trying to run the following two Google Sample projects:</p>

<p>1) Sample BLE Gatt Server <a href=""https://github.com/androidthings/sample-bluetooth-le-gattserver"" rel=""nofollow noreferrer"">https://github.com/androidthings/sample-bluetooth-le-gattserver</a></p>

<p>2) Sample BLE Gatt Client <a href=""https://github.com/googlesamples/android-BluetoothLeGatt"" rel=""nofollow noreferrer"">https://github.com/googlesamples/android-BluetoothLeGatt</a></p>

<p>I am using 2 phones:</p>

<p>1) <strong>Samsung Galaxy S5</strong></p>

<p>2) <strong>Motorola G4 Plus</strong></p>

<p>After adding small snippets of code for providing BLE and Coarse Location Access permissions, the projects worked with the Samsung Galaxy S5 hosting the server i.e. github project 1 and the Moto G4 Plus running the BLE Gatt client.</p>

<p>However, on reversing the roles, that is <code>Samsung Galaxy S5</code> running the client and the <code>Moto G4 Plus</code> hosting the server, I am not able to achieve successful connection.</p>

<p>I tried running the client on another phone (a Moto G5) and that failed too.</p>

<p>It seems the <code>Moto G4 Plus</code> is not able to connect successfully.</p>

<p>Can anyone please suggest why this could be happening? Are there any special permissions I need to take care of?</p>

<p>ADDITIONAL INFORMATION:
After attempting to debug the app, I found that on the problematic device i.e. the Moto G4 Plus, after connectGatt is called, BluetoothGattCallback is called but onConnectionStateChange() is not called.</p>
",2839691,,2839691,,2018-02-28 10:15:46,2018-03-01 6:00:34,Android device unable to connect with BleGattServer,<android><bluetooth-lowenergy><bluetooth-gatt>,1,0,,,
Android,49167514,1,,,,,,3/8/2018 7:21:52,,1,121,"<p>I need to store user credentials in <code>Android keystore</code>, not in preference. I can store them in it, but it persists till application is on. Once application is killed I am not able to get them as <code>SecretKey</code> or <code>PrivateKey</code> is lost. Is there any way to get stored values Or keys even after restarting app?.</p>

<p>I have checked multiple samples for this, but none of them helped me to solve my issue. Here are links. <a href=""https://github.com/afollestad/android-secure-storage"" rel=""nofollow noreferrer"">https://github.com/afollestad/android-secure-storage</a>
<a href=""https://github.com/googlesamples/android-BasicAndroidKeyStore/"" rel=""nofollow noreferrer"">https://github.com/googlesamples/android-BasicAndroidKeyStore/</a>
<a href=""https://github.com/nelenkov/android-keystore"" rel=""nofollow noreferrer"">https://github.com/nelenkov/android-keystore</a></p>

<p><a href=""https://codeload.github.com/nelenkov/android-keystore/zip/master"" rel=""nofollow noreferrer"">https://codeload.github.com/nelenkov/android-keystore/zip/master</a> </p>
",3355728,,,,,2018-07-26 16:50:44,Store user credentials in Android keystore/keychain,<android><keystore><keychain><key-storage>,1,0,,,
Android,49236067,1,,,,,,3/12/2018 13:08:23,,1,233,"<p>I never worked with such a confusing DI-framework like <a href=""/questions/tagged/dagger"" class=""post-tag"" title=""show questions tagged &#39;dagger&#39;"" rel=""tag"">dagger</a>! - However, I try to wrap my head around it.</p>

<p>I have two scopes: ActivityScope and FragmentScope</p>

<p>On some of the samples provided <a href=""https://github.com/googlesamples/android-architecture/blob/todo-mvp-dagger/todoapp/app/src/main/java/com/example/android/architecture/blueprints/todoapp/statistics/StatisticsFragment.java#L36"" rel=""nofollow noreferrer"">StatisticsFragment.java</a> you see e.g. the fragment annotated with the scope </p>

<pre><code>@ActivityScoped
public class StatisticsFragment extends DaggerFragment implements 
StatisticsContract.View {
...
}
</code></pre>

<p><strong>Question 1:</strong>
Is this just documentation or not? In my app it makes no difference if I annotate the concrete fragment or not.</p>

<p><strong>Question 2:</strong> Where in the generated code can I see which scope is used? My fragment injects a Presenter and an AuthProvider. The AuthProvider is annotated with Singleton (in AppModule), the Presenter is defined in UIModule -> LoginModule</p>

<p>looks like this:</p>

<p><strong>UIModule.java:</strong></p>

<hr>

<pre><code>@Module(includes = AndroidSupportInjectionModule.class)
public abstract class UIModule {

    @ActivityScope
    @ContributesAndroidInjector(modules = LoginModule.class)
    abstract LoginActivity loginActivity();

    @ChildFragmentScope
    @ContributesAndroidInjector(modules = LoginModule.class)
    abstract LoginFragment loginFragment();

    @Binds
    //@ChildFragmentScope
    public abstract LoginContract.View loginView(final LoginFragment fragment);
}
</code></pre>

<p><strong>LoginModule.java</strong></p>

<hr>

<pre><code>@Module
public abstract class LoginModule {

    @Provides
    //@ChildFragmentScope
    static LoginContract.Presenter provideLoginPresenter(final LoginContract.View view, final BaseStore store) {
        return new LoginPresenter(view,store);
    }

}
</code></pre>

<p><strong>LoginFragemt.java</strong></p>

<hr>

<pre><code>public class LoginFragment extends DaggerFragment {
   @Inject
   LoginContract.Presenter presenter;

   @Inject
   Provider&lt;MyAuthClass&gt; myAuthClass;

   ... 
}
</code></pre>

<p>presenter is created every time the Fragment gets created, myAuthClass gets created only once and is <a href=""/questions/tagged/singleton"" class=""post-tag"" title=""show questions tagged &#39;singleton&#39;"" rel=""tag"">singleton</a>.
Perfect - but I have no idea <strong>HOW</strong> this works!!!</p>

<p>DaggerFragment#onAttach must somehow know that Presenter is a ""local"" singleton and MyAuthClass is a <a href=""/questions/tagged/global"" class=""post-tag"" title=""show questions tagged &#39;global&#39;"" rel=""tag"">global</a>-<a href=""/questions/tagged/singleton"" class=""post-tag"" title=""show questions tagged &#39;singleton&#39;"" rel=""tag"">singleton</a> ...</p>
",504184,,3903073,,2018-03-12 17:08:34,2018-03-12 20:32:36,"Dagger 2, scopes + annotation",<dagger-2><dagger.android>,1,0,1,,
Android,49520242,1,,,,,,3/27/2018 18:40:52,,2,558,"<p>I was working with Android MVP architecture and I am following <a href=""https://github.com/googlesamples/android-architecture"" rel=""nofollow noreferrer"">Google MVP Architecture</a>.</p>

<p>I am facing issue when Activity have multiple fragment,In my case activity having 2 tab. I am not able to understand, Should i create two Presenter for every Fragment OR should i create one Presenter for this? now same thing with View.</p>

<p>Even i did'nt found any solution on <a href=""https://github.com/googlesamples/android-architecture"" rel=""nofollow noreferrer"">google-sample github repository</a>.</p>

<p>Can anyone please suggest me or show me live code which accomplish my above requirement.</p>
",5867850,,,,,2018-04-03 4:06:01,Multiple fragment in one Activity in Android MVP,<android><mvp><android-mvp><android-architecture>,2,3,1,,
Android,49696008,1,,,,,,4/6/2018 15:17:02,,1,729,"<p>How to switch this example here to use gcc?:
<a href=""https://github.com/googlesamples/android-ndk/tree/master/other-builds/ndkbuild/hello-libs"" rel=""nofollow noreferrer"">https://github.com/googlesamples/android-ndk/tree/master/other-builds/ndkbuild/hello-libs</a></p>

<p>Is there a way to set this over the gradle files?</p>

<p>Thx</p>
",4293275,,,,,2018-10-17 6:21:56,How to switch android-ndk example to use gcc instead of clang?,<gcc><gradle><android-ndk><clang>,1,3,,,
Android,49834875,1,,,,,,4/14/2018 18:35:57,,4,2021,"<p>I am currently working on a project regarding neural networks.
For this, I want to build an Android Application which should use tensorflow [lite] to solve some object detection / recognition problems.</p>

<p>As I want the code to be as portable as possible, I want to write most of the code in C++, thus using the C++ API of tensorflow lite over the Java API / wrapper.
So, I modified tensorflow/contrib/lite/BUILD and added the following to be able to create a shared tensorflow library.</p>

<pre><code>cc_binary(
name = ""libtensorflowLite.so"",

linkopts=[""-shared"", ""-Wl""],
linkshared=1,

copts = tflite_copts(),
deps = [
    "":framework"",
    ""//tensorflow/contrib/lite/kernels:builtin_ops"",
],

)
</code></pre>

<p>(Which is based on the answer to this issue: <a href=""https://github.com/tensorflow/tensorflow/issues/17826"" rel=""nofollow noreferrer"">https://github.com/tensorflow/tensorflow/issues/17826</a>)</p>

<p>Then I used</p>

<pre><code>bazel build //tensorflow/contrib/lite:libtensorflowLite.so --crosstool_top=//external:android/crosstool --cpu=arm64-v8a --host_crosstool_top=@bazel_tools//tools/cpp:toolchain --cxxopt=""-std=c++11""
</code></pre>

<p>to finally build it.</p>

<p>Afterwards I headed over to Android Studio and set up a basic project.
For adding the shared library to the project, I refered to this example: </p>

<p><a href=""https://github.com/googlesamples/android-ndk/tree/840858984e1bb8a7fab37c1b7c571efbe7d6eb75/hello-libs"" rel=""nofollow noreferrer"">https://github.com/googlesamples/android-ndk/tree/840858984e1bb8a7fab37c1b7c571efbe7d6eb75/hello-libs</a></p>

<p>I also added the needed dependencies for flatbuffers.</p>

<p>The build / compilation process succeeds without any linker errors (well, at least after trying around for some hours..).</p>

<p>The APK is then successfully installed on an Android device, but immediately crashes after it starts. Logcat gives the following output:</p>

<pre><code>04-14 20:09:59.084 9623-9623/com.example.hellolibs E/AndroidRuntime: FATAL EXCEPTION: main
    Process: com.example.hellolibs, PID: 9623
    java.lang.UnsatisfiedLinkError: dlopen failed: library ""/home/User/tensorflowtest/app/src/main/cpp/../../../../distribution/tensorflow/lib/x86/libtensorflowLite.so"" not found
        at java.lang.Runtime.loadLibrary0(Runtime.java:1016)
        at java.lang.System.loadLibrary(System.java:1657)
        at com.example.hellolibs.MainActivity.&lt;clinit&gt;(MainActivity.java:36)
        at java.lang.Class.newInstance(Native Method)
        at android.app.Instrumentation.newActivity(Instrumentation.java:1174)
        at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2669)
        at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2856)
        at android.app.ActivityThread.-wrap11(Unknown Source:0)
        at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1589)
        at android.os.Handler.dispatchMessage(Handler.java:106)
        at android.os.Looper.loop(Looper.java:164)
        at android.app.ActivityThread.main(ActivityThread.java:6494)
        at java.lang.reflect.Method.invoke(Native Method)
        at com.android.internal.os.RuntimeInit$MethodAndArgsCaller.run(RuntimeInit.java:438)
        at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:807)
</code></pre>

<p>I tried this on an android x86 emulator and on a real arm64-v8a android smartphone.</p>

<p>So for me this looks like on startup the application tries to load the tensorflowLite shared library, but is unable to find it. 
Opening the apk with a zip archive manager I can verify that the platform (arm, x86) dependent .so files are packed into the APK as expected (by adding the following to build.gradle: </p>

<pre><code>sourceSets {
        main {
            // let gradle pack the shared library into apk
            jniLibs.srcDirs = ['../distribution/tensorflow/lib']
        }
})
</code></pre>

<p>What I do not understand is why it looks for the library in the path where I placed it on my Ubuntu 17.10 PC.
So, I thought I had done a mistake trying to adapt the example about adding external libraries to an Android Studio Project I mentioned earlier.
That's why I downloaded the whole project and opened it in Android Studio and verified that the example works as expected. Afterwards I replaced the example libgperf.so by the libtensorflowLite.so and left everything else, especially the CMakeLists.txt, untouched.
But I get the exact same error again, therefore I suspect this to be a problem with the libtensorflowLite library itself and not the android project (although that's just my guess).</p>

<p>I am working on android studio 3.1.1, NDK Version 14 and API Level 24 (Android 7.0).
If anyone has an idea what could be wrong, any help would be highly appreciated.
I am also open for any other methods which allow me to use tensorflow lite with C++ for an android application.</p>

<p>Thanks a lot,</p>

<p>Martin</p>
",9646450,,,,,2019-03-06 21:24:56,Problems with using tensorflow lite C++ API in Android Studio Project,<android><c++><tensorflow><android-ndk><android-studio-3.0>,1,0,3,,
Android,49940190,1,,,,,,4/20/2018 11:02:23,,4,784,"<p>Iâ€™m working to add instant app feature to an existing application but I canâ€™t manage to test the instant app via Internal Test or Alpha Test.</p>

<p>For testing purpose I created a completely new application on Google Play Console and compiled the â€œ<strong>hello-java</strong>â€ sample in Git repository 
<a href=""https://github.com/googlesamples/android-instant-apps"" rel=""nofollow noreferrer"">Google samples:- android-instant-apps</a> , changing digital asset links.</p>

<p>I can correctly run the instant app via Android Studio on a real device.</p>

<p>On Google Play Console I uploaded an installed app APK in â€œ<strong>Internal Test</strong>â€ and added a group of tester. It works correctly, I can see and download the installed app.</p>

<p>Then I uploaded an instant app APK in â€œInternal Testâ€ but:</p>

<ul>
<li>test method dropdown is grayed out</li>
<li>when I open the URL provided by the Google Play Console: <a href=""https://play.google.com/apps/instantapptesting/_id_"" rel=""nofollow noreferrer"">https://play.google.com/apps/instantapptesting/<em>id</em></a> I get redirected to <a href=""https://play.google.com/apps/internaltest/_package_name_"" rel=""nofollow noreferrer"">https://play.google.com/apps/internaltest/_package_name_</a> and I see the message â€œApp not available for this accountâ€</li>
</ul>

<p>I tried the same process on Alpha channel but:</p>

<ul>
<li>test method dropdown is grayed out</li>
<li>when I open the URL provided by the Google Play Console: <a href=""https://play.google.com/apps/instantapptesting/_id_"" rel=""nofollow noreferrer"">https://play.google.com/apps/instantapptesting/<em>id</em></a> I get redirected to <a href=""https://play.google.com/apps/testing/_package_name_"" rel=""nofollow noreferrer"">https://play.google.com/apps/testing/_package_name_</a> and I see the page of the testing program</li>
<li>when I open Appâ€™s page on Google Play Store I donâ€™t see â€œTry nowâ€ button</li>
</ul>

<p>What am I missing?</p>

<p>Thank you</p>

<p>P.S.
The device Iâ€™m testing on has â€œInstant Appsâ€ enabled (I tried other Instant App already on Play Store)</p>
",1729650,,2638235,,2018-04-20 12:35:42,2018-04-20 12:35:42,Instant App not available for testing,<android><android-instant-apps>,1,0,1,,
Android,50031467,1,,,,,,4/25/2018 21:15:58,,2,251,"<p>I have a class called <code>CosuUtils</code> that follows <a href=""https://github.com/googlesamples/android-testdpc/blob/master/app/src/main/java/com/afwsamples/testdpc/cosu/CosuUtils.java"" rel=""nofollow noreferrer"">this</a> class pretty closely. I am programmatically updating an application that is a device owner. This works fine in Android 6 but I'm getting the following error when trying to update in Android 7. </p>

<p><code>PackageInstaller: Commit of session 1108510423 failed: /data/app/vmdl1108510423.tmp/COSU specified package com.mypackage inconsistent with com.mypackage.full</code></p>

<p>In <code>CosuUtils</code> I set the package name as such </p>

<pre><code>public static boolean installPackage(Context context, InputStream in, String packageName) throws IOException {
    PackageInstaller packageInstaller = context.getPackageManager().getPackageInstaller();
    PackageInstaller.SessionParams params = new PackageInstaller.SessionParams(PackageInstaller.SessionParams.MODE_FULL_INSTALL);
    params.setAppPackageName(packageName);
</code></pre>

<p>I was passing <code>com.mypackage</code> to <code>installPackage</code> which as mentioned earlier works fine on Android 6. This doesn't work in Android 7 unless I use <code>com.mypackage.full</code>. The issue is this breaks the ability for users who have upgraded to Android 7 to update to the latest version of the app. What changed between Android 6 and 7 that caused it to break and is there a work around for it?</p>
",9301093,,,,,2018-04-26 15:51:46,PackageInstaller error when pragmatically updating app,<android><android-7.0-nougat><device-owner><cosu><packageinstaller>,1,0,2,,
Android,50121501,1,,,,,,5/1/2018 18:06:46,,6,472,"<h2>TL;DR</h2>

<p>How do I deal with Activities that actively change data (for example through an EditText)? Do I keep saving their state in the SavedInstanceState on rotation and only use the ViewModel when all of the fields are ready, or is there a way to make the ViewModel responsible for checking/holding/using the UI's data?</p>

<h2>Question</h2>

<p>I'm developing my application using Google's Arch. Components, and writing my latest class I've noticed I'm not really sure on what the best practice is when handling, say, data coming from an Activity form.</p>

<h2>Example</h2>

<p>I have a POJO made of title, description, location, type</p>

<p>I have an Activity with four EditText: <code>title_et</code>, <code>description_et</code>, <code>location_et</code>, <code>type_et</code>.</p>

<p>My ViewModel, through a Repository (irrelevant here), can send an object to the Database when the <code>sendObject</code> function is called.</p>

<h3>How I'm doing it now</h3>

<p>The activity has the <code>mTitle</code>, <code>mDescription</code>, <code>mLocation</code>, <code>mType</code>.
On rotation, the activity saves all of the EditText values in the <code>savedInstanceState</code> bundle, and it loads them again populating the views.</p>

<p>When the user wants to send the object, it clicks a button and the activity calls the function <code>viewModel.sendObject(mTitle, mDescription, mLocation, mType)</code> after the necessary checks.</p>

<h3>Problems with this approach</h3>

<p>The activity is responsible of holding/checking all the data of the EditTexts, basically making the ViewModel only responsible of interacting with the Repository.</p>

<h3>What I'd like to accomplish</h3>

<p>Ideally, I'd want to make the Activity only responsible of the UI, delegating everything to the ViewModel.</p>

<p>This way I could call <code>sendObject()</code> and the ViewModel would have already all of the data needed.</p>

<h3>The LiveData situation</h3>

<p>Right now the ViewModel has only one instance of LiveData, inside that there is a Resource (which is <a href=""https://developer.android.com/topic/libraries/architecture/guide#addendum"" rel=""noreferrer"">taken from here</a>) and it's used to ""tell"" the Activity that new data has arrived or an error occurred.</p>

<p>This approach works fine in all Activities that just receive data from the network and display them. What do I do when I want to synchronise data coming FROM the Activity? Do I use one LiveData for each field and use that to display potential errors?</p>

<p>I've read most of the <a href=""https://github.com/googlesamples/android-architecture-components"" rel=""noreferrer"">samples</a> but all of the Activities there are passive.</p>

<h2>Conclusion</h2>

<p>Thanks to anyone who takes the time to help.</p>
",8095850,,,,,2018-05-08 17:04:06,Handling input with Android Architecture Components,<android><mvvm><android-architecture-components>,2,0,2,,
Android,50173009,1,,,,,,5/4/2018 10:41:31,,5,1115,"<p>I try to apply the MVVM pattern in my Android activity (I'm an Android noob).</p>

<p>I use Room with RxJava 2, e.g. this is a signature of a method in my repository:</p>

<pre><code>public Single&lt;MissionTask&gt; getMissionTaskByID(long id) {..}
</code></pre>

<p>In my <strong>ViewModel</strong> class I have a reference to the repository and code like this:</p>

<pre><code>private void doSomethingOnUserEvent() {
    ...
      missionTaskRepository.getMissionTaskByID(firstID).
          observeOn(AndroidSchedulers.mainThread()).
          subscribeOn(Schedulers.io()).
          subscribe(missionTask -&gt;
              {
                // do some work and update live data
              },
              t -&gt; {
                // handle error
              });
    ...
  }
</code></pre>

<p>So far so good, everything seems to work fine on the surface. Now - <code>subscribe</code> returns a <code>Disposable</code>.</p>

<p>My questions are:</p>

<ol>
<li>How should I handle the disposable (e.g. I can put it in a composite disposable and dispose the composite when the model is cleared)?</li>
<li>What will happen if I do not dispose it? Leak? Why? </li>
</ol>

<p>In some of the examples I've gone through there is no handling of the Disposable.</p>

<p><strong>Update:</strong> I've seen the usage of <a href=""https://github.com/googlesamples/android-architecture-components/blob/master/BasicRxJavaSample/app/src/main/java/com/example/android/observability/ui/UserActivity.java"" rel=""noreferrer"">composite disposable</a> in <a href=""https://github.com/googlesamples/android-architecture-components"" rel=""noreferrer"">android-architecture-components</a>.</p>

<p>Thanks.</p>
",520359,,520359,,2018-05-04 10:53:40,2018-05-04 10:53:40,MVVM - handling Disposable-s in ViewModel with RxJava and Room,<android><mvvm><rx-java2><android-room><android-viewmodel>,1,2,,,
Android,50177783,1,,,,,,5/4/2018 14:56:15,,10,928,"<p>What backwards compatibility does</p>

<pre><code>NotificationManagerCompat notificationManager = NotificationManagerCompat.from(this);
</code></pre>

<p>provide that I don't get from the normal</p>

<pre><code> NotificationManager notificationManager = (NotificationManager) getSystemService(Context.NOTIFICATION_SERVICE);
</code></pre>

<p>They both have a <code>notify</code> method that worked on my tested devices (down to API level 19).</p>

<p>The Google sample here doesn't even use the <code>Compat</code> version once:</p>

<p><a href=""https://github.com/googlesamples/android-NotificationChannels/blob/master/Application/src/main/java/com/example/android/notificationchannels/NotificationHelper.java"" rel=""noreferrer"">https://github.com/googlesamples/android-NotificationChannels/blob/master/Application/src/main/java/com/example/android/notificationchannels/NotificationHelper.java</a></p>
",8281994,,,,,2018-11-02 19:37:42,NotificationManagerCompat vs NotificationManager,<android><push-notification><notifications><android-notifications>,1,0,3,,
Android,50456919,1,,,,,,5/21/2018 21:36:55,,44,2004,"<p><strong>Short question</strong>:</p>

<p>What is the correct way to handle database + network on the Paging library from Architecture components, using an API that uses page + size to load a new page and the <code>BoundaryCallback</code> class?</p>

<p><strong>Research and explanation</strong></p>

<p>Currently the class <a href=""https://developer.android.com/reference/android/arch/paging/PagedList.BoundaryCallback"" rel=""noreferrer""><code>BoundaryCallback</code></a> used in the paging library for architecture components, receives as parameter the instance of an element in the list without actual context of where this element is at. It happens in <code>onItemAtFrontLoaded</code> and <code>onItemAtEndLoaded</code>.</p>

<p>My Api is supposed to receive the page and the size of the page to load the next chunk of data. Boundary callback, added as part of the paged list builder, is supposed to tell you when to load the next page of data based on prefetch distance and page size.</p>

<p>Since the Api needs the page number and the size of the page to provide, I don't see a way to send that to the Api just by receiving one of the elements from the list as offered in <code>onItemAtFrontLoaded</code> and <code>onItemAtEndLoaded</code>. Checking the google examples in <a href=""https://github.com/googlesamples/android-architecture-components/tree/master/PagingWithNetworkSample"" rel=""noreferrer"">this link</a>, they use the name of the last element to get the next one, but that doesn't fit an Api with page + size.</p>

<p>They also have another example with only network that uses <a href=""https://developer.android.com/reference/android/arch/paging/PageKeyedDataSource"" rel=""noreferrer""><code>PagedKeyedDatasource</code></a>, but there is no sample or clue on how to mix that with the database and the BoundaryCallback.</p>

<p><strong>Edit</strong>:
Only solutions I have found so far is to store the last loaded page on the shared preferences, but that sounds like a dirty trick.</p>

<p>Refer to 
<a href=""https://github.com/googlesamples/android-architecture-components/issues/252#issuecomment-392119468"" rel=""noreferrer"">https://github.com/googlesamples/android-architecture-components/issues/252#issuecomment-392119468</a> for official input on it.</p>
",1560067,,1560067,,2018-05-25 17:01:16,2019-01-06 17:52:15,Paging library - Boundary callback for network + db with API taking page and size,<android><android-room><android-architecture-components><android-livedata><android-paging>,2,5,3,,
Android,50735291,1,,,,,,6/7/2018 7:28:07,,2,538,"<p>I am developing an app which have the functionality of Screen sharing with other app.</p>

<p>I have used Media projection API for this. I have used MediaMuxer for combining Audio and Video for screen sharing.</p>

<p>I know that Media Projection APIs are used to screen recording but all I want to share the screen while recording.</p>

<p>For this, I have modify the writeSampleData of MediaMuxer class to send bytes via socket to other device over network.</p>

<p>Below is the code for that:</p>

<pre><code>OutputStream outStream;
</code></pre>

<p>outStream = ScreenRecordingActivity.getInstance().socket.getOutputStream();</p>

<pre><code>void writeSampleData(final int trackIndex, final ByteBuffer byteBuf, final MediaCodec.BufferInfo bufferInfo) {
    if (mStatredCount &gt; 0) {
        mMediaMuxer.writeSampleData(trackIndex, byteBuf, bufferInfo);

        if (bufferInfo.size != 0) {

            byteBuf.position(bufferInfo.offset);
            byteBuf.limit(bufferInfo.offset + bufferInfo.size);

            if (outStream != null) {

                try {

                    byte[] bytes = new byte[byteBuf.remaining()];
                    byteBuf.get(bytes);

                    //Send the data
                    outStream.write(bytes);
                    outStream.flush();

                } catch (IOException e) {
                    e.printStackTrace();
                }
            }
        }
    }
}
</code></pre>

<p>The bytes are successfully transfer via socket and I am also able to receive these bytes at receiver end.</p>

<p>Below is the code for receiving bytes at receiver end:</p>

<pre><code>private class SocketThread implements Runnable {
    @Override
    public void run() {

        Socket socket;
        try {
            serverSocket = new ServerSocket(SERVER_PORT);
        } catch (IOException e) {
            e.printStackTrace();
        }

        if (null != serverSocket) {
            while (!Thread.currentThread().isInterrupted()) {
                try {
                    socket = serverSocket.accept();
                    CommunicationThread commThread = new CommunicationThread(socket);
                    new Thread(commThread).start();
                } catch (IOException e) {
                    e.printStackTrace();
                }
            }
        }
    }


    class CommunicationThread implements Runnable {

        InputStream in;
        DataInputStream dis;

        public CommunicationThread(Socket clientSocket) {


            updateMessage(""Server Started..."");
        }

        public void run() {           

            while (!Thread.currentThread().isInterrupted()) {

                try {                       

                    byte[] data = new byte[512];               

                } catch (Exception e) {                    

                    e.printStackTrace();

                    try {
                        fos.close();
                    } catch (Exception e1) {

                        e1.printStackTrace();
                    }
                }
            }
        }
    }
}
</code></pre>

<p>I followed following links for Screen Sharing:</p>

<p><a href=""https://github.com/googlesamples/android-ScreenCapture"" rel=""nofollow noreferrer"">Screen capture</a></p>

<p><a href=""https://github.com/chinmoyp/screenrecorder"" rel=""nofollow noreferrer"">screenrecorder</a></p>

<p><a href=""https://stackoverflow.com/questions/32513379/how-to-record-screen-and-take-screenshots-using-android-api"">Screen recording with mediaProjection</a></p>

<p>I used some code from above examples and make app.</p>

<p>All I want to know is how to handle the bytes at receiver end. How to format these bytes to play live streaming from Sender Side.</p>

<p>Am I following the correct approach for sending and receiving bytes data?</p>

<p>Does MediaProjection Allows to streaming Screen while recording between applications?</p>

<p>Any help will be deeply appreciated.</p>
",7456015,,2649012,,2018-06-07 9:41:19,2018-06-07 20:35:19,Screen Sharing between Devices using Media Projection API,<android><mediacodec><mediamuxer><android-mediaprojection>,1,0,,,
Android,50747713,1,,,,,,6/7/2018 18:15:19,,1,231,"<p>So, I was looking into the new <a href=""https://developer.android.com/topic/libraries/architecture/paging"" rel=""nofollow noreferrer"">paging library</a> by android. It has different components that you need to implement to have it work. Let's say I want to hit an API with retrofit and endlessly scroll with pagination updates. What is the best way to pass by the Header or Field maps to Retrofit considering all the stuff that you need to implement( ViewModel, repository, data source etc)? 
<a href=""https://github.com/googlesamples/android-architecture-components/tree/master/PagingWithNetworkSample"" rel=""nofollow noreferrer"">https://github.com/googlesamples/android-architecture-components/tree/master/PagingWithNetworkSample</a></p>
",1778343,,,,,2018-08-09 5:50:28,How to pass by Retrofit Header and Field Maps with Paging Library,<android><paging><android-architecture-components><androidx>,2,0,1,,
Android,50758822,1,,,,,,6/8/2018 10:40:11,,3,3869,"<p>I tried to integrate google smart login and SMS SmsRetrieverClient  in my project. First thing that shocked me is, on the official documentation of these functionalities(<a href=""https://developers.google.com/identity/sms-retriever/request#prerequisites"" rel=""nofollow noreferrer"">https://developers.google.com/identity/sms-retriever/request#prerequisites</a>), the required libraries are missing. Some how i tried to find out the required ones on net that are : </p>

<pre><code>implementation 'com.google.android.gms:play-services-base:11.8.0'
implementation 'com.google.android.gms:play-services-identity:11.8.0'
implementation 'com.google.android.gms:play-services-auth:11.8.0'
implementation 'com.google.android.gms:play-services-auth-api-phone:11.8.0'
</code></pre>

<p>but as i sync the gradle one error is coming. i.e. </p>

<blockquote>
  <p>Failed to resolve: play-services-auth-base-license Open File</p>
</blockquote>

<p>I have made a lot of search on google but do not got any solution. 
The sample of google on git hub is: <a href=""https://github.com/googlesamples/android-credentials/tree/master/sms-verification/android"" rel=""nofollow noreferrer"">https://github.com/googlesamples/android-credentials/tree/master/sms-verification/android</a></p>
",2260963,,6176003,,2018-06-08 13:02:35,2018-12-04 13:43:14,Failed to resolve: play-services-auth-base-license version 11.8.0,<android><android-gradle><resolve><play-services-auth-base-license>,4,4,1,,
Android,50770478,1,,,,,,6/9/2018 2:48:34,,5,734,"<p>What am I trying to do:</p>

<p><strong>Using google exoPlayer to play music, foreground and background.</strong></p>

<p>Break into details:</p>

<ol>
<li>The app launches, google exoPlayer playback control UI should be visible and starts to play immediately. </li>
<li>As soon as the player starts to play, we should see the notification (Using exoplayer's <code>PlayerNotificationManager</code> )</li>
<li>User exits the app either by pressig back button or swipe from recent task, the player service should keep running in froeground with notification.</li>
<li>User taps the notification, it should brings up the app.</li>
</ol>

<p><strong>What I have done:</strong>
I followed google IO18 on this link
<a href=""https://www.youtube.com/watch?v=svdq1BWl4r8&amp;t=1990s"" rel=""noreferrer"">https://www.youtube.com/watch?v=svdq1BWl4r8&amp;t=1990s</a></p>

<p>While I am following the above youtube link, especially the audio app part, I realize one thing, how do you pros add player control UI into this app?</p>

<p>e.g, the app is onDestory, user quits. Then user taps on the notification, back to the MainActivity, there is nothing there, it's an empty screen, quesiton is, <strong>how do you add play control ui in here?</strong></p>

<p>I have looked into <a href=""https://github.com/googlesamples/android-UniversalMusicPlayer"" rel=""noreferrer"">https://github.com/googlesamples/android-UniversalMusicPlayer</a> tyring to figure out this. However, the Universal Android Music Player Sample is using a giant notification (Not PlayerNotificationManager see on IO18) and custom player ui (Not ExoPlayer out of box control UI) which is confusing me a lot.</p>

<p>Please, please, please help.
<strong>How to add player control ui in the following code.</strong>
<a href=""https://github.com/bizkitj/MediaSessionExoPlayer/tree/ExoPlayerGoogleIO2018"" rel=""noreferrer"">https://github.com/bizkitj/MediaSessionExoPlayer/tree/ExoPlayerGoogleIO2018</a></p>

<p>If you can , please not only show me how you do it, I also need to know why did you do it? Break into steps.</p>

<p>Version of ExoPlayer being used:</p>

<pre><code>implementation 'com.google.android.exoplayer:exoplayer-core:2.8.0' 
implementation 'com.google.android.exoplayer:exoplayer-ui:2.8.0'
implementation 'com.google.android.exoplayer:extension-mediasession:2.8.0'
</code></pre>

<p>Please be noted, I am tyring to buid things upon the googleIO18 demo app. This demo app is using exoPlayer's <code>PlayerNotificationManager</code> which is great to keep sync with <code>MediaSession</code>, I do not want to change this <code>PlayerNotificationManager</code>  to android <code>Notification.MediaStyle</code>.</p>

<p>Thank you.</p>
",8328523,,5810747,,2018-06-09 11:17:59,2018-08-27 19:25:09,how to add player control ui in google IO18 audio App demo,<exoplayer><exoplayer2.x>,1,3,1,,
Android,50782496,1,,,,,,6/10/2018 9:55:47,,2,411,"<p>I have a class in my app with executors for disk/network operations, like <a href=""https://github.com/googlesamples/android-architecture-components/blob/master/GithubBrowserSample/app/src/main/java/com/android/example/github/AppExecutors.kt"" rel=""nofollow noreferrer"">this</a>. Is it possible to tell Room to use one of those to execute live queries?</p>
",3998718,,,,,2018-06-10 20:07:26,How to specify which thread(s) room live queries to run on?,<android><android-room><android-architecture-components>,1,3,1,,
Android,50797934,1,,,,,,6/11/2018 12:36:58,,13,138,"<p>I am trying <a href=""https://github.com/googlesamples/android-UniversalMusicPlayer"" rel=""noreferrer"">uamp</a> sample, whenever orientation changes MediaBrowserFragment  recyclerview state is lost(its scroll position is not maintained).</p>

<p>My problem is how to maintain scroll position in uamp sample.</p>

<p>I know I can save scroll position and restore it later but since recyclerView itself maintains scroll state I don't want that hacks.</p>

<p>I tried pushing this simple fragment instead of MediaBrowserFragment and its maintaining its scroll </p>

<pre><code>public class TestFragment extends Fragment {

    @Override
    public View onCreateView(@NonNull LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {
        View mRootView = inflater.inflate(R.layout.fragment_test, container, false);
        RecyclerView recyclerView = (RecyclerView) mRootView.findViewById(R.id.recyclerView);
        recyclerView.setLayoutManager(new LinearLayoutManager(getActivity()));
        recyclerView.setAdapter(new RecAdapter());
        return mRootView;
    }


    private class RecAdapter extends RecyclerView.Adapter&lt;RecyclerView.ViewHolder&gt; {

        @NonNull
        @Override
        public RecyclerView.ViewHolder onCreateViewHolder(@NonNull ViewGroup parent, int viewType) {
            View itemView = LayoutInflater.from(parent.getContext()).inflate(R.layout.layout_text, null);
            return new ItemViewHolder(itemView);
        }

        @Override
        public void onBindViewHolder(@NonNull RecyclerView.ViewHolder holder, int position) {
            ((ItemViewHolder) holder).title.setText(""""+ position);
        }

        @Override
        public int getItemCount() {
            return 200;
        }
    }

    private class ItemViewHolder extends RecyclerView.ViewHolder {
        TextView title;

        ItemViewHolder(View itemLayoutView) {
            super(itemLayoutView);
            title = (TextView) itemLayoutView.findViewById(R.id.title);
        }
    }
}
</code></pre>

<p><strong>Update</strong></p>

<p>I raised the issue with uamp </p>

<p><a href=""https://github.com/googlesamples/android-UniversalMusicPlayer/issues/217"" rel=""noreferrer"">https://github.com/googlesamples/android-UniversalMusicPlayer/issues/217</a></p>
",517247,,517247,,2018-06-30 4:20:15,2018-06-30 4:20:15,UAMP MediaBrowser orientation,<android><mediabrowserservicecompat>,1,0,,,
Android,50970915,1,,,,,,6/21/2018 14:24:23,,33,2247,"<h2>Background</h2>

<p>Phone recording is not really supported on Android, yet some devices support it to some extend. </p>

<p>This made various call recording apps gather as much possible information about devices and what should be done to them, and decide upon this what to do.</p>

<p>Some even offer root solutions.</p>

<p>One such example is <a href=""https://play.google.com/store/apps/details?id=com.boldbeast.recorder&amp;hl=en"" rel=""noreferrer""><strong>boldbeast Call Recorder app</strong></a>, which offers a lot of various configurations to change:</p>

<p><a href=""https://i.stack.imgur.com/SV6Ud.png"" rel=""noreferrer""><img src=""https://i.stack.imgur.com/SV6Ud.png"" alt=""enter image description here""></a></p>

<ul>
<li><p>""record mode"" . Shows 14 modes for non-rooted devices, and up to 34 for rooted. Also shows ""Alsa mode"" as an option for it, for rooted devices.</p></li>
<li><p>Has ""Tune Audio Effect (""auto tune a groupd of parameters"") . </p></li>
<li><p>Has ""Tune Audio Route"", with the possible values of ""Disabled"", ""Group1"", ""Group2"", ""Group3""</p></li>
<li><p>For rooted devices: </p>

<ul>
<li><p>""change audio controls"" (""auto change audio controls"")</p></li>
<li><p>""change audio driver"" (change audio drive settings to enable record mode 21,22,23,24,31,32,33,34"")</p></li>
<li><p>For rooted devices: ""start input stream""</p></li>
</ul></li>
</ul>

<h2>The problem</h2>

<p>If I'm in need to create a call recording app, there is no other way than to find the various workarounds for various devices, but as it seems other apps use terms that don't appear in the API.</p>

<p>I can't find any of those of the app I've mentioned, for example.</p>

<h2>What I've found</h2>

<p>Other than tons of questions of how to record calls on Android, showing that it doesn't work on all devices, I could find some interesting things. Here are my tries and insights so far:</p>

<ul>
<li><p>There are some Audio recording sources we can use while preparing the recording (docs <a href=""https://developer.android.com/reference/android/media/MediaRecorder.AudioSource"" rel=""noreferrer""><strong>here</strong></a>) , but sadly in each device it might be different. For some, VOICE_CALL works, and for some, others. But at least we can try...</p></li>
<li><p>On OnePlus 2 with Android 6.0.1, incoming calls can be recorded using <a href=""https://developer.android.com/reference/android/media/MediaRecorder.AudioSource.html#VOICE_CALL"" rel=""noreferrer""><strong>VOICE_CALL</strong></a>, but I can't make outgoing calls be recorded there, unless I use MIC as audio source together with speaker turned on. Somehow, the app I've mentioned succeeds recording it without any issues. I'm sure I will see other issues with other Android devices, as I've tried to address this whole topic in the past. Update: I've found <a href=""https://github.com/riul88/call-recorder-for-android"" rel=""noreferrer""><strong>this sample</strong></a> project (also <a href=""https://www.ipragmatech.com/make-call-recording-android-app/"" rel=""noreferrer""><strong>here</strong></a>), which for some reason sleeps for 2 seconds on the UI thread between <code>prepare</code> and <code>start</code> calls of the mediaRecorder. It works fine, and when I did something similar (wait using Handler.postDelayed for 1 second), it worked fine too. The comment that was written there is ""Sometimes prepare takes some time to complete"".</p></li>
<li><p>On Galaxy S7 with Android 8, I've failed to get sound of the other side for outgoing calls AND incoming calls (even with MIC and speaker), no matter what I did, yet the app I've mentioned worked fine.</p></li>
<li><p>To let you try my POC of call recording, I've published an open source github repository <a href=""https://github.com/AndroidDeveloperLB/PhoneCallRecorder"" rel=""noreferrer""><strong>here</strong></a>, having a sample that will record a single call, and let you listen to the most recent one, if all works well.</p></li>
<li><p><a href=""https://github.com/ViktorDegtyarev/CallRecLib"" rel=""noreferrer""><strong>This ""ViktorDegtyarev - CallRecLib"" SDK</strong></a> , which doesn't seem to work at all, and crashes on various Android versions</p></li>
<li><p>These 2 old sample projects : <a href=""https://code.google.com/archive/p/rvoix/downloads"" rel=""noreferrer""><strong>rvoix</strong></a> , <a href=""https://github.com/esnyder/callrecorder"" rel=""noreferrer""><strong>esnyder-callrecorder</strong></a> , both fail to actually record. The second doesn't even seem to work on Android 6.0.1 device, which it's supposed to support.</p></li>
<li><p><a href=""https://github.com/aykuttasil/CallRecorder"" rel=""noreferrer""><strong>aykuttasil - CallRecorder</strong></a> sample and <a href=""https://gitlab.com/axet/android-call-recorder"" rel=""noreferrer""><strong>axet - android-call-recorder</strong></a> sample - both, just like on my POC, don't have any tweaking except for AudioSource, and because of this they fails to record on some cases, such as OnePlus 2 output-audio of outgoing calls.</p></li>
<li><p>Most third party apps only offer the AudioSource tweaking, but some (like ""boldbeast"") do offer more. One example is ""<a href=""https://play.google.com/store/apps/details?hl=en&amp;id=com.appstar.callrecorder"" rel=""noreferrer""><strong>Automatic Call Recorder</strong></a>"" which has ""configuration"" (10 values to choose from, first is ""default"") and ""method"" (5 vales to choose from, first is ""default""). Those apps probably do not want others to understand what those configurations mean, so they put general names. Or, it's just too complicated for everyone (especially for users), so they generalize the names.</p></li>
<li><p>There is an API of ""setMode"" <a href=""https://stuff.mit.edu/afs/sipb/project/android/docs/reference/android/media/AudioManager.html#setMode(int)"" rel=""noreferrer""><strong>here</strong></a>, but it doesn't seem to change upon calling it. I was thinking of maybe change the ""channel"" of where the call is being used, this way, but it doesn't work. It stays on the value of ""2"" during call, which is <a href=""https://stuff.mit.edu/afs/sipb/project/android/docs/reference/android/media/AudioManager.html#MODE_IN_CALL"" rel=""noreferrer""><strong>MODE_IN_CALL</strong></a>.</p></li>
<li><p>There are customized parameters that are available for various devices (each OEM and its own parameters), which can be set <a href=""https://developer.android.com/reference/android/media/AudioManager.html#setParameters(java.lang.String)"" rel=""noreferrer""><strong>here</strong></a> and maybe even via JNI (<a href=""https://stackoverflow.com/a/46804577/878126""><strong>here</strong></a> and <a href=""https://stackoverflow.com/q/37080374/878126""><strong>here</strong></a>) , but I don't get where to get this information from (meaning which pairs of key-value are available). I've searched in a lot of places, but couldn't find any website that talks about which possible parameters are available, and for which devices.</p></li>
<li><p>I was thinking of using <a href=""https://developer.android.com/reference/android/media/AudioRecord"" rel=""noreferrer""><strong>AudioRecord</strong></a> instead of <a href=""https://developer.android.com/reference/android/media/MediaRecorder"" rel=""noreferrer""><strong>MediaRecorder</strong></a> class for recording, thinking that it's a bit low level, so it could give me more power and access to customized capabilities, but it seems to be very similar to MediaRecorder, and even use the same audio sources (example <a href=""https://gist.github.com/kmark/d8b1b01fb0d2febf5770"" rel=""noreferrer""><strong>here</strong></a>).</p></li>
<li><p>Another try I had with low level API, was even further, of using JNI (OpenSL ES for Android). For this, I couldn't find much information (except <a href=""https://developer.android.com/ndk/guides/audio/opensl/opensl-for-android"" rel=""noreferrer""><strong>here</strong></a> and <a href=""https://googlesamples.github.io/android-audio-high-performance/guides/opensl_es.html"" rel=""noreferrer""><strong>here</strong></a>), and only found the 2 samples of Google <a href=""https://github.com/googlesamples/android-ndk"" rel=""noreferrer""><strong>here</strong></a> (called ""audio echo"" and ""native audio""), which are not about recording sound, or at least I don't see them occur. </p></li>
<li><p>Android P might have official way to record calls (read <a href=""https://www.androidpit.com/android-p-news-release-features"" rel=""noreferrer""><strong>here</strong></a> and <a href=""https://www.neowin.net/news/android-p-could-officially-support-call-recording"" rel=""noreferrer""><strong>here</strong></a>). Testing on my Android P DP3 device (Pixel 2), I could record both sides fine in both incoming and outgoing calls, using ""DEFAULT"" as audio source, so maybe the API will finally be official and work on all Android versions. I wrote about it <a href=""https://issuetracker.google.com/issues/110436314"" rel=""noreferrer""><strong>here</strong></a> and <a href=""https://issuetracker.google.com/issues/110433612"" rel=""noreferrer""><strong>here</strong></a>.</p></li>
<li><p>I was thinking that maybe the <a href=""https://developer.android.com/reference/android/media/audiofx/Visualizer"" rel=""noreferrer""><strong>Visualizer</strong></a> class could be a workaround of recording, but according to some StackOverflow post (<a href=""https://stackoverflow.com/a/30157272/878126""><strong>here</strong></a>), the quality it extremely low, so I decided that maybe I shouldn't try it. Plus I couldn't find a sample of how to record from it.</p></li>
<li><p>I've found some parameters that might be available on some devices, <a href=""https://android.googlesource.com/platform/hardware/libhardware/+/jb-mr0-release/include/hardware/audio.h"" rel=""noreferrer""><strong>here</strong></a> (found from <a href=""https://stackoverflow.com/a/37921082/878126""><strong>here</strong></a>), all start with ""AUDIO_PARAMETER_"", but testing on Galaxy S7, all returned empty string. I've also found <a href=""https://twigstechtips.blogspot.com/2013/07/android-enable-noise-cancellation-in.html"" rel=""noreferrer""><strong>this website</strong></a>, that gave me the idea of using <code>audioManager.setParameters(""noise_suppression=off"")</code> together with MIC audio source, but this didn't seem to do anything in the case of Galaxy S7.</p></li>
</ul>

<h2>The questions</h2>

<p>As opposed to other similar questions about this topic, I'm not asking how to record calls. I already know it's a very problematic and complex problem. I already know I will have to address various configurations, and that I will probably use a server to store all of them and find there the best match for each one.</p>

<p>What I want to ask is more about the tweaking and workarounds :</p>

<ol>
<li><p>Is there a list of configurations for the various devices, Android versions, and what to choose for each?</p></li>
<li><p>Besides Audio source, which other configuration is possible to be used?</p></li>
<li><p>Which parameters are possible for the various devices and Android versions ? Are there any websites of the OEMs describing them? </p></li>
<li><p>What are the various terms in the app I've mentioned? Where can I find information of how to change them?</p></li>
<li><p>Which tools are available for rooted devices?</p></li>
<li><p>Is it possible to know which device supports call recording and which not, by using the API ? </p></li>
<li><p>About the workaround of OnePlus 2, to wait a moment till we start recording, why is it needed? Is it needed on all Android versions? Is it a known issue? Would 1 second be enough?</p></li>
<li><p>How come on the Galaxy S7 I've failed to record the other side even when using MIC&amp;speaker? </p></li>
</ol>
",878126,,878126,,2018-06-26 12:21:11,2018-12-10 16:59:01,How do some apps overcome phone recording restrictions?,<android><audio><call-recording>,1,12,17,,
Android,51067310,1,,,,,,6/27/2018 16:15:24,,3,175,"<p>I'm building a music player for Android, using these two samples (<a href=""https://github.com/googlesamples/android-MediaBrowserService"" rel=""nofollow noreferrer"">Android MediaBrowserService Sample</a> and <a href=""https://github.com/googlesamples/android-UniversalMusicPlayer"" rel=""nofollow noreferrer"">Universal Music Player</a>) as examples. 
I noticed both load media information on start-up and add it to the Media Browser. Both have the complete media list available at start-up.</p>

<p>But what if I want to add media to the player queue dynamically?</p>

<p>For example, I'm using <a href=""https://developer.spotify.com/documentation/web-api/reference"" rel=""nofollow noreferrer"">Spotify's Web API</a> to retrieve a list of tracks based on the user's query. Among other things, it returns a link to a 30s preview of the track. As far as I understood, I need to create a MediaMetadata object containing this track.</p>

<p>But then, how should I add this information to the MediaBrowserService? The desired behavior is that when the user clicks on the play button for one of the tracks in the list (RecyclerView), only that track is played. Also, I'm not using the browsing components to represent content hierarchy.</p>

<p>How can I implement this behavior? Which references should I read?</p>

<p>Thanks in advance.</p>
",8594312,,-1,,2019-04-09 19:36:06,2018-12-02 2:59:06,Adding media item to MediaBrowserService,<java><android><media-player><audio-player><mediabrowserservice><android-music-player>,1,3,,,
Android,51192192,1,,,,,,7/5/2018 13:10:19,,3,145,"<p>I develop an android app which streams video over <a href=""https://tokbox.com/a"" rel=""nofollow noreferrer"">TokBox</a>. I want to record the streaming video. In order to do this, I tried to use <a href=""https://github.com/googlesamples/android-MediaRecorder"" rel=""nofollow noreferrer"">MediaRecorder</a> sample. It did great job on video recording, however I lost my stream. There are two main java classes, just say A and B. The class B implements <code>PreviewCallback</code>. Here are <code>onPreviewFrame</code> method. If you are interested in TokBox, the class B extends <code>BaseVideoCapturer</code>.</p>

<pre><code>@Override
public void onPreviewFrame(byte[] data, Camera camera) {
    mPreviewBufferLock.lock();
    if (isCaptureRunning) {
        if (data.length == mExpectedFrameSize) {
            // Get the rotation of the camera
            int currentRotation = compensateCameraRotation(mCurrentDisplay
                    .getRotation());
            // Send frame to OpenTok
            provideByteArrayFrame(data, NV21, mCaptureWidth,
                    mCaptureHeight, currentRotation, isFrontCamera());

            // Reuse the video buffer
            camera.addCallbackBuffer(data);
        }
    }
    mPreviewBufferLock.unlock();
}
</code></pre>

<p>The class A is an activity that manages recording. There is a method to start video record and stop after 5 seconds.</p>

<pre><code>public static boolean prepareAndStartMediaRecorder(){
    if(CustomVideoCapturer.isCaptureStarted){
        // BEGIN_INCLUDE (configure_media_recorder)
        mMediaRecorder = new MediaRecorder();
        // Step 1: Unlock and set camera to MediaRecorder
        B.mCamera.unlock();
        mediaRecorder.setCamera(B.mCamera);
        // Step 2: Set sources
        mediaRecorder.setAudioSource(MediaRecorder.AudioSource.CAMCORDER);
        mediaRecorder.setVideoSource(MediaRecorder.VideoSource.CAMERA);
        // Step 3: Set a CamcorderProfile (requires API Level 8 or higher)
        mMediaRecorder.setProfile(profile);
        // Step 4: Set output file
        mediaRecorder.setOutputFile(""/sdcard/myvideo.mp4"");
        mediaRecorder.setMaxDuration(60000); // Set max duration 60 sec.
        mediaRecorder.setMaxFileSize(5000000); // Set max file size 5M
        //configure preview
        mediaRecorder.setPreviewDisplay(mPreview.getSurfaceTexture());
        // Step 5: Prepare configured MediaRecorder
        try {
            mediaRecorder.prepare();
        } catch (IllegalStateException e) {
            releaseMediaRecorder();
            return false;
        } catch (IOException e) {
            releaseMediaRecorder();
            return false;
        }
        mediaRecorder.start();
        final Handler handler = new Handler();
        handler.postDelayed(new Runnable() {
            @Override
            public void run() {
                mediaRecorder.stop();  // stop the recording
            }
        }, 5000);
    }
</code></pre>

<p>After recording is started, <code>onPreviewFrame</code> method is not called. Do you have any solution about this problem or another approach to record and stream video at the same time?</p>

<p>Edit 1: I tried to apply this <a href=""https://stackoverflow.com/questions/14412618/android-onpreviewframe-is-not-called"">solution</a>, but it did not work. If you claim that this is the right solution, please inform me.</p>

<p>Edit 2: The archiving API records the streaming media, so it has noisy sometimes. I need to record frames from camera directly in order to get high-quality video.</p>
",8065997,,8065997,,2018-07-07 11:21:20,2018-07-24 10:09:46,How to record video that is already streamed on onPreviewFrame,<android><video-streaming><android-camera><opentok><android-video-record>,2,2,4,,
Android,51203665,1,,,,,,7/6/2018 5:43:04,,3,188,"<p>I was tinkering with <a href=""https://github.com/googlesamples/android-architecture/blob/dev-todo-mvvm-live/todoapp/app/src/main/java/com/example/android/architecture/blueprints/todoapp/SingleLiveEvent.java"" rel=""nofollow noreferrer""><code>SingleLiveEvent</code></a>. Is it possible to use it with Room database? I tried using it and got a build error saying <code>Not sure how to convert a Cursor to this method's return type</code>. Are there any workarounds here? I have got an edge case where I would like to use it!</p>
",4050406,,4050406,,2018-07-06 5:45:22,2018-07-06 5:58:37,Is it possible to use SingleLiveEvent with Room in Android?,<android><android-room><android-livedata>,1,0,,,
Android,51252795,1,,,,,,7/9/2018 19:29:45,,1,132,"<p>I'm trying to mess around with the Google Fit API.  I have a WearOS emulator connected to my actual device (Samsung Galaxy).  When I run the application, I am pretty sure I should be getting a screen to pop up asking for permissions, but I am getting no such screen.  I went through the process of getting the token in the Google API console.</p>

<pre><code>public class GoalsListActivity extends WearableActivity {

    public static final String TAG = ""BasicRecordingApi"";
    private static final int REQUEST_OAUTH_REQUEST_CODE = 1;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.goals_screen_layout);

        accessGoogleFit();

        // Enables Always-on
        setAmbientEnabled();
    }




    /**
     * Check if the user has permissions to talk to Fitness APIs; otherwise authetnciate the user and request required permissions
     */

    private void accessGoogleFit() {

        FitnessOptions fitnessOptions = getFitnessSignInOptions();

        if (!hasOAuthPermission()) {
            GoogleSignIn.requestPermissions(this, REQUEST_OAUTH_REQUEST_CODE, GoogleSignIn.getLastSignedInAccount(this), fitnessOptions);
        } else {
            subscribeToRecordingApi();
        }
    }

    /**
     * Create a FitnessOptions instance, declaring the Fit API data types and access required by the app
     *
     * @return FitnessOptions object
     */


    private FitnessOptions getFitnessSignInOptions() {
        FitnessOptions fitnessOptions = FitnessOptions.builder()
                .addDataType(DataType.TYPE_STEP_COUNT_DELTA, FitnessOptions.ACCESS_READ)
                .addDataType(DataType.AGGREGATE_STEP_COUNT_DELTA, FitnessOptions.ACCESS_READ)
                .build();
        return fitnessOptions;
    }


    /**
     * Check if user's account has OAuth permission to Fit API
     *
     * @return true if user has OAuth permission
     */


    private boolean hasOAuthPermission() {
        FitnessOptions fitnessOptions = getFitnessSignInOptions();

        //Check if the user has previously granted the necessary data access, and if not, inititate the authroization flow
        boolean hasAuthO = GoogleSignIn.hasPermissions(GoogleSignIn.getLastSignedInAccount(this), fitnessOptions);
        return hasAuthO;
    }

    //If the user does not have necessary data access, inititate the authorization flow
    private void requestOAuthPermission() {
        FitnessOptions fitnessOptions = getFitnessSignInOptions();
        GoogleSignIn.requestPermissions(
                this, //our activity
                REQUEST_OAUTH_REQUEST_CODE,
                GoogleSignIn.getLastSignedInAccount(this),
                fitnessOptions);

    }

    /**
     * SUBSCRIBE TO FITNESS DATA
     * To record data from the sensors, we need to first create a subscription.
     * To create a subscription, invoke the Recording API.  As soon as the subscription is active, fitness data will start recording
     */


    private void subscribeToRecordingApi() {

        Fitness.getRecordingClient(this, GoogleSignIn.getLastSignedInAccount(this))
                .subscribe(DataType.TYPE_ACTIVITY_SAMPLES)
                .addOnSuccessListener(new OnSuccessListener&lt;Void&gt;() {
                    @Override
                    public void onSuccess(Void aVoid) {

                        Log.i(TAG, ""Successfully subscribed!"");
                    }
                })
                .addOnFailureListener(new OnFailureListener() {
                    @Override
                    public void onFailure(@NonNull Exception e) {
                        Log.i(TAG, ""There was a problem subscribing"");
                    }
                });
    }

    /**
     * Get a list of all active subscriptions
     */

    private void getAllActiveSubscriptions() {
        Fitness.getRecordingClient(this, GoogleSignIn.getLastSignedInAccount(this))
                .listSubscriptions(DataType.TYPE_ACTIVITY_SAMPLES)
                .addOnSuccessListener(new OnSuccessListener&lt;List&lt;Subscription&gt;&gt;() {
                    @Override
                    public void onSuccess(List&lt;Subscription&gt; subscriptions) {
                        for (Subscription sc : subscriptions) {
                            DataType dt = sc.getDataType();
                            Log.i(TAG, ""Active subscription for data type: "" + dt.getName());
                        }
                    }
                });
    }


    /**
     * UNSUBSCRIBE - STOP COLLECTING SENSOR DATA IN THE APP
     * Cancels the ACTIVITY_SAMPLE subscription on that {@link DataType}
     */


    public void stopRecording() {

        final String dataTypeStr = DataType.TYPE_ACTIVITY_SAMPLES.toString();
        Log.i(TAG, ""Unsubscribing from data type: "" + dataTypeStr);

        //Invoke the Recording API to unsubscribe from the data type and specify a callback that will check the result
        Fitness.getRecordingClient(this, GoogleSignIn.getLastSignedInAccount(this))
                .unsubscribe(DataType.TYPE_ACTIVITY_SAMPLES)
                .addOnSuccessListener(new OnSuccessListener&lt;Void&gt;() {
                    @Override
                    public void onSuccess(Void aVoid) {
                        Log.i(""TAG"", ""Successfully unsubscribed for data type: "" + dataTypeStr);
                    }
                })
                .addOnFailureListener(new OnFailureListener() {
                    @Override
                    public void onFailure(@NonNull Exception e) {
                        //The subscription was not removed
                        Log.i(TAG, ""Failed to unsubscribe for data type: "" + dataTypeStr);
                    }
                });
    }


}
</code></pre>

<p>The code basically came from <a href=""https://github.com/googlesamples/android-fit/blob/master/BasicRecordingApi/app/src/main/java/com/google/android/gms/fit/samples/basicrecordingapi/MainActivity.java"" rel=""nofollow noreferrer"">enter link description here</a>, which is Google's own example code.  I have the API key.  For some reason I just can't get it to work.  Thank you.  </p>
",9599554,,,,,2018-09-13 12:39:52,Can't get Google Fit OAuth 2.0 linked to WearOS App,<android><wear-os><google-fit>,1,0,,,
Android,51365460,1,,,,,,7/16/2018 15:34:49,,4,245,"<p>I am using DataBoundListAdapter from android architecture components <a href=""https://github.com/googlesamples/android-architecture-components/tree/master/GithubBrowserSample"" rel=""nofollow noreferrer"">example</a>.</p>

<p>I need to enhance it to support multiple item types. Anybody did it already ?
My problem is how to find out item type in createBinding procedure, as I do not have available item position there, but I need it to get item type to be able to inflate correct layout base on it.</p>

<pre><code>@Override
    protected ChatMessageItemBinding createBinding(ViewGroup parent) {
        MyItemBinding binding = DataBindingUtil.inflate(LayoutInflater.from(parent.getContext()), R.layout.my_item, parent,
                false, dataBindingComponent);


        return binding;
    }
</code></pre>
",2800835,,2649012,,2018-07-16 16:34:11,2019-03-01 11:49:43,DataBoundListAdapter with multiple item types,<android><android-recyclerview><recycler-adapter><android-architecture-components>,2,0,,,
Android,51387282,1,,,,,,7/17/2018 17:34:41,,1,303,"<p>I'm using the <a href=""https://github.com/googlesamples/android-play-billing/blob/master/TrivialDrive_v2/shared-module/src/main/java/com/example/billingmodule/billing/BillingManager.java"" rel=""nofollow noreferrer"">Billing Manager</a> provided in googlesamples to handle in app purchases in my android app. Everything seems to work until I click buy and am greeted with the error message:</p>

<p>The Transaction could not be completed.</p>

<p>From the logs I can see that I am getting a response code 6 (""Fatal error during the API action"") back from the server. Additionally I can see two suspicious errors during the purchasing process:</p>

<pre><code>E/DatabaseUtils: Writing exception to parcel
java.lang.SecurityException: Permission Denial: get/set setting for user asks to run as user -2 but is calling from user 0; this requires android.permission.INTERACT_ACROSS_USERS_FULL
    at com.android.server.am.ActivityManagerService.handleIncomingUser(ActivityManagerService.java:15168)
    at android.app.ActivityManager.handleIncomingUser(ActivityManager.java:2492)
    at com.android.providers.settings.SettingsProvider.call(SettingsProvider.java:688)
    at android.content.ContentProvider$Transport.call(ContentProvider.java:325)
    at android.content.ContentProviderNative.onTransact(ContentProviderNative.java:275)
    at android.os.Binder.execTransact(Binder.java:404)
    at dalvik.system.NativeStart.run(Native Method)

E/Parcel: Class not found when unmarshalling: com.google.android.finsky.billing.common.PurchaseParams
java.lang.ClassNotFoundException: com.google.android.finsky.billing.common.PurchaseParams
    at java.lang.Class.classForName(Native Method)
    at java.lang.Class.forName(Class.java:251)
    at java.lang.Class.forName(Class.java:216)
    at android.os.Parcel.readParcelableCreator(Parcel.java:2140)
    at android.os.Parcel.readParcelable(Parcel.java:2104)
    at android.os.Parcel.readValue(Parcel.java:2020)
    at android.os.Parcel.readArrayMapInternal(Parcel.java:2321)
    at android.os.Bundle.unparcel(Bundle.java:249)
    at android.os.Bundle.getString(Bundle.java:1118)
    at android.content.Intent.getStringExtra(Intent.java:5151)
    at com.android.server.am.ActivityStackSupervisor.startActivityLocked(ActivityStackSupervisor.java:1468)
    at com.android.server.am.ActivityStackSupervisor.startActivityMayWait(ActivityStackSupervisor.java:1063)
    at com.android.server.am.ActivityManagerService.startActivityInPackage(ActivityManagerService.java:4385)
    at com.android.server.am.PendingIntentRecord.sendInner(PendingIntentRecord.java:254)
    at com.android.server.am.ActivityManagerService.startActivityIntentSender(ActivityManagerService.java:4266)
    at android.app.ActivityManagerNative.onTransact(ActivityManagerNative.java:260)
    at com.android.server.am.ActivityManagerService.onTransact(ActivityManagerService.java:2712)
    at android.os.Binder.execTransact(Binder.java:404)
    at dalvik.system.NativeStart.run(Native Method)
 Caused by: java.lang.NoClassDefFoundError: com/google/android/finsky/billing/common/PurchaseParams
    at java.lang.Class.classForName(Native Method)Â 
    at java.lang.Class.forName(Class.java:251)Â 
    at java.lang.Class.forName(Class.java:216)Â 
    at android.os.Parcel.readParcelableCreator(Parcel.java:2140)Â 
    at android.os.Parcel.readParcelable(Parcel.java:2104)Â 
    at android.os.Parcel.readValue(Parcel.java:2020)Â 
    at android.os.Parcel.readArrayMapInternal(Parcel.java:2321)Â 
    at android.os.Bundle.unparcel(Bundle.java:249)Â 
    at android.os.Bundle.getString(Bundle.java:1118)Â 
    at android.content.Intent.getStringExtra(Intent.java:5151)Â 
    at com.android.server.am.ActivityStackSupervisor.startActivityLocked(ActivityStackSupervisor.java:1468)Â 
    at com.android.server.am.ActivityStackSupervisor.startActivityMayWait(ActivityStackSupervisor.java:1063)Â 
    at com.android.server.am.ActivityManagerService.startActivityInPackage(ActivityManagerService.java:4385)Â 
    at com.android.server.am.PendingIntentRecord.sendInner(PendingIntentRecord.java:254)Â 
    at com.android.server.am.ActivityManagerService.startActivityIntentSender(ActivityManagerService.java:4266)Â 
    at android.app.ActivityManagerNative.onTransact(ActivityManagerNative.java:260)Â 
    at com.android.server.am.ActivityManagerService.onTransact(ActivityManagerService.java:2712)Â 
    at android.os.Binder.execTransact(Binder.java:404)Â 
    at dalvik.system.NativeStart.run(Native Method)Â 
 Caused by: java.lang.ClassNotFoundException: Didn't find class ""com.google.android.finsky.billing.common.PurchaseParams"" on path: DexPathList[[directory "".""],nativeLibraryDirectories=[/vendor/lib, /system/lib]]
    at dalvik.system.BaseDexClassLoader.findClass(BaseDexClassLoader.java:67)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:497)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:457)
    at java.lang.Class.classForName(Native Method)Â 
    at java.lang.Class.forName(Class.java:251)Â 
    at java.lang.Class.forName(Class.java:216)Â 
    at android.os.Parcel.readParcelableCreator(Parcel.java:2140)Â 
    at android.os.Parcel.readParcelable(Parcel.java:2104)Â 
    at android.os.Parcel.readValue(Parcel.java:2020)Â 
    at android.os.Parcel.readArrayMapInternal(Parcel.java:2321)Â 
    at android.os.Bundle.unparcel(Bundle.java:249)Â 
    at android.os.Bundle.getString(Bundle.java:1118)Â 
    at android.content.Intent.getStringExtra(Intent.java:5151)Â 
    at com.android.server.am.ActivityStackSupervisor.startActivityLocked(ActivityStackSupervisor.java:1468)Â 
    at com.android.server.am.ActivityStackSupervisor.startActivityMayWait(ActivityStackSupervisor.java:1063)Â 
    at com.android.server.am.ActivityManagerService.startActivityInPackage(ActivityManagerService.java:4385)Â 
    at com.android.server.am.PendingIntentRecord.sendInner(PendingIntentRecord.java:254)Â 
    at com.android.server.am.ActivityManagerService.startActivityIntentSender(ActivityManagerService.java:4266)Â 
    at android.app.ActivityManagerNative.onTransact(ActivityManagerNative.java:260)Â 
    at com.android.server.am.ActivityManagerService.onTransact(ActivityManagerService.java:2712)Â 
    at android.os.Binder.execTransact(Binder.java:404)Â 
    at dalvik.system.NativeStart.run(Native Method)Â 
</code></pre>

<p>However I am not sure that there is a connection between the errors and the failing of the purchase.
Any idea where I went wrong?</p>
",6767268,,,,,2018-07-18 11:04:46,Android In App billing fails with repsonse code 6,<android><in-app-purchase><google-play-services><in-app-billing>,1,0,,,
Android,51393867,1,,,,,,7/18/2018 4:59:51,,1,639,"<p>I'm trying to use AndroidViewModel rather than the regular ViewModel, because AndroidViewModel contains an application reference that I need for binding services.</p>

<p>My question is, how do I supply the application parameter to my ViewModelFactory?</p>

<p>At the moment I'm casting it from the ApplicationContext that the ViewModelFactory injector util already has available to it, but I've read that's dangerous because a cast of ApplicationContext <a href=""https://stackoverflow.com/questions/5018545/getapplication-vs-getapplicationcontext"">may not always return the application</a>.</p>

<p>I'm just learning Android, following along the <a href=""https://github.com/googlesamples/android-sunflower"" rel=""nofollow noreferrer"">Sunflower example</a>, so the answer is probably very simple. I just don't know it . . . yet. (Hoping you can help).</p>

<p>Here is how I am doing it currently, which as you may notice is closely based on how Google does it in the Sunflower example:</p>

<p><strong>Fragment using the AndroidViewModel</strong></p>

<pre><code>class GalleryFragment : Fragment() {

private lateinit var viewModel: GalleryViewModel
private var memoList: List&lt;Memo&gt; = emptyList()

override fun onCreateView(
        inflater: LayoutInflater,
        container: ViewGroup?,
        savedInstanceState: Bundle?
): View? {
    val view = inflater.inflate(R.layout.gallery_fragment, container, false)
    val context = context ?: return view
    val factory = InjectorUtils.provideGalleryViewModelFactory(context)
    viewModel = ViewModelProviders.of(this, factory).get(GalleryViewModel::class.java)
    ... 
</code></pre>

<p><strong>Injector Util</strong></p>

<pre><code>object InjectorUtils {

fun provideMemoViewModelFactory(context: Context, memoId: Long): MemoViewModelFactory {
    val application = context.applicationContext as Application //this could be dangerous
    val repository = getMemoRepository(context)
    return MemoViewModelFactory(application, repository, memoId)
   }
}
</code></pre>

<p><strong>ViewModelFactory</strong></p>

<pre><code>class MemoViewModelFactory(
    private val application: Application,
    private val memoRepository: MemoRepository,
    private val memoId: Long
 ) : ViewModelProvider.NewInstanceFactory() {

@Suppress(""UNCHECKED_CAST"")
override fun &lt;T : ViewModel&gt; create(modelClass: Class&lt;T&gt;): T {
    return MemoViewModel( application, memoRepository, memoId) as T
  }
}
</code></pre>

<p><strong>ViewModel</strong></p>

<pre><code>class MemoViewModel(
    application: Application,
    memoRepository: MemoRepository,
    private val memoId: Long
) : AndroidViewModel(application) {
...
</code></pre>

<p>My concern is inside the InjectorUtil, where I obtain a reference to the application by casting the applicationContext. If I proceed down that path am I heading for trouble down the line? Is there somewhere else I should be adding the application reference, where I can access it directly rather than through a cast of applicationContext?</p>

<p>thanks</p>

<p>John</p>
",3947344,,,,,2018-07-18 13:22:09,What is the correct way to create a ViewModelFactory for an AndroidViewModel,<android><dependency-injection><kotlin><android-viewmodel>,1,0,,,
Android,51496306,1,,,,,,7/24/2018 10:28:32,,1,94,"<p>I'm implementing the repository pattern to my project in Android but my main problem is how to control the data the users remove from the web.</p>

<p>Let's take the <a href=""https://github.com/googlesamples/android-architecture-components"" rel=""nofollow noreferrer"">Github Browser Sample</a> example.</p>

<p><a href=""https://i.stack.imgur.com/YiPoq.png"" rel=""nofollow noreferrer""><img src=""https://i.stack.imgur.com/YiPoq.png"" alt=""Github Browser proccess""></a></p>

<p>Possibles solutions:</p>

<ul>
<li>Remove all the Repos and insert the new list everytime I fetch for that user.</li>
<li>Remove all the Repos and insert the new list everytime I fetch for that user if the last fetch was 3 min or more ago</li>
<li>Remove all the Repos table when the app start (so it will show the 
real data when the app close and open again).</li>
<li>Implement something like force update (Swipe and refresh) and remove all the Repos and insert them again.</li>
</ul>

<p>What do you think about how to solve this problem?</p>

<p>Cheers!!</p>
",2338932,,,,,2018-07-24 10:35:30,(Android Repository Pattern) Update phone database data with deleted items from web,<android><repository-pattern><android-room><android-architecture-components>,1,0,,,
Android,51498296,1,,,,,,7/24/2018 12:10:26,,1,83,"<p>I did one music(streaming) application by using exoplayer. But this application need to support android auto too. For this I follow the android developer site.
<a href=""https://developer.android.com/training/auto/audio/"" rel=""nofollow noreferrer"">https://developer.android.com/training/auto/audio/</a></p>

<p>In this they given one sample application.</p>

<p><a href=""https://github.com/googlesamples/android-UniversalMusicPlayer"" rel=""nofollow noreferrer"">https://github.com/googlesamples/android-UniversalMusicPlayer</a></p>

<p>For this sample, I configured <strong>media-browser-simulator.apk</strong> in my emulator. So this sample(UAMP) application working fine in emulator.</p>

<p><a href=""https://i.stack.imgur.com/ZwXTa.png"" rel=""nofollow noreferrer""><img src=""https://i.stack.imgur.com/ZwXTa.png"" alt=""enter image description here""></a></p>

<p>But when run this application in my device not working for auto, For this in my device(Marshmallow) i have installed android auto, In this android auto not showing this sample(UAMP) application.</p>

<p><a href=""https://i.stack.imgur.com/kqnXt.png"" rel=""nofollow noreferrer""><img src=""https://i.stack.imgur.com/kqnXt.png"" alt=""enter image description here""></a></p>

<p>So my questions are </p>

<p>1) Why this sample application not showing in my device. it is working in emulator.</p>

<p>2) Which procedure is correct emulator or device?</p>

<p>3) This sample application is developed by using kotlin, But need any java sample application.</p>

<p>So please guide me how to do this. Thanks to all for your support</p>
",1717339,,1726308,,2018-12-04 14:25:51,2018-12-06 20:50:08,"Android Auto Music app is not showing in ""Android auto"" app",<android><media-player><auto>,1,3,,,
Android,51801851,1,,,,,,8/11/2018 16:56:38,,3,419,"<p>I've setup a project very similar to <a href=""https://github.com/googlesamples/android-architecture-components/tree/master/GithubBrowserSample"" rel=""nofollow noreferrer""><code>GithubBrowserSample</code></a>. So, the dagger setup is the same.</p>

<p>Consider there are <code>ActivityViewModel</code> and <code>FragmentViewModel</code>, which have non-zero arg constructor, so they are being acquired from <code>ViewModelProviders</code> via custom <code>ViewModelProvider.Factory</code>.</p>

<p>What I want is to instruct dagger to inject already created instance of <code>ActivityViewModel</code> in following code:</p>

<pre>
<code>
    class FragmentViewModel @Inject constructor(
        private val activityViewModel: ActivityViewModel
        private val foo: Foo
    ) : ViewModel() {
        ...
    }
</code>
</pre>

<p>With current declaration Dagger will create a <strong>new</strong> instance of <code>ActivityViewModel</code> regardless that there already exists one.</p>

<p>This happens, because there exists an <code>@Inject</code> annotated constructor for <code>ActivityViewModel</code>.</p>

<p>So, dagger is free to assume, that it is the correct way of providing an instance of <code>ActivityViewModel</code> to <code>FragmentViewModel</code>.</p>

<p>I know how to make things for ordinary Dagger, but I do not know how to do this for Dagger-Android, and this questions is specifically for Dagger-Android setup.</p>

<p>As a dirty solution I'm currently manually setting that instance:</p>

<pre>
<code>
    class MyFragment : Fragment {
      ...
      override fun onActivityCreated(savedInstanceState: Bundle?) {
        super.onActivityCreated(savedInstanceState)
        viewModel = ViewModelProviders.of(this, viewModelFactory).get(FragmentViewModel::class.java)
        viewModel.activityViewModel = ViewModelProviders.of(activity!!, viewModelFactory).get(ActivityViewModel::class.java)
      }
      ...
    }
</code>
</pre>

<p>What's the correct way of injecting parent's <code>ViewModel</code> into child's <code>ViewModel</code>? </p>
",1083957,,1083957,,2018-08-18 13:51:47,2019-04-07 19:19:41,Inject activity's ViewModel into fragment's ViewModel,<android><dagger-2><android-architecture-components><android-viewmodel><dagger-android>,1,13,,,
Android,51854567,1,,,,,,8/15/2018 7:29:52,,3,682,"<p>In this sample app: 
<a href=""https://github.com/googlesamples/android-sunflower"" rel=""nofollow noreferrer"">https://github.com/googlesamples/android-sunflower</a> </p>

<p>The repository classes (PlantRepository.kt, GardenPlantingRepository.kt) are singletons and so is the injector utility object (InjectorUtils.kt). </p>

<p>Why are the repository classes singletons when the injector utility object is already one? </p>
",5179960,,,,,2018-11-20 10:52:53,Why are the repository classes singletons in this sample app?,<android><android-architecture-components><android-jetpack>,1,1,,,
Android,51879224,1,,,,,,8/16/2018 14:16:30,,5,1008,"<p>I've been following the sample from <a href=""https://github.com/googlesamples/android-architecture-components/tree/master/NavigationBasicSample"" rel=""noreferrer"">NavigationBasicSample</a></p>

<p>but used newest library for navigation:</p>

<pre><code>implementation ""android.arch.navigation:navigation-fragment-ktx:1.0.0-alpha05""
implementation ""android.arch.navigation:navigation-ui-ktx:1.0.0-alpha05""
</code></pre>

<p>and androidx library:</p>

<pre><code>implementation 'androidx.core:core-ktx:1.0.0-rc01'
implementation ""org.jetbrains.kotlin:kotlin-stdlib-jdk7:$kotlin_version""
implementation 'androidx.appcompat:appcompat:1.0.0-rc01'
implementation 'androidx.constraintlayout:constraintlayout:1.1.2'
implementation 'com.google.android.material:material:1.0.0-rc01'
implementation 'androidx.legacy:legacy-support-v4:1.0.0-rc01'
implementation 'androidx.lifecycle:lifecycle-extensions:2.0.0-rc01'
</code></pre>

<p>and add to bundle.gradle</p>

<pre><code>androidExtensions {
        experimental = true
}
</code></pre>

<p>all works except animation. It is bug maybe or ?</p>

<p>this is my nav_graph:</p>

<pre><code>&lt;?xml version=""1.0"" encoding=""utf-8""?&gt;
&lt;navigation xmlns:app=""http://schemas.android.com/apk/res-auto""
    xmlns:android=""http://schemas.android.com/apk/res/android""
    xmlns:tools=""http://schemas.android.com/tools""
    android:id=""@+id/nav_graph""
    app:startDestination=""@+id/categoryFragment""&gt;
    &lt;fragment
        android:id=""@+id/categoryFragment""
        android:name=""com.sample.CategoriesFragment""
        android:label=""Categories""
        tools:layout=""@layout/fragment_categories""&gt;
        &lt;action
            android:id=""@+id/action_categoryFragment_to_itemsFragment""
            app:destination=""@id/itemsFragment""
            app:popEnterAnim=""@anim/slide_in_left""
            app:popExitAnim=""@anim/slide_out_right""
            app:enterAnim=""@anim/slide_in_right""
            app:exitAnim=""@anim/slide_out_left"" /&gt;
    &lt;/fragment&gt;
    &lt;fragment
        android:id=""@+id/itemsFragment""
        android:name=""com.sample.ItemsFragment""
        android:label=""Items""
        tools:layout=""@layout/fragment_items"" &gt;

        &lt;argument android:name=""cat_id"" android:defaultValue=""-1"" /&gt;

    &lt;/fragment&gt;

&lt;/navigation&gt;
</code></pre>

<p>and my navhost fragment:</p>

<pre><code>&lt;fragment
        android:id=""@+id/fragment_nav_host""
        app:defaultNavHost=""true""
        android:name=""androidx.navigation.fragment.NavHostFragment""
        app:navGraph=""@navigation/nav_graph""
        android:layout_width=""match_parent""
        android:layout_height=""match_parent""
        app:layout_behavior=""@string/appbar_scrolling_view_behavior""
/&gt;
</code></pre>
",6368390,,4972317,,2018-08-16 21:33:57,2018-10-12 14:35:57,The Navigation Architecture Component animation,<android><kotlin><navigation>,1,3,,,
Android,51892029,1,,,,,,8/17/2018 9:11:10,,1,122,"<p>I am using video camera2 API for video recording in app. I am following <a href=""https://github.com/googlesamples/android-Camera2Basic"" rel=""nofollow noreferrer"">https://github.com/googlesamples/android-Camera2Basic</a> this demo. </p>

<p>After recording a video is preview is inverted 180 degrees. How can manage this in both cases front and back camera?  </p>
",5209766,,5209766,,2018-08-21 6:27:01,2018-08-21 7:09:40,Video inverts 180 after recording in front camera 2 api,<android><android-camera2>,1,1,,,
Android,51988969,1,,,,,,8/23/2018 15:10:18,,2,376,"<p>Following <a href=""https://developer.android.com/studio/projects/add-native-code#create-sources"" rel=""nofollow noreferrer"">this</a> I'm trying to link correctly <a href=""https://github.com/prouast/heartbeat"" rel=""nofollow noreferrer"">some cpp and hpp files</a>.
I'm starting by an <a href=""https://github.com/googlesamples/android-vision/tree/master/visionSamples/FaceTracker"" rel=""nofollow noreferrer"">existing project</a> and I would to connect all toghether. 
I read that I have 2 possibilities: write a CMake file or use ndk-build to connect them all.
By trying the latter I can not write the Application.mk and Android.mk files because I do not know what I need to do.</p>

<p>Build Grandle code:</p>

<pre><code>apply plugin: 'com.android.application'

android {
compileSdkVersion 24
buildToolsVersion ""24.0.2""

defaultConfig {
    applicationId ""com.google.android.gms.samples.vision.face.facetracker""
    minSdkVersion 9
    targetSdkVersion 24
    versionCode 1
    versionName ""1.0""
}
buildTypes {
    release {
        minifyEnabled false
        proguardFiles getDefaultProguardFile('proguard-android.txt'), 
'proguard-rules.pro'
       }
    }
 }

 dependencies {
   compile fileTree(dir: 'libs', include: ['*.jar'])
   compile 'com.android.support:support-v4:24.2.0'
   compile 'com.android.support:design:24.2.0'
   compile 'com.google.android.gms:play-services-vision:9.4.0+'
</code></pre>

<p>EDIT:
I'm trying to use ndk-build.</p>

<p>app.grandle:</p>

<pre><code>apply plugin: 'com.android.application'

android {
    compileSdkVersion 24
    buildToolsVersion ""24.0.2""

   defaultConfig {
       applicationId ""com.google.android.gms.samples.vision.face.facetracker""
       minSdkVersion 9
       targetSdkVersion 24
       versionCode 1
       versionName ""1.0""


}
sourceSets.main {
    jni.srcDirs = [] //disable automatic ndk-build call
}
task ndkBuild(type: Exec, description: 'Compile JNI source via NDK') {
    commandLine ""C:/Users/cvlab/AppData/Local/Android/sdk/ndk-bundle/ndk-build.cmd"",
            'NDK_PROJECT_PATH=build/intermediates/ndk',
            'NDK_LIBS_OUT=src/main/jniLibs',
            'APP_BUILD_SCRIPT=src/main/jni/Android.mk',
            'NDK_APPLICATION_MK=src/main/jni/Application.mk'
}
tasks.withType(JavaCompile) {
    compileTask -&gt; compileTask.dependsOn ndkBuild
}


buildTypes {
    release {
        minifyEnabled false
        proguardFiles getDefaultProguardFile('proguard-android.txt'), 'proguard-rules.pro'
          }
      }
  }

dependencies {
   compile fileTree(dir: 'libs', include: ['*.jar'])
   compile 'com.android.support:support-v4:24.2.0'
   compile 'com.android.support:design:24.2.0'
   compile 'com.google.android.gms:play-services-vision:9.4.0+'
}
</code></pre>

<p>Application.mk:</p>

<pre><code>APP_PLATFORM := android-24
APP_ABI := armeabi-v7a arm64-v8a x86 x86_64
APP_STL := gnustl_static
APP_CPPFLAGS := -std=gnu++11 -frtti -fexceptions

ifeq ($(NDK_DEBUG),0)
  APP_CPPFLAGS += -DNDEBUG
endif
</code></pre>

<p>Android.mk:</p>

<pre><code>LOCAL_PATH := $(call my-dir)

include $(CLEAR_VARS)

OPENCV_CAMERA_MODULES:=on
OPENCV_INSTALL_MODULES:=on
OPENCV_LIB_TYPE:=SHARED
OPENCVROOT:= C:\Users\cvlab\Downloads\opencv-3.3.0-android-sdk

OPENCV_INSTALL_MODULES := on
include ${OPENCVROOT}/sdk/native/jni/OpenCV.mk

LOCAL_MODULE := face-lib
LOCAL_SRC_FILES += $(LOCAL_PATH)/Baseline.cpp $(LOCAL_PATH)/Heartbeat.cpp $(LOCAL_PATH)/opencv.cpp $(LOCAL_PATH)/RPPG.cpp
LOCAL_LDLIBS += -llog -ldl
LOCAL_CPPFLAGS += -std=gnu++11 -frtti -fexceptions

LOCAL_MODULE := MyLibs

include $(BUILD_SHARED_LIBRARY)
</code></pre>

<p>Sync, make project and clean project are resulting without any error but I'm running into this error:</p>

<blockquote>
  <p>Process 'command 'C:/Users/cvlab/AppData/Local/Android/Sdk/ndk-bundle/ndk-build.cmd'' finished with non-zero exit value 2</p>
</blockquote>

<p>What's wrong?</p>
",10191400,,10191400,,2018-08-23 17:36:12,2018-08-23 17:36:12,How to link correctly C++ files to an existing Android Project in Android Studio?,<android><c++>,2,2,,,
Android,52269697,1,,,,,,9/11/2018 6:12:59,,1,61,"<p>How to use <a href=""https://developer.android.com/reference/android/arch/paging/PageKeyedDataSource.html#loadInitial(android.arch.paging.PageKeyedDataSource.LoadInitialParams%3CKey%3E,%20android.arch.paging.PageKeyedDataSource.LoadInitialCallback%3CKey,%20Value%3E)"" rel=""nofollow noreferrer"">loadInitial</a> in the paging library?</p>

<p>I am wondering If I could use a blocking call in <code>loadInitial()</code> to get the response from API. By doing this, I can make sure the returned pagedList contains the first page. Is it the correct way to use this method?</p>

<pre><code>pagedListAdapter.submitList(list)
</code></pre>

<p><a href=""https://github.com/googlesamples/android-architecture-components/blob/7f861fd45d158e6277a3c35163c7f663e135b2cf/PagingWithNetworkSample/app/src/main/java/com/android/example/paging/pagingwithnetwork/reddit/repository/inMemory/byPage/PageKeyedSubredditDataSource.kt#L110"" rel=""nofollow noreferrer"">In Google's example</a>, they are using loadInitial() in a blocking way. Is it considering a good practice?</p>
",475242,,475242,,2018-09-11 6:20:04,2018-09-11 6:20:04,Can loadInitial() be blocking when loading data from API,<android><android-paging>,1,1,,,
Android,52374888,1,,,,,,9/17/2018 20:00:30,,3,228,"<p>I'm trying to display normal Full HD preview in landscape orientation (1920x1080) using <code>Camera2</code>, but camera returns 1440x1080 as the highest resolution.</p>

<p>With Legacy Camera (<code>android.hardware.camera</code>) there was no such issue for the same device. What am I doing wrong?</p>

<pre><code>CameraManager manager = (CameraManager) getSystemService(Context.CAMERA_SERVICE);
cameraId = manager.getCameraIdList()[0];
CameraCharacteristics characteristics = manager.getCameraCharacteristics(cameraId);
StreamConfigurationMap map = characteristics.get(CameraCharacteristics.SCALER_STREAM_CONFIGURATION_MAP);
assert map != null;
imageDimension = map.getOutputSizes(SurfaceTexture.class)[0];

for (Size size : map.getOutputSizes(SurfaceTexture.class)) {
    Log.i(TAG, ""imageDimension "" + size);
}
</code></pre>

<p>Output:</p>

<pre><code>imageDimension 1440x1080
imageDimension 1280x960
imageDimension 1280x720
imageDimension 864x480
imageDimension 640x640
imageDimension 832x486
imageDimension 800x480
imageDimension 720x480
imageDimension 768x432
imageDimension 640x480
</code></pre>

<p>Also it seems that to correctly display preview in landscape we need a lot of headache code like:</p>

<pre><code>private void configureTransform(int viewWidth, int viewHeight) {
        Activity activity = getActivity();
        if (null == mTextureView || null == mPreviewSize || null == activity) {
            return;
        }
        int rotation = activity.getWindowManager().getDefaultDisplay().getRotation();
        Matrix matrix = new Matrix();
        RectF viewRect = new RectF(0, 0, viewWidth, viewHeight);
        RectF bufferRect = new RectF(0, 0, mPreviewSize.getHeight(), mPreviewSize.getWidth());
        float centerX = viewRect.centerX();
        float centerY = viewRect.centerY();
        if (Surface.ROTATION_90 == rotation || Surface.ROTATION_270 == rotation) {
            bufferRect.offset(centerX - bufferRect.centerX(), centerY - bufferRect.centerY());
            matrix.setRectToRect(viewRect, bufferRect, Matrix.ScaleToFit.FILL);
            float scale = Math.max(
                    (float) viewHeight / mPreviewSize.getHeight(),
                    (float) viewWidth / mPreviewSize.getWidth());
            matrix.postScale(scale, scale, centerX, centerY);
            matrix.postRotate(90 * (rotation - 2), centerX, centerY);
        } else if (Surface.ROTATION_180 == rotation) {
            matrix.postRotate(180, centerX, centerY);
        }
        mTextureView.setTransform(matrix);
    }
</code></pre>

<p>From official sample <a href=""https://github.com/googlesamples/android-Camera2Basic/blob/master/Application/src/main/java/com/example/android/camera2basic/Camera2BasicFragment.java#L740"" rel=""nofollow noreferrer"">https://github.com/googlesamples/android-Camera2Basic/blob/master/Application/src/main/java/com/example/android/camera2basic/Camera2BasicFragment.java#L740</a></p>

<p>Isn't Camera2 supposed to make things easier than legacy camera? I'm not sure...</p>

<p>Though one good thing I see: we can set many surface targets, with legacy camera we could not use <code>setPreviewDisplay</code> and <code>setPreviewTexture</code> together, but Camera2 allows many outputs</p>

<p><strong>UPDATE</strong></p>

<p>OMG!</p>

<p>Next information shocked me:</p>

<p><a href=""https://i.stack.imgur.com/ZRjJ7.png"" rel=""nofollow noreferrer""><img src=""https://i.stack.imgur.com/ZRjJ7.png"" alt=""enter image description here""></a></p>

<p>p.s. I have tested on Xiaomi device</p>

<p><a href=""https://stackoverflow.com/questions/31362202/android-camera2-output-sizes"">Android Camera2 Output sizes</a></p>

<p><a href=""https://github.com/googlesamples/android-Camera2Basic/issues/113"" rel=""nofollow noreferrer"">https://github.com/googlesamples/android-Camera2Basic/issues/113</a></p>

<p><a href=""https://github.com/googlesamples/android-Camera2Basic/issues/123"" rel=""nofollow noreferrer"">https://github.com/googlesamples/android-Camera2Basic/issues/123</a></p>
",9766649,,9766649,,2019-03-11 8:25:00,2019-03-31 16:05:48,Camera2 1440x1080 is maximum,<android><android-camera2>,1,1,,,
Android,52454186,1,,,,,,9/22/2018 6:37:24,,3,157,"<p>I have a problem when apply <a href=""https://developer.android.com/topic/libraries/architecture/paging/"" rel=""nofollow noreferrer"">Paging Library</a> to my project which is using (<a href=""https://github.com/googlesamples/android-architecture/tree/todo-mvp-dagger/todoapp/app/src/main/java/com/example/android/architecture/blueprints/todoapp/data/source"" rel=""nofollow noreferrer"">Repository Pattern</a>)</p>

<p>In my repository, I already have <code>UsersDataSource</code>, <code>UsersRepository</code>, <code>UserLocalDataSource</code>, <code>UserRemoteDataSource</code></p>

<p>To use <a href=""https://developer.android.com/topic/libraries/architecture/paging/"" rel=""nofollow noreferrer"">Paging Library</a>, I see we need to create class like <code>...DataSource extend ItemKeyedDataSource</code> and <code>...DataSourceFactory extend DataSource.Factory</code> (I am follow tutorial <a href=""https://medium.com/@Ahmed.AbdElmeged/android-paging-library-with-rxjava-and-rest-api-e5c229fd70ba"" rel=""nofollow noreferrer"">here</a> to learn <a href=""https://developer.android.com/topic/libraries/architecture/paging/"" rel=""nofollow noreferrer"">Paging library</a>).<br>
It <strong>conflict</strong> with my current repository class.</p>

<p>Is there any good way to apply <a href=""https://developer.android.com/topic/libraries/architecture/paging/"" rel=""nofollow noreferrer"">Paging Library</a> with <code>Repository</code> pattern.<br>
I just learn paging library. Any help or suggestion would be great appreciated.</p>
",5381331,,,,,2018-10-17 11:11:25,Repository pattern with paging library,<android><android-paging-library>,1,0,,,
Android,52477887,1,,,,,,9/24/2018 11:01:29,,3,239,"<p>When I config Android Studio 3.3 Canary 11 (gradle 3.3.0 alpha 11) with Kotlin 1.3.0-rc-57 and <code>constraintlayout 2.0</code></p>

<p>I have some problems like this, and AS can not work with some projects, i.e <a href=""https://github.com/googlesamples/android-sunflower/"" rel=""nofollow noreferrer"">https://github.com/googlesamples/android-sunflower/</a></p>

<p>Problem: AS can't understand Kotlin code, no auto-complete of codes, etc.....</p>

<p>Not all projects, maybe only the projects with <code>constraintlayout 2.0</code></p>

<p>Error in AS:</p>

<pre><code>com.google.common.util.concurrent.UncheckedExecutionException: java.io.IOException: File format error reading /Users/xxxxx/.gradle/caches/transforms-1/files-1.1/constraintlayout-2.0.0-alpha2.aar/66d32464c2b8004a7b95f523ebd1e95c/R.txt line 1743: 'int[] styleable GradientColor { 0x0101020b, 0x010101a2, 0x010101a3, 0x0101019e, 0x01010512, 0x01010513, 0x010101a4, 0x0101019d, 0x01010510, 0x01010511, 0x01010201, 0x010101a1 }'
    at com.android.utils.concurrency.CacheUtils.getAndUnwrap(CacheUtils.kt:37)
    at com.android.tools.idea.res.ProjectLightResourceClassService.getAarRClasses(ProjectLightResourceClassService.kt:172)
    at com.android.tools.idea.res.ProjectLightResourceClassService.getAarRClasses$default(ProjectLightResourceClassService.kt:169)
    at com.android.tools.idea.res.ProjectLightResourceClassService.getLightRClassesAccessibleFromModule(ProjectLightResourceClassService.kt:122)
</code></pre>

<p><a href=""https://issuetracker.google.com/issues/116402286"" rel=""nofollow noreferrer"">issue</a></p>
",1835650,,1835650,,2018-09-24 11:03:44,2018-09-29 20:49:35,Big problem Android Studio 3.3 Canary 11 (gradle 3.3.0 alpha 11) with Kotlin 1.3.0-rc-57 and constraintlayout 2.0,<android><android-studio><android-gradle>,2,2,2,,
Android,52480833,1,,,,,,9/24/2018 13:47:34,,1,240,"<p>I am trying to implement app bundle for my project. On starting the dynamic module activity, it is downloading the module and trying to install the module, but is not able to completely install it. It gets stuck as in the image given below. 
<a href=""https://i.stack.imgur.com/kHc8k.jpg"" rel=""nofollow noreferrer""><img src=""https://i.stack.imgur.com/kHc8k.jpg"" alt=""enter image description here""></a></p>

<p>Following the below link for reference. 
<a href=""https://github.com/googlesamples/android-dynamic-features"" rel=""nofollow noreferrer"">https://github.com/googlesamples/android-dynamic-features</a></p>

<pre><code>import android.content.Intent
import android.os.Bundle
import android.support.v7.app.AppCompatActivity
import android.util.Log
import android.view.View
import android.widget.ProgressBar
import android.widget.TextView
import com.google.android.play.core.splitinstall.*
import com.google.android.play.core.splitinstall.model.SplitInstallSessionStatus
import com.lenskart.app.R

private const val modulePackageName = ""com.test.feature""

private const val htoClassname = ""$modulePackageName.hto.HtoActivity""

private const val atHomeClassname = ""$modulePackageName.athome.AtHomeActivity""

class BundleActivity : AppCompatActivity() {

    private val listener = SplitInstallStateUpdatedListener { state -&gt;
        val multiInstall = state.moduleNames().size &gt; 1
        state.moduleNames().forEach { name -&gt;
            when (state.status()) {
                SplitInstallSessionStatus.DOWNLOADING -&gt; {
                    displayLoadingState(state, ""Downloading $name"")
                }
                SplitInstallSessionStatus.REQUIRES_USER_CONFIRMATION -&gt; {
                    startIntentSender(state.resolutionIntent().intentSender, null, 0, 0, 0)
                }
                SplitInstallSessionStatus.INSTALLED -&gt; {
                    displayLoadingState(state, ""Installed $name"")
                    onSuccessfulLoad(name, launch = !multiInstall)
                }

                SplitInstallSessionStatus.INSTALLING -&gt; displayLoadingState(state, ""Installing $name"")
                SplitInstallSessionStatus.FAILED -&gt; {
                    Log.e(TAG, ""Error: ${state.errorCode()} for module ${state.moduleNames()}"")
                }

                SplitInstallSessionStatus.CANCELED -&gt; displayLoadingState(state, ""Cancelled $name"")
                SplitInstallSessionStatus.UNKNOWN -&gt; displayLoadingState(state, ""Unknown thingy $name"")
                SplitInstallSessionStatus.PENDING -&gt; displayLoadingState(state, ""Pending $name"")

            }
        }
    }

    private val moduleHto by lazy { ""hto"" }
    private val moduleAtHome by lazy { ""athome"" }

    private lateinit var manager: SplitInstallManager

    private lateinit var progressBar: ProgressBar
    private lateinit var progressText: TextView

    override fun onCreate(savedInstanceState: Bundle?) {
        super.onCreate(savedInstanceState)
        setContentView(R.layout.activity_bundle)
        manager = SplitInstallManagerFactory.create(this)
        initializeViews()
        loadAndLaunchModule(moduleAtHome)
    }

    override fun onResume() {
        manager.registerListener(listener)
        super.onResume()
    }

    override fun onPause() {
        manager.unregisterListener(listener)
        super.onPause()
    }

    private fun loadAndLaunchModule(name: String) {
        updateProgressMessage(""Loading module $name"")
        if (manager.installedModules.contains(name)) {
            updateProgressMessage(""Already installed"")
            onSuccessfulLoad(name, launch = true)
            return
        }
        val request = SplitInstallRequest.newBuilder()
                .addModule(name)
                .build()

        manager.startInstall(request)

        updateProgressMessage(""Starting install for $name"")
    }

    private fun onSuccessfulLoad(moduleName: String, launch: Boolean) {
        if (true) {
            when (moduleName) {
                moduleHto -&gt; launchActivity(htoClassname)
                moduleAtHome -&gt; launchActivity(atHomeClassname)
            }
        }

        displayButtons()
    }

    private fun launchActivity(className: String) {
        Intent().setClassName(packageName, className)
                .also {
                    startActivity(it)
                }
    }

    private fun displayLoadingState(state: SplitInstallSessionState, message: String) {
        displayProgress()

        progressBar.max = state.totalBytesToDownload().toInt()
        progressBar.progress = state.bytesDownloaded().toInt()

        updateProgressMessage(message)
    }

    private fun initializeViews() {
        progressBar = findViewById(R.id.progress_bar)
        progressText = findViewById(R.id.progress_text)
    }

    private fun updateProgressMessage(message: String) {
        if (progressText.visibility != View.VISIBLE &amp;&amp;
                progressBar.visibility != View.VISIBLE) displayProgress()
        progressText.text = message
    }

    private fun displayProgress() {
        progressText.visibility = View.VISIBLE
        progressBar.visibility = View.VISIBLE
    }

    private fun displayButtons() {
        progressText.visibility = View.GONE
        progressBar.visibility = View.GONE
    }

}

private const val TAG = ""DynamicFeatures""
</code></pre>
",2053458,,,,,2018-11-09 7:18:56,"Dynamic Feature activity not loading, stuck at installation",<android><generics><app-bundle><android-app-bundle>,2,1,1,,
Android,53141233,1,,,,,,11/4/2018 13:16:22,,1,76,"<p>A ViewPager preloads fragments.</p>

<p>But with a pageWidth=0.5 (2 fragments per screen), I think it loads too much views before the current position...</p>

<p><img src=""https://i.imgur.com/a7NJ4qC.jpg"" alt=""fff"">
I have <code>pageLimit=1</code> and <code>pageWidth=0.5</code>.<br>
It should be ok to preload LEFT1 and LEFT2, but why LEFT3 ?<br>
LEFT3 is not on the next left screen...</p>

<p>I tried to understand ViewPager.java from support v4:<br>
<a href=""https://android.googlesource.com/platform/frameworks/support/+/support-library-27.1.1/core-ui/src/main/java/android/support/v4/view/ViewPager.java#1155"" rel=""nofollow noreferrer"">https://android.googlesource.com/platform/frameworks/support/+/support-library-27.1.1/core-ui/src/main/java/android/support/v4/view/ViewPager.java#1155</a></p>

<p>line 1155, it says</p>

<blockquote>
  <p>// Fill 3x the available width or up to the number of offscreen<br>
  // pages requested to either side, whichever is larger.
  But for multiple fragments per screen, it loads more before than current and after the current position.</p>
</blockquote>

<p>With the Google sample project <a href=""https://github.com/googlesamples/android-SlidingTabsBasic/"" rel=""nofollow noreferrer"">https://github.com/googlesamples/android-SlidingTabsBasic/</a><br>
adding</p>

<pre><code>protected void onCreate(Bundle savedInstanceState) {
   [...]
   mViewPager.setCurrentItem(25);

@Override
public float getPageWidth(int position) {
     // 2 fragments per screen
     return .5f;
}
@Override
public int getCount() {
    // 50 fragments
    return 50;
}
public Fragment getItem(int position) {
    [...]
    Log.d(""debugpageviewer"", ""position=""+position);
}
</code></pre>

<p>And it loads 7 fragments (3 before current position). The smaller the pageWidth, the more fragments are loaded before.</p>

<p>So, is this a bug or did I miss something ?</p>
",4159664,,,,,2018-11-04 15:03:10,Android ViewPager preloading too much fragments,<android><android-viewpager>,1,0,,,
Android,53445426,1,,,,,,11/23/2018 11:00:24,,1,100,"<p>Using Android sceneform I am developing an application, I know that currently we don't have an option to record a video with rendered 3d Objects but is there any option to record a camera data's just like we are doing normal camera video recording (<a href=""https://github.com/googlesamples/android-Camera2Video"" rel=""nofollow noreferrer"">Google Android video record sample</a>)?</p>
",9713119,,,,,2018-12-19 18:39:50,How to record video using Camera2 API in SceneForm,<android><android-camera2><sceneform>,1,0,,,
Android,53494927,1,,,,,,11/27/2018 7:45:50,,6,63,"<p>As per <a href=""https://github.com/googlesamples/android-UniversalMusicPlayer"" rel=""noreferrer"">Uamp</a> sample when <code>onPlayFromMediaId</code> is called its <code>mediaId</code> is matched with list of <code>queueitems</code> already stored using <code>iterator</code> as below</p>

<pre><code>public static int getMusicIndexOnQueue(Iterable&lt;MediaSessionCompat.QueueItem&gt; queue,
         String mediaId) {
    int index = 0;
    for (MediaSessionCompat.QueueItem item : queue) {
        if (mediaId.equals(item.getDescription().getMediaId())) {
            return index;
        }
        index++;
    }
    return -1;
} 
</code></pre>

<p>this works great unless you have some thousand items in your list, its lags badly, is there any way I can get the index on queue in this scenario?</p>

<p>P.S.- This code is from v1 branch although v2 kotlin based branch has the same concept.</p>
",517247,,,,,2018-12-05 10:55:15,MediaBrowserCompat queue find item,<android><android-mediasession>,1,0,,,
Android,53507668,1,,,,,,11/27/2018 20:31:53,,1,80,"<p>What is the recommendation about placing Toasts, Snackbars in Activity vs. Fragment in the era of <code>ViewModel</code> and <code>one activity multiple fragments</code> concept.</p>

<p>Its clear that things like</p>

<ul>
<li>new Intents</li>
<li>Fragment transactions/fragment setup</li>
<li>permission requests</li>
<li>presenting navigational components (drawer, viewpager)</li>
</ul>

<p>should be handled by activity but what about <strong>Toasts</strong>/<strong>Snackbars</strong>?</p>

<p>There are so many SO questions about how to show Toasts or Snackbars in Fragment and how + when to use <code>getContext()</code> that I tend to let the activity handle all showing messages.</p>

<p>With ViewModel and <a href=""https://github.com/googlesamples/android-architecture/blob/dev-todo-mvvm-live/todoapp/app/src/main/java/com/example/android/architecture/blueprints/todoapp/SingleLiveEvent.java"" rel=""nofollow noreferrer"">SingleLiveEvent</a> its quite easy to have a sharedViewModel that will be observed by activity and fragments and when needed a fragment dispatchs an event that notifies the activity to show a message.</p>

<p>So what do you think is best practice/recommended while having resposibility and separation of concerns in mind?</p>
",3357313,,,,,2018-11-30 4:32:42,"Where to place Toasts, Snackbars etc. in era of Android Architecture Components",<android><android-architecture-components><android-viewmodel>,2,0,,,
Android,53635269,1,,,,,,12/5/2018 15:09:09,,2,380,"<p>I'm currently working on a school project and pulled the code from here <a href=""https://github.com/googlesamples/android-nearby/tree/master/connections/rockpaperscissors"" rel=""nofollow noreferrer"">https://github.com/googlesamples/android-nearby/tree/master/connections/rockpaperscissors</a>. I'm using Intellij IDEA Ultimate 2018.3. (Well, it's basically an Android Studio as well)</p>

<p>I worked on that project for several days and everything works <strong>fine</strong> until today i found this Gradle error:</p>

<pre><code>Failed to resolve: androidx.appcompat:appcompat:1.1.0-alpha01
Show in File


Failed to resolve: com.google.android.gms:play-services-nearby:16.0.0
Install Repository and sync project
Show in File
</code></pre>

<p>Here's my project level build.gradle:</p>

<pre><code>buildscript {
    repositories {
        google()
        maven {
            url 'https://maven.google.com/'
            name 'Google'
        }
        jcenter()

    }
    dependencies {
        classpath 'com.android.tools.build:gradle:3.4.0-alpha06'
        // NOTE: Do not place your application dependencies here; they belong
        // in the individual module build.gradle files
    }
}

    repositories {
        google()
        maven {
            url ""https://maven.google.com""
        }
        jcenter()
    }


task clean(type: Delete) {
    delete rootProject.buildDir
}
</code></pre>

<p>And here's my module build.gradle:</p>

<pre><code>apply plugin: 'com.android.application'

android {
    compileSdkVersion 28
    defaultConfig {
        applicationId ""{my school project Id}""
        minSdkVersion 23
        targetSdkVersion 28
        versionCode 1
        versionName ""1.0""
    }

}

dependencies {
    implementation 'androidx.appcompat:appcompat:1.1.0-alpha01'
    implementation 'com.google.android.gms:play-services-nearby:16.0.0'
}
</code></pre>

<p>What <strong>i have done</strong> to solve this:</p>

<ol>
<li>Invalidate/Restart IntelliJ</li>
<li>Rebuild/Clean project</li>
<li>Checked Google Maven Repository for possible typos on package names</li>
<li>Restarted my computer</li>
<li>Reinstalled Google Play Services</li>
</ol>

<p>What makes me more frustrated is the fact that everything is fine yesterday! So, any help would be appreciated. Thank you!</p>
",7130705,,7130705,,2018-12-05 15:20:08,2019-04-15 7:06:37,Gradle cannot resolve androidx.appcompat:appcompat:1.1.0-alpha01 and com.google.android.gms:play-services-nearby:16.0.0,<android><android-studio><gradle><android-gradle><google-play-services>,2,0,,,
Android,53865978,1,,,,,,12/20/2018 9:42:19,,7,2071,"<p>I've implemented the <code>SMS Retriever API</code> like in the google tutorials and in my debug Build Variant work fine. I can read the sms and get the code to the user can do the login. </p>

<p>My problem is when I run the app in release Build Variant the sms it doesn't work. I receive the sms but I can't read the code to do the login.</p>

<p>I change the hash generated with <a href=""https://github.com/googlesamples/android-credentials/blob/master/sms-verification/android/app/src/main/java/com/google/samples/smartlock/sms_verify/AppSignatureHelper.java"" rel=""nofollow noreferrer"">AppSignatureHelper </a> in release mode that is differente than in the debug mode. In debug work and in release no.</p>

<p>Some help will be appreciate</p>

<p>The code:</p>

<p><strong>Manifest:</strong></p>

<pre><code>   &lt;receiver android:name="".app.receivers.SmsReceiver""&gt;
        &lt;intent-filter&gt;
            &lt;action android:name=""com.google.android.gms.auth.api.phone.SMS_RETRIEVED""/&gt;
        &lt;/intent-filter&gt;
    &lt;/receiver&gt;
</code></pre>

<p>In my class: (In release and in debug mode the code go throw the onSucess method) This method is called in <strong>onCreate</strong>.</p>

<pre><code>private void startSMSListening(){
    SmsRetrieverClient client = SmsRetriever.getClient(this);
    Task&lt;Void&gt; task = client.startSmsRetriever();

    task.addOnSuccessListener(new OnSuccessListener&lt;Void&gt;() {
        @Override
        public void onSuccess(Void aVoid) {
            // Successfully started retriever, expect broadcast intent
            Log.e(""startSMSListening"", ""listening sms"");
            sendCode();
            showHideLoadingView(false);
        }
    });

    task.addOnFailureListener(new OnFailureListener() {
        @Override
        public void onFailure(@NonNull Exception e) {
            // Failed to start retriever, inspect Exception for more details
            Log.e(""startSMSListening"", ""failure listening sms"");
            showHideLoadingView(false);
        }
    });
}
</code></pre>

<p><strong>My receiver:</strong></p>

<pre><code>public class SmsReceiver extends BroadcastReceiver {
    //interface
    private static SmsListener mListener;

    @Override
    public void onReceive(Context context, Intent intent) {
        if (SmsRetriever.SMS_RETRIEVED_ACTION.equals(intent.getAction())) {
            Bundle extras = intent.getExtras();
            if(extras != null) {
                Status status = (Status) extras.get(SmsRetriever.EXTRA_STATUS);

                if(status != null) {
                    switch (status.getStatusCode()) {
                        case CommonStatusCodes.SUCCESS:
                            // Get SMS message contents
                            String message = (String) extras.get(SmsRetriever.EXTRA_SMS_MESSAGE);
                            //Pass the message text to interface
                            if (mListener != null &amp;&amp; !StringUtil.isNull(message)) {
                                mListener.messageReceived(message);
                            }
                            break;
                        case CommonStatusCodes.TIMEOUT:
                            Log.d(""SMSReceiver"", ""timed out (5 minutes)"");
                            break;
                    }
                }
            }
        }
    }

    public static void bindListener(SmsListener listener) {
        mListener = listener;
    }
}
</code></pre>

<p><strong>My smsReceiver method:</strong></p>

<pre><code>private void smsReceiver(){
        SmsReceiver.bindListener(new SmsListener() {
            @Override
            public void messageReceived(String messageText) {
                //From the received text string you may do string operations to get the required OTP
                //It depends on your SMS format
                Log.e(""Message"",messageText);

                // If your OTP is six digits number, you may use the below code
                Pattern pattern = Pattern.compile(OTP_REGEX);
                Matcher matcher = pattern.matcher(messageText);
                String otp = null;

                while (matcher.find()) {
                    otp = matcher.group();
                }

                if(otp != null &amp;&amp; et_code != null) {
                    et_code.setText(otp);
                }
            }
        });
    }
</code></pre>
",4403871,,7649582,,2019-01-16 12:28:03,2019-04-17 14:18:12,Why SMS Retriever API don't work in release mode?,<android><android-intent><android-broadcast><android-broadcastreceiver><android-sms>,6,5,2,,
Android,54073476,1,,,,,,1/7/2019 11:25:41,,1,45,"<p>First and foremost, I'm testing this app using my Google Pixel XL (1st gen 32 GB version, runnning Android 9 API Level 28)</p>

<p>Basically, I'm trying to make a camera application based on Android Camera 2 API <strong>(I just downloaded the sample code from <a href=""https://github.com/googlesamples/android-Camera2Basic"" rel=""nofollow noreferrer"">https://github.com/googlesamples/android-Camera2Basic</a>)</strong>. and I'm stuck because I'm trying to save the picture taken by the camera into ""Pictures"" folder inside ""<code>/storage/emulated/0/</code>"". </p>

<p>However, for some reason even though it seems like I'm able to do this, the folder and the picture file are not there when I checked them with ES File Explorer.  </p>

<p>I've tried 3 methods so far: </p>

<p><strong>Attempt #1:</strong></p>

<pre><code>    mFile = new File(getActivity().getExternalFilesDir(Environment.DIRECTORY_PICTURES), ""newPicture.jpg"");
    if(Environment.MEDIA_MOUNTED.equals(Environment.getExternalStorageState())){

        mFile = new File(Environment.getExternalStoragePublicDirectory(Environment.DIRECTORY_PICTURES), ""picture.jpg"");
        mFile.mkdirs();
    }
</code></pre>

<p><strong>Attempt #2:</strong></p>

<pre><code>    File filePath = new File(Environment.getExternalStorageDirectory().getPath(),""randomFolder"");
    if(!filePath.exists()){
        filePath.mkdirs();
    }
    String fullPathName = filePath.getAbsolutePath() + ""/"" + ""newPicture.jpg"";
    mFile = new File(fullPathName);
</code></pre>

<p><strong>Attempt #3:</strong></p>

<pre><code>    mFile = new File(fullPathName);
    File filePath = new File(Environment.getExternalStorageDirectory() + ""/Pictures/"");
    if (!filePath.exists()){
        filePath.mkdirs();
    }
    mFile = new File(filePath,""newPicture.jpg"");
</code></pre>

<p>mFile is the File path where ""newPicture"" will be saved to, basically it's supposed to be saved to ""/storage/emulated/0/Pictures/newPicture.jpg""</p>

<p>Now, I've tried to use getExternalFilesDir() method so the picture will be saved into <code>/storage/emulated/0/Android/data/com.***.***[the package name]/files/Pictures/newPicture.jpg</code>"" and in this case, IT TOTALLY WORKS! However I REALLY want to save the picture to <code>/storage/emulated/0</code> directory because I want user to be able to access the data easily later on. </p>

<p>In order to illustrate this better, I've recorded the application running and then took a picture and saved it in a gif, uploaded it to imgur right here: 
<a href=""https://imgur.com/Szpc1HR"" rel=""nofollow noreferrer"">https://imgur.com/Szpc1HR</a></p>

<p>See that? The picture seems to be saved into ""/storage/emulated/0/Pictures/newPicture.jpg"" successfully but then when I went to ES File Explorer to check the picture, the folder ""Pictures"" was not created, nada. </p>

<p>I'm literally on my wits end right here haha, does anyone know a solution to this problem? Any advice will be greatly appreciated</p>

<p>P.S. Almost forgot to say, I've already added the permission in <code>AndroidManifest.xml</code>:</p>

<pre><code>&lt;uses-permission android:name=""android.permission.CAMERA"" /&gt;
&lt;uses-permission android:name=""android.permission.WRITE_EXTERNAL_STORAGE""/&gt;

&lt;uses-feature android:name=""android.hardware.camera"" /&gt;
&lt;uses-feature android:name=""android.hardware.camera.autofocus"" /&gt;
</code></pre>
",7640725,,7640725,,2019-01-07 11:40:47,2019-01-07 11:57:58,Cannot create directory and save picture taken by camera in storage/emulated/0,<android><camera><storage><external>,1,2,,,
Android,54091648,1,,,,,,1/8/2019 12:16:38,,2,230,"<p>My use case is when user start recording video, I need to record video and also process the preview frames for user face inside the frames using Firebase face detection. I have tried to do it following way but some preview is paused.</p>

<p>I am using <a href=""https://github.com/googlesamples/android-Camera2Video"" rel=""nofollow noreferrer"">googlesamples/android-Camera2Video</a> codebase and I have added following code inside it.</p>

<p>Inside <code>Camera2VideoFragment</code> class:</p>

<pre><code>private ImageReader mYUVImageReader;
private final ImageReader.OnImageAvailableListener mOnYUVImageAvailableListener
            = new ImageReader.OnImageAvailableListener() {

   @Override
   public void onImageAvailable(ImageReader reader) {
        Log.d(Camera2VideoFragment.TAG, ""Bipin - onImageAvailable "");
   }
}
</code></pre>

<p>Inside <code>openCamera</code> method:</p>

<pre><code>mYUVImageReader = ImageReader
                    .newInstance(mPreviewSize.getWidth()/16, mPreviewSize.getHeight()/16,ImageFormat.YUV_420_888, 2);
            mYUVImageReader.setOnImageAvailableListener(
                    mOnYUVImageAvailableListener, mBackgroundHandler);
</code></pre>

<p>Inside <code>startRecording</code> method:</p>

<pre><code>   Surface imageSurface = mYUVImageReader.getSurface();
   surfaces.add(imageSurface);
   mPreviewBuilder.addTarget(imageSurface);
</code></pre>

<p>I have tried to set <code>imageSurface</code> inside startPreview as well but no luck, Facing the same preview still issue. Please provide your input or correct me about what is the best approach for this scenario?</p>

<p>Demo app code here: <a href=""https://github.com/bipinvaylu/Camera2Demo/tree/bipin"" rel=""nofollow noreferrer"">https://github.com/bipinvaylu/Camera2Demo/tree/bipin</a></p>

<p>Updated:[10-Jan-2019]
I have renamed it to mYUVImageReader, Please find details here: 
Init: <a href=""https://github.com/bipinvaylu/Camera2Demo/blob/bipin/app/src/main/java/com/camerademo/Camera2VideoFragment.java#L477"" rel=""nofollow noreferrer"">https://github.com/bipinvaylu/Camera2Demo/blob/bipin/app/src/main/java/com/camerademo/Camera2VideoFragment.java#L477</a>
Adding ImageReaderSurface here: <a href=""https://github.com/bipinvaylu/Camera2Demo/blob/bipin/app/src/main/java/com/camerademo/Camera2VideoFragment.java#L540"" rel=""nofollow noreferrer"">https://github.com/bipinvaylu/Camera2Demo/blob/bipin/app/src/main/java/com/camerademo/Camera2VideoFragment.java#L540</a></p>

<p><em>My main concern is, Does it possible to provid output to the Preview surface (mTextureView.getSurfaceTexture()), Recording (mMediaRecorder.getSurface()) and Continuous Image (mYUVImageReader.getSurface()) simultaneously by using Camera 2 API?</em></p>
",722683,,722683,,2019-01-10 11:49:41,2019-01-10 11:49:41,"Camera 2 API to Preview, Record and Extract the preview frame to Firebase face detection processing simultaneously",<android><face-detection><android-camera2>,2,0,,,
Android,54319444,1,,,,,,1/23/2019 3:02:29,,2,362,"<p>I am trying to create a viewmodel module like in this <a href=""https://github.com/googlesamples/android-architecture-components/blob/master/GithubBrowserSample/app/src/main/java/com/android/example/github/viewmodel/GithubViewModelFactory.kt"" rel=""nofollow noreferrer"">example</a> but I am having this error </p>

<blockquote>
  <p>error: java.util.Map,javax.inject.Provider> cannot be provided without an @Provides-annotated method.</p>
</blockquote>

<p>I followed all the example, here are my codes</p>

<p>ViewModelFactory class</p>

<p><div class=""snippet"" data-lang=""js"" data-hide=""false"" data-console=""true"" data-babel=""false"">
<div class=""snippet-code"">
<pre class=""snippet-code-js lang-js prettyprint-override""><code>@Singleton
public class ViewModelFactory implements ViewModelProvider.Factory {

    private final Map&lt;Class&lt;? extends ViewModel&gt;, Provider&lt;ViewModel&gt;&gt; mCreators;

    @Inject
    ViewModelFactory(Map&lt;Class&lt;? extends ViewModel&gt;, Provider&lt;ViewModel&gt;&gt; creators) {
        mCreators = creators;
    }

    @NonNull
    @Override
    public &lt;T extends ViewModel&gt; T create(@NonNull Class&lt;T&gt; modelClass) {
        Provider&lt;? extends ViewModel&gt; creator = mCreators.get(modelClass);
        if (creator == null) {
            for (Map.Entry&lt;Class&lt;? extends ViewModel&gt;, Provider&lt;ViewModel&gt;&gt; entry : mCreators
                    .entrySet()) {
                if (modelClass.isAssignableFrom(entry.getKey())) {
                    creator = entry.getValue();
                    break;
                }
            }
        }
        if (creator == null) {
            throw new IllegalArgumentException(""unknown model class "" + modelClass);
        }
        try {
            return (T) creator.get();
        } catch (Exception e) {
            throw new RuntimeException(e);
        }
    }
}</code></pre>
</div>
</div>
</p>

<p>ViewModelModule class</p>

<p><div class=""snippet"" data-lang=""js"" data-hide=""false"" data-console=""true"" data-babel=""false"">
<div class=""snippet-code"">
<pre class=""snippet-code-js lang-js prettyprint-override""><code>@Module
public abstract class ViewModelModule {

    @Binds
    abstract ViewModelProvider.Factory bindViewModelFactory(ViewModelFactory factory);

}</code></pre>
</div>
</div>
</p>

<p>and this is the component</p>

<p><div class=""snippet"" data-lang=""js"" data-hide=""false"" data-console=""true"" data-babel=""false"">
<div class=""snippet-code"">
<pre class=""snippet-code-js lang-js prettyprint-override""><code>@Singleton
@Component(modules = {AppModule.class, ViewModelModule.class})
public interface MainComponent {


    void inject(Sdk sdk);

    void injectTestActivity(TestActivity testActivity);


}</code></pre>
</div>
</div>
</p>

<p>ps: this implementation in android library not in the application project</p>
",4312282,,4312282,,2019-01-23 3:46:08,2019-01-24 15:07:12,<android.arch.lifecycle.ViewModel>> cannot be provided without an @Provides-annotated method,<java><android><dependency-injection><viewmodel><dagger-2>,1,4,,,
Android,54402542,1,,,,,,1/28/2019 12:57:43,,2,96,"<p>I have followed Android Architecture Blueprints Dagger2 for dependency injection : <a href=""https://github.com/googlesamples/android-architecture/tree/todo-mvp-dagger"" rel=""nofollow noreferrer"">https://github.com/googlesamples/android-architecture/tree/todo-mvp-dagger</a></p>

<p>Now I want to inject Adapter to my Fragment class : </p>

<pre><code>@ActivityScoped
class MainFragment @Inject
constructor(): DaggerFragment() {

    @Inject lateinit var adapter : ArtistAdapter 
}
</code></pre>

<p>And I have following in the module class : </p>

<pre><code>@Module
abstract class MainModule {
    @FragmentScoped
    @ContributesAndroidInjector
    internal abstract fun mainFragment(): MainFragment

    @Module
    companion object {
        @Provides
        @ActivityScoped
        @JvmStatic internal fun provideArtistAdapter() = ArtistAdapter()
    }
}
</code></pre>

<p>But for some reason it fails to display data in RecyclerView. When I don't use injection and simply use <code>val adapter = ArtistAdapter()</code>, it works.</p>

<p>What am I missing in injection using Dagger2?</p>

<p>Addenda :</p>

<p><code>mainFragment</code> is implementing a callback as a click listener:</p>

<pre><code>interface ArtistClickCallback {
    fun onClick(artist: LastFmArtist, poster : ImageView)
}
</code></pre>

<p>And :</p>

<pre><code>class MainFragment : DaggerFragment(), ArtistClickCallback
</code></pre>

<p>And here is fragment module :</p>

<pre><code>@Module
class MainFragmentModule {

    @Provides
    fun provideArtistAdapter(mainFragment: MainFragment) = ArtistAdapter(mainFragment)

}
</code></pre>

<p>But I get following exception when I remove @Inject from Fragment constructor:</p>

<pre><code>error: [Dagger/MissingBinding] com.sample.android.lastfm.ui.main.MainFragment cannot be provided without an @Inject constructor or an @Provides-annotated method. This type supports members injection but cannot be implicitly provided.
public abstract interface AppComponent extends dagger.android.AndroidInjector&lt;com.sample.android.lastfm.LastFmApp&gt; {
                ^
  A binding with matching key exists in component: com.sample.android.lastfm.ui.main.MainModule_MainFragment$app_debug.MainFragmentSubcomponent
      com.sample.android.lastfm.ui.main.MainFragment is injected at
          com.sample.android.lastfm.ui.main.MainActivity.mainFragment
      com.sample.android.lastfm.ui.main.MainActivity is injected at
          dagger.android.AndroidInjector.inject(T) [com.sample.android.lastfm.di.AppComponent â†’ com.sample.android.lastfm.di.ActivityBindingModule_MainActivity$app_debug.MainActivitySubcomponent]
</code></pre>
",1315447,,1315447,,2019-02-20 11:50:59,2019-02-20 11:50:59,Inject Adapter to Fragment using Dagger2,<android><kotlin><recycler-adapter><dagger-2>,1,4,1,,
Android,54493736,1,,,,,,2/2/2019 13:57:04,,1,143,"<p>What is the difference between creating an object of RoomDatabase to use inside the callback like what is in this example of <a href=""https://github.com/googlesamples/android-architecture-components/blob/master/BasicSample/app/src/main/java/com/example/android/persistence/db/AppDatabase.java"" rel=""nofollow noreferrer"">BasicSample</a> at line 83, and 88,</p>

<p>And,</p>

<p>Using the member variable of RoomDatabase inside the callback like what is in this example of <a href=""https://github.com/googlecodelabs/android-room-with-a-view/blob/master/app/src/main/java/com/example/android/roomwordssample/WordRoomDatabase.java"" rel=""nofollow noreferrer"">android-room-with-a-view</a> at line 71?</p>

<p>I am not asking for opinion, I am asking if there is a difference or benefits  between the two examples?</p>

<p>I don't know why there is no answer</p>
",10013678,,7976274,,2019-02-04 8:28:12,2019-02-13 5:58:10,Creating an instance of Room Database inside the callback or use the member variable of that database,<java><android><callback><android-room>,1,0,,,
Android,54539912,1,,,,,,2/5/2019 17:25:15,,3,64,"<p>I am working on Chat application in which you can share YouTube link I want to play YouTube video in My App like whats app does, I think they play video in PIP mode. </p>

<ol>
<li><p>How they play YouTube video in app by using Link</p></li>
<li><p>is it supported in bellow android Oreo ?</p></li>
</ol>

<p>I tried <a href=""https://github.com/googlesamples/android-PictureInPicture"" rel=""nofollow noreferrer"">this</a> example but it does not working below Android Oreo</p>
",8091613,,4420967,,2019-02-05 19:10:05,2019-02-05 20:56:34,Is Picture-in-Picture mode supports bellow Oreo,<android><youtube-api><picture-in-picture>,1,0,,,
Android,54608165,1,,,,,,2/9/2019 16:25:59,,2,303,"<p>I'm trying to run the barcode-reader example ( <a href=""https://github.com/googlesamples/android-vision/tree/master/visionSamples/barcode-reader"" rel=""nofollow noreferrer"">https://github.com/googlesamples/android-vision/tree/master/visionSamples/barcode-reader</a> ) as it is on my Nokia 2.1 running Android 8.1.0 and Google Play Services 15.0.90. The camera starts but no barcode is detected and in the logcat I get (continuously while the camera is working) the following error:</p>

<p><code>2019-02-09 18:17:04.990 3364-3497/com.google.android.gms.samples.vision.barcodereader E/BarcodeNativeHandle: Error Loading module com.google.android.gms.dynamite.DynamiteModule$LoadingException: No acceptable module found. Local version is 0 and remote version is 0. at com.google.android.gms.dynamite.DynamiteModule.load(Unknown Source:8) at com.google.android.gms.internal.vision.zzl.zzp(Unknown Source:39) at com.google.android.gms.internal.vision.zzl.isOperational(Unknown Source:0) at com.google.android.gms.vision.barcode.BarcodeDetector.isOperational(Unknown Source:2) at com.google.android.gms.vision.Detector.receiveFrame(Unknown Source:16) at com.google.android.gms.samples.vision.barcodereader.ui.camera.CameraSource$FrameProcessingRunnable.run(CameraSource.java:1205) at java.lang.Thread.run(Thread.java:764)</code></p>

<p>What can I do to be able to run it?</p>

<p>Thanks!</p>
",618437,,484073,,2019-03-01 6:53:43,2019-03-01 6:54:11,Barcode scanning is not working with vision API,<android><barcode-scanner><android-vision><firebase-mlkit>,1,1,1,,
Android,54640389,1,,,,,,2/11/2019 22:56:49,,1,37,"<p>I am trying to create a protected context using opengl on android.</p>

<p>I am basing my code off of:
<a href=""https://github.com/googlesamples/android-ndk"" rel=""nofollow noreferrer"">https://github.com/googlesamples/android-ndk</a></p>

<p>Using the native activity as my base.</p>

<p>I have changed the EGL parameters to the following:</p>

<pre><code>EGLint context_attribs[] = {
        EGL_CONTEXT_CLIENT_VERSION, 3,
        0x32C0, EGL_TRUE,
        EGL_NONE,
};
EGLint surface_attribs[] = {
        0x32C0, EGL_TRUE,
        EGL_NONE,
};
</code></pre>

<p>And things seem to work on most devices, but a few devices are giving strange behavior (phone crashes, or not displaying at all, even though they claim to support protected contexts). A good example is the s9 qualcomm edition runs fine, until anything appears on the screen (overlay, navbar slide down, or sliding the samsung side-bar) which will result in a phone reboot. </p>

<p>Is there something I may have missed with setting up the protected contexts?</p>

<p>According to the khronos docs: 
<a href=""https://www.khronos.org/registry/EGL/extensions/EXT/EGL_EXT_protected_content.txt"" rel=""nofollow noreferrer"">https://www.khronos.org/registry/EGL/extensions/EXT/EGL_EXT_protected_content.txt</a></p>

<p>0x32c0 is the correct number for protected content.</p>

<p>--------------EDIT--------------</p>

<p>I swapped 0x32c0 over to EGL_PROTECTED_CONTENT_EXT, and checked the extensions, and EGL_EXT_protected_content does exist. There are two devices I am working with that are having problems with this specifically (Samsung Galaxy s9+ qualcomm and Samsung Galaxy Tab S2). The S2 claims it supports the protected context, but then after using it, I get EGL_BAD_ALLOC. On the S9, everything runs fine, no errors, but the device will consistently crash on me after using it for a little.</p>
",7313789,,7313789,,2019-02-15 18:51:19,2019-02-15 18:51:19,android ndk opengl creating protected context,<android><opengl-es><android-ndk><egl>,1,0,,,
Android,54879581,1,,,,,,2/26/2019 6:27:55,,1,91,"<p>Everytime fragment instance is created and reloading when you press back.</p>

<p>How to overcome this issue?</p>

<p>Inability of having proper backstack in nav controller is a huge productivity issue. Hope it's a missing feature or a work-around made on purpose... IMO this is a must-have and has to be introduced sooner rather than later (however: <a href=""https://issuetracker.google.com/issues/109856764"" rel=""nofollow noreferrer"">https://issuetracker.google.com/issues/109856764</a> says <em>We won't be allowing customization of the transaction type (such as hiding/showing, etc) for the foreseeable future.</em>) :(</p>

<p><a href=""https://github.com/googlesamples/android-architecture-components/issues/419"" rel=""nofollow noreferrer"">Nav-Framework is nice, however, it create fragment's view every time</a></p>

<p>Does anyone has solution?</p>

<p>My code is to navigate using Navigation </p>

<pre><code>object NavigationHelper : Navigational {


override fun moveDownWithPop(view: View,id: Int,popStackId: Int) {
    Navigation.findNavController(view).navigate(id,
            null,
            NavOptions.Builder()
                    .setPopUpTo(popStackId,
                            true).build()
    )
}

override fun moveDownWithDataPop(view: View,id: Int,popStackId: Int,bundle : Bundle) {
    Navigation.findNavController(view).navigate(id,
            bundle,
            NavOptions.Builder()
                    .setPopUpTo(popStackId,
                            true).build()
    )
}

override fun moveUp(view: View) {
    Navigation.findNavController(view).navigateUp()
}

override fun moveDown(view: View,id: Int) {
    Navigation.findNavController(view).navigate(id)
}

override fun moveDown(view: View,id: Int,args : Bundle) {
    Navigation.findNavController(view).navigate(id,args)
}

fun navigateGraph(graphId : Int,context : Context){
    var finalHost: NavHostFragment?  = NavHostFragment.create(graphId)
    (context as MainActivity).supportFragmentManager.beginTransaction()
            .replace(com.admision.R.id.content,finalHost!!)
            .setPrimaryNavigationFragment(finalHost) // this is the equivalent to app:defaultNavHost=""true""
            .commit()
}
}
</code></pre>

<p>i found some blog <a href=""https://proandroiddev.com/why-i-will-not-use-architecture-navigation-component-97d2ad596b36"" rel=""nofollow noreferrer"">Why I Will Not Use Architecture Navigation Component</a></p>
",1136023,,,,,2019-03-12 6:31:47,Architecture Navigation Component : onCreateView gets called every time,<android><androidx><fragment-backstack><android-navigation-component>,1,0,,,
Android,55083734,1,,,,,,3/10/2019 1:47:50,,1,47,"<p>I want to add another lib into <a href=""https://github.com/googlesamples/android-ndk/issues/364"" rel=""nofollow noreferrer"">android-ndk hello-libs</a> example.</p>

<p>In <code>CMakeLists.txt</code>, I add:</p>

<pre><code># this is from the hello-libs sample code
add_library(lib_gperf SHARED IMPORTED)
set_target_properties(lib_gperf PROPERTIES IMPORTED_LOCATION
        ${distribution_DIR}/gperf/lib/${ANDROID_ABI}/libgperf.so)

########## I add this after the sample code:  ###########
add_library(lib_py SHARED IMPORTED)
set_target_properties(lib_py PROPERTIES IMPORTED_LOCATION
        ${distribution_DIR}/gperf/lib/${ANDROID_ABI}/libpython.so)
</code></pre>

<p>And this:</p>

<pre><code>target_link_libraries(
        hello-libs
        android
        lib_gperf

        #### this line ######
        lib_py

        log)
</code></pre>

<p>And copy <code>libpython.so</code> in the directory where <code>libgperf.so</code> located:</p>

<p><a href=""https://i.stack.imgur.com/sNxim.png"" rel=""nofollow noreferrer""><img src=""https://i.stack.imgur.com/sNxim.png"" alt=""""></a></p>

<p>Also copy the python headers into the include directory:</p>

<p><a href=""https://i.stack.imgur.com/bEa0h.png"" rel=""nofollow noreferrer""><img src=""https://i.stack.imgur.com/bEa0h.png"" alt=""enter image description here""></a></p>

<p>When I click the run button:</p>

<pre><code>java.lang.UnsatisfiedLinkError: dlopen failed: library ""/Users/finn/Downloads/hello-libs/app/src/main/cpp/../../../../distribution/gperf/lib/arm64-v8a/libpython.so"" not found
        at java.lang.Runtime.loadLibrary0(Runtime.java:1016)
        at java.lang.System.loadLibrary(System.java:1657)
        at com.example.hellolibs.MainActivity.&lt;clinit&gt;(MainActivity.java:36)
        at java.lang.Class.newInstance(Native Method)
        at android.app.Instrumentation.newActivity(Instrumentation.java:1174)
        at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2747)
        at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2931)
        at android.app.ActivityThread.-wrap11(Unknown Source:0)
        at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1620)
        at android.os.Handler.dispatchMessage(Handler.java:105)
        at android.os.Looper.loop(Looper.java:173)
        at android.app.ActivityThread.main(ActivityThread.java:6698)
        at java.lang.reflect.Method.invoke(Native Method)
        at com.android.internal.os.Zygote$MethodAndArgsCaller.run(Zygote.java:240)
        at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:782)
</code></pre>

<p>The path exists in my computer, but why the apk use my computer path, but not the android device path?</p>

<p>And I use the Android device file explorer, the lib is in the directory:</p>

<p><a href=""https://i.stack.imgur.com/aqQqq.png"" rel=""nofollow noreferrer""><img src=""https://i.stack.imgur.com/aqQqq.png"" alt=""enter image description here""></a></p>

<p>Then how can I make the apk use the right path? </p>

<p>Or I miss something to add?</p>
",2322187,,8034839,,2019-03-11 5:02:17,2019-03-11 5:02:17,"java.lang.UnsatisfiedLinkError: dlopen failed: library ""/Users/..."" not found",<android><android-ndk><java-native-interface><shared-libraries>,1,0,,,
Android,55196032,1,,,,,,3/16/2019 11:03:18,,1,61,"<p>I am trying to use WorkManager to populate the Room Database while creating the database. I am using dagger to initialize the database and its Dao's.
While seeding the database, it gives the following error.</p>

<pre><code>Could not instantiate *.*.*.SeedDatabaseWorker
    java.lang.NoSuchMethodException: &lt;init&gt; [class android.content.Context, class androidx.work.WorkerParameters]
        at java.lang.Class.getConstructor0(Class.java:2204)
        at java.lang.Class.getDeclaredConstructor(Class.java:2050)
        at androidx.work.WorkerFactory.createWorkerWithDefaultFallback(WorkerFactory.java:91)
        at androidx.work.impl.WorkerWrapper.runWorker(WorkerWrapper.java:233)
        at androidx.work.impl.WorkerWrapper.run(WorkerWrapper.java:127)
        at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1133)
        at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:607)
        at java.lang.Thread.run(Thread.java:761)
2019-03-16 16:22:29.135 18035-18051/*.* E/WM-WorkerWrapper: Could not create Worker *.*.*.SeedDatabaseWorker
</code></pre>

<p>Here's how i have setup the application.</p>

<p><strong>AppModule.Kt</strong></p>

<pre><code>@Provides
@Singleton
fun provideAppDatabase(context: Context): AppDatabase {
    return Room.databaseBuilder(
        context,
        AppDatabase::class.java,
        ""garden.db""
    )
        .addCallback(object : RoomDatabase.Callback() {
            override fun onCreate(db: SupportSQLiteDatabase) {
                super.onCreate(db)
                val request = OneTimeWorkRequestBuilder&lt;SeedDatabaseWorker&gt;().build()
                WorkManager.getInstance().enqueue(request)
            }
        })
        .build()
}

@Provides
@Singleton
fun providePlantDao(db: AppDatabase): PlantDao =
    db.plantDao()
</code></pre>

<p><strong>PlantDao</strong></p>

<pre><code>@Dao
interface PlantDao {
    @Query(""SELECT * FROM plants ORDER BY name"")
    fun getPlants(): LiveData&lt;List&lt;Plant&gt;&gt;
    @Insert(onConflict = OnConflictStrategy.REPLACE)
    fun insertAll(plants: List&lt;Plant&gt;)
}
</code></pre>

<p><strong>AppDatabase.kt</strong></p>

<pre><code>@Database(
        entities = [
            Plant::class
        ],
        version = 1,
        exportSchema = false
)
abstract class AppDatabase : RoomDatabase() {

    abstract fun plantDao(): PlantDao
}
</code></pre>

<p><strong>SeedDatabaseWorker.kt</strong></p>

<pre><code>class SeedDatabaseWorker @Inject constructor(
        context: Context,
        workerParameters: WorkerParameters
): CoroutineWorker(context, workerParameters) {


    private val TAG by lazy { SeedDatabaseWorker::class.java.simpleName }
    @Inject
    lateinit var database: AppDatabase
    override val coroutineContext = Dispatchers.IO

    override suspend fun doWork(): Result = coroutineScope {

        try {
            applicationContext.assets.open(""plants.json"").use { inputStream -&gt;
                JsonReader(inputStream.reader()).use { jsonReader -&gt;
                    val plantType = object : TypeToken&lt;List&lt;Plant&gt;&gt;() {}.type
                    val plantList: List&lt;Plant&gt; = Gson().fromJson(jsonReader, plantType)

                    database.plantDao().insertAll(plantList)

                    Result.success()
                }
            }
        } catch (ex: Exception) {
            Log.e(TAG, ""Error seeding database"", ex)
            Result.failure()
        }
    }
}
</code></pre>

<p>Can anyone help me to populate database using WorkManager?
Note: I am trying this <a href=""https://github.com/googlesamples/android-sunflower"" rel=""nofollow noreferrer"">google sample</a></p>
",6824931,,,,,2019-03-20 15:48:02,Pre-Populate Room Database using WorkManager and Dagger,<android><android-room><dagger><android-workmanager>,1,2,,,
Android,55301892,1,,,,,,3/22/2019 14:31:56,,1,114,"<p>I have been trying to implement <a href=""https://developers.google.com/identity/sms-retriever/verify"" rel=""nofollow noreferrer"">SMS Retriever API</a> to collect incoming sms from the server on the phone, apparently <code>onReceive()</code> on the broadcast listener is never called when sms is received on the phone.</p>

<p><strong>Client implementation</strong> is mentioned as below. </p>

<pre><code>    private fun startSMSListener() {
    Log.d(TAG, ""startSMSListener():"")

    val client = SmsRetriever.getClient(this)
    val retriever = client.startSmsRetriever()
    retriever.addOnSuccessListener {

        Toast.makeText(this@MainActivity,""Listener started"", Toast.LENGTH_SHORT).show()

        val otpListener = object : SMSBroadcastReceiver.OTPListener {
            override fun onOTPReceived(otp: String) {
                Log.d(TAG, ""onOTPReceived(): $otp"")
                tv_hash_code.text = otp
                Toast.makeText(this@MainActivity, otp , Toast.LENGTH_LONG).show()
            }

            override fun onOTPTimeOut() {
                Log.d(TAG, ""onOTPTimeOut():"")
                Toast.makeText(this@MainActivity,""TimeOut"", Toast.LENGTH_SHORT).show()
            }
        }
        //smsBroadcastReceiver this is already initialized 
        smsBroadcastReceiver.injectOTPListener(otpListener)
        registerReceiver(smsBroadcastReceiver,
            IntentFilter(SmsRetriever.SMS_RETRIEVED_ACTION))
    }
    retriever.addOnFailureListener {
        Toast.makeText(this@MainActivity,""Problem to start listener"", Toast.LENGTH_SHORT).show()
    }
}
</code></pre>

<p>Broadcast receiver is </p>

<pre><code>class SMSBroadcastReceiver : BroadcastReceiver() {


private var otpReceiver: OTPListener? = null

fun injectOTPListener(receiver: OTPListener?) {
    Log.d(TAG, ""injectOTPListener is empty : ${receiver == null}"")
    this.otpReceiver = receiver
}

override fun onReceive(context: Context, intent: Intent) {
    Log.d(TAG, intent.action)
    if (SmsRetriever.SMS_RETRIEVED_ACTION == intent.action) {
        val extras = intent.extras
        val status = extras.get(SmsRetriever.EXTRA_STATUS) as Status

        when (status.statusCode) {

            CommonStatusCodes.SUCCESS -&gt; {
                Log.d(TAG, ""CommonStatusCodes.SUCCESS"")
                Toast.makeText(context, ""CommonStatusCodes.SUCCESS"", Toast.LENGTH_LONG).show()

                val message = extras.get(SmsRetriever.EXTRA_SMS_MESSAGE) as String

                val pattern = Pattern.compile(""\\d{6}"")
                val matcher = pattern.matcher(message)

                if (matcher.find()) {
                    otpReceiver?.onOTPReceived(matcher.group(0))
                    return
                }
            }
            CommonStatusCodes.TIMEOUT -&gt; {
                Log.d(TAG, ""CommonStatusCodes.TIMEOUT"")
                Toast.makeText(context, ""CommonStatusCodes.TIMEOUT"", Toast.LENGTH_LONG).show()
                otpReceiver?.onOTPTimeOut()
            }
        }
    }
}

interface OTPListener {


    fun onOTPReceived(otp: String)

    fun onOTPTimeOut()
}
}
</code></pre>

<p><strong>Server Implementation</strong> </p>

<p>This is what I have for the message </p>

<pre><code>&lt;#&gt; Your SmsVerificationCOde code is: 123456
wPMABADKiiS
</code></pre>

<p>This Hash-Code generated using debug key, I tried three different methods to generate the hash-code which all provide the same value.</p>

<ol>
<li><p>Keytool</p>

<p>keytool -exportcert -alias androiddebugkey -keystore  ~/.android/debug.keystore -storepass android -keypass android | xxd -p | tr -d ""[:space:]"" | echo -n com.example.smsverificationcode <code>cat</code> | sha256sum | tr -d ""[:space:]-"" | xxd -r -p | base64 | cut -c1-11</p></li>
<li><p><a href=""https://github.com/googlesamples/android-credentials/blob/master/sms-verification/bin/sms_retriever_hash_v9.sh"" rel=""nofollow noreferrer"">Script</a></p>

<p>./sms_retriever_hash_v9.sh --package ""com.example.smsverificationcode"" --keystore ~/.android/debug.keystore</p></li>
<li><p><a href=""https://github.com/googlesamples/android-credentials/blob/master/sms-verification/android/app/src/main/java/com/google/samples/smartlock/sms_verify/AppSignatureHelper.java"" rel=""nofollow noreferrer"">AppSignatureHelper</a></p></li>
</ol>

<p>all of them seem to provide the same hash-code which makes me believe that hash-code is alright ( I tried this for release type any way, all method provide me with another ""value"" which is same for all method of evaluation )</p>

<p>Reference:
<a href=""https://developers.google.com/identity/sms-retriever/verify"" rel=""nofollow noreferrer"">https://developers.google.com/identity/sms-retriever/verify</a>
<a href=""https://medium.com/@wilderpereira/secure-android-otp-account-verification-with-the-sms-retriever-api-c395c1985fbf"" rel=""nofollow noreferrer"">https://medium.com/@wilderpereira/secure-android-otp-account-verification-with-the-sms-retriever-api-c395c1985fbf</a></p>

<p>I am positive the client implementation is correct as I get the TimeOut error after 5 minutes, but never actually get anything at time of sms arrival.</p>

<p>I believe that Android system is not able to figure out the my application based of the hash-code or the format of my message could be wrong.</p>

<p>Kindly have a look and correct me where I could be wrong. any help is highly regarded.</p>
",11209303,,11209303,,2019-03-22 15:41:06,2019-03-22 16:28:46,SMS Retriever API android system unable to send message to the Broadcast Receiver,<android><kotlin><sms>,1,2,1,,
Android,55520315,1,,,,,,4/4/2019 15:55:19,,3,72,"<p>I'm using the new <code>LocationSettingsRequest</code> system to request high accuracy locations. If my device is set to power saving mode for example, would prompt a system dialog to update the location accuracy. This works in most cases but in some devices the following happens:</p>

<ol>
<li>If the device is set to power saving mode, the system dialog asks for gps permission and changes to gps only if confirmed.</li>
<li>If the device is set to gps only, the system asks for wifi and google services to improve location and changes to power saving mode location if confirmed.</li>
</ol>

<p>Here is how I set the <code>LocationSettingsRequest</code>:</p>

<pre><code>val builder = LocationSettingsRequest.Builder()
    .addLocationRequest(createLocationRequest(LocationRequest.PRIORITY_BALANCED_POWER_ACCURACY))
    .addLocationRequest(createLocationRequest(LocationRequest.PRIORITY_HIGH_ACCURACY))
    .setAlwaysShow(true)

settingsClient.checkLocationSettings(builder.build())
</code></pre>

<p>This triggers the Google Play Services system dialog to update the location accuracy settings. But for example on a Samsung Galaxy S6 running Android 7.0, the location is never updated to high accuracy.</p>

<p>The same happens when I try the Google Location example available <a href=""https://github.com/googlesamples/android-play-location"" rel=""nofollow noreferrer"">here</a>. In the <code>locationupdates</code> folder, check the <code>startLocationUpdates()</code> method where the settings resolution is called:</p>

<pre><code>private void startLocationUpdates() {
    // Begin by checking if the device has the necessary location settings.
    mSettingsClient.checkLocationSettings(mLocationSettingsRequest)
            .addOnSuccessListener(this, new OnSuccessListener&lt;LocationSettingsResponse&gt;() {
                @Override
                public void onSuccess(LocationSettingsResponse locationSettingsResponse) {
                    Log.i(TAG, ""All location settings are satisfied."");

                    //noinspection MissingPermission
                    mFusedLocationClient.requestLocationUpdates(mLocationRequest,
                            mLocationCallback, Looper.myLooper());

                    updateUI();
                }
            })
            .addOnFailureListener(this, new OnFailureListener() {
                @Override
                public void onFailure(@NonNull Exception e) {
                    int statusCode = ((ApiException) e).getStatusCode();
                    switch (statusCode) {
                        case LocationSettingsStatusCodes.RESOLUTION_REQUIRED:
                            Log.i(TAG, ""Location settings are not satisfied. Attempting to upgrade "" +
                                    ""location settings "");
                            try {
                                // Show the dialog by calling startResolutionForResult(), and check the
                                // result in onActivityResult().
                                ResolvableApiException rae = (ResolvableApiException) e;
                                rae.startResolutionForResult(MainActivity.this, REQUEST_CHECK_SETTINGS);
                            } catch (IntentSender.SendIntentException sie) {
                                Log.i(TAG, ""PendingIntent unable to execute request."");
                            }
                            break;
                        case LocationSettingsStatusCodes.SETTINGS_CHANGE_UNAVAILABLE:
                            String errorMessage = ""Location settings are inadequate, and cannot be "" +
                                    ""fixed here. Fix in Settings."";
                            Log.e(TAG, errorMessage);
                            Toast.makeText(MainActivity.this, errorMessage, Toast.LENGTH_LONG).show();
                            mRequestingLocationUpdates = false;
                    }

                    updateUI();
                }
            });
}
</code></pre>

<p>Running this sample app on this Samsung device causes the same problem. The <code>onActivityResult()</code> is called for the <code>Activity.RESULT_CANCELED</code> case.</p>

<p>Has anyone been through something similar? Any ideas on how to address the problem?</p>
",11312661,,,,,2019-04-15 10:39:58,Requesting high precision location with LocationSettingsRequest not updating location settings,<android><google-play-services><android-location>,1,5,2,,
Android,55764251,1,,,,,,4/19/2019 15:33:54,,1,25,"<p>Trying to solve this problem about 4 days, help, please. 
I'm creating an app with rest API (retrofit), try to implement LiveDataCallAdapter from  Google samples
<a href=""https://github.com/googlesamples/android-architecture-components/tree/master/GithubBrowserSample"" rel=""nofollow noreferrer"">https://github.com/googlesamples/android-architecture-components/tree/master/GithubBrowserSample</a>, but retrofit doesn't call adapter method adapt for getting a response from the server. 
I'm edited only NetworkBoundResourse (for working without DB)
Trying to put breakpoints, after I start repo (login), LiveDataCallAdapter fun adapt (where  call.enequeue don't want start) debugging don't call</p>

<p>Here is my piece of code, thx</p>

<p>Providing my service instance</p>

<pre><code>@Singleton
   @Provides
   fun provideRetrofit(): BrizSmartTVService {
       return Retrofit.Builder()
           .baseUrl(baseUrl)
           .addConverterFactory(GsonConverterFactory.create())
           .addCallAdapterFactory(LiveDataCallAdapterFactory())
           .build()
           .create(BrizSmartTVService::class.java)
   }
</code></pre>

<p>There is my LiveDataCallAdapterFactory and LiveDataCallAdapter</p>

<pre><code>class LiveDataCallAdapterFactory : Factory() {
    override fun get(
        returnType: Type,
        annotations: Array&lt;Annotation&gt;,
        retrofit: Retrofit
    ): CallAdapter&lt;*, *&gt;? {
        if (getRawType(returnType) != LiveData::class.java) {
            return null
        }
        val observableType = getParameterUpperBound(0, returnType as ParameterizedType)
        val rawObservableType = getRawType(observableType)
        if (rawObservableType != ApiResponse::class.java) {
            throw IllegalArgumentException(""type must be a resource"")
        }
        if (observableType !is ParameterizedType) {
            throw IllegalArgumentException(""resource must be parameterized"")
        }
        val bodyType = getParameterUpperBound(0, observableType)
        return LiveDataCallAdapter&lt;Any&gt;(bodyType)
    }
}
</code></pre>

<pre><code>
class LiveDataCallAdapter&lt;R&gt;(private val responseType: Type) :
    CallAdapter&lt;R, LiveData&lt;ApiResponse&lt;R&gt;&gt;&gt; {

    override fun responseType() = responseType

    override fun adapt(call: Call&lt;R&gt;): LiveData&lt;ApiResponse&lt;R&gt;&gt; {
        return object : LiveData&lt;ApiResponse&lt;R&gt;&gt;() {
            private var started = AtomicBoolean(false)
            override fun onActive() {
                super.onActive()
                if (started.compareAndSet(false, true)) {
                    Log.d(""TAG"", "": onActive Started "");
                    call.enqueue(object : Callback&lt;R&gt; {
                        override fun onResponse(call: Call&lt;R&gt;, response: Response&lt;R&gt;) {
                            Log.d(""TAG"", "":    $response"");
                            postValue(ApiResponse.create(response))
                        }

                        override fun onFailure(call: Call&lt;R&gt;, throwable: Throwable) {
                            Log.d(""TAG"", "":    ${throwable.localizedMessage}"");
                            postValue(ApiResponse.create(throwable))
                        }
                    })
                }
            }
        }
    }
}
</code></pre>

<p>There is my NetworkBoundResourse (work only with Network)</p>

<pre><code>
abstract class NetworkBoundResource&lt;RequestType&gt; {

    private val result = MediatorLiveData&lt;Resource&lt;RequestType&gt;&gt;()

    init {
        setValue(Resource.loading(null))
        fetchFromNetwork()
    }

    @MainThread
    private fun setValue(newValue: Resource&lt;RequestType&gt;) {
        if (result.value != newValue) {
            result.value = newValue
        }
    }

    private fun fetchFromNetwork() {
        val apiResponse = createCall()
        result.addSource(apiResponse) { response -&gt;
            result.removeSource(apiResponse)

            when (response) {
                is ApiSuccessResponse -&gt; {
                    setValue(Resource.success(processResponse(response)))
                }

                is ApiErrorResponse -&gt; {
                    onFetchFailed()
                    setValue(Resource.error(response.errorMessage, null))

                }
            }
        }
    }

    protected fun onFetchFailed() {
    }

    fun asLiveData() = result as LiveData&lt;Resource&lt;RequestType&gt;&gt;

    @WorkerThread
    protected open fun processResponse(response: ApiSuccessResponse&lt;RequestType&gt;) = response.body

    @MainThread
    protected abstract fun createCall(): LiveData&lt;ApiResponse&lt;RequestType&gt;&gt;
}
</code></pre>

<p>My Repo class </p>

<pre><code>
@Singleton
class AuthApiRepo @Inject constructor(
    val apiService: BrizSmartTVService
) {

    fun authLoginPass(login: String, password: String): LiveData&lt;Resource&lt;AuthResponse&gt;&gt; {
        return object : NetworkBoundResource&lt;AuthResponse&gt;() {

            override fun createCall(): LiveData&lt;ApiResponse&lt;AuthResponse&gt;&gt; {
                val authLogPassBody = AuthLogPassBody(login,password,""password"")
                Log.d(""TAG"", "":   $authLogPassBody"");
                return apiService.authLoginPass(authLogPassBody)
            }

        }.asLiveData()
    }
}
</code></pre>

<p>And my AuthResponse Class </p>

<pre><code>
class AuthResponse {
    @SerializedName(""token_type"")
    var tokenType: String? = null
    @SerializedName(""access_token"")
    var accessToken: String? = null
    @SerializedName(""refresh_token"")
    var refreshToken: String? = null
    @SerializedName(""user_id"")
    var userId: String? = null
    @SerializedName(""expires_in"")
    var expiresIn: Long = 0
    @SerializedName(""portal_url"")
    var portalUrl: String? = null
}
</code></pre>

<p>My ViewModel class from where i start calling </p>

<pre><code>
class AuthViewModel @Inject constructor(private val authApiRepo: AuthApiRepo) : ViewModel() {

    private var _isSigned = MutableLiveData&lt;Boolean&gt;()
    val isSigned: LiveData&lt;Boolean&gt;
        get() = _isSigned


    fun signIn(login: String, password: String) {
        authApiRepo.authLoginPass(login, password)
        val authRespons =  authApiRepo.authLoginPass(login, password)
        Log.d(""TAG"", "":   "" +   authRespons.value.toString());
        //here will by always data null and status LOADING
    }

    override fun onCleared() {
        super.onCleared()
    }
}
</code></pre>
",8501795,,11181035,,2019-04-19 17:45:12,2019-04-20 18:29:04,Retrofit LiveDataCallAdapter doesn't call function adapt (call),<android><kotlin><retrofit><android-livedata>,1,2,,,
Spring,38698426,1,38723291,23,8/2/2016 14:30:38,1,,8/1/2016 12:05:31,,4,911,"<p>I found the same problem and solution <a href=""https://stackoverflow.com/questions/33694905/spring-security-with-angularjs-404-on-logout"">here</a>. But those solution have not helped me. The example you can get <a href=""https://github.com/spring-guides/tut-spring-security-and-angular-js/tree/master/single"" rel=""nofollow noreferrer"">here</a>. As you can see example contains good description for logout in client <em>angular part</em>. But it does not provide logout processing on server part. So I checked <a href=""https://stackoverflow.com/questions/33694905/spring-security-with-angularjs-404-on-logout""><em><strong>LogoutSuccessHandler</strong></em></a> </p>

<pre><code>authentication.isAuthenticated() == true
</code></pre>

<p>I tried use some experiments, but logout does not work. Tried:</p>

<pre><code>((UsernamePasswordAuthenticationToken) authentication).eraseCredentials();
</code></pre>

<p>or</p>

<pre><code>authentication.setAuthenticated(false);
</code></pre>

<p>and <em>.deleteCookies(""JSESSIONID"", <strong>""XSRF-TOKEN""</strong>)</em></p>

<pre><code>        http.httpBasic().and().authorizeRequests()
                .antMatchers(""/index.html"", ""/home.html"", ""/login.html"", ""/"").permitAll().anyRequest()
                .authenticated().and().csrf()
                .csrfTokenRepository(csrfTokenRepository()).and()
                .addFilterAfter(csrfHeaderFilter(), CsrfFilter.class);
        http.authorizeRequests().anyRequest().authenticated()
                .and().logout().logoutSuccessHandler(logoutSuccess).deleteCookies(""JSESSIONID"", ""XSRF-TOKEN"")
                .invalidateHttpSession(true).permitAll();
</code></pre>

<p>result was same. I hope someone can help me with the issue. Thanks.</p>
",5728095,,-1,,2017-05-23 12:14:54,2016-08-02 18:41:55,Spring security with AngularJS - logout does not work,<java><angularjs><google-chrome><spring-security><logout>,1,3,,,
Spring,49942640,1,50349078,61,5/15/2018 11:29:42,25,,4/20/2018 13:20:46,,29,2165,"<p>According the tutorial <a href=""https://spring.io/guides/tutorials/spring-boot-oauth2/#_social_login_authserver"" rel=""noreferrer"">Spring Boot and OAuth2</a></p>

<p>I have following project structure:</p>

<p><a href=""https://i.stack.imgur.com/O0A5t.jpg"" rel=""noreferrer""><img src=""https://i.stack.imgur.com/O0A5t.jpg"" alt=""enter image description here""></a></p>

<p>And following source code:</p>

<p><strong>SocialApplication.class:</strong>  </p>

<pre><code>@SpringBootApplication
@RestController
@EnableOAuth2Client
@EnableAuthorizationServer
@Order(200)
public class SocialApplication extends WebSecurityConfigurerAdapter {

    @Autowired
    OAuth2ClientContext oauth2ClientContext;

    @RequestMapping({ ""/user"", ""/me"" })
    public Map&lt;String, String&gt; user(Principal principal) {
        Map&lt;String, String&gt; map = new LinkedHashMap&lt;&gt;();
        map.put(""name"", principal.getName());
        return map;
    }

    @Override
    protected void configure(HttpSecurity http) throws Exception {
        // @formatter:off
        http.antMatcher(""/**"").authorizeRequests().antMatchers(""/"", ""/login**"", ""/webjars/**"").permitAll().anyRequest()
                .authenticated().and().exceptionHandling()
                .authenticationEntryPoint(new LoginUrlAuthenticationEntryPoint(""/"")).and().logout()
                .logoutSuccessUrl(""/"").permitAll().and().csrf()
                .csrfTokenRepository(CookieCsrfTokenRepository.withHttpOnlyFalse()).and()
                .addFilterBefore(ssoFilter(), BasicAuthenticationFilter.class);
        // @formatter:on
    }

    @Configuration
    @EnableResourceServer
    protected static class ResourceServerConfiguration extends ResourceServerConfigurerAdapter {
        @Override
        public void configure(HttpSecurity http) throws Exception {
            // @formatter:off
            http.antMatcher(""/me"").authorizeRequests().anyRequest().authenticated();
            // @formatter:on
        }
    }

    public static void main(String[] args) {
        SpringApplication.run(SocialApplication.class, args);
    }

    @Bean
    public FilterRegistrationBean&lt;OAuth2ClientContextFilter&gt; oauth2ClientFilterRegistration(OAuth2ClientContextFilter filter) {
        FilterRegistrationBean&lt;OAuth2ClientContextFilter&gt; registration = new FilterRegistrationBean&lt;OAuth2ClientContextFilter&gt;();
        registration.setFilter(filter);
        registration.setOrder(-100);
        return registration;
    }

    @Bean
    @ConfigurationProperties(""github"")
    public ClientResources github() {
        return new ClientResources();
    }

    @Bean
    @ConfigurationProperties(""facebook"")
    public ClientResources facebook() {
        return new ClientResources();
    }

    private Filter ssoFilter() {
        CompositeFilter filter = new CompositeFilter();
        List&lt;Filter&gt; filters = new ArrayList&lt;&gt;();
        filters.add(ssoFilter(facebook(), ""/login/facebook""));
        filters.add(ssoFilter(github(), ""/login/github""));
        filter.setFilters(filters);
        return filter;
    }

    private Filter ssoFilter(ClientResources client, String path) {
        OAuth2ClientAuthenticationProcessingFilter filter = new OAuth2ClientAuthenticationProcessingFilter(
                path);
        OAuth2RestTemplate template = new OAuth2RestTemplate(client.getClient(), oauth2ClientContext);
        filter.setRestTemplate(template);
        UserInfoTokenServices tokenServices = new UserInfoTokenServices(
                client.getResource().getUserInfoUri(),
                client.getClient().getClientId());
        tokenServices.setRestTemplate(template);
        filter.setTokenServices(new UserInfoTokenServices(
                client.getResource().getUserInfoUri(),
                client.getClient().getClientId()));
        return filter;
    }

}

class ClientResources {

    @NestedConfigurationProperty
    private AuthorizationCodeResourceDetails client = new AuthorizationCodeResourceDetails();

    @NestedConfigurationProperty
    private ResourceServerProperties resource = new ResourceServerProperties();

    public AuthorizationCodeResourceDetails getClient() {
        return client;
    }

    public ResourceServerProperties getResource() {
        return resource;
    }
}
</code></pre>

<p><strong>index.html:</strong></p>

<pre><code>&lt;!doctype html&gt;
&lt;html lang=""en""&gt;
&lt;head&gt;
    &lt;meta charset=""utf-8""/&gt;
    &lt;meta http-equiv=""X-UA-Compatible"" content=""IE=edge""/&gt;
    &lt;title&gt;Demo&lt;/title&gt;
    &lt;meta name=""description"" content=""""/&gt;
    &lt;meta name=""viewport"" content=""width=device-width""/&gt;
    &lt;base href=""/""/&gt;
    &lt;link rel=""stylesheet"" type=""text/css""
          href=""/webjars/bootstrap/css/bootstrap.min.css""/&gt;
    &lt;script type=""text/javascript"" src=""/webjars/jquery/jquery.min.js""&gt;&lt;/script&gt;
    &lt;script type=""text/javascript""
            src=""/webjars/bootstrap/js/bootstrap.min.js""&gt;&lt;/script&gt;
&lt;/head&gt;
&lt;body&gt;
&lt;h1&gt;Login&lt;/h1&gt;
&lt;div class=""container unauthenticated""&gt;
    With Facebook: &lt;a href=""/login/facebook""&gt;click here&lt;/a&gt;
&lt;/div&gt;
&lt;div class=""container authenticated"" style=""display: none""&gt;
    Logged in as: &lt;span id=""user""&gt;&lt;/span&gt;
    &lt;div&gt;
        &lt;button onClick=""logout()"" class=""btn btn-primary""&gt;Logout&lt;/button&gt;
    &lt;/div&gt;
&lt;/div&gt;
&lt;script type=""text/javascript""
        src=""/webjars/js-cookie/js.cookie.js""&gt;&lt;/script&gt;
&lt;script type=""text/javascript""&gt;
    $.ajaxSetup({
        beforeSend: function (xhr, settings) {
            if (settings.type == 'POST' || settings.type == 'PUT'
                || settings.type == 'DELETE') {
                if (!(/^http:.*/.test(settings.url) || /^https:.*/
                        .test(settings.url))) {
                    // Only send the token to relative URLs i.e. locally.
                    xhr.setRequestHeader(""X-XSRF-TOKEN"",
                        Cookies.get('XSRF-TOKEN'));
                }
            }
        }
    });
    $.get(""/user"", function (data) {
        $(""#user"").html(data.userAuthentication.details.name);
        $("".unauthenticated"").hide();
        $("".authenticated"").show();
    });
    var logout = function () {
        $.post(""/logout"", function () {
            $(""#user"").html('');
            $("".unauthenticated"").show();
            $("".authenticated"").hide();
        });
        return true;
    }
&lt;/script&gt;
&lt;/body&gt;
&lt;/html&gt;
</code></pre>

<p><strong>application.yml:</strong></p>

<pre><code>server:
  port: 8080
security:
  oauth2:
    client:
      client-id: acme
      client-secret: acmesecret
      scope: read,write
      auto-approve-scopes: '.*'

facebook:
  client:
    clientId: 233668646673605
    clientSecret: 33b17e044ee6a4fa383f46ec6e28ea1d
    accessTokenUri: https://graph.facebook.com/oauth/access_token
    userAuthorizationUri: https://www.facebook.com/dialog/oauth
    tokenName: oauth_token
    authenticationScheme: query
    clientAuthenticationScheme: form
  resource:
    userInfoUri: https://graph.facebook.com/me
github:
  client:
    clientId: bd1c0a783ccdd1c9b9e4
    clientSecret: 1a9030fbca47a5b2c28e92f19050bb77824b5ad1
    accessTokenUri: https://github.com/login/oauth/access_token
    userAuthorizationUri: https://github.com/login/oauth/authorize
    clientAuthenticationScheme: form
  resource:
    userInfoUri: https://api.github.com/user

logging:
  level:
    org.springframework.security: DEBUG
</code></pre>

<p>But when I open browser and try to hit <code>http://localhost:8080</code></p>

<p>In browser console I see:</p>

<pre><code>(index):44 Uncaught TypeError: Cannot read property 'details' of undefined
    at Object.success ((index):44)
    at j (jquery.js:3073)
    at Object.fireWith [as resolveWith] (jquery.js:3185)
    at x (jquery.js:8251)
    at XMLHttpRequest.&lt;anonymous&gt; (jquery.js:8598)
</code></pre>

<p>in code:</p>

<pre><code>$.get(""/user"", function (data) {
        $(""#user"").html(data.userAuthentication.details.name);
        $("".unauthenticated"").hide();
        $("".authenticated"").show();
    });
</code></pre>

<p>It happens because <code>/user</code> response with 302 status code and js callback try to parse result of <code>localhost:8080</code>:</p>

<p><a href=""https://i.stack.imgur.com/LFbfu.jpg"" rel=""noreferrer""><img src=""https://i.stack.imgur.com/LFbfu.jpg"" alt=""enter image description here""></a></p>

<p>I don't understand why this redirect happens. Can you explain this behavior and help to fix it?</p>

<h2>UPDATE</h2>

<p>I took this code from <a href=""https://github.com/spring-guides/tut-spring-boot-oauth2"" rel=""noreferrer"">https://github.com/spring-guides/tut-spring-boot-oauth2</a></p>

<h2>important:</h2>

<p>It reproduces <strong>only after I start client application.</strong></p>

<h2>P.S.</h2>

<p><strong>How to reproduce:</strong></p>

<blockquote>
  <p>To test the new features you can just run both apps and visit
  localhost:9999/client in your browser. The client app will redirect to
  the local Authorization Server, which then gives the user the usual
  choice of authentication with Facebook or Github. Once that is
  complete control returns to the test client, the local access token is
  granted and authentication is complete (you should see a ""Hello""
  message in your browser). If you are already authenticated with Github
  or Facebook you may not even notice the remote authentication</p>
</blockquote>

<h2>ANSWER:</h2>

<p><a href=""https://stackoverflow.com/a/50349078/2674303"">https://stackoverflow.com/a/50349078/2674303</a></p>
",2674303,,2674303,,2018-12-10 12:06:44,2018-12-10 12:06:44,Official Spring security oauth2 example doesn't work because of cookies clashing(authorization code mechanism),<java><spring-security><oauth-2.0><spring-oauth2>,3,5,2,,
Spring,18888714,1,18889923,67,9/19/2013 8:38:42,0,,9/19/2013 7:32:46,,1,1579,"<p>I try to run a basic Spring MVC application, like the one <a href=""https://github.com/geowarin/spring-mvc-examples/tree/master/mvc-base"" rel=""nofollow"">here</a> (or also the Spring MVC tutorial <a href=""https://github.com/spring-guides/tut-web/tree/master/4/complete"" rel=""nofollow"">here</a>).</p>

<p>I just open the project in IntelliJ, import it on a Tomcat 7 instance, and start the Tomcat server. But when I try to reach the <code>http://localhost:8080</code>, I get a 404 error.</p>

<p>The project I downloaded from GitHub provides 2 ways to start the application, with <code>mvn jetty:run</code> or <code>mvn tomcat7:run</code>. When I run any of these commands (outside IntelliJ), the application starts succesfully, and the web page is displayed correctly on the <code>http://localthost:8080</code> URL, which led me think that the problem comes from IntelliJ.</p>

<p>Adding some debug information, it appears that when run under IntelliJ, the <code>WebInitializer</code> class is loaded, but not the <code>WebConfig</code> class, even if the method <code>WebInitializer.getServletConfigClasses()</code> is called.</p>

<p>With <code>mvn jetty:run</code> or <code>mvn tomcat7:run</code>, both classes are correctly instantiated.</p>

<p>Unfortunately, I have no error at all in any logs provided by Tomcat / IntelliJ, so I'm a bit lost.</p>

<p>What I am doing wrong, or what I've missed in the configuration of my project in IntelliJ?</p>

<p>Thanks</p>

<p>Technical info: Java 7, Tomcat 7, IntelliJ Ultimate 12.1.4, Spring 3.2.2.RELEASE</p>
",26457,,,,,2013-09-19 8:38:42,Spring MVC application deployed on Tomcat does not run on IntelliJ,<java><spring-mvc><intellij-idea><tomcat7>,1,0,,,
Spring,19482372,1,19527771,68,10/22/2013 20:33:40,2,,10/20/2013 20:18:23,,1,4863,"<p>The test method below appear in a <a href=""https://github.com/spring-guides/tut-web/blob/master/5/complete/src/test/java/com/yummynoodlebar/web/controller/CheckoutIntegrationTest.java"" rel=""nofollow"">spring-guide tutorial</a>.
Is there a less convoluted syntax to write this test or how can I break it apart into smaller chunks?</p>

<pre><code>verify(orderService).createOrder(
      org.mockito.Matchers.&lt;CreateOrderEvent&gt;argThat(
        allOf( org.hamcrest.Matchers.&lt;CreateOrderEvent&gt;
            hasProperty(""details"",
                hasProperty(""dateTimeOfSubmission"", notNullValue())),

        org.hamcrest.Matchers.&lt;CreateOrderEvent&gt;hasProperty(""details"",
                hasProperty(""name"", equalTo(CUSTOMER_NAME))),

        org.hamcrest.Matchers.&lt;CreateOrderEvent&gt;hasProperty(""details"",
                hasProperty(""address1"", equalTo(ADDRESS1))),
        org.hamcrest.Matchers.&lt;CreateOrderEvent&gt;hasProperty(""details"",
                hasProperty(""postcode"", equalTo(POST_CODE)))
    )));
</code></pre>
",617552,,,,,2013-10-22 20:33:40,How do I simplify mockito/hamcrest argument matchers in test method?,<java><spring><unit-testing><mockito><hamcrest>,2,0,,,
Spring,20101448,1,20102983,69,11/20/2013 17:38:22,0,,11/20/2013 16:29:30,,1,2420,"<p>I am utterly confused by something I expected to work just out of the box. So either I am doing something totally wrong or this is just a misunderstanding.</p>

<p>I am trying to have a getter/setter annotation in a JPA Entity class. I sticked to an example I found on the JPA wiki (s. <a href=""http://en.wikibooks.org/wiki/Java_Persistence/Basic_Attributes#Conversion"" rel=""nofollow"">http://en.wikibooks.org/wiki/Java_Persistence/Basic_Attributes#Conversion</a>). The example looks as follows:</p>

<pre><code>    @Entity
    public class Employee {
        ...
        private boolean isActive;
        ...
        @Transient
        public boolean getIsActive() {
            return isActive;
        }
        public void setIsActive(boolean isActive) {
            this.isActive = isActive;
        }
        @Basic
        private String getIsActiveValue() {
            if (isActive) {
                return ""T"";
            } else {
                return ""F"";
            }
        }
        private void setIsActiveValue(String isActive) {
            this.isActive = ""T"".equals(isActive);
        }
    }
</code></pre>

<p>I took the clearest and cleanest spring-data-jpa example I could find: <a href=""http://spring.io/guides/gs/accessing-data-jpa/"" rel=""nofollow"">http://spring.io/guides/gs/accessing-data-jpa/</a>. </p>

<p>I checked it out from git and changed their example entity class (s. <a href=""https://github.com/spring-guides/gs-accessing-data-jpa/blob/master/complete/src/main/java/hello/Customer.java"" rel=""nofollow"">https://github.com/spring-guides/gs-accessing-data-jpa/blob/master/complete/src/main/java/hello/Customer.java</a>) to look as follows:</p>

<pre><code>@Entity
public class Customer {

    @Id
    @GeneratedValue(strategy=GenerationType.AUTO)
    private long id;
    private String firstName;
    private String lastName;

    protected Customer() {}

    public Customer(String firstName, String lastName) {
        this.firstName = firstName;
        this.lastName = lastName;
    }

    @Override
    public String toString() {
        return String.format(
                ""Customer[id=%d, firstName='%s', lastName='%s']"",
                id, firstName, lastName);
    }

    @Transient
    private boolean isActive;

    @Transient
    public boolean getIsActive() {
        return isActive;
    }
    public void setIsActive(boolean isActive) {
        this.isActive = isActive;
    }

    @Column
    private String getIsActiveValue() {
        if (isActive) {
            return ""T"";
        } else {
            return ""F"";
        }
    }
    private void setIsActiveValue(String isActive) {
        this.isActive = ""T"".equals(isActive);
    }

}
</code></pre>

<p>Now nothing changes. The respective String-Field does not get created. The line from the log creating the database table still looks as follows:</p>

<pre><code>17:11:10.540 [main] DEBUG o.h.tool.hbm2ddl.SchemaUpdate - create table Customer (id bigint generated by default as identity, firstName varchar(255), lastName varchar(255), primary key (id))
</code></pre>

<p>I have absolutely no idea on what could be the reason for this. I could find not documentation that spring-data-jpa would not allow for annotations on getters. </p>

<p>Any help would be very, very appreciated!</p>
",2678817,,,,,2013-11-20 23:34:11,@Column or @Basic JPA annotations ignored in spring-data-jpa schema creation,<java><spring><jpa><spring-data><spring-data-jpa>,2,0,,,
Spring,20168563,1,20187597,70,11/25/2013 8:16:19,2,,11/23/2013 22:15:02,,5,7231,"<p>I'm using spring-boot (I'm following <a href=""http://spring.io/guides/gs/rest-service/"" rel=""noreferrer"">this tutorial</a>), the current code is <a href=""https://github.com/spring-guides/gs-rest-service/tree/master/complete"" rel=""noreferrer"">here</a>.</p>

<p>My application is configured via <code>@EnableAutoConfiguration</code>, so I don't have <code>web.xml</code>, or other configuration files.
The application has a default handler for <code>/**</code>, files from <code>projectRoot/src/main/webapp/</code> are served, but unfortunately with <code>Content-Type: text/html;charset=ISO-8859-1</code>. I'd like to serve (<code>html</code> files) with <code>UTF-8</code> charset.</p>

<p>The static files are served by spring too, as far as I know: after launching the application, the following line apprears in the log: <code>Mapped URL path [/**] onto handler of type [class org.springframework.web.servlet.resource.ResourceHttpRequestHandler]</code> (github.com/spring-projects/spring-boot/blob/master/spring-boot-autoconfigure/src/main/java/org/springframework/boot/autoconfigure/web/WebMvcAutoConfiguration.java#L182, sorry, I cannot post more than 2 links)</p>

<p>Putting <code>&lt;meta charset=""utf-8"" /&gt;</code> or <code>&lt;meta http-equiv=""Content-Type: text/html;charset=utf-8"" /&gt;</code> into the served <code>html</code> file has no effect.</p>

<p>How can I serve <code>*.html</code> files with <code>UTF-8</code> charset?</p>

<p>The debug log is the following:</p>

<pre><code>  .   ____          _            __ _ _
 /\\ / ___'_ __ _ _(_)_ __  __ _ \ \ \ \
( ( )\___ | '_ | '_| | '_ \/ _` | \ \ \ \
 \\/  ___)| |_)| | | | | || (_| |  ) ) ) )
  '  |____| .__|_| |_|_| |_\__, | / / / /
 =========|_|==============|___/=/_/_/_/
 :: Spring Boot ::             (v0.5.0.M6)

2013-11-24 00:48:41.327  INFO 15786 --- [           main] hello.Application                        : Starting Application on ubuntu with PID 15786 (/home/lennon/bme/szoftarch/szoftarch-2013-osz/build/libs/gs-rest-service-0.1.0.jar started by lennon)
2013-11-24 00:48:41.331 DEBUG 15786 --- [           main] o.s.boot.SpringApplication               : Loading source class hello.Application
2013-11-24 00:48:41.380  INFO 15786 --- [           main] ationConfigEmbeddedWebApplicationContext : Refreshing org.springframework.boot.context.embedded.AnnotationConfigEmbeddedWebApplicationContext@7455ffcd: startup date [Sun Nov 24 00:48:41 CET 2013]; root of context hierarchy
2013-11-24 00:48:41.385 DEBUG 15786 --- [           main] ationConfigEmbeddedWebApplicationContext : Bean factory for org.springframework.boot.context.embedded.AnnotationConfigEmbeddedWebApplicationContext@7455ffcd: org.springframework.beans.factory.support.DefaultListableBeanFactory@54cb8484: defining beans [org.springframework.context.annotation.internalConfigurationAnnotationProcessor,org.springframework.context.annotation.internalAutowiredAnnotationProcessor,org.springframework.context.annotation.internalRequiredAnnotationProcessor,org.springframework.context.annotation.internalCommonAnnotationProcessor,application]; root of factory hierarchy
2013-11-24 00:48:42.179 DEBUG 15786 --- [           main] ationConfigEmbeddedWebApplicationContext : Using MessageSource [org.springframework.context.support.ResourceBundleMessageSource: basenames=[messages]]
2013-11-24 00:48:42.182 DEBUG 15786 --- [           main] ationConfigEmbeddedWebApplicationContext : Unable to locate ApplicationEventMulticaster with name 'applicationEventMulticaster': using default [org.springframework.context.event.SimpleApplicationEventMulticaster@5d36368]
2013-11-24 00:48:42.518 DEBUG 15786 --- [           main] .t.TomcatEmbeddedServletContainerFactory : Code archive: /home/lennon/bme/szoftarch/szoftarch-2013-osz/build/libs/gs-rest-service-0.1.0.jar
2013-11-24 00:48:42.518 DEBUG 15786 --- [           main] .t.TomcatEmbeddedServletContainerFactory : Code archive: /home/lennon/bme/szoftarch/szoftarch-2013-osz/build/libs/gs-rest-service-0.1.0.jar
2013-11-24 00:48:42.518 DEBUG 15786 --- [           main] .t.TomcatEmbeddedServletContainerFactory : Document root: /home/lennon/bme/szoftarch/szoftarch-2013-osz/src/main/webapp
2013-11-24 00:48:42.904  INFO 15786 --- [           main] o.apache.catalina.core.StandardService   : Starting service Tomcat
2013-11-24 00:48:42.905  INFO 15786 --- [           main] org.apache.catalina.core.StandardEngine  : Starting Servlet Engine: Apache Tomcat/7.0.42
2013-11-24 00:48:43.006  INFO 15786 --- [ost-startStop-1] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2013-11-24 00:48:43.007  INFO 15786 --- [ost-startStop-1] o.s.web.context.ContextLoader            : Root WebApplicationContext: initialization completed in 1630 ms
2013-11-24 00:48:43.259  INFO 15786 --- [ost-startStop-1] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring FrameworkServlet 'dispatcherServlet'
2013-11-24 00:48:43.260  INFO 15786 --- [ost-startStop-1] o.s.web.servlet.DispatcherServlet        : FrameworkServlet 'dispatcherServlet': initialization started
2013-11-24 00:48:43.428  INFO 15786 --- [ost-startStop-1] o.s.w.s.handler.SimpleUrlHandlerMapping  : Mapped URL path [/**/favicon.ico] onto handler of type [class org.springframework.web.servlet.resource.ResourceHttpRequestHandler]
2013-11-24 00:48:43.717  INFO 15786 --- [ost-startStop-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped ""{[/greeting],methods=[],params=[],headers=[],consumes=[],produces=[],custom=[]}"" onto public hello.Greeting hello.GreetingController.greeting(java.lang.String)
2013-11-24 00:48:43.725  INFO 15786 --- [ost-startStop-1] o.s.w.s.c.a.WebMvcConfigurerAdapter      : Adding welcome page: jndi:/localhost/index.html
2013-11-24 00:48:43.732  INFO 15786 --- [ost-startStop-1] o.s.w.s.handler.SimpleUrlHandlerMapping  : Root mapping to handler of type [class org.springframework.web.servlet.mvc.ParameterizableViewController]
2013-11-24 00:48:43.811  INFO 15786 --- [ost-startStop-1] o.s.w.s.handler.SimpleUrlHandlerMapping  : Mapped URL path [/**] onto handler of type [class org.springframework.web.servlet.resource.ResourceHttpRequestHandler]
2013-11-24 00:48:43.812  INFO 15786 --- [ost-startStop-1] o.s.w.s.handler.SimpleUrlHandlerMapping  : Mapped URL path [/webjars/**] onto handler of type [class org.springframework.web.servlet.resource.ResourceHttpRequestHandler]
2013-11-24 00:48:44.489  INFO 15786 --- [ost-startStop-1] o.s.web.servlet.DispatcherServlet        : FrameworkServlet 'dispatcherServlet': initialization completed in 1229 ms
2013-11-24 00:48:44.641 DEBUG 15786 --- [           main] ationConfigEmbeddedWebApplicationContext : Unable to locate LifecycleProcessor with name 'lifecycleProcessor': using default [org.springframework.context.support.DefaultLifecycleProcessor@10d6fc05]
2013-11-24 00:48:44.644 DEBUG 15786 --- [           main] nitializer$AutoConfigurationReportLogger : 


=========================
AUTO-CONFIGURATION REPORT
=========================


Positive matches:
-----------------

   MessageSourceAutoConfiguration
      - @ConditionalOnMissingBean (types: org.springframework.context.MessageSource; SearchStrategy: all) found no beans (OnBeanCondition)

   PropertyPlaceholderAutoConfiguration#propertySourcesPlaceholderConfigurer
      - @ConditionalOnMissingBean (types: org.springframework.context.support.PropertySourcesPlaceholderConfigurer; SearchStrategy: current) found no beans (OnBeanCondition)

   DispatcherServletAutoConfiguration
      - found web application StandardServletEnvironment (OnWebApplicationCondition)
      - @ConditionalOnClass classes found: org.springframework.web.servlet.DispatcherServlet (OnClassCondition)
      - found web application StandardServletEnvironment (OnWebApplicationCondition)
      - @ConditionalOnClass classes found: org.springframework.web.servlet.DispatcherServlet (OnClassCondition)
      - @ConditionalOnBean (types: org.springframework.boot.context.embedded.EmbeddedServletContainerFactory; SearchStrategy: all) found the following [tomcatEmbeddedServletContainerFactory] (OnBeanCondition)

   DispatcherServletAutoConfiguration#dispatcherServlet
      - no DispatcherServlet found (DispatcherServletAutoConfiguration.DefaultDispatcherServletCondition)

   EmbeddedServletContainerAutoConfiguration
      - found web application StandardServletEnvironment (OnWebApplicationCondition)
      - found web application StandardServletEnvironment (OnWebApplicationCondition)

   EmbeddedServletContainerAutoConfiguration.EmbeddedTomcat
      - @ConditionalOnClass classes found: javax.servlet.Servlet,org.apache.catalina.startup.Tomcat (OnClassCondition)
      - @ConditionalOnClass classes found: javax.servlet.Servlet,org.apache.catalina.startup.Tomcat (OnClassCondition)
      - @ConditionalOnMissingBean (types: org.springframework.boot.context.embedded.EmbeddedServletContainerFactory; SearchStrategy: current) found no beans (OnBeanCondition)

   ServerPropertiesAutoConfiguration#serverProperties
      - @ConditionalOnMissingBean (types: org.springframework.boot.context.embedded.properties.ServerProperties; SearchStrategy: all) found no beans (OnBeanCondition)

   WebMvcAutoConfiguration
      - found web application StandardServletEnvironment (OnWebApplicationCondition)
      - @ConditionalOnClass classes found: javax.servlet.Servlet,org.springframework.web.servlet.DispatcherServlet,org.springframework.web.servlet.config.annotation.WebMvcConfigurerAdapter (OnClassCondition)
      - found web application StandardServletEnvironment (OnWebApplicationCondition)
      - @ConditionalOnClass classes found: javax.servlet.Servlet,org.springframework.web.servlet.DispatcherServlet,org.springframework.web.servlet.config.annotation.WebMvcConfigurerAdapter (OnClassCondition)
      - @ConditionalOnMissingBean (types: org.springframework.web.servlet.config.annotation.WebMvcConfigurationSupport; SearchStrategy: all) found no beans (OnBeanCondition)

   WebMvcAutoConfiguration#hiddenHttpMethodFilter
      - @ConditionalOnMissingBean (types: org.springframework.web.filter.HiddenHttpMethodFilter; SearchStrategy: all) found no beans (OnBeanCondition)

   WebMvcAutoConfiguration.WebMvcAutoConfigurationAdapter#defaultViewResolver
      - @ConditionalOnMissingBean (types: org.springframework.web.servlet.view.InternalResourceViewResolver; SearchStrategy: all) found no beans (OnBeanCondition)


Negative matches:
-----------------

   RabbitAutoConfiguration
      - required @ConditionalOnClass classes not found: org.springframework.amqp.rabbit.core.RabbitTemplate,com.rabbitmq.client.Channel (OnClassCondition)

   AopAutoConfiguration
      - required @ConditionalOnClass classes not found: org.aspectj.lang.annotation.Aspect,org.aspectj.lang.reflect.Advice (OnClassCondition)

   BatchAutoConfiguration
      - required @ConditionalOnClass classes not found: org.springframework.batch.core.launch.JobLauncher (OnClassCondition)

   JpaRepositoriesAutoConfiguration
      - required @ConditionalOnClass classes not found: org.springframework.data.jpa.repository.JpaRepository (OnClassCondition)

   MongoRepositoriesAutoConfiguration
      - required @ConditionalOnClass classes not found: com.mongodb.Mongo,org.springframework.data.mongodb.repository.MongoRepository (OnClassCondition)

   DataSourceAutoConfiguration
      - required @ConditionalOnClass classes not found: org.springframework.jdbc.datasource.embedded.EmbeddedDatabaseType (OnClassCondition)

   DataSourceTransactionManagerAutoConfiguration
      - required @ConditionalOnClass classes not found: org.springframework.jdbc.core.JdbcTemplate,org.springframework.transaction.PlatformTransactionManager (OnClassCondition)

   JmsTemplateAutoConfiguration
      - required @ConditionalOnClass classes not found: org.springframework.jms.core.JmsTemplate,javax.jms.ConnectionFactory (OnClassCondition)

   DeviceResolverAutoConfiguration
      - required @ConditionalOnClass classes not found: org.springframework.mobile.device.DeviceResolverHandlerInterceptor,org.springframework.mobile.device.DeviceHandlerMethodArgumentResolver (OnClassCondition)

   HibernateJpaAutoConfiguration
      - required @ConditionalOnClass classes not found: org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean,org.springframework.transaction.annotation.EnableTransactionManagement,javax.persistence.EntityManager,org.hibernate.ejb.HibernateEntityManager (OnClassCondition)

   ReactorAutoConfiguration
      - required @ConditionalOnClass classes not found: reactor.spring.context.config.EnableReactor (OnClassCondition)

   ThymeleafAutoConfiguration
      - required @ConditionalOnClass classes not found: org.thymeleaf.spring3.SpringTemplateEngine (OnClassCondition)

   EmbeddedServletContainerAutoConfiguration.EmbeddedJetty
      - required @ConditionalOnClass classes not found: org.eclipse.jetty.server.Server,org.eclipse.jetty.util.Loader (OnClassCondition)

   MultipartAutoConfiguration
      - @ConditionalOnClass classes found: javax.servlet.Servlet,org.springframework.web.multipart.support.StandardServletMultipartResolver (OnClassCondition)
      - @ConditionalOnClass classes found: javax.servlet.Servlet,org.springframework.web.multipart.support.StandardServletMultipartResolver (OnClassCondition)
      - @ConditionalOnBean (types: javax.servlet.MultipartConfigElement; SearchStrategy: all) found no beans (OnBeanCondition)

   WebMvcAutoConfiguration.WebMvcAutoConfigurationAdapter#beanNameViewResolver
      - @ConditionalOnBean (types: org.springframework.web.servlet.View; SearchStrategy: all) found no beans (OnBeanCondition)

   WebMvcAutoConfiguration.WebMvcAutoConfigurationAdapter#viewResolver
      - @ConditionalOnBean (types: org.springframework.web.servlet.View; SearchStrategy: all) found no beans (OnBeanCondition)

   WebSocketAutoConfiguration
      - required @ConditionalOnClass classes not found: org.springframework.web.socket.WebSocketHandler (OnClassCondition)

2013-11-24 00:48:44.650  INFO 15786 --- [           main] hello.Application                        : Started Application in 4.125 seconds
</code></pre>
",2288351,,2288351,,2013-11-23 23:54:35,2013-11-25 8:16:19,Spring-boot UTF-8 resources,<java><spring><utf-8><spring-boot>,2,5,2,,
Spring,21305874,1,21846758,71,2/18/2014 7:19:17,26,,1/23/2014 10:45:45,,1,1083,"<p>I tried to make STOMP connection to RabbitMQ using Spring 4.0 WebSocketMessageBrokerConfigurer class, but failed ?</p>

<p>Snap of code is here. </p>

<pre><code>@Configuration
@EnableWebSocketMessageBroker
public class WebSocketConfig implements WebSocketMessageBrokerConfigurer {

    @Override
    public void configureMessageBroker(MessageBrokerRegistry config) {
        StompBrokerRelayRegistration StompBrokerRelayRegistration = config.enableStompBrokerRelay(""/"");
        StompBrokerRelayRegistration.setApplicationLogin(""guest"");
        StompBrokerRelayRegistration.setApplicationPasscode(""guest"");
        StompBrokerRelayRegistration.setAutoStartup(true);
        StompBrokerRelayRegistration.setRelayHost(""localhost"");
        StompBrokerRelayRegistration.setRelayPort(15674);
</code></pre>

<p>Note that</p>

<ul>
<li>I am using spring boot to run application. In fact I am changing the existing spring example ""<a href=""https://github.com/spring-guides/gs-messaging-stomp-websocket"" rel=""nofollow"">gs-messaging-stomp-websocket</a>"". and changing class <a href=""https://github.com/spring-guides/gs-messaging-stomp-websocket/blob/master/complete/src/main/java/hello/WebSocketConfig.java"" rel=""nofollow"">WebSocketConfig</a>.</li>
<li>Rabbitmq is locally installed with STOMP plugin enabled.</li>
<li>Added all the maven dependency like spring-rabbitmq.</li>
</ul>

<p>Do I need to do any thing else ? </p>

<p>Thanks,
Rafiq</p>
",838659,,838659,,2014-01-29 3:37:46,2014-03-21 5:38:01,Fail to connect to Rabbitmq using Spring 4.0 webstocket stomp api,<rabbitmq><spring-4><spring-messaging><spring-websocket>,1,0,,,
Spring,22600920,1,22604552,72,3/24/2014 8:42:38,0,,3/24/2014 4:09:14,,1,303,"<p>I've been trying to get this simple example running (with java 1.7) <a href=""https://github.com/spring-guides/gs-accessing-neo4j-data-rest/tree/master/complete"" rel=""nofollow"">https://github.com/spring-guides/gs-accessing-neo4j-data-rest/tree/master/complete</a></p>

<p>I keep getting the following error when attempting to start the application via the main method in the Application class.</p>

<p>I'uploaded the entire log to this gist: <a href=""http://bit.ly/1hU7Vpu"" rel=""nofollow"">http://bit.ly/1hU7Vpu</a></p>

<p>Here's the summary of the error.</p>

<pre><code>WARN 6470 --- [           main] o.s.boot.SpringApplication               : Error handling failed (Error creating bean with name 'org.springframework.data.rest.webmvc.config.RepositoryRestMvcConfiguration': Initialization of bean failed; nested exception is java.lang.NoSuchMethodError: org.springframework.data.rest.webmvc.config.RepositoryRestMvcConfiguration.setBeanFactory(Lorg/springframework/beans/factory/BeanFactory;)V)
Exception in thread ""main"" org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'entityFetchHandler' defined in class hello.Application: Instantiation of bean failed; nested exception is org.springframework.beans.factory.BeanDefinitionStoreException: Factory method [public org.springframework.data.neo4j.support.mapping.Neo4jEntityFetchHandler org.springframework.data.neo4j.config.Neo4jConfiguration.entityFetchHandler() throws java.lang.Exception] threw exception; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'nodeStateTransmitter' defined in class hello.Application: Initialization of bean failed; nested exception is java.lang.reflect.MalformedParameterizedTypeException
</code></pre>
",2091827,,592228,,2014-03-24 8:43:12,2014-03-24 13:28:49,Spring Neo4J REST error - nodeStateTransmitter,<java><spring><rest><neo4j><spring-boot>,1,0,1,,
Spring,22935840,1,22935912,73,4/8/2014 11:40:53,0,,4/8/2014 11:37:56,,2,4169,"<p>I am going through this guide:</p>

<p><a href=""https://spring.io/guides/gs/rest-service/"" rel=""nofollow"">https://spring.io/guides/gs/rest-service/</a></p>

<p>I use Maven for building, so I've fetched the pom.xml linked in the official Spring guide:</p>

<p><a href=""https://github.com/spring-guides/gs-rest-service/blob/master/initial/pom.xml"" rel=""nofollow"">https://github.com/spring-guides/gs-rest-service/blob/master/initial/pom.xml</a></p>

<pre><code>    &lt;?xml version=""1.0"" encoding=""UTF-8""?&gt;&lt;project xmlns=""http://maven.apache.org/POM/4.0.0"" xmlns:xsi=""http://www.w3.org/2001/XMLSchema-instance""
    xsi:schemaLocation=""http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd""&gt;

    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;

    &lt;groupId&gt;org.springframework&lt;/groupId&gt;
    &lt;artifactId&gt;gs-rest-service&lt;/artifactId&gt;
    &lt;version&gt;0.1.0&lt;/version&gt;

    &lt;parent&gt;
        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
        &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;
        &lt;version&gt;1.0.1.RELEASE&lt;/version&gt;
    &lt;/parent&gt;

    &lt;dependencies&gt;
        &lt;dependency&gt;
            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
            &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;
        &lt;/dependency&gt;
        &lt;dependency&gt;
            &lt;groupId&gt;com.fasterxml.jackson.core&lt;/groupId&gt;
            &lt;artifactId&gt;jackson-databind&lt;/artifactId&gt;
        &lt;/dependency&gt;
    &lt;/dependencies&gt;

    &lt;properties&gt;
        &lt;start-class&gt;hello.Application&lt;/start-class&gt;
    &lt;/properties&gt;

    &lt;build&gt;
        &lt;plugins&gt;
            &lt;plugin&gt;
                &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;
                &lt;version&gt;2.3.2&lt;/version&gt;
            &lt;/plugin&gt;
            &lt;plugin&gt;
                &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
                &lt;artifactId&gt;spring-boot-maven-build&lt;/artifactId&gt;
            &lt;/plugin&gt;
        &lt;/plugins&gt;
    &lt;/build&gt;

    &lt;repositories&gt;
        &lt;repository&gt;
            &lt;id&gt;spring-snapshots&lt;/id&gt;
            &lt;url&gt;http://repo.spring.io/libs-snapshot&lt;/url&gt;
            &lt;snapshots&gt;&lt;enabled&gt;true&lt;/enabled&gt;&lt;/snapshots&gt;
        &lt;/repository&gt;
        &lt;repository&gt;
            &lt;id&gt;spring-repo&lt;/id&gt;
            &lt;name&gt;Spring Repository&lt;/name&gt;
            &lt;url&gt;http://repo.spring.io/release&lt;/url&gt;
        &lt;/repository&gt;
    &lt;/repositories&gt;
    &lt;pluginRepositories&gt;
        &lt;pluginRepository&gt;
            &lt;id&gt;spring-snapshots&lt;/id&gt;
            &lt;url&gt;http://repo.spring.io/libs-snapshot&lt;/url&gt;
            &lt;snapshots&gt;&lt;enabled&gt;true&lt;/enabled&gt;&lt;/snapshots&gt;
        &lt;/pluginRepository&gt;
    &lt;/pluginRepositories&gt;
&lt;/project&gt;
</code></pre>

<p>I get the following error when running <em>mvn install</em></p>

<blockquote>
  <p>[ERROR] Error resolving version for plugin
  org.springframework.boot:spring-boot-maven-build' from the
  repositories [local (C:\Users\Laszlo_Szucs.m2\repository),
  spring-snapshots (repo.spring.io/libs-snapshot), central
  repo.maven.apache.org/maven2)]: Plugin not found in any plugin
  repository -> [Help 1]</p>
</blockquote>

<p><strong>How do I know which version to provide in the pom.xml for this?</strong></p>
",2427686,,2427686,,2014-04-08 12:15:57,2017-10-06 7:00:46,Cannot build Spring 4 project with Maven,<java><spring><maven><pom.xml>,3,1,,,
Spring,23366226,1,23366746,74,4/29/2014 13:55:21,0,,4/29/2014 13:34:32,,28,23955,"<p>I'm having trouble with my first steps using Spring-Boot with JPA. I've started with a pretty minimalistic <a href=""https://github.com/spring-guides/gs-accessing-data-jpa.git"">example from Git</a> using Gradle. </p>

<p>Now simply moving <code>Customer</code> to another package, let's say to <code>hello2</code> results in an exception <code>Caused by: java.lang.IllegalArgumentException: Not an managed type: class hello2.Customer</code>. I tried to add </p>

<p><code>@ComponentScan(basePackageClasses= {Customer.class}) // AND OR
@EnableJpaRepositories(basePackageClasses= {Customer.class})</code></p>

<p>to <code>Application</code>, but without success. </p>

<p>What am I doing wrong?</p>
",294068,,,,,2017-11-24 7:18:08,Spring Boot w/ JPA: move @Entity to different package,<spring><jpa><spring-data><spring-data-jpa><spring-boot>,4,0,5,,
Spring,24025004,1,24040465,75,6/4/2014 14:38:56,1,,6/3/2014 21:12:20,,5,3165,"<p>I'm working with a Maven multi module with a war depending on an other war.</p>

<p>The Spring Boot webapp depends on a basic webapp that only serves html files.</p>

<p>When I run the Spring Boot app, I'm able to access services and html from the main webapp (the Spring Boot one) but I can't access the html files from the dependency war (404). But these html files are well packaged in the Spring Boot webapp war...</p>

<p>Here is a project that show the problem:<br>
<a href=""https://github.com/cthiebault/spring-boot-war-overlays"" rel=""noreferrer"">https://github.com/cthiebault/spring-boot-war-overlays</a></p>

<p>This project has 2 war modules:</p>

<ul>
<li><strong>dependency-webapp</strong>: basic webapp serving just html (/dependency/index.html)</li>
<li><strong>main-webapp</strong>: Spring Boot webapp (copied from Spring Guides <a href=""https://github.com/spring-guides/gs-serving-web-content"" rel=""noreferrer"">gs-serving-web-content</a>). This webapp has a dependency on <strong>dependency-webapp</strong>.</li>
</ul>

<p>Here is the main-webapp pom.xml:</p>

<pre><code>&lt;?xml version=""1.0"" encoding=""UTF-8""?&gt;
&lt;project xmlns=""http://maven.apache.org/POM/4.0.0"" xmlns:xsi=""http://www.w3.org/2001/XMLSchema-instance""
    xsi:schemaLocation=""http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd""&gt;
  &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;

  &lt;parent&gt;
    &lt;groupId&gt;spring-boot-overlays&lt;/groupId&gt;
    &lt;artifactId&gt;parent&lt;/artifactId&gt;
    &lt;version&gt;0.1.0-SNAPSHOT&lt;/version&gt;
  &lt;/parent&gt;

  &lt;artifactId&gt;main-webapp&lt;/artifactId&gt;
  &lt;packaging&gt;war&lt;/packaging&gt;

  &lt;dependencies&gt;
    &lt;dependency&gt;
      &lt;groupId&gt;spring-boot-overlays&lt;/groupId&gt;
      &lt;artifactId&gt;dependency-webapp&lt;/artifactId&gt;
      &lt;version&gt;0.1.0-SNAPSHOT&lt;/version&gt;
      &lt;type&gt;war&lt;/type&gt;
    &lt;/dependency&gt;
    &lt;dependency&gt;
      &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
      &lt;artifactId&gt;spring-boot-starter-thymeleaf&lt;/artifactId&gt;
    &lt;/dependency&gt;
  &lt;/dependencies&gt;

  &lt;build&gt;
    &lt;plugins&gt;
      &lt;plugin&gt;
        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
        &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;
      &lt;/plugin&gt;
      &lt;plugin&gt;
        &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;
        &lt;artifactId&gt;maven-war-plugin&lt;/artifactId&gt;
        &lt;configuration&gt;
          &lt;overlays&gt;
            &lt;overlay&gt;
              &lt;groupId&gt;spring-boot-overlays&lt;/groupId&gt;
              &lt;artifactId&gt;dependency-webapp&lt;/artifactId&gt;
            &lt;/overlay&gt;
          &lt;/overlays&gt;
        &lt;/configuration&gt;
      &lt;/plugin&gt;
    &lt;/plugins&gt;
  &lt;/build&gt;

  &lt;properties&gt;
    &lt;start-class&gt;hello.Application&lt;/start-class&gt;
  &lt;/properties&gt;

&lt;/project&gt;
</code></pre>

<p>Run the webapp: </p>

<pre><code>mvn install
cd main-webapp
mvn spring-boot:run
</code></pre>

<h3>EDIT 1: Here are the logs when I try to access html pages:</h3>

<p><code>http://localhost:8080/index.html</code> <strong>--> OK</strong></p>

<pre><code>o.s.web.servlet.DispatcherServlet        : DispatcherServlet with name 'dispatcherServlet' processing GET request for [/index.html]
s.w.s.m.m.a.RequestMappingHandlerMapping : Looking up handler method for path /index.html
s.w.s.m.m.a.RequestMappingHandlerMapping : Did not find handler method for [/index.html]
o.s.w.s.handler.SimpleUrlHandlerMapping  : Matching patterns for request [/index.html] are [/**]
o.s.w.s.handler.SimpleUrlHandlerMapping  : URI Template variables for request [/index.html] are {}
o.s.w.s.handler.SimpleUrlHandlerMapping  : Mapping [/index.html] to HandlerExecutionChain with handler [org.springframework.web.servlet.resource.ResourceHttpRequestHandler@25595861] and 1 interceptor
o.s.web.servlet.DispatcherServlet        : Last-Modified value for [/index.html] is: -1
o.s.w.s.r.ResourceHttpRequestHandler     : Trying relative path [index.html] against base location: ServletContext resource [/]
o.s.w.s.r.ResourceHttpRequestHandler     : Found matching resource: ServletContext resource [/index.html]
o.s.w.s.r.ResourceHttpRequestHandler     : Determined media type 'text/html' for ServletContext resource [/index.html]
o.s.w.s.r.ResourceHttpRequestHandler     : Resource not modified - returning 304
o.s.web.servlet.DispatcherServlet        : Null ModelAndView returned to DispatcherServlet with name 'dispatcherServlet': assuming HandlerAdapter completed request handling
o.s.web.servlet.DispatcherServlet        : Successfully completed request
</code></pre>

<p><code>http://localhost:8080/dependency/index.html</code> <strong>--> ERROR 404</strong></p>

<pre><code>o.s.web.servlet.DispatcherServlet        : DispatcherServlet with name 'dispatcherServlet' processing GET request for [/dependency/index.html]
s.w.s.m.m.a.RequestMappingHandlerMapping : Looking up handler method for path /dependency/index.html
s.w.s.m.m.a.RequestMappingHandlerMapping : Did not find handler method for [/dependency/index.html]
o.s.w.s.handler.SimpleUrlHandlerMapping  : Matching patterns for request [/dependency/index.html] are [/**]
o.s.w.s.handler.SimpleUrlHandlerMapping  : URI Template variables for request [/dependency/index.html] are {}
o.s.w.s.handler.SimpleUrlHandlerMapping  : Mapping [/dependency/index.html] to HandlerExecutionChain with handler [org.springframework.web.servlet.resource.ResourceHttpRequestHandler@25595861] and 1 interceptor
o.s.web.servlet.DispatcherServlet        : Last-Modified value for [/dependency/index.html] is: -1
o.s.w.s.r.ResourceHttpRequestHandler     : Trying relative path [dependency/index.html] against base location: ServletContext resource [/]
o.s.w.s.r.ResourceHttpRequestHandler     : Trying relative path [dependency/index.html] against base location: class path resource [META-INF/resources/]
o.s.w.s.r.ResourceHttpRequestHandler     : Trying relative path [dependency/index.html] against base location: class path resource [resources/]
o.s.w.s.r.ResourceHttpRequestHandler     : Trying relative path [dependency/index.html] against base location: class path resource [static/]
o.s.w.s.r.ResourceHttpRequestHandler     : Trying relative path [dependency/index.html] against base location: class path resource [public/]
o.s.w.s.r.ResourceHttpRequestHandler     : No matching resource found - returning 404
o.s.web.servlet.DispatcherServlet        : Null ModelAndView returned to DispatcherServlet with name 'dispatcherServlet': assuming HandlerAdapter completed request handling
o.s.web.servlet.DispatcherServlet        : Successfully completed request
</code></pre>

<p>Any idea of what's wrong?</p>
",386713,,386713,,2014-06-04 13:08:34,2014-06-04 14:38:56,Spring Boot & Maven war overlay,<maven><spring-boot><maven-war-plugin>,1,2,1,,
Spring,24539899,1,24546786,76,7/3/2014 6:49:16,1,,7/2/2014 19:54:36,,1,5245,"<p>I'm following <a href=""https://spring.io/guides/tutorials/rest/"" rel=""nofollow"">this</a> Spring tutorial and I'm stuck on the first step.</p>

<p>I cloned the tutorial repository and tried to run my first Gradle tasks:</p>

<pre><code>$ git clone https://github.com/spring-guides/tut-rest.git
$ cd tut-rest/initial
$ ./gradlew clean test --stacktrace
</code></pre>

<p>This is the error that I got:</p>

<pre><code>org.gradle.api.GradleScriptException: A problem occurred evaluating root project 'initial'.
at org.gradle.groovy.scripts.internal.DefaultScriptRunnerFactory$ScriptRunnerImpl.run(DefaultScriptRunnerFactory.java:54)
at org.gradle.configuration.DefaultScriptPluginFactory$ScriptPluginImpl.apply(DefaultScriptPluginFactory.java:187)
at org.gradle.configuration.project.BuildScriptProcessor.execute(BuildScriptProcessor.java:39)
at org.gradle.configuration.project.BuildScriptProcessor.execute(BuildScriptProcessor.java:26)
at org.gradle.configuration.project.ConfigureActionsProjectEvaluator.evaluate(ConfigureActionsProjectEvaluator.java:34)
at org.gradle.configuration.project.LifecycleProjectEvaluator.evaluate(LifecycleProjectEvaluator.java:55)
at org.gradle.api.internal.project.AbstractProject.evaluate(AbstractProject.java:470)
at org.gradle.api.internal.project.AbstractProject.evaluate(AbstractProject.java:79)
at org.gradle.configuration.DefaultBuildConfigurer.configure(DefaultBuildConfigurer.java:31)
at org.gradle.initialization.DefaultGradleLauncher.doBuildStages(DefaultGradleLauncher.java:128)
at org.gradle.initialization.DefaultGradleLauncher.doBuild(DefaultGradleLauncher.java:105)
at org.gradle.initialization.DefaultGradleLauncher.run(DefaultGradleLauncher.java:85)
at org.gradle.launcher.exec.InProcessBuildActionExecuter$DefaultBuildController.run(InProcessBuildActionExecuter.java:81)
at org.gradle.launcher.cli.ExecuteBuildAction.run(ExecuteBuildAction.java:33)
at org.gradle.launcher.cli.ExecuteBuildAction.run(ExecuteBuildAction.java:24)
at org.gradle.launcher.exec.InProcessBuildActionExecuter.execute(InProcessBuildActionExecuter.java:39)
at org.gradle.launcher.exec.InProcessBuildActionExecuter.execute(InProcessBuildActionExecuter.java:29)
at org.gradle.launcher.cli.RunBuildAction.run(RunBuildAction.java:50)
at org.gradle.internal.Actions$RunnableActionAdapter.execute(Actions.java:171)
at org.gradle.launcher.cli.CommandLineActionFactory$ParseAndBuildAction.execute(CommandLineActionFactory.java:237)
at org.gradle.launcher.cli.CommandLineActionFactory$ParseAndBuildAction.execute(CommandLineActionFactory.java:210)
at org.gradle.launcher.cli.JavaRuntimeValidationAction.execute(JavaRuntimeValidationAction.java:35)
at org.gradle.launcher.cli.JavaRuntimeValidationAction.execute(JavaRuntimeValidationAction.java:24)
at org.gradle.launcher.cli.CommandLineActionFactory$WithLogging.execute(CommandLineActionFactory.java:206)
at org.gradle.launcher.cli.CommandLineActionFactory$WithLogging.execute(CommandLineActionFactory.java:169)
at org.gradle.launcher.cli.ExceptionReportingAction.execute(ExceptionReportingAction.java:33)
at org.gradle.launcher.cli.ExceptionReportingAction.execute(ExceptionReportingAction.java:22)
at org.gradle.launcher.Main.doAction(Main.java:33)
at org.gradle.launcher.bootstrap.EntryPoint.run(EntryPoint.java:45)
at org.gradle.launcher.bootstrap.ProcessBootstrap.runNoExit(ProcessBootstrap.java:54)
at org.gradle.launcher.bootstrap.ProcessBootstrap.run(ProcessBootstrap.java:35)
at org.gradle.launcher.GradleMain.main(GradleMain.java:23)
at org.gradle.wrapper.BootstrapMainStarter.start(BootstrapMainStarter.java:33)
at org.gradle.wrapper.WrapperExecutor.execute(WrapperExecutor.java:130)
at org.gradle.wrapper.GradleWrapperMain.main(GradleWrapperMain.java:48)

Caused by: java.lang.ClassCastException: java.lang.String cannot be cast to org.gradle.api.artifacts.Configuration
at org.gradle.api.artifacts.Configuration$Namer.determineName(Configuration.java:87)
at org.gradle.api.internal.DefaultNamedDomainObjectCollection.add(DefaultNamedDomainObjectCollection.java:70)
at java_util_Set$add.call(Unknown Source)
at org.springframework.build.gradle.propdep.PropDepsPlugin.addConfiguration(PropDepsPlugin.groovy:54)
at org.springframework.build.gradle.propdep.PropDepsPlugin.this$2$addConfiguration(PropDepsPlugin.groovy)
at org.springframework.build.gradle.propdep.PropDepsPlugin$this$2$addConfiguration.callCurrent(Unknown Source)
at org.springframework.build.gradle.propdep.PropDepsPlugin.apply(PropDepsPlugin.groovy:41)
at org.springframework.build.gradle.propdep.PropDepsPlugin.apply(PropDepsPlugin.groovy)
at org.gradle.api.internal.plugins.DefaultPluginContainer.providePlugin(DefaultPluginContainer.java:110)
at org.gradle.api.internal.plugins.DefaultPluginContainer.addPluginInternal(DefaultPluginContainer.java:69)
at org.gradle.api.internal.plugins.DefaultPluginContainer.apply(DefaultPluginContainer.java:35)
at org.gradle.api.internal.plugins.DefaultObjectConfigurationAction.applyPlugin(DefaultObjectConfigurationAction.java:117)
at org.gradle.api.internal.plugins.DefaultObjectConfigurationAction.access$200(DefaultObjectConfigurationAction.java:36)
at org.gradle.api.internal.plugins.DefaultObjectConfigurationAction$3.run(DefaultObjectConfigurationAction.java:85)
at org.gradle.api.internal.plugins.DefaultObjectConfigurationAction.execute(DefaultObjectConfigurationAction.java:130)
at org.gradle.api.internal.project.AbstractPluginAware.apply(AbstractPluginAware.java:41)
at org.gradle.api.Project$apply$0.call(Unknown Source)
at org.gradle.api.internal.project.ProjectScript.apply(ProjectScript.groovy:34)
at org.gradle.api.Script$apply$0.callCurrent(Unknown Source)
at build_2adlb8a21ubaha3t8bdi7pcekq.run(/home/b/Repos/tut-rest/initial/build.gradle:6)
at org.gradle.groovy.scripts.internal.DefaultScriptRunnerFactory$ScriptRunnerImpl.run(DefaultScriptRunnerFactory.java:52)
... 34 more
</code></pre>

<p>All I changed in the codebase is that I updated Gradle wrapper from version 1.6 to version 2.0, because using 1.6 was giving me some warning, but I was getting the same casting error before the upgrade.</p>

<p>How do I solve this error?</p>
",3799139,,,,,2014-07-20 10:36:41,Gradle error: java.lang.String cannot be cast to org.gradle.api.artifacts.Configuration,<java><spring><gradle>,2,2,,,
Spring,25571843,1,25574250,77,8/29/2014 18:34:16,0,,8/29/2014 15:51:55,,7,4574,"<p>I'm having problems accessing the sample springBoot application after I deploy it to Weblogic12C. It works fine using the springBoot-embedded Tomcat server.</p>

<h1>Install and test using SpringBoot-embedded Tomcat: all is well</h1>

<p>Steps to reproduce: get the springBoot ""getting started"" application code following the steps: <a href=""https://spring.io/guides/gs/spring-boot/"" rel=""nofollow noreferrer"">https://spring.io/guides/gs/spring-boot/</a></p>

<ul>
<li>git clone <a href=""https://github.com/spring-guides/gs-spring-boot.git"" rel=""nofollow noreferrer"">https://github.com/spring-guides/gs-spring-boot.git</a></li>
<li>cd gs-spring-boot/complete/ (we'll be using the gr-spring-boot/complete dir so that you don't have to go through the ""getting started"" page above (all changes done for you in ""complete"").  </li>
<li>open the file gs-spring-boot/complete/build.gradle and add "" apply plugin: 'war' "" below the other ""apply plugin"" entries </li>
</ul>

<p>At this point, you can validate that all is well by running the gradle ""bootRun"" tasks which starts the app in the embedded Tomcat server. Once tomcat started, browse to localhost:8080/ and see that you get ""Greetings from Spring Boot!""</p>

<h1>Now let's install this on Weblogic 12C</h1>

<ul>
<li>run ""gradle war"" (again, work from gs-spring-boot/complete/)
you will now have a war file under gs-spring-boot\complete\build\libs\complete.war

<ul>
<li>go to your weblogic12C console. I didn't make changes to my WL12C so the console is located at localhost:7001/console NOTE: I downloaded the WL12C developer version one week ago from the Oracle site. I didn't make any changes to it, as downloaded. The dev version of WL12C download requires that we point it to our already installed JDK. My WL12C uses java version:

<blockquote>
  <blockquote>
    <p>java version ""1.7.0_45""
    Java(TM) SE Runtime Environment (build 1.7.0_45-b18)
    Java HotSpot(TM) Server VM (build 24.45-b08, mixed mode)</p>
  </blockquote>
</blockquote></li>
<li>when in the console, deploy the war file:</li>
<li>click on ""deployments""</li>
<li>click on ""install""</li>
<li>browse to you ""gs-spring-boot \ complete \ build \ libs"" dir </li>
<li>select the radio button next to complete.war and hit next</li>
<li>select ""install as application"" and hit next</li>
<li>leave all options as is [DD only, use the defaults, use same accessibility] and hit next</li>
<li>click finish</li>
</ul></li>
</ul>

<p>At this point, you will see that the application deployed fine:
- click on ""deployments"" again and see that your ""complete"" springBoot app is listed and ACTIVE
- click on ""complete"" and notice on this page: ""Context Root:   /complete"". NOTE: weblogic docs say that if there is no context-root defined in weblogic.xml, then it uses the name of the war file (minus the .war)</p>

<h1>Now, the problem: getting a 403:</h1>

<p>if you try to access the springBoot app at localhost:7001/complete you get a 403!!!</p>

<pre><code>Error 403--Forbidden
From RFC 2068 Hypertext Transfer Protocol -- HTTP/1.1:
10.4.4 403 Forbidden
The server understood the request, but is refusing to fulfill it. Authorization will not help and the request SHOULD NOT be repeated. If the request method was not HEAD and the server wishes to make public why the request has not been fulfilled, it SHOULD describe the reason for the refusal in the entity. This status code is commonly used when the server does not wish to reveal exactly why the request has been refused, or when no other response is applicable.
</code></pre>

<p>Ok, so let's make one final change (I'm fishing here, maybe weblogic really wants a weblogic.xml):</p>

<ul>
<li>create the dir: gs-spring-boot\complete\src\main\webapp\WEB-INF\</li>
<li>create this file: gs-spring-boot\complete\src\main\webapp\WEB-INF\weblogic.xml</li>
<li><p>edit weblogic.xml to contain:</p>

<pre><code>&lt;?xml version=""1.0"" encoding=""UTF-8""?&gt;
&lt;wls:weblogic-web-app xmlns:wls=""http://xmlns.oracle.com/weblogic/weblogic-web-app"" xmlns:xsi=""http://www.w3.org/2001/XMLSchema-instance"" xsi:schemaLocation=""http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd http://xmlns.oracle.com/weblogic/weblogic-web-app http://xmlns.oracle.com/weblogic/weblogic-web-app/1.4/weblogic-web-app.xsd""&gt;
    &lt;wls:weblogic-version&gt;12.1.1&lt;/wls:weblogic-version&gt;
    &lt;wls:context-root&gt;testApp&lt;/wls:context-root&gt;
&lt;/wls:weblogic-web-app&gt;
</code></pre></li>
<li><p>now go back to your weblogic console (localhost:7001/console)</p></li>
<li>go to ""web applications"" and select the checkbox next to ""complete"" then hit ""delete""</li>
<li>restart your weblogic12C server (just to be paranoid)</li>
<li>run the ""gradle clean"" then ""gradle war"" task again to generate a new war file</li>
<li>open the war file (using winzip or whatever) and confirm that the war file now has WEB-INF/weblogic.xml</li>
<li>go to the console the deploy the new war file (use same steps as above)</li>
<li>confirm that the app is now deployed and has a contextRoot of /testApp (as defined in weblogic.xml)</li>
<li>browse to localhost:7001/testApp/</li>
</ul>

<p>The 403 is still there. So:</p>

<ul>
<li>weblogic DOES know about this application (returns 403). Because if it didn't know about the application, it would return 404 (try it by going to localhost:7001/doesNotExist and you'll get 404)</li>
<li>but it looks like WL12C doesn't route requests to spring. In the past, we'd define a bunch of things in web.xml but nowadays, with javaConfig and SpringBoot, this should all be done automagically...

<ul>
<li>note: because SpringBoot uses JavaConfig (Servlet3), we can't use anything lower that weblogic12C (which is the latest)</li>
</ul></li>
</ul>

<h1>Another thing I tried: change RequestMapping</h1>

<p>In the sample code above, open the file gs-spring-boot\complete\src\main\java\hello\HelloController.java and replace:</p>

<pre><code>@RequestMapping(""/"")
</code></pre>

<p>with this:</p>

<pre><code>@RequestMapping(""pierre.htm"")
</code></pre>

<p>Now, if you browse to (remember weblogic.xml define context-root as /testApp):</p>

<ul>
<li>localhost:7001/testApp/pierre.htm you'll get a 404 </li>
<li>localhost:7001/testApp/           you'll get 403</li>
</ul>

<p>And if you try on tomcat with ""gradle bootrun"", you can get to it fine: localhost:8080/pierre.htm (you get ""greetings from SpringBoot!"").</p>

<p>So this yields the following hints:</p>

<ul>
<li>Weblogic does know about /testApp</li>
<li>Weblogic has no idea what /testApp/pierre.htm is. It's like it was never configured as a RequestMapping. </li>
<li>there is some ""Spring wiring"" missing for it to work on weblogic.... </li>
</ul>

<p>This is where I'm stuck... Can anyone think what JavaConfig ""wiring"" I'm missing to make it work on Weblogic? Any help greatly appreciated. Thanks!!</p>

<h1>Solution</h1>

<p>If anyone comes here, to make it simpler than read all the comments, below, here's how to make it work:</p>

<ul>
<li>start with the SpringBoot sample app and git the ""complete"" solution from here: spring.io/guides/gs/convert-jar-to-war/</li>
<li><p>update the class WebInitializer so that it implements WebApplicationInitializer. So change it from this:</p>

<pre><code>    public class WebInitializer extends SpringBootServletInitializer {
</code></pre></li>
</ul>

<p>To this:</p>

<pre><code>        public class WebInitializer extends SpringBootServletInitializer implements WebApplicationInitializer {
</code></pre>

<ul>
<li><p>create a new file src/main/webapp/WEB-INF/weblogic.xml and put this contents in it:</p>

<pre><code>&lt;?xml version=""1.0"" encoding=""UTF-8""?&gt;
&lt;wls:weblogic-web-app xmlns:wls=""http://xmlns.oracle.com/weblogic/weblogic-web-app"" xmlns:xsi=""http://www.w3.org/2001/XMLSchema-instance"" xsi:schemaLocation=""http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd http://xmlns.oracle.com/weblogic/weblogic-web-app http://xmlns.oracle.com/weblogic/weblogic-web-app/1.4/weblogic-web-app.xsd""&gt;
    &lt;wls:weblogic-version&gt;12.1.1&lt;/wls:weblogic-version&gt;
    &lt;wls:context-root&gt;helloApp&lt;/wls:context-root&gt;
    &lt;wls:container-descriptor&gt;
        &lt;wls:prefer-application-packages&gt;
            &lt;wls:package-name&gt;org.slf4j.*&lt;/wls:package-name&gt;
        &lt;/wls:prefer-application-packages&gt;
    &lt;/wls:container-descriptor&gt;
&lt;/wls:weblogic-web-app&gt;
</code></pre>

<ul>
<li>gradle war</li>
<li>deploy to Weblogic12C</li>
<li>it should work now :) Thanks so much to both Dave Syer and Evgeni!</li>
</ul></li>
</ul>

<h1>Previous Solution (kept here for posterity)</h1>

<ul>
<li><p>start with the SpringBoot sample app and git the ""complete"" solution from here: spring.io/guides/gs/convert-jar-to-war/</p>

<ul>
<li>in the sample app's package ""hello"", add a new public class HelloWebXml implements WebApplicationInitializer </li>
<li><p>take all the code from org.springframework.boot.context.web.SpringBootServletInitializer and copy it into HelloWebXml but change these lines:</p>

<p>protected SpringApplicationBuilder configure(SpringApplicationBuilder application) {
    return application;
}</p></li>
</ul></li>
</ul>

<p>To this:</p>

<pre><code>    protected SpringApplicationBuilder configure(SpringApplicationBuilder application) {
      return application.sources(Application.class);
    }
</code></pre>

<ul>
<li>copy the class org.springframework.boot.context.web.ErrorPageFilter into package ""hello"" in the sample app</li>
<li><p>create a new file src/main/webapp/WEB-INF/weblogic.xml and put this contents in it:</p>

<pre><code>&lt;?xml version=""1.0"" encoding=""UTF-8""?&gt;
&lt;wls:weblogic-web-app xmlns:wls=""http://xmlns.oracle.com/weblogic/weblogic-web-app"" xmlns:xsi=""http://www.w3.org/2001/XMLSchema-instance"" xsi:schemaLocation=""http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd http://xmlns.oracle.com/weblogic/weblogic-web-app http://xmlns.oracle.com/weblogic/weblogic-web-app/1.4/weblogic-web-app.xsd""&gt;
    &lt;wls:weblogic-version&gt;12.1.1&lt;/wls:weblogic-version&gt;
    &lt;wls:context-root&gt;helloApp&lt;/wls:context-root&gt;
    &lt;wls:container-descriptor&gt;
        &lt;wls:prefer-application-packages&gt;
            &lt;wls:package-name&gt;org.slf4j.*&lt;/wls:package-name&gt;
        &lt;/wls:prefer-application-packages&gt;
    &lt;/wls:container-descriptor&gt;
&lt;/wls:weblogic-web-app&gt;
</code></pre>

<ul>
<li>gradle war</li>
<li>deploy to Weblogic12C</li>
<li>it should work now :) Thanks so much to both Dave Syer and Evgeni!</li>
</ul></li>
</ul>

<p>NOTE: There is a similar questions here:
<a href=""https://stackoverflow.com/questions/24835051/deploy-spring-boot-app-in-weblogic"">Deploy Spring Boot app in Weblogic</a>
...but that other question is about the deployment and it's a little vague (deployment itself works fine for me)</p>
",3930172,,-1,,2017-05-23 10:29:47,2017-07-13 12:11:00,Problems accessing fresh deploy of SpringBoot sample app on Weblogic12C,<java><spring><spring-boot><weblogic12c>,3,2,5,,
Spring,27105619,1,27106014,78,11/24/2014 13:29:32,0,,11/24/2014 13:08:11,,1,1121,"<p>I am following the link
<a href=""https://github.com/spring-guides/gs-serving-web-content"" rel=""nofollow"">https://github.com/spring-guides/gs-serving-web-content</a></p>

<p>After check out the files, import gs-serving-web-content/complete  into IDEA, and run it. It runs successfully, but if I use http as following to access it then it failed.</p>

<pre><code>http://127.0.0.1:8080/greating
</code></pre>

<p>The message is as below:</p>

<pre><code>com.intellij.rt.execution.application.AppMain hello.Application

  .   ____          _            __ _ _
 /\\ / ___'_ __ _ _(_)_ __  __ _ \ \ \ \
( ( )\___ | '_ | '_| | '_ \/ _` | \ \ \ \
 \\/  ___)| |_)| | | | | || (_| |  ) ) ) )
  '  |____| .__|_| |_|_| |_\__, | / / / /
 =========|_|==============|___/=/_/_/_/
 :: Spring Boot ::        (v1.1.9.RELEASE)

2014-11-24 21:07:15.891  INFO 8060 --- [           main] hello.Application                        : Starting Application on SomeHost with PID 8060 (/home/oracle/spring/gs-serving-web-content/complete/build/classes/main started by oracle in /home/oracle/spring/gs-serving-web-content/complete)
2014-11-24 21:07:15.933  INFO 8060 --- [           main] ationConfigEmbeddedWebApplicationContext : Refreshing org.springframework.boot.context.embedded.AnnotationConfigEmbeddedWebApplicationContext@11c20519: startup date [Mon Nov 24 21:07:15 CST 2014]; root of context hierarchy
2014-11-24 21:07:16.864  INFO 8060 --- [           main] o.s.b.f.s.DefaultListableBeanFactory     : Overriding bean definition for bean 'beanNameViewResolver': replacing [Root bean: class [null]; scope=; abstract=false; lazyInit=false; autowireMode=3; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=org.springframework.boot.autoconfigure.web.ErrorMvcAutoConfiguration$WhitelabelErrorViewConfiguration; factoryMethodName=beanNameViewResolver; initMethodName=null; destroyMethodName=(inferred); defined in class path resource [org/springframework/boot/autoconfigure/web/ErrorMvcAutoConfiguration$WhitelabelErrorViewConfiguration.class]] with [Root bean: class [null]; scope=; abstract=false; lazyInit=false; autowireMode=3; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=org.springframework.boot.autoconfigure.web.WebMvcAutoConfiguration$WebMvcAutoConfigurationAdapter; factoryMethodName=beanNameViewResolver; initMethodName=null; destroyMethodName=(inferred); defined in class path resource [org/springframework/boot/autoconfigure/web/WebMvcAutoConfiguration$WebMvcAutoConfigurationAdapter.class]]
2014-11-24 21:07:17.878  INFO 8060 --- [           main] .t.TomcatEmbeddedServletContainerFactory : Server initialized with port: 8080
2014-11-24 21:07:18.132  INFO 8060 --- [           main] o.apache.catalina.core.StandardService   : Starting service Tomcat
2014-11-24 21:07:18.133  INFO 8060 --- [           main] org.apache.catalina.core.StandardEngine  : Starting Servlet Engine: Apache Tomcat/7.0.56
2014-11-24 21:07:18.271  INFO 8060 --- [ost-startStop-1] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2014-11-24 21:07:18.272  INFO 8060 --- [ost-startStop-1] o.s.web.context.ContextLoader            : Root WebApplicationContext: initialization completed in 2341 ms
2014-11-24 21:07:19.000  INFO 8060 --- [ost-startStop-1] o.s.b.c.e.ServletRegistrationBean        : Mapping servlet: 'dispatcherServlet' to [/]
2014-11-24 21:07:19.004  INFO 8060 --- [ost-startStop-1] o.s.b.c.embedded.FilterRegistrationBean  : Mapping filter: 'hiddenHttpMethodFilter' to: [/*]
2014-11-24 21:07:19.389  INFO 8060 --- [           main] o.s.w.s.handler.SimpleUrlHandlerMapping  : Mapped URL path [/**/favicon.ico] onto handler of type [class org.springframework.web.servlet.resource.ResourceHttpRequestHandler]
2014-11-24 21:07:19.596  INFO 8060 --- [           main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped ""{[/greeting],methods=[],params=[],headers=[],consumes=[],produces=[],custom=[]}"" onto public java.lang.String hello.GreetingController.greeting(java.lang.String,org.springframework.ui.Model)
2014-11-24 21:07:19.600  INFO 8060 --- [           main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped ""{[/error],methods=[],params=[],headers=[],consumes=[],produces=[text/html],custom=[]}"" onto public org.springframework.web.servlet.ModelAndView org.springframework.boot.autoconfigure.web.BasicErrorController.errorHtml(javax.servlet.http.HttpServletRequest)
2014-11-24 21:07:19.601  INFO 8060 --- [           main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped ""{[/error],methods=[],params=[],headers=[],consumes=[],produces=[],custom=[]}"" onto public org.springframework.http.ResponseEntity&lt;java.util.Map&lt;java.lang.String, java.lang.Object&gt;&gt; org.springframework.boot.autoconfigure.web.BasicErrorController.error(javax.servlet.http.HttpServletRequest)
2014-11-24 21:07:19.623  INFO 8060 --- [           main] o.s.w.s.handler.SimpleUrlHandlerMapping  : Mapped URL path [/webjars/**] onto handler of type [class org.springframework.web.servlet.resource.ResourceHttpRequestHandler]
2014-11-24 21:07:19.624  INFO 8060 --- [           main] o.s.w.s.handler.SimpleUrlHandlerMapping  : Mapped URL path [/**] onto handler of type [class org.springframework.web.servlet.resource.ResourceHttpRequestHandler]
2014-11-24 21:07:20.117  INFO 8060 --- [           main] o.s.j.e.a.AnnotationMBeanExporter        : Registering beans for JMX exposure on startup
2014-11-24 21:07:20.201  INFO 8060 --- [           main] s.b.c.e.t.TomcatEmbeddedServletContainer : Tomcat started on port(s): 8080/http
2014-11-24 21:07:20.204  INFO 8060 --- [           main] hello.Application                        : Started Application in 4.892 seconds (JVM running for 5.351)
2014-11-24 21:07:26.582 ERROR 8060 --- [nio-8080-exec-1] o.a.coyote.http11.Http11NioProtocol      : Error reading request, ignored

java.lang.NoClassDefFoundError: org/apache/tomcat/util/log/UserDataHelper
    at org.apache.tomcat.util.http.Cookies.&lt;clinit&gt;(Cookies.java:42)
    at org.apache.coyote.Request.&lt;init&gt;(Request.java:131)
    at org.apache.coyote.AbstractProcessor.&lt;init&gt;(AbstractProcessor.java:61)
    at org.apache.coyote.http11.AbstractHttp11Processor.&lt;init&gt;(AbstractHttp11Processor.java:272)
    at org.apache.coyote.http11.Http11NioProcessor.&lt;init&gt;(Http11NioProcessor.java:69)
    at org.apache.coyote.http11.Http11NioProtocol$Http11ConnectionHandler.createProcessor(Http11NioProtocol.java:260)
    at org.apache.coyote.http11.Http11NioProtocol$Http11ConnectionHandler.createProcessor(Http11NioProtocol.java:139)
    at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:586)
    at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1736)
    at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.run(NioEndpoint.java:1695)
    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)
    at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
    at java.lang.Thread.run(Thread.java:745)
Caused by: java.lang.ClassNotFoundException: org.apache.tomcat.util.log.UserDataHelper
    at java.net.URLClassLoader$1.run(URLClassLoader.java:369)
    at java.net.URLClassLoader$1.run(URLClassLoader.java:361)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.net.URLClassLoader.findClass(URLClassLoader.java:360)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:424)
    at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:308)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:357)
    ... 14 common frames omitted
Caused by: java.util.zip.ZipException: invalid LOC header (bad signature)
    at java.util.zip.ZipFile.read(Native Method)
    at java.util.zip.ZipFile.access$1400(ZipFile.java:61)
    at java.util.zip.ZipFile$ZipFileInputStream.read(ZipFile.java:717)
    at java.util.zip.ZipFile$ZipFileInflaterInputStream.fill(ZipFile.java:420)
    at java.util.zip.InflaterInputStream.read(InflaterInputStream.java:158)
    at sun.misc.Resource.getBytes(Resource.java:124)
    at java.net.URLClassLoader.defineClass(URLClassLoader.java:450)
    at java.net.URLClassLoader.access$100(URLClassLoader.java:73)
    at java.net.URLClassLoader$1.run(URLClassLoader.java:367)
    ... 20 common frames omitted

2014-11-24 21:07:26.583 ERROR 8060 --- [nio-8080-exec-1] org.apache.tomcat.util.net.NioEndpoint   : 

java.lang.NullPointerException: null
    at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:722)
    at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1736)
    at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.run(NioEndpoint.java:1695)
    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)
    at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
    at java.lang.Thread.run(Thread.java:745)

2014-11-24 21:07:26.585 ERROR 8060 --- [nio-8080-exec-2] o.a.coyote.http11.Http11NioProtocol      : Error reading request, ignored

java.lang.NoClassDefFoundError: Could not initialize class org.apache.tomcat.util.http.Cookies
    at org.apache.coyote.Request.&lt;init&gt;(Request.java:131)
    at org.apache.coyote.AbstractProcessor.&lt;init&gt;(AbstractProcessor.java:61)
    at org.apache.coyote.http11.AbstractHttp11Processor.&lt;init&gt;(AbstractHttp11Processor.java:272)
    at org.apache.coyote.http11.Http11NioProcessor.&lt;init&gt;(Http11NioProcessor.java:69)
    at org.apache.coyote.http11.Http11NioProtocol$Http11ConnectionHandler.createProcessor(Http11NioProtocol.java:260)
    at org.apache.coyote.http11.Http11NioProtocol$Http11ConnectionHandler.createProcessor(Http11NioProtocol.java:139)
    at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:586)
    at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1736)
    at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.run(NioEndpoint.java:1695)
    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)
    at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
    at java.lang.Thread.run(Thread.java:745)

2014-11-24 21:07:26.586 ERROR 8060 --- [nio-8080-exec-2] org.apache.tomcat.util.net.NioEndpoint   : 

java.lang.NullPointerException: null
    at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:722)
    at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1736)
    at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.run(NioEndpoint.java:1695)
    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)
    at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
    at java.lang.Thread.run(Thread.java:745)

2014-11-24 21:07:26.588 ERROR 8060 --- [nio-8080-exec-3] o.a.coyote.http11.Http11NioProtocol      : Error reading request, ignored

java.lang.NoClassDefFoundError: Could not initialize class org.apache.tomcat.util.http.Cookies
    at org.apache.coyote.Request.&lt;init&gt;(Request.java:131)
    at org.apache.coyote.AbstractProcessor.&lt;init&gt;(AbstractProcessor.java:61)
    at org.apache.coyote.http11.AbstractHttp11Processor.&lt;init&gt;(AbstractHttp11Processor.java:272)
    at org.apache.coyote.http11.Http11NioProcessor.&lt;init&gt;(Http11NioProcessor.java:69)
    at org.apache.coyote.http11.Http11NioProtocol$Http11ConnectionHandler.createProcessor(Http11NioProtocol.java:260)
    at org.apache.coyote.http11.Http11NioProtocol$Http11ConnectionHandler.createProcessor(Http11NioProtocol.java:139)
    at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:586)
    at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1736)
    at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.run(NioEndpoint.java:1695)
    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)
    at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
    at java.lang.Thread.run(Thread.java:745)

2014-11-24 21:07:26.589 ERROR 8060 --- [nio-8080-exec-3] org.apache.tomcat.util.net.NioEndpoint   : 

java.lang.NullPointerException: null
    at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:722)
    at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1736)
    at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.run(NioEndpoint.java:1695)
    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)
    at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
    at java.lang.Thread.run(Thread.java:745)
</code></pre>
",266185,,,,,2014-11-24 13:29:32,spring boot mvc: failed after following the sample,<spring><spring-mvc>,1,1,,,
Spring,27171629,1,27387192,79,12/9/2014 19:27:07,12,,11/27/2014 13:15:15,,1,1627,"<p>I need to get the access token from Spring Social API in order to do operations Which the API doesn't provide. </p>

<p>for example <strong>push message to the client notification icon</strong>.</p>

<p>I followed spring social facebook via Spring offical doc: </p>

<p><a href=""https://github.com/spring-guides/gs-accessing-facebook"" rel=""nofollow"">https://github.com/spring-guides/gs-accessing-facebook</a></p>

<p>How to use the API in order to get the access token string?</p>

<p>thanks.</p>
",260511,,,,,2014-12-09 19:27:07,Get access token using spring social facebook api,<java><facebook><spring><spring-social><spring-social-facebook>,1,0,,,
Spring,28702698,1,28721027,80,2/25/2015 14:04:54,1,,2/24/2015 17:45:29,,2,3201,"<p>Getting startup issues for this <a href=""https://spring.io/guides/gs/accessing-data-gorm-mongodb/"" rel=""nofollow"">springboot project using MongoDB/GORM/Groovy</a> on <code>Java 1.7.0_55</code>, gradle <code>1.11</code>, and <code>spring-boot-gradle-plugin:1.2.1.RELEASE</code>.</p>

<p>I'm running the project <em>as-is</em> with the exception of the following change to <code>application.yml</code> for my remote mongodb:</p>

<pre><code>spring:
    mongodb:
        host: ""10.160.8.1""
        databaseName: ""citydb""
</code></pre>

<p>**On startup, I'm seeing this bean initialization error with <code>mappingMongoConverter</code> </p>

<pre><code>Caused by: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'mongoTemplate' defined in class path resource [org/springframework/boot/autoconfigure/mongo/MongoDataAutoConfiguration.class]:
Unsatisfied dependency expressed through constructor argument with index 1 of type [org.springframework.data.mongodb.core.convert.MongoConverter]: : Error creating bean with name 'mappingMongoConverter' defined in class path resource [org/springframework/boot/autoconfigure/mongo/MongoDataAutoConfiguration.class]:
Unsatisfied dependency expressed through constructor argument with index 1 of type [org.springframework.data.mongodb.core.mapping.MongoMappingContext]: : No qualifying bean of type [org.springframework.data.mongodb.core.mapping.MongoMapping
Context] found for dependency: expected at least 1 bean which qualifies as autowire candidate for this dependency. Dependency annotations: {}; nested exception is org.springframework.beans.factory.NoSuchBeanDefinitionException: No qualifying bean of type [org.springframework.data.mongodb.core.mapping.MongoMappingCo
ntext] found for dependency: expected at least 1 bean which qualifies as autowire candidate for this dependency. Dependency annotations: {}; nested exception is org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'mappingMongoConverter' defined in class path resource [org
/springframework/boot/autoconfigure/mongo/MongoDataAutoConfiguration.class]: Unsatisfied dependency expressed through constructor argument with index 1 of typ
e [org.springframework.data.mongodb.core.mapping.MongoMappingContext]: : No qualifying bean of type [org.springframework.data.mongodb.core.mapping.MongoMappin
gContext] found for dependency: expected at least 1 bean which qualifies as autowire candidate for this dependency. Dependency annotations: {}; nested excepti
on is org.springframework.beans.factory.NoSuchBeanDefinitionException: No qualifying bean of type [org.springframework.data.mongodb.core.mapping.MongoMappingC
ontext] found for dependency: expected at least 1 bean which qualifies as autowire candidate for this dependency. Dependency annotations: {}
</code></pre>

<p><strong>I think this is the main issue:</strong></p>

<pre><code>Caused by: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'mappingMongoConverter' defined in class path resou
rce [org/springframework/boot/autoconfigure/mongo/MongoDataAutoConfiguration.class]: Unsatisfied dependency expressed through constructor argument with index
1 of type [org.springframework.data.mongodb.core.mapping.MongoMappingContext]: : No qualifying bean of type [org.springframework.data.mongodb.core.mapping.Mon
goMappingContext] found for dependency: expected at least 1 bean which qualifies as autowire candidate for this dependency. Dependency annotations: {}; nested
 exception is org.springframework.beans.factory.NoSuchBeanDefinitionException: No qualifying bean of type [org.springframework.data.mongodb.core.mapping.Mongo
MappingContext] found for dependency: expected at least 1 bean which qualifies as autowire candidate for this dependency. Dependency annotations: {}
        at org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:749)
        at org.springframework.beans.factory.support.ConstructorResolver.instantiateUsingFactoryMethod(ConstructorResolver.java:464)
        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.instantiateUsingFactoryMethod(AbstractAutowireCapableBeanFactory.java:
1111)
</code></pre>

<p>Could this be a GORM dependency issue? I'm using the latest, <code>org.grails:gorm-mongodb-spring-boot:1.1.0.RELEASE</code></p>

<p>Tracked as issue on github: <a href=""https://github.com/spring-guides/gs-accessing-data-gorm-mongodb/issues/6"" rel=""nofollow"">https://github.com/spring-guides/gs-accessing-data-gorm-mongodb/issues/6</a></p>
",791406,,791406,,2015-02-25 14:01:06,2018-02-21 18:58:43,springboot initialization error on startup with mongodb on gorm/groovy,<spring><mongodb><groovy><gorm><spring-boot>,1,0,2,,
Spring,29299181,1,29300885,81,3/27/2015 12:38:51,0,,3/27/2015 11:02:30,,2,2111,"<p>I created a new project in Eclipse from these helpful spring examples (Import Getting Started Content). It is called ""gs-accessing-data-rest-complete""</p>

<p>Reference and full Code can be found: <a href=""https://github.com/spring-guides/gs-accessing-data-rest/tree/master/complete/src/main/java/hello"" rel=""nofollow"">spring-guides/gs-accessing-data-rest</a></p>

<p>When leaving the example unchanged, except using <strong>WAR</strong> instead of <strong>JAR</strong> packaging, everything works well. When calling <code>$ curl http://localhost:8080/</code>, I'll get an exposure of usable resources.</p>

<pre><code>$ curl http://localhost:8080/
{
  ""_links"" : {
    ""people"" : {
      ""href"" : ""http://localhost:8080/name{?page,size,sort}"",
      ""templated"" : true
    },
""profile"" : {
  ""href"" : ""http://localhost:8080/alps""
    }
  }
</code></pre>

<p>But when moving the <code>PersonRepository</code> into another package, e.g. <code>myRepos</code> via Eclipse's Refactor-->Move command, a resource is not accessible anymore.</p>

<p>The response from curl is then:</p>

<pre><code>$ curl http://localhost:8080/
{
  ""_links"" : {
    ""profile"" : {
      ""href"" : ""http://localhost:8080/alps""
    }
  }
}
</code></pre>

<p>As far as I understood, Spring scans for Repositories automatically. Because the main class uses <a href=""http://docs.spring.io/spring-boot/docs/1.2.2.RELEASE/reference/htmlsingle/#using-boot-using-springbootapplication-annotation"" rel=""nofollow""><code>@SpringBootApplication</code></a> annotation, everything should be found by spring itself. </p>

<p>What am I missing? Do I have to add some special XML configuration file or add another Configuration Class somewhere? Or do I have to update application.properties in order to sth.? </p>

<p>Perhaps somebody has some useful experiences, she or he might share with me. Thank you.</p>
",674442,,18122,,2015-03-28 11:41:01,2015-03-28 11:41:01,Why are my Spring Data repositories not found if moved into another package of a Spring Boot application?,<spring-boot><spring-data>,1,0,,,
Spring,29831953,1,29836337,82,4/23/2015 23:48:22,0,,4/23/2015 18:50:19,,7,19117,"<p>This is an extension to my previous question <a href=""https://stackoverflow.com/questions/29782148/why-do-i-need-main-method-if-i-develop-web-app-as-war-using-spring-boot"">here</a> at SO. As per this post, main method is NOT required to generate a <code>deployable war</code></p>

<p>I am trying to generate a <code>deployable war</code> for this simple application of <a href=""https://spring.io/guides/gs/uploading-files/"" rel=""nofollow noreferrer"">uploading files</a>. The source code can be for this example application can be found <a href=""https://github.com/spring-guides/gs-uploading-files/tree/master/complete"" rel=""nofollow noreferrer"">here</a>.</p>

<p>Following the instructions from spring boot for jar to war conversion, I changed my <code>pom.xml</code> to reflect the following. (Just added <code>tomcat</code> dependency with scope <code>provided</code>).</p>

<p>Reference: <a href=""http://docs.spring.io/spring-boot/docs/current/reference/htmlsingle/#build-tool-plugins-maven-packaging"" rel=""nofollow noreferrer"">http://docs.spring.io/spring-boot/docs/current/reference/htmlsingle/#build-tool-plugins-maven-packaging</a></p>

<pre><code>      &lt;?xml version=""1.0"" encoding=""UTF-8""?&gt;
&lt;project xmlns=""http://maven.apache.org/POM/4.0.0"" xmlns:xsi=""http://www.w3.org/2001/XMLSchema-instance""
    xsi:schemaLocation=""http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd""&gt;
    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;

    &lt;groupId&gt;org.springframework&lt;/groupId&gt;
    &lt;artifactId&gt;gs-uploading-files&lt;/artifactId&gt;
    &lt;version&gt;0.1.0&lt;/version&gt;
    &lt;packaging&gt;war&lt;/packaging&gt;

    &lt;parent&gt;
        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
        &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;
        &lt;version&gt;1.2.3.RELEASE&lt;/version&gt;
    &lt;/parent&gt;


    &lt;build&gt;
        &lt;plugins&gt;
            &lt;plugin&gt;
                &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
                &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;
            &lt;/plugin&gt;
        &lt;/plugins&gt;
    &lt;/build&gt;

    &lt;dependencies&gt;
        &lt;dependency&gt;
            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
            &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;
        &lt;/dependency&gt;

        &lt;dependency&gt;
            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
            &lt;artifactId&gt;spring-boot-starter-tomcat&lt;/artifactId&gt;
            &lt;scope&gt;provided&lt;/scope&gt;
        &lt;/dependency&gt;

    &lt;/dependencies&gt;

    &lt;properties&gt;
        &lt;java.version&gt;1.7&lt;/java.version&gt;
    &lt;/properties&gt;

    &lt;repositories&gt;
        &lt;repository&gt;
            &lt;id&gt;spring-releases&lt;/id&gt;
            &lt;name&gt;Spring Releases&lt;/name&gt;
            &lt;url&gt;https://repo.spring.io/libs-release&lt;/url&gt;
        &lt;/repository&gt;
    &lt;/repositories&gt;
    &lt;pluginRepositories&gt;
        &lt;pluginRepository&gt;
            &lt;id&gt;spring-releases&lt;/id&gt;
            &lt;name&gt;Spring Releases&lt;/name&gt;
            &lt;url&gt;https://repo.spring.io/libs-release&lt;/url&gt;
        &lt;/pluginRepository&gt;
    &lt;/pluginRepositories&gt;
&lt;/project&gt;
</code></pre>

<p>Then I changed <code>Application.java</code> as follows</p>

<p>Reference: <a href=""http://docs.spring.io/spring-boot/docs/current/reference/htmlsingle/#howto-create-a-deployable-war-file"" rel=""nofollow noreferrer"">http://docs.spring.io/spring-boot/docs/current/reference/htmlsingle/#howto-create-a-deployable-war-file</a></p>

<pre><code>@SpringBootApplication
public class Application extends SpringBootServletInitializer{

    @Override
    protected SpringApplicationBuilder configure(SpringApplicationBuilder application) {
        return application.sources(Application.class);
    }

    /*public static void main(String[] args) {
        SpringApplication.run(Application.class, args);
    } */
} 
</code></pre>

<p>I tried two scenarios. both fail with the following error (<code>Unable to find main class</code>).</p>

<ol>
<li>No main method (NOTE I have commented out main method above)</li>
<li>No application.Java file (commented out everything from this file - not shown here)</li>
</ol>

<p>Error:</p>

<pre><code>[INFO] BUILD FAILURE
[INFO] ------------------------------------------------------------------------
[INFO] Total time: 9.218s
[INFO] Finished at: Thu Apr 23 11:46:24 PDT 2015
[INFO] Final Memory: 22M/222M
[INFO] ------------------------------------------------------------------------
[ERROR] Failed to execute goal org.springframework.boot:spring-boot-maven-plugin:1.2.3.RELEASE:repackage (default) on project gs-uploading-files: Execution default of goal org.springframework.boot:spring-boot-maven-plugin:1.2.3.RELEASE:repackage failed: Unable to find main class -&gt; [Help 1]
[ERROR]
[ERROR] To see the full stack trace of the errors, re-run Maven with the -e switch.
[ERROR] Re-run Maven using the -X switch to enable full debug logging.
[ERROR]
[ERROR] For more information about the errors and possible solutions, please read the following articles:
[ERROR] [Help 1] http://cwiki.apache.org/confluence/display/MAVEN/PluginExecutionException
</code></pre>

<p><strong>PS: when I have main method intact, the build is successful</strong></p>
",1988876,,-1,,2017-05-23 12:17:02,2016-04-14 1:34:00,maven build failing when generating war package for spring boot application?,<spring><maven><tomcat><spring-boot>,2,5,6,,
Spring,29831374,1,29842701,83,4/24/2015 8:44:26,1,,4/23/2015 18:17:40,,1,700,"<p>I'm using spring-boot and spring-boot-yarn to submit yarn applications to a cluster.</p>

<p>My use-case is close to the one described in this tutorial <a href=""https://github.com/spring-guides/gs-yarn-basic"" rel=""nofollow"">https://github.com/spring-guides/gs-yarn-basic</a>.</p>

<p>The only difference is that my 'client' is supposed to be a web application and submit the yarn jobs when web requests are made.</p>

<p>The problem I have is that web requests to the 'client' web-application provide parameters I need to pass down to the yarn job.</p>

<p>In the above tutorial parameters are passed as command line arguments to to the appmaster / container specified in application.yml. In my case this approach does not work since I have a different set of parameters for each yarn job.</p>

<p>Is there a way to pass dynamic parameters to yarn jobs without hard-coding them in application.yml?</p>
",4825538,,4825538,,2015-04-23 18:31:08,2015-04-24 8:44:26,how to pass parameters from web requests to spring boot yarn application,<hadoop><spring-boot><yarn><spring-data-hadoop>,1,0,,,
Spring,31730050,1,31760587,84,8/1/2015 9:59:49,2,,7/30/2015 17:10:01,,5,1038,"<p>We've noticed in our that SOAP web-services seem to run faster when run as</p>

<pre><code>spring-boot:run
</code></pre>

<p>as opposed to packaging up the JAR as we do for deployment and running</p>

<pre><code>java -jar mySpringApp.jar
</code></pre>

<p>The speed up is in the order of 2-3x so obviously we would like this for our live environment.</p>

<p>To validate that this wasn't something in our app I've tried this with the sample app from the <a href=""https://spring.io/guides/gs/producing-web-service/"" rel=""noreferrer"">spring guide</a></p>

<p>git source <a href=""https://github.com/spring-guides/gs-soap-service.git"" rel=""noreferrer"">https://github.com/spring-guides/gs-soap-service.git</a></p>

<p>Testing this with JMeter shows the same sort of speed up.  I've tested this on both Windows 7 Java 1.8.0_31 and Ubuntu 14.04 platforms with 1.8.0_45-b14.</p>

<p>This only seems to be the case for soap services, simple html doesn't show any significant difference in performance.  Any idea what could be causing this?</p>
",3702362,,3702362,,2015-07-31 8:21:54,2015-08-01 9:59:49,spring-boot-starter-ws performance when run as jar,<spring><maven><soap><spring-boot><spring-ws>,1,4,2,,
Spring,34525587,1,34560982,85,1/1/2016 23:11:40,2,,12/30/2015 8:21:10,,7,4791,"<p>I must prepare a webservice to accept anan already defined wsdl structure. I followed the tutorial <a href=""https://spring.io/guides/gs/producing-web-service/"" rel=""noreferrer"">found here</a>, with source code for the test project <a href=""https://github.com/spring-guides/gs-producing-web-service/archive/master.zip"" rel=""noreferrer"">downloadable here</a>.</p>

<p>For xsd like this:</p>

<pre><code>&lt;xs:element name=""getCountryRequest""&gt;
    &lt;xs:complexType&gt;
        &lt;xs:sequence&gt;
            &lt;xs:element name=""name"" type=""xs:string""/&gt;
        &lt;/xs:sequence&gt;
    &lt;/xs:complexType&gt;
&lt;/xs:element&gt;
</code></pre>

<p>Wsdl operation for request returned by application is OK, looks like this:</p>

<pre><code>&lt;wsdl:binding name=""CountriesPortSoap11"" type=""tns:CountriesPort""&gt;
    &lt;soap:binding style=""document"" transport=""http://schemas.xmlsoap.org/soap/http""/&gt;
    &lt;wsdl:operation name=""getCountry""&gt;
        &lt;soap:operation soapAction=""""/&gt;
        &lt;wsdl:input name=""getCountryRequest""&gt;
            &lt;soap:body use=""literal""/&gt;
        &lt;/wsdl:input&gt;
        &lt;wsdl:output name=""getCountryResponse""&gt;
            &lt;soap:body use=""literal""/&gt;
        &lt;/wsdl:output&gt;
    &lt;/wsdl:operation&gt;
&lt;/wsdl:binding&gt;
</code></pre>

<p>But when I change the xsd to (no 'Request' in element name):</p>

<pre><code>&lt;xs:element name=""getCountry""&gt;
    &lt;xs:complexType&gt;
        &lt;xs:sequence&gt;
            &lt;xs:element name=""name"" type=""xs:string""/&gt;
        &lt;/xs:sequence&gt;
    &lt;/xs:complexType&gt;
&lt;/xs:element&gt;
</code></pre>

<p>the wsdl is invalid, and has no <code>&lt;input&gt;</code> specified:</p>

<pre><code>&lt;wsdl:binding name=""CountriesPortSoap11"" type=""tns:CountriesPort""&gt;
    &lt;soap:binding style=""document"" transport=""http://schemas.xmlsoap.org/soap/http""/&gt;
    &lt;wsdl:operation name=""getCountry""&gt;
        &lt;soap:operation soapAction=""""/&gt;
        &lt;wsdl:output name=""getCountryResponse""&gt;
            &lt;soap:body use=""literal""/&gt;
        &lt;/wsdl:output&gt;
    &lt;/wsdl:operation&gt;
&lt;/wsdl:binding&gt;
</code></pre>

<p>How can I fix that? How can I make a <code>Request</code>-less element appear properly as soap operation input in wsdl?</p>
",1961634,,1961634,,2015-12-30 8:28:23,2016-11-25 8:22:56,Invalid wsdl generated by spring-ws when the request element doesn't end with 'Request',<java><web-services><wsdl><cxf><spring-ws>,3,1,1,,
Spring,34512248,1,34576917,86,1/3/2016 13:14:56,5,,12/29/2015 13:37:15,,7,1291,"<p>I'm trying to use Facebook sign in as described in 
<a href=""https://github.com/spring-guides/gs-accessing-facebook"" rel=""noreferrer"">https://github.com/spring-guides/gs-accessing-facebook</a></p>

<p>When I'm trying to create JdbcUsersConnectionRepository, I need spring security in class path.
And when I add spring security I receive</p>

<pre><code>""java.lang.IllegalStateException: Unable to get a ConnectionRepository: no user signed in""
</code></pre>

<p>when trying to receive Connection</p>

<pre><code>Connection&lt;Facebook&gt; connection = connectionRepository.findPrimaryConnection(Facebook.class);
</code></pre>

<p>or checking</p>

<pre><code>if (!facebook.isAuthorized())
</code></pre>

<p>All this happens only when spring security is in the class path</p>
",20391,,,,,2016-10-31 12:55:47,"Spring Social: ""Unable to get a ConnectionRepository: no user signed in""",<spring><facebook><spring-security><spring-social><spring-social-facebook>,2,0,,,
Spring,34606760,1,34619077,87,1/5/2016 18:45:43,0,,1/5/2016 8:01:04,,8,14125,"<p>Given a Spring Boot + Thymeleaf web application (this is nearly identical to the Spring project's <a href=""https://github.com/spring-guides/gs-securing-web/tree/master/initial"" rel=""noreferrer"">gs-consuming-rest ""initial"" code tree</a>):</p>

<pre class=""lang-none prettyprint-override""><code>â”œâ”€â”€ pom.xml
â””â”€â”€ src
    â”œâ”€â”€ main
    â”‚Â Â  â”œâ”€â”€ java
    â”‚Â Â  â”‚Â Â  â””â”€â”€ hello
    â”‚Â Â  â”‚Â Â      â”œâ”€â”€ Application.java
    â”‚Â Â  â”‚Â Â      â”œâ”€â”€ Config.java
    â”‚Â Â  â”‚Â Â      â””â”€â”€ Controller.java
    â”‚Â Â  â””â”€â”€ resources
    â”‚Â Â      â””â”€â”€ templates
    â”‚Â Â          â””â”€â”€ index.html
    â””â”€â”€ test
        â””â”€â”€ java
            â””â”€â”€ hello
                â””â”€â”€ ControllerTest.java
</code></pre>

<p>...the user is greeted just fine with ""Hello World!"" at <code>http://localhost:8080/</code>, but the wiring of Spring's ""context"" does not seem to apply within the integration test (<code>ControllerTest.java</code>):</p>

<pre class=""lang-none prettyprint-override""><code>java.lang.AssertionError: Status 
Expected :200
Actual   :404
</code></pre>

<p>What is wrong with the <strong>project layout</strong>, and/or the <strong>configuration annotations</strong> in the test?</p>

<p><em><code>src/main/webapp/</code> is intentionally missing, along with things like <code>web.xml</code> and <code>WEB-INF/</code>.  The goal here is to use minimal configuration, with an integration test to test-drive the development of the view and controller of the application.</em></p>

<p>Gory details below.  Sorry in advance for the ""wall of text.""</p>

<hr>

<h3>pom.xml</h3>

<pre class=""lang-xml prettyprint-override""><code>&lt;parent&gt;
    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
    &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;
    &lt;version&gt;1.3.1.RELEASE&lt;/version&gt;
&lt;/parent&gt;

&lt;dependencies&gt;
    &lt;dependency&gt;
        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
        &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;
    &lt;/dependency&gt;
    &lt;dependency&gt;
        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
        &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;
    &lt;/dependency&gt;
    &lt;dependency&gt;
        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
        &lt;artifactId&gt;spring-boot-starter-thymeleaf&lt;/artifactId&gt;
    &lt;/dependency&gt;
&lt;/dependencies&gt;
</code></pre>

<h3>Application.java</h3>

<pre class=""lang-java prettyprint-override""><code>package hello;

// ...

@SpringBootApplication
public class Application {

  public static void main(String[] args) throws Throwable {
    SpringApplication.run(Application.class, args);
  }
}
</code></pre>

<h3>Controller.java</h3>

<pre class=""lang-java prettyprint-override""><code>package hello;

@org.springframework.stereotype.Controller
public class Controller {
}
</code></pre>

<h3>Config.java</h3>

<pre class=""lang-java prettyprint-override""><code>package hello;

// ...

@Configuration
public class Config extends WebMvcConfigurerAdapter {

  @Override
  public void addViewControllers(ViewControllerRegistry registry) {
    registry.addViewController(""/"").setViewName(""index"");
  }
}
</code></pre>

<h3>ControllerTest.java</h3>

<pre class=""lang-java prettyprint-override""><code>package hello;

// ...

@RunWith(SpringJUnit4ClassRunner.class)
@WebAppConfiguration
@ContextConfiguration(classes = Config.class)
public class ControllerTest {

  @Autowired
  private WebApplicationContext wac;

  private MockMvc mockMvc;

  @Before
  public void setup() {
    mockMvc = MockMvcBuilders.webAppContextSetup(wac).build();
  }

  @Test
  public void test() throws Exception {
    this.mockMvc
        .perform(get(""/""))
        .andExpect(status().isOk());
  }
}
</code></pre>

<h3>index.html</h3>

<pre class=""lang-html prettyprint-override""><code>&lt;!DOCTYPE html&gt;
&lt;html&gt;
  &lt;head&gt;
    &lt;title&gt;Hello World!&lt;/title&gt;
  &lt;/head&gt;
  &lt;body&gt;
    &lt;p&gt;Hello world!&lt;/p&gt;
  &lt;/body&gt;
&lt;/html&gt;
</code></pre>
",1265245,,1265245,,2016-01-07 19:18:48,2017-09-21 19:24:50,@WebAppConfiguration and @ContextConfiguration for Spring Boot + Thymeleaf,<java><spring><spring-boot><integration-testing><thymeleaf>,2,2,2,,
Spring,35076591,1,35076775,88,1/29/2016 4:15:41,0,,1/29/2016 3:55:30,,2,3977,"<p>I'm completely new to Spring &amp; not very experienced in Java admittedly. I am trying to go through the <a href=""http://spring.io/guides/tutorials/bookmarks/"" rel=""nofollow"">Building REST services with Spring</a> tutorial on the spring.io website. I came across the following code segment and I'm confused as to what it actually does.</p>

<pre><code>@Configuration
@ComponentScan
@EnableAutoConfiguration
public class Application {

    @Bean
    CommandLineRunner init(AccountRepository accountRepository,
            BookmarkRepository bookmarkRepository) {
        return (evt) -&gt; Arrays.asList(
                ""jhoeller,dsyer,pwebb,ogierke,rwinch,mfisher,mpollack,jlong"".split("",""))
                .forEach(
                        a -&gt; {
                            Account account = accountRepository.save(new Account(a,
                                    ""password""));
                            bookmarkRepository.save(new Bookmark(account,
                                    ""http://bookmark.com/1/"" + a, ""A description""));
                            bookmarkRepository.save(new Bookmark(account,
                                    ""http://bookmark.com/2/"" + a, ""A description""));
                        });
    }

    public static void main(String[] args) {
        SpringApplication.run(Application.class, args);
    }
}
</code></pre>

<p>I looked up CommandLineRunner on Spring Boot docs, and it says it's an interface that gets implemented if you want to execute some code when the application starts. But to my limited knowledge, CommandLineRunner is not getting implemented by anything in the above code segment. Also, I have no clue where the init() method came from or what it really is.</p>

<p>Additionally, I downloaded the complete code from their <a href=""https://github.com/spring-guides/tut-bookmarks.git"" rel=""nofollow"">github repo</a> but I'm not quite sure how to actually run it. I read earlier today that <code>SpringApplication.run()</code> makes it so that you don't have to deploy anything to an external service like Tomcat. But when I tried <code>java -jar ./jarFileName</code> for the Application class (seemed like a natural choice since it had main() ), it gave an error.</p>

<p>Any help would be appreciated.</p>
",1993941,,,,,2016-01-29 4:15:41,What does CommandLineRunner do in this case?,<java><spring><spring-boot>,1,0,1,,
Spring,35584271,1,35585108,89,2/23/2016 18:14:22,0,,2/23/2016 17:30:51,,6,12422,"<p>I'm trying to use auditing to save <code>dateCreated</code> and <code>dateUpdated</code> in my objects, but since I set <code>ID</code> manually, there's some additional work.</p>

<p>Following Oliver Gierke's suggestion in <a href=""https://jira.spring.io/browse/DATAMONGO-946"" rel=""noreferrer"">DATAMONGO-946</a>
I'm trying to figure out how to correctly implement it.</p>

<p>As original poster in Jira task above, I've downloaded example from here <a href=""https://github.com/spring-guides/gs-accessing-data-mongodb.git"" rel=""noreferrer"">https://github.com/spring-guides/gs-accessing-data-mongodb.git</a> and modified it a bit:</p>

<pre><code>package hello;

import org.springframework.data.annotation.CreatedDate;
import org.springframework.data.annotation.Id;
import org.springframework.data.annotation.LastModifiedDate;
import org.springframework.data.domain.Persistable;

import java.util.Date;

public class Customer implements Persistable&lt;String&gt; {
    @Id
    private String id;
    @CreatedDate
    private Date createdDate;
    @LastModifiedDate
    private Date lastModifiedDate;
    private String firstName;
    private String lastName;
    private boolean persisted;

    public Customer() {
    }

    public Customer(String firstName, String lastName) {
        this.firstName = firstName;
        this.lastName = lastName;
    }

    public void setPersisted(boolean persisted) {
        this.persisted = persisted;
    }

    @Override
    public String getId() {
        return id;
    }

    public void setId(String id) {
        this.id = id;
    }

    @Override
    public boolean isNew() {
        return !persisted;
    }

    @Override
    public String toString() {
        return String.format(
                ""Customer[id=%s, createdDate=%s, lastModifiedDate=%s, firstName='%s', lastName='%s']"",
                id, createdDate, lastModifiedDate, firstName, lastName);
    }
}
</code></pre>

<p>and</p>

<pre><code>package hello;

import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.boot.CommandLineRunner;
import org.springframework.boot.SpringApplication;
import org.springframework.boot.autoconfigure.SpringBootApplication;
import org.springframework.data.mongodb.config.EnableMongoAuditing;

@SpringBootApplication
@EnableMongoAuditing
public class Application implements CommandLineRunner {

    @Autowired
    private CustomerRepository repository;

    public static void main(String[] args) {
        SpringApplication.run(Application.class, args);
    }

    @Override
    public void run(String... args) throws Exception {

        repository.deleteAll();

        // create a customer
        Customer c = new Customer(""Alice"", ""Smith"");
        c.setId(""test_id"");

        // save a customer
        repository.save(c);

        // fetch all customers
        System.out.println(""Customers found with findAll():"");
        System.out.println(""-------------------------------"");
        for (Customer customer : repository.findAll()) {
            System.out.println(customer);
        }
        System.out.println();

        // create another customer with same id
        c = new Customer(""Bob"", ""Smith"");
        c.setId(""test_id"");
        c.setPersisted(true);
        repository.save(c);

        // fetch all customers
        System.out.println(""Customers found with findAll():"");
        System.out.println(""-------------------------------"");
        for (Customer customer : repository.findAll()) {
            System.out.println(customer);
        }
        System.out.println();
    }
}
</code></pre>

<p>and a result of execution is this:</p>

<pre><code>Customers found with findAll():
-------------------------------
Customer[id=test_id, createdDate=Wed Feb 24 00:43:47 WITA 2016, lastModifiedDate=Wed Feb 24 00:43:47 WITA 2016, firstName='Alice', lastName='Smith']

Customers found with findAll():
-------------------------------
Customer[id=test_id, createdDate=null, lastModifiedDate=Wed Feb 24 00:43:47 WITA 2016, firstName='Bob', lastName='Smith']
</code></pre>

<p><code>createdDate</code> becomes <code>null</code> after object update.</p>

<p>What am I missing here? And how to correctly implement <code>Persistable</code> to make auditing work properly?</p>
",1757278,,,,,2018-12-09 20:05:25,"Spring Data MongoDB Annotation @CreatedDate isn't working, when ID is assigned manually",<java><spring><mongodb><spring-data><spring-data-mongodb>,1,0,3,,
Spring,35195982,1,35603281,90,2/24/2016 13:16:00,20,,2/4/2016 8:28:51,,1,1196,"<p>I have used <a href=""https://spring.io/guides/gs/scheduling-tasks/"" rel=""nofollow"">this tutorial</a> and <a href=""https://github.com/spring-guides/gs-scheduling-tasks.git"" rel=""nofollow"">it's github project</a> as a base for this SSCCE.</p>

<p>For unknown reason, methods marked as <code>@Async</code> ran from a <code>@Scheduled</code> method always execute synchronously.</p>

<p>I am looking for a fix or workaround to make the code from <code>performTask()</code> run asynchonously.</p>

<p>The classes below:</p>

<p>Application.java</p>

<pre><code>@SpringBootApplication
@EnableScheduling
@EnableAsync
public class Application implements AsyncConfigurer{

    public static void main(String[] args) throws Exception {
        SpringApplication.run(Application.class);
    }

    @Override
    @Bean(name=""asyncExecutor"")
    public Executor getAsyncExecutor() {
        ThreadPoolTaskExecutor exec = new ThreadPoolTaskExecutor();
        exec.setMaxPoolSize(Runtime.getRuntime().availableProcessors()*2);
        exec.setThreadGroupName(""MyCustomExecutor"");
        exec.setWaitForTasksToCompleteOnShutdown(true);
        exec.setBeanName(""asyncExecutor"");
        exec.initialize();
        return exec;
    }

    @Override
    public AsyncUncaughtExceptionHandler getAsyncUncaughtExceptionHandler() {
        return new SimpleAsyncUncaughtExceptionHandler();
    }
}
</code></pre>

<p>MyAsyncService.java</p>

<pre><code>@Service
public class MyAsyncService {

    static AtomicInteger taskNoCounter = new AtomicInteger();

    public MyAsyncService() {
    }

    @Async(""asyncExecutor"")
    public void performTask() {
        int delayMs = (int) (System.currentTimeMillis()%1000+1000);
        int taskNo = taskNoCounter.incrementAndGet();
        String taskInfo = ""MyAsyncTask [taskNo="" + taskNo + "", delayMs="" + delayMs + "", threadId=""+Thread.currentThread().getId()+""]"";
        System.out.println(""+ start "" +taskInfo);
        try {
            Thread.sleep(delayMs);
        } catch (InterruptedException e) {
            // empty on purpose
        }
        System.out.println(""- end   "" +taskInfo);
    }

}
</code></pre>

<p>ScheduledTasks.java</p>

<pre><code>@Component
public class ScheduledTasks {

    @Autowired
    MyAsyncService service;

    @Scheduled(fixedRate = 1000)
    public void reportCurrentTime() {
        for (int i=0; i&lt;20; i++) {
            service.performTask();
        }

    }
}
</code></pre>

<p>Produce the following synchronouse result:</p>

<pre><code>+ start MyAsyncTask [taskNo=1, delayMs=1874, threadId=16]
- end   MyAsyncTask [taskNo=1, delayMs=1874, threadId=16]
+ start MyAsyncTask [taskNo=2, delayMs=1749, threadId=16]
- end   MyAsyncTask [taskNo=2, delayMs=1749, threadId=16]
+ start MyAsyncTask [taskNo=3, delayMs=1498, threadId=16]
- end   MyAsyncTask [taskNo=3, delayMs=1498, threadId=16]
+ start MyAsyncTask [taskNo=4, delayMs=1997, threadId=16]
- end   MyAsyncTask [taskNo=4, delayMs=1997, threadId=16]
+ start MyAsyncTask [taskNo=5, delayMs=1994, threadId=16]
</code></pre>
",1961634,,,,,2016-02-24 13:16:00,Spring-boot @Async not running with @Scheduled,<java><spring><spring-boot><spring-scheduled><spring-async>,1,3,1,,
Spring,35709341,1,35709541,91,2/29/2016 21:00:28,0,,2/29/2016 20:49:05,,2,1549,"<p>As someone who is new to Java and Spring, I've been working through their REST API tutorials. A general workflow is introduced where you embed Jetty/Tomcat and then run an executable Jar file. This workflow appears to change when the <a href=""https://spring.io/guides/tutorials/bookmarks/"" rel=""nofollow"">Building REST Services with Spring</a> tutorial is introduced. Their <a href=""https://github.com/spring-guides/tut-bookmarks"" rel=""nofollow"">bookmarks demo project</a> uses a multi-module maven configuration. There doesn't appear to be a main manifest attribute defined anywhere. </p>

<p>The Maven configuration currently generates a separate jar for each module. </p>

<p>The ideal goal would be to take the bookmarks demo project, add <a href=""http://swagger.io/"" rel=""nofollow"">Swagger</a> to it, and loop in <a href=""https://www.docker.com/"" rel=""nofollow"">Docker</a>. The realistic goal is to get the project running using Jetty or Tomcat. </p>

<p>Do you know how I could deploy the <a href=""https://github.com/spring-guides/tut-bookmarks"" rel=""nofollow"">Spring Bookmarks Demo</a> using Jetty or Tomcat? Thank you for your time.</p>
",1965146,,1965146,,2016-02-29 21:41:23,2016-02-29 21:41:23,"How do you deploy the ""Building REST Services with Spring"" tutorial?",<java><spring><rest><maven><spring-boot>,2,0,,,
Spring,36433556,1,36433803,92,4/5/2016 18:04:49,0,,4/5/2016 17:52:21,,1,43,"<p>I am learning basic Spring by following this <a href=""https://spring.io/guides/gs/rest-service/"" rel=""nofollow noreferrer"">tutorial</a>. 
I run this command to clone the demo basic project:</p>

<pre><code>git clone https://github.com/spring-guides/gs-rest-service.git
</code></pre>

<p>Then I use intelliJ to import the cloned Gradle project. 
However, it always downloading things from Internet, and sometime pop up alert says xxx is not found. </p>

<p><a href=""https://i.stack.imgur.com/tcKav.png"" rel=""nofollow noreferrer""><img src=""https://i.stack.imgur.com/tcKav.png"" alt=""enter image description here""></a></p>

<p>My question is what is it doing exactly? who and where I tell the code to download things?</p>

<p>It is really confusing to me because I couldn't figure out what is going on.  </p>
",887103,,,,,2016-04-05 18:04:49,Why my gradle project always downloading 200MB data from Internet?,<spring><gradle>,1,0,,,
Spring,36581834,1,36586730,93,4/13/2016 1:01:59,1,,4/12/2016 19:00:42,,1,602,"<p>I have been doing a line by line study of the code in <a href=""https://github.com/spring-guides/tut-spring-security-and-angular-js/tree/master/oauth2"" rel=""nofollow"">this spring cloud app on github</a> after downloading and installing it on my devbox.  When you type <code>http://localhost:8080</code> in your web browser, the content from the <code>ui</code> app loads, and is able to interact with the content from the <code>authserver</code> and <code>resource</code> apps.  </p>

<p><code>Port 9999</code> is defined for the <code>authserver</code> app, both in the <code>ui</code> app's <code>zuul route</code> definitions, and also in the <code>authserver</code> app's <code>application.properties</code>.  </p>

<p>Similarly, <code>port 9000</code> is defined for the <code>resource</code> app, both in the <code>ui</code> app's route definitions, and also in the <code>resource</code> app's <code>application.properties</code>.  </p>

<p>But I cannot find any reference to <code>port 8080</code>, even after reviewing every line of code in the three apps and also doing a <code>Ctrl-H</code> to do full text search of the entire eclipse workspace for the word <code>8080</code>.  </p>

<p><strong>So how does the <code>ui</code> app know to serve its client content on <code>port 8080</code>?</strong></p>
",807797,,,,,2016-04-13 6:35:42,where is port 8080 defined in spring cloud app?,<spring><spring-boot><spring-cloud><netflix-zuul>,3,1,,,
Spring,36655518,1,36665463,94,4/16/2016 14:34:42,1,,4/15/2016 19:36:19,,1,861,"<p>I am studying Spring OAuth2 by decomposing the set of <a href=""https://github.com/spring-guides/tut-spring-security-and-angular-js/tree/master/oauth2"" rel=""nofollow noreferrer"">three interconnected sample apps at this GitHub link</a>.  The apps work as intended on my devbox, but the <code>authserver</code> app produces an unwanted confirmation page that asks the user to confirm that they authorize the client at <code>localhost:8080/login</code> to receive their protected information. A screen shot of the confirmation page is as follows:  </p>

<p><img src=""https://s22.postimg.org/mwyq9xelt/Authorization_View.gif"" />  </p>

<p><strong>What specific changes need to be made to the <code>authserver</code> app's code to remove the confirmation step?</strong>  </p>

<p>I understand that the confirmation page could be useful in certain use cases.  But the confirmation page is not appropriate for the use case that I have in mind, so how can I disable this step?  </p>

<hr>

<p><strong>FIRST ATTEMPT:</strong>  </p>

<hr>

<p>I have located the view code for the authorization page in <a href=""https://github.com/spring-guides/tut-spring-security-and-angular-js/blob/master/oauth2/authserver/src/main/resources/templates/authorize.ftl"" rel=""nofollow noreferrer""><code>authorize.ftl</code>, which you can read by clicking on this link</a>.  But when I do <code>Ctrl-H</code> in an eclipse workspace and search for ""authorize.ftl"", no results show up.  Similarly, I reviewed the <a href=""http://projects.spring.io/spring-security-oauth/docs/oauth2.html#customizing-the-ui"" rel=""nofollow noreferrer"">Spring OAuth2 Developer Guide</a>.  Some mention in the guide is made of creating a separate <code>@RequestMappig(""/oauth/authorize"")</code>, but it did not seem clear how to disable this confirmation step.  </p>

<p>The code for the template <code>login</code> view is in <a href=""https://github.com/spring-guides/tut-spring-security-and-angular-js/blob/master/oauth2/authserver/src/main/resources/templates/login.ftl"" rel=""nofollow noreferrer""><code>login.ftl</code>, which you can read at this link</a>.  </p>

<p><strong>Is the solution to simply move the <code>login.ftl</code> code into a new <code>login.html</code> file, and then manage that view with <code>@RequestMappig(""/oauth/authorize"")</code>?</strong>   </p>

<p>If I interpret the working from the Developer Guide link above correctly, it seems to say that  </p>

<p>1.) an <code>@RequestMappig(""/oauth/authorize"")</code> method linked to GET would serve up the login view, then another <code>@RequestMappig(""/oauth/authorize"")</code>,  </p>

<p>2.) then another <code>@RequestMappig(""/oauth/authorize"")</code> method linked to POST would take the information from the view and bypass the confirmation step.  </p>

<p><strong>But what would this look like in code?</strong>  Here is a starting point, if I understand correctly:  </p>

<pre><code>`@RequestMappig(""/oauth/authorize"", method = RequestMethod.GET)`
public @ResponseBody SomeType method1Name(){
    SomeType st = new SomeType();
    //do some stuff to st
    return st;
}

`@RequestMappig(""/oauth/authorize"", method = RequestMethod.POST)`
public @ResponseBody SomeType method2Name(){
    SomeType st = new SomeType();
    //do other stuff to st
    return st;
}
</code></pre>

<p>What do I put in the methods?  And then were do I put the view code?  </p>

<p>The Developer Guide says to start with <a href=""https://github.com/spring-projects/spring-security-oauth/blob/master/spring-security-oauth2/src/main/java/org/springframework/security/oauth2/provider/endpoint/WhitelabelApprovalEndpoint.java"" rel=""nofollow noreferrer""><code>WhiteLabelApprovalEndpoint,java</code>, which you can read on GitHub at this link</a>.</p>
",807797,,-1,,2017-02-08 15:09:36,2016-04-16 14:34:42,disable confirmation page in Spring OAuth2,<spring><spring-mvc><spring-security><spring-boot><spring-oauth2>,1,2,1,,
Spring,36683434,1,36703486,95,4/18/2016 20:16:25,1,,4/17/2016 23:40:15,,4,10867,"<p><strong>How do I trigger auto-logout of <a href=""https://github.com/spring-guides/tut-spring-security-and-angular-js/tree/master/oauth2"" rel=""nofollow noreferrer"">this sample Spring Boot OAuth2 app</a>?</strong>  </p>

<p>I tried adding the following code from <a href=""https://stackoverflow.com/questions/21987589/spring-security-how-to-log-out-user-revoke-oauth2-token#32320860"">an answer to this other posting</a> into a new controller class in the <code>demo</code> package of the <a href=""https://github.com/spring-guides/tut-spring-security-and-angular-js/tree/master/oauth2/authserver"" rel=""nofollow noreferrer""><code>authserver</code> app</a>:  </p>

<pre><code>package demo;

import javax.servlet.http.HttpServletRequest;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.security.oauth2.common.OAuth2AccessToken;
import org.springframework.security.oauth2.provider.token.TokenStore;
import org.springframework.stereotype.Controller;
import org.springframework.web.bind.annotation.RequestMapping;
import org.springframework.web.bind.annotation.RequestMethod;
import org.springframework.web.bind.annotation.ResponseStatus;
import org.springframework.http.HttpStatus;

@Controller
public class OAuthController {
    @Autowired
    private TokenStore tokenStore;

    @RequestMapping(value = ""/oauth/revoke-token"", method = RequestMethod.GET)
    @ResponseStatus(HttpStatus.OK)
    public void logout(HttpServletRequest request) {
        String authHeader = request.getHeader(""Authorization"");
        if (authHeader != null) {
            String tokenValue = authHeader.replace(""Bearer"", """").trim();
            OAuth2AccessToken accessToken = tokenStore.readAccessToken(tokenValue);
            tokenStore.removeAccessToken(accessToken);
        }
    }
}  
</code></pre>

<p>But when I try to launch the app, the debug log gives the following error indicating that it cannot <code>autowire</code> the token store:  </p>

<pre><code>Caused by: org.springframework.beans.factory.BeanCreationException:  
Could not autowire field:  
private org.springframework.security.oauth2.provider.token.TokenStore  
demo.OAuthController.tokenStore; nested exception is  
org.springframework.beans.factory.NoSuchBeanDefinitionException:  
No qualifying bean of type [org.springframework.security.oauth2.provider.token.TokenStore] found for dependency: expected at least 1 bean which qualifies as autowire candidate for this dependency. Dependency annotations: {@org.springframework.beans.factory.annotation.Autowired(required=true)}
    at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredFieldElement.inject(AutowiredAnnotationBeanPostProcessor.java:573)
    at org.springframework.beans.factory.annotation.InjectionMetadata.inject(InjectionMetadata.java:88)
    at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor.postProcessPropertyValues(AutowiredAnnotationBeanPostProcessor.java:331)
    ... 23 more
Caused by: org.springframework.beans.factory.NoSuchBeanDefinitionException:  
No qualifying bean of type  
[org.springframework.security.oauth2.provider.token.TokenStore]  
found for dependency: expected at least 1 bean which qualifies as  
autowire candidate for this dependency. Dependency annotations:  
{@org.springframework.beans.factory.annotation.Autowired(required=true)}
    at org.springframework.beans.factory.support.DefaultListableBeanFactory.raiseNoSuchBeanDefinitionException(DefaultListableBeanFactory.java:1373)
    at org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:1119)
    at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:1014)
    at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredFieldElement.inject(AutowiredAnnotationBeanPostProcessor.java:545        )
    ... 25 more
</code></pre>

<p>When the compilation error is resolved, I intend to trigger the logout process from the following code which will be added to the <a href=""https://github.com/spring-guides/tut-spring-security-and-angular-js/blob/master/oauth2/ui/src/main/resources/static/js/hello.js"" rel=""nofollow noreferrer""><code>hello.js</code> controller of the <code>ui</code> app</a> in the github link above:  </p>

<pre><code>self.logout = function() {
    $http.post('http://localhost:9000/oauth/revoke-token', {}).finally(function() {
        $rootScope.authenticated = false;
        $location.path(""/"");
    });
}
</code></pre>

<p><strong>The full code of the sample app is at the github link above, so what specific changes do I need to make in order to successfully <code>autowire</code> the <code>token store</code> and auto-logout the user globally?</strong>  </p>

<hr>

<p><strong>ONGOING EFFORTS:</strong>  </p>

<hr>

<p>Per @ManoJ's suggestion, I changed the new controller class to become the following:  </p>

<pre><code>package demo;

import javax.servlet.http.HttpServletRequest;

import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.security.oauth2.common.OAuth2AccessToken;
import org.springframework.security.oauth2.provider.token.TokenStore;
import org.springframework.stereotype.Controller;
import org.springframework.web.bind.annotation.RequestMapping;
import org.springframework.web.bind.annotation.RequestMethod;
import org.springframework.web.bind.annotation.ResponseStatus;
import org.springframework.http.HttpStatus;

@Controller
public class OAuthController {

    private TokenStore tokenStore;

    @Autowired
    public OAuthController(TokenStore tokenStore) {
        this.tokenStore = tokenStore;
    }

    @RequestMapping(value = ""/oauth/revoke-token"", method = RequestMethod.GET)
    @ResponseStatus(HttpStatus.OK)
    public void logout(HttpServletRequest request) {
        String authHeader = request.getHeader(""Authorization"");
        if (authHeader != null) {
            String tokenValue = authHeader.replace(""Bearer"", """").trim();
            OAuth2AccessToken accessToken = tokenStore.readAccessToken(tokenValue);
            tokenStore.removeAccessToken(accessToken);
        }
    }
}
</code></pre>

<p>However, I am still getting a very similar error message when I try to launch the app at the terminal with <code>mvn spring-boot:run</code>, as follows:  </p>

<pre><code>java.lang.reflect.InvocationTargetException
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:497)
    at org.springframework.boot.maven.AbstractRunMojo$LaunchRunner.run(AbstractRunMojo.java:478)
    at java.lang.Thread.run(Thread.java:745)
Caused by: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'OAuthController' defined in file [/home/user/spring_boot_apps/security_tut_remodel/tut-spring-security-and-angular-js/oauth2/authserver/target/classes/demo/OAuthController.class]: Unsatisfied dependency expressed through constructor argument with index 0 of type [org.springframework.security.oauth2.provider.token.TokenStore]: No qualifying bean of type [org.springframework.security.oauth2.provider.token.TokenStore] found for dependency: expected at least 1 bean which qualifies as autowire candidate for this dependency. Dependency annotations: {}; nested exception is org.springframework.beans.factory.NoSuchBeanDefinitionException: No qualifying bean of type [org.springframework.security.oauth2.provider.token.TokenStore] found for dependency: expected at least 1 bean which qualifies as autowire candidate for this dependency. Dependency annotations: {}
    at org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:749)
    at org.springframework.beans.factory.support.ConstructorResolver.autowireConstructor(ConstructorResolver.java:185)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.autowireConstructor(AbstractAutowireCapableBeanFactory.java:1143)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1046)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:510)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:482)
    at org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:306)
    at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:230)
    at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:302)
    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:197)
    at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:772)
    at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:839)
    at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:538)
    at org.springframework.boot.context.embedded.EmbeddedWebApplicationContext.refresh(EmbeddedWebApplicationContext.java:118)
    at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:766)
    at org.springframework.boot.SpringApplication.createAndRefreshContext(SpringApplication.java:361)
    at org.springframework.boot.SpringApplication.run(SpringApplication.java:307)
    at org.springframework.boot.SpringApplication.run(SpringApplication.java:1191)
    at org.springframework.boot.SpringApplication.run(SpringApplication.java:1180)
    at demo.AuthserverApplication.main(AuthserverApplication.java:88)
    ... 6 more
Caused by: org.springframework.beans.factory.NoSuchBeanDefinitionException: No qualifying bean of type [org.springframework.security.oauth2.provider.token.TokenStore] found for dependency: expected at least 1 bean which qualifies as autowire candidate for this dependency. Dependency annotations: {}
    at org.springframework.beans.factory.support.DefaultListableBeanFactory.raiseNoSuchBeanDefinitionException(DefaultListableBeanFactory.java:1373)
    at org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:1119)
    at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:1014)
    at org.springframework.beans.factory.support.ConstructorResolver.resolveAutowiredArgument(ConstructorResolver.java:813)
    at org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:741)
    ... 25 more
[INFO] ------------------------------------------------------------------------
[INFO] BUILD FAILURE
[INFO] ------------------------------------------------------------------------
</code></pre>

<p><strong>Given that this class is the only addition to the sample app in the link in the first line of the <code>OP</code> above, all of the code for the entire app is available both online and on your own devbox with <code>git clone ...</code>.  So what else needs to change in order for autowire of the TokenStore to work properly?</strong></p>
",807797,,-1,,2017-05-23 11:54:22,2016-04-18 20:16:25,How to autowire this TokenStore,<spring><spring-security><spring-boot><autowired><spring-oauth2>,2,0,1,,
Spring,36899386,1,37018939,96,5/4/2016 5:10:27,7,,4/27/2016 19:38:36,,9,1266,"<p>Complete code for a Spring OAuth2 implementation of multi-factor authentication has been uploaded to <a href=""https://jumpshare.com/v/nal2OlUqVpMFzMgqeplw"" rel=""nofollow noreferrer"">a file sharing site that you can download by clicking on this link</a>. Instructions below explain how to use the link to recreate the current problem on any computer. <strong>A 500 point bounty is offered.</strong>  </p>

<p><hr/> 
<strong>THE CURRENT ERROR:</strong>  </p>

<hr/>  

<p>An error is being triggered when a user tries to authenticate using two factor authentication in <a href=""https://jumpshare.com/v/nal2OlUqVpMFzMgqeplw"" rel=""nofollow noreferrer"">the Spring Boot OAuth2 app from the link in the preceding paragraph</a>. The error is thrown at the point in the process when the app should serve up a second page asking the user for a pin code to confirm the user's identity.  </p>

<p><strong>Given that a null client is triggering this error, the problem seems to be how to connect a <code>ClientDetailsService</code> to a <code>Custom OAuth2RequestFactory</code> in Spring Boot OAuth2.</strong>  </p>

<p>The <a href=""https://jumpshare.com/v/8BMxbxWd2SsiVmS2Yl1I"" rel=""nofollow noreferrer"">entire debug log can be read at a file sharing site by clicking on this link</a>.  The complete stack trace in the logs contains only one reference to code that is actually in the app, and that line of code is:  </p>

<pre><code>AuthorizationRequest authorizationRequest =  
oAuth2RequestFactory.createAuthorizationRequest(paramsFromRequest(request));
</code></pre>

<p>The error thrown in the debug logs is:  </p>

<pre><code>org.springframework.security.oauth2.provider.NoSuchClientException:  
No client with requested id: null  
</code></pre>

<p><hr/>
<strong>CONTROL FLOW WHEN ERROR IS THROWN:</strong></p>

<hr/>  

<p>I created the following flowchart to illustrate the intended flow of multi-factor authentication requests in <a href=""https://stackoverflow.com/questions/30319666/two-factor-authentication-with-spring-security-oauth2#31425986"">@James' suggested implementation</a>:  </p>

<p><img src=""https://s32.postimg.org/5sahbqvrp/2_FA_OAuth_Flow.gif"">  </p>

<p>In the preceding flowchart, the current error is being thrown at some point between the <strong>Username &amp; Password View</strong> and the <strong>GET /secure/two_factor_authenticated</strong> steps.  </p>

<p><strong>The solution to this OP is limited in scope to the FIRST PASS that 1.) travels through the <code>/oauth/authorize</code> endpoint and then 2.) returns back to the <code>/oauth/authorize</code> endpoint via <code>TwoFactorAuthenticationController</code>.</strong>   </p>

<p>So we simply want to resolve the <code>NoSuchClientException</code> while also demonstrating that the client has been successfully granted <code>ROLE_TWO_FACTOR_AUTHENTICATED</code> in the <code>POST /secure/two_factor_authenticated</code>.  Given that the subsequent steps are boiler-plate, it is acceptable for the flow to demonstrably break in the <strong>SECOND PASS</strong> entry into <code>CustomOAuth2RequestFactory</code>, as long as the user enters the <strong>SECOND PASS</strong> with all the artifacts of successfully having completed the <strong>FIRST PASS</strong>.  The <strong>SECOND PASS</strong> can be a separate question as long as we successfully resolve the <strong>FIRST PASS</strong> here.  </p>

<p><hr/>
<strong>RELEVANT CODE EXCERPTS:</strong>  </p>

<hr/>  

<p>Here is the code for the <code>AuthorizationServerConfigurerAdapter</code>, where I attempt to set up the connection:  </p>

<pre><code>@Configuration
@EnableAuthorizationServer
protected static class OAuth2AuthorizationConfig extends AuthorizationServerConfigurerAdapter {

    @Autowired
    private AuthenticationManager authenticationManager;

    @Autowired//ADDED AS A TEST TO TRY TO HOOK UP THE CUSTOM REQUEST FACTORY
    private ClientDetailsService clientDetailsService;

    @Autowired//Added per: https://stackoverflow.com/questions/30319666/two-factor-authentication-with-spring-security-oauth2
    private CustomOAuth2RequestFactory customOAuth2RequestFactory;

    //THIS NEXT BEAN IS A TEST
    @Bean CustomOAuth2RequestFactory customOAuth2RequestFactory(){
        return new CustomOAuth2RequestFactory(clientDetailsService);
    }

    @Bean
    public JwtAccessTokenConverter jwtAccessTokenConverter() {
        JwtAccessTokenConverter converter = new JwtAccessTokenConverter();
        KeyPair keyPair = new KeyStoreKeyFactory(
                    new ClassPathResource(""keystore.jks""), ""foobar"".toCharArray()
                )
                .getKeyPair(""test"");
        converter.setKeyPair(keyPair);
        return converter;
    }

    @Override
    public void configure(ClientDetailsServiceConfigurer clients) throws Exception {
        clients.inMemory()
                .withClient(""acme"")//API: http://docs.spring.io/spring-security/oauth/apidocs/org/springframework/security/oauth2/config/annotation/builders/ClientDetailsServiceBuilder.ClientBuilder.html
                    .secret(""acmesecret"")
                    .authorizedGrantTypes(""authorization_code"", ""refresh_token"", ""password"")
                    .scopes(""openid"");
    }

    @Override
    public void configure(AuthorizationServerEndpointsConfigurer endpoints) throws Exception {
        endpoints//API: http://docs.spring.io/spring-security/oauth/apidocs/org/springframework/security/oauth2/config/annotation/web/configurers/AuthorizationServerEndpointsConfigurer.html
            .authenticationManager(authenticationManager)
            .accessTokenConverter(jwtAccessTokenConverter())
            .requestFactory(customOAuth2RequestFactory);//Added per: https://stackoverflow.com/questions/30319666/two-factor-authentication-with-spring-security-oauth2
    }

    @Override
    public void configure(AuthorizationServerSecurityConfigurer oauthServer) throws Exception {
        oauthServer//API: http://docs.spring.io/spring-security/oauth/apidocs/org/springframework/security/oauth2/config/annotation/web/configurers/AuthorizationServerSecurityConfigurer.html
            .tokenKeyAccess(""permitAll()"")
            .checkTokenAccess(""isAuthenticated()"");
    }

}
</code></pre>

<p>Here is the code for the <code>TwoFactorAuthenticationFilter</code>, which contains the code above that is triggering the error:  </p>

<pre><code>package demo;

import java.io.IOException;
import java.util.Collection;
import java.util.HashMap;
import java.util.Map;
import java.util.Map.Entry;

import javax.servlet.FilterChain;
import javax.servlet.ServletException;
import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;

import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.security.core.GrantedAuthority;
import org.springframework.security.core.context.SecurityContextHolder;
import org.springframework.security.oauth2.provider.AuthorizationRequest;
import org.springframework.security.oauth2.provider.ClientDetailsService;
import org.springframework.security.oauth2.provider.OAuth2RequestFactory;
import org.springframework.security.oauth2.provider.request.DefaultOAuth2RequestFactory;
import org.springframework.security.web.DefaultRedirectStrategy;
import org.springframework.security.web.RedirectStrategy;
import org.springframework.web.filter.OncePerRequestFilter;
import org.springframework.web.servlet.support.ServletUriComponentsBuilder;

//This class is added per: https://stackoverflow.com/questions/30319666/two-factor-authentication-with-spring-security-oauth2
/**
 * Stores the oauth authorizationRequest in the session so that it can
 * later be picked by the {@link com.example.CustomOAuth2RequestFactory}
 * to continue with the authoriztion flow.
 */
public class TwoFactorAuthenticationFilter extends OncePerRequestFilter {

    private RedirectStrategy redirectStrategy = new DefaultRedirectStrategy();
    private OAuth2RequestFactory oAuth2RequestFactory;
    //These next two are added as a test to avoid the compilation errors that happened when they were not defined.
    public static final String ROLE_TWO_FACTOR_AUTHENTICATED = ""ROLE_TWO_FACTOR_AUTHENTICATED"";
    public static final String ROLE_TWO_FACTOR_AUTHENTICATION_ENABLED = ""ROLE_TWO_FACTOR_AUTHENTICATION_ENABLED"";

    @Autowired
    public void setClientDetailsService(ClientDetailsService clientDetailsService) {
        oAuth2RequestFactory = new DefaultOAuth2RequestFactory(clientDetailsService);
    }

    private boolean twoFactorAuthenticationEnabled(Collection&lt;? extends GrantedAuthority&gt; authorities) {
        return authorities.stream().anyMatch(
            authority -&gt; ROLE_TWO_FACTOR_AUTHENTICATION_ENABLED.equals(authority.getAuthority())
    );
    }

    @Override
    protected void doFilterInternal(HttpServletRequest request, HttpServletResponse response, FilterChain filterChain)
            throws ServletException, IOException {
        // Check if the user hasn't done the two factor authentication.
        if (AuthenticationUtil.isAuthenticated() &amp;&amp; !AuthenticationUtil.hasAuthority(ROLE_TWO_FACTOR_AUTHENTICATED)) {
            AuthorizationRequest authorizationRequest = oAuth2RequestFactory.createAuthorizationRequest(paramsFromRequest(request));
            /* Check if the client's authorities (authorizationRequest.getAuthorities()) or the user's ones
               require two factor authenticatoin. */
            if (twoFactorAuthenticationEnabled(authorizationRequest.getAuthorities()) ||
                    twoFactorAuthenticationEnabled(SecurityContextHolder.getContext().getAuthentication().getAuthorities())) {
                // Save the authorizationRequest in the session. This allows the CustomOAuth2RequestFactory
                // to return this saved request to the AuthenticationEndpoint after the user successfully
                // did the two factor authentication.
               request.getSession().setAttribute(CustomOAuth2RequestFactory.SAVED_AUTHORIZATION_REQUEST_SESSION_ATTRIBUTE_NAME, authorizationRequest);

                // redirect the the page where the user needs to enter the two factor authentiation code
                redirectStrategy.sendRedirect(request, response,
                        ServletUriComponentsBuilder.fromCurrentContextPath()
                            .path(TwoFactorAuthenticationController.PATH)
                            .toUriString());
                return;
            }
        }

        filterChain.doFilter(request, response);
    }

    private Map&lt;String, String&gt; paramsFromRequest(HttpServletRequest request) {
        Map&lt;String, String&gt; params = new HashMap&lt;&gt;();
        for (Entry&lt;String, String[]&gt; entry : request.getParameterMap().entrySet()) {
            params.put(entry.getKey(), entry.getValue()[0]);
        }
        return params;
    }
} 
</code></pre>

<hr/>

<p><strong>RE-CREATING THE PROBLEM ON YOUR COMPUTER:</strong>  </p>

<hr/>  

<p>You can recreate the problem on any computer in only a few minutes by following these simple steps:  </p>

<p>1.) Download the <a href=""https://jumpshare.com/v/nal2OlUqVpMFzMgqeplw"" rel=""nofollow noreferrer"">zipped version of the app from a file sharing site by clicking on this link</a>.  </p>

<p>2.) Unzip the app by typing: <code>tar -zxvf oauth2.tar(1).gz</code>  </p>

<p>3.) launch the <code>authserver</code> app by navigating to <code>oauth2/authserver</code> and then typing <code>mvn spring-boot:run</code>.  </p>

<p>4.) launch the <code>resource</code> app by navigating to <code>oauth2/resource</code> and then typing <code>mvn spring-boot:run</code>  </p>

<p>5.) launch the <code>ui</code> app by navigating to <code>oauth2/ui</code> and then typing <code>mvn spring-boot:run</code>  </p>

<p>6.) Open a web browser and navigate to <code>http : // localhost : 8080</code>  </p>

<p>7.) Click <code>Login</code> and then enter <code>Frodo</code> as the user and <code>MyRing</code> as the password, and click to submit.  <strong>This will trigger the error shown above.</strong>  </p>

<p>You can view the complete source code by: </p>

<p>a.) importing the maven projects into your IDE, or by  </p>

<p>b.) navigating within the unzipped directories and opening with a text editor.  </p>

<p>Note:  The code in the file sharing link above is a combination of <a href=""https://github.com/spring-guides/tut-spring-security-and-angular-js/tree/master/oauth2"" rel=""nofollow noreferrer"">the Spring Boot OAuth2 GitHub sample at this link</a>, and the <a href=""https://stackoverflow.com/questions/30319666/two-factor-authentication-with-spring-security-oauth2#31425986"">suggestions for 2 Factor Authentication offered by @James at this link</a>.  The only changes to the Spring Boot GitHub sample have been in the <code>authserver</code> app, specifically in <a href=""https://github.com/spring-guides/tut-spring-security-and-angular-js/tree/master/oauth2/authserver/src/main"" rel=""nofollow noreferrer""><code>authserver/src/main/java</code></a> and in <a href=""https://github.com/spring-guides/tut-spring-security-and-angular-js/tree/master/oauth2/authserver/src/main"" rel=""nofollow noreferrer""><code>authserver/src/main/resources/templates</code></a>.  </p>

<p><hr/>
<strong>NARROWING THE PROBLEM:</strong><br>
<hr/><br>
Per @AbrahamGrief's suggestion, I added a <code>FilterConfigurationBean</code>, which resolved the <code>NoSuchClientException</code>.  But the OP asks how to complete the <strong>FIRST PASS</strong> through the control flow in the diagram for a <strong>500 point bounty</strong>.  </p>

<p>I then narrowed the problem by setting <code>ROLE_TWO_FACTOR_AUTHENTICATION_ENABLED</code> in <code>Users.loadUserByUername()</code> as follows:  </p>

<pre><code>@Override
public UserDetails loadUserByUsername(String username) throws UsernameNotFoundException {
    String password;
    List&lt;GrantedAuthority&gt; auth = AuthorityUtils.commaSeparatedStringToAuthorityList(""ROLE_USER"");
    if (username.equals(""Samwise"")) {//ROLE_TWO_FACTOR_AUTHENTICATION_ENABLED will need to come from the resource, NOT the user
        auth = AuthorityUtils.commaSeparatedStringToAuthorityList(""ROLE_HOBBIT, ROLE_TWO_FACTOR_AUTHENTICATION_ENABLED"");
        password = ""TheShire"";
    }
    else if (username.equals(""Frodo"")){//ROLE_TWO_FACTOR_AUTHENTICATION_ENABLED will need to come from the resource, NOT the user
        auth = AuthorityUtils.commaSeparatedStringToAuthorityList(""ROLE_HOBBIT, ROLE_TWO_FACTOR_AUTHENTICATION_ENABLED"");
        password = ""MyRing"";
    }
    else{throw new UsernameNotFoundException(""Username was not found. "");}
    return new org.springframework.security.core.userdetails.User(username, password, auth);
}
</code></pre>

<p>This eliminates the need to configure clients and resources, so that the current problem remains narrow.  However, the next roadblock is that Spring Security is rejecting the user's request for <code>/security/two_factor_authentication</code>.  <strong>What further changes need to be made to complete the FIRST PASS through the control flow, so that the <code>POST /secure/two_factor_authentication</code> can SYSO <code>ROLE_TWO_FACTOR_AUTHENTICATED</code>?</strong></p>
",807797,,-1,,2017-05-23 11:45:25,2016-05-04 20:54:53,null client in OAuth2 Multi-Factor Authentication,<spring><spring-mvc><spring-security><spring-boot><spring-security-oauth2>,1,0,7,,
Spring,37970709,1,37971596,97,6/22/2016 14:52:12,0,,6/22/2016 14:15:43,,16,15445,"<p>I'm trying to create OAuth2 Server Provider using this tutorial <a href=""https://spring.io/blog/2015/02/03/sso-with-oauth2-angular-js-and-spring-security-part-v"" rel=""noreferrer"">Spring OAuth2</a> . The main difference between example and my project - I do not use Spring Boot. I try to split this classes (<a href=""https://github.com/spring-guides/tut-spring-security-and-angular-js/blob/master/oauth2/authserver/src/main/java/demo/AuthserverApplication.java"" rel=""noreferrer"">GitHub example link</a>) I created 2 classes:</p>

<pre><code>@Configuration
@Order(-20)
@EnableResourceServer
public class WebSecurityConfig extends WebSecurityConfigurerAdapter {

  @Autowired
  private AuthenticationManager authenticationManager;

  @Override
  protected void configure(HttpSecurity http) throws Exception {
    http.formLogin().loginPage(""/login"").permitAll()
            .and()
            .requestMatchers().antMatchers(""/login"", ""/oauth/authorize"", ""/oauth/confirm_access"")
            .and()
            .authorizeRequests().anyRequest().authenticated();
  }

  @Override
  protected void configure(AuthenticationManagerBuilder auth) throws Exception {
    auth.parentAuthenticationManager(authenticationManager);
  }
</code></pre>

<p>}</p>

<p>Second class:</p>

<pre><code>@Configuration
@EnableAuthorizationServer
@EnableResourceServer
public class OAuth2AuthorizationConfiguration extends AuthorizationServerConfigurerAdapter {

  @Autowired
  private AuthenticationManager authenticationManager;

  @Bean
  public JwtAccessTokenConverter jwtAccessTokenConverter() {
    JwtAccessTokenConverter converter = new JwtAccessTokenConverter();
    KeyPair keyPair = new KeyStoreKeyFactory(
            new ClassPathResource(""keystore.jks""), ""foobar"".toCharArray())
            .getKeyPair(""test"");
    converter.setKeyPair(keyPair);
    return converter;
  }

  @Override
  public void configure(ClientDetailsServiceConfigurer clients) throws Exception {
    clients.inMemory()
            .withClient(""acme"")
            .secret(""acmesecret"")
            .authorizedGrantTypes(""authorization_code"", ""refresh_token"",
                    ""password"").scopes(""openid"").autoApprove(true).accessTokenValiditySeconds(30);
}

  @Override
  public void configure(AuthorizationServerEndpointsConfigurer endpoints) throws Exception {
    endpoints.authenticationManager(authenticationManager).accessTokenConverter(
            jwtAccessTokenConverter());
  }

  @Override
  public void configure(AuthorizationServerSecurityConfigurer oauthServer) throws Exception {
    oauthServer.tokenKeyAccess(""permitAll()"").checkTokenAccess(
            ""isAuthenticated()"");
  }

}
</code></pre>

<p>But when I try to start this code, I get:</p>

<pre><code>SEVERE: Exception sending context initialized event to listener instance of class org.springframework.web.context.ContextLoaderListener
org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'OAuth2AuthorizationConfiguration': Injection of autowired dependencies failed; nested exception is org.springframework.beans.factory.BeanCreationException: Could not autowire field: private   org.springframework.security.authentication.AuthenticationManager com.example.configuration.security.OAuth2AuthorizationConfiguration.authenticationManager; nested exception is org.springframework.beans.factory.NoSuchBeanDefinitionException: No qualifying bean of type [org.springframework.security.authentication.AuthenticationManager] found for dependency: expected at least 1 bean which qualifies as autowire candidate for this dependency. Dependency annotations: {@org.springframework.beans.factory.annotation.Autowired(required=true)}
at   org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor.postProcessPropertyValues(AutowiredAnnotationBeanPostProcessor.java:292)
at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.populateBean(AbstractAutowireCapableBeanFactory.java:1185)
at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:537)
at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:475)
at org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:302)
at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:228)
at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:298)
at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:193)
at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:703)
at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:760)
at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:482)
at org.springframework.web.context.ContextLoader.configureAndRefreshWebApplicationContext(ContextLoader.java:403)
at org.springframework.web.context.ContextLoader.initWebApplicationContext(ContextLoader.java:306)
at org.springframework.web.context.ContextLoaderListener.contextInitialized(ContextLoaderListener.java:106)
at org.apache.catalina.core.StandardContext.listenerStart(StandardContext.java:5066)
at org.apache.catalina.core.StandardContext.startInternal(StandardContext.java:5584)
at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:147)
at org.apache.catalina.core.ContainerBase.addChildInternal(ContainerBase.java:899)
at org.apache.catalina.core.ContainerBase.addChild(ContainerBase.java:875)
at org.apache.catalina.core.StandardHost.addChild(StandardHost.java:652)
at org.apache.catalina.startup.HostConfig.manageApp(HostConfig.java:1863)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
at java.lang.reflect.Method.invoke(Method.java:498)
at org.apache.tomcat.util.modeler.BaseModelMBean.invoke(BaseModelMBean.java:301)
at com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.invoke(DefaultMBeanServerInterceptor.java:819)
at com.sun.jmx.mbeanserver.JmxMBeanServer.invoke(JmxMBeanServer.java:801)
at org.apache.catalina.mbeans.MBeanFactory.createStandardContext(MBeanFactory.java:618)
at org.apache.catalina.mbeans.MBeanFactory.createStandardContext(MBeanFactory.java:565)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
at java.lang.reflect.Method.invoke(Method.java:498)
at org.apache.tomcat.util.modeler.BaseModelMBean.invoke(BaseModelMBean.java:301)
at com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.invoke(DefaultMBeanServerInterceptor.java:819)
at com.sun.jmx.mbeanserver.JmxMBeanServer.invoke(JmxMBeanServer.java:801)
at javax.management.remote.rmi.RMIConnectionImpl.doOperation(RMIConnectionImpl.java:1468)
at javax.management.remote.rmi.RMIConnectionImpl.access$300(RMIConnectionImpl.java:76)
at javax.management.remote.rmi.RMIConnectionImpl$PrivilegedOperation.run(RMIConnectionImpl.java:1309)
at javax.management.remote.rmi.RMIConnectionImpl.doPrivilegedOperation(RMIConnectionImpl.java:1401)
at javax.management.remote.rmi.RMIConnectionImpl.invoke(RMIConnectionImpl.java:829)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
at java.lang.reflect.Method.invoke(Method.java:498)
at sun.rmi.server.UnicastServerRef.dispatch(UnicastServerRef.java:324)
at sun.rmi.transport.Transport$1.run(Transport.java:200)
at sun.rmi.transport.Transport$1.run(Transport.java:197)
at java.security.AccessController.doPrivileged(Native Method)
at sun.rmi.transport.Transport.serviceCall(Transport.java:196)
at sun.rmi.transport.tcp.TCPTransport.handleMessages(TCPTransport.java:568)
at sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.run0(TCPTransport.java:826)
at sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.lambda$run$0(TCPTransport.java:683)
at java.security.AccessController.doPrivileged(Native Method)
at sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.run(TCPTransport.java:682)
at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)
at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)
at java.lang.Thread.run(Thread.java:745)
Caused by: org.springframework.beans.factory.BeanCreationException: Could not autowire field: private org.springframework.security.authentication.AuthenticationManager com.example.configuration.security.OAuth2AuthorizationConfiguration.authenticationManager; nested exception is org.springframework.beans.factory.NoSuchBeanDefinitionException: No qualifying bean of type [org.springframework.security.authentication.AuthenticationManager] found for dependency: expected at least 1 bean which qualifies as autowire candidate for this dependency. Dependency annotations: {@org.springframework.beans.factory.annotation.Autowired(required=true)}
at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredFieldElement.inject(AutowiredAnnotationBeanPostProcessor.java:508)
at org.springframework.beans.factory.annotation.InjectionMetadata.inject(InjectionMetadata.java:87)
at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor.postProcessPropertyValues(AutowiredAnnotationBeanPostProcessor.java:289)
... 58 more
Caused by: org.springframework.beans.factory.NoSuchBeanDefinitionException: No qualifying bean of type [org.springframework.security.authentication.AuthenticationManager] found for dependency: expected at least 1 bean which qualifies as autowire candidate for this dependency. Dependency annotations: {@org.springframework.beans.factory.annotation.Autowired(required=true)}
at org.springframework.beans.factory.support.DefaultListableBeanFactory.raiseNoSuchBeanDefinitionException(DefaultListableBeanFactory.java:1103)
at org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:963)
at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:858)
at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredFieldElement.inject(AutowiredAnnotationBeanPostProcessor.java:480)
... 60 more
</code></pre>

<p>I guess, the problem is in Spring Boot that I do not use in my app. 
I tried following solutions: <a href=""https://stackoverflow.com/questions/21633555/how-to-inject-authenticationmanager-using-java-configuration-in-a-custom-filter"">First</a>, <a href=""https://stackoverflow.com/questions/32081578/spring-security-nosuchbeandefinitionexception-no-qualifying-bean-of-type-org"">Second</a>
I use only code-based configuration. 
Additional info:
Java 8
spring-security-oauth2 - 2.0.7.RELEASE, 
spring-security-version - 4.0.1.RELEASE, 
spring-version - 4.0.6.RELEASE. </p>

<p>How to fix it?</p>

<p><strong>UPDATE</strong></p>

<p>I created </p>

<pre><code>@Configuration
public class AuthManager extends WebSecurityConfigurerAdapter {

    @Bean
    public AuthenticationManager customAuthenticationManager() throws Exception {
        return authenticationManager();
    }

}
</code></pre>

<p>And now I have exception:</p>

<pre><code>Caused by: org.springframework.beans.factory.BeanCreationException: Could not autowire field: private org.springframework.security.authentication.AuthenticationManager org.com.example.configuration.security.WebSecurityConfig.authenticationManager; nested exception is org.springframework.beans.factory.BeanCurrentlyInCreationException: Error creating bean with name 'customAuthenticationManager': Requested bean is currently in creation: Is there an unresolvable circular reference?
    at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredFieldElement.inject(AutowiredAnnotationBeanPostProcessor.java:508)
    at org.springframework.beans.factory.annotation.InjectionMetadata.inject(InjectionMetadata.java:87)
    at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor.postProcessPropertyValues(AutowiredAnnotationBeanPostProcessor.java:289)
    ... 100 more
Caused by: org.springframework.beans.factory.BeanCurrentlyInCreationException: Error creating bean with name 'customAuthenticationManager': Requested bean is currently in creation: Is there an unresolvable circular reference?
    at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.beforeSingletonCreation(DefaultSingletonBeanRegistry.java:335)
    at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:222)
    at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:298)
    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:193)
    at org.springframework.beans.factory.support.DefaultListableBeanFactory.findAutowireCandidates(DefaultListableBeanFactory.java:1017)
    at org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:960)
    at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:858)
    at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredFieldElement.inject(AutowiredAnnotationBeanPostProcessor.java:480)
</code></pre>

<p>This exception in OAuth2AuthorizationConfiguration class.</p>
",2114952,,-1,,2017-05-23 10:34:05,2018-05-08 10:15:38,Could not autowire field: private org.springframework.security.authentication.AuthenticationManager,<java><spring><spring-mvc><spring-security><spring-boot>,3,1,3,,
Spring,34751700,1,38867506,98,8/10/2016 8:02:41,211,,1/12/2016 18:57:52,,9,7222,"<p>I have been really been searching high and low for the last few days on how to do this and have finally decided to admit defeat and ask for help, please!!!</p>

<p>I have followed Dr Dave Syer's tutorial on Angular and Spring Security specifically the Zuul Proxy as an api gateway and using Spring Session with Redis (<a href=""https://github.com/spring-guides/tut-spring-security-and-angular-js/tree/master/double#_sso_with_oauth2_angular_js_and_spring_security_part_v"">https://github.com/spring-guides/tut-spring-security-and-angular-js/tree/master/double#_sso_with_oauth2_angular_js_and_spring_security_part_v</a>)</p>

<p>The issue I am having is that I am calling resource rest services via the gateway from an external application with the following header:</p>

<pre><code>String plainCreds = ""user:password"";
byte[] plainCredsBytes = plainCreds.getBytes();
byte[] base64CredsBytes = Base64.getEncoder().encode(plainCredsBytes);
String base64Creds = new String(base64CredsBytes);

HttpHeaders headers = new HttpHeaders();
headers.add(""Authorization"", ""Basic "" + base64Creds);
</code></pre>

<p>to be authenticated and then routed by zuul and then the resource to have access to the authenticated session via redis.</p>

<p>The issue is that the session seems to only commit to redis in the gateway after the request has responded. So what is happening is that when I call a resource service with the header, I can see the successful authentication occurring in the gateway and session being created, however I am getting a 403 in the resource due to the session not being in redis after its been routed via zuul.</p>

<p>However if I get the error, grab the session id and add it to the header and try again it works because now my authenticated session is available for the resource project after its been routed.</p>

<p>Please could someone point me in the direction of how I go about getting my calls via the gateway to authenticate and route in the same request please?</p>

<p>Thanks
Justin</p>
",4977572,,,,,2016-10-20 12:33:45,Spring Zuul API Gateway with Spring Session / Redis Authenticate and Route in same Request,<spring-security><spring-cloud><spring-session>,2,1,7,,
Spring,39233986,1,39337370,99,9/5/2016 20:35:09,6,,8/30/2016 17:48:28,,1,72,"<p>I am trying to build rest service using Spring Boot. I am learning to implement it using the <a href=""https://spring.io/guides/gs/rest-service/"" rel=""nofollow noreferrer"">this</a> Spring's guide. I have built the application using STS as a Maven application and the code is exact replica of the guide and when I try to run the application I get the below connection error</p>

<p><a href=""https://i.stack.imgur.com/nF8lP.png"" rel=""nofollow noreferrer""><img src=""https://i.stack.imgur.com/nF8lP.png"" alt=""connection error""></a></p>

<p>I also tried to run the <a href=""https://github.com/spring-guides/gs-rest-service"" rel=""nofollow noreferrer"">github code</a> for the same guide provided by Spring and that code also gives same the error as above. I am new to Spring Boot and any help would be appreciated.</p>

<p>Below is my code
App.java</p>

<pre><code>    package Greetings.Web_Services;

    import org.springframework.boot.SpringApplication;
    import org.springframework.boot.autoconfigure.SpringBootApplication;

    @SpringBootApplication
    public class App 
    {
        public static void main( String[] args )
        {
            System.out.println(""App Started"");
            SpringApplication.run(App.class, args);
        }
    }
</code></pre>

<p>Greetings.java</p>

<pre><code>    package Greetings.Web_Services;

    public class Greetings {

        private final long id;
        private final String content;

        public Greetings(long id, String content){
            this.id = id;
            this.content = content;
        }

        public long getId(){
            return id;
        }

        public String getContent(){
            return content;
        }
    }
</code></pre>

<p>GreetingsController.java</p>

<pre><code>    package Greetings.Web_Services;

    import java.util.concurrent.atomic.AtomicLong;
    import org.springframework.web.bind.annotation.RequestMapping;
    import org.springframework.web.bind.annotation.RequestParam;
    import org.springframework.web.bind.annotation.RestController;

    @RestController
    public class GreetingsController {
        private static final String template = ""Hello, %s!"";
        private final AtomicLong counter = new AtomicLong();

        @RequestMapping(""/greeting"")
        public Greetings greeting(@RequestParam(value=""name"", defaultValue=""World"") String name) {
            return new Greetings(counter.incrementAndGet(),
                        String.format(template, name));
        }
    }
</code></pre>

<p>pom.xml</p>

<pre><code>    &lt;?xml version=""1.0"" encoding=""UTF-8""?&gt;
    &lt;project xmlns=""http://maven.apache.org/POM/4.0.0"" xmlns:xsi=""http://www.w3.org/2001/XMLSchema-instance""
xsi:schemaLocation=""http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd""&gt;
&lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;

&lt;groupId&gt;org.springframework&lt;/groupId&gt;
&lt;artifactId&gt;gs-rest-service&lt;/artifactId&gt;
&lt;version&gt;0.1.0&lt;/version&gt;

&lt;parent&gt;
    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
    &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;
    &lt;version&gt;1.4.0.RELEASE&lt;/version&gt;
&lt;/parent&gt;

&lt;dependencies&gt;
    &lt;dependency&gt;
        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
        &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;
    &lt;/dependency&gt;

    &lt;!-- &lt;dependency&gt;
        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
        &lt;artifactId&gt;spring-boot-starter-actuator&lt;/artifactId&gt;
    &lt;/dependency&gt; --&gt;

    &lt;dependency&gt;
        &lt;groupId&gt;org.springframework&lt;/groupId&gt;
        &lt;artifactId&gt;spring-web&lt;/artifactId&gt;
        &lt;version&gt;4.3.1.RELEASE&lt;/version&gt;
    &lt;/dependency&gt;

    &lt;dependency&gt;
        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
        &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;
        &lt;scope&gt;test&lt;/scope&gt;
    &lt;/dependency&gt;
    &lt;dependency&gt;
        &lt;groupId&gt;com.jayway.jsonpath&lt;/groupId&gt;
        &lt;artifactId&gt;json-path&lt;/artifactId&gt;
        &lt;scope&gt;test&lt;/scope&gt;
    &lt;/dependency&gt;
&lt;/dependencies&gt;

&lt;properties&gt;
    &lt;java.version&gt;1.8&lt;/java.version&gt;
&lt;/properties&gt;


&lt;build&gt;
    &lt;plugins&gt;
        &lt;plugin&gt;
            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
            &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;
        &lt;/plugin&gt;
    &lt;/plugins&gt;
&lt;/build&gt;

&lt;repositories&gt;
    &lt;repository&gt;
        &lt;id&gt;spring-releases&lt;/id&gt;
        &lt;url&gt;https://repo.spring.io/libs-release&lt;/url&gt;
    &lt;/repository&gt;
&lt;/repositories&gt;
&lt;pluginRepositories&gt;
    &lt;pluginRepository&gt;
        &lt;id&gt;spring-releases&lt;/id&gt;
        &lt;url&gt;https://repo.spring.io/libs-release&lt;/url&gt;
    &lt;/pluginRepository&gt;
&lt;/pluginRepositories&gt;

    &lt;/project&gt;
</code></pre>

<p>GitHub <a href=""https://github.com/ananthashankar/Rest-Services"" rel=""nofollow noreferrer"">link</a> for the project of above code</p>

<p>Thanks!!</p>
",5385516,,5385516,,2016-08-31 0:34:09,2016-09-05 20:35:09,Not able to run the starter guide code of Building Spring Boot Rest Service,<spring><web-services><rest><maven><spring-boot>,1,4,,,
Spring,40357318,1,40460700,100,11/7/2016 8:25:22,6,,11/1/2016 9:32:00,,1,539,"<p>I'm trying to repeat the ""Spring Boot and OAuth2"" example from <a href=""https://spring.io/guides/tutorials/spring-boot-oauth2/"" rel=""nofollow"">tutorial</a>.</p>

<p>I run the example with ""gradlew bootRun"".
It is working on Windows without problems, but I having an issue on Ubuntu 14.04.
When I clicked on ""login"" button the service doesn't perform a redirect to the authorization server (e.g. facebook), and after several minutes return with time-out.</p>

<p>The service's log contains the following lines:</p>

<pre><code>o.s.s.w.u.matcher.AntPathRequestMatcher  : Request 'GET /login' doesn't match 'POST /logout
o.s.security.web.FilterChainProxy        : /login at position 6 of 12 in additional filter chain; firing Filter: 'OAuth2ClientAuthenticationProcessingFilter'
o.s.s.w.u.matcher.AntPathRequestMatcher  : Checking match of request : '/login'; against '/login'
uth2ClientAuthenticationProcessingFilter : Request is to process authentication
</code></pre>

<p>I would be grateful for any help.
Thanks.</p>

<p>Source code of tutorial located on <a href=""https://github.com/spring-guides/tut-spring-boot-oauth2/tree/master/logout"" rel=""nofollow"">github</a></p>

<p>My source code are given below:</p>

<p><strong>build.gradle</strong></p>

<pre><code>buildscript {
    repositories {
        mavenCentral()
    }
    dependencies {
        classpath(""org.springframework.boot:spring-boot-gradle-plugin:1.4.1.RELEASE"")
    }
}

apply plugin: 'java'
apply plugin: 'idea'
apply plugin: 'spring-boot'
sourceCompatibility = '1.8'
targetCompatibility = '1.8'

repositories {
    mavenCentral()
}

dependencies {
    compile(""org.springframework.boot:spring-boot-starter-security"")
    compile(""org.springframework.boot:spring-boot-starter-web"")
    compile(""org.springframework.security.oauth:spring-security-oauth2"")

    compile(""org.webjars:webjars-locator"")
    compile(""org.webjars:angularjs:1.4.3"")
    compile(""org.webjars:jquery:2.1.1"")
    compile(""org.webjars:bootstrap:3.2.0"")

    testCompile group: 'junit', name: 'junit', version: '4.11'
}
</code></pre>

<p><strong>application.yml</strong></p>

<pre><code>security:
  oauth2:
    client:
      clientId: 233668646673605
      clientSecret: 33b17e044ee6a4fa383f46ec6e28ea1d
      accessTokenUri: https://graph.facebook.com/oauth/access_token
      userAuthorizationUri: https://www.facebook.com/dialog/oauth
      tokenName: oauth_token
      authenticationScheme: query
      clientAuthenticationScheme: form
    resource:
      userInfoUri: https://graph.facebook.com/me

logging:
  level:
    org.springframework.security: DEBUG
</code></pre>

<p><strong>SocialApplication.java</strong></p>

<pre><code>@SpringBootApplication
@EnableOAuth2Sso
@RestController
public class SocialApplication extends WebSecurityConfigurerAdapter {

    @RequestMapping(""/user"")
    public Principal user(Principal principal) {
        return principal;
    }

    @Override
    protected void configure(HttpSecurity http) throws Exception {
        http.antMatcher(""/**"").authorizeRequests().antMatchers(""/"", ""/login**"", ""/webjars/**"").permitAll()
                .anyRequest().authenticated()
                .and().logout().logoutSuccessUrl(""/"").permitAll()
                .and().csrf().csrfTokenRepository(CookieCsrfTokenRepository.withHttpOnlyFalse());
    }

    public static void main(String[] args) {
        SpringApplication.run(SocialApplication.class, args);
    }
}
</code></pre>
",4529210,,,,,2016-11-07 8:25:22,Spring Boot and OAuth2 example: redirect not working,<spring><spring-security><oauth2>,1,0,1,,
Spring,40585031,1,40595012,101,11/14/2016 18:02:36,0,,11/14/2016 9:02:52,,7,11431,"<p>Tried springboot for the first time but I am unable to get it to start.
I used the sample app: <a href=""https://github.com/spring-guides/gs-spring-boot.git"" rel=""nofollow noreferrer"">https://github.com/spring-guides/gs-spring-boot.git</a>
I also made modifications to use an embedded jetty instead of tomcat but still no success.</p>

<p>The exception I get is this: org.springframework.context.ApplicationContextException: Unable to start embedded container; nested exception is java.lang.IllegalArgumentException: Resource location must not be null.</p>

<p>This is on MacOSX.</p>

<p>Edit: I have confirmed this is an environment issue. I can start the app just fine in a linux(fedora) VM but for whatever reason I run into this problem on my Mac. Not sure if anyone else run into this and has any clues on what might be causing this.</p>

<p>Edit 2: So this appears to be an issue with trying to configure ssl by default. I am not sure why this is the case since I haven't specified this anywhere; So my question now is, how do I disable https in spring-boot? </p>

<pre><code>mvn -version
Apache Maven 3.2.5 (12a6b3acb947671f09b81f49094c53f426d8cea1; 2014-12-14T09:29:23-08:00)
Maven home: /usr/local/Cellar/maven/3.2.5/libexec
Java version: 1.8.0_25, vendor: Oracle Corporation
Java home: /Library/Java/JavaVirtualMachines/jdk1.8.0_25.jdk/Contents/Home/jre
Default locale: en_US, platform encoding: UTF-8
OS name: ""mac os x"", version: ""10.10.5"", arch: ""x86_64"", family: ""mac""
</code></pre>

<p>Any help is appreciated. </p>

<pre><code>org.springframework.context.ApplicationContextException: Unable to start embedded container; nested exception is java.lang.IllegalArgumentException: Resource location must not be null
    at org.springframework.boot.context.embedded.EmbeddedWebApplicationContext.onRefresh(EmbeddedWebApplicationContext.java:137) ~[spring-boot-1.4.2.RELEASE.jar!/:1.4.2.RELEASE]
    at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:536) ~[spring-context-4.3.4.RELEASE.jar!/:4.3.4.RELEASE]
    at org.springframework.boot.context.embedded.EmbeddedWebApplicationContext.refresh(EmbeddedWebApplicationContext.java:122) ~[spring-boot-1.4.2.RELEASE.jar!/:1.4.2.RELEASE]
    at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:761) [spring-boot-1.4.2.RELEASE.jar!/:1.4.2.RELEASE]
    at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:371) [spring-boot-1.4.2.RELEASE.jar!/:1.4.2.RELEASE]
    at org.springframework.boot.SpringApplication.run(SpringApplication.java:315) [spring-boot-1.4.2.RELEASE.jar!/:1.4.2.RELEASE]
    at org.springframework.boot.SpringApplication.run(SpringApplication.java:1186) [spring-boot-1.4.2.RELEASE.jar!/:1.4.2.RELEASE]
    at org.springframework.boot.SpringApplication.run(SpringApplication.java:1175) [spring-boot-1.4.2.RELEASE.jar!/:1.4.2.RELEASE]
    at hello.Application.main(Application.java:15) [classes!/:0.1.0]
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:1.8.0_25]
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62) ~[na:1.8.0_25]
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:1.8.0_25]
    at java.lang.reflect.Method.invoke(Method.java:483) ~[na:1.8.0_25]
    at org.springframework.boot.loader.MainMethodRunner.run(MainMethodRunner.java:48) [gs-spring-boot-0.1.0.jar:0.1.0]
    at org.springframework.boot.loader.Launcher.launch(Launcher.java:87) [gs-spring-boot-0.1.0.jar:0.1.0]
    at org.springframework.boot.loader.Launcher.launch(Launcher.java:50) [gs-spring-boot-0.1.0.jar:0.1.0]
    at org.springframework.boot.loader.JarLauncher.main(JarLauncher.java:58) [gs-spring-boot-0.1.0.jar:0.1.0]
Caused by: java.lang.IllegalArgumentException: Resource location must not be null
    at org.springframework.util.Assert.notNull(Assert.java:115) ~[spring-core-4.3.4.RELEASE.jar!/:4.3.4.RELEASE]
    at org.springframework.util.ResourceUtils.getURL(ResourceUtils.java:131) ~[spring-core-4.3.4.RELEASE.jar!/:4.3.4.RELEASE]
    at org.springframework.boot.context.embedded.tomcat.TomcatEmbeddedServletContainerFactory.configureSslKeyStore(TomcatEmbeddedServletContainerFactory.java:417) ~[spring-boot-1.4.2.RELEASE.jar!/:1.4.2.RELEASE]
    at org.springframework.boot.context.embedded.tomcat.TomcatEmbeddedServletContainerFactory.configureSsl(TomcatEmbeddedServletContainerFactory.java:395) ~[spring-boot-1.4.2.RELEASE.jar!/:1.4.2.RELEASE]
    at org.springframework.boot.context.embedded.tomcat.TomcatEmbeddedServletContainerFactory.customizeSsl(TomcatEmbeddedServletContainerFactory.java:332) ~[spring-boot-1.4.2.RELEASE.jar!/:1.4.2.RELEASE]
    at org.springframework.boot.context.embedded.tomcat.TomcatEmbeddedServletContainerFactory.customizeConnector(TomcatEmbeddedServletContainerFactory.java:311) ~[spring-boot-1.4.2.RELEASE.jar!/:1.4.2.RELEASE]
    at org.springframework.boot.context.embedded.tomcat.TomcatEmbeddedServletContainerFactory.getEmbeddedServletContainer(TomcatEmbeddedServletContainerFactory.java:169) ~[spring-boot-1.4.2.RELEASE.jar!/:1.4.2.RELEASE]
    at org.springframework.boot.context.embedded.EmbeddedWebApplicationContext.createEmbeddedServletContainer(EmbeddedWebApplicationContext.java:164) ~[spring-boot-1.4.2.RELEASE.jar!/:1.4.2.RELEASE]
    at org.springframework.boot.context.embedded.EmbeddedWebApplicationContext.onRefresh(EmbeddedWebApplicationContext.java:134) ~[spring-boot-1.4.2.RELEASE.jar!/:1.4.2.RELEASE]
    ... 16 common frames omitted
</code></pre>
",979467,,1399491,,2018-12-12 18:26:43,2019-03-07 16:10:00,Unable to start springboot app - Resource location must not be null,<spring><spring-boot>,4,5,,,
Spring,40802405,1,40802769,102,11/25/2016 10:28:26,0,,11/25/2016 10:11:01,,1,641,"<p>I would like to build a web application based on <a href=""https://github.com/spring-guides/tut-spring-security-and-angular-js/tree/master/spring-session"" rel=""nofollow noreferrer"">this example</a>.   </p>

<p>What I understood from this example is that you build 2 applications:<br>
A UI application containing the web pages where you can login to get a token and a resource application where you ask for data using your token.</p>

<p>My question is where is the login check done?<br>
The <strong>application.yml</strong> file defines the password ""<strong>password</strong>"" for the user ""<strong>user</strong>""</p>

<pre><code>security:
  user:
    password: password
</code></pre>

<p>But this file is never mentioned neither in <strong>UIApplication.java</strong> file or in any other file:</p>

<pre><code>@SpringBootApplication
@RestController
public class UiApplication {

    public static void main(String[] args) {
        SpringApplication.run(UiApplication.class, args);
    }

    @Configuration
    @Order(SecurityProperties.ACCESS_OVERRIDE_ORDER)
    protected static class SecurityConfiguration extends WebSecurityConfigurerAdapter {

        @Override
        protected void configure(HttpSecurity http) throws Exception {
            // @formatter:off
            http
                .httpBasic().and()
                .logout().and()
                .authorizeRequests()
                    .antMatchers(""/index.html"", ""/pages/home.html"", ""/pages/login.html"", ""/"").permitAll()
                    .anyRequest().authenticated().and()
                .csrf()
                    .csrfTokenRepository(CookieCsrfTokenRepository.withHttpOnlyFalse());
            // @formatter:on
        }
    }

    @RequestMapping(""/user"")
    public Principal user(Principal user) {
        return user;
    }

    @RequestMapping(""/token"")
    public Map&lt;String,String&gt; token(HttpSession session) {
        return Collections.singletonMap(""token"", session.getId());
    }

}
</code></pre>

<p>However it works: when I login using ""user"" and ""password"" login succeeds, when I use different credentials, it fails.<br>
Is it some high level Spring layer dealing with that? Thanks for help.</p>
",2436719,,2436719,,2016-11-25 10:37:37,2016-11-25 10:51:57,Spring session login,<java><spring><session>,1,0,,,
Spring,40775533,1,40816259,103,11/26/2016 8:01:20,3,,11/23/2016 22:58:42,,1,628,"<p>I followed <a href=""https://spring.io/guides/tutorials/spring-boot-oauth2/#_social_login_authserver"" rel=""nofollow noreferrer"">this guide</a> and cloned the <a href=""https://github.com/spring-guides/tut-spring-boot-oauth2/tree/master/auth-server"" rel=""nofollow noreferrer"">authserver</a>. The project has an <code>authserver</code> and a <code>client</code> (as test). Example works fine but if I remove <a href=""https://github.com/spring-guides/tut-spring-boot-oauth2/blob/master/auth-server/src/test/resources/client.yml#L3"" rel=""nofollow noreferrer"">context-path</a> property (I just want my app to work on <code>/</code>), it fails after redirect back to the <code>client</code>. Example:</p>

<ol>
<li>Go to the <code>client</code> (<code>localhost:9999</code>);</li>
<li>Redirected to the <code>authserver</code> (<code>localhost:8080</code>);</li>
<li>Login through GitHub;</li>
<li>Redirected to the <code>authserver</code> and immediatly to the <code>client</code> with next url:</li>
</ol>

<blockquote>
  <p><a href=""http://localhost:9999/login?code=dqoxz4&amp;state=79qtJ5"" rel=""nofollow noreferrer"">http://localhost:9999/login?code=dqoxz4&amp;state=79qtJ5</a></p>
</blockquote>

<p>Whitelabel error page responds:</p>

<blockquote>
  <p>There was an unexpected error (type=Unauthorized, status=401).<br>
  Authentication Failed: Could not obtain access token</p>
</blockquote>

<p>As I mentioned above, it fails only if <code>context-path</code> is <code>/</code> (or removed at all). Otherwise, all works.</p>
",4725496,,,,,2016-11-27 10:39:43,Spring SSO authorization fails without context-path,<java><spring><spring-security>,2,0,,,
Spring,41092751,1,41092831,104,12/12/2016 0:52:59,0,,12/12/2016 0:37:03,,35,19035,"<p>I'm experimenting with examples from this official Spring <a href=""https://spring.io/guides/gs/async-method/"" rel=""noreferrer"">tutorials</a> and there is a dependency on this code:<br>
<a href=""https://github.com/spring-guides/gs-async-method/tree/master/complete"" rel=""noreferrer"">https://github.com/spring-guides/gs-async-method/tree/master/complete</a></p>

<p>If you look at the code on <em>AppRunner.java</em>  class, I have 2 issues:</p>

<p>1) When server is starting, if I put a breakpoint in this class's constructor, seems like in the constructor, the <em>GitHubLookupService</em> is provided by spring, using the <strong>@Service</strong> bean that was configured. BUT, there was no <code>@Autowired</code> annotation on the constructor, so how in the world this constructor get called with the right dependency?  It was supposed to be <code>null</code>.</p>

<p>Is it an automatic assumption of <strong>Spring Boot</strong>?<br>
Does Spring see ""private field + constructor argument, and it assumes it should look for an appropriate bean?<br>
Is it <strong>Spring Framework</strong> or <strong>Spring boot</strong>?<br>
Am I missing something?</p>

<p>2) As I remember, it was mendatory to provide <em>default constructor</em> to beans / service etc. How come this class (AppRunner) doesn't have a default constructor?
How does Spring knows that it should run the constructor with the argument?
Is it because it is the only constructor?</p>
",1652248,,814702,,2018-01-23 16:14:54,2018-01-23 16:14:54,Spring injects dependencies in constructor without @Autowired annotation,<spring><spring-boot><dependency-injection><autowired>,1,0,6,,
Spring,41429778,1,41450580,105,1/3/2017 19:03:07,1,,1/2/2017 15:53:40,,4,4602,"<p>I am following <a href=""https://spring.io/guides/tutorials/spring-security-and-angular-js/#_the_login_page_angular_js_and_spring_security_part_ii"" rel=""nofollow noreferrer"">this</a> tutorial on Spring Security in the Spring.io guides. The logout and login functions are working fine, but when I add the following line in the <code>WebSecurityConfigurerAdapter</code> it doesn't work as expected. (Basically, I want to prevent a user from login from two devices if he is already logged in in one)</p>

<pre><code>@Configuration
@Order(SecurityProperties.ACCESS_OVERRIDE_ORDER)
protected static class SecurityConfiguration extends WebSecurityConfigurerAdapter {
    @Override
    protected void configure(HttpSecurity http) throws Exception {
        // The configuration as in the tutorial
        http
            .httpBasic().and()
            .authorizeRequests()
                .antMatchers(""/index.html"", ""/home.html"", ""/login.html"", ""/"").permitAll()
                .anyRequest().authenticated()
                .and()
            .csrf()
                .csrfTokenRepository(CookieCsrfTokenRepository.withHttpOnlyFalse());

      // Added this for session management  
      http.sessionManagement().maximumSessions(1).maxSessionsPreventsLogin(true)
    }
} 
</code></pre>

<p>The problem occurs if you logout and try to login again, a 401 is returned with the message 'Authentication Failed: Maximum
 sessions of 1 for this principal exceeded'.
Yet the logout URL is hit on this part in the <code>AngularJs</code> app</p>

<pre><code>self.logout = function() {
   $http.post('logout', {}).finally(function() {
     $rootScope.authenticated = false;
     $location.path(""/"");
   });
}
</code></pre>

<p>Why isn't the number of sessions reset in this case?</p>

<p>What can be done to make it work as expected?</p>

<p><a href=""https://github.com/spring-guides/tut-spring-security-and-angular-js/tree/master/single"" rel=""nofollow noreferrer"">Link to github code</a></p>

<p>Spring Security logs in debug mode</p>

<pre><code>2017-01-03 21:38:01.806 DEBUG 32624 --- [nio-8080-exec-9] o.s.s.w.u.matcher.AntPathRequestMatcher  : Checking match of request : '/logout'; against '/error'
2017-01-03 21:38:01.806 DEBUG 32624 --- [nio-8080-exec-9] o.s.security.web.FilterChainProxy        : /logout at position 1 of 13 in additional filter chain; firing Filter: 'WebAsyncManagerIntegrationFilter'
2017-01-03 21:38:01.806 DEBUG 32624 --- [nio-8080-exec-9] o.s.security.web.FilterChainProxy        : /logout at position 2 of 13 in additional filter chain; firing Filter: 'SecurityContextPersistenceFilter'
2017-01-03 21:38:01.807 DEBUG 32624 --- [nio-8080-exec-9] w.c.HttpSessionSecurityContextRepository : Obtained a valid SecurityContext from SPRING_SECURITY_CONTEXT: 'org.springframework.security.core.context.SecurityContextImpl@442b5a9f: Authentication: org.springframework.security.authentication.UsernamePasswordAuthenticationToken@442b5a9f: Principal: org.springframework.security.core.userdetails.User@36ebcb: Username: user; Password: [PROTECTED]; Enabled: true; AccountNonExpired: true; credentialsNonExpired: true; AccountNonLocked: true; Granted Authorities: ROLE_USER; Credentials: [PROTECTED]; Authenticated: true; Details: org.springframework.security.web.authentication.WebAuthenticationDetails@b364: RemoteIpAddress: 0:0:0:0:0:0:0:1; SessionId: null; Granted Authorities: ROLE_USER'
2017-01-03 21:38:01.807 DEBUG 32624 --- [nio-8080-exec-9] o.s.security.web.FilterChainProxy        : /logout at position 3 of 13 in additional filter chain; firing Filter: 'HeaderWriterFilter'
2017-01-03 21:38:01.807 DEBUG 32624 --- [nio-8080-exec-9] o.s.security.web.FilterChainProxy        : /logout at position 4 of 13 in additional filter chain; firing Filter: 'CsrfFilter'
2017-01-03 21:38:01.807 DEBUG 32624 --- [nio-8080-exec-9] o.s.security.web.FilterChainProxy        : /logout at position 5 of 13 in additional filter chain; firing Filter: 'LogoutFilter'
2017-01-03 21:38:01.807 DEBUG 32624 --- [nio-8080-exec-9] o.s.s.w.u.matcher.AntPathRequestMatcher  : Checking match of request : '/logout'; against '/logout'
2017-01-03 21:38:01.807 DEBUG 32624 --- [nio-8080-exec-9] o.s.s.w.a.logout.LogoutFilter            : Logging out user 'org.springframework.security.authentication.UsernamePasswordAuthenticationToken@442b5a9f: Principal: org.springframework.security.core.userdetails.User@36ebcb: Username: user; Password: [PROTECTED]; Enabled: true; AccountNonExpired: true; credentialsNonExpired: true; AccountNonLocked: true; Granted Authorities: ROLE_USER; Credentials: [PROTECTED]; Authenticated: true; Details: org.springframework.security.web.authentication.WebAuthenticationDetails@b364: RemoteIpAddress: 0:0:0:0:0:0:0:1; SessionId: null; Granted Authorities: ROLE_USER' and transferring to logout destination
2017-01-03 21:38:01.807 DEBUG 32624 --- [nio-8080-exec-9] o.s.s.w.a.l.SecurityContextLogoutHandler : Invalidating session: DDC79F814F9ECD2A0192531E977D53C9
2017-01-03 21:38:01.807 DEBUG 32624 --- [nio-8080-exec-9] o.s.s.web.util.matcher.OrRequestMatcher  : Trying to match using RequestHeaderRequestMatcher [expectedHeaderName=X-Requested-With, expectedHeaderValue=XMLHttpRequest]
2017-01-03 21:38:01.808 DEBUG 32624 --- [nio-8080-exec-9] o.s.s.web.util.matcher.OrRequestMatcher  : matched
2017-01-03 21:38:01.808 DEBUG 32624 --- [nio-8080-exec-9] o.s.s.w.header.writers.HstsHeaderWriter  : Not injecting HSTS header since it did not match the requestMatcher org.springframework.security.web.header.writers.HstsHeaderWriter$SecureRequestMatcher@e0735a1
2017-01-03 21:38:01.809 DEBUG 32624 --- [nio-8080-exec-9] w.c.HttpSessionSecurityContextRepository : SecurityContext is empty or contents are anonymous - context will not be stored in HttpSession.
2017-01-03 21:38:01.809 DEBUG 32624 --- [nio-8080-exec-9] s.s.w.c.SecurityContextPersistenceFilter : SecurityContextHolder now cleared, as request processing completed
2017-01-03 21:38:38.069 DEBUG 32624 --- [io-8080-exec-10] o.s.s.w.u.matcher.AntPathRequestMatcher  : Checking match of request : '/user'; against '/error'
2017-01-03 21:38:38.069 DEBUG 32624 --- [io-8080-exec-10] o.s.security.web.FilterChainProxy        : /user at position 1 of 13 in additional filter chain; firing Filter: 'WebAsyncManagerIntegrationFilter'
2017-01-03 21:38:38.069 DEBUG 32624 --- [io-8080-exec-10] o.s.security.web.FilterChainProxy        : /user at position 2 of 13 in additional filter chain; firing Filter: 'SecurityContextPersistenceFilter'
2017-01-03 21:38:38.069 DEBUG 32624 --- [io-8080-exec-10] w.c.HttpSessionSecurityContextRepository : No HttpSession currently exists
2017-01-03 21:38:38.069 DEBUG 32624 --- [io-8080-exec-10] w.c.HttpSessionSecurityContextRepository : No SecurityContext was available from the HttpSession: null. A new one will be created.
2017-01-03 21:38:38.069 DEBUG 32624 --- [io-8080-exec-10] o.s.security.web.FilterChainProxy        : /user at position 3 of 13 in additional filter chain; firing Filter: 'HeaderWriterFilter'
2017-01-03 21:38:38.069 DEBUG 32624 --- [io-8080-exec-10] o.s.security.web.FilterChainProxy        : /user at position 4 of 13 in additional filter chain; firing Filter: 'CsrfFilter'
2017-01-03 21:38:38.069 DEBUG 32624 --- [io-8080-exec-10] o.s.security.web.FilterChainProxy        : /user at position 5 of 13 in additional filter chain; firing Filter: 'LogoutFilter'
2017-01-03 21:38:38.069 DEBUG 32624 --- [io-8080-exec-10] o.s.s.w.u.matcher.AntPathRequestMatcher  : Request 'GET /user' doesn't match 'POST /logout
2017-01-03 21:38:38.069 DEBUG 32624 --- [io-8080-exec-10] o.s.security.web.FilterChainProxy        : /user at position 6 of 13 in additional filter chain; firing Filter: 'ConcurrentSessionFilter'
2017-01-03 21:38:38.069 DEBUG 32624 --- [io-8080-exec-10] o.s.security.web.FilterChainProxy        : /user at position 7 of 13 in additional filter chain; firing Filter: 'BasicAuthenticationFilter'
2017-01-03 21:38:38.070 DEBUG 32624 --- [io-8080-exec-10] o.s.security.web.FilterChainProxy        : /user at position 8 of 13 in additional filter chain; firing Filter: 'RequestCacheAwareFilter'
2017-01-03 21:38:38.070 DEBUG 32624 --- [io-8080-exec-10] o.s.security.web.FilterChainProxy        : /user at position 9 of 13 in additional filter chain; firing Filter: 'SecurityContextHolderAwareRequestFilter'
2017-01-03 21:38:38.070 DEBUG 32624 --- [io-8080-exec-10] o.s.security.web.FilterChainProxy        : /user at position 10 of 13 in additional filter chain; firing Filter: 'AnonymousAuthenticationFilter'
2017-01-03 21:38:38.070 DEBUG 32624 --- [io-8080-exec-10] o.s.s.w.a.AnonymousAuthenticationFilter  : Populated SecurityContextHolder with anonymous token: 'org.springframework.security.authentication.AnonymousAuthenticationToken@9055c2bc: Principal: anonymousUser; Credentials: [PROTECTED]; Authenticated: true; Details: org.springframework.security.web.authentication.WebAuthenticationDetails@b364: RemoteIpAddress: 0:0:0:0:0:0:0:1; SessionId: null; Granted Authorities: ROLE_ANONYMOUS'
2017-01-03 21:38:38.070 DEBUG 32624 --- [io-8080-exec-10] o.s.security.web.FilterChainProxy        : /user at position 11 of 13 in additional filter chain; firing Filter: 'SessionManagementFilter'
2017-01-03 21:38:38.070 DEBUG 32624 --- [io-8080-exec-10] o.s.s.w.session.SessionManagementFilter  : Requested session ID DDC79F814F9ECD2A0192531E977D53C9 is invalid.
2017-01-03 21:38:38.070 DEBUG 32624 --- [io-8080-exec-10] o.s.security.web.FilterChainProxy        : /user at position 12 of 13 in additional filter chain; firing Filter: 'ExceptionTranslationFilter'
2017-01-03 21:38:38.070 DEBUG 32624 --- [io-8080-exec-10] o.s.security.web.FilterChainProxy        : /user at position 13 of 13 in additional filter chain; firing Filter: 'FilterSecurityInterceptor'
2017-01-03 21:38:38.070 DEBUG 32624 --- [io-8080-exec-10] o.s.s.w.u.matcher.AntPathRequestMatcher  : Checking match of request : '/user'; against '/index.html'
2017-01-03 21:38:38.070 DEBUG 32624 --- [io-8080-exec-10] o.s.s.w.u.matcher.AntPathRequestMatcher  : Checking match of request : '/user'; against '/home.html'
2017-01-03 21:38:38.070 DEBUG 32624 --- [io-8080-exec-10] o.s.s.w.u.matcher.AntPathRequestMatcher  : Checking match of request : '/user'; against '/login.html'
2017-01-03 21:38:38.070 DEBUG 32624 --- [io-8080-exec-10] o.s.s.w.u.matcher.AntPathRequestMatcher  : Checking match of request : '/user'; against '/'
2017-01-03 21:38:38.070 DEBUG 32624 --- [io-8080-exec-10] o.s.s.w.a.i.FilterSecurityInterceptor    : Secure object: FilterInvocation: URL: /user; Attributes: [authenticated]
2017-01-03 21:38:38.071 DEBUG 32624 --- [io-8080-exec-10] o.s.s.w.a.i.FilterSecurityInterceptor    : Previously Authenticated: org.springframework.security.authentication.AnonymousAuthenticationToken@9055c2bc: Principal: anonymousUser; Credentials: [PROTECTED]; Authenticated: true; Details: org.springframework.security.web.authentication.WebAuthenticationDetails@b364: RemoteIpAddress: 0:0:0:0:0:0:0:1; SessionId: null; Granted Authorities: ROLE_ANONYMOUS
2017-01-03 21:38:38.071 DEBUG 32624 --- [io-8080-exec-10] o.s.s.access.vote.AffirmativeBased       : Voter: org.springframework.security.web.access.expression.WebExpressionVoter@6bd96c27, returned: -1
2017-01-03 21:38:38.072 DEBUG 32624 --- [io-8080-exec-10] o.s.s.w.a.ExceptionTranslationFilter     : Access is denied (user is anonymous); redirecting to authentication entry point

org.springframework.security.access.AccessDeniedException: Access is denied
    at org.springframework.security.access.vote.AffirmativeBased.decide(AffirmativeBased.java:84) ~[spring-security-core-4.1.3.RELEASE.jar:4.1.3.RELEASE]
    at org.springframework.security.access.intercept.AbstractSecurityInterceptor.beforeInvocation(AbstractSecurityInterceptor.java:233) ~[spring-security-core-4.1.3.RELEASE.jar:4.1.3.RELEASE]

2017-01-03 21:38:38.073 DEBUG 32624 --- [io-8080-exec-10] o.s.s.w.util.matcher.AndRequestMatcher   : Trying to match using Ant [pattern='/**', GET]
2017-01-03 21:38:38.073 DEBUG 32624 --- [io-8080-exec-10] o.s.s.w.u.matcher.AntPathRequestMatcher  : Request '/user' matched by universal pattern '/**'
2017-01-03 21:38:38.073 DEBUG 32624 --- [io-8080-exec-10] o.s.s.w.util.matcher.AndRequestMatcher   : Trying to match using NegatedRequestMatcher [requestMatcher=Ant [pattern='/**/favicon.ico']]
2017-01-03 21:38:38.073 DEBUG 32624 --- [io-8080-exec-10] o.s.s.w.u.matcher.AntPathRequestMatcher  : Checking match of request : '/user'; against '/**/favicon.ico'
2017-01-03 21:38:38.073 DEBUG 32624 --- [io-8080-exec-10] o.s.s.w.u.matcher.NegatedRequestMatcher  : matches = true
2017-01-03 21:38:38.073 DEBUG 32624 --- [io-8080-exec-10] o.s.s.w.util.matcher.AndRequestMatcher   : Trying to match using NegatedRequestMatcher [requestMatcher=MediaTypeRequestMatcher [contentNegotiationStrategy=org.springframework.web.accept.ContentNegotiationManager@47099aec, matchingMediaTypes=[application/json], useEquals=false, ignoredMediaTypes=[*/*]]]
2017-01-03 21:38:38.074 DEBUG 32624 --- [io-8080-exec-10] o.s.s.w.u.m.MediaTypeRequestMatcher      : httpRequestMediaTypes=[application/json, text/plain, */*]
2017-01-03 21:38:38.074 DEBUG 32624 --- [io-8080-exec-10] o.s.s.w.u.m.MediaTypeRequestMatcher      : Processing application/json
2017-01-03 21:38:38.074 DEBUG 32624 --- [io-8080-exec-10] o.s.s.w.u.m.MediaTypeRequestMatcher      : application/json .isCompatibleWith application/json = true
2017-01-03 21:38:38.074 DEBUG 32624 --- [io-8080-exec-10] o.s.s.w.u.matcher.NegatedRequestMatcher  : matches = false
2017-01-03 21:38:38.074 DEBUG 32624 --- [io-8080-exec-10] o.s.s.w.util.matcher.AndRequestMatcher   : Did not match
2017-01-03 21:38:38.074 DEBUG 32624 --- [io-8080-exec-10] o.s.s.w.s.HttpSessionRequestCache        : Request not saved as configured RequestMatcher did not match
2017-01-03 21:38:38.074 DEBUG 32624 --- [io-8080-exec-10] o.s.s.w.a.ExceptionTranslationFilter     : Calling Authentication entry point.
2017-01-03 21:38:38.074 DEBUG 32624 --- [io-8080-exec-10] s.w.a.DelegatingAuthenticationEntryPoint : Trying to match using RequestHeaderRequestMatcher [expectedHeaderName=X-Requested-With, expectedHeaderValue=XMLHttpRequest]
2017-01-03 21:38:38.074 DEBUG 32624 --- [io-8080-exec-10] s.w.a.DelegatingAuthenticationEntryPoint : Match found! Executing org.springframework.security.web.authentication.HttpStatusEntryPoint@301fca8
2017-01-03 21:38:38.074 DEBUG 32624 --- [io-8080-exec-10] o.s.s.w.header.writers.HstsHeaderWriter  : Not injecting HSTS header since it did not match the requestMatcher org.springframework.security.web.header.writers.HstsHeaderWriter$SecureRequestMatcher@e0735a1
2017-01-03 21:38:38.074 DEBUG 32624 --- [io-8080-exec-10] w.c.HttpSessionSecurityContextRepository : SecurityContext is empty or contents are anonymous - context will not be stored in HttpSession.
2017-01-03 21:38:38.074 DEBUG 32624 --- [io-8080-exec-10] s.s.w.c.SecurityContextPersistenceFilter : SecurityContextHolder now cleared, as request processing completed
2017-01-03 21:39:24.188 DEBUG 32624 --- [nio-8080-exec-1] o.s.s.w.u.matcher.AntPathRequestMatcher  : Checking match of request : '/user'; against '/error'
2017-01-03 21:39:24.188 DEBUG 32624 --- [nio-8080-exec-1] o.s.security.web.FilterChainProxy        : /user at position 1 of 13 in additional filter chain; firing Filter: 'WebAsyncManagerIntegrationFilter'
2017-01-03 21:39:24.188 DEBUG 32624 --- [nio-8080-exec-1] o.s.security.web.FilterChainProxy        : /user at position 2 of 13 in additional filter chain; firing Filter: 'SecurityContextPersistenceFilter'
2017-01-03 21:39:24.188 DEBUG 32624 --- [nio-8080-exec-1] w.c.HttpSessionSecurityContextRepository : No HttpSession currently exists
2017-01-03 21:39:24.188 DEBUG 32624 --- [nio-8080-exec-1] w.c.HttpSessionSecurityContextRepository : No SecurityContext was available from the HttpSession: null. A new one will be created.
2017-01-03 21:39:24.188 DEBUG 32624 --- [nio-8080-exec-1] o.s.security.web.FilterChainProxy        : /user at position 3 of 13 in additional filter chain; firing Filter: 'HeaderWriterFilter'
2017-01-03 21:39:24.188 DEBUG 32624 --- [nio-8080-exec-1] o.s.security.web.FilterChainProxy        : /user at position 4 of 13 in additional filter chain; firing Filter: 'CsrfFilter'
2017-01-03 21:39:24.188 DEBUG 32624 --- [nio-8080-exec-1] o.s.security.web.FilterChainProxy        : /user at position 5 of 13 in additional filter chain; firing Filter: 'LogoutFilter'
2017-01-03 21:39:24.188 DEBUG 32624 --- [nio-8080-exec-1] o.s.s.w.u.matcher.AntPathRequestMatcher  : Request 'GET /user' doesn't match 'POST /logout
2017-01-03 21:39:24.188 DEBUG 32624 --- [nio-8080-exec-1] o.s.security.web.FilterChainProxy        : /user at position 6 of 13 in additional filter chain; firing Filter: 'ConcurrentSessionFilter'
2017-01-03 21:39:24.188 DEBUG 32624 --- [nio-8080-exec-1] o.s.security.web.FilterChainProxy        : /user at position 7 of 13 in additional filter chain; firing Filter: 'BasicAuthenticationFilter'
2017-01-03 21:39:24.188 DEBUG 32624 --- [nio-8080-exec-1] o.s.s.w.a.www.BasicAuthenticationFilter  : Basic Authentication Authorization header found for user 'user'
2017-01-03 21:39:24.188 DEBUG 32624 --- [nio-8080-exec-1] o.s.s.authentication.ProviderManager     : Authentication attempt using org.springframework.security.authentication.dao.DaoAuthenticationProvider
2017-01-03 21:39:24.189 DEBUG 32624 --- [nio-8080-exec-1] o.s.s.w.a.www.BasicAuthenticationFilter  : Authentication success: org.springframework.security.authentication.UsernamePasswordAuthenticationToken@442b5a9f: Principal: org.springframework.security.core.userdetails.User@36ebcb: Username: user; Password: [PROTECTED]; Enabled: true; AccountNonExpired: true; credentialsNonExpired: true; AccountNonLocked: true; Granted Authorities: ROLE_USER; Credentials: [PROTECTED]; Authenticated: true; Details: org.springframework.security.web.authentication.WebAuthenticationDetails@b364: RemoteIpAddress: 0:0:0:0:0:0:0:1; SessionId: null; Granted Authorities: ROLE_USER
2017-01-03 21:39:24.189 DEBUG 32624 --- [nio-8080-exec-1] o.s.security.web.FilterChainProxy        : /user at position 8 of 13 in additional filter chain; firing Filter: 'RequestCacheAwareFilter'
2017-01-03 21:39:24.189 DEBUG 32624 --- [nio-8080-exec-1] o.s.security.web.FilterChainProxy        : /user at position 9 of 13 in additional filter chain; firing Filter: 'SecurityContextHolderAwareRequestFilter'
2017-01-03 21:39:24.189 DEBUG 32624 --- [nio-8080-exec-1] o.s.security.web.FilterChainProxy        : /user at position 10 of 13 in additional filter chain; firing Filter: 'AnonymousAuthenticationFilter'
2017-01-03 21:39:24.189 DEBUG 32624 --- [nio-8080-exec-1] o.s.s.w.a.AnonymousAuthenticationFilter  : SecurityContextHolder not populated with anonymous token, as it already contained: 'org.springframework.security.authentication.UsernamePasswordAuthenticationToken@442b5a9f: Principal: org.springframework.security.core.userdetails.User@36ebcb: Username: user; Password: [PROTECTED]; Enabled: true; AccountNonExpired: true; credentialsNonExpired: true; AccountNonLocked: true; Granted Authorities: ROLE_USER; Credentials: [PROTECTED]; Authenticated: true; Details: org.springframework.security.web.authentication.WebAuthenticationDetails@b364: RemoteIpAddress: 0:0:0:0:0:0:0:1; SessionId: null; Granted Authorities: ROLE_USER'
2017-01-03 21:39:24.189 DEBUG 32624 --- [nio-8080-exec-1] o.s.security.web.FilterChainProxy        : /user at position 11 of 13 in additional filter chain; firing Filter: 'SessionManagementFilter'
2017-01-03 21:39:24.189 DEBUG 32624 --- [nio-8080-exec-1] s.CompositeSessionAuthenticationStrategy : Delegating to org.springframework.security.web.authentication.session.ConcurrentSessionControlAuthenticationStrategy@2bf94401
2017-01-03 21:39:24.191 DEBUG 32624 --- [nio-8080-exec-1] o.s.s.w.session.SessionManagementFilter  : SessionAuthenticationStrategy rejected the authentication object

org.springframework.security.web.authentication.session.SessionAuthenticationException: Maximum sessions of 1 for this principal exceeded
    at org.springframework.security.web.authentication.session.ConcurrentSessionControlAuthenticationStrategy.allowableSessionsExceeded(ConcurrentSessionControlAuthenticationStrategy.java:153) ~[spring-security-web-4.1.3.RELEASE.jar:4.1.3.RELEASE]
    at org.springframework.security.web.authentication.session.ConcurrentSessionControlAuthenticationStrategy.onAuthentication(ConcurrentSessionControlAuthenticationStrategy.java:123) ~[spring-security-web-4.1.3.RELEASE.jar:4.1.3.RELEASE]


2017-01-03 21:39:24.192 DEBUG 32624 --- [nio-8080-exec-1] .a.SimpleUrlAuthenticationFailureHandler : No failure URL set, sending 401 Unauthorized error
2017-01-03 21:39:24.192 DEBUG 32624 --- [nio-8080-exec-1] o.s.s.w.header.writers.HstsHeaderWriter  : Not injecting HSTS header since it did not match the requestMatcher org.springframework.security.web.header.writers.HstsHeaderWriter$SecureRequestMatcher@e0735a1
2017-01-03 21:39:24.192 DEBUG 32624 --- [nio-8080-exec-1] w.c.HttpSessionSecurityContextRepository : SecurityContext is empty or contents are anonymous - context will not be stored in HttpSession.
2017-01-03 21:39:24.192 DEBUG 32624 --- [nio-8080-exec-1] s.s.w.c.SecurityContextPersistenceFilter : SecurityContextHolder now cleared, as request processing completed
</code></pre>
",5248299,,5248299,,2017-01-03 18:53:15,2017-01-04 6:42:30,Spring Security logout and Maximum sessions,<java><spring><spring-mvc><session><spring-security>,1,0,3,,
Spring,41578040,1,41771377,106,1/20/2017 19:56:36,10,,1/10/2017 20:44:03,,2,778,"<p>I've found similar <a href=""https://stackoverflow.com/questions/36674438/multiple-resource-server-oauth2-clients-spring-oauth2-sso"">issue</a> but it's unanswered, so I suppose I'm going to duplicate question a little.</p>

<p>I am using Spring OAuth2 to implement separate resource and custom authentification servers. 
I've already configured interaction with auth server through issuing&amp;validating JWT tokens and everything seems fine.</p>

<p>Now I'm trying to add SSO functionality but really stuck with it. I've researched the official Spring <a href=""https://github.com/spring-guides/tut-spring-boot-oauth2"" rel=""nofollow noreferrer"">examples</a> and attached guide but it is very short worded when it comes to connecting SSO part with custom server authentication. And actually author uses only external provider resource ('user' info) to show process.</p>

<p>I think it is normal thing to have all this SSO means of authentication and also custom registration. I can see it works well with stackoverflow for example.</p>

<p>I am loking for directions where to find any info about handling on resource server different kind of tokens issued by multiply SSO providers and also from custom auth server.
Maybe I can use auth chain to do this and some mean to distinguish token format to know how to process it. Is it possible with Spring OAuth2? Or I need to do this magic somehow manually?</p>

<p>For now I have just one 'maybe strange' idea: 
To not involve my own resource server with this SSO stuff at all. After receiving Facebook (for example) token - just exchange it for api JWT token with custom auth server (associating or creating user on the way) and then work with resource server on standard basics</p>

<p><strong>EDITED:</strong>
I've found at least something. I've read about configuring filters in authorization chain and translate given social tokens to my custom JWT-s as 'post authenticate'(not a crazy idea after all). But it mostly done with SpringSocial. 
So now question is: how to do that?
Forgot to say that I am using Password Grant for authentication on custom server. Clients will be only trusted application and I do not even sure about browser client (thinking about only native mobile options). Even if I decide to have browser client I'll make sure it's going to have backend to store sencetive information</p>
",3778348,,-1,,2017-05-23 12:26:17,2017-03-29 17:42:17,Spring OAuth2: support auth and resource access with both SSO and custom auth server,<spring-boot><single-sign-on><spring-security-oauth2>,1,0,1,,
Spring,42102689,1,42382404,107,2/22/2017 3:53:37,14,,2/8/2017 0:44:24,,1,2727,"<p>i try to use spring session and i dowload this project from git 
<a href=""https://github.com/spring-guides/tut-spring-security-and-angular-js/tree/master/spring-session"" rel=""nofollow noreferrer"">https://github.com/spring-guides/tut-spring-security-and-angular-js/tree/master/spring-session</a></p>

<p>and i get this error 
APPLICATION FAILED TO START</p>

<hr>

<p>Description:</p>

<p>Parameter 0 of method sessionRedisTemplate in org.springframework.session.data.redis.config.annotation.web.http.RedisHttpSessionConfiguration required a bean of type 'org.springframework.data.redis.connection.RedisConnectionFactory' that could not be found.</p>

<p>Action:</p>

<p>Consider defining a bean of type 'org.springframework.data.redis.connection.RedisConnectionFactory' in your configuration.</p>
",6698148,,,,,2017-02-22 3:53:37,Consider defining a bean of type 'org.springframework.data.redis.connection.RedisConnectionFactory' in your configuration,<spring-security><spring-session><spring-data-redis>,1,0,,,
Spring,42420125,1,42434577,108,2/24/2017 9:03:57,1,,2/23/2017 15:38:52,,2,596,"<p>Could not obtain user details from token when trying <a href=""https://github.com/spring-guides/tut-spring-boot-oauth2/tree/master/manual"" rel=""nofollow noreferrer"">Spring-Boot-OAuth2 manual</a> sample for Slack.com</p>

<p>Sample works perfectly for facebook, so I tried change for slack with below parameters:</p>

<p>application.yml</p>

<pre><code>slack:
  client:
    clientId: ID
    clientSecret: PASS
    accessTokenUri: https://slack.com/api/oauth.access
    userAuthorizationUri: https://slack.com/oauth/authorize
    scope: ""identity.basic,identity.email""
  resource:
    userInfoUri: https://slack.com/api/users.identity?token=
</code></pre>

<p>SocialApplication.class modified:</p>

<pre><code>private Filter ssoFilter() {
    OAuth2ClientAuthenticationProcessingFilter slackFilter = new OAuth2ClientAuthenticationProcessingFilter(
            ""/login/slack"");
    OAuth2RestTemplate slackTemplate = new OAuth2RestTemplate(slack(), oauth2ClientContext);
    slackFilter.setRestTemplate(slackTemplate);
    UserInfoTokenServices tokenServices = new UserInfoTokenServices(slackResource().getUserInfoUri(),
            slack().getClientId());
    tokenServices.setRestTemplate(slackTemplate);
    slackFilter.setTokenServices(
            new UserInfoTokenServices(slackResource().getUserInfoUri(), slack().getClientId()));
    return slackFilter;
}

@Bean
@ConfigurationProperties(""slack.client"")
public AuthorizationCodeResourceDetails slack() {
    return new AuthorizationCodeResourceDetails();;
}

@Bean
@ConfigurationProperties(""slack.resource"")
public ResourceServerProperties slackResource() {
    return new ResourceServerProperties();
}
</code></pre>

<p>Log:</p>

<pre><code>2017-02-23 16:21:17.480 DEBUG 3757 --- [nio-8080-exec-9] o.s.s.web.util.matcher.OrRequestMatcher  : Trying to match using Ant [pattern='/css/**']
2017-02-23 16:21:17.480 DEBUG 3757 --- [nio-8080-exec-9] o.s.s.w.u.matcher.AntPathRequestMatcher  : Checking match of request : '/login/slack'; against '/css/**'
2017-02-23 16:21:17.480 DEBUG 3757 --- [nio-8080-exec-9] o.s.s.web.util.matcher.OrRequestMatcher  : Trying to match using Ant [pattern='/js/**']
2017-02-23 16:21:17.480 DEBUG 3757 --- [nio-8080-exec-9] o.s.s.w.u.matcher.AntPathRequestMatcher  : Checking match of request : '/login/slack'; against '/js/**'
2017-02-23 16:21:17.480 DEBUG 3757 --- [nio-8080-exec-9] o.s.s.web.util.matcher.OrRequestMatcher  : Trying to match using Ant [pattern='/images/**']
2017-02-23 16:21:17.481 DEBUG 3757 --- [nio-8080-exec-9] o.s.s.w.u.matcher.AntPathRequestMatcher  : Checking match of request : '/login/slack'; against '/images/**'
2017-02-23 16:21:17.481 DEBUG 3757 --- [nio-8080-exec-9] o.s.s.web.util.matcher.OrRequestMatcher  : Trying to match using Ant [pattern='/webjars/**']
2017-02-23 16:21:17.481 DEBUG 3757 --- [nio-8080-exec-9] o.s.s.w.u.matcher.AntPathRequestMatcher  : Checking match of request : '/login/slack'; against '/webjars/**'
2017-02-23 16:21:17.481 DEBUG 3757 --- [nio-8080-exec-9] o.s.s.web.util.matcher.OrRequestMatcher  : Trying to match using Ant [pattern='/**/favicon.ico']
2017-02-23 16:21:17.482 DEBUG 3757 --- [nio-8080-exec-9] o.s.s.w.u.matcher.AntPathRequestMatcher  : Checking match of request : '/login/slack'; against '/**/favicon.ico'
2017-02-23 16:21:17.482 DEBUG 3757 --- [nio-8080-exec-9] o.s.s.web.util.matcher.OrRequestMatcher  : Trying to match using Ant [pattern='/error']
2017-02-23 16:21:17.482 DEBUG 3757 --- [nio-8080-exec-9] o.s.s.w.u.matcher.AntPathRequestMatcher  : Checking match of request : '/login/slack'; against '/error'
2017-02-23 16:21:17.483 DEBUG 3757 --- [nio-8080-exec-9] o.s.s.web.util.matcher.OrRequestMatcher  : No matches found
2017-02-23 16:21:17.483 DEBUG 3757 --- [nio-8080-exec-9] o.s.s.w.u.matcher.AntPathRequestMatcher  : Request '/login/slack' matched by universal pattern '/**'
2017-02-23 16:21:17.483 DEBUG 3757 --- [nio-8080-exec-9] o.s.security.web.FilterChainProxy        : /login/slack at position 1 of 12 in additional filter chain; firing Filter: 'WebAsyncManagerIntegrationFilter'
2017-02-23 16:21:17.484 DEBUG 3757 --- [nio-8080-exec-9] o.s.security.web.FilterChainProxy        : /login/slack at position 2 of 12 in additional filter chain; firing Filter: 'SecurityContextPersistenceFilter'
2017-02-23 16:21:17.484 DEBUG 3757 --- [nio-8080-exec-9] w.c.HttpSessionSecurityContextRepository : HttpSession returned null object for SPRING_SECURITY_CONTEXT
2017-02-23 16:21:17.484 DEBUG 3757 --- [nio-8080-exec-9] w.c.HttpSessionSecurityContextRepository : No SecurityContext was available from the HttpSession: org.apache.catalina.session.StandardSessionFacade@761167a. A new one will be created.
2017-02-23 16:21:17.484 DEBUG 3757 --- [nio-8080-exec-9] o.s.security.web.FilterChainProxy        : /login/slack at position 3 of 12 in additional filter chain; firing Filter: 'HeaderWriterFilter'
2017-02-23 16:21:17.485 DEBUG 3757 --- [nio-8080-exec-9] o.s.s.w.header.writers.HstsHeaderWriter  : Not injecting HSTS header since it did not match the requestMatcher org.springframework.security.web.header.writers.HstsHeaderWriter$SecureRequestMatcher@a5843f5
2017-02-23 16:21:17.485 DEBUG 3757 --- [nio-8080-exec-9] o.s.security.web.FilterChainProxy        : /login/slack at position 4 of 12 in additional filter chain; firing Filter: 'CsrfFilter'
2017-02-23 16:21:17.485 DEBUG 3757 --- [nio-8080-exec-9] o.s.security.web.FilterChainProxy        : /login/slack at position 5 of 12 in additional filter chain; firing Filter: 'LogoutFilter'
2017-02-23 16:21:17.485 DEBUG 3757 --- [nio-8080-exec-9] o.s.s.w.u.matcher.AntPathRequestMatcher  : Request 'GET /login/slack' doesn't match 'POST /logout
2017-02-23 16:21:17.486 DEBUG 3757 --- [nio-8080-exec-9] o.s.security.web.FilterChainProxy        : /login/slack at position 6 of 12 in additional filter chain; firing Filter: 'OAuth2ClientAuthenticationProcessingFilter'
2017-02-23 16:21:17.486 DEBUG 3757 --- [nio-8080-exec-9] o.s.s.w.u.matcher.AntPathRequestMatcher  : Checking match of request : '/login/slack'; against '/login/slack'
2017-02-23 16:21:17.486 DEBUG 3757 --- [nio-8080-exec-9] uth2ClientAuthenticationProcessingFilter : Request is to process authentication
2017-02-23 16:21:17.543 DEBUG 3757 --- [nio-8080-exec-9] o.s.s.oauth2.client.OAuth2RestTemplate   : Created GET request for ""https://slack.com/api/users.identity?token=""
2017-02-23 16:21:17.543 DEBUG 3757 --- [nio-8080-exec-9] o.s.s.oauth2.client.OAuth2RestTemplate   : Setting request Accept header to [application/json, application/*+json]
2017-02-23 16:21:17.764 DEBUG 3757 --- [nio-8080-exec-9] o.s.s.oauth2.client.OAuth2RestTemplate   : GET request for ""https://slack.com/api/users.identity?token="" resulted in 200 (OK)
2017-02-23 16:21:17.764 DEBUG 3757 --- [nio-8080-exec-9] o.s.s.oauth2.client.OAuth2RestTemplate   : Reading [interface java.util.Map] as ""application/json;charset=utf-8"" using [org.springframework.http.converter.json.MappingJackson2HttpMessageConverter@8914cc4]
2017-02-23 16:21:17.767 DEBUG 3757 --- [nio-8080-exec-9] uth2ClientAuthenticationProcessingFilter : Authentication request failed: org.springframework.security.authentication.BadCredentialsException: Could not obtain user details from token

org.springframework.security.authentication.BadCredentialsException: Could not obtain user details from token
    at org.springframework.security.oauth2.client.filter.OAuth2ClientAuthenticationProcessingFilter.attemptAuthentication(OAuth2ClientAuthenticationProcessingFilter.java:122) ~[spring-security-oauth2-2.0.12.RELEASE.jar!/:na]
    at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:212) ~[spring-security-web-4.2.1.RELEASE.jar!/:4.2.1.RELEASE]
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:331) [spring-security-web-4.2.1.RELEASE.jar!/:4.2.1.RELEASE]
    at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:116) [spring-security-web-4.2.1.RELEASE.jar!/:4.2.1.RELEASE]
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:331) [spring-security-web-4.2.1.RELEASE.jar!/:4.2.1.RELEASE]
    at org.springframework.security.web.csrf.CsrfFilter.doFilterInternal(CsrfFilter.java:100) [spring-security-web-4.2.1.RELEASE.jar!/:4.2.1.RELEASE]
    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107) [spring-web-4.3.6.RELEASE.jar!/:4.3.6.RELEASE]
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:331) [spring-security-web-4.2.1.RELEASE.jar!/:4.2.1.RELEASE]
    at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:64) [spring-security-web-4.2.1.RELEASE.jar!/:4.2.1.RELEASE]
    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107) [spring-web-4.3.6.RELEASE.jar!/:4.3.6.RELEASE]
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:331) [spring-security-web-4.2.1.RELEASE.jar!/:4.2.1.RELEASE]
    at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:105) [spring-security-web-4.2.1.RELEASE.jar!/:4.2.1.RELEASE]
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:331) [spring-security-web-4.2.1.RELEASE.jar!/:4.2.1.RELEASE]
    at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:56) [spring-security-web-4.2.1.RELEASE.jar!/:4.2.1.RELEASE]
    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107) [spring-web-4.3.6.RELEASE.jar!/:4.3.6.RELEASE]
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:331) [spring-security-web-4.2.1.RELEASE.jar!/:4.2.1.RELEASE]
    at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:214) [spring-security-web-4.2.1.RELEASE.jar!/:4.2.1.RELEASE]
    at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:177) [spring-security-web-4.2.1.RELEASE.jar!/:4.2.1.RELEASE]
    at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:346) [spring-web-4.3.6.RELEASE.jar!/:4.3.6.RELEASE]
    at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:262) [spring-web-4.3.6.RELEASE.jar!/:4.3.6.RELEASE]
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:192) [tomcat-embed-core-8.5.11.jar!/:8.5.11]
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:165) [tomcat-embed-core-8.5.11.jar!/:8.5.11]
    at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:99) [spring-web-4.3.6.RELEASE.jar!/:4.3.6.RELEASE]
    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107) [spring-web-4.3.6.RELEASE.jar!/:4.3.6.RELEASE]
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:192) [tomcat-embed-core-8.5.11.jar!/:8.5.11]
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:165) [tomcat-embed-core-8.5.11.jar!/:8.5.11]
    at org.springframework.security.oauth2.client.filter.OAuth2ClientContextFilter.doFilter(OAuth2ClientContextFilter.java:60) [spring-security-oauth2-2.0.12.RELEASE.jar!/:na]
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:192) [tomcat-embed-core-8.5.11.jar!/:8.5.11]
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:165) [tomcat-embed-core-8.5.11.jar!/:8.5.11]
    at org.springframework.web.filter.HttpPutFormContentFilter.doFilterInternal(HttpPutFormContentFilter.java:105) [spring-web-4.3.6.RELEASE.jar!/:4.3.6.RELEASE]
    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107) [spring-web-4.3.6.RELEASE.jar!/:4.3.6.RELEASE]
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:192) [tomcat-embed-core-8.5.11.jar!/:8.5.11]
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:165) [tomcat-embed-core-8.5.11.jar!/:8.5.11]
    at org.springframework.web.filter.HiddenHttpMethodFilter.doFilterInternal(HiddenHttpMethodFilter.java:81) [spring-web-4.3.6.RELEASE.jar!/:4.3.6.RELEASE]
    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107) [spring-web-4.3.6.RELEASE.jar!/:4.3.6.RELEASE]
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:192) [tomcat-embed-core-8.5.11.jar!/:8.5.11]
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:165) [tomcat-embed-core-8.5.11.jar!/:8.5.11]
    at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:197) [spring-web-4.3.6.RELEASE.jar!/:4.3.6.RELEASE]
    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107) [spring-web-4.3.6.RELEASE.jar!/:4.3.6.RELEASE]
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:192) [tomcat-embed-core-8.5.11.jar!/:8.5.11]
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:165) [tomcat-embed-core-8.5.11.jar!/:8.5.11]
    at org.springframework.boot.actuate.autoconfigure.MetricsFilter.doFilterInternal(MetricsFilter.java:106) [spring-boot-actuator-1.5.1.RELEASE.jar!/:1.5.1.RELEASE]
    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107) [spring-web-4.3.6.RELEASE.jar!/:4.3.6.RELEASE]
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:192) [tomcat-embed-core-8.5.11.jar!/:8.5.11]
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:165) [tomcat-embed-core-8.5.11.jar!/:8.5.11]
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:198) [tomcat-embed-core-8.5.11.jar!/:8.5.11]
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:96) [tomcat-embed-core-8.5.11.jar!/:8.5.11]
    at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:474) [tomcat-embed-core-8.5.11.jar!/:8.5.11]
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:140) [tomcat-embed-core-8.5.11.jar!/:8.5.11]
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:79) [tomcat-embed-core-8.5.11.jar!/:8.5.11]
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:87) [tomcat-embed-core-8.5.11.jar!/:8.5.11]
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:349) [tomcat-embed-core-8.5.11.jar!/:8.5.11]
    at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:783) [tomcat-embed-core-8.5.11.jar!/:8.5.11]
    at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:66) [tomcat-embed-core-8.5.11.jar!/:8.5.11]
    at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:798) [tomcat-embed-core-8.5.11.jar!/:8.5.11]
    at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1434) [tomcat-embed-core-8.5.11.jar!/:8.5.11]
    at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49) [tomcat-embed-core-8.5.11.jar!/:8.5.11]
    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1145) [na:1.7.0_71]
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:615) [na:1.7.0_71]
    at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61) [tomcat-embed-core-8.5.11.jar!/:8.5.11]
    at java.lang.Thread.run(Thread.java:745) [na:1.7.0_71]
Caused by: org.springframework.security.oauth2.common.exceptions.InvalidTokenException: xoxp-9927885091-14802285653............
    at org.springframework.boot.autoconfigure.security.oauth2.resource.UserInfoTokenServices.loadAuthentication(UserInfoTokenServices.java:93) ~[spring-boot-autoconfigure-1.5.1.RELEASE.jar!/:1.5.1.RELEASE]
    at org.springframework.security.oauth2.client.filter.OAuth2ClientAuthenticationProcessingFilter.attemptAuthentication(OAuth2ClientAuthenticationProcessingFilter.java:112) ~[spring-security-oauth2-2.0.12.RELEASE.jar!/:na]
    ... 60 common frames omitted

2017-02-23 16:21:17.769 DEBUG 3757 --- [nio-8080-exec-9] uth2ClientAuthenticationProcessingFilter : Updated SecurityContextHolder to contain null Authentication
2017-02-23 16:21:17.769 DEBUG 3757 --- [nio-8080-exec-9] uth2ClientAuthenticationProcessingFilter : Delegating to authentication failure handler org.springframework.security.web.authentication.SimpleUrlAuthenticationFailureHandler@5ce08277
2017-02-23 16:21:17.769 DEBUG 3757 --- [nio-8080-exec-9] .a.SimpleUrlAuthenticationFailureHandler : No failure URL set, sending 401 Unauthorized error
2017-02-23 16:21:17.769 DEBUG 3757 --- [nio-8080-exec-9] w.c.HttpSessionSecurityContextRepository : SecurityContext is empty or contents are anonymous - context will not be stored in HttpSession.
2017-02-23 16:21:17.769 DEBUG 3757 --- [nio-8080-exec-9] s.s.w.c.SecurityContextPersistenceFilter : SecurityContextHolder now cleared, as request processing completed
</code></pre>

<p>Appreciate any help</p>
",2609729,,2609729,,2017-02-23 16:09:19,2018-03-10 4:50:22,Spring Boot Oauth2 with slack,<spring-boot><oauth-2.0><slack>,1,0,,,
Spring,42721597,1,42764690,109,3/13/2017 13:19:40,3,,3/10/2017 15:08:14,,1,7037,"<p>As I followed this tutorial: <a href=""https://spring.io/guides/gs/handling-form-submission/"" rel=""nofollow noreferrer"">https://spring.io/guides/gs/handling-form-submission/</a> after a while I came to a dead end. I tried to figure out what the problem is for some hours now. I hope you can help me.</p>

<p>When I submit my form, I get this error-message:</p>

<pre><code> There was an unexpected error (type=Method Not Allowed, status=405).
 Request method 'POST' not supported
</code></pre>

<p>My App (App.java):</p>

<pre><code>package de.poc.logging.main;
import org.springframework.boot.SpringApplication;
import org.springframework.boot.autoconfigure.SpringBootApplication;
@SpringBootApplication
public class App {
  public static void main(String[] args) {
    SpringApplication.run(App.class, args);
  }
}
</code></pre>

<p>My Controller (InformationController.java):</p>

<pre><code>package de.poc.logging.main;
import org.springframework.stereotype.Controller;
import org.springframework.ui.Model;
import org.springframework.web.bind.annotation.ModelAttribute;
import org.springframework.web.bind.annotation.RequestMapping;
import org.springframework.web.bind.annotation.RequestMethod;

@Controller
@RequestMapping(value = ""/info"")
public class InformationController {
  @RequestMapping(method = RequestMethod.GET, produces = ""text/html"")
  public String infoForm(Model model) {
    model.addAttribute(""information"", new Information());
    return ""infoForm.html"";
  }

  @RequestMapping(method = RequestMethod.POST, produces = ""text/html"")
  public String infoSubmit(@ModelAttribute Information information) {
    return ""infoResult.html"";
  }
}
</code></pre>

<p>I created an additional class for security (WebSecurityConf.java):</p>

<pre><code>package de.poc.logging.main.config;
import org.springframework.context.annotation.Configuration;
import org.springframework.security.config.annotation.web.builders.HttpSecurity;
import org.springframework.security.config.annotation.web.configuration.EnableWebSecurity;
import org.springframework.security.config.annotation.web.configuration.WebSecurityConfigurerAdapter;

@Configuration
@EnableWebSecurity
public class WebSecurityConfig extends WebSecurityConfigurerAdapter {
  @Override
  protected void configure(HttpSecurity http) throws Exception {
    http.headers()
        .frameOptions().sameOrigin()
        .httpStrictTransportSecurity().disable();
    http.csrf().disable();
  }
}
</code></pre>

<p>And I have following two HTML-Files:</p>

<p>infoForm.html:</p>

<pre><code>    &lt;!DOCTYPE HTML&gt;
    &lt;html xmlns:th=""http://www.thymeleaf.org""&gt;
    &lt;head&gt;
        &lt;title&gt;Getting Started: Handling Form Submission&lt;/title&gt;
        &lt;meta http-equiv=""Content-Type"" content=""text/html; charset=UTF-8""/&gt;
    &lt;/head&gt;
    &lt;body&gt;
    &lt;h1&gt;Form&lt;/h1&gt;
    &lt;form action=""#"" th:action=""@{/info}"" th:object=""${information}"" method=""post""&gt;
        &lt;p&gt;Id: &lt;input type=""text"" th:field=""*{id}""/&gt;&lt;/p&gt;
        &lt;p&gt;Message: &lt;input type=""text"" th:field=""*{content}""/&gt;&lt;/p&gt;
        &lt;p&gt;&lt;input type=""submit"" value=""Submit""/&gt;
            &lt;input type=""reset"" value=""Reset""/&gt;&lt;/p&gt;
        &lt;!--&lt;input type=""hidden"" th:name=""${_csrf.parameterName}"" th:value=""${_csrf.token}""/&gt;--&gt;
    &lt;/form&gt;
    &lt;/body&gt;
    &lt;/html&gt;
</code></pre>

<p>infoResult.html:</p>

<pre><code>&lt;!DOCTYPE HTML&gt;
&lt;html xmlns:th=""http://www.thymeleaf.org""&gt;
&lt;head&gt;
    &lt;title&gt;Getting Started: Handling Form Submission&lt;/title&gt;
    &lt;meta http-equiv=""Content-Type"" content=""text/html; charset=UTF-8""/&gt;
&lt;/head&gt;
&lt;body&gt;
&lt;h1&gt;Result&lt;/h1&gt;
&lt;p th:text=""'id: ' + ${information.id}""/&gt;
&lt;p th:text=""'content: ' + ${information.content}""/&gt;
&lt;a href=""/info""&gt;Submit another message&lt;/a&gt;
&lt;/body&gt;
&lt;/html&gt;
</code></pre>

<p>Edit (additional information):
my Information.java:</p>

<pre><code>package de.poc.logging.main;

public class Information {
  private long id;
  private String content;

  public long getId() {
    return id;
  }

  public String getContent() {
    return content;
  }

  public void setId(long id) {
    this.id = id;
  }

  public void setContent(String content) {
    this.content = content;
  }

}
</code></pre>

<p>my pom-dependencies:</p>

<pre><code>    &lt;dependencies&gt;
        &lt;dependency&gt;
            &lt;groupId&gt;junit&lt;/groupId&gt;
            &lt;artifactId&gt;junit&lt;/artifactId&gt;
        &lt;/dependency&gt;
        &lt;dependency&gt;
            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
            &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;
            &lt;version&gt;1.5.2.RELEASE&lt;/version&gt;
        &lt;/dependency&gt;
        &lt;dependency&gt;
            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
            &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;
            &lt;scope&gt;test&lt;/scope&gt;
            &lt;version&gt;1.5.2.RELEASE&lt;/version&gt;
        &lt;/dependency&gt;
        &lt;dependency&gt;
            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
            &lt;artifactId&gt;spring-boot-starter-security&lt;/artifactId&gt;
            &lt;version&gt;1.5.2.RELEASE&lt;/version&gt;
        &lt;/dependency&gt;
    &lt;/dependencies&gt;
</code></pre>

<p>I'm using Java 1.8u121 (jdk).</p>

<p>Edit2:
I tried 3 different versions of spring boot now.
Also I downloaded the project from here: <a href=""https://github.com/spring-guides/gs-handling-form-submission"" rel=""nofollow noreferrer"">https://github.com/spring-guides/gs-handling-form-submission</a> and added spring boot via pom.xml.
The downloaded project does not work for me.</p>

<p>I'm getting really frustrated.</p>
",7458242,,7458242,,2017-03-13 10:14:01,2017-03-13 13:19:40,Spring Boot - Request method 'POST' not supported (Method not allowed),<java><spring><spring-mvc><post>,3,2,,,
Spring,43150564,1,43150604,110,3/31/2017 22:31:56,0,,3/31/2017 22:27:24,,2,168,"<p>I was looking into some tutorial and stumbled on this code:</p>

<pre><code>public void run(String... args) throws Exception {
    eventBus.on($(""quotes""), receiver);
    publisher.publishQuotes(NUMBER_OF_QUOTES);
}
</code></pre>

<p>This is the first time I see <code>$(""quotes"")</code> in Java. I'd appreciate someone explaining to me what's going on there.</p>

<p>Here's the source:</p>

<p><a href=""https://github.com/spring-guides/deprecate-gs-messaging-reactor/blob/master/complete/src/main/java/hello/Application.java#L53"" rel=""nofollow noreferrer"">https://github.com/spring-guides/deprecate-gs-messaging-reactor/blob/master/complete/src/main/java/hello/Application.java#L53</a></p>

<p>Update:</p>

<p>This is not a question about $ as Java variable name. I know that it's a valid variable name. However, the format of $(""something"") looks JQuery-like; hence threw me off thinking that it's a special directive or something.</p>
",2471889,,2471889,,2017-04-02 21:59:55,2017-04-02 21:59:55,"What does $(""something"") mean in Java?",<java>,2,10,,,
Spring,36730903,1,43245998,111,4/6/2017 4:56:10,352,,4/19/2016 22:57:06,,5,8564,"<p>How do I add the custom <code>UserDetailsService</code> below to <a href=""https://github.com/spring-guides/tut-spring-security-and-angular-js/tree/master/oauth2"" rel=""noreferrer"">this Spring OAuth2 sample</a>?  </p>

<p>The default <code>user</code> with default <code>password</code> is defined in the <a href=""https://github.com/spring-guides/tut-spring-security-and-angular-js/blob/master/oauth2/authserver/src/main/resources/application.properties"" rel=""noreferrer""><code>application.properties</code></a> file of the <code>authserver</code> app.  </p>

<p>However, I would like to add the following custom <code>UserDetailsService</code> to <a href=""https://github.com/spring-guides/tut-spring-security-and-angular-js/tree/master/oauth2/authserver/src/main/java/demo"" rel=""noreferrer"">the <code>demo</code> package of the <code>authserver</code> app</a> for testing purposes:  </p>

<pre><code>package demo;

import java.util.List;
import org.springframework.security.core.GrantedAuthority;
import org.springframework.security.core.authority.AuthorityUtils;
import org.springframework.security.core.userdetails.UserDetails;
import org.springframework.security.core.userdetails.UsernameNotFoundException;
import org.springframework.security.provisioning.UserDetailsManager;
import org.springframework.stereotype.Service;

@Service
class Users implements UserDetailsManager {

    @Override
    public UserDetails loadUserByUsername(String username) throws UsernameNotFoundException {
        String password;
        List&lt;GrantedAuthority&gt; auth = AuthorityUtils.commaSeparatedStringToAuthorityList(""ROLE_USER"");
        if (username.equals(""Samwise"")) {
            auth = AuthorityUtils.commaSeparatedStringToAuthorityList(""ROLE_HOBBIT"");
            password = ""TheShire"";
        }
        else if (username.equals(""Frodo"")){
            auth = AuthorityUtils.commaSeparatedStringToAuthorityList(""ROLE_HOBBIT"");
            password = ""MyRing"";
        }
        else{throw new UsernameNotFoundException(""Username was not found. "");}
        return new org.springframework.security.core.userdetails.User(username, password, auth);
    }

    @Override
    public void createUser(UserDetails user) {// TODO Auto-generated method stub
    }

    @Override
    public void updateUser(UserDetails user) {// TODO Auto-generated method stub
    }

    @Override
    public void deleteUser(String username) {// TODO Auto-generated method stub
    }

    @Override
    public void changePassword(String oldPassword, String newPassword) {
        // TODO Auto-generated method stub
    }

    @Override
    public boolean userExists(String username) {
        // TODO Auto-generated method stub
        return false;
    }
}
</code></pre>

<p>As you can see, this <code>UserDetailsService</code> is not <code>autowired</code> yet, and it purposely uses insecure passwords because it is only designed for testing purposes.  </p>

<p><strong>What specific changes need to be made to <a href=""https://github.com/spring-guides/tut-spring-security-and-angular-js/tree/master/oauth2"" rel=""noreferrer"">the GitHub sample app</a> so that a user can login as <code>username=Samwise</code> with <code>password=TheShire</code>, or as <code>username=Frodo</code> with <code>password=MyRing</code>?</strong>  Do changes need to be made to <a href=""https://github.com/spring-guides/tut-spring-security-and-angular-js/blob/master/oauth2/authserver/src/main/java/demo/AuthserverApplication.java"" rel=""noreferrer""><code>AuthserverApplication.java</code></a> or elsewhere?</p>

<hr>

<p><strong>SUGGESTIONS:</strong>  </p>

<hr>

<p>The <a href=""http://projects.spring.io/spring-security-oauth/docs/oauth2.html#grant-types"" rel=""noreferrer"">Spring OAuth2 Developer Guide</a> says to use a <code>GlobalAuthenticationManagerConfigurer</code> to configure a <code>UserDetailsService</code> globally.  However, googling those names produces less than helpful results.  </p>

<p>Also, a different app that uses internal spring security INSTEAD OF OAuth uses the following syntax to hook up the <code>UserDetailsService</code>, but I am not sure how to adjust its syntax to the current OP:  </p>

<pre><code>@Order(Ordered.HIGHEST_PRECEDENCE)
@Configuration
protected static class AuthenticationSecurity extends GlobalAuthenticationConfigurerAdapter {

    @Autowired
    private Users users;

    @Override
    public void init(AuthenticationManagerBuilder auth) throws Exception {
        auth.userDetailsService(users);
    }
}
</code></pre>

<p>I tried using <code>@Autowire</code> inside the <code>OAuth2AuthorizationConfig</code> to connect <code>Users</code> to the <code>AuthorizationServerEndpointsConfigurer</code> as follows:  </p>

<pre><code>@Autowired//THIS IS A TEST
private Users users;//THIS IS A TEST

@Override
public void configure(AuthorizationServerEndpointsConfigurer endpoints) throws Exception {
   endpoints.authenticationManager(authenticationManager)
        .accessTokenConverter(jwtAccessTokenConverter())
        .userDetailsService(users)//DetailsService)//THIS LINE IS A TEST
        ;
}
</code></pre>

<p>But the Spring Boot logs indicate that the user <code>Samwise</code> was not found, which means that the <code>UserDetailsService</code> was not successfully hooked up.  Here is the relevant excerpt from the Spring Boot logs:  </p>

<pre><code>2016-04-20 15:34:39.998 DEBUG 5535 --- [nio-9999-exec-9] o.s.s.a.dao.DaoAuthenticationProvider    :  
        User 'Samwise' not found
2016-04-20 15:34:39.998 DEBUG 5535 --- [nio-9999-exec-9]   
        w.a.UsernamePasswordAuthenticationFilter :  
        Authentication request failed:  
        org.springframework.security.authentication.BadCredentialsException:  
        Bad credentials
</code></pre>

<p><strong>What else can I try?</strong></p>
",807797,,807797,,2016-04-20 22:42:57,2018-08-23 20:13:41,Add custom UserDetailsService to Spring Security OAuth2 app,<spring><spring-security><spring-boot><spring-security-oauth2><spring-oauth2>,2,0,3,,
Spring,43374658,1,43678846,112,4/28/2017 11:12:59,16,,4/12/2017 16:12:06,,1,897,"<p>I am using <code>@EnableOauth2Sso</code> following an architecture similar as the one described in Spring's <a href=""https://github.com/spring-guides/tut-spring-security-and-angular-js/tree/master/oauth2-vanilla"" rel=""nofollow noreferrer"">oauth2 tutorial</a>: an auth server, a zuul proxy that enables the sso, a separated UI application etc.</p>

<pre><code>Auth server   ----  Resource Server (Zuul app) ---- Angular UI App
</code></pre>

<p>The problem is that when the UI logs out against the resource server it successfully deletes the resource server JSESSIONID, then the user is redirected to a home page. When the user wants to login again, he's redirected to the auth server but instead of asking for the user+password, it considers he's still logged. The auth server JSESSIONID is still there and wasn't affected by the previous Resource Server lougout.</p>

<p>How could I also logout from the auth server?</p>
",1729795,,,,,2017-04-28 11:12:59,Spring Oauth2 SSO - Unable to logout from the Auth server,<angularjs><spring><spring-security><oauth-2.0><spring-security-oauth2>,2,0,2,,
Spring,45136514,1,45287340,113,7/24/2017 18:13:25,7,,7/17/2017 5:26:22,,1,1970,"<p>I have <em>resource, authorization</em> and _ui applications written using Spring Boot 1.5.3, OAuth2 and MongoDB. </p>

<p>The resources are going to be accessed from mobile apps as well as a couple of web applications (one for regular users and the other one for admins). The apps are quite similar to the <a href=""https://github.com/spring-guides/tut-spring-security-and-angular-js"" rel=""nofollow noreferrer"">samples</a> from the guides by Dave Syer. What different is that the users are stored in the database and the clients are stored in an xml file located in the resources folder of the authorization server.</p>

<p>I am struggling with the logon experience for the web users. Following the guides for the JWT based OAuth app, after the login page, the user is redirected to the authorization screen, which is not the desired behavior. I.e., <strong>I don't want my authorization server to ask if the user trusts my web application to access its resources</strong>. Instead, I want users redirected to the ui pages right after login, as one would expect.</p>

<p>I found <a href=""https://github.com/making/oauth2-sso-demo/tree/jwt"" rel=""nofollow noreferrer"">this project on GitHub</a> (very similar to the apps from the guide) which behaves exactly as I want, but once I start customizing it by adding my authentication and authorization implementation, it reverts back to using the authorization screen. Apparently, I am missing something, but I was not able to figure out what exactly.</p>

<p><strong>authorization/src/main/resourcs/application.yml</strong></p>

<pre><code>security:
  oauth2:
    client:
      client-id: trusted-app
      client-secret: secret
      scope: read, write
      auto-approve-scopes: .*
  authorization:
      check-token-access: permitAll()
server:
  port: 9999
  context-path: /uaa
mongo:
  db:
    name: myappname
</code></pre>

<p><strong>authorization/src/main/resourcs/client-details.xml</strong></p>

<pre><code>&lt;?xml version=""1.0"" encoding=""UTF-8""?&gt;
&lt;beans xmlns=""http://www.springframework.org/schema/beans""
   xmlns:xsi=""http://www.w3.org/2001/XMLSchema-instance""
   xmlns:oauth=""http://www.springframework.org/schema/security/oauth2""

   xsi:schemaLocation=""http://www.springframework.org/schema/beans
                    http://www.springframework.org/schema/beans/spring-beans.xsd
                    http://www.springframework.org/schema/security/oauth2
                    http://www.springframework.org/schema/security/spring-security-oauth2.xsd""&gt;

&lt;oauth:client-details-service id=""client-details-service""&gt;

    &lt;!-- Web Application clients --&gt;
    &lt;oauth:client
            client-id=""trusted-app""
            secret=""secret""
            authorized-grant-types=""authorization_code, password,refresh_token""
            authorities=""ROLE_WEB, ROLE_TRUSTED_CLIENT""
            access-token-validity=""${oauth.token.access.expiresInSeconds}""
            refresh-token-validity=""${oauth.token.refresh.expiresInSeconds}""/&gt;
    &lt;/oauth:client-details-service&gt;
&lt;/beans&gt;
</code></pre>

<p><strong>authorization/src/main/java/AuthorizationApplication.java</strong></p>

<pre><code>@SpringBootApplication
@RestController
public class AuthorizationApplication extends AuthorizationServerConfigurerAdapter {

    @RequestMapping(""/user"")
    @ResponseBody
    public Principal user(Principal user) {
        return user;
    }

    @Configuration
    static class MvcConfig extends WebMvcConfigurerAdapter {
        @Override
        public void addViewControllers(ViewControllerRegistry registry) {
            registry.addViewController(""login"").setViewName(""login"");
            registry.addViewController(""/"").setViewName(""index"");
        }
    }

    @Configuration
    @Order(-20)
    static class LoginConfig extends WebSecurityConfigurerAdapter {
        @Override
        protected void configure(HttpSecurity http) throws Exception {
            http
                .formLogin().loginPage(""/login"").permitAll()
            .and()
                .requestMatchers()
                .antMatchers(""/"", ""/login"", ""/oauth/authorize"", ""/oauth/confirm_access"")
            .and()
                .authorizeRequests()
                .anyRequest().authenticated();
        }
    }

    @Configuration
    @EnableAuthorizationServer
    @ImportResource({""classpath*:client-details.xml""})
    protected static class OAuth2AuthorizationConfig extends AuthorizationServerConfigurerAdapter {

        @Autowired
        private AuthenticationManager authenticationManager;

        @Resource(name=""client-details-service"")
        private ClientDetailsService clientDetailsService;

        @Override
        public void configure(ClientDetailsServiceConfigurer clients) throws Exception {
            clients.withClientDetails(clientDetailsService);
        }

        @Override
        public void configure(AuthorizationServerEndpointsConfigurer endpoints) throws Exception {
            endpoints
                .authenticationManager(authenticationManager)
                .accessTokenConverter(jwtAccessTokenConverter());
        }

        @Bean
        public JwtAccessTokenConverter jwtAccessTokenConverter() {
            JwtAccessTokenConverter converter = new JwtAccessTokenConverter();
            return converter;
        }
    }

    @Bean
    PasswordEncoder passwordEncoder(){
        return new StandardPasswordEncoder();
    }

    public static void main(String[] args) {
        SpringApplication.run(AuthorizationApplication.class, args);
    }

}
</code></pre>

<p><strong>authorization/src/main/java/mypackage/UserService.java</strong></p>

<pre><code>@Service
public class UserService implements UserDetailsService {

    private UserAccountRepository userAccountRepository;

    @Autowired
    public UserService(UserAccountRepository userAccountRepository){
        this.userAccountRepository = userAccountRepository;
    }

    @Override
    public UserDetails loadUserByUsername(String s) throws UsernameNotFoundException {

        UserAccount userAccount = userAccountRepository.findByEmail(s);

        if (userAccount != null) {
            return userAccount;
        } else {
            throw new UsernameNotFoundException(""could not find the user '"" + s + ""'"");
        }
   }
}
</code></pre>

<p><strong>ui/src/main/resources/application.yml</strong></p>

<pre><code>auth-server: http://localhost:9999/uaa
server:
  port: 8080
spring:
  aop:
    proxy-target-class: true
security:
  oauth2:
    client:
      clientId: trusted-app
      clientSecret: secret
      access-token-uri: ${auth-server}/oauth/token
      user-authorization-uri: ${auth-server}/oauth/authorize
      scope: read, write
    resource:
      token-info-uri: ${auth-server}/oauth/check_token
</code></pre>

<p><strong>ui/src/main/java/UiApplication.java</strong></p>

<pre><code>@SpringBootApplication
@EnableOAuth2Sso
public class UiApplication extends WebSecurityConfigurerAdapter{

    public static void main(String[] args) {
        SpringApplication.run(UiApplication.class, args);
    }

    @Bean
    OAuth2RestTemplate oauth2RestTemplate(OAuth2ClientContext oauth2ClientContext, OAuth2ProtectedResourceDetails details) {
        return new OAuth2RestTemplate(details, oauth2ClientContext);
    }
}
</code></pre>
",2888242,,,,,2017-07-24 18:13:25,OAuth2 SSO with Spring Boot without the authorization screen,<java><spring><spring-boot><jwt><spring-security-oauth2>,1,0,,,
Spring,27987068,1,45322933,114,7/26/2017 9:32:09,922,,1/16/2015 15:16:15,,11,6800,"<p>I've modified the Spring Boot JPA Data example (<a href=""https://github.com/spring-guides/gs-accessing-data-jpa.git"">https://github.com/spring-guides/gs-accessing-data-jpa.git</a>) slightly adding an Order entity and a corresponding one to many mapping to it from the customer.  When I run the example there are several Syntax Error in SQL Statement lines logged by Hibernate.  I'm trying to figure out why?  I've pasted the code for the entities and the console output from the application below.</p>

<pre><code>package hello;

import java.util.List;

import javax.persistence.Entity;
import javax.persistence.GeneratedValue;
import javax.persistence.GenerationType;
import javax.persistence.Id;
import javax.persistence.OneToMany;

@Entity
public class Customer {

@Id
@GeneratedValue(strategy=GenerationType.AUTO)
private long id;
private String firstName;
private String lastName;
@OneToMany(mappedBy=""customer"")
private List&lt;Order&gt; orders;


protected Customer() {}

public Customer(String firstName, String lastName) {
    this.firstName = firstName;
    this.lastName = lastName;
}

@Override
public String toString() {
    return String.format(
            ""Customer[id=%d, firstName='%s', lastName='%s']"",
            id, firstName, lastName);
}

}
</code></pre>

<p>And a corresponding Order entity:</p>

<pre><code>package hello;

import javax.persistence.Entity;
import javax.persistence.GeneratedValue;
import javax.persistence.GenerationType;
import javax.persistence.Id;
import javax.persistence.ManyToOne;

@Entity
public class Order {

@Id
@GeneratedValue(strategy=GenerationType.AUTO)
private long id;

protected Order() {}

double amount;

@ManyToOne
Customer customer;
}
</code></pre>

<p>And the console output:</p>

<pre><code>    .   ____          _            __ _ _
     /\\ / ___'_ __ _ _(_)_ __  __ _ \ \ \ \
    ( ( )\___ | '_ | '_| | '_ \/ _` | \ \ \ \
     \\/  ___)| |_)| | | | | || (_| |  ) ) ) )
      '  |____| .__|_| |_|_| |_\__, | / / / /
     =========|_|==============|___/=/_/_/_/
     :: Spring Boot ::       (v1.1.10.RELEASE)

    2015-01-16 08:56:53.116  INFO 27810 --- [           main] hello.Application                        : Starting Application on MKI with PID 27810 (/home/ole/Documents/workspace-sts-3.6.3.RELEASE/gs-accessing-data-jpa-complete/target/classes started by ole in /home/ole/Documents/workspace-sts-3.6.3.RELEASE/gs-accessing-data-jpa-complete)
    2015-01-16 08:56:53.149  INFO 27810 --- [           main] s.c.a.AnnotationConfigApplicationContext : Refreshing org.springframework.context.annotation.AnnotationConfigApplicationContext@5d59e6f1: startup date [Fri Jan 16 08:56:53 CST 2015]; root of context hierarchy
    2015-01-16 08:56:54.253  INFO 27810 --- [           main] j.LocalContainerEntityManagerFactoryBean : Building JPA container EntityManagerFactory for persistence unit 'default'
    2015-01-16 08:56:54.269  INFO 27810 --- [           main] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [
      name: default
      ...]
    2015-01-16 08:56:54.320  INFO 27810 --- [           main] org.hibernate.Version                    : HHH000412: Hibernate Core {4.3.7.Final}
    2015-01-16 08:56:54.322  INFO 27810 --- [           main] org.hibernate.cfg.Environment            : HHH000205: Loaded properties from resource hibernate.properties: {hibernate.connection.charSet=UTF-8, hibernate.dialect=org.hibernate.dialect.H2Dialect, hibernate.show_sql=true, hibernate.export.schema.delimiter=;, hibernate.bytecode.use_reflection_optimizer=false, hibernate.ejb.naming_strategy=org.hibernate.cfg.ImprovedNamingStrategy}
    2015-01-16 08:56:54.322  INFO 27810 --- [           main] org.hibernate.cfg.Environment            : HHH000021: Bytecode provider name : javassist
    2015-01-16 08:56:54.462  INFO 27810 --- [           main] o.hibernate.annotations.common.Version   : HCANN000001: Hibernate Commons Annotations {4.0.5.Final}
    2015-01-16 08:56:54.499  INFO 27810 --- [           main] org.hibernate.dialect.Dialect            : HHH000400: Using dialect: org.hibernate.dialect.H2Dialect
    2015-01-16 08:56:54.591  INFO 27810 --- [           main] o.h.h.i.ast.ASTQueryTranslatorFactory    : HHH000397: Using ASTQueryTranslatorFactory
    2015-01-16 08:56:54.751  INFO 27810 --- [           main] org.hibernate.tool.hbm2ddl.SchemaExport  : HHH000227: Running hbm2ddl schema export
    Hibernate: alter table order drop constraint FK_m6q2ofkj1g5aobtb2p00ajpqg if exists
    2015-01-16 08:56:54.752 ERROR 27810 --- [           main] org.hibernate.tool.hbm2ddl.SchemaExport  : HHH000389: Unsuccessful: alter table order drop constraint FK_m6q2ofkj1g5aobtb2p00ajpqg if exists
    2015-01-16 08:56:54.753 ERROR 27810 --- [           main] org.hibernate.tool.hbm2ddl.SchemaExport  : Syntax error in SQL statement ""ALTER TABLE ORDER[*] DROP CONSTRAINT FK_M6Q2OFKJ1G5AOBTB2P00AJPQG IF EXISTS ""; expected ""identifier""; SQL statement:
    alter table order drop constraint FK_m6q2ofkj1g5aobtb2p00ajpqg if exists [42001-176]
    Hibernate: drop table customer if exists
    Hibernate: drop table order if exists
    2015-01-16 08:56:54.753 ERROR 27810 --- [           main] org.hibernate.tool.hbm2ddl.SchemaExport  : HHH000389: Unsuccessful: drop table order if exists
    2015-01-16 08:56:54.753 ERROR 27810 --- [           main] org.hibernate.tool.hbm2ddl.SchemaExport  : Syntax error in SQL statement ""DROP TABLE ORDER[*] IF EXISTS ""; expected ""identifier""; SQL statement:
    drop table order if exists [42001-176]
    Hibernate: create table customer (id bigint generated by default as identity, first_name varchar(255), last_name varchar(255), primary key (id))
    Hibernate: create table order (id bigint generated by default as identity, amount double not null, customer_id bigint, primary key (id))
    2015-01-16 08:56:54.756 ERROR 27810 --- [           main] org.hibernate.tool.hbm2ddl.SchemaExport  : HHH000389: Unsuccessful: create table order (id bigint generated by default as identity, amount double not null, customer_id bigint, primary key (id))
    2015-01-16 08:56:54.756 ERROR 27810 --- [           main] org.hibernate.tool.hbm2ddl.SchemaExport  : Syntax error in SQL statement ""CREATE TABLE ORDER[*] (ID BIGINT GENERATED BY DEFAULT AS IDENTITY, AMOUNT DOUBLE NOT NULL, CUSTOMER_ID BIGINT, PRIMARY KEY (ID)) ""; expected ""identifier""; SQL statement:
    create table order (id bigint generated by default as identity, amount double not null, customer_id bigint, primary key (id)) [42001-176]
    Hibernate: alter table order add constraint FK_m6q2ofkj1g5aobtb2p00ajpqg foreign key (customer_id) references customer
    2015-01-16 08:56:54.757 ERROR 27810 --- [           main] org.hibernate.tool.hbm2ddl.SchemaExport  : HHH000389: Unsuccessful: alter table order add constraint FK_m6q2ofkj1g5aobtb2p00ajpqg foreign key (customer_id) references customer
    2015-01-16 08:56:54.757 ERROR 27810 --- [           main] org.hibernate.tool.hbm2ddl.SchemaExport  : Syntax error in SQL statement ""ALTER TABLE ORDER[*] ADD CONSTRAINT FK_M6Q2OFKJ1G5AOBTB2P00AJPQG FOREIGN KEY (CUSTOMER_ID) REFERENCES CUSTOMER ""; expected ""identifier""; SQL statement:
    alter table order add constraint FK_m6q2ofkj1g5aobtb2p00ajpqg foreign key (customer_id) references customer [42001-176]
    2015-01-16 08:56:54.757  INFO 27810 --- [           main] org.hibernate.tool.hbm2ddl.SchemaExport  : HHH000230: Schema export complete
    2015-01-16 08:56:55.085  INFO 27810 --- [           main] o.s.j.e.a.AnnotationMBeanExporter        : Registering beans for JMX exposure on startup
    2015-01-16 08:56:55.102  INFO 27810 --- [           main] hello.Application                        : Started Application in 2.286 seconds (JVM running for 2.604)
    Hibernate: insert into customer (id, first_name, last_name) values (null, ?, ?)
    Hibernate: insert into customer (id, first_name, last_name) values (null, ?, ?)
    Hibernate: insert into customer (id, first_name, last_name) values (null, ?, ?)
    Hibernate: insert into customer (id, first_name, last_name) values (null, ?, ?)
    Hibernate: insert into customer (id, first_name, last_name) values (null, ?, ?)
    Hibernate: select customer0_.id as id1_0_, customer0_.first_name as first_na2_0_, customer0_.last_name as last_nam3_0_ from customer customer0_
    Customers found with findAll():
    -------------------------------
    Customer[id=1, firstName='Jack', lastName='Bauer']
    Customer[id=2, firstName='Chloe', lastName='O'Brian']
    Customer[id=3, firstName='Kim', lastName='Bauer']
    Customer[id=4, firstName='David', lastName='Palmer']
    Customer[id=5, firstName='Michelle', lastName='Dessler']

    Hibernate: select customer0_.id as id1_0_0_, customer0_.first_name as first_na2_0_0_, customer0_.last_name as last_nam3_0_0_ from customer customer0_ where customer0_.id=?
    Customer found with findOne(1L):
    --------------------------------
    Customer[id=1, firstName='Jack', lastName='Bauer']

    Hibernate: select customer0_.id as id1_0_, customer0_.first_name as first_na2_0_, customer0_.last_name as last_nam3_0_ from customer customer0_ where customer0_.last_name=?
    Customer found with findByLastName('Bauer'):
    --------------------------------------------
    Customer[id=1, firstName='Jack', lastName='Bauer']
    Customer[id=3, firstName='Kim', lastName='Bauer']
    Hibernate: select customer0_.id as id1_0_, customer0_.first_name as first_na2_0_, customer0_.last_name as last_nam3_0_ from customer customer0_
    Hibernate: delete from customer where id=?
    Hibernate: delete from customer where id=?
    Hibernate: delete from customer where id=?
    Hibernate: delete from customer where id=?
    Hibernate: delete from customer where id=?
    2015-01-16 08:56:55.258  INFO 27810 --- [           main] s.c.a.AnnotationConfigApplicationContext : Closing org.springframework.context.annotation.AnnotationConfigApplicationContext@5d59e6f1: startup date [Fri Jan 16 08:56:53 CST 2015]; root of context hierarchy
    2015-01-16 08:56:55.259  INFO 27810 --- [           main] o.s.j.e.a.AnnotationMBeanExporter        : Unregistering JMX-exposed beans on shutdown
    2015-01-16 08:56:55.260  INFO 27810 --- [           main] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
    2015-01-16 08:56:55.261  INFO 27810 --- [           main] org.hibernate.tool.hbm2ddl.SchemaExport  : HHH000227: Running hbm2ddl schema export
    Hibernate: alter table order drop constraint FK_m6q2ofkj1g5aobtb2p00ajpqg if exists
    2015-01-16 08:56:55.261 ERROR 27810 --- [           main] org.hibernate.tool.hbm2ddl.SchemaExport  : HHH000389: Unsuccessful: alter table order drop constraint FK_m6q2ofkj1g5aobtb2p00ajpqg if exists
    2015-01-16 08:56:55.261 ERROR 27810 --- [           main] org.hibernate.tool.hbm2ddl.SchemaExport  : Syntax error in SQL statement ""ALTER TABLE ORDER[*] DROP CONSTRAINT FK_M6Q2OFKJ1G5AOBTB2P00AJPQG IF EXISTS ""; expected ""identifier""; SQL statement:
    alter table order drop constraint FK_m6q2ofkj1g5aobtb2p00ajpqg if exists [42001-176]
    Hibernate: drop table customer if exists
    Hibernate: drop table order if exists
    2015-01-16 08:56:55.263 ERROR 27810 --- [           main] org.hibernate.tool.hbm2ddl.SchemaExport  : HHH000389: Unsuccessful: drop table order if exists
    2015-01-16 08:56:55.263 ERROR 27810 --- [           main] org.hibernate.tool.hbm2ddl.SchemaExport  : Syntax error in SQL statement ""DROP TABLE ORDER[*] IF EXISTS ""; expected ""identifier""; SQL statement:
    drop table order if exists [42001-176]
    2015-01-16 08:56:55.263  INFO 27810 --- [           main] org.hibernate.tool.hbm2ddl.SchemaExport  : HHH000230: Schema export complete
</code></pre>

<p>Thoughts?  </p>

<p>TIA,
- Ole</p>
",1684269,,,,,2018-07-13 13:10:55,Spring Boot Hibernate Syntax Error in SQL Statement,<spring><hibernate><jpa><spring-boot><spring-data-jpa>,2,2,,,
Spring,45993586,1,45993917,115,9/1/2017 5:42:21,0,,9/1/2017 5:06:43,,2,300,"<p>I'm going through <a href=""https://github.com/spring-guides/gs-service-registration-and-discovery"" rel=""nofollow noreferrer"">this tutorial</a> and I don't see any configuration for the location / url of the eureka server (Only the <code>src/main/resources/bootstrap.properties</code> containing the name of the eureka client), so how does this client know where the Eureka server is? </p>
",1684269,,,,,2017-09-01 5:42:21,How does the eureka client find the eureka server in spring boot 1.5.2?,<spring><spring-boot><spring-cloud><spring-cloud-netflix>,1,0,,,
Spring,46162061,1,46162617,116,9/11/2017 18:56:11,0,,9/11/2017 18:20:41,,3,433,"<p>Recently I have been following this guide on how to persist data in a in-memory H2 database using Spring Boot:</p>

<ul>
<li>Guide: <a href=""https://spring.io/guides/gs/accessing-data-jpa/"" rel=""nofollow noreferrer"">https://spring.io/guides/gs/accessing-data-jpa/</a></li>
<li>Source code: <a href=""https://github.com/spring-guides/gs-accessing-data-jpa/"" rel=""nofollow noreferrer"">https://github.com/spring-guides/gs-accessing-data-jpa/</a></li>
</ul>

<p>In it, one first defines a <code>CustomerEntity</code> class and then a <code>CustomerRepository</code> interface. Then, in the main class, a lot of annotation magic is being done, which enables one to simple ""have"" a <code>CustomerRepository</code> instance, which can be used to persist data to the database, retrieve it, etc.</p>

<p>This is all fine, however, I need to use such a <code>CustomerRepository</code> instance outside of the main class, inside another class. Since the tutorial does not reveal the magic that was done to make it available in the main class, I do not know how to make it happen in the class that I need it in.</p>

<p>I have been trying to figure this out almost all day long, but I just get lost inside a jungle of articles all trying to explain which Spring annotation does what, and I am really exhausted now.</p>

<p>I want to do something like this:</p>

<pre><code>public class Foo {

  private CustomerRepository repo;

  // ...

  public void storeCustomer(String firstName, String lastName) {
    this.repository.save(new Customer(firstName, lastName));
  }

}
</code></pre>

<p>I would be very happy about some hints.</p>
",8593724,,,user8558216,2017-09-12 7:18:41,2017-09-12 7:18:41,How to get a CrudRepository instance?,<java><spring><spring-boot><spring-data-jpa><h2>,2,6,,,
Spring,46174992,1,46229614,117,9/14/2017 23:31:39,2,,9/12/2017 11:16:04,,8,628,"<p>I have extended spring security oauth example <a href=""https://github.com/spring-guides/tut-spring-boot-oauth2/tree/master/auth-server"" rel=""noreferrer"">social-auth-server</a>, linkedIn was added as third authentication option.
This project is described in tutorial <a href=""https://spring.io/guides/tutorials/spring-boot-oauth2/#_social_login_authserver"" rel=""noreferrer"">Hosting an Authorization Server</a>. </p>

<p>Source code: <a href=""https://github.com/spring-guides/tut-spring-boot-oauth2/tree/master/auth-server"" rel=""noreferrer"">https://github.com/spring-guides/tut-spring-boot-oauth2/tree/master/auth-server</a></p>

<p>How to configure this client to add client_id?</p>

<p>LinkedIn properties:</p>

<pre><code>linkedin:
  client:
    clientId: XXX
    clientSecret: YYY
    accessTokenUri: https://www.linkedin.com/oauth/v2/accessToken
    userAuthorizationUri: https://www.linkedin.com/oauth/v2/authorization
  resource:
    userInfoUri: https://api.linkedin.com/v1/people/~?format=json
</code></pre>

<p>Logs:</p>

<pre><code>uth2ClientAuthenticationProcessingFilter : Request is to process authentication
 g.c.AuthorizationCodeAccessTokenProvider : Retrieving token from https://www.linkedin.com/oauth/v2/accessToken
 g.c.AuthorizationCodeAccessTokenProvider : Encoding and sending form: {grant_type=[authorization_code], code=[XXXXXXXXXXXXXXXXXXXX], redirect_uri=[http://localhost:8080/login/linkedin]}
 uth2ClientAuthenticationProcessingFilter : Authentication request failed: org.springframework.security.authentication.BadCredentialsException: Could not obtain access token
</code></pre>

<p>Exception:</p>

<pre><code>org.springframework.security.authentication.BadCredentialsException: Could not obtain access token
    at org.springframework.security.oauth2.client.filter.OAuth2ClientAuthenticationProcessingFilter.attemptAuthentication(OAuth2ClientAuthenticationProcessingFilter.java:107) ~[spring-security-oauth2-2.0.13.RELEASE.jar:na]
    at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:212) ~[spring-security-web-4.2.2.RELEASE.jar:4.2.2.RELEASE]
    at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:112) [spring-web-4.3.7.RELEASE.jar:4.3.7.RELEASE]
    at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:73) [spring-web-4.3.7.RELEASE.jar:4.3.7.RELEASE]
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:331) [spring-security-web-4.2.2.RELEASE.jar:4.2.2.RELEASE]
    at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:116) [spring-security-web-4.2.2.RELEASE.jar:4.2.2.RELEASE]
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:331) [spring-security-web-4.2.2.RELEASE.jar:4.2.2.RELEASE]
    at org.springframework.security.web.csrf.CsrfFilter.doFilterInternal(CsrfFilter.java:100) [spring-security-web-4.2.2.RELEASE.jar:4.2.2.RELEASE]
    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107) [spring-web-4.3.7.RELEASE.jar:4.3.7.RELEASE]
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:331) [spring-security-web-4.2.2.RELEASE.jar:4.2.2.RELEASE]
    at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:64) [spring-security-web-4.2.2.RELEASE.jar:4.2.2.RELEASE]
    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107) [spring-web-4.3.7.RELEASE.jar:4.3.7.RELEASE]
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:331) [spring-security-web-4.2.2.RELEASE.jar:4.2.2.RELEASE]
    at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:105) [spring-security-web-4.2.2.RELEASE.jar:4.2.2.RELEASE]
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:331) [spring-security-web-4.2.2.RELEASE.jar:4.2.2.RELEASE]
    at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:56) [spring-security-web-4.2.2.RELEASE.jar:4.2.2.RELEASE]
    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107) [spring-web-4.3.7.RELEASE.jar:4.3.7.RELEASE]
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:331) [spring-security-web-4.2.2.RELEASE.jar:4.2.2.RELEASE]
    at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:214) [spring-security-web-4.2.2.RELEASE.jar:4.2.2.RELEASE]
    at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:177) [spring-security-web-4.2.2.RELEASE.jar:4.2.2.RELEASE]
    at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:346) [spring-web-4.3.7.RELEASE.jar:4.3.7.RELEASE]
    at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:262) [spring-web-4.3.7.RELEASE.jar:4.3.7.RELEASE]
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:192) [tomcat-embed-core-8.5.11.jar:8.5.11]
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:165) [tomcat-embed-core-8.5.11.jar:8.5.11]
    at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:99) [spring-web-4.3.7.RELEASE.jar:4.3.7.RELEASE]
    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107) [spring-web-4.3.7.RELEASE.jar:4.3.7.RELEASE]
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:192) [tomcat-embed-core-8.5.11.jar:8.5.11]
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:165) [tomcat-embed-core-8.5.11.jar:8.5.11]
    at org.springframework.security.oauth2.client.filter.OAuth2ClientContextFilter.doFilter(OAuth2ClientContextFilter.java:60) [spring-security-oauth2-2.0.13.RELEASE.jar:na]
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:192) [tomcat-embed-core-8.5.11.jar:8.5.11]
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:165) [tomcat-embed-core-8.5.11.jar:8.5.11]
    at org.springframework.web.filter.HttpPutFormContentFilter.doFilterInternal(HttpPutFormContentFilter.java:105) [spring-web-4.3.7.RELEASE.jar:4.3.7.RELEASE]
    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107) [spring-web-4.3.7.RELEASE.jar:4.3.7.RELEASE]
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:192) [tomcat-embed-core-8.5.11.jar:8.5.11]
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:165) [tomcat-embed-core-8.5.11.jar:8.5.11]
    at org.springframework.web.filter.HiddenHttpMethodFilter.doFilterInternal(HiddenHttpMethodFilter.java:81) [spring-web-4.3.7.RELEASE.jar:4.3.7.RELEASE]
    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107) [spring-web-4.3.7.RELEASE.jar:4.3.7.RELEASE]
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:192) [tomcat-embed-core-8.5.11.jar:8.5.11]
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:165) [tomcat-embed-core-8.5.11.jar:8.5.11]
    at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:197) [spring-web-4.3.7.RELEASE.jar:4.3.7.RELEASE]
    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107) [spring-web-4.3.7.RELEASE.jar:4.3.7.RELEASE]
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:192) [tomcat-embed-core-8.5.11.jar:8.5.11]
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:165) [tomcat-embed-core-8.5.11.jar:8.5.11]
    at org.springframework.boot.actuate.autoconfigure.MetricsFilter.doFilterInternal(MetricsFilter.java:106) [spring-boot-actuator-1.5.2.RELEASE.jar:1.5.2.RELEASE]
    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107) [spring-web-4.3.7.RELEASE.jar:4.3.7.RELEASE]
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:192) [tomcat-embed-core-8.5.11.jar:8.5.11]
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:165) [tomcat-embed-core-8.5.11.jar:8.5.11]
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:198) [tomcat-embed-core-8.5.11.jar:8.5.11]
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:96) [tomcat-embed-core-8.5.11.jar:8.5.11]
    at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:474) [tomcat-embed-core-8.5.11.jar:8.5.11]
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:140) [tomcat-embed-core-8.5.11.jar:8.5.11]
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:79) [tomcat-embed-core-8.5.11.jar:8.5.11]
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:87) [tomcat-embed-core-8.5.11.jar:8.5.11]
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:349) [tomcat-embed-core-8.5.11.jar:8.5.11]
    at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:783) [tomcat-embed-core-8.5.11.jar:8.5.11]
    at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:66) [tomcat-embed-core-8.5.11.jar:8.5.11]
    at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:798) [tomcat-embed-core-8.5.11.jar:8.5.11]
    at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1434) [tomcat-embed-core-8.5.11.jar:8.5.11]
    at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49) [tomcat-embed-core-8.5.11.jar:8.5.11]
    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149) [na:1.8.0_144]
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624) [na:1.8.0_144]
    at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61) [tomcat-embed-core-8.5.11.jar:8.5.11]
    at java.lang.Thread.run(Thread.java:748) [na:1.8.0_144]
Caused by: org.springframework.security.oauth2.client.resource.OAuth2AccessDeniedException: Access token denied.
    at org.springframework.security.oauth2.client.token.OAuth2AccessTokenSupport.retrieveToken(OAuth2AccessTokenSupport.java:142) ~[spring-security-oauth2-2.0.13.RELEASE.jar:na]
    at org.springframework.security.oauth2.client.token.grant.code.AuthorizationCodeAccessTokenProvider.obtainAccessToken(AuthorizationCodeAccessTokenProvider.java:209) ~[spring-security-oauth2-2.0.13.RELEASE.jar:na]
    at org.springframework.security.oauth2.client.token.AccessTokenProviderChain.obtainNewAccessTokenInternal(AccessTokenProviderChain.java:148) ~[spring-security-oauth2-2.0.13.RELEASE.jar:na]
    at org.springframework.security.oauth2.client.token.AccessTokenProviderChain.obtainAccessToken(AccessTokenProviderChain.java:121) ~[spring-security-oauth2-2.0.13.RELEASE.jar:na]
    at org.springframework.security.oauth2.client.OAuth2RestTemplate.acquireAccessToken(OAuth2RestTemplate.java:221) ~[spring-security-oauth2-2.0.13.RELEASE.jar:na]
    at org.springframework.security.oauth2.client.OAuth2RestTemplate.getAccessToken(OAuth2RestTemplate.java:173) ~[spring-security-oauth2-2.0.13.RELEASE.jar:na]
    at org.springframework.security.oauth2.client.filter.OAuth2ClientAuthenticationProcessingFilter.attemptAuthentication(OAuth2ClientAuthenticationProcessingFilter.java:105) ~[spring-security-oauth2-2.0.13.RELEASE.jar:na]
    ... 62 common frames omitted
Caused by: org.springframework.security.oauth2.common.exceptions.InvalidRequestException: A required parameter ""client_id"" is missing
    at org.springframework.security.oauth2.common.exceptions.OAuth2ExceptionJackson2Deserializer.deserialize(OAuth2ExceptionJackson2Deserializer.java:100) ~[spring-security-oauth2-2.0.13.RELEASE.jar:na]
    at org.springframework.security.oauth2.common.exceptions.OAuth2ExceptionJackson2Deserializer.deserialize(OAuth2ExceptionJackson2Deserializer.java:33) ~[spring-security-oauth2-2.0.13.RELEASE.jar:na]
    at com.fasterxml.jackson.databind.ObjectMapper._readMapAndClose(ObjectMapper.java:3798) ~[jackson-databind-2.8.7.jar:2.8.7]
    at com.fasterxml.jackson.databind.ObjectMapper.readValue(ObjectMapper.java:2922) ~[jackson-databind-2.8.7.jar:2.8.7]
    at org.springframework.http.converter.json.AbstractJackson2HttpMessageConverter.readJavaType(AbstractJackson2HttpMessageConverter.java:237) ~[spring-web-4.3.7.RELEASE.jar:4.3.7.RELEASE]
    at org.springframework.http.converter.json.AbstractJackson2HttpMessageConverter.readInternal(AbstractJackson2HttpMessageConverter.java:217) ~[spring-web-4.3.7.RELEASE.jar:4.3.7.RELEASE]
    at org.springframework.http.converter.AbstractHttpMessageConverter.read(AbstractHttpMessageConverter.java:193) ~[spring-web-4.3.7.RELEASE.jar:4.3.7.RELEASE]
    at org.springframework.security.oauth2.client.token.OAuth2AccessTokenSupport$AccessTokenErrorHandler.handleError(OAuth2AccessTokenSupport.java:235) ~[spring-security-oauth2-2.0.13.RELEASE.jar:na]
    at org.springframework.web.client.RestTemplate.handleResponse(RestTemplate.java:700) ~[spring-web-4.3.7.RELEASE.jar:4.3.7.RELEASE]
    at org.springframework.web.client.RestTemplate.doExecute(RestTemplate.java:653) ~[spring-web-4.3.7.RELEASE.jar:4.3.7.RELEASE]
    at org.springframework.web.client.RestTemplate.execute(RestTemplate.java:621) ~[spring-web-4.3.7.RELEASE.jar:4.3.7.RELEASE]
    at org.springframework.security.oauth2.client.token.OAuth2AccessTokenSupport.retrieveToken(OAuth2AccessTokenSupport.java:137) ~[spring-security-oauth2-2.0.13.RELEASE.jar:na]
    ... 68 common frames omitted
</code></pre>
",516167,,516167,,2017-09-13 10:04:49,2018-07-04 17:10:02,Missing client_id when accessing token with linkedIn,<spring><spring-security><oauth><spring-oauth2>,2,0,,,
Spring,46732371,1,46732904,118,10/13/2017 15:06:00,0,,10/13/2017 14:36:02,,1,198,"<p>does anybody know why the Spring Boot Guide includes two different types of integration tests? (<a href=""https://github.com/spring-guides/gs-spring-boot#add-unit-tests"" rel=""nofollow noreferrer"">https://github.com/spring-guides/gs-spring-boot#add-unit-tests</a>)</p>

<p>One with TestRestTemplate and one with MockMvc dependency? In each test type spring boot bootstraps the test environment. So what is the reason for this separation?</p>
",6271380,,6271380,,2017-10-18 20:04:57,2018-05-29 15:09:44,Why are there different types of integration tests in Spring Boot,<spring><testing><spring-boot><resttemplate><spring-test>,1,0,1,,
Spring,43458500,1,48949537,119,2/23/2018 14:00:07,312,,4/17/2017 19:46:11,,10,3373,"<p>I'm studying the Spring Boot and JMS example and yes, I'm rather new on this</p>

<p>Since we work with Oracle, I would like to migrate the Spring Boot &amp; JMS example from ActiveMQ to Oracle Advanced Queueing. However I really find very little information on that.</p>

<p>As far as I see I need to replace the code below for the Oracle version, yet I did not manage to found out how.</p>

<pre><code>@Bean
public JmsListenerContainerFactory&lt;?&gt; myFactory(ConnectionFactory connectionFactory,
                                                DefaultJmsListenerContainerFactoryConfigurer configurer) {
    DefaultJmsListenerContainerFactory factory = new DefaultJmsListenerContainerFactory();
    // This provides all boot's default to this factory, including the message converter
    configurer.configure(factory, connectionFactory);
    // You could still override some of Boot's default if necessary.
    return factory;
</code></pre>

<p>}</p>

<p>The origin code can be found at <a href=""https://github.com/spring-guides/gs-messaging-jms"" rel=""noreferrer"">Github</a></p>

<p>Help would be greatly appreciated!</p>
",2529104,,,,,2018-11-04 11:15:35,How to migrate Spring Boot JMS from ActiveMQ to Oracle Advanced Queueing,<java><oracle><spring-boot><spring-jms><advanced-queuing>,2,4,4,,
Spring,48772458,1,49214701,120,3/10/2018 22:35:10,25,,2/13/2018 17:30:55,,4,593,"<p>So here's a new one, for meâ€¦Â I'm working with one of the Spring Boot guides, and getting the</p>

<pre><code>Error: Could not find or load main class org.apache.maven.wrapper.MavenWrapperMain
</code></pre>

<p>error when running</p>

<pre><code>./mvnw spring-boot:run
</code></pre>

<p>(or any Maven Wrapper command)</p>

<p>That said, I see the <code>wrapper</code> jar within <code>.mvn</code> where I would expect it to be. </p>

<p>Has anyone else hit this? It seems like it must be a system-level issue because I've had no issue with this in the past.</p>

<p>Here is the repo I am running this command on: <a href=""https://github.com/spring-guides/gs-scheduling-tasks.git"" rel=""noreferrer"">https://github.com/spring-guides/gs-scheduling-tasks.git</a></p>
",2355712,,,,,2018-03-16 19:39:49,"could not find MavenWrapperMain class, but is contained within .m2 in the directory",<java><maven>,4,7,2,,
Spring,51738718,1,51741293,121,8/8/2018 7:50:17,0,,8/8/2018 4:39:09,,2,598,"<p>I checkout this project from spring:
<a href=""https://github.com/spring-guides/gs-batch-processing"" rel=""nofollow noreferrer"">https://github.com/spring-guides/gs-batch-processing</a></p>

<p>Source: <a href=""https://spring.io/guides/gs/batch-processing/"" rel=""nofollow noreferrer"">https://spring.io/guides/gs/batch-processing/</a></p>

<p>I replace the ',' with 'tab' in 'sample-data.csv:</p>

<pre><code>Jill    Doe
Joe Doe
Justin  Doe
Jane    Doe
John    Doe
</code></pre>

<p>Then I add the new Delimiter to the reader:</p>

<pre><code>@Bean
public FlatFileItemReader&lt;Person&gt; reader() {
    return new FlatFileItemReaderBuilder&lt;Person&gt;()
        .name(""personItemReader"")
        .resource(new ClassPathResource(""sample-data.csv""))
        .delimited()
        .delimiter(DelimitedLineTokenizer.DELIMITER_TAB) // NEW DELIMITER
        .names(new String[]{""firstName"", ""lastName""})
        .fieldSetMapper(new BeanWrapperFieldSetMapper&lt;Person&gt;() {{
            setTargetType(Person.class);
        }})
        .build();
}
</code></pre>

<p>When I launch I get this error: </p>

<pre><code>Caused by: org.springframework.batch.item.file.transform.IncorrectTokenCountException: Incorrect number of tokens found in record: expected 2 actual 1
    at org.springframework.batch.item.file.transform.AbstractLineTokenizer.tokenize(AbstractLineTokenizer.java:142) ~[spring-batch-infrastructure-4.0.1.RELEASE.jar:4.0.1.RELEASE]
    at org.springframework.batch.item.file.mapping.DefaultLineMapper.mapLine(DefaultLineMapper.java:43) ~[spring-batch-infrastructure-4.0.1.RELEASE.jar:4.0.1.RELEASE]
    at org.springframework.batch.item.file.FlatFileItemReader.doRead(FlatFileItemReader.java:180) ~[spring-batch-infrastructure-4.0.1.RELEASE.jar:4.0.1.RELEASE]
    ... 50 common frames omitted
</code></pre>

<p>I have tried with  '@' delimiter -> it works.
For some reason, I can't make it work with the tab delimiter...</p>

<p>Of course in my real project, I have an input file with 'tab' separators...</p>

<p>Any solution here?</p>
",1529441,,5141749,,2018-08-08 6:23:11,2019-02-13 10:20:29,FlatFileItemReader tab delimiter not working,<java><spring><spring-batch>,2,2,,,
Spring,51736997,1,51750684,122,8/8/2018 15:41:34,0,,8/8/2018 0:11:49,,2,431,"<p>The project uses Maven, Spring Boot, Angular, Visual Studio Code editor.</p>

<p>How can I configure the project to reload the browser when angular files change?</p>

<p><a href=""https://github.com/spring-guides/tut-spring-security-and-angular-js/tree/master/single"" rel=""nofollow noreferrer"">spring-boot with angular app</a></p>

<p>With this dependency in pom.xml, the browser reloads when java files change.</p>

<pre><code>&lt;dependency&gt;
  &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
  &lt;artifactId&gt;spring-boot-devtools&lt;/artifactId&gt;
  &lt;scope&gt;runtime&lt;/scope&gt;
&lt;/dependency&gt;
</code></pre>
",1074660,,,,,2018-08-08 15:41:34,"How to configure project to auto reload browser in angular, spring-boot, maven project",<java><angular><maven><spring-boot><visual-studio-code>,1,4,,,
Spring,37042106,1,54575448,123,2/7/2019 14:21:40,1008,,5/5/2016 4:00:34,,3,505,"<p>I am trying to deploy a spring <code>.war</code> into jboss but am getting 404 errors. I know this has been asked before:</p>

<ul>
<li><a href=""https://stackoverflow.com/questions/27576629/springboot-application-on-jboss-eap-servlet-context-not-lodaed"">springBoot application on Jboss EAP, servlet context not lodaed</a></li>
<li><a href=""https://stackoverflow.com/questions/20666513/spring-java-config-vs-jboss-7"">Spring Java Config vs Jboss 7</a></li>
<li><a href=""https://stackoverflow.com/questions/32870599/cannot-deploy-spring-boot-on-jboss-eap-6-3-3"">Cannot deploy Spring Boot on jBoss EAP 6.3.3</a></li>
</ul>

<p>But I am very new (this week) to maven/spring/jboss, so may well have messed up. I tried what I understood from the various solutions above and none of them worked for me. Probably me messing up or missing something. So I thought I'd get the problem as simple as I can.</p>

<p>I took the code from:
<a href=""https://github.com/spring-guides/gs-rest-service.git"" rel=""nofollow noreferrer"">https://github.com/spring-guides/gs-rest-service.git</a>
And then work in the <code>complete</code> folder.</p>

<pre><code>cd complete 
mvn package
java -jar .\target\gs-rest-service-0.1.0.jar
</code></pre>

<p>And that all worked as you'd expect.</p>

<p>So then I followed the instructions here (<a href=""http://docs.spring.io/spring-boot/docs/current/reference/htmlsingle/#howto-create-a-deployable-war-file"" rel=""nofollow noreferrer"">http://docs.spring.io/spring-boot/docs/current/reference/htmlsingle/#howto-create-a-deployable-war-file</a>) to modify my code and <code>pom.xml</code> to produce a war file.</p>

<ul>
<li>pom.xml <a href=""http://pastebin.com/BiLWDskd"" rel=""nofollow noreferrer"">http://pastebin.com/BiLWDskd</a></li>
<li>Application.java <a href=""http://pastebin.com/par7rftz"" rel=""nofollow noreferrer"">http://pastebin.com/par7rftz</a></li>
</ul>

<p>I then <code>mvn clean package</code> and load the resulting .war file into EAP using the UI (<a href=""https://i.stack.imgur.com/N7zxG.png"" rel=""nofollow noreferrer"">http://i.stack.imgur.com/N7zxG.png</a>).</p>

<p>So then in theory this should be the URL right</p>

<ul>
<li><a href=""http://localhost:8080/gs-rest-service-0.1.0/greeting"" rel=""nofollow noreferrer"">http://localhost:8080/gs-rest-service-0.1.0/greeting</a></li>
</ul>

<p>I also tried</p>

<ul>
<li><a href=""http://localhost:8080/greeting"" rel=""nofollow noreferrer"">http://localhost:8080/greeting</a></li>
</ul>

<p>But am getting the 404 error (<a href=""https://i.stack.imgur.com/T6J6z.png"" rel=""nofollow noreferrer"">http://i.stack.imgur.com/T6J6z.png</a>) as described in the other questions. Nothing appears in the jboss console log at all after the .war is loaded.</p>

<p>So am I missing something? Do I need to write a jboss @WebServelet class to wrap around the spring stuff? Changes to my pom.xml? Should I not be using springboot, and just just pring framework modules directly? I note that in the EAP screen it does not show the class in the third column like it did with the jboss sample <code>.war</code>.</p>

<p>Remember I am new to this, so please explain stuff as if I'm a complete dummy (which I am).</p>

<p>Details of my setup:</p>

<ul>
<li>OS Windows7 x64</li>
<li>java version ""1.8.0_91""</li>
<li>Apache Maven 3.3.9</li>
<li>Springboot 1.3.3</li>
<li>JBOSS EAP 6.4.0</li>
<li>No IDE, using vim and command line</li>
</ul>
",694014,,-1,,2017-05-23 12:10:28,2019-02-07 14:45:54,Springboot 1.3.3 gives 404 in Jboss EAP 6.4.0GA,<java><spring><maven><jboss><spring-boot>,1,4,,,
Spring,54750194,1,54763563,124,2/19/2019 10:06:05,1,,2/18/2019 15:09:54,,1,21,"<p>I have just cloned the example from <a href=""https://github.com/spring-guides/gs-accessing-data-neo4j"" rel=""nofollow noreferrer"">https://github.com/spring-guides/gs-accessing-data-neo4j</a> and ran the complete version. It fails with the stack trace below. Is this a fault from my side or is this a problem in the latest release?</p>

<p>Stack trace:</p>

<pre class=""lang-none prettyprint-override""><code>2019-02-18 15:37:39.059  WARN 5145 --- [           main]
org.neo4j.ogm.session.Neo4jSession       : Error executing query : Invalid input '|': expected whitespace, comment, a relationship pattern, '.', node labels, '[', ""=~"", IN, STARTS, ENDS, CONTAINS, IS, '^', '*', '/', '%', '+', '-', '=', ""&lt;&gt;"", ""!="", '&lt;', '&gt;', ""&lt;="", ""&gt;="", AND, XOR, OR, ',' or ']' (line 1, column 106 (offset: 105))
""MATCH (n:`Person`) WHERE n.`name` = { `name_0` } WITH n RETURN n,[ [ (n)-[r_t1:`TEAMMATE`]-(p1:`Person`) | [ r_t1, p1 ] ] ], ID(n)""
                                                                                                          ^. Rolling back transaction.
2019-02-18 15:37:39.066  INFO 5145 --- [           main] ConditionEvaluationReportLoggingListener :

Error starting ApplicationContext. To display the conditions report re-run your application with 'debug' enabled.
2019-02-18 15:37:39.071 ERROR 5145 --- [           main] o.s.boot.SpringApplication               : Application run failed

java.lang.IllegalStateException: Failed to execute CommandLineRunner
        at org.springframework.boot.SpringApplication.callRunner(SpringApplication.java:821) [spring-boot-2.0.5.RELEASE.jar:2.0.5.RELEASE]
        at org.springframework.boot.SpringApplication.callRunners(SpringApplication.java:802) [spring-boot-2.0.5.RELEASE.jar:2.0.5.RELEASE]
        at org.springframework.boot.SpringApplication.run(SpringApplication.java:341) [spring-boot-2.0.5.RELEASE.jar:2.0.5.RELEASE]
        at org.springframework.boot.SpringApplication.run(SpringApplication.java:1277) [spring-boot-2.0.5.RELEASE.jar:2.0.5.RELEASE]
        at org.springframework.boot.SpringApplication.run(SpringApplication.java:1265) [spring-boot-2.0.5.RELEASE.jar:2.0.5.RELEASE]
        at hello.Application.main(Application.java:23) [main/:na]
Caused by: org.neo4j.driver.v1.exceptions.ClientException: Invalid input '|': expected whitespace, comment, a relationship pattern, '.', node labels, '[', ""=~"", IN, STARTS, ENDS, CONTAINS, IS, '^', '*', '/', '%', '+', '-', '=', ""&lt;&gt;"", ""!="", '&lt;', '&gt;', ""&lt;="", ""&gt;="", AND, XOR, OR, ',' or ']' (line 1, column 106 (offset: 105))
""MATCH (n:`Person`) WHERE n.`name` = { `name_0` } WITH n RETURN n,[ [ (n)-[r_t1:`TEAMMATE`]-(p1:`Person`) | [ r_t1, p1 ] ] ], ID(n)""
                                                                                                          ^
        at org.neo4j.driver.internal.util.ErrorUtil.newNeo4jError(ErrorUtil.java:62) ~[neo4j-java-driver-1.5.0.jar:1.5.0-0f49eb425368377c0c3905e0769af9b70c88d65f]
        at org.neo4j.driver.internal.async.inbound.InboundMessageDispatcher.handleFailureMessage(InboundMessageDispatcher.java:137) ~[neo4j-java-driver-1.5.0.jar:1.5.0-0f49eb425368377c0c3905e0769af9b70c88d65f]
        at org.neo4j.driver.internal.messaging.PackStreamMessageFormatV1$Reader.unpackFailureMessage(PackStreamMessageFormatV1.java:432) ~[neo4j-java-driver-1.5.0.jar:1.5.0-0f49eb425368377c0c3905e0769af9b70c88d65f]
        at org.neo4j.driver.internal.messaging.PackStreamMessageFormatV1$Reader.read(PackStreamMessageFormatV1.java:396) ~[neo4j-java-driver-1.5.0.jar:1.5.0-0f49eb425368377c0c3905e0769af9b70c88d65f]
        at org.neo4j.driver.internal.async.inbound.InboundMessageHandler.channelRead0(InboundMessageHandler.java:83) ~[neo4j-java-driver-1.5.0.jar:1.5.0-0f49eb425368377c0c3905e0769af9b70c88d65f]
        at org.neo4j.driver.internal.async.inbound.InboundMessageHandler.channelRead0(InboundMessageHandler.java:35) ~[neo4j-java-driver-1.5.0.jar:1.5.0-0f49eb425368377c0c3905e0769af9b70c88d65f]
        at org.neo4j.driver.internal.shaded.io.netty.channel.SimpleChannelInboundHandler.channelRead(SimpleChannelInboundHandler.java:105) ~[neo4j-java-driver-1.5.0.jar:1.5.0-0f49eb425368377c0c3905e0769af9b70c88d65f]
        at org.neo4j.driver.internal.shaded.io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:362) ~[neo4j-java-driver-1.5.0.jar:1.5.0-0f49eb425368377c0c3905e0769af9b70c88d65f]
        at org.neo4j.driver.internal.shaded.io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:348) ~[neo4j-java-driver-1.5.0.jar:1.5.0-0f49eb425368377c0c3905e0769af9b70c88d65f]
        at org.neo4j.driver.internal.shaded.io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:340) ~[neo4j-java-driver-1.5.0.jar:1.5.0-0f49eb425368377c0c3905e0769af9b70c88d65f]
        at org.neo4j.driver.internal.shaded.io.netty.handler.codec.ByteToMessageDecoder.fireChannelRead(ByteToMessageDecoder.java:310) ~[neo4j-java-driver-1.5.0.jar:1.5.0-0f49eb425368377c0c3905e0769af9b70c88d65f]
        at org.neo4j.driver.internal.shaded.io.netty.handler.codec.ByteToMessageDecoder.channelRead(ByteToMessageDecoder.java:284) ~[neo4j-java-driver-1.5.0.jar:1.5.0-0f49eb425368377c0c3905e0769af9b70c88d65f]
        at org.neo4j.driver.internal.async.inbound.MessageDecoder.channelRead(MessageDecoder.java:40) ~[neo4j-java-driver-1.5.0.jar:1.5.0-0f49eb425368377c0c3905e0769af9b70c88d65f]
        at org.neo4j.driver.internal.shaded.io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:362) ~[neo4j-java-driver-1.5.0.jar:1.5.0-0f49eb425368377c0c3905e0769af9b70c88d65f]
        at org.neo4j.driver.internal.shaded.io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:348) ~[neo4j-java-driver-1.5.0.jar:1.5.0-0f49eb425368377c0c3905e0769af9b70c88d65f]
        at org.neo4j.driver.internal.shaded.io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:340) ~[neo4j-java-driver-1.5.0.jar:1.5.0-0f49eb425368377c0c3905e0769af9b70c88d65f]
        at org.neo4j.driver.internal.shaded.io.netty.handler.codec.ByteToMessageDecoder.fireChannelRead(ByteToMessageDecoder.java:310) ~[neo4j-java-driver-1.5.0.jar:1.5.0-0f49eb425368377c0c3905e0769af9b70c88d65f]
        at org.neo4j.driver.internal.shaded.io.netty.handler.codec.ByteToMessageDecoder.fireChannelRead(ByteToMessageDecoder.java:297) ~[neo4j-java-driver-1.5.0.jar:1.5.0-0f49eb425368377c0c3905e0769af9b70c88d65f]
        at org.neo4j.driver.internal.shaded.io.netty.handler.codec.ByteToMessageDecoder.callDecode(ByteToMessageDecoder.java:413) ~[neo4j-java-driver-1.5.0.jar:1.5.0-0f49eb425368377c0c3905e0769af9b70c88d65f]
        at org.neo4j.driver.internal.shaded.io.netty.handler.codec.ByteToMessageDecoder.channelRead(ByteToMessageDecoder.java:265) ~[neo4j-java-driver-1.5.0.jar:1.5.0-0f49eb425368377c0c3905e0769af9b70c88d65f]
        at org.neo4j.driver.internal.shaded.io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:362) ~[neo4j-java-driver-1.5.0.jar:1.5.0-0f49eb425368377c0c3905e0769af9b70c88d65f]
        at org.neo4j.driver.internal.shaded.io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:348) ~[neo4j-java-driver-1.5.0.jar:1.5.0-0f49eb425368377c0c3905e0769af9b70c88d65f]
        at org.neo4j.driver.internal.shaded.io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:340) ~[neo4j-java-driver-1.5.0.jar:1.5.0-0f49eb425368377c0c3905e0769af9b70c88d65f]
        at org.neo4j.driver.internal.shaded.io.netty.handler.ssl.SslHandler.unwrap(SslHandler.java:1336) ~[neo4j-java-driver-1.5.0.jar:1.5.0-0f49eb425368377c0c3905e0769af9b70c88d65f]
        at org.neo4j.driver.internal.shaded.io.netty.handler.ssl.SslHandler.decodeJdkCompatible(SslHandler.java:1127) ~[neo4j-java-driver-1.5.0.jar:1.5.0-0f49eb425368377c0c3905e0769af9b70c88d65f]
        at org.neo4j.driver.internal.shaded.io.netty.handler.ssl.SslHandler.decode(SslHandler.java:1162) ~[neo4j-java-driver-1.5.0.jar:1.5.0-0f49eb425368377c0c3905e0769af9b70c88d65f]
        at org.neo4j.driver.internal.shaded.io.netty.handler.codec.ByteToMessageDecoder.decodeRemovalReentryProtection(ByteToMessageDecoder.java:489) ~[neo4j-java-driver-1.5.0.jar:1.5.0-0f49eb425368377c0c3905e0769af9b70c88d65f]
        at org.neo4j.driver.internal.shaded.io.netty.handler.codec.ByteToMessageDecoder.callDecode(ByteToMessageDecoder.java:428) ~[neo4j-java-driver-1.5.0.jar:1.5.0-0f49eb425368377c0c3905e0769af9b70c88d65f]
        at org.neo4j.driver.internal.shaded.io.netty.handler.codec.ByteToMessageDecoder.channelRead(ByteToMessageDecoder.java:265) ~[neo4j-java-driver-1.5.0.jar:1.5.0-0f49eb425368377c0c3905e0769af9b70c88d65f]
        at org.neo4j.driver.internal.shaded.io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:362) ~[neo4j-java-driver-1.5.0.jar:1.5.0-0f49eb425368377c0c3905e0769af9b70c88d65f]
        at org.neo4j.driver.internal.shaded.io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:348) ~[neo4j-java-driver-1.5.0.jar:1.5.0-0f49eb425368377c0c3905e0769af9b70c88d65f]
        at org.neo4j.driver.internal.shaded.io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:340) ~[neo4j-java-driver-1.5.0.jar:1.5.0-0f49eb425368377c0c3905e0769af9b70c88d65f]
        at org.neo4j.driver.internal.shaded.io.netty.channel.DefaultChannelPipeline$HeadContext.channelRead(DefaultChannelPipeline.java:1359) ~[neo4j-java-driver-1.5.0.jar:1.5.0-0f49eb425368377c0c3905e0769af9b70c88d65f]
        at org.neo4j.driver.internal.shaded.io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:362) ~[neo4j-java-driver-1.5.0.jar:1.5.0-0f49eb425368377c0c3905e0769af9b70c88d65f]
        at org.neo4j.driver.internal.shaded.io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:348) ~[neo4j-java-driver-1.5.0.jar:1.5.0-0f49eb425368377c0c3905e0769af9b70c88d65f]
        at org.neo4j.driver.internal.shaded.io.netty.channel.DefaultChannelPipeline.fireChannelRead(DefaultChannelPipeline.java:935) ~[neo4j-java-driver-1.5.0.jar:1.5.0-0f49eb425368377c0c3905e0769af9b70c88d65f]
        at org.neo4j.driver.internal.shaded.io.netty.channel.nio.AbstractNioByteChannel$NioByteUnsafe.read(AbstractNioByteChannel.java:134) ~[neo4j-java-driver-1.5.0.jar:1.5.0-0f49eb425368377c0c3905e0769af9b70c88d65f]
        at org.neo4j.driver.internal.shaded.io.netty.channel.nio.NioEventLoop.processSelectedKey(NioEventLoop.java:645) ~[neo4j-java-driver-1.5.0.jar:1.5.0-0f49eb425368377c0c3905e0769af9b70c88d65f]
        at org.neo4j.driver.internal.shaded.io.netty.channel.nio.NioEventLoop.processSelectedKeysOptimized(NioEventLoop.java:580) ~[neo4j-java-driver-1.5.0.jar:1.5.0-0f49eb425368377c0c3905e0769af9b70c88d65f]
        at org.neo4j.driver.internal.shaded.io.netty.channel.nio.NioEventLoop.processSelectedKeys(NioEventLoop.java:497) ~[neo4j-java-driver-1.5.0.jar:1.5.0-0f49eb425368377c0c3905e0769af9b70c88d65f]
        at org.neo4j.driver.internal.shaded.io.netty.channel.nio.NioEventLoop.run(NioEventLoop.java:459) ~[neo4j-java-driver-1.5.0.jar:1.5.0-0f49eb425368377c0c3905e0769af9b70c88d65f]
        at org.neo4    j.driver.internal.shaded.io.netty.util.concurrent.SingleThreadEventExecutor$5.run(SingleThreadEventExecutor.java:858) ~[neo4j-java-driver-1.5.0.jar:1.5.0-0f49eb425368377c0c3905e0769af9b70c88d65f]
        at org.neo4j.driver.internal.shaded.io.netty.util.concurrent.DefaultThreadFactory$DefaultRunnableDecorator.run(DefaultThreadFactory.java:138) ~[neo4j-java-driver-1.5.0.jar:1.5.0-0f49eb425368377c0c3905e0769af9b70c88d65f]
        at java.lang.Thread.run(Thread.java:748) ~[na:1.8.0_171] 
</code></pre>
",8288449,,1940850,,2019-02-19 4:44:11,2019-02-19 10:06:05,Find by property not working as expected in Spring Data Neo4j,<spring-data-neo4j>,1,0,,,
Spring,23511605,1,,,,,,5/7/2014 7:37:05,,1,553,"<p>I am trying to deploy an application build from <a href=""https://github.com/spring-guides/gs-convert-jar-to-war"" rel=""nofollow"">https://github.com/spring-guides/gs-convert-jar-to-war</a> to local glassfish4. And it delpoys well for the first time (if I can call some exceptions from the framework good behaviour). At least, I can open the project's index page in browser. </p>

<p>But if I try to undeploy it and re-deploy, or just overwrite .war file in autodeploy directory, deployment fails. And nothing seems to be added to glassfish log file.</p>

<p>The projects I published from eclipse using some its mechanisms deployed and re-deployed successfully.</p>

<p>Here is the log with related contents:
<a href=""http://pastebin.com/zSeMw5tC"" rel=""nofollow"">http://pastebin.com/zSeMw5tC</a></p>

<p>What can be the problem?</p>
",2708904,,,,,2014-05-07 10:15:01,Glassfish and Spring Boot: .war re-deployment failed,<spring><glassfish><spring-boot>,1,1,,,
Spring,27643278,1,,,,,,12/25/2014 0:19:02,,2,1888,"<p>I'm trying to make the example of this link: <a href=""https://github.com/spring-guides/gs-uploading-files"" rel=""nofollow"">https://github.com/spring-guides/gs-uploading-files</a> work with Apcahe <code>commons-fileupload</code>but the error: <code>Required MultipartFile parameter 'file' is not present</code> is occurring.</p>

<p>The configuration that I'm making on the example is:</p>

<p>1 - Adding the dependency of <code>commons-fileupload</code> in the <code>pom.xml</code>:</p>

<pre><code>&lt;dependency&gt;
  &lt;groupId&gt;commons-fileupload&lt;/groupId&gt;
  &lt;artifactId&gt;commons-fileupload&lt;/artifactId&gt;
  &lt;version&gt;1.3.1&lt;/version&gt;
&lt;/dependency&gt;
</code></pre>

<p>2 - Config the <code>multipartResolver()</code> in the <code>Application.java</code></p>

<pre><code>@Bean
public MultipartResolver multipartResolver() {
  return new CommonsMultipartResolver();
}
</code></pre>

<p>Without this configuration everything works fine as Spring is using <code>org.springframework.web.multipart.support.StandardServletMultipartResolver</code> for handle uploads, but I want use <code>commons-fileupload</code>.</p>

<p>There is something that I'm missing? </p>

<p>Thanks.</p>

<p>@avaz</p>
",510024,,,,,2018-02-12 15:43:52,spring-boot spring-mvc apache-commons-fileupload: Required MultipartFile parameter 'file' is not present error,<spring-mvc><spring-boot><apache-commons-fileupload>,1,2,1,,
Spring,29282870,1,,,,,,3/26/2015 15:43:57,,1,133,"<p>I was going through with <a href=""https://github.com/spring-guides/deprecate-tut-web"" rel=""nofollow"">https://github.com/spring-guides/deprecate-tut-web</a>  tutorial on Spring. I am new to Spring . I have seen a few small Spring Web MVC tutorials before . Most other tutorials i have seen uses a service layer which is invoked from the web controller. But never have i seen the use of ""events"" layer as used in this tutorial. Is the layer really necessary, and if so what benefit does it give me ?  I am also new to both DDD (Domain Driven Development) and TDD (Test Driven Development), some things just seem really redundant and over-complicated to me in this tutorial .. Can someone explain what is the purpose of this events layer and why should we use it ? Thank you in advance and sorry if it's a Noob question. :) </p>
",1563286,,,,,2015-03-26 16:02:24,purpose of adding events layer in DDD,<spring><tdd><domain-driven-design><event-sourcing>,1,1,,,
Spring,34821978,1,,,,,,1/16/2016 0:08:14,,8,16335,"<p>I am studying AngularJS and REST.  A code sample uses the word <code>callback</code> repeatedly in an authentication function.  <strong>Is callback a keyword in JavaScript or Angular?  Or is <code>callback</code> just a custom variable created in this code?  How does <code>callback</code> work in the code below?</strong>  Googling <code>callback</code> and AngularJS is not producing usable results.  <a href=""https://github.com/spring-guides/tut-spring-security-and-angular-js/blob/master/modular/src/main/resources/static/js/auth/auth.js"" rel=""noreferrer"">The code for the AngularJS module in question can be read at this link</a>, which also contains all the code for the sample app.  </p>

<p>Here is the module code itself:  </p>

<pre><code>angular.module('auth', []).factory( 'auth',

    function($rootScope, $http, $location) {

        enter = function() {
            if ($location.path() != auth.loginPath) {
                auth.path = $location.path();
                if (!auth.authenticated) {
                    $location.path(auth.loginPath);
                }
            }                   
        }

        var auth = {

            authenticated : false,

            loginPath : '/login',
            logoutPath : '/logout',
            homePath : '/',
            path : $location.path(),

            authenticate : function(credentials, callback) {

                var headers = credentials &amp;&amp; credentials.username ? {
                    authorization : ""Basic ""
                            + btoa(credentials.username + "":""
                                    + credentials.password)
                } : {};

                $http.get('user', {
                    headers : headers
                }).success(function(data) {
                    if (data.name) {
                        auth.authenticated = true;
                    } else {
                        auth.authenticated = false;
                    }
                    callback &amp;&amp; callback(auth.authenticated);
                    $location.path(auth.path==auth.loginPath ? auth.homePath : auth.path);
                }).error(function() {
                    auth.authenticated = false;
                    callback &amp;&amp; callback(false);
                });

            },

            clear : function() {
                $location.path(auth.loginPath);
                auth.authenticated = false;
                $http.post(auth.logoutPath, {}).success(function() {
                    console.log(""Logout succeeded"");
                }).error(function(data) {
                    console.log(""Logout failed"");
                });
            },

            init : function(homePath, loginPath, logoutPath) {

                auth.homePath = homePath;
                auth.loginPath = loginPath;
                auth.logoutPath = logoutPath;

                auth.authenticate({}, function(authenticated) {
                    if (authenticated) {
                        $location.path(auth.path);
                    }
                })

                // Guard route changes and switch to login page if unauthenticated
                $rootScope.$on('$routeChangeStart', function() {
                    enter();
                });

            }

        };

        return auth;

    });
</code></pre>

<hr>

<p><strong>ADDITIONAL INFORMATION:</strong>  </p>

<hr>

<p>Based on @okonyk's response, I am including code from a DIFFERENT MODULE that calls the auth.authenticate() function:  </p>

<pre><code>$scope.login = function() {
    auth.authenticate($scope.credentials, function(authenticated) {
        if (authenticated) {
            //do some stuff
             $scope.error = false;
         } else { 
            $scope.error = true;
        }
    })
}
</code></pre>

<p>So how does the call from <code>login()</code> to <code>auth.authenticate($scope.credentials, function(authenticated)</code> work?  Is the <code>function(authenticated)</code> parameter sending a boolean that determines functionality inside <code>auth.authenticate()</code>?  If so, can you please be explicit?  I can piece it together.  For example true might indicate to do the callback, while false might indicate note to do the callback, but it would help to have it explained.  <a href=""https://github.com/spring-guides/tut-spring-security-and-angular-js/blob/master/modular/src/main/resources/static/js/navigation/navigation.js"" rel=""noreferrer"">You can read the code in the sample app for the other module with the <code>login()</code> method by clicking on this link</a>.</p>
",807797,,807797,,2016-01-16 6:48:54,2016-01-16 8:18:04,How does callback work in AngularJS call to REST service?,<javascript><angularjs>,2,0,,,
Spring,36100395,1,,,,,,3/19/2016 10:11:31,,5,5450,"<p>I'm modifying the <a href=""https://github.com/spring-guides/tut-spring-security-and-angular-js/tree/master/oauth2-vanilla"" rel=""noreferrer"">oauth2-vanilla</a> sample from <a href=""https://spring.io/guides/tutorials/spring-security-and-angular-js/"" rel=""noreferrer"">Springs excellent security tutorials</a>. The oauth2-vanilla combines the Zuul Proxy and the UI into a single application. I would like to seperate the Zuul Proxy and the UI. (The Zuul Proxy should act as an API gateway and as a reverse proxy for several UIs).</p>

<p>When accessing the UI via the zuul proxy, it should be able to do SSO based on Oauth2 between the UI and the resource backend.</p>

<p>The oauth2-vanilla looks like this</p>

<p><img src=""https://dl.dropboxusercontent.com/u/13246619/Spring/Screenshot%202016-03-19%2010.58.24.png"" alt=""""></p>

<p>Where I want to move to something like this :</p>

<p><img src=""https://dl.dropboxusercontent.com/u/13246619/Spring/Screenshot%202016-03-19%2010.58.32.png"" alt=""""></p>

<p>I've removed the UI part from the gateway, and added a zuul route for the ui</p>

<p><code>
zuul:
  routes:
    resource:
      url: http://localhost:9000
    user:
      url: http://localhost:9999/uaa/user
    ui:
      url: http://localhost:8080
</code></p>

<p>I created a new UI webapp containing the UI (Angular stuff) with an <code>@EnableOAuth2Sso</code> annotation.</p>

<p>So I'm accessing the UI via <a href=""http://localhost:8888"" rel=""noreferrer"">http://localhost:8888</a> (through the zuul proxy).
After authenticating and doing through the UI flow, I can access the /user endpoint that returns me the user. (During debugging, I see that when I access the /user endpoint that I have an HTTP Session with an OAuth2Authentication.</p>

<p>When I access the /resource endpoint however, the HttpSessionSecurityContextRepository cannot find a session and is unable to build a context with the OAuth2Authentication.</p>

<p>I've created <a href=""https://github.com/ddewaele/spring-cloud-seperate-ui-gateway"" rel=""noreferrer"">a git repository</a> with the modified sample.</p>

<p>I'm guessing there is something wrong with the gateway configuration. 
I've tried changing cookie paths, changing HttpSecurity rules in the proxy but I cannot get it to work.</p>

<p>What I don't understand is why the UI, when accessed through the proxy is able to resolve the <code>/user</code> endpoint fine (with an HTTP session and a OAuth2Authentication), but it is unable to access the <code>/resource</code> endpoint.</p>

<p>Also, as the UI is now running in the <code>/ui</code> context, it seems that I need to have the following code in the gateway for it to load up the angular css / js files.</p>

<p><code>
.antMatchers(""/ui/index.html"", ""/ui/home.html"", ""ui/css/**"", ""/ui/js/**"").permitAll().anyRequest().authenticated();
</code></p>

<p>It also doesn't seem right that I need to prefix it with the zuul ui route.</p>

<p>Any help would be appreciated.</p>
",492410,,492410,,2016-03-19 17:03:55,2018-03-09 19:50:33,Spring Security Oauth2 SSO with Zuul Proxy,<spring><spring-security><spring-cloud><spring-security-oauth2>,1,5,6,,
Spring,36705874,1,,,,,,4/18/2016 23:14:39,,7,3608,"<p>I am studying Spring Cloud and Spring OAuth2 by decomposing <a href=""https://github.com/spring-guides/tut-spring-security-and-angular-js/tree/master/oauth2"" rel=""nofollow"">the three interconnected apps in this GitHub sample</a>.  When I open up the <code>/oauth/revoke-token</code> endpoint in the <a href=""https://github.com/spring-guides/tut-spring-security-and-angular-js/tree/master/oauth2/authserver"" rel=""nofollow""><code>authserver</code> app</a> and then call it from the <a href=""https://github.com/spring-guides/tut-spring-security-and-angular-js/tree/master/oauth2/ui"" rel=""nofollow""><code>ui</code> app</a> with a <code>http://localhost:9999/uaa/logout</code>, the debug log for the <a href=""https://github.com/spring-guides/tut-spring-security-and-angular-js/tree/master/oauth2/authserver"" rel=""nofollow""><code>authserver</code> app</a> gives the following error message while rejecting the logout request:</p>

<pre><code>Request 'OPTIONS /logout' doesn't match 'POST /logout
</code></pre>

<p><strong>What specific changes need to be made to the code in <a href=""https://github.com/spring-guides/tut-spring-security-and-angular-js/tree/master/oauth2"" rel=""nofollow"">the sample GitHub apps</a> in order to enable the global logout to succeed when the <a href=""https://github.com/spring-guides/tut-spring-security-and-angular-js/tree/master/oauth2/ui"" rel=""nofollow""><code>ui</code> app</a> calls the logout function from <a href=""https://github.com/spring-guides/tut-spring-security-and-angular-js/blob/master/oauth2/ui/src/main/resources/static/js/hello.js"" rel=""nofollow""><code>hello.js</code></a>?</strong></p>

<hr/>

<p><strong>INITIAL EFFORTS:</strong></p>

<hr/>

<p>Changes that I made so far include:  </p>

<p>Add the following @Bean definition to <a href=""https://github.com/spring-guides/tut-spring-security-and-angular-js/blob/master/oauth2/authserver/src/main/java/demo/AuthserverApplication.java"" rel=""nofollow"">AuthserverApplication.java</a>:  </p>

<pre><code>@Bean
public TokenStore tokenStore() {return new InMemoryTokenStore();}
</code></pre>

<p>Add the following controller class in the <a href=""https://github.com/spring-guides/tut-spring-security-and-angular-js/tree/master/oauth2/authserver/src/main/java/demo"" rel=""nofollow""><code>demo</code> package of the <code>authserver</code> app</a>:  </p>

<pre><code>@Configuration
public class AuthorizationServerConfiguration extends AuthorizationServerConfigurerAdapter {

    @Autowired
    TokenStore tokenStore;

    @Override
    public void configure(AuthorizationServerEndpointsConfigurer endpoints) throws Exception {
        endpoints.tokenStore(tokenStore);
    }

    @RequestMapping(value = ""/oauth/revoke-token"", method = RequestMethod.GET)
    @ResponseStatus(HttpStatus.OK)
    public void logout(HttpServletRequest request) {
        String authHeader = request.getHeader(""Authorization"");
        if (authHeader != null) {
            String tokenValue = authHeader.replace(""Bearer"", """").trim();
            OAuth2AccessToken accessToken = tokenStore.readAccessToken(tokenValue);
            tokenStore.removeAccessToken(accessToken);
        }
    }
}
</code></pre>

<p>Change the <code>logout()</code> method of <a href=""https://github.com/spring-guides/tut-spring-security-and-angular-js/blob/master/oauth2/ui/src/main/resources/static/js/hello.js"" rel=""nofollow""><code>hello.js</code> in the <code>ui</code> app</a> to become the following:  </p>

<pre><code>self.logout = function() {
    $http.post('http://localhost:9999/uaa/logout', {}).finally(function() {
        $rootScope.authenticated = false;
        $location.path(""/"");
    });
}
</code></pre>

<p>But when the user clicks on the logout button in the browser and triggers the call to <code>http://localhost:9999/uaa/logout</code>, the debug log for the <a href=""https://github.com/spring-guides/tut-spring-security-and-angular-js/tree/master/oauth2/authserver"" rel=""nofollow""><code>authserver</code></a> app gives the following output:  </p>

<pre><code>2016-04-18 15:34:07.142 DEBUG 313 --- [io-9999-exec-10] o.s.s.web.util.matcher.OrRequestMatcher  : Trying to match using Ant [pattern='/css/**']
2016-04-18 15:34:07.142 DEBUG 313 --- [io-9999-exec-10] o.s.s.w.u.matcher.AntPathRequestMatcher  : Checking match of request : '/logout'; against '/css/**'
2016-04-18 15:34:07.142 DEBUG 313 --- [io-9999-exec-10] o.s.s.web.util.matcher.OrRequestMatcher  : Trying to match using Ant [pattern='/js/**']
2016-04-18 15:34:07.142 DEBUG 313 --- [io-9999-exec-10] o.s.s.w.u.matcher.AntPathRequestMatcher  : Checking match of request : '/logout'; against '/js/**'
2016-04-18 15:34:07.142 DEBUG 313 --- [io-9999-exec-10] o.s.s.web.util.matcher.OrRequestMatcher  : Trying to match using Ant [pattern='/images/**']
2016-04-18 15:34:07.142 DEBUG 313 --- [io-9999-exec-10] o.s.s.w.u.matcher.AntPathRequestMatcher  : Checking match of request : '/logout'; against '/images/**'
2016-04-18 15:34:07.142 DEBUG 313 --- [io-9999-exec-10] o.s.s.web.util.matcher.OrRequestMatcher  : Trying to match using Ant [pattern='/**/favicon.ico']
2016-04-18 15:34:07.142 DEBUG 313 --- [io-9999-exec-10] o.s.s.w.u.matcher.AntPathRequestMatcher  : Checking match of request : '/logout'; against '/**/favicon.ico'
2016-04-18 15:34:07.142 DEBUG 313 --- [io-9999-exec-10] o.s.s.web.util.matcher.OrRequestMatcher  : Trying to match using Ant [pattern='/error']
2016-04-18 15:34:07.142 DEBUG 313 --- [io-9999-exec-10] o.s.s.w.u.matcher.AntPathRequestMatcher  : Checking match of request : '/logout'; against '/error'
2016-04-18 15:34:07.143 DEBUG 313 --- [io-9999-exec-10] o.s.s.web.util.matcher.OrRequestMatcher  : No matches found
2016-04-18 15:34:07.143 DEBUG 313 --- [io-9999-exec-10] o.s.s.web.util.matcher.OrRequestMatcher  : Trying to match using Ant [pattern='/login']
2016-04-18 15:34:07.143 DEBUG 313 --- [io-9999-exec-10] o.s.s.w.u.matcher.AntPathRequestMatcher  : Checking match of request : '/logout'; against '/login'
2016-04-18 15:34:07.143 DEBUG 313 --- [io-9999-exec-10] o.s.s.web.util.matcher.OrRequestMatcher  : Trying to match using Ant [pattern='/oauth/authorize']
2016-04-18 15:34:07.143 DEBUG 313 --- [io-9999-exec-10] o.s.s.w.u.matcher.AntPathRequestMatcher  : Checking match of request : '/logout'; against '/oauth/authorize'
2016-04-18 15:34:07.143 DEBUG 313 --- [io-9999-exec-10] o.s.s.web.util.matcher.OrRequestMatcher  : Trying to match using Ant [pattern='/oauth/confirm_access']
2016-04-18 15:34:07.143 DEBUG 313 --- [io-9999-exec-10] o.s.s.w.u.matcher.AntPathRequestMatcher  : Checking match of request : '/logout'; against '/oauth/confirm_access'

2016-04-18 15:34:07.143 DEBUG 313 --- [io-9999-exec-10] o.s.s.web.util.matcher.OrRequestMatcher  : Trying to match using Ant [pattern='/logout']
2016-04-18 15:34:07.143 DEBUG 313 --- [io-9999-exec-10] o.s.s.w.u.matcher.AntPathRequestMatcher  : Checking match of request : '/logout'; against '/logout'
2016-04-18 15:34:07.143 DEBUG 313 --- [io-9999-exec-10] o.s.s.web.util.matcher.OrRequestMatcher  : matched

2016-04-18 15:34:07.143 DEBUG 313 --- [io-9999-exec-10] o.s.security.web.FilterChainProxy        : /logout at position 1 of 12 in additional filter chain; firing Filter: 'WebAsyncManagerIntegrationFilter'
2016-04-18 15:34:07.143 DEBUG 313 --- [io-9999-exec-10] o.s.security.web.FilterChainProxy        : /logout at position 2 of 12 in additional filter chain; firing Filter: 'SecurityContextPersistenceFilter'
2016-04-18 15:34:07.143 DEBUG 313 --- [io-9999-exec-10] w.c.HttpSessionSecurityContextRepository : No HttpSession currently exists
2016-04-18 15:34:07.143 DEBUG 313 --- [io-9999-exec-10] w.c.HttpSessionSecurityContextRepository : No SecurityContext was available from the HttpSession: null. A new one will be created.
2016-04-18 15:34:07.143 DEBUG 313 --- [io-9999-exec-10] o.s.security.web.FilterChainProxy        : /logout at position 3 of 12 in additional filter chain; firing Filter: 'HeaderWriterFilter'
2016-04-18 15:34:07.143 DEBUG 313 --- [io-9999-exec-10] o.s.s.w.header.writers.HstsHeaderWriter  : Not injecting HSTS header since it did not match the requestMatcher org.springframework.security.web.header.writers.HstsHeaderWriter$SecureRequestMatcher@5790c1b4
2016-04-18 15:34:07.143 DEBUG 313 --- [io-9999-exec-10] o.s.security.web.FilterChainProxy        : /logout at position 4 of 12 in additional filter chain; firing Filter: 'CsrfFilter'
2016-04-18 15:34:07.144 DEBUG 313 --- [io-9999-exec-10] o.s.security.web.FilterChainProxy        : /logout at position 5 of 12 in additional filter chain; firing Filter: 'LogoutFilter'

2016-04-18 15:34:07.144 DEBUG 313 --- [io-9999-exec-10] o.s.s.w.u.matcher.AntPathRequestMatcher  : Request 'OPTIONS /logout' doesn't match 'POST /logout
2016-04-18 15:34:07.144 DEBUG 313 --- [io-9999-exec-10] o.s.security.web.FilterChainProxy        : /logout at position 6 of 12 in additional filter chain; firing Filter: 'UsernamePasswordAuthenticationFilter'

2016-04-18 15:34:07.144 DEBUG 313 --- [io-9999-exec-10] o.s.s.w.u.matcher.AntPathRequestMatcher  : Request 'OPTIONS /logout' doesn't match 'POST /login
2016-04-18 15:34:07.144 DEBUG 313 --- [io-9999-exec-10] o.s.security.web.FilterChainProxy        : /logout at position 7 of 12 in additional filter chain; firing Filter: 'RequestCacheAwareFilter'
2016-04-18 15:34:07.144 DEBUG 313 --- [io-9999-exec-10] o.s.security.web.FilterChainProxy        : /logout at position 8 of 12 in additional filter chain; firing Filter: 'SecurityContextHolderAwareRequestFilter'
2016-04-18 15:34:07.144 DEBUG 313 --- [io-9999-exec-10] o.s.security.web.FilterChainProxy        : /logout at position 9 of 12 in additional filter chain; firing Filter: 'AnonymousAuthenticationFilter'
2016-04-18 15:34:07.144 DEBUG 313 --- [io-9999-exec-10] o.s.s.w.a.AnonymousAuthenticationFilter  : Populated SecurityContextHolder with anonymous token: 'org.springframework.security.authentication.AnonymousAuthenticationToken@9055e4a6: Principal: anonymousUser; Credentials: [PROTECTED]; Authenticated: true; Details: org.springframework.security.web.authentication.WebAuthenticationDetails@957e: RemoteIpAddress: 127.0.0.1; SessionId: null; Granted Authorities: ROLE_ANONYMOUS'
2016-04-18 15:34:07.144 DEBUG 313 --- [io-9999-exec-10] o.s.security.web.FilterChainProxy        : /logout at position 10 of 12 in additional filter chain; firing Filter: 'SessionManagementFilter'
2016-04-18 15:34:07.144 DEBUG 313 --- [io-9999-exec-10] o.s.security.web.FilterChainProxy        : /logout at position 11 of 12 in additional filter chain; firing Filter: 'ExceptionTranslationFilter'
2016-04-18 15:34:07.144 DEBUG 313 --- [io-9999-exec-10] o.s.security.web.FilterChainProxy        : /logout at position 12 of 12 in additional filter chain; firing Filter: 'FilterSecurityInterceptor'
2016-04-18 15:34:07.144 DEBUG 313 --- [io-9999-exec-10] o.s.s.w.a.i.FilterSecurityInterceptor    : Secure object: FilterInvocation: URL: /logout; Attributes: [authenticated]
2016-04-18 15:34:07.144 DEBUG 313 --- [io-9999-exec-10] o.s.s.w.a.i.FilterSecurityInterceptor    : Previously Authenticated: org.springframework.security.authentication.AnonymousAuthenticationToken@9055e4a6: Principal: anonymousUser; Credentials: [PROTECTED]; Authenticated: true; Details: org.springframework.security.web.authentication.WebAuthenticationDetails@957e: RemoteIpAddress: 127.0.0.1; SessionId: null; Granted Authorities: ROLE_ANONYMOUS
2016-04-18 15:34:07.144 DEBUG 313 --- [io-9999-exec-10] o.s.s.access.vote.AffirmativeBased       : Voter: org.springframework.security.web.access.expression.WebExpressionVoter@539015a, returned: -1
2016-04-18 15:34:07.145 DEBUG 313 --- [io-9999-exec-10] o.s.s.w.a.ExceptionTranslationFilter     : Access is denied (user is anonymous); redirecting to authentication entry point

org.springframework.security.access.AccessDeniedException: Access is denied
    at org.springframework.security.access.vote.AffirmativeBased.decide(AffirmativeBased.java:83) ~[spring-security-core-4.0.3.RELEASE.jar:4.0.3.RELEASE]
    at org.springframework.security.access.intercept.AbstractSecurityInterceptor.beforeInvocation(AbstractSecurityInterceptor.java:232) ~[spring-security-core-4.0.3.RELEASE.jar:4.0.3.RELEASE]
    at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.invoke(FilterSecurityInterceptor.java:123) ~[spring-security-web-4.0.3.RELEASE.jar:4.0.3.RELEASE]
    at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.doFilter(FilterSecurityInterceptor.java:90) ~[spring-security-web-4.0.3.RELEASE.jar:4.0.3.RELEASE]
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:330) [spring-security-web-4.0.3.RELEASE.jar:4.0.3.RELEASE]
    at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:114) ~[spring-security-web-4.0.3.RELEASE.jar:4.0.3.RELEASE]
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:330) [spring-security-web-4.0.3.RELEASE.jar:4.0.3.RELEASE]
    at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:122) [spring-security-web-4.0.3.RELEASE.jar:4.0.3.RELEASE]
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:330) [spring-security-web-4.0.3.RELEASE.jar:4.0.3.RELEASE]
    at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:111) [spring-security-web-4.0.3.RELEASE.jar:4.0.3.RELEASE]
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:330) [spring-security-web-4.0.3.RELEASE.jar:4.0.3.RELEASE]
    at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:169) [spring-security-web-4.0.3.RELEASE.jar:4.0.3.RELEASE]
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:330) [spring-security-web-4.0.3.RELEASE.jar:4.0.3.RELEASE]
    at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:48) [spring-security-web-4.0.3.RELEASE.jar:4.0.3.RELEASE]
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:330) [spring-security-web-4.0.3.RELEASE.jar:4.0.3.RELEASE]
    at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:205) [spring-security-web-4.0.3.RELEASE.jar:4.0.3.RELEASE]
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:330) [spring-security-web-4.0.3.RELEASE.jar:4.0.3.RELEASE]
    at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:120) [spring-security-web-4.0.3.RELEASE.jar:4.0.3.RELEASE]
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:330) [spring-security-web-4.0.3.RELEASE.jar:4.0.3.RELEASE]
    at org.springframework.security.web.csrf.CsrfFilter.doFilterInternal(CsrfFilter.java:96) [spring-security-web-4.0.3.RELEASE.jar:4.0.3.RELEASE]
    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107) [spring-web-4.2.5.RELEASE.jar:4.2.5.RELEASE]
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:330) [spring-security-web-4.0.3.RELEASE.jar:4.0.3.RELEASE]
    at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:64) [spring-security-web-4.0.3.RELEASE.jar:4.0.3.RELEASE]
    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107) [spring-web-4.2.5.RELEASE.jar:4.2.5.RELEASE]
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:330) [spring-security-web-4.0.3.RELEASE.jar:4.0.3.RELEASE]
    at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:91) [spring-security-web-4.0.3.RELEASE.jar:4.0.3.RELEASE]
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:330) [spring-security-web-4.0.3.RELEASE.jar:4.0.3.RELEASE]
    at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:53) [spring-security-web-4.0.3.RELEASE.jar:4.0.3.RELEASE]
    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107) [spring-web-4.2.5.RELEASE.jar:4.2.5.RELEASE]
    ...  
    at java.lang.Thread.run(Thread.java:745) [na:1.8.0_45]

2016-04-18 15:34:07.146 DEBUG 313 --- [io-9999-exec-10] o.s.s.w.util.matcher.AndRequestMatcher   : Trying to match using Ant [pattern='/**', GET]
2016-04-18 15:34:07.146 DEBUG 313 --- [io-9999-exec-10] o.s.s.w.u.matcher.AntPathRequestMatcher  : Request 'OPTIONS /logout' doesn't match 'GET /**
2016-04-18 15:34:07.146 DEBUG 313 --- [io-9999-exec-10] o.s.s.w.util.matcher.AndRequestMatcher   : Did not match
2016-04-18 15:34:07.146 DEBUG 313 --- [io-9999-exec-10] o.s.s.w.s.HttpSessionRequestCache        : Request not saved as configured RequestMatcher did not match
2016-04-18 15:34:07.146 DEBUG 313 --- [io-9999-exec-10] o.s.s.w.a.ExceptionTranslationFilter     : Calling Authentication entry point.
2016-04-18 15:34:07.146 DEBUG 313 --- [io-9999-exec-10] o.s.s.web.DefaultRedirectStrategy        : Redirecting to 'http://localhost:9999/uaa/login'
2016-04-18 15:34:07.147 DEBUG 313 --- [io-9999-exec-10] w.c.HttpSessionSecurityContextRepository : SecurityContext is empty or contents are anonymous - context will not be stored in HttpSession.
2016-04-18 15:34:07.147 DEBUG 313 --- [io-9999-exec-10] s.s.w.c.SecurityContextPersistenceFilter : SecurityContextHolder now cleared, as request processing completed
</code></pre>

<p><strong>What other specific code changes need to be changed in <a href=""https://github.com/spring-guides/tut-spring-security-and-angular-js/tree/master/oauth2"" rel=""nofollow"">the GitHub sample apps</a> to enable the <code>ui</code> app to trigger a global logout of the user from all apps?</strong>  </p>

<p>Note: Obviously, <code>/uaa/logout</code> is a different URL than <code>/oauth/revoke-token</code>.  However, the inner workings of Spring Security and OAuth in this situation are not clear without an answer to this OP.  </p>

<hr/>

<p><strong>@StuXnet's Suggestions:</strong>  </p>

<hr/>

<p>The content of the Firefox Developer Tools Network Tab for the request is:  </p>

<p>The request to <code>http : // localhost:9999/uaa/login</code> with method <code>OPTIONS</code> was rejected with a <code>403</code> error.  </p>

<p>The raw <code>request</code> headers were:  </p>

<pre><code>Host: localhost:9999
User-Agent: Mozilla/5.0 (X11; Linux x86_64; rv:38.0) Gecko/20100101 Firefox/38.0
Accept: text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8
Accept-Language: en-US,en;q=0.5
Accept-Encoding: gzip, deflate
Origin: http://localhost:8080
Access-Control-Request-Method: POST
Access-Control-Request-Headers: content-type,x-requested-with
Connection: keep-alive
Pragma: no-cache
Cache-Control: no-cache
</code></pre>

<p>The raw <code>response</code> headers were:  </p>

<pre><code>Allow: GET, HEAD, POST, PUT, DELETE, TRACE, OPTIONS, PATCH
Content-Length: 20
Date: Mon, 18 Apr 2016 23:45:46 GMT
Server: Apache-Coyote/1.1
X-Application-Context: application:9999
</code></pre>

<p>Next, I changed the config(http) method of LoginConfig to read as follows:  </p>

<pre><code>@Override
protected void configure(HttpSecurity http) throws Exception {
    // @formatter:off
    http
        .formLogin().loginPage(""/login"").permitAll()
        .and()
        .requestMatchers().antMatchers(""/login"", ""/oauth/authorize"", ""/oauth/confirm_access"", ""/logout"", ""/oauth/revoke-token"")
        .and()
        .authorizeRequests()
        .antMatchers(HttpMethod.OPTIONS,""/logout"").permitAll()
        .anyRequest().authenticated();
        // @formatter:on
}
</code></pre>

<p>This resulted in the following new printout in the Spring Boot DEBUG logs:  </p>

<pre><code>2016-04-18 19:22:06.202 DEBUG 5319 --- [io-9999-exec-10] o.s.s.web.util.matcher.OrRequestMatcher  : Trying to match using Ant [pattern='/css/**']
2016-04-18 19:22:06.202 DEBUG 5319 --- [io-9999-exec-10] o.s.s.w.u.matcher.AntPathRequestMatcher  : Checking match of request : '/logout'; against '/css/**'
2016-04-18 19:22:06.202 DEBUG 5319 --- [io-9999-exec-10] o.s.s.web.util.matcher.OrRequestMatcher  : Trying to match using Ant [pattern='/js/**']
2016-04-18 19:22:06.202 DEBUG 5319 --- [io-9999-exec-10] o.s.s.w.u.matcher.AntPathRequestMatcher  : Checking match of request : '/logout'; against '/js/**'
2016-04-18 19:22:06.202 DEBUG 5319 --- [io-9999-exec-10] o.s.s.web.util.matcher.OrRequestMatcher  : Trying to match using Ant [pattern='/images/**']
2016-04-18 19:22:06.202 DEBUG 5319 --- [io-9999-exec-10] o.s.s.w.u.matcher.AntPathRequestMatcher  : Checking match of request : '/logout'; against '/images/**'
2016-04-18 19:22:06.202 DEBUG 5319 --- [io-9999-exec-10] o.s.s.web.util.matcher.OrRequestMatcher  : Trying to match using Ant [pattern='/**/favicon.ico']
2016-04-18 19:22:06.202 DEBUG 5319 --- [io-9999-exec-10] o.s.s.w.u.matcher.AntPathRequestMatcher  : Checking match of request : '/logout'; against '/**/favicon.ico'
2016-04-18 19:22:06.202 DEBUG 5319 --- [io-9999-exec-10] o.s.s.web.util.matcher.OrRequestMatcher  : Trying to match using Ant [pattern='/error']
2016-04-18 19:22:06.202 DEBUG 5319 --- [io-9999-exec-10] o.s.s.w.u.matcher.AntPathRequestMatcher  : Checking match of request : '/logout'; against '/error'
2016-04-18 19:22:06.202 DEBUG 5319 --- [io-9999-exec-10] o.s.s.web.util.matcher.OrRequestMatcher  : No matches found
2016-04-18 19:22:06.203 DEBUG 5319 --- [io-9999-exec-10] o.s.s.w.u.matcher.AntPathRequestMatcher  : Request '/logout' matched by universal pattern '/**'
2016-04-18 19:22:06.203 DEBUG 5319 --- [io-9999-exec-10] o.s.security.web.FilterChainProxy        : /logout has an empty filter list
2016-04-18 19:22:06.204 DEBUG 5319 --- [io-9999-exec-10] .s.o.p.e.FrameworkEndpointHandlerMapping : Looking up handler method for path /logout
2016-04-18 19:22:06.205 DEBUG 5319 --- [io-9999-exec-10] .s.o.p.e.FrameworkEndpointHandlerMapping : Did not find handler method for [/logout]
</code></pre>

<p>And the following <code>request</code> header in Firefox:  </p>

<pre><code>Host: localhost:9999
User-Agent: Mozilla/5.0 (X11; Linux x86_64; rv:38.0) Gecko/20100101 Firefox/38.0
Accept: text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8
Accept-Language: en-US,en;q=0.5
Accept-Encoding: gzip, deflate
Origin: http://localhost:8080
Access-Control-Request-Method: POST
Access-Control-Request-Headers: content-type,x-requested-with
Connection: keep-alive
Pragma: no-cache
Cache-Control: no-cache
</code></pre>

<p>Along with the following <code>response</code> header in Firefox:  </p>

<pre><code>Allow: GET, HEAD, POST, PUT, DELETE, TRACE, OPTIONS, PATCH
Content-Length: 20
Date: Tue, 19 Apr 2016 02:22:06 GMT
Server: Apache-Coyote/1.1
X-Application-Context: application:9999
</code></pre>

<p>I then tried changing the <code>configure(http)</code> method of <code>LoginConfig</code> to become:  </p>

<pre><code>@Override
protected void configure(HttpSecurity http) throws Exception {
    // @formatter:off
    http
        .formLogin().loginPage(""/login"").permitAll()
        .and()
        .requestMatchers().antMatchers(""/login"", ""/oauth/authorize"", ""/oauth/confirm_access"", ""/logout"", ""/oauth/revoke-token"")
        .and()
        .authorizeRequests()
        .anyRequest().authenticated()
        // @formatter:on
        .and()
        .csrf()
        .ignoringAntMatchers(""/logout"");
}
</code></pre>

<p>But the result is the following Spring Boot DEBUG log for the <code>authserver</code> app:  </p>

<pre><code>2016-04-19 10:12:13.545 DEBUG 4593 --- [nio-9999-exec-2] o.s.s.web.util.matcher.OrRequestMatcher  : Trying to match using Ant [pattern='/css/**']
2016-04-19 10:12:13.546 DEBUG 4593 --- [nio-9999-exec-2] o.s.s.w.u.matcher.AntPathRequestMatcher  : Checking match of request : '/logout'; against '/css/**'
2016-04-19 10:12:13.546 DEBUG 4593 --- [nio-9999-exec-2] o.s.s.web.util.matcher.OrRequestMatcher  : Trying to match using Ant [pattern='/js/**']
2016-04-19 10:12:13.546 DEBUG 4593 --- [nio-9999-exec-2] o.s.s.w.u.matcher.AntPathRequestMatcher  : Checking match of request : '/logout'; against '/js/**'
2016-04-19 10:12:13.546 DEBUG 4593 --- [nio-9999-exec-2] o.s.s.web.util.matcher.OrRequestMatcher  : Trying to match using Ant [pattern='/images/**']
2016-04-19 10:12:13.546 DEBUG 4593 --- [nio-9999-exec-2] o.s.s.w.u.matcher.AntPathRequestMatcher  : Checking match of request : '/logout'; against '/images/**'
2016-04-19 10:12:13.546 DEBUG 4593 --- [nio-9999-exec-2] o.s.s.web.util.matcher.OrRequestMatcher  : Trying to match using Ant [pattern='/**/favicon.ico']
2016-04-19 10:12:13.546 DEBUG 4593 --- [nio-9999-exec-2] o.s.s.w.u.matcher.AntPathRequestMatcher  : Checking match of request : '/logout'; against '/**/favicon.ico'
2016-04-19 10:12:13.546 DEBUG 4593 --- [nio-9999-exec-2] o.s.s.web.util.matcher.OrRequestMatcher  : Trying to match using Ant [pattern='/error']
2016-04-19 10:12:13.546 DEBUG 4593 --- [nio-9999-exec-2] o.s.s.w.u.matcher.AntPathRequestMatcher  : Checking match of request : '/logout'; against '/error'
2016-04-19 10:12:13.546 DEBUG 4593 --- [nio-9999-exec-2] o.s.s.web.util.matcher.OrRequestMatcher  : No matches found
2016-04-19 10:12:13.546 DEBUG 4593 --- [nio-9999-exec-2] o.s.s.w.u.matcher.AntPathRequestMatcher  : Request '/logout' matched by universal pattern '/**'
2016-04-19 10:12:13.546 DEBUG 4593 --- [nio-9999-exec-2] o.s.security.web.FilterChainProxy        : /logout has an empty filter list
2016-04-19 10:12:13.547 DEBUG 4593 --- [nio-9999-exec-2] .s.o.p.e.FrameworkEndpointHandlerMapping : Looking up handler method for path /logout
2016-04-19 10:12:13.548 DEBUG 4593 --- [nio-9999-exec-2] .s.o.p.e.FrameworkEndpointHandlerMapping : Did not find handler method for [/logout]
</code></pre>

<hr>

<p><strong>REPRODUCING THE PROBLEM ON YOUR MACHINE:</strong>  </p>

<hr>

<p>To reproduce the problem on your own machine, you can either:  </p>

<p>1.) git clone the original sample app at the link at the top of the OP and then make the changes shown above, or </p>

<p>2.) Download <a href=""https://jumpshare.com/v/ELVSYNXNeUKV6Xl1Droq"" rel=""nofollow"">the zipped version of the app as it exists on my devbox including all the changes from the OP at this file sharing link</a>, and then:  </p>

<p>2.a.) Untar the app.  </p>

<p>2.b.) Navigate a terminal window to <code>oauth2/resource</code> and <code>mvn spring-boot:run</code>.  Then navigate a second terminal window to <code>oauth2/authserver</code> and type <code>mvn spring-boot:run</code>.  Then navigate a third terminal window to <code>oauth2/ui</code> and type <code>mvn spring-boot:run</code>.  </p>

<p>2.c.) Navigate the web browser to <code>http : // localhost:8080</code>, then click <code>login</code>, then enter <code>user</code> for <code>username</code> and <code>password</code> for <code>password</code>.  After you have been authenticated, click the <code>logout</code> button to reproduce the 403 error.  Use the Network tab of your browser's developer tools to examine the browser activity.  View the Spring Boot logs in the terminal that is running the <code>authserver</code> app to see Spring's activity.  </p>

<p>3.) Either import the three folders into eclipse (or another IDE) as existing maven projects, or open the code files with a text editor to edit before repeating the relaunch and retesting in step 2.  </p>

<p><strong>What else can I provide to help isolate the solution?</strong></p>
",807797,,807797,,2016-04-20 19:42:10,2016-08-25 8:37:48,Request 'OPTIONS /logout' doesn't match 'POST /logout,<spring><spring-security><spring-boot><spring-cloud><spring-oauth2>,1,6,2,,
Spring,37061697,1,,,,,,5/5/2016 23:05:27,,14,2025,"<p>Complete code for a Spring OAuth2 implementation of Multi-Factor Authentication has been uploaded to <a href=""https://jumpshare.com/v/oj7wSZaZRgJHEwqYiJ2p"" rel=""nofollow noreferrer"">a file sharing site at this link</a>.  Instructions are given below to recreate the current problem on any computer in only a few minutes.</p>

<p><hr/>
<strong>CURRENT PROBLEM:</strong></p>

<hr/>  

<p>Most of the authentication algorithm works correctly.  The program does not break until the very end of the control flow shown below.  Specifically, an <code>Invalid CSRF token found for http://localhost:9999/uaa/oauth/token</code> error is being thrown at the end of the <strong>SECOND PASS</strong> below.  The app in the link above was developed by adding a custom <code>OAuth2RequestFactory</code>, <code>TwoFactorAuthenticationFilter</code> and <code>TwoFactorAuthenticationController</code> to the <a href=""https://github.com/spring-guides/tut-spring-security-and-angular-js/tree/master/oauth2/authserver"" rel=""nofollow noreferrer""><code>authserver</code> app</a> of this <a href=""https://github.com/spring-guides/tut-spring-security-and-angular-js/tree/master/oauth2"" rel=""nofollow noreferrer"">Spring Boot OAuth2 GitHub sample</a>.  <strong>What specific changes need to be made to the code below in order to resolve this CSRF token error and enable 2-factor authentication?</strong>  </p>

<p>My research leads me to suspect that the <code>CustomOAuth2RequestFactory</code> (<a href=""http://docs.spring.io/spring-security/oauth/apidocs/org/springframework/security/oauth2/provider/OAuth2RequestFactory.html"" rel=""nofollow noreferrer"">API at this link</a>) might be the place to configure a solution because it defines ways for managing <a href=""http://docs.spring.io/spring-security/oauth/apidocs/org/springframework/security/oauth2/provider/AuthorizationRequest.html"" rel=""nofollow noreferrer""><code>AuthorizationRequest</code></a>s and <a href=""http://docs.spring.io/spring-security/oauth/apidocs/org/springframework/security/oauth2/provider/TokenRequest.html"" rel=""nofollow noreferrer""><code>TokenRequest</code></a>s.  </p>

<p><strong><a href=""https://tools.ietf.org/html/rfc6749#section-4.1.1"" rel=""nofollow noreferrer"">This section of the official OAuth2 spec</a> indicates that the <code>state</code> parameter of the request made to the authorization endpoint is the place where the <code>csrf</code> token is added.</strong>  </p>

<p>Also, the code in the link uses <a href=""https://tools.ietf.org/html/rfc6749#section-4.1"" rel=""nofollow noreferrer"">the Authorization Code Grant Type described at this link to the official spec</a>, which would mean that Step C in the flow does not update the <code>csrf</code> code, thus triggering the error in Step D.  (You can view the entire flow including Step C and Step D in <a href=""https://tools.ietf.org/html/rfc6749#section-4.1"" rel=""nofollow noreferrer"">the official spec</a>.)</p>

<p><hr/>
<strong>CONTROL FLOW SURROUNDING THE CURRENT ERROR:</strong>  </p>

<hr/>  

<p>The current error is being thrown during the <strong>SECOND PASS</strong> through <code>TwoFactorAuthenticationFilter</code> in the flowchart below.  Everything works as intended until the control flow gets into the <strong>SECOND PASS</strong>.    </p>

<p>The following flowchart illustrates the control flow of the two factor authentication process that is employed by the code in the downloadable app.</p>

<p><img src=""https://s32.postimg.cc/5sahbqvrp/2_FA_OAuth_Flow.gif"">  </p>

<p>Specifically, the Firefox <code>HTTP</code> Headers for the sequence of <code>POST</code>s and <code>GET</code>s show that the same <code>XSRF</code> cookie is sent with every request in the sequence.  The <code>XSRF</code> token values do not cause a problem until after the <code>POST /secure/two_factor_authentication</code>, which triggers server processing at the <code>/oauth/authorize</code> and <code>/oauth/token</code> endpoints, with <code>/oauth/token</code> throwing the <code>Invalid CSRF token found for http://localhost:9999/uaa/oauth/token</code> error.  </p>

<p>To understand the relationship between the above control flow chart and the <code>/oauth/authorize</code> and <code>/oauth/token</code> endpoints, you can compare the above flowchart side by side <a href=""https://tools.ietf.org/html/rfc6749#section-4.1"" rel=""nofollow noreferrer"">with the chart for the single factor flow at the official spec</a> in a separate browser window.  The <strong>SECOND PASS</strong> above simply runs through the steps from the one-factor official spec a second time, but with greater permissions during the <strong>SECOND PASS</strong>.  </p>

<p><hr/><br>
<strong>WHAT THE LOGS SAY:</strong></p>

<hr/>  

<p>The HTTP Request and Response Headers indicate that:  </p>

<p>1.) A POST to <code>9999/login</code> with the correct <code>username</code> and <code>password</code> submitted results in a redirect to <code>9999/authorize?client_id=acme&amp;redirect_uri=/login&amp;response_type=code&amp;state=sGXQ4v</code> followed by a <code>GET 9999/secure/two_factor_authenticated</code>.  One XSRF token remains constant across these exchanges.  </p>

<p>2.) A POST to <code>9999/secure/two_factor_authentication</code> with the correct pin code sends the same <code>XSRF</code> token, and gets successfully re-directed to <code>POST 9999/oauth/authorize</code> and makes it into <code>TwoFactorAuthenticationFilter.doFilterInternal()</code> and proceeds to <code>request 9999/oauth/token</code>, but <code>9999/oauth/token</code> rejects the request because the same old XSRF token does not match a new <code>XSRF</code> token value, which was apparently created during the <strong>FIRST PASS</strong>.    </p>

<p>One obvious difference between <code>1.)</code> and <code>2.)</code> is that the second <code>request 9999/oauth/authorize</code> in <code>2.)</code> does not contain the url parameters which are included in the first request to <code>9999/authorize?client_id=acme&amp;redirect_uri=/login&amp;response_type=code&amp;state=sGXQ4v</code> in <code>1.)</code>, and also defined in <a href=""https://tools.ietf.org/html/rfc6749#section-4.1"" rel=""nofollow noreferrer"">the official spec</a>.  But it is not clear if this is causing the problem.  </p>

<p>Also, it is not clear how to access the parameters to send a fully formed request from the <code>TwoFactorAuthenticationController.POST</code>.  I did a SYSO of the <code>parameters</code> <code>Map</code> in the <code>HttpServletRequest</code> for the <code>POST 9999/secure/two_factor_authentication</code> controller method, and all it contains are the <code>pinVal</code> and <code>_csrf</code> variables.  </p>

<p>You can read all the HTTP Headers and Spring Boot logs at a file sharing site <a href=""https://jumpshare.com/v/Xy2g91GLXLB8gkWmliMF"" rel=""nofollow noreferrer"">by clicking on this link</a>.</p>

<p><hr/>
<strong>A FAILED APPROACH:</strong>  </p>

<hr/>  

<p>I tried <a href=""https://stackoverflow.com/questions/20862299/with-spring-security-3-2-0-release-how-can-i-get-the-csrf-token-in-a-page-that#20960352"">@RobWinch's approach to a similar problem in the Spring Security 3.2 environment</a>, but the approach does not seem to apply to the context of Spring OAuth2.  Specifically, when the following <code>XSRF</code> update code block is uncommented in the <code>TwoFactorAuthenticationFilter</code> code shown below, the downstream request headers do show a different/new <code>XSRF</code> token value, but the same error is thrown.  </p>

<pre><code>if(AuthenticationUtil.hasAuthority(ROLE_TWO_FACTOR_AUTHENTICATED)){
    CsrfToken token = (CsrfToken) request.getAttribute(""_csrf"");
    response.setHeader(""XSRF-TOKEN""/*""X-CSRF-TOKEN""*/, token.getToken());
}
</code></pre>

<p><strong>This indicates that the <code>XSRF</code> configuration needs to be updated in a way that <code>/oauth/authorize</code> and <code>/oauth/token</code> are able to talk with each other and with the client and resource apps to successfully manage the <code>XSRF</code> token values.</strong>  Perhaps the <code>CustomOAuth2RequestFactory</code> is what needs to be changed to accomplish this.  But how?  </p>

<p><hr/>
<strong>RELEVANT CODE:</strong></p>

<hr/>  

<p>The code for <code>CustomOAuth2RequestFactory</code> is:  </p>

<pre><code>public class CustomOAuth2RequestFactory extends DefaultOAuth2RequestFactory {

    public static final String SAVED_AUTHORIZATION_REQUEST_SESSION_ATTRIBUTE_NAME = ""savedAuthorizationRequest"";

    public CustomOAuth2RequestFactory(ClientDetailsService clientDetailsService) {
        super(clientDetailsService);
    }

    @Override
    public AuthorizationRequest createAuthorizationRequest(Map&lt;String, String&gt; authorizationParameters) {
        ServletRequestAttributes attr = (ServletRequestAttributes) RequestContextHolder.currentRequestAttributes();
        HttpSession session = attr.getRequest().getSession(false);
        if (session != null) {
            AuthorizationRequest authorizationRequest = (AuthorizationRequest) session.getAttribute(SAVED_AUTHORIZATION_REQUEST_SESSION_ATTRIBUTE_NAME);
            if (authorizationRequest != null) {
                session.removeAttribute(SAVED_AUTHORIZATION_REQUEST_SESSION_ATTRIBUTE_NAME);
                return authorizationRequest;
            }
        }

        return super.createAuthorizationRequest(authorizationParameters);
    }
}
</code></pre>

<p>The code for <code>TwoFactorAuthenticationFilter</code> is:  </p>

<pre><code>//This class is added per: https://stackoverflow.com/questions/30319666/two-factor-authentication-with-spring-security-oauth2
/**
 * Stores the oauth authorizationRequest in the session so that it can
 * later be picked by the {@link com.example.CustomOAuth2RequestFactory}
 * to continue with the authoriztion flow.
 */
public class TwoFactorAuthenticationFilter extends OncePerRequestFilter {

    private RedirectStrategy redirectStrategy = new DefaultRedirectStrategy();
    private OAuth2RequestFactory oAuth2RequestFactory;
    //These next two are added as a test to avoid the compilation errors that happened when they were not defined.
    public static final String ROLE_TWO_FACTOR_AUTHENTICATED = ""ROLE_TWO_FACTOR_AUTHENTICATED"";
    public static final String ROLE_TWO_FACTOR_AUTHENTICATION_ENABLED = ""ROLE_TWO_FACTOR_AUTHENTICATION_ENABLED"";

    @Autowired
    public void setClientDetailsService(ClientDetailsService clientDetailsService) {
        oAuth2RequestFactory = new DefaultOAuth2RequestFactory(clientDetailsService);
    }

    private boolean twoFactorAuthenticationEnabled(Collection&lt;? extends GrantedAuthority&gt; authorities) {
        System.out.println(""&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; List of authorities includes: "");
        for (GrantedAuthority authority : authorities) {
            System.out.println(""auth: ""+authority.getAuthority() );
        }
        return authorities.stream().anyMatch(
            authority -&gt; ROLE_TWO_FACTOR_AUTHENTICATION_ENABLED.equals(authority.getAuthority())
        );
    }

    @Override
    protected void doFilterInternal(HttpServletRequest request, HttpServletResponse response, FilterChain filterChain) throws ServletException, IOException {
        System.out.println(""------------------ INSIDE TwoFactorAuthenticationFilter.doFilterInternal() ------------------------"");
        // Check if the user hasn't done the two factor authentication.
        if (AuthenticationUtil.isAuthenticated() &amp;&amp; !AuthenticationUtil.hasAuthority(ROLE_TWO_FACTOR_AUTHENTICATED)) {
        System.out.println(""++++++++++++++++++++++++ AUTHENTICATED BUT NOT TWO FACTOR +++++++++++++++++++++++++"");
        AuthorizationRequest authorizationRequest = oAuth2RequestFactory.createAuthorizationRequest(paramsFromRequest(request));
            /* Check if the client's authorities (authorizationRequest.getAuthorities()) or the user's ones
               require two factor authenticatoin. */
        System.out.println(""======================== twoFactorAuthenticationEnabled(authorizationRequest.getAuthorities()) is: "" + twoFactorAuthenticationEnabled(authorizationRequest.getAuthorities()) );
        System.out.println(""======================== twoFactorAuthenticationEnabled(SecurityContextHolder.getContext().getAuthentication().getAuthorities()) is: "" + twoFactorAuthenticationEnabled(SecurityContextHolder.getContext().getAuthentication().getAuthorities()) );
        if (twoFactorAuthenticationEnabled(authorizationRequest.getAuthorities()) ||
                twoFactorAuthenticationEnabled(SecurityContextHolder.getContext().getAuthentication().getAuthorities())) {
                // Save the authorizationRequest in the session. This allows the CustomOAuth2RequestFactory
                // to return this saved request to the AuthenticationEndpoint after the user successfully
                // did the two factor authentication.
                request.getSession().setAttribute(CustomOAuth2RequestFactory.SAVED_AUTHORIZATION_REQUEST_SESSION_ATTRIBUTE_NAME, authorizationRequest);

                // redirect the the page where the user needs to enter the two factor authentiation code
                redirectStrategy.sendRedirect(request, response,
                    ServletUriComponentsBuilder.fromCurrentContextPath()
                        .path(TwoFactorAuthenticationController.PATH)
                        .toUriString());
                return;
            }
        }
        //THE NEXT ""IF"" BLOCK DOES NOT RESOLVE THE ERROR WHEN UNCOMMENTED
        //if(AuthenticationUtil.hasAuthority(ROLE_TWO_FACTOR_AUTHENTICATED)){
        //    CsrfToken token = (CsrfToken) request.getAttribute(""_csrf"");
            // this is the value of the token to be included as either a header or an HTTP parameter
        //    response.setHeader(""XSRF-TOKEN"", token.getToken());
        //}

        filterChain.doFilter(request, response);
    }

    private Map&lt;String, String&gt; paramsFromRequest(HttpServletRequest request) {
        Map&lt;String, String&gt; params = new HashMap&lt;&gt;();
        for (Entry&lt;String, String[]&gt; entry : request.getParameterMap().entrySet()) {
            params.put(entry.getKey(), entry.getValue()[0]);
        }
        return params;
    }
}
</code></pre>

<hr/>

<p><strong>RE-CREATING THE PROBLEM ON YOUR COMPUTER:</strong>  </p>

<hr/>  

<p>You can recreate the problem on any computer in only a few minutes by following these simple steps:  </p>

<p>1.) Download the <a href=""https://jumpshare.com/v/oj7wSZaZRgJHEwqYiJ2p"" rel=""nofollow noreferrer"">zipped version of the app from a file sharing site by clicking on this link</a>.  </p>

<p>2.) Unzip the app by typing: <code>tar -zxvf oauth2.tar(2).gz</code>  </p>

<p>3.) launch the <code>authserver</code> app by navigating to <code>oauth2/authserver</code> and then typing <code>mvn spring-boot:run</code>.  </p>

<p>4.) launch the <code>resource</code> app by navigating to <code>oauth2/resource</code> and then typing <code>mvn spring-boot:run</code>  </p>

<p>5.) launch the <code>ui</code> app by navigating to <code>oauth2/ui</code> and then typing <code>mvn spring-boot:run</code>  </p>

<p>6.) Open a web browser and navigate to <code>http : // localhost : 8080</code>  </p>

<p>7.) Click <code>Login</code> and then enter <code>Frodo</code> as the user and <code>MyRing</code> as the password, and click to submit.  </p>

<p>8.) Enter <code>5309</code> as the <code>Pin Code</code> and click submit.  <strong>This will trigger the error shown above.</strong>  </p>

<p>You can view the complete source code by: </p>

<p>a.) importing the maven projects into your IDE, or by  </p>

<p>b.) navigating within the unzipped directories and opening with a text editor.  </p>

<p><hr/>
You can read all the HTTP Headers and Spring Boot logs at a file sharing site <a href=""https://jumpshare.com/v/Xy2g91GLXLB8gkWmliMF"" rel=""nofollow noreferrer"">by clicking on this link</a>.</p>
",807797,,1033581,,2018-07-21 13:43:15,2018-07-21 13:43:15,Invalid XSRF token at /oauth/token,<spring><spring-mvc><spring-security><spring-boot><spring-oauth2>,2,5,3,,
Spring,37598036,1,,,,,,6/2/2016 17:05:31,,1,842,"<p>I am following this tutorial about Spring-Security-Oauth2 :</p>

<p><a href=""https://github.com/spring-guides/tut-spring-boot-oauth2/tree/master/logout"" rel=""nofollow"">https://github.com/spring-guides/tut-spring-boot-oauth2/tree/master/logout</a></p>

<p>The problem that I am facing is, when I clicked the logout button this send a post request to the /logout endpoint to kill to session, but when I clicked the LogIn button again I expect to see the login Form Again. But It seems that when /logout is called, this is in somewhere saving the information of the last logged user and always re-login again and does not display the login form.</p>

<p>I don't know how to kill the session in the SSO, I am using the  same facebook OAuth.</p>

<p>Thanks for help.</p>
",1469918,,1469918,,2016-06-02 18:06:03,2017-07-19 22:36:28,Spring Security OAuth2 doesn't kill the session and display login again,<java><spring-security><spring-boot><single-sign-on><spring-security-oauth2>,1,6,1,,
Spring,37780976,1,,,,,,6/13/2016 2:17:04,,5,2100,"<p>I follow this tutorial: <a href=""https://help.github.com/articles/signing-commits-using-gpg/"" rel=""nofollow noreferrer"">https://help.github.com/articles/signing-commits-using-gpg/</a></p>

<p>I try to sign when commit like this:
<a href=""https://github.com/spring-guides/tut-spring-boot-oauth2/commit/824f418ab9d04114b14a90f7c19b4b8d6dda67b7"" rel=""nofollow noreferrer"">https://github.com/spring-guides/tut-spring-boot-oauth2/commit/824f418ab9d04114b14a90f7c19b4b8d6dda67b7</a></p>

<p><a href=""https://i.stack.imgur.com/aaVEi.jpg"" rel=""nofollow noreferrer""><img src=""https://i.stack.imgur.com/aaVEi.jpg"" alt=""enter image description here""></a></p>

<p>but error:</p>

<pre><code>C:\Users\Administrator\Desktop\foo\test_gpg&gt;git commit -m ""test""
gpg: skipped ""DABDD34E"": secret key not available
gpg: signing failed: secret key not available
error: gpg failed to sign the data
fatal: failed to write commit object
</code></pre>

<p><a href=""https://i.stack.imgur.com/6SiFh.jpg"" rel=""nofollow noreferrer""><img src=""https://i.stack.imgur.com/6SiFh.jpg"" alt=""enter image description here""></a>
<a href=""https://i.stack.imgur.com/ch5Sx.jpg"" rel=""nofollow noreferrer""><img src=""https://i.stack.imgur.com/ch5Sx.jpg"" alt=""enter image description here""></a>
<a href=""https://i.stack.imgur.com/TUsRP.jpg"" rel=""nofollow noreferrer""><img src=""https://i.stack.imgur.com/TUsRP.jpg"" alt=""enter image description here""></a>
<a href=""https://i.stack.imgur.com/ZD99v.jpg"" rel=""nofollow noreferrer""><img src=""https://i.stack.imgur.com/ZD99v.jpg"" alt=""enter image description here""></a></p>

<p>My config:</p>

<pre><code>C:\Users\Administrator\Desktop\foo\test_gpg&gt;git config --list --show-origin
file:""C:\\ProgramData/Git/config""       core.symlinks=false
file:""C:\\ProgramData/Git/config""       core.autocrlf=true
file:""C:\\ProgramData/Git/config""       core.fscache=true
file:""C:\\ProgramData/Git/config""       color.diff=auto
file:""C:\\ProgramData/Git/config""       color.status=auto
file:""C:\\ProgramData/Git/config""       color.branch=auto
file:""C:\\ProgramData/Git/config""       color.interactive=true
file:""C:\\ProgramData/Git/config""       help.format=html
file:""C:\\ProgramData/Git/config""       http.sslcainfo=C:/Program Files/Git/mingw64/ssl/certs/ca-bundle.crt
file:""C:\\ProgramData/Git/config""       diff.astextplain.textconv=astextplain
file:""C:\\ProgramData/Git/config""       rebase.autosquash=true
file:""C:\\Program Files\\Git\\mingw64/etc/gitconfig""    credential.helper=manager
file:C:/Users/Administrator/.gitconfig  user.name=donhuvy
file:C:/Users/Administrator/.gitconfig  user.email=donhuvy@hotmail.com
file:C:/Users/Administrator/.gitconfig  user.signingkey=DABDD34E
file:C:/Users/Administrator/.gitconfig  commit.gpgsign=true
file:C:/Users/Administrator/.gitconfig  use.signingkey=DABDD34E
file:.git/config        core.repositoryformatversion=0
file:.git/config        core.filemode=false
file:.git/config        core.bare=false
file:.git/config        core.logallrefupdates=true
file:.git/config        core.symlinks=false
file:.git/config        core.ignorecase=true
file:.git/config        core.hidedotfiles=dotGitOnly
file:.git/config        remote.origin.url=https://github.com/donhuvy/test_gpg.git
file:.git/config        remote.origin.fetch=+refs/heads/*:refs/remotes/origin/*
file:.git/config        branch.master.remote=origin
file:.git/config        branch.master.merge=refs/heads/master
file:.git/config        commit.gpgsign=true
</code></pre>

<p>and</p>

<pre><code>C:\Users\Administrator\Desktop\foo\test_gpg&gt;gpg --list-key
C:/Users/Administrator/AppData/Roaming/gnupg/pubring.gpg
--------------------------------------------------------
pub   2048R/DABDD34E 2016-06-10
uid       [ultimate] donhuvy (Do Nhu Vy) &lt;v@vyhn.net&gt;
uid       [ultimate] Do Nhu Vy (Do Nhu Vy) &lt;v@vyhn.net&gt;
sub   2048R/C6B535A2 2016-06-10
</code></pre>

<p>(I register 3 emails with GitHub: <code>v@vyhn.net</code>, <code>donhuvy@hotmail.com</code> and <code>xxxxx@gmail.com</code>)
What I have been wrong? How I sign my commit?</p>
",3728901,,3728901,,2017-11-15 12:46:16,2018-05-06 0:30:34,"gpg: skipped ""XXBDXX4E"": secret key not available. gpg: signing failed: secret key not available",<git><github>,2,0,3,,
Spring,38800564,1,,,,,,8/6/2016 4:31:43,,5,2554,"<p>We are trying to implement a SSO scheme using Azure AD and Spring security.
We found a few leads:</p>

<p><a href=""https://github.com/spring-guides/tut-spring-boot-oauth2"" rel=""noreferrer"">https://github.com/spring-guides/tut-spring-boot-oauth2</a></p>

<p><a href=""https://github.com/Pytry/azure-b2c-oauth2"" rel=""noreferrer"">https://github.com/Pytry/azure-b2c-oauth2</a></p>

<p>But none of these tell the full story.
In fact we can't get passed the access token parsing, Spring has a different idea of what the JWT token should be.</p>

<p>Ideally we wouldn't want to write an SSO filter from scratch but override the Token Services to implement custom filtering for starters.</p>

<p>Has anyone successfully implemented this?
Any help would be appreciated.</p>
",6684746,,,,,2018-05-10 8:21:19,Azure AD and Spring Security with Oauth 2,<java><security><spring-mvc><oauth><azure-active-directory>,1,1,4,,
Spring,38910280,1,,,,,,8/12/2016 5:03:21,,3,601,"<p>I'm working with tutorial that describes how to write a modular Project single-page app using Spring Boot, Spring Security and AngularJS </p>

<p><a href=""https://github.com/spring-guides/tut-spring-security-and-angular-js/tree/master/oauth2-vanilla"" rel=""nofollow"">https://github.com/spring-guides/tut-spring-security-and-angular-js/tree/master/oauth2-vanilla</a> </p>

<p>and this Project</p>

<p><a href=""https://github.com/sharmaritesh/spring-angularjs-oauth2-sample"" rel=""nofollow"">https://github.com/sharmaritesh/spring-angularjs-oauth2-sample</a></p>

<p>I cannot logout currently logged user.
If you click on the ""logout"" link you will see that the home page changes (the greeting is no longer displayed) so the user is no longer authenticated with the UI server. Click back on ""login"" though and you actually donâ€™t need to go back through the authentication and approval cycle in the authorization server (because you havenâ€™t logged out of that). </p>

<p>I'm new to Spring and would like that some User could logged out et come back to a login Page again.
Please somebody could help me or give some suggestion to solve this Problem?</p>
",2657234,,7791521,,2018-01-05 21:39:49,2018-01-05 21:39:49,Spring Boot with Angularjs Logout Error,<angularjs><spring><spring-security><spring-boot><logout>,1,0,1,,
Spring,39082691,1,,,,,,8/22/2016 14:53:28,,4,2273,"<p>I have been following Dave Syer tutorial, SSO with OAuth2, Part 5  <a href=""https://github.com/spring-guides/tut-spring-security-and-angular-js/tree/master/oauth2"" rel=""nofollow"">https://github.com/spring-guides/tut-spring-security-and-angular-js/tree/master/oauth2</a></p>

<p>It has UI/API gateway, resource server and Authorization server. 
When i click logout from UI/API gateway application i get the following,<a href=""http://i.stack.imgur.com/T7WO0.jpg"" rel=""nofollow"">enter image description here</a> Cors issue</p>

<p>What is currently happening from Dave Syer tutorial is that when a user click logout it changes the authentication flag to false, making it seem the user has logged out but they have only logged out from the UI/API gateway application. </p>

<p>When user click login, remember they havenâ€™t logout from the Authentication server. Therefore, user doesnâ€™t go through the authentication and approval cycle again. </p>

<p>What I want, when a user click logout and try to login again user must input username and password. In fact, they should start afresh, meaning system should invalidate the session and or token.</p>

<p>I've been banging my head against a wall trying to find a solution for this. Can anyone please point out how to resolve/ achieve this. </p>
",6726502,,,,,2017-07-19 17:50:43,"Spring boot Security, Oauth2 logout, invalidate session in order to go through the authentication and approval cycle in the authorization server",<java><angularjs><spring-security><spring-boot><spring-security-oauth2>,2,2,1,,
Spring,39645590,1,,,,,,9/22/2016 17:43:46,,5,7114,"<p>Here is my webConfig</p>

<pre><code>@Configuration
@EnableWebMvc
public class WebConfig extends WebMvcConfigurerAdapter {

    @Override
    public void addCorsMappings(CorsRegistry registry) {
        registry.addMapping(""/**"");
    }
}
</code></pre>

<p>I have a <code>/health</code> endpoint, which returns some health data and it works fine.</p>

<p>Here is junit test</p>

<pre><code>@Test
    public void corsTest() {
        HttpHeaders headers = new HttpHeaders();
        headers.add(HttpHeaders.ORIGIN, ""http://localhost:9000"");
        HttpEntity&lt;?&gt; requestEntity = new HttpEntity(headers);
        ResponseEntity&lt;Status&gt; entity = this.restTemplate.exchange(""/health"", HttpMethod.GET, requestEntity, Status.class);
        assertEquals(HttpStatus.OK, entity.getStatusCode());
        assertEquals(""http://localhost:9000"", entity.getHeaders().getAccessControlAllowOrigin()); //6
        Status health = entity.getBody();
        assertThat(health.getAppName()).isEqualTo(appName);
    }
</code></pre>

<p>Test fails at line 6. if comment-out that line, the test passes.
Through debugger, I found that <code>entity.getHeaders().getAccessControlAllowOrigin()</code> is null. I used this <a href=""https://github.com/spring-guides/gs-rest-service-cors/blob/master/complete/src/test/java/hello/GreetingIntegrationTests.java"" rel=""noreferrer"">sample app</a> as reference and it works fine. but for my application it fails.</p>

<p>when I use javascript to call the /health api, I can see the cors works. If I comment out, webConfig class, I get error in javascript. Debugging more at javascript shows that cors response header is not set but the request served successfully when webconfig is enabled.</p>

<p>so definitely cors works. It is the test that is failing. so I am guessing test is not seeing it for reasons I don't know.</p>
",1988876,,1988876,,2016-09-22 18:43:33,2016-09-22 20:59:32,cors not working for my spring boot application,<spring><spring-mvc><spring-boot><cors><spring-mvc-test>,3,2,2,,
Spring,40355743,1,,,,,,11/1/2016 7:26:46,,5,2709,"<p>I would like to be able to upload images to a server, handling errors and exceptions gracefully, with error messages displayed to the user in the form, and ideally only using an existing barebones Spring Boot and Thymeleaf install. </p>

<p>Using the example project <a href=""https://github.com/spring-guides/gs-uploading-files"" rel=""nofollow noreferrer"">gs-uploading-files</a> I can upload files to a server using Spring Boot and Thymeleaf. In application.properties I set <code>spring.http.multipart.max-file-size=1MB</code> and 
<code>spring.http.multipart.max-request-size=1MB</code>. 
 However several security and validation issues are unresolved when I upload files larger than 1MB.</p>

<ol>
<li><p>Any file can be uploaded. For example, an html file could be uploaded and thus hosted on the server. How can files be restricted by type? Can they be validated in the page before the request is sent? If I have multiple ways of uploading images how can I validate all MultipartFiles?</p></li>
<li><p>Users can attempt to uploade large files, beyond the default limits of Spring and the embedded Tomcat. This causes a <code>org.springframework.web.multipart.MultipartException</code> is not handled by Spring. How can the file size be validated before the upload attempt? In case this is bypassesed can any file upload exceptions caught by Spring, so that a nice error message is displayed?</p></li>
<li><p>The default Spring error page is not used as a fallback for all exceptions. The MultipartException returns a Tomcat exception page with a full stacktrace (see Log 1).</p></li>
</ol>

<hr>

<p>I've searched to try and find and implement a set of solutions.</p>

<p>A step towards fixing number 1 is by amending to <code>handleFileUpload</code> check the content type, rejecting files which fail this:  <code>!file.getContentType().toLowerCase().startsWith(""image"")</code>. Will this always be valid? Can a malicious user bypass this? And how can I check every MultipartFile, to save having to remember to add this every time?</p>

<pre><code>@PostMapping(""/"")
public String handleFileUpload(@RequestParam(""file"") MultipartFile file, RedirectAttributes redirectAttributes)
        throws MultipartException, IllegalStateException {

    if (file != null &amp;&amp; file.getContentType() != null &amp;&amp; !file.getContentType().toLowerCase().startsWith(""image""))
        throw new MultipartException(""not img"");

    storageService.store(file);
    redirectAttributes.addFlashAttribute(""message"",
            ""You successfully uploaded "" + file.getOriginalFilename() + ""!"");

    return ""redirect:/"";
}
</code></pre>

<p>Adding an <code>@ExceptionHandler</code> doesn't work, it simply never gets called.</p>

<pre><code>@ExceptionHandler({ SizeLimitExceededException.class, MultipartException.class,
        java.lang.IllegalStateException.class })
public ModelAndView handleError(HttpServletRequest req, Exception e) {
    // error(""Request: "" + req.getRequestURL() + "" raised "" + ex);

    ModelAndView mav = new ModelAndView();
    mav.addObject(""exception"", e);
    mav.addObject(""url"", req.getRequestURL());
    mav.addObject(""timestamp"", new Date());
    mav.addObject(""error"", e.getClass());
    mav.addObject(""message"", e.getMessage());
    mav.addObject(""status"", HttpStatus.INTERNAL_SERVER_ERROR);
    mav.setViewName(""error"");
    return mav;
}
</code></pre>

<p>Number 3 can be resolved by a global exception handler on all Exceptions. (explained in detail in <a href=""https://spring.io/blog/2013/11/01/exception-handling-in-spring-mvc"" rel=""nofollow noreferrer"">this post</a>). However, I'm concerned that it may overrule a Controller level handler.</p>

<pre><code>package hello;

import java.util.Date;

import javax.servlet.http.HttpServletRequest;

import org.springframework.core.annotation.AnnotationUtils;
import org.springframework.http.HttpStatus;
import org.springframework.web.bind.annotation.ControllerAdvice;
import org.springframework.web.bind.annotation.ExceptionHandler;
import org.springframework.web.bind.annotation.ResponseStatus;
import org.springframework.web.servlet.ModelAndView;

@ControllerAdvice
class GlobalDefaultExceptionHandler {
    public static final String DEFAULT_ERROR_VIEW = ""error"";

    @ExceptionHandler(value = Exception.class)
    public ModelAndView defaultErrorHandler(HttpServletRequest req, Exception e) throws Exception {
        // If the exception is annotated with @ResponseStatus rethrow it and let
        // the framework handle it - like the OrderNotFoundException example
        // at the start of this post.
        // AnnotationUtils is a Spring Framework utility class.
        if (AnnotationUtils.findAnnotation(e.getClass(), ResponseStatus.class) != null)
            throw e;

        // Otherwise setup and send the user to a default error-view.
        ModelAndView mav = new ModelAndView();
        mav.addObject(""exception"", e);
        mav.addObject(""url"", req.getRequestURL());
        mav.addObject(""timestamp"", new Date());
        mav.addObject(""error"", e.getClass());
        mav.addObject(""message"", e.getMessage());
        mav.addObject(""status"", HttpStatus.INTERNAL_SERVER_ERROR);
        mav.setViewName(DEFAULT_ERROR_VIEW);
        return mav;
    }
}
</code></pre>

<p>I've attempted <a href=""https://stackoverflow.com/questions/29363705/handling-multipartexception-with-spring-boot-and-display-error-page"">this answer</a>, which handles the exception but returns an error page. I'd like to return to the original page and display a nice error message. </p>

<hr>

<p>Log 1:</p>

<pre><code>HTTP Status 500 - Request processing failed; nested exception is org.springframework.web.multipart.MultipartException: Could not parse multipart servlet request; nested exception is java.lang.IllegalStateException: org.apache.tomcat.util.http.fileupload.FileUploadBase$SizeLimitExceededException: the request was rejected because its size (1292555) exceeds the configured maximum (1048576)

type Exception report

message Request processing failed; nested exception is org.springframework.web.multipart.MultipartException: Could not parse multipart servlet request; nested exception is java.lang.IllegalStateException: org.apache.tomcat.util.http.fileupload.FileUploadBase$SizeLimitExceededException: the request was rejected because its size (1292555) exceeds the configured maximum (1048576)

description The server encountered an internal error that prevented it from fulfilling this request.

exception

org.springframework.web.util.NestedServletException: Request processing failed; nested exception is org.springframework.web.multipart.MultipartException: Could not parse multipart servlet request; nested exception is java.lang.IllegalStateException: org.apache.tomcat.util.http.fileupload.FileUploadBase$SizeLimitExceededException: the request was rejected because its size (1292555) exceeds the configured maximum (1048576)
    org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:982)
    org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:872)
    javax.servlet.http.HttpServlet.service(HttpServlet.java:648)
    org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:846)
    javax.servlet.http.HttpServlet.service(HttpServlet.java:729)
    org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:52)
    org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:99)
    org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)
    org.springframework.web.filter.HttpPutFormContentFilter.doFilterInternal(HttpPutFormContentFilter.java:89)
    org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)
    org.springframework.web.filter.HiddenHttpMethodFilter.doFilterInternal(HiddenHttpMethodFilter.java:77)
    org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)
    org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:197)
    org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)
root cause

org.springframework.web.multipart.MultipartException: Could not parse multipart servlet request; nested exception is java.lang.IllegalStateException: org.apache.tomcat.util.http.fileupload.FileUploadBase$SizeLimitExceededException: the request was rejected because its size (1292555) exceeds the configured maximum (1048576)
    org.springframework.web.multipart.support.StandardMultipartHttpServletRequest.parseRequest(StandardMultipartHttpServletRequest.java:111)
    org.springframework.web.multipart.support.StandardMultipartHttpServletRequest.&lt;init&gt;(StandardMultipartHttpServletRequest.java:85)
    org.springframework.web.multipart.support.StandardServletMultipartResolver.resolveMultipart(StandardServletMultipartResolver.java:76)
    org.springframework.web.servlet.DispatcherServlet.checkMultipart(DispatcherServlet.java:1099)
    org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:932)
    org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:897)
    org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:970)
    org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:872)
    javax.servlet.http.HttpServlet.service(HttpServlet.java:648)
    org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:846)
    javax.servlet.http.HttpServlet.service(HttpServlet.java:729)
    org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:52)
    org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:99)
    org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)
    org.springframework.web.filter.HttpPutFormContentFilter.doFilterInternal(HttpPutFormContentFilter.java:89)
    org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)
    org.springframework.web.filter.HiddenHttpMethodFilter.doFilterInternal(HiddenHttpMethodFilter.java:77)
    org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)
    org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:197)
    org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)
root cause

java.lang.IllegalStateException: org.apache.tomcat.util.http.fileupload.FileUploadBase$SizeLimitExceededException: the request was rejected because its size (1292555) exceeds the configured maximum (1048576)
    org.apache.catalina.connector.Request.parseParts(Request.java:2871)
    org.apache.catalina.connector.Request.parseParameters(Request.java:3176)
    org.apache.catalina.connector.Request.getParameter(Request.java:1110)
    org.apache.catalina.connector.RequestFacade.getParameter(RequestFacade.java:381)
    org.springframework.web.filter.HiddenHttpMethodFilter.doFilterInternal(HiddenHttpMethodFilter.java:70)
    org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)
    org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:197)
    org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)
root cause

org.apache.tomcat.util.http.fileupload.FileUploadBase$SizeLimitExceededException: the request was rejected because its size (1292555) exceeds the configured maximum (1048576)
    org.apache.tomcat.util.http.fileupload.FileUploadBase$FileItemIteratorImpl.&lt;init&gt;(FileUploadBase.java:811)
    org.apache.tomcat.util.http.fileupload.FileUploadBase.getItemIterator(FileUploadBase.java:256)
    org.apache.tomcat.util.http.fileupload.FileUploadBase.parseRequest(FileUploadBase.java:280)
    org.apache.catalina.connector.Request.parseParts(Request.java:2801)
    org.apache.catalina.connector.Request.parseParameters(Request.java:3176)
    org.apache.catalina.connector.Request.getParameter(Request.java:1110)
    org.apache.catalina.connector.RequestFacade.getParameter(RequestFacade.java:381)
    org.springframework.web.filter.HiddenHttpMethodFilter.doFilterInternal(HiddenHttpMethodFilter.java:70)
    org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)
    org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:197)
    org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)
note The full stack trace of the root cause is available in the Apache Tomcat/8.5.5 logs.

Apache Tomcat/8.5.5
</code></pre>

<hr>
",4161471,,-1,,2017-05-23 12:10:04,2018-02-19 12:31:17,"File upload in Spring Boot: Uploading, validation, and exception handling",<java><tomcat><file-upload><spring-boot><thymeleaf>,2,0,1,,
Spring,40623809,1,,,,,,11/16/2016 3:56:18,,1,347,"<p>We manage to setup a web application with Spring Cloud OAuth2, which implements single sign-on from different identity providers like Facebook and Google, by following <a href=""https://github.com/spring-guides/tut-spring-boot-oauth2/tree/master/github"" rel=""nofollow noreferrer"">this</a> sample source code.</p>

<p>Planning to have our own authentication/authorization server, we provided our own <code>UserDetails</code>, and <code>GrantedAuthority</code>, where we associated user's Facebook and Google. We also have our own set of user authorities other than <code>ROLE_USER</code>.</p>

<p>We have our business methods secured based on user's role (we used <code>@RolesAllowed</code>). When a user sign-in using their Facebook and Google accounts, only <code>ROLE_USER</code> is added as their authorithy. I would like to know how to add our own user authorities from the associated user's <code>GrantedAuthority</code> upon signing into external identity providers, though I found that this can be possibly done using <code>AuthoritiesExtractor</code>, but can't find concrete example on this.</p>
",4084107,,4084107,,2016-11-16 5:10:21,2016-11-16 5:32:08,Spring Cloud OAuth2: Adding user authorities,<spring-security><oauth-2.0><spring-cloud><spring-security-oauth2><spring-oauth2>,1,0,,,
Spring,41738864,1,,,,,,1/19/2017 10:02:00,,2,1105,"<p>I have read and implemented my own Auth server following <a href=""https://github.com/spring-guides/tut-spring-boot-oauth2/tree/master/auth-server"" rel=""nofollow noreferrer"">this tutorial</a> from Spring. There are multiple SSO providers - Facebook, Github and a custom auth server. In this tutorial, the auth server contains the handling of other SSO providers.</p>

<p>I have a separate resource server that links to my auth server using the following properties:</p>

<pre><code>security.oauth2.resource.userInfoUri=http://localhost:9000/user
</code></pre>

<p>I am able to get the token from my auth server using a cUrl command:</p>

<pre><code>curl acme:acmesecret@localhost:9000/oauth/token -d grant_type=password -d username=user -d password=...
{""access_token"":""aa49e025-c4fe-4892-86af-15af2e6b72a2"",""token_type"":""bearer"",""refresh_token"":""97a9f978-7aad-4af7-9329-78ff2ce9962d"",""expires_in"":43199,""scope"":""read write""}
</code></pre>

<p>But what I fail to understand is how can I use the other SSO providers to get such token as well from the auth server? The resource server should not care how did I get the token and whether I am authenticated using Facebook or my custom auth server. It should simply ask the auth server what is the Principal (logged user) and then decide which resources to show him, right?</p>

<p>I don't have any UI and this will be backed for a mobile application so I need to udnerstand how to handle the authentication using REST reqeusts.</p>
",1262024,,,,,2017-01-27 6:36:10,Multiple SSO providers in Spring Boot Auth server,<java><spring-boot><oauth-2.0><spring-security-oauth2>,1,0,1,,
Spring,41850162,1,,,,,,1/25/2017 11:15:06,,4,903,"<p>Referring to the logout flow in <a href=""https://github.com/spring-guides/tut-spring-security-and-angular-js/tree/single-sign-out/oauth2"" rel=""nofollow noreferrer"">oauth2</a> spring-guides project, once the the user has authenticated using user/password for the first time, the credentials are not asked next time after logout.</p>

<p>How can I ensure that username/password are asked every time after a logout.</p>

<p>This is what I am trying to implement:-</p>

<ul>
<li><p>OAuth2 server issuing JWT token using ""authorization_code"" grant type
with auto approval. This has html/angularjs form to collect
username/password.</p></li>
<li><p>UI/Webfront - Uses @EnableSSO. ALL its endpoints are authenticated
i.e it does not have any unauthorized landing page/ui/link that user
clicks to go to /uaa server. So hitting <a href=""http://localhost:8080"" rel=""nofollow noreferrer"">http://localhost:8080</a>
instantly redirects you to <a href=""http://localhost:9999/uaa"" rel=""nofollow noreferrer"">http://localhost:9999/uaa</a> and presents
custom form to collect username/password.</p></li>
<li>Resource server - Uses @EnableResourceServer. Plain &amp; simple REST api.</li>
</ul>

<p>With the above approach I am not able to workout the logout flow. HTTP POST /logout to the UI application clears the session/auth in UI application but the users gets logged in again automatically ( as I have opted for auto approval for all scopes) without being asked for username password again.</p>

<p>Looking at logs and networks calls, it looks like that all the ""oauth dance"" happens all over again successfully without user being asked for username/password again and seems like the auth server remembers last auth token issued for a client ( using org.springframework.security.oauth2.provider.code.InMemoryAuthorizationCodeServices? ).</p>

<p>How can I tell auth server to ask for username/password every time it is requested for code/token - stateless.</p>

<p>Or what is the best way to implement logout in my given scenario.</p>

<p>( To recreate somewhat near to my requirements, remove <code>permitAll()</code> part from the UiApplication and configure <code>autoApproval</code> in auth server of the mentioned boot project.)</p>

<p><a href=""https://github.com/spring-guides/tut-spring-security-and-angular-js/issues/138"" rel=""nofollow noreferrer"">github issue</a></p>
",945034,,1531064,,2017-07-18 8:02:25,2017-07-24 20:53:37,Spring Security OAuth2 AngularJS | Logout Flow,<spring-security><spring-security-oauth2>,3,2,1,,
Spring,42867921,1,,,,,,3/17/2017 22:17:01,,4,931,"<p>I created a simple authorization server, but cannot configure it. </p>

<ol>
<li>Start both apps (8080 is for auth server and 9999 is for client).</li>
<li>Go to <code>localhost:9999/client</code> and get redirected to <code>localhost:8080/login</code> (as expected).</li>
<li>Fill the login form with <em>user/user</em>.</li>
<li>Get redirected to <code>localhost:9999/client</code> (as expected), but have <code>Hello, null</code> instead of <code>Hello, user</code>.</li>
</ol>

<p>However, if I go straight to <code>localhost:8080/me</code>, I have <code>{""name"":""user""}</code>. How can I retrieve <code>Hello, user</code>?</p>

<p><strong>Authorization server</strong></p>

<pre><code>@RestController
@EnableAuthorizationServer
@SpringBootApplication
public class Application extends WebSecurityConfigurerAdapter {

    public static void main(String[] args) {
        SpringApplication.run(Application.class, args);
    }

    @GetMapping({ ""/user"", ""/me"" })
    public Map&lt;String, String&gt; user(Principal principal) {
        return Collections.singletonMap(""name"", principal == null ? ""null"" : principal.getName());
    }

    @Override
    protected void configure(AuthenticationManagerBuilder auth) throws Exception {
        auth.inMemoryAuthentication()
                .withUser(""user"").password(""user"").authorities(AuthorityUtils.NO_AUTHORITIES);
    }

    @Override
    protected void configure(HttpSecurity http) throws Exception {
        http.formLogin();
    }
}
</code></pre>

<p><strong>Application's properties</strong></p>

<pre><code>security:
  oauth2:
    client:
      client-id: clientid
      client-secret: clientsecret
      scope: read,write
      auto-approve-scopes: '.*'
</code></pre>

<p><strong>Client</strong></p>

<pre><code>@Configuration
@EnableAutoConfiguration
@EnableOAuth2Sso
@RestController
public class Client {

    @GetMapping(""/"")
    public String home(Principal principal) {
        return ""Hello, "" + principal.getName();
    }

    public static void main(String[] args) {
        new SpringApplicationBuilder(Client.class)
                .properties(""spring.config.name=client"").run(args);
    }

}
</code></pre>

<p><strong>Client's properties</strong></p>

<pre><code>server:
  port: 9999
  context-path: /client
security:
  oauth2:
    client:
      client-id: clientid
      client-secret: clientsecret
      access-token-uri: http://localhost:8080/oauth/token
      user-authorization-uri: http://localhost:8080/oauth/authorize
    resource:
      user-info-uri: http://localhost:8080/me
</code></pre>

<p><strong>UPDATE:</strong><br>
I downloaded <a href=""https://github.com/spring-guides/tut-spring-boot-oauth2/tree/master/auth-server"" rel=""nofollow noreferrer"">a tutorial</a> when all works, but it has <a href=""https://github.com/spring-guides/tut-spring-boot-oauth2/blob/master/auth-server/src/main/java/com/example/SocialApplication.java#L81"" rel=""nofollow noreferrer"">ssoFilter</a> that is only for OAuth2 authentication. I just want to configure it with <code>loginForm</code>.<br>
I have also shared a temporary <a href=""https://github.com/delverdev/login-server-example"" rel=""nofollow noreferrer"">example</a> on GitHub. I think it will be easier to look up the problem with it.</p>
",4725496,,4725496,,2017-03-27 3:09:46,2017-03-27 14:02:39,Spring cannot configure authorization server,<java><spring><spring-boot><spring-security><spring-security-oauth2>,4,3,3,,
Spring,43082213,1,,,,,,3/29/2017 0:27:46,,4,2543,"<p>Requesting help on a Spring Boot OAuth2 app's BadCredentialsException when , after user authentication and approval, my Oauth2 client app requests a token from the token endpoint of the OAuth2 AuthServer.</p>

<p>The Spring Boot OAuth2 applications are based off the now famous Dave Syer Spring Boot/ Oauth2 UI Client/Oauth2 AuthServer/JWT example <a href=""https://github.com/spring-guides/tut-spring-security-and-angular-js/tree/master/oauth2"" rel=""nofollow noreferrer"">https://github.com/spring-guides/tut-spring-security-and-angular-js/tree/master/oauth2</a></p>

<p>This is in the Client Apps' debug:</p>

<pre><code>DEBUG org.springframework.web.client.RestTemplate - Created POST request for ""authserver/uaa/oauth/token""
DEBUG org.springframework.security.oauth2.client.token.grant.code.AuthorizationCodeAccessTokenProvider - Encoding and sending form: {grant_type=[authorization_code], code=[xxxxx], redirect_uri=[oauthclientapp/login]}
DEBUG org.springframework.web.client.RestTemplate - POST request for ""authserver/uaa/oauth/token"" resulted in 200 (null)
DEBUG org.springframework.security.oauth2.client.filter.OAuth2ClientAuthenticationProcessingFilter - Authentication request failed: org.springframework.security.authentication.BadCredentialsException: Could not obtain access token
</code></pre>

<p>This is the AuthServer's debug:</p>

<pre><code>DEBUG org.springframework.security.web.FilterChainProxy - /oauth/token at position 9 of 15 in additional filter chain; firing Filter: 'BasicAuthenticationFilter'
DEBUG org.springframework.security.web.authentication.www.BasicAuthenticationFilter - Basic Authentication Authorization header found for user 'clientID'
DEBUG org.springframework.security.authentication.ProviderManager - Authentication attempt using org.springframework.security.authentication.dao.DaoAuthenticationProvider
DEBUG org.springframework.security.authentication.dao.DaoAuthenticationProvider - User 'clientID' not found
DEBUG org.springframework.security.web.authentication.www.BasicAuthenticationFilter - Authentication request for failed: org.springframework.security.authentication.BadCredentialsException: Bad credentials
</code></pre>

<p>The Oauth2 client app is just like the one in the example, no customization in the token request process, just whatever @EnableOAuth2Sso gives us. The ClientDetails config on the AuthServer is also just like the example, sample below, so nothing special.</p>

<p>Any suggestions to better troubleshoot this are much appreciated. Thanks.</p>

<pre><code>@Override
        public void configure(ClientDetailsServiceConfigurer clients) throws Exception {
            clients.inMemory()
                    .withClient(""clientID"")
                    .secret(""acmesecret"")
                    .authorizedGrantTypes(""authorization_code"", ""refresh_token"",
                            ""password"").scopes(""openid"");
        }
</code></pre>
",7746592,,,,,2017-10-01 21:29:36,Spring Boot Oauth2 token request - Bad client credentials from BasicAuthenticationFilter,<spring-boot><oauth-2.0><token><credentials>,1,0,,,
Spring,43431802,1,,,,,,4/15/2017 22:15:39,,1,125,"<p>I work with Spring but never tried Spring Boot. I wanted to try the accessing-data-jpa tutorial - <a href=""https://spring.io/guides/gs/accessing-data-jpa/"" rel=""nofollow noreferrer"">https://spring.io/guides/gs/accessing-data-jpa/</a>. I have cloned the repository from git and run it with Maven as described in the tutorial:
git clone <a href=""https://github.com/spring-guides/gs-accessing-data-jpa.git"" rel=""nofollow noreferrer"">https://github.com/spring-guides/gs-accessing-data-jpa.git</a>
mvnw spring-boot:run</p>

<p>Running this, I got an error - Caused by: java.lang.ClassNotFoundException: org.springframework.data.repository.CrudRepository</p>

<p>To solve this, I have added a dependency:</p>

<pre><code>&lt;dependency&gt;
            &lt;groupId&gt;org.springframework.data&lt;/groupId&gt;
            &lt;artifactId&gt;spring-data-commons-core&lt;/artifactId&gt;
            &lt;version&gt;1.4.1.RELEASE&lt;/version&gt;
        &lt;/dependency&gt;
</code></pre>

<p>This helped, however, i got another error:</p>

<pre><code>***************************
APPLICATION FAILED TO START
***************************

Description:

Parameter 0 of method demo in hello.Application required a bean of type 'hello.CustomerRepository' that could not be found.


Action:

Consider defining a bean of type 'hello.CustomerRepository' in your configuration.

[WARNING]

java.lang.reflect.InvocationTargetException
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
        at java.lang.reflect.Method.invoke(Method.java:498)
        at org.springframework.boot.maven.AbstractRunMojo$LaunchRunner.run(AbstractRunMojo.java:527)
        at java.lang.Thread.run(Thread.java:745)
Caused by: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'demo' defined in hello.Application: Unsatisfied dependency expressed through method 'demo' parameter 0; nested exception is org.springframework.beans.factory.NoSuchBeanDefinitionException: No qualifying bean of type 'hello.CustomerRepository' available: expected at least 1 bean which qualifies as autowire candidate. Dependency annotations: {}
        at org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:749)
        at org.springframework.beans.factory.support.ConstructorResolver.instantiateUsingFactoryMethod(ConstructorResolver.java:467)
        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.instantiateUsingFactoryMethod(AbstractAutowireCapableBeanFactory.java:1173)
        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1067)
        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:513)
        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:483)
        at org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:306)
        at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:230)
        at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:302)
        at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:197)
        at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:761)
        at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:866)
        at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:542)
        at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:737)
        at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:370)
        at org.springframework.boot.SpringApplication.run(SpringApplication.java:314)
        at org.springframework.boot.SpringApplication.run(SpringApplication.java:1162)
        at org.springframework.boot.SpringApplication.run(SpringApplication.java:1151)
        at hello.Application.main(Application.java:17)
        ... 6 more
Caused by: org.springframework.beans.factory.NoSuchBeanDefinitionException: No qualifying bean of type 'hello.CustomerRepository' available: expected at least 1 bean which qualifies as autowire candidate. Dependency annotations: {}
        at org.springframework.beans.factory.support.DefaultListableBeanFactory.raiseNoMatchingBeanFound(DefaultListableBeanFactory.java:1486)
        at org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:1104)
        at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:1066)
        at org.springframework.beans.factory.support.ConstructorResolver.resolveAutowiredArgument(ConstructorResolver.java:835)
        at org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:741)
        ... 24 more
</code></pre>

<p>I am surprised that an official tutorial from Spring does not work. Have you tried this tutorial? Do you have any suggestion why it does not work? Is it broken or is something wrong on my machine? As I know little about Spring Boot I'm not really sure what the problem may be.</p>
",7872780,,380338,,2017-04-16 6:08:36,2017-04-16 16:12:30,Spring tutorial accessing-data-jpa does not work,<spring><spring-boot><spring-data><spring-data-jpa>,1,4,,,
Spring,47202657,1,,,,,,11/9/2017 13:07:18,,1,1816,"<p>I am following the link <a href=""https://spring.io/blog/2015/02/03/sso-with-oauth2-angular-js-and-spring-security-part-v"" rel=""nofollow noreferrer"">https://spring.io/blog/2015/02/03/sso-with-oauth2-angular-js-and-spring-security-part-v</a> &amp; the github project <a href=""https://github.com/spring-guides/tut-spring-security-and-angular-js/tree/master/oauth2"" rel=""nofollow noreferrer"">https://github.com/spring-guides/tut-spring-security-and-angular-js/tree/master/oauth2</a>. I am able to login in to the OAuth provider and get the authorization code back in the client. </p>

<p>Now I make the following call from the client to get the token from the provider (provider is on port 9999)</p>

<pre><code>        HttpHeaders headers = new HttpHeaders();
        headers.add(""Accept"",MediaType.APPLICATION_JSON_VALUE);
        List&lt;String&gt; cookies = httpEntity.getHeaders().get(""Cookie"");
        headers.put(""Cookie"", cookies);
        String redirectURL= ""http://localhost:9999/oauthprovider/oauth/token"" +  ""?"" + ""response_type=token"" + ""&amp;"" + ""grant_type=authorization_code"" + ""&amp;"" + ""client_id=acme""+ ""&amp;"" + ""client_secret=acmesecret""+  ""&amp;"" + ""redirect_uri=http://localhost:8081/callback""+""&amp;"" + ""code="" + authCode + ""&amp;"" + ""state="" + stateValue;

        HttpEntity&lt;String&gt; redirectResponse = template.exchange(
                redirectURL,
                    HttpMethod.POST,
                    responseentity,
                    String.class);


        result=redirectResponse.toString()
</code></pre>

<p>The result variable value has the following.(I have disabled csrf and sending client_secret as a query parameter (for the time being), although they are not recommended)</p>

<pre><code>    &lt;302 Found,{X-Content-Type-Options=[nosniff], X-XSS-Protection=[1; mode=block], Cache-Control=[no-cache, no-store, max-age=0, must-revalidate], Pragma=[no-cache], Expires=[0], X-Frame-Options=[DENY], Location=[http://localhost:9999/oauthprovider/oauthlogin], Content-Length=[0], Date=[Thu, 09 Nov 2017 12:07:37 GMT]}&gt;
</code></pre>

<p>In the console I have these</p>

<pre><code>   Previously Authenticated: org.springframework.security.authentication.AnonymousAuthenticationToken@9055c2bc: Principal: anonymousUser; Credentials: [PROTECTED]; Authenticated: true; Details: org.springframework.security.web.authentication.WebAuthenticationDetails@b364: RemoteIpAddress: 0:0:0:0:0:0:0:1; SessionId: 2B669DF59BCE8047849BFBCA148BEE67; Granted Authorities: ROLE_ANONYMOUS
</code></pre>

<p>Does I am redirecting back to login(I am getting it in the logs as mentioned before), since the role is ROLE_ANONYMOUS? How can I fix the issue? </p>

<p>Adding more details on the code (Did only minor changes from the sample code provided in the link). Providers's context path is /oauthprovider and with curl call I am getting the token. </p>

<pre><code>@Configuration
@EnableAuthorizationServer
protected static class OAuth2AuthorizationConfig extends
        AuthorizationServerConfigurerAdapter {

    @Autowired
    private AuthenticationManager authenticationManager;

    //................................
    //................................
    @Override
    public void configure(ClientDetailsServiceConfigurer clients) throws Exception {
        clients.inMemory()
                .withClient(""acme"")
                .secret(""acmesecret"")
                .authorizedGrantTypes(""authorization_code"", ""refresh_token"",
                        ""password"").scopes(""openid"").autoApprove(true).redirectUris(""http://localhost:8081/callback""); 
    }

    @Override
    public void configure(AuthorizationServerEndpointsConfigurer endpoints)
            throws Exception {
        endpoints.authenticationManager(authenticationManager).accessTokenConverter(
                jwtAccessTokenConverter());
    }

    @Override
    public void configure(AuthorizationServerSecurityConfigurer oauthServer)
            throws Exception {
        oauthServer.tokenKeyAccess(""permitAll()"").checkTokenAccess(
                ""isAuthenticated()"");
    }

}
@Configuration
@Order(-20)
protected static class LoginConfig extends WebSecurityConfigurerAdapter {

    @Autowired
    private AuthenticationManager authenticationManager;

    @Override
    protected void configure(HttpSecurity http) throws Exception {
        // @formatter:off
        http
            .formLogin().loginPage(""/oauthlogin"").loginProcessingUrl(""/login"").failureUrl(""/login?error=true"").permitAll() 
        .and()
            .requestMatchers().antMatchers(""/login"", ""/oauthlogin"", ""/oauth/authorize"", ""/oauth/token"" ,""/oauth/confirm_access"")
        .and()
            .authorizeRequests().anyRequest().authenticated();
        // @formatter:on

        http.csrf().disable();
    }

    @Override
    protected void configure(AuthenticationManagerBuilder auth) throws Exception {
        auth.parentAuthenticationManager(authenticationManager);
    }
}
</code></pre>
",7349475,,7349475,,2017-11-09 14:17:44,2019-01-29 14:08:19,Spring Security OAuth2- POST request to oauth/token redirects to login and role displays ROLE_ANONYMOUS,<spring><spring-security><oauth><oauth-2.0><spring-security-oauth2>,3,3,,,
Spring,47239476,1,,,,,,11/11/2017 15:20:55,,2,1637,"<p>I have followed <a href=""https://spring.io/guides/gs/messaging-stomp-websocket/"" rel=""nofollow noreferrer"">this tutorial</a> to build a Spring Boot application that serves <code>websockets</code> connections but I can't connect to these websockets from other clients than the one served by Spring Boot itself.</p>

<p>The <a href=""https://github.com/spring-guides/gs-messaging-stomp-websocket/tree/master/complete"" rel=""nofollow noreferrer""><code>complete</code> directory in the GitHub repository that accompanies the tutorial</a> contains the final Spring Boot code. I took the <code>index.html</code> and the <code>app.js</code> files from this repository and created another client that runs on a Node.js server. After that, I replaced the connection strings to point to <code>localhost:8080</code> (where Spring Boot is running). Then I ran the Node.js server and tried to use the websockets, but it does not work.</p>

<p>The first problem was easily solved by adding <code>.setAllowedOrigins(""*"")</code> to the <code>StompEndpointRegistry</code> registry. With this configuration, I managed to connect to the websocket, but now I never get a message back from the socket.</p>

<p>I wonder what am I missing... Does any one know what is the problem?</p>

<p>The extracted <code>index.html</code> and <code>app.js</code> (renamed to <code>index.js</code>) files, and <a href=""https://github.com/brunokrebs/websocket-client"" rel=""nofollow noreferrer"">the Node.js server can be found here</a> for testing purposes. To run it, simply install the dependencies (<code>npm install</code>) and then issue <code>npm start</code>. The server will respond on <a href=""http://localhost:3000/"" rel=""nofollow noreferrer"">http://localhost:3000/</a>.</p>
",1232793,,,,,2018-04-07 10:52:05,CORS and Spring Websocket,<spring><spring-boot><websocket><cors><stomp>,1,0,,,
Spring,49939639,1,,,,,,4/20/2018 10:32:37,,1,302,"<p>I am trying to repeat actions described in the <a href=""https://spring.io/guides/tutorials/spring-boot-oauth2/"" rel=""nofollow noreferrer"">official tutorial(Spring Boot and OAuth2)</a></p>

<p>I stuck on the section <a href=""https://spring.io/guides/tutorials/spring-boot-oauth2/#_social_login_authserver"" rel=""nofollow noreferrer"">Hosting an Authorization Server</a></p>

<p>I tried to download all <a href=""https://github.com/spring-guides/tut-spring-boot-oauth2.git"" rel=""nofollow noreferrer"">sources from github</a> but result the same</p>

<p>I am trying to start sub project <code>social-auth-server</code>:</p>

<p>I found 2 starters there:</p>

<p><code>src\main\java\com\example\SocialApplication.java</code> - oauth2 server
<code>src\test\java\com\example\ClientApplication.java</code> - oauth2 client</p>

<p>quote from the tutorial:</p>

<blockquote>
  <p>Note that the server.context-path is set explicitly, so if you run the
  app to test it remember the home page is <a href=""http://localhost:9999/client"" rel=""nofollow noreferrer"">http://localhost:9999/client</a>.
  Clicking on that link should take you to the auth server and once you
  you have authenticated with the social provider of your choice you
  will be redirected back to the client app</p>
</blockquote>

<p>1.I've started both applications<br>
2. In browser I type <code>localhost:9999/client</code><br>
3. As a result of previous step - browser redirects me to the <code>localhost:8080</code><br>
4. I click <code>Login via Facebook</code><br>
5. As a result of previous step - browser redirects me to the Facebook to input credentials.<br>
6. I typed correct credentials<br>
7. As a result of previous step - browser redirects me to the <code>localhost:8080</code>. Even without my name on this page.</p>

<p>I expected that the browser would redirect me to the <code>localhost:9999</code> and show me message <code>Hello Nikolay!</code></p>

<p>Can you please help me with this tutorial?</p>
",2674303,,2674303,,2018-04-20 12:00:46,2018-04-20 12:00:46,Spring oauth2 sso example doesn't work,<java><spring><spring-boot><oauth-2.0><spring-security-oauth2>,1,0,,,
Spring,50141309,1,,,,,,5/2/2018 18:31:29,,1,272,"<p>I want to build the app with Spring and react, so I started learning from this tutorial: <a href=""https://github.com/spring-guides/tut-react-and-spring-data-rest/tree/master/basic"" rel=""nofollow noreferrer"">https://github.com/spring-guides/tut-react-and-spring-data-rest/tree/master/basic</a> </p>

<p>My project contains the same files - I did all step by step( just shared my project for help <a href=""https://github.com/Lewan110/rest-react"" rel=""nofollow noreferrer"">https://github.com/Lewan110/rest-react</a>). 
Spring Data rest works well, because I getting right data, but when I go to <a href=""http://localhost:8080"" rel=""nofollow noreferrer"">http://localhost:8080</a> I got no data and an error with bundle.js </p>

<p>It's weird for me because bundle.js is generated in: \src\main\resources\static\built\bundle.js
also <em>webpack.config.js</em> looks good:</p>

<pre><code>var path = require('path');

module.exports = {
    entry: './src/main/js/app.js',
    devtool: 'sourcemaps',
    cache: true,
    debug: true,
    output: {
        path: __dirname,
        filename: './src/main/resources/static/built/bundle.js'
    },
    module: {
        loaders: [
            {
                test: path.join(__dirname, '.'),
                exclude: /(node_modules)/,
                loader: 'babel',
                query: {
                    cacheDirectory: true,
                    presets: ['es2015', 'react']
                }
            }
        ]
    }
};
</code></pre>

<p><a href=""https://i.stack.imgur.com/sOuCO.png"" rel=""nofollow noreferrer""><img src=""https://i.stack.imgur.com/sOuCO.png"" alt=""""></a></p>

<p>I'm completely new in React(and JS) and I don't know where cause can be.</p>
",7920494,,4460737,,2018-05-02 18:49:33,2018-05-30 16:33:53,Error 404 bundle.js not found - Spring Data Rest and React.js,<javascript><spring><reactjs><spring-boot>,1,0,1,,
Spring,51348352,1,,,,,,7/15/2018 12:24:40,,1,1662,"<p>To run Actuator on a separate port we write <code>management.server.port: 9001</code> in the application.properties file. 
But there is a confusing line in <a href=""https://spring.io/guides/gs/actuator-service/"" rel=""nofollow noreferrer"">Actuator Guide</a> code:</p>

<pre><code>@TestPropertySource(properties = {""management.port=0""})
</code></pre>

<p>And then 
...</p>

<pre><code>@Value(""${local.management.port}"")
private int mgt;
</code></pre>

<p>Here is the source class <a href=""https://github.com/spring-guides/gs-actuator-service/blob/master/complete/src/test/java/hello/HelloWorldApplicationTests.java"" rel=""nofollow noreferrer"">https://github.com/spring-guides/gs-actuator-service/blob/master/complete/src/test/java/hello/HelloWorldApplicationTests.java</a></p>

<p>What's the difference between
 <code>management.server.port</code>, 
<code>management.port</code> and
 <code>local.management.port</code>?</p>
",9152953,,,,,2018-10-02 11:43:36,What's the difference between management.server.port and management.port properties?,<spring-boot-actuator>,1,0,,,
Spring,53816713,1,,,,,,12/17/2018 13:56:12,,1,81,"<p>I've installed it and I've set the path (C:\Program Files\Git\bin\git.exe). i've also tried this tutorial <a href=""https://docs.microsoft.com/sl-si/azure/jenkins/install-jenkins-solution-template"" rel=""nofollow noreferrer"">https://docs.microsoft.com/sl-si/azure/jenkins/install-jenkins-solution-template</a> but it also gives me this console output.</p>

<p>I've installed it, I've set the git path, I still get this. I've been stuck here for a couple days, every build I make gives me a similar error message.
i use a windows 10 computer, and i have a linux VM on azure. </p>

<p>The Free Swap Space on my on the azure node in jenkins says its on 0B, but there is 26,99GB of Free Temp Space. Is maybie that the problem? </p>

<p>Anyway this is my console output for the tutorial i've completed: </p>

<pre><code>Started by user admin
Building remotely on testadminjenkinsazure115f10 (ubuntu) in workspace /home/Jenkinsadmin/workspace/mySampleApp
[WS-CLEANUP] Deleting project workspace...
[WS-CLEANUP] Deferred wipeout is used...
[WS-CLEANUP] Done
Cloning the remote Git repository
Cloning repository https://github.com/spring-guides/gs-spring-boot.git
 &gt; C:\Program Files\Git\bin\git.exe init /home/Jenkinsadmin/workspace/mySampleApp # timeout=10
ERROR: Error cloning remote repo 'origin'
hudson.plugins.git.GitException: Could not init /home/Jenkinsadmin/workspace/mySampleApp
    at org.jenkinsci.plugins.gitclient.CliGitAPIImpl$5.execute(CliGitAPIImpl.java:787)
    at org.jenkinsci.plugins.gitclient.CliGitAPIImpl$2.execute(CliGitAPIImpl.java:579)
    at org.jenkinsci.plugins.gitclient.RemoteGitImpl$CommandInvocationHandler$1.call(RemoteGitImpl.java:153)
    at org.jenkinsci.plugins.gitclient.RemoteGitImpl$CommandInvocationHandler$1.call(RemoteGitImpl.java:146)
    at hudson.remoting.UserRequest.perform(UserRequest.java:212)
    at hudson.remoting.UserRequest.perform(UserRequest.java:54)
    at hudson.remoting.Request$2.run(Request.java:369)
    at hudson.remoting.InterceptingExecutorService$1.call(InterceptingExecutorService.java:72)
    at java.util.concurrent.FutureTask.run(FutureTask.java:266)
    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
    at java.lang.Thread.run(Thread.java:748)
    Suppressed: hudson.remoting.Channel$CallSiteStackTrace: Remote call to testadminjenkinsazure115f10
        at hudson.remoting.Channel.attachCallSiteStackTrace(Channel.java:1741)
        at hudson.remoting.UserRequest$ExceptionResponse.retrieve(UserRequest.java:357)
        at hudson.remoting.Channel.call(Channel.java:955)
        at org.jenkinsci.plugins.gitclient.RemoteGitImpl$CommandInvocationHandler.execute(RemoteGitImpl.java:146)
        at sun.reflect.GeneratedMethodAccessor870.invoke(Unknown Source)
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
        at java.lang.reflect.Method.invoke(Unknown Source)
        at org.jenkinsci.plugins.gitclient.RemoteGitImpl$CommandInvocationHandler.invoke(RemoteGitImpl.java:132)
        at com.sun.proxy.$Proxy222.execute(Unknown Source)
        at hudson.plugins.git.GitSCM.retrieveChanges(GitSCM.java:1146)
        at hudson.plugins.git.GitSCM.checkout(GitSCM.java:1186)
        at hudson.scm.SCM.checkout(SCM.java:504)
        at hudson.model.AbstractProject.checkout(AbstractProject.java:1208)
        at hudson.model.AbstractBuild$AbstractBuildExecution.defaultCheckout(AbstractBuild.java:574)
        at jenkins.scm.SCMCheckoutStrategy.checkout(SCMCheckoutStrategy.java:86)
        at hudson.model.AbstractBuild$AbstractBuildExecution.run(AbstractBuild.java:499)
        at hudson.model.Run.execute(Run.java:1810)
        at hudson.model.FreeStyleBuild.run(FreeStyleBuild.java:43)
        at hudson.model.ResourceController.execute(ResourceController.java:97)
        at hudson.model.Executor.run(Executor.java:429)
Caused by: hudson.plugins.git.GitException: Error performing command: C:\Program Files\Git\bin\git.exe init /home/Jenkinsadmin/workspace/mySampleApp
    at org.jenkinsci.plugins.gitclient.CliGitAPIImpl.launchCommandIn(CliGitAPIImpl.java:2023)
    at org.jenkinsci.plugins.gitclient.CliGitAPIImpl.launchCommandIn(CliGitAPIImpl.java:1984)
    at org.jenkinsci.plugins.gitclient.CliGitAPIImpl.launchCommandIn(CliGitAPIImpl.java:1980)
    at org.jenkinsci.plugins.gitclient.CliGitAPIImpl.launchCommand(CliGitAPIImpl.java:1612)
    at org.jenkinsci.plugins.gitclient.CliGitAPIImpl$5.execute(CliGitAPIImpl.java:785)
    ... 11 more
Caused by: java.io.IOException: Cannot run program ""C:\Program Files\Git\bin\git.exe"" (in directory ""/home/Jenkinsadmin/workspace/mySampleApp""): error=2, No such file or directory
    at java.lang.ProcessBuilder.start(ProcessBuilder.java:1048)
    at hudson.Proc$LocalProc.&lt;init&gt;(Proc.java:249)
    at hudson.Proc$LocalProc.&lt;init&gt;(Proc.java:218)
    at hudson.Launcher$LocalLauncher.launch(Launcher.java:936)
    at hudson.Launcher$ProcStarter.start(Launcher.java:455)
    at org.jenkinsci.plugins.gitclient.CliGitAPIImpl.launchCommandIn(CliGitAPIImpl.java:2012)
    ... 15 more
Caused by: java.io.IOException: error=2, No such file or directory
    at java.lang.UNIXProcess.forkAndExec(Native Method)
    at java.lang.UNIXProcess.&lt;init&gt;(UNIXProcess.java:247)
    at java.lang.ProcessImpl.start(ProcessImpl.java:134)
    at java.lang.ProcessBuilder.start(ProcessBuilder.java:1029)
    ... 20 more
ERROR: Error cloning remote repo 'origin'
Finished: FAILURE
</code></pre>
",10712728,,3957754,,2018-12-21 3:31:03,2018-12-22 13:37:46,How deploy source code as an application in a linux virtual machine on Azure using Jenkins?,<git><azure><jenkins><virtual-machine><jenkins-plugins>,2,5,,,
Spring,55564608,1,,,,,,4/7/2019 23:40:05,,1,230,"<p>I'm trying to learn how to connect my Java Spring app to my MongoDB database. I'm following this guide:</p>

<p><a href=""https://spring.io/guides/gs/accessing-data-mongodb/"" rel=""nofollow noreferrer"">https://spring.io/guides/gs/accessing-data-mongodb/</a></p>

<p>I'm trying to learn the ""Create simple queries"" section. </p>

<pre><code>package hello;

import java.util.List;

import org.springframework.data.mongodb.repository.MongoRepository;

public interface CustomerRepository extends MongoRepository&lt;Customer, String&gt; {

    public Customer findByFirstName(String firstName);
    public List&lt;Customer&gt; findByLastName(String lastName);

}
</code></pre>

<p>They show extending the MongoRepository interface and defining certain methods. However these methods are not overrides and are not methods inherited from the interface. It doesn't appear as if they implement these methods anywhere for the actual implementation, so I'm incredibly confused how this works.</p>

<blockquote>
  <p>""You can define other queries as needed by simply declaring their
  method signature. In this case, you add findByFirstName, which
  essentially seeks documents of type Customer and finds the one that
  matches on firstName.""</p>
</blockquote>

<p>Here's the repository for the full code for the tutorial: <a href=""https://github.com/spring-guides/gs-accessing-data-mongodb"" rel=""nofollow noreferrer"">https://github.com/spring-guides/gs-accessing-data-mongodb</a></p>

<p>I'm incredibly confused how definding a new method in the interface without implementing that method myself magically allows me to construct queries...anyone can shed some light?</p>
",8887398,,,,,2019-04-08 0:01:42,How does Java Spring query MongoDB?,<java><spring><mongodb>,1,0,,,
